{"version":3,"file":"ngl.esm.js","sources":["src/polyfills.js","src/utils.js","src/utils/registry.js","src/math/math-utils.js","src/color/colormaker.js","src/selection/selection-constants.js","src/selection/selection-parser.js","src/selection/selection-test.js","src/selection/selection.js","src/color/selection-colormaker.js","src/color/colormaker-registry.js","src/parser/parser-registry.js","src/worker/worker-utils.js","src/worker/worker-registry.js","src/globals.js","src/streamer/streamer.js","src/streamer/file-streamer.js","src/streamer/network-streamer.js","src/loader/loader.js","src/loader/parser-loader.js","src/script.js","src/loader/script-loader.js","src/loader/loader-utils.js","src/writer/writer.js","src/writer/pdb-writer.js","src/writer/sdf-writer.js","src/utils/io-buffer.js","src/writer/stl-writer.js","src/utils/counter.js","src/viewer/stats.js","src/shader/shader-utils.js","src/viewer/viewer-constants.js","src/viewer/tiled-renderer.js","src/math/math-constants.js","src/math/array-utils.js","src/viewer/viewer-utils.js","src/viewer/gl-utils.js","src/viewer/viewer.js","src/constants.js","src/stage/mouse-observer.js","src/controls/trackball-controls.js","src/controls/picking-proxy.js","src/controls/picking-controls.js","src/controls/viewer-controls.js","src/animation/animation.js","src/controls/animation-controls.js","src/utils/queue.js","src/representation/representation.js","src/worker/worker.js","src/worker/worker-pool.js","src/math/vector-utils.js","src/geometry/dash.js","src/geometry/primitive.js","src/geometry/spatial-hash.js","src/store/store.js","src/store/contact-store.js","src/utils/bitarray.js","src/utils/adjacency-list.js","src/chemistry/interactions/features.js","src/structure/structure-constants.js","src/chemistry/geometry.js","src/chemistry/valence-model.js","src/structure/data.js","src/chemistry/functional-groups.js","src/chemistry/interactions/charged.js","src/chemistry/interactions/hydrogen-bonds.js","src/chemistry/interactions/metal-binding.js","src/chemistry/interactions/hydrophobic.js","src/chemistry/interactions/halogen-bonds.js","src/chemistry/interactions/refine-contacts.js","src/chemistry/interactions/contact.js","src/utils/picker.js","src/surface/marching-cubes.js","src/math/matrix-utils.js","src/surface/surface-utils.js","src/surface/surface.js","src/surface/volume.js","src/buffer/buffer.js","src/buffer/mesh-buffer.js","src/buffer/surface-buffer.js","src/buffer/doublesided-buffer.js","src/buffer/contour-buffer.js","src/representation/surface-representation.js","src/component/annotation.js","src/controls/component-controls.js","src/utils/radius-factory.js","src/math/principal-axes.js","src/surface/filtered-volume.js","src/store/bond-hash.js","src/store/bond-store.js","src/store/atom-store.js","src/store/residue-store.js","src/store/chain-store.js","src/store/model-store.js","src/geometry/helixorient.js","src/geometry/helixbundle.js","src/utils/binary-heap.js","src/utils/kdtree.js","src/proxy/atom-proxy.js","src/geometry/kdtree.js","src/symmetry/symmetry-constants.js","src/symmetry/symmetry-utils.js","src/symmetry/assembly.js","src/structure/structure-builder.js","src/structure/structure-utils.js","src/store/atom-type.js","src/store/atom-map.js","src/store/residue-type.js","src/store/residue-map.js","src/proxy/bond-proxy.js","src/proxy/residue-proxy.js","src/proxy/polymer.js","src/proxy/chain-proxy.js","src/proxy/model-proxy.js","src/structure/structure.js","src/geometry/shape.js","src/representation/buffer-representation.js","src/buffer/geometry-buffer.js","src/buffer/spheregeometry-buffer.js","src/buffer/mapped-buffer.js","src/buffer/mappedquad-buffer.js","src/buffer/sphereimpostor-buffer.js","src/buffer/sphere-buffer.js","src/buffer/point-buffer.js","src/representation/dot-representation.js","src/buffer/image-buffer.js","src/surface/volume-slice.js","src/representation/slice-representation.js","src/representation/representation-utils.js","src/component/element.js","src/component/representation-element.js","src/component/component.js","src/component/collection.js","src/component/representation-collection.js","src/component/trajectory-element.js","src/trajectory/frames.js","src/align/superposition.js","src/trajectory/trajectory-player.js","src/trajectory/trajectory.js","src/trajectory/frames-trajectory.js","src/trajectory/structure-trajectory.js","src/trajectory/remote-trajectory.js","src/trajectory/trajectory-utils.js","src/structure/structure-view.js","src/align/alignment.js","src/align/align-utils.js","src/component/structure-component.js","src/geometry/spline.js","src/representation/structure-representation.js","src/buffer/tubemesh-buffer.js","src/representation/cartoon-representation.js","src/buffer/cylindergeometry-buffer.js","src/buffer/mappedalignedbox-buffer.js","src/buffer/cylinderimpostor-buffer.js","src/buffer/cylinder-buffer.js","src/buffer/wideline-buffer.js","src/representation/ballandstick-representation.js","src/controls/TEST.js","src/controls/mouse-actions.js","src/controls/mouse-controls.js","src/controls/key-actions.js","src/controls/key-controls.js","src/stage/picking-behavior.js","src/stage/mouse-behavior.js","src/stage/animation-behavior.js","src/stage/key-behavior.js","src/component/surface-component.js","src/component/volume-component.js","src/component/component-collection.js","src/stage/stage.js","src/component/shape-component.js","src/color/atomindex-colormaker.js","src/color/bfactor-colormaker.js","src/color/chainid-colormaker.js","src/color/chainindex-colormaker.js","src/color/chainname-colormaker.js","src/color/densityfit-colormaker.js","src/color/electrostatic-colormaker.js","src/color/element-colormaker.js","src/color/entityindex-colormaker.js","src/color/entitytype-colormaker.js","src/color/geoquality-colormaker.js","src/color/hydrophobicity-colormaker.js","src/color/modelindex-colormaker.js","src/color/moleculetype-colormaker.js","src/color/occupancy-colormaker.js","src/color/partialcharge-colormaker.js","src/color/random-colormaker.js","src/color/randomcoilindex-colormaker.js","src/color/residueindex-colormaker.js","src/color/resname-colormaker.js","src/color/sstruc-colormaker.js","src/color/uniform-colormaker.js","src/color/value-colormaker.js","src/color/volume-colormaker.js","src/representation/measurement-representation.js","src/utils/edt.js","src/buffer/text-buffer.js","src/representation/angle-representation.js","src/representation/axes-representation.js","src/representation/backbone-representation.js","src/representation/base-representation.js","src/representation/contact-representation.js","src/representation/dihedral-representation.js","src/representation/dihedral-histogram-representation.js","src/representation/distance-representation.js","src/buffer/vector-buffer.js","src/representation/helixorient-representation.js","src/representation/licorice-representation.js","src/buffer/mappedbox-buffer.js","src/buffer/hyperballstickimpostor-buffer.js","src/buffer/hyperballstick-buffer.js","src/representation/hyperball-representation.js","src/utils/label-factory.js","src/representation/label-representation.js","src/representation/line-representation.js","src/geometry/grid.js","src/surface/edt-surface.js","src/surface/av-surface.js","src/surface/molecular-surface.js","src/representation/molecularsurface-representation.js","src/representation/point-representation.js","src/buffer/ribbon-buffer.js","src/representation/ribbon-representation.js","src/representation/rocket-representation.js","src/representation/rope-representation.js","src/representation/spacefill-representation.js","src/buffer/trace-buffer.js","src/representation/trace-representation.js","src/representation/tube-representation.js","src/representation/unitcell-representation.js","src/representation/validation-representation.js","src/buffer/cone-buffer.js","src/viewer/geometry-group.js","src/buffer/arrow-buffer.js","src/buffer/box-buffer.js","src/buffer/ellipsoid-buffer.js","src/buffer/octahedron-buffer.js","src/buffer/tetrahedron-buffer.js","src/buffer/torus-buffer.js","src/parser/parser.js","src/parser/structure-parser.js","src/structure/entity.js","src/symmetry/unitcell.js","src/parser/pdb-parser.js","src/parser/cif-parser.js","src/parser/gro-parser.js","lib/mmtf.es6.js","src/parser/mmtf-parser.js","src/parser/mol2-parser.js","src/parser/pdbqt-parser.js","src/parser/pqr-parser.js","src/parser/sdf-parser.js","src/parser/prmtop-parser.js","src/parser/psf-parser.js","src/parser/top-parser.js","src/parser/trajectory-parser.js","src/parser/dcd-parser.js","src/utils/netcdf-reader.js","src/parser/nctraj-parser.js","src/parser/trr-parser.js","src/parser/xtc-parser.js","src/parser/volume-parser.js","src/parser/cube-parser.js","src/parser/dsn6-parser.js","src/parser/dx-parser.js","src/parser/dxbin-parser.js","src/parser/mrc-parser.js","src/parser/xplor-parser.js","src/parser/kin-parser.js","src/parser/surface-parser.js","src/parser/obj-parser.js","src/parser/ply-parser.js","src/parser/csv-parser.js","src/parser/json-parser.js","src/parser/msgpack-parser.js","src/parser/netcdf-parser.js","src/parser/text-parser.js","src/utils/parse-xml.js","src/parser/xml-parser.js","src/structure/validation.js","src/parser/validation-parser.js","lib/pako_inflate.es6.js","src/utils/gzip-decompressor.js","src/datasource/datasource.js","src/datasource/rcsb-datasource.js","src/datasource/pubchem-datasource.js","src/datasource/passthrough-datasource.js","src/datasource/static-datasource.js","src/datasource/mdsrv-datasource.js","src/ui/parameters.js","src/version.js","src/marilia_custom_classes/CustomComponent.js","src/ngl.js"],"sourcesContent":["/**\r\n * @file shims\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\n\r\n/// ///////////\r\n// Polyfills\r\n\r\nif (typeof window !== 'undefined') {\r\n  (function () {\r\n    'use strict'\r\n    // Console-polyfill. MIT license.\r\n    // https://github.com/paulmillr/console-polyfill\r\n    // Make it safe to do console.log() always.\r\n\r\n    window.console = window.console || {}\r\n    var con = window.console\r\n    var prop, method\r\n    var empty = {}\r\n    var dummy = function () {}\r\n    var properties = 'memory'.split(',')\r\n    var methods = (\r\n      'assert,clear,count,debug,dir,dirxml,error,exception,group,' +\r\n      'groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,' +\r\n      'show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn'\r\n    ).split(',')\r\n\r\n    while ((prop = properties.pop())) if (!con[prop]) con[prop] = empty\r\n    while ((method = methods.pop())) if (!con[method]) con[method] = dummy\r\n  })()\r\n}\r\n\r\nif (typeof window !== 'undefined' && typeof window.HTMLCanvasElement !== 'undefined' && !window.HTMLCanvasElement.prototype.toBlob) {\r\n  // http://code.google.com/p/chromium/issues/detail?id=67587#57\r\n  Object.defineProperty(window.HTMLCanvasElement.prototype, 'toBlob', {\r\n\r\n    value: function (callback, type, quality) {\r\n      var bin = window.atob(this.toDataURL(type, quality).split(',')[ 1 ])\r\n      var len = bin.length\r\n      var len32 = len >> 2\r\n      var a8 = new Uint8Array(len)\r\n      var a32 = new Uint32Array(a8.buffer, 0, len32)\r\n\r\n      for (var i = 0, j = 0; i < len32; i++) {\r\n        a32[i] = (\r\n          bin.charCodeAt(j++) |\r\n          bin.charCodeAt(j++) << 8 |\r\n          bin.charCodeAt(j++) << 16 |\r\n          bin.charCodeAt(j++) << 24\r\n        )\r\n      }\r\n\r\n      var tailLength = len & 3\r\n\r\n      while (tailLength--) {\r\n        a8[ j ] = bin.charCodeAt(j++)\r\n      }\r\n\r\n      callback(new window.Blob([ a8 ], { 'type': type || 'image/png' }))\r\n    }\r\n\r\n  })\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cbrt\r\nMath.cbrt = Math.cbrt || function (x) {\r\n  var y = Math.pow(Math.abs(x), 1 / 3)\r\n  return x < 0 ? -y : y\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\nif (!Math.sign) {\r\n  Math.sign = function (x) {\r\n    // If x is NaN, the result is NaN.\r\n    // If x is -0, the result is -0.\r\n    // If x is +0, the result is +0.\r\n    // If x is negative and not -0, the result is -1.\r\n    // If x is positive and not +0, the result is +1.\r\n    x = +x // convert to a number\r\n    if (x === 0 || isNaN(x)) {\r\n      return Number(x)\r\n    }\r\n    return x > 0 ? 1 : -1\r\n  }\r\n}\r\n\r\nif (!Number.isInteger) {\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\r\n  Number.isInteger = function isInteger (nVal) {\r\n    return typeof nVal === 'number' && isFinite(nVal) && nVal > -9007199254740992 && nVal < 9007199254740992 && Math.floor(nVal) === nVal\r\n  }\r\n}\r\n\r\nif (!Number.isNaN) {\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN\r\n  Number.isNaN = function isNaN (value) {\r\n    return value !== value // eslint-disable-line no-self-compare\r\n  }\r\n}\r\n\r\nif (!Object.assign) {\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n  Object.defineProperty(Object, 'assign', {\r\n\r\n    enumerable: false,\r\n    configurable: true,\r\n    writable: true,\r\n\r\n    value: function (target/*, firstSource */) {\r\n      'use strict'\r\n      if (target === undefined || target === null) { throw new TypeError('Cannot convert first argument to object') }\r\n\r\n      var to = Object(target)\r\n\r\n      var hasPendingException = false\r\n      var pendingException\r\n\r\n      for (var i = 1; i < arguments.length; i++) {\r\n        var nextSource = arguments[i]\r\n        if (nextSource === undefined || nextSource === null) { continue }\r\n\r\n        var keysArray = Object.keys(Object(nextSource))\r\n        for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n          var nextKey = keysArray[nextIndex]\r\n          try {\r\n            var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey)\r\n            if (desc !== undefined && desc.enumerable) { to[nextKey] = nextSource[nextKey] }\r\n          } catch (e) {\r\n            if (!hasPendingException) {\r\n              hasPendingException = true\r\n              pendingException = e\r\n            }\r\n          }\r\n        }\r\n\r\n        if (hasPendingException) { throw pendingException }\r\n      }\r\n\r\n      return to\r\n    }\r\n\r\n  })\r\n}\r\n\r\nif (!String.prototype.startsWith) {\r\n  /*! https://mths.be/startswith v0.2.0 by @mathias */\r\n\r\n  (function () {\r\n    'use strict' // needed to support `apply`/`call` with `undefined`/`null`\r\n    var defineProperty = (function () {\r\n      // IE 8 only supports `Object.defineProperty` on DOM elements\r\n      var result\r\n      try {\r\n        var object = {}\r\n        var $defineProperty = Object.defineProperty\r\n        result = $defineProperty(object, object, object) && $defineProperty\r\n      } catch (error) {} // eslint-disable-line no-empty\r\n      return result\r\n    }())\r\n    var toString = {}.toString\r\n    var startsWith = function (search) {\r\n      if (this === null) {\r\n        throw TypeError()\r\n      }\r\n      var string = String(this)\r\n      if (search && toString.call(search) === '[object RegExp]') {\r\n        throw TypeError()\r\n      }\r\n      var stringLength = string.length\r\n      var searchString = String(search)\r\n      var searchLength = searchString.length\r\n      var position = arguments.length > 1 ? arguments[1] : undefined\r\n      // `ToInteger`\r\n      var pos = position ? Number(position) : 0\r\n      if (Number.isNaN(pos)) {\r\n        pos = 0\r\n      }\r\n      var start = Math.min(Math.max(pos, 0), stringLength)\r\n      // Avoid the `indexOf` call if no match is possible\r\n      if (searchLength + start > stringLength) {\r\n        return false\r\n      }\r\n      var index = -1\r\n      while (++index < searchLength) {\r\n        if (string.charCodeAt(start + index) !== searchString.charCodeAt(index)) {\r\n          return false\r\n        }\r\n      }\r\n      return true\r\n    }\r\n    if (defineProperty) {\r\n      defineProperty(String.prototype, 'startsWith', {\r\n        'value': startsWith,\r\n        'configurable': true,\r\n        'writable': true\r\n      })\r\n    } else {\r\n      // eslint-disable-next-line no-extend-native\r\n      String.prototype.startsWith = startsWith\r\n    }\r\n  }())\r\n}\r\n\r\nif (!String.prototype.endsWith) {\r\n  // eslint-disable-next-line no-extend-native\r\n  String.prototype.endsWith = function (searchString, position) {\r\n    var subjectString = this.toString()\r\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\r\n      position = subjectString.length\r\n    }\r\n    position -= searchString.length\r\n    var lastIndex = subjectString.indexOf(searchString, position)\r\n    return lastIndex !== -1 && lastIndex === position\r\n  }\r\n}\r\n\r\nif (!String.prototype.repeat) {\r\n  // eslint-disable-next-line no-extend-native\r\n  String.prototype.repeat = function (count) {\r\n    'use strict'\r\n    if (this === null) {\r\n      throw new TypeError('can\\'t convert ' + this + ' to object')\r\n    }\r\n    var str = '' + this\r\n    count = +count\r\n    if (Number.isNaN(count)) {\r\n      count = 0\r\n    }\r\n    if (count < 0) {\r\n      throw new RangeError('repeat count must be non-negative')\r\n    }\r\n    if (count === Infinity) {\r\n      throw new RangeError('repeat count must be less than infinity')\r\n    }\r\n    count = Math.floor(count)\r\n    if (str.length === 0 || count === 0) {\r\n      return ''\r\n    }\r\n    // Ensuring count is a 31-bit integer allows us to heavily optimize the\r\n    // main part. But anyway, most current (August 2014) browsers can't handle\r\n    // strings 1 << 28 chars or longer, so:\r\n    if (str.length * count >= 1 << 28) {\r\n      throw new RangeError('repeat count must not overflow maximum string size')\r\n    }\r\n    var rpt = ''\r\n    for (;;) {\r\n      if ((count & 1) === 1) {\r\n        rpt += str\r\n      }\r\n      count >>>= 1\r\n      if (count === 0) {\r\n        break\r\n      }\r\n      str += str\r\n    }\r\n    // Could we try:\r\n    // return Array(count + 1).join(this);\r\n    return rpt\r\n  }\r\n}\r\n\r\nif (!String.prototype.includes) {\r\n  // eslint-disable-next-line no-extend-native\r\n  String.prototype.includes = function (search, start) {\r\n    'use strict'\r\n    if (typeof start !== 'number') {\r\n      start = 0\r\n    }\r\n\r\n    if (start + search.length > this.length) {\r\n      return false\r\n    } else {\r\n      return this.indexOf(search, start) !== -1\r\n    }\r\n  }\r\n}\r\n\r\nif (!Array.prototype.includes) {\r\n  // eslint-disable-next-line no-extend-native\r\n  Array.prototype.includes = function (searchElement /*, fromIndex */) {\r\n    'use strict'\r\n    if (this == null) {\r\n      throw new TypeError('Array.prototype.includes called on null or undefined')\r\n    }\r\n\r\n    var O = Object(this)\r\n    var len = parseInt(O.length, 10) || 0\r\n    if (len === 0) {\r\n      return false\r\n    }\r\n    var n = parseInt(arguments[1], 10) || 0\r\n    var k\r\n    if (n >= 0) {\r\n      k = n\r\n    } else {\r\n      k = len + n\r\n      if (k < 0) { k = 0 }\r\n    }\r\n    var currentElement\r\n    while (k < len) {\r\n      currentElement = O[k]\r\n      if (searchElement === currentElement ||\r\n          (Number.isNaN(searchElement) && Number.isNaN(currentElement))\r\n      ) {\r\n        return true\r\n      }\r\n      k++\r\n    }\r\n    return false\r\n  }\r\n}\r\n\r\n// Production steps of ECMA-262, Edition 6, 22.1.2.1\r\n// Reference: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-array.from\r\nif (!Array.from) {\r\n  Array.from = (function () {\r\n    var toStr = Object.prototype.toString\r\n    var isCallable = function (fn) {\r\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]'\r\n    }\r\n    var toInteger = function (value) {\r\n      var number = Number(value)\r\n      if (isNaN(number)) { return 0 }\r\n      if (number === 0 || !isFinite(number)) { return number }\r\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number))\r\n    }\r\n    var maxSafeInteger = Math.pow(2, 53) - 1\r\n    var toLength = function (value) {\r\n      var len = toInteger(value)\r\n      return Math.min(Math.max(len, 0), maxSafeInteger)\r\n    }\r\n\r\n    // The length property of the from method is 1.\r\n    return function from (arrayLike/*, mapFn, thisArg */) {\r\n      // 1. Let C be the this value.\r\n      var C = this\r\n\r\n      // 2. Let items be ToObject(arrayLike).\r\n      var items = Object(arrayLike)\r\n\r\n      // 3. ReturnIfAbrupt(items).\r\n      if (arrayLike == null) {\r\n        throw new TypeError('Array.from requires an array-like object - not null or undefined')\r\n      }\r\n\r\n      // 4. If mapfn is undefined, then let mapping be false.\r\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined\r\n      var T\r\n      if (typeof mapFn !== 'undefined') {\r\n        // 5. else\r\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\r\n        if (!isCallable(mapFn)) {\r\n          throw new TypeError('Array.from: when provided, the second argument must be a function')\r\n        }\r\n\r\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n        if (arguments.length > 2) {\r\n          T = arguments[2]\r\n        }\r\n      }\r\n\r\n      // 10. Let lenValue be Get(items, \"length\").\r\n      // 11. Let len be ToLength(lenValue).\r\n      var len = toLength(items.length)\r\n\r\n      // 13. If IsConstructor(C) is true, then\r\n      // 13. a. Let A be the result of calling the [[Construct]] internal method of C with an argument list containing the single item len.\r\n      // 14. a. Else, Let A be ArrayCreate(len).\r\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len)\r\n\r\n      // 16. Let k be 0.\r\n      var k = 0\r\n      // 17. Repeat, while k < len… (also steps a - h)\r\n      var kValue\r\n      while (k < len) {\r\n        kValue = items[k]\r\n        if (mapFn) {\r\n          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k)\r\n        } else {\r\n          A[k] = kValue\r\n        }\r\n        k += 1\r\n      }\r\n      // 18. Let putStatus be Put(A, \"length\", len, true).\r\n      A.length = len\r\n      // 20. Return A.\r\n      return A\r\n    }\r\n  }())\r\n}\r\n\r\nif (typeof window !== 'undefined') {\r\n  (function () {\r\n    // http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n    // http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\r\n\r\n    // requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\r\n\r\n    // MIT license\r\n\r\n    var lastTime = 0\r\n    var vendors = [ 'ms', 'moz', 'webkit', 'o' ]\r\n\r\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n      window.requestAnimationFrame = (\r\n        window[ vendors[ x ] + 'RequestAnimationFrame' ]\r\n      )\r\n\r\n      window.cancelAnimationFrame = (\r\n        window[ vendors[ x ] + 'CancelAnimationFrame' ] ||\r\n        window[ vendors[ x ] + 'CancelRequestAnimationFrame' ]\r\n      )\r\n    }\r\n\r\n    if (!window.requestAnimationFrame) {\r\n      window.requestAnimationFrame = function (callback/*, element */) {\r\n        var currTime = new Date().getTime()\r\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime))\r\n\r\n        var id = window.setTimeout(function () {\r\n          var time = currTime + timeToCall\r\n          callback(time)\r\n        }, timeToCall)\r\n\r\n        lastTime = currTime + timeToCall\r\n\r\n        return id\r\n      }\r\n    }\r\n\r\n    if (!window.cancelAnimationFrame) {\r\n      window.cancelAnimationFrame = function (id) {\r\n        clearTimeout(id)\r\n      }\r\n    }\r\n  }())\r\n}\r\n\r\nif (Function.prototype.name === undefined && Object.defineProperty !== undefined) {\r\n  // Missing in IE9-11.\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n  // eslint-disable-next-line no-extend-native\r\n  Object.defineProperty(Function.prototype, 'name', {\r\n\r\n    get: function () {\r\n      return this.toString().match(/^\\s*function\\s*(\\S*)\\s*\\(/)[ 1 ]\r\n    }\r\n\r\n  })\r\n}\r\n\r\nif (typeof window !== 'undefined') {\r\n  if (window.performance === undefined) {\r\n    /* global self */\r\n    self.performance = {}\r\n  }\r\n\r\n  if (window.performance.now === undefined) {\r\n    (function () {\r\n      var start = Date.now()\r\n\r\n      window.performance.now = function () {\r\n        return Date.now() - start\r\n      }\r\n    })()\r\n  }\r\n}\r\n\r\nif (Object.defineProperty !== undefined) {\r\n  // Missing in IE < 13\r\n  // MIT license\r\n  // Copyright (c) 2016 Financial Times\r\n  // https://github.com/Financial-Times/polyfill-service\r\n  if (Number.MAX_SAFE_INTEGER === undefined) {\r\n    Object.defineProperty(Number, 'MAX_SAFE_INTEGER', {\r\n      enumerable: false,\r\n      configurable: false,\r\n      writable: false,\r\n      value: Math.pow(2, 53) - 1\r\n    })\r\n  }\r\n  if (Number.MIN_SAFE_INTEGER === undefined) {\r\n    Object.defineProperty(Number, 'MIN_SAFE_INTEGER', {\r\n      enumerable: false,\r\n      configurable: false,\r\n      writable: false,\r\n      value: -(Math.pow(2, 53) - 1)\r\n    })\r\n  }\r\n}\r\n","/**\r\n * @file Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector2, Vector3, Matrix4, Quaternion } from 'three';\r\nexport function getQuery(id) {\r\n    if (typeof window === 'undefined')\r\n        return undefined;\r\n    const a = new RegExp(`${id}=([^&#=]*)`);\r\n    const m = a.exec(window.location.search);\r\n    if (m) {\r\n        return decodeURIComponent(m[1]);\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nexport function boolean(value) {\r\n    if (!value) {\r\n        return false;\r\n    }\r\n    if (typeof value === 'string') {\r\n        return /^1|true|t|yes|y$/i.test(value);\r\n    }\r\n    return true;\r\n}\r\nexport function defaults(value, defaultValue) {\r\n    return value !== undefined ? value : defaultValue;\r\n}\r\nexport function createParams(params, defaultParams) {\r\n    const o = Object.assign({}, params);\r\n    for (const k in defaultParams) {\r\n        const value = params[k];\r\n        if (value === undefined)\r\n            o[k] = defaultParams[k];\r\n    }\r\n    return o;\r\n}\r\nexport function updateParams(params, newParams) {\r\n    for (const k in newParams) {\r\n        const value = newParams[k];\r\n        if (value !== undefined)\r\n            params[k] = value;\r\n    }\r\n    return params;\r\n}\r\nexport function pick(object) {\r\n    const properties = [].slice.call(arguments, 1);\r\n    return properties.reduce((a, e) => {\r\n        a[e] = object[e];\r\n        return a;\r\n    }, {});\r\n}\r\nexport function flatten(array, ret) {\r\n    ret = defaults(ret, []);\r\n    for (let i = 0; i < array.length; i++) {\r\n        if (Array.isArray(array[i])) {\r\n            flatten(array[i], ret);\r\n        }\r\n        else {\r\n            ret.push(array[i]);\r\n        }\r\n    }\r\n    return ret;\r\n}\r\nexport function getProtocol() {\r\n    const protocol = window.location.protocol;\r\n    return protocol.match(/http(s)?:/gi) === null ? 'http:' : protocol;\r\n}\r\nexport function getBrowser() {\r\n    if (typeof window === 'undefined')\r\n        return false;\r\n    const ua = window.navigator.userAgent;\r\n    if (/Opera|OPR/.test(ua)) {\r\n        return 'Opera';\r\n    }\r\n    else if (/Chrome/i.test(ua)) {\r\n        return 'Chrome';\r\n    }\r\n    else if (/Firefox/i.test(ua)) {\r\n        return 'Firefox';\r\n    }\r\n    else if (/Mobile(\\/.*)? Safari/i.test(ua)) {\r\n        return 'Mobile Safari';\r\n    }\r\n    else if (/MSIE/i.test(ua)) {\r\n        return 'Internet Explorer';\r\n    }\r\n    else if (/Safari/i.test(ua)) {\r\n        return 'Safari';\r\n    }\r\n    return false;\r\n}\r\nexport function getAbsolutePath(relativePath) {\r\n    const loc = window.location;\r\n    const pn = loc.pathname;\r\n    const basePath = pn.substring(0, pn.lastIndexOf('/') + 1);\r\n    return loc.origin + basePath + relativePath;\r\n}\r\nexport function deepCopy(src) {\r\n    if (typeof src !== 'object') {\r\n        return src;\r\n    }\r\n    const dst = Array.isArray(src) ? [] : {};\r\n    for (let key in src) {\r\n        dst[key] = deepCopy(src[key]);\r\n    }\r\n    return dst;\r\n}\r\nexport function deepEqual(a, b) {\r\n    // from https://github.com/epoberezkin/fast-deep-equal MIT\r\n    if (a === b)\r\n        return true;\r\n    const arrA = Array.isArray(a);\r\n    const arrB = Array.isArray(b);\r\n    if (arrA && arrB) {\r\n        if (a.length !== b.length)\r\n            return false;\r\n        for (let i = 0; i < a.length; i++) {\r\n            if (!deepEqual(a[i], b[i]))\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    if (arrA !== arrB)\r\n        return false;\r\n    if (a && b && typeof a === 'object' && typeof b === 'object') {\r\n        const keys = Object.keys(a);\r\n        if (keys.length !== Object.keys(b).length)\r\n            return false;\r\n        const dateA = a instanceof Date;\r\n        const dateB = b instanceof Date;\r\n        if (dateA && dateB)\r\n            return a.getTime() === b.getTime();\r\n        if (dateA !== dateB)\r\n            return false;\r\n        const regexpA = a instanceof RegExp;\r\n        const regexpB = b instanceof RegExp;\r\n        if (regexpA && regexpB)\r\n            return a.toString() === b.toString();\r\n        if (regexpA !== regexpB)\r\n            return false;\r\n        for (let i = 0; i < keys.length; i++) {\r\n            if (!Object.prototype.hasOwnProperty.call(b, keys[i]))\r\n                return false;\r\n        }\r\n        for (let i = 0; i < keys.length; i++) {\r\n            if (!deepEqual(a[keys[i]], b[keys[i]]))\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction openUrl(url) {\r\n    const opened = window.open(url, '_blank');\r\n    if (!opened) {\r\n        window.location.href = url;\r\n    }\r\n}\r\nexport function download(data, downloadName = 'download') {\r\n    // using ideas from https://github.com/eligrey/FileSaver.js/blob/master/FileSaver.js\r\n    if (!data)\r\n        return;\r\n    const isSafari = getBrowser() === 'Safari';\r\n    const isChromeIos = /CriOS\\/[\\d]+/.test(window.navigator.userAgent);\r\n    const a = document.createElement('a');\r\n    function open(str) {\r\n        openUrl(isChromeIos ? str : str.replace(/^data:[^;]*;/, 'data:attachment/file;'));\r\n    }\r\n    if (typeof navigator !== 'undefined' && navigator.msSaveOrOpenBlob) {\r\n        // native saveAs in IE 10+\r\n        navigator.msSaveOrOpenBlob(data, downloadName);\r\n    }\r\n    else if ((isSafari || isChromeIos) && FileReader) {\r\n        if (data instanceof Blob) {\r\n            // no downloading of blob urls in Safari\r\n            var reader = new FileReader();\r\n            reader.onloadend = function () {\r\n                open(reader.result);\r\n            };\r\n            reader.readAsDataURL(data);\r\n        }\r\n        else {\r\n            open(data);\r\n        }\r\n    }\r\n    else {\r\n        let objectUrlCreated = false;\r\n        if (data instanceof Blob) {\r\n            data = URL.createObjectURL(data);\r\n            objectUrlCreated = true;\r\n        }\r\n        if ('download' in a) {\r\n            // download link available\r\n            a.style.display = 'hidden';\r\n            document.body.appendChild(a);\r\n            a.href = data;\r\n            a.download = downloadName;\r\n            a.target = '_blank';\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        }\r\n        else {\r\n            openUrl(data);\r\n        }\r\n        if (objectUrlCreated) {\r\n            window.URL.revokeObjectURL(data);\r\n        }\r\n    }\r\n}\r\nexport function submit(url, data, callback, onerror) {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('POST', url);\r\n    xhr.addEventListener('load', function () {\r\n        if (xhr.status === 200 || xhr.status === 304) {\r\n            callback(xhr.response);\r\n        }\r\n        else {\r\n            if (typeof onerror === 'function') {\r\n                onerror(xhr.status);\r\n            }\r\n        }\r\n    }, false);\r\n    xhr.send(data);\r\n}\r\nexport function open(callback, extensionList = ['*']) {\r\n    const fileInput = document.createElement('input');\r\n    fileInput.type = 'file';\r\n    fileInput.multiple = true;\r\n    fileInput.style.display = 'hidden';\r\n    document.body.appendChild(fileInput);\r\n    fileInput.accept = '.' + extensionList.join(',.');\r\n    fileInput.addEventListener('change', function (e) {\r\n        callback(e.target.files);\r\n    }, false);\r\n    fileInput.click();\r\n}\r\nexport function throttle(func, wait, options) {\r\n    // from http://underscorejs.org/docs/underscore.html\r\n    let context;\r\n    let args;\r\n    let result;\r\n    let timeout = null;\r\n    let previous = 0;\r\n    if (!options)\r\n        options = {};\r\n    function later() {\r\n        previous = options.leading === false ? 0 : Date.now();\r\n        timeout = null;\r\n        result = func.apply(context, args);\r\n        if (!timeout)\r\n            context = args = null;\r\n    }\r\n    return function throttle() {\r\n        var now = Date.now();\r\n        if (!previous && options.leading === false)\r\n            previous = now;\r\n        var remaining = wait - (now - previous);\r\n        context = this;\r\n        args = arguments;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            result = func.apply(context, args);\r\n            if (!timeout)\r\n                context = args = null;\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(later, remaining);\r\n        }\r\n        return result;\r\n    };\r\n}\r\nexport function lexicographicCompare(elm1, elm2) {\r\n    if (elm1 < elm2)\r\n        return -1;\r\n    if (elm1 > elm2)\r\n        return 1;\r\n    return 0;\r\n}\r\n/**\r\n * Does a binary search to get the index of an element in the input array\r\n * @function\r\n * @example\r\n * var array = [ 1, 2, 3, 4, 5, 6 ];\r\n * var element = 4;\r\n * binarySearchIndexOf( array, element );  // returns 3\r\n *\r\n * @param {Array} array - sorted array\r\n * @param {Anything} element - element to search for in the array\r\n * @param {Function} [compareFunction] - compare function\r\n * @return {Number} the index of the element or -1 if not in the array\r\n */\r\nexport function binarySearchIndexOf(array, element, compareFunction = lexicographicCompare) {\r\n    let low = 0;\r\n    let high = array.length - 1;\r\n    while (low <= high) {\r\n        const mid = (low + high) >> 1;\r\n        const cmp = compareFunction(element, array[mid]);\r\n        if (cmp > 0) {\r\n            low = mid + 1;\r\n        }\r\n        else if (cmp < 0) {\r\n            high = mid - 1;\r\n        }\r\n        else {\r\n            return mid;\r\n        }\r\n    }\r\n    return -low - 1;\r\n}\r\nexport function binarySearchForLeftRange(array, leftRange) {\r\n    let high = array.length - 1;\r\n    if (array[high] < leftRange)\r\n        return -1;\r\n    let low = 0;\r\n    while (low <= high) {\r\n        const mid = (low + high) >> 1;\r\n        if (array[mid] >= leftRange) {\r\n            high = mid - 1;\r\n        }\r\n        else {\r\n            low = mid + 1;\r\n        }\r\n    }\r\n    return high + 1;\r\n}\r\nexport function binarySearchForRightRange(array, rightRange) {\r\n    if (array[0] > rightRange)\r\n        return -1;\r\n    let low = 0;\r\n    let high = array.length - 1;\r\n    while (low <= high) {\r\n        const mid = (low + high) >> 1;\r\n        if (array[mid] > rightRange) {\r\n            high = mid - 1;\r\n        }\r\n        else {\r\n            low = mid + 1;\r\n        }\r\n    }\r\n    return low - 1;\r\n}\r\nexport function rangeInSortedArray(array, min, max) {\r\n    const indexLeft = binarySearchForLeftRange(array, min);\r\n    const indexRight = binarySearchForRightRange(array, max);\r\n    if (indexLeft === -1 || indexRight === -1 || indexLeft > indexRight) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return indexRight - indexLeft + 1;\r\n    }\r\n}\r\nexport function dataURItoImage(dataURI) {\r\n    const img = document.createElement('img');\r\n    img.src = dataURI;\r\n    return img;\r\n}\r\nexport function uniqueArray(array) {\r\n    return array.sort().filter(function (value, index, sorted) {\r\n        return (index === 0) || (value !== sorted[index - 1]);\r\n    });\r\n}\r\n// String/arraybuffer conversion\r\nexport function uint8ToString(u8a) {\r\n    const chunkSize = 0x7000;\r\n    if (u8a.length > chunkSize) {\r\n        const c = [];\r\n        for (let i = 0; i < u8a.length; i += chunkSize) {\r\n            c.push(String.fromCharCode.apply(null, u8a.subarray(i, i + chunkSize)));\r\n        }\r\n        return c.join('');\r\n    }\r\n    else {\r\n        return String.fromCharCode.apply(null, u8a);\r\n    }\r\n}\r\nexport function uint8ToLines(u8a, chunkSize = 1024 * 1024 * 10, newline = '\\n') {\r\n    let partialLine = '';\r\n    let lines = [];\r\n    for (let i = 0; i < u8a.length; i += chunkSize) {\r\n        const str = uint8ToString(u8a.subarray(i, i + chunkSize));\r\n        const idx = str.lastIndexOf(newline);\r\n        if (idx === -1) {\r\n            partialLine += str;\r\n        }\r\n        else {\r\n            const str2 = partialLine + str.substr(0, idx);\r\n            lines = lines.concat(str2.split(newline));\r\n            if (idx === str.length - newline.length) {\r\n                partialLine = '';\r\n            }\r\n            else {\r\n                partialLine = str.substr(idx + newline.length);\r\n            }\r\n        }\r\n    }\r\n    if (partialLine !== '') {\r\n        lines.push(partialLine);\r\n    }\r\n    return lines;\r\n}\r\nexport function getTypedArray(arrayType, arraySize) {\r\n    switch (arrayType) {\r\n        case 'int8':\r\n            return new Int8Array(arraySize);\r\n        case 'int16':\r\n            return new Int16Array(arraySize);\r\n        case 'int32':\r\n            return new Int32Array(arraySize);\r\n        case 'uint8':\r\n            return new Uint8Array(arraySize);\r\n        case 'uint16':\r\n            return new Uint16Array(arraySize);\r\n        case 'uint32':\r\n            return new Uint32Array(arraySize);\r\n        case 'float32':\r\n            return new Float32Array(arraySize);\r\n        default:\r\n            throw new Error('arrayType unknown: ' + arrayType);\r\n    }\r\n}\r\nexport function getUintArray(sizeOrArray, maxUint) {\r\n    const TypedArray = maxUint > 65535 ? Uint32Array : Uint16Array;\r\n    return new TypedArray(sizeOrArray);\r\n}\r\nexport function ensureArray(value) {\r\n    return Array.isArray(value) ? value : [value];\r\n}\r\nexport function ensureBuffer(a) {\r\n    return (a.buffer && a.buffer instanceof ArrayBuffer) ? a.buffer : a;\r\n}\r\nfunction _ensureClassFromArg(arg, constructor) {\r\n    return arg instanceof constructor ? arg : new constructor(arg);\r\n}\r\nfunction _ensureClassFromArray(array, constructor) {\r\n    if (array === undefined) {\r\n        array = new constructor();\r\n    }\r\n    else if (Array.isArray(array)) {\r\n        array = new constructor().fromArray(array);\r\n    }\r\n    return array;\r\n}\r\nexport function ensureVector2(v) {\r\n    return _ensureClassFromArray(v, Vector2);\r\n}\r\nexport function ensureVector3(v) {\r\n    return _ensureClassFromArray(v, Vector3);\r\n}\r\nexport function ensureMatrix4(m) {\r\n    return _ensureClassFromArray(m, Matrix4);\r\n}\r\nexport function ensureQuaternion(q) {\r\n    return _ensureClassFromArray(q, Quaternion);\r\n}\r\nexport function ensureFloat32Array(a) {\r\n    return _ensureClassFromArg(a, Float32Array);\r\n}\r\nexport function createRingBuffer(length) {\r\n    let pointer = 0;\r\n    let count = 0;\r\n    const buffer = [];\r\n    return {\r\n        has: function (value) { return buffer.indexOf(value) !== -1; },\r\n        get: function (idx) { return buffer[idx]; },\r\n        push: function (item) {\r\n            buffer[pointer] = item;\r\n            pointer = (length + pointer + 1) % length;\r\n            ++count;\r\n        },\r\n        get count() { return count; },\r\n        get data() { return buffer.slice(0, Math.min(count, length)); },\r\n        clear: function () {\r\n            count = 0;\r\n            pointer = 0;\r\n            buffer.length = 0;\r\n        }\r\n    };\r\n}\r\nexport function createSimpleDict() {\r\n    const set = {};\r\n    return {\r\n        has: function (k) { return set[JSON.stringify(k)] !== undefined; },\r\n        add: function (k, v) { set[JSON.stringify(k)] = v; },\r\n        del: function (k) { delete set[JSON.stringify(k)]; },\r\n        get values() { return Object.keys(set).map(k => set[k]); }\r\n    };\r\n}\r\nexport function createSimpleSet() {\r\n    const set = {};\r\n    return {\r\n        has: function (v) { return set[JSON.stringify(v)] !== undefined; },\r\n        add: function (v) { set[JSON.stringify(v)] = v; },\r\n        del: function (v) { delete set[JSON.stringify(v)]; },\r\n        get list() { return Object.keys(set).map(k => set[k]); },\r\n    };\r\n}\r\n//# sourceMappingURL=utils.js.map","/**\r\n * @file Registry\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nfunction toLowerCaseString(value) {\r\n    return defaults(value, '').toString().toLowerCase();\r\n}\r\nexport default class Registry {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this._dict = {};\r\n    }\r\n    add(key, value) {\r\n        this._dict[toLowerCaseString(key)] = value;\r\n    }\r\n    get(key) {\r\n        return this._dict[toLowerCaseString(key)];\r\n    }\r\n    get names() {\r\n        return Object.keys(this._dict);\r\n    }\r\n}\r\n//# sourceMappingURL=registry.js.map","/**\r\n * @file Math Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nexport function degToRad(deg) {\r\n    return deg * 0.01745; // deg * Math.PI / 180\r\n}\r\nexport function radToDeg(rad) {\r\n    return rad * 57.29578; // rad * 180 / Math.PI\r\n}\r\n// http://www.broofa.com/Tools/Math.uuid.htm\r\nconst chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\r\nconst uuid = new Array(36);\r\nexport function generateUUID() {\r\n    let rnd = 0;\r\n    let r;\r\n    for (let i = 0; i < 36; i++) {\r\n        if (i === 8 || i === 13 || i === 18 || i === 23) {\r\n            uuid[i] = '-';\r\n        }\r\n        else if (i === 14) {\r\n            uuid[i] = '4';\r\n        }\r\n        else {\r\n            if (rnd <= 0x02)\r\n                rnd = 0x2000000 + (Math.random() * 0x1000000) | 0;\r\n            r = rnd & 0xf;\r\n            rnd = rnd >> 4;\r\n            uuid[i] = chars[(i === 19) ? (r & 0x3) | 0x8 : r];\r\n        }\r\n    }\r\n    return uuid.join('');\r\n}\r\nexport function countSetBits(i) {\r\n    i = i - ((i >> 1) & 0x55555555);\r\n    i = (i & 0x33333333) + ((i >> 2) & 0x33333333);\r\n    return (((i + (i >> 4)) & 0x0F0F0F0F) * 0x01010101) >> 24;\r\n}\r\nexport function normalize(value, min, max) {\r\n    return (value - min) / (max - min);\r\n}\r\nexport function clamp(value, min, max) {\r\n    return Math.max(min, Math.min(max, value));\r\n}\r\nexport function pclamp(value) {\r\n    return clamp(value, 0, 100);\r\n}\r\nexport function saturate(value) {\r\n    return clamp(value, 0, 1);\r\n}\r\nexport function lerp(start, stop, alpha) {\r\n    return start + (stop - start) * alpha;\r\n}\r\nexport function spline(p0, p1, p2, p3, t, tension) {\r\n    const v0 = (p2 - p0) * tension;\r\n    const v1 = (p3 - p1) * tension;\r\n    const t2 = t * t;\r\n    const t3 = t * t2;\r\n    return (2 * p1 - 2 * p2 + v0 + v1) * t3 +\r\n        (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 +\r\n        v0 * t + p1;\r\n}\r\nexport function smoothstep(min, max, x) {\r\n    x = saturate(normalize(x, min, max));\r\n    return x * x * (3 - 2 * x);\r\n}\r\nexport function smootherstep(min, max, x) {\r\n    x = saturate(normalize(x, min, max));\r\n    return x * x * x * (x * (x * 6 - 15) + 10);\r\n}\r\nexport function smootheststep(min, max, x) {\r\n    x = saturate(normalize(x, min, max));\r\n    return (-20 * Math.pow(x, 7) +\r\n        70 * Math.pow(x, 6) -\r\n        84 * Math.pow(x, 5) +\r\n        35 * Math.pow(x, 4));\r\n}\r\nexport function almostIdentity(value, start, stop) {\r\n    if (value > start)\r\n        return value;\r\n    const a = 2 * stop - start;\r\n    const b = 2 * start - 3 * stop;\r\n    const t = value / start;\r\n    return (a * t + b) * t * t + stop;\r\n}\r\n//# sourceMappingURL=math-utils.js.map","/**\r\n * @file Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Color } from 'three';\r\nimport * as chroma from 'chroma-js';\r\nimport { createParams } from '../utils';\r\nexport const ScaleDefaultParameters = {\r\n    scale: 'uniform',\r\n    mode: 'hcl',\r\n    domain: [0, 1],\r\n    value: 0xFFFFFF,\r\n    reverse: false\r\n};\r\nconst tmpColor = new Color();\r\n/**\r\n * Class for making colors.\r\n * @interface\r\n */\r\nclass Colormaker {\r\n    /**\r\n     * Create a colormaker instance\r\n     * @param  {ColormakerParameters} params - colormaker parameter\r\n     */\r\n    constructor(params = {}) {\r\n        this.parameters = createParams(params, ScaleDefaultParameters);\r\n        if (typeof this.parameters.value === 'string') {\r\n            this.parameters.value = tmpColor.set(this.parameters.value).getHex();\r\n        }\r\n        if (this.parameters.structure) {\r\n            this.atomProxy = this.parameters.structure.getAtomProxy();\r\n        }\r\n    }\r\n    getScale(params = {}) {\r\n        const p = createParams(params, this.parameters);\r\n        if (p.scale === 'rainbow') {\r\n            p.scale = ['red', 'orange', 'yellow', 'green', 'blue'];\r\n        }\r\n        else if (p.scale === 'rwb') {\r\n            p.scale = ['red', 'white', 'blue'];\r\n        }\r\n        if (p.reverse) {\r\n            p.domain.reverse();\r\n        }\r\n        return chroma\r\n            .scale(p.scale) // TODO\r\n            .mode(p.mode)\r\n            .domain(p.domain)\r\n            .out('num'); // TODO\r\n    }\r\n    /**\r\n     * safe a color to an array\r\n     * @param  {Integer} color - hex color value\r\n     * @param  {Array|TypedArray} array - destination\r\n     * @param  {Integer} offset - index into the array\r\n     * @return {Array} the destination array\r\n     */\r\n    colorToArray(color, array = [], offset = 0) {\r\n        array[offset] = (color >> 16 & 255) / 255;\r\n        array[offset + 1] = (color >> 8 & 255) / 255;\r\n        array[offset + 2] = (color & 255) / 255;\r\n        return array;\r\n    }\r\n    /**\r\n     * safe a atom color to an array\r\n     * @param  {AtomProxy} atom - atom to get color for\r\n     * @param  {Array|TypedArray} array - destination\r\n     * @param  {Integer} offset - index into the array\r\n     * @return {Array} the destination array\r\n     */\r\n    atomColorToArray(atom, array, offset) {\r\n        return this.colorToArray(this.atomColor ? this.atomColor(atom) : 0x000000, array, offset);\r\n    }\r\n    /**\r\n     * return the color for an bond\r\n     * @param  {BondProxy} bond - bond to get color for\r\n     * @param  {Boolean} fromTo - whether to use the first or second atom of the bond\r\n     * @return {Integer} hex bond color\r\n     */\r\n    bondColor(bond, fromTo) {\r\n        if (this.atomProxy && this.atomColor) {\r\n            this.atomProxy.index = fromTo ? bond.atomIndex1 : bond.atomIndex2;\r\n            return this.atomColor(this.atomProxy);\r\n        }\r\n        else {\r\n            return 0x000000;\r\n        }\r\n    }\r\n    /**\r\n     * safe a bond color to an array\r\n     * @param  {BondProxy} bond - bond to get color for\r\n     * @param  {Boolean} fromTo - whether to use the first or second atom of the bond\r\n     * @param  {Array|TypedArray} array - destination\r\n     * @param  {Integer} offset - index into the array\r\n     * @return {Array} the destination array\r\n     */\r\n    bondColorToArray(bond, fromTo, array, offset) {\r\n        return this.colorToArray(this.bondColor(bond, fromTo), array, offset);\r\n    }\r\n    /**\r\n     * safe a volume cell color to an array\r\n     * @param  {Integer} index - volume cell index\r\n     * @param  {Array|TypedArray} array - destination\r\n     * @param  {Integer} offset - index into the array\r\n     * @return {Array} the destination array\r\n     */\r\n    volumeColorToArray(index, array, offset) {\r\n        return this.colorToArray(this.volumeColor ? this.volumeColor(index) : 0x000000, array, offset);\r\n    }\r\n    /**\r\n     * safe a color for coordinates in space to an array\r\n     * @param  {Vector3} coords - xyz coordinates\r\n     * @param  {Array|TypedArray} array - destination\r\n     * @param  {Integer} offset - index into the array\r\n     * @return {Array} the destination array\r\n     */\r\n    positionColorToArray(coords, array, offset) {\r\n        return this.colorToArray(this.positionColor ? this.positionColor(coords) : 0x000000, array, offset);\r\n    }\r\n}\r\nexport default Colormaker;\r\n//# sourceMappingURL=colormaker.js.map","/**\r\n * @file Selection Constants\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nexport var kwd;\r\n(function (kwd) {\r\n    kwd[kwd[\"PROTEIN\"] = 1] = \"PROTEIN\";\r\n    kwd[kwd[\"NUCLEIC\"] = 2] = \"NUCLEIC\";\r\n    kwd[kwd[\"RNA\"] = 3] = \"RNA\";\r\n    kwd[kwd[\"DNA\"] = 4] = \"DNA\";\r\n    kwd[kwd[\"POLYMER\"] = 5] = \"POLYMER\";\r\n    kwd[kwd[\"WATER\"] = 6] = \"WATER\";\r\n    kwd[kwd[\"HELIX\"] = 7] = \"HELIX\";\r\n    kwd[kwd[\"SHEET\"] = 8] = \"SHEET\";\r\n    kwd[kwd[\"TURN\"] = 9] = \"TURN\";\r\n    kwd[kwd[\"BACKBONE\"] = 10] = \"BACKBONE\";\r\n    kwd[kwd[\"SIDECHAIN\"] = 11] = \"SIDECHAIN\";\r\n    kwd[kwd[\"ALL\"] = 12] = \"ALL\";\r\n    kwd[kwd[\"HETERO\"] = 13] = \"HETERO\";\r\n    kwd[kwd[\"ION\"] = 14] = \"ION\";\r\n    kwd[kwd[\"SACCHARIDE\"] = 15] = \"SACCHARIDE\";\r\n    kwd[kwd[\"SUGAR\"] = 15] = \"SUGAR\";\r\n    kwd[kwd[\"BONDED\"] = 16] = \"BONDED\";\r\n    kwd[kwd[\"RING\"] = 17] = \"RING\";\r\n    kwd[kwd[\"AROMATICRING\"] = 18] = \"AROMATICRING\";\r\n    kwd[kwd[\"METAL\"] = 19] = \"METAL\";\r\n    kwd[kwd[\"NONE\"] = 20] = \"NONE\";\r\n})(kwd || (kwd = {}));\r\nexport const SelectAllKeyword = ['*', '', 'ALL'];\r\nexport const SelectNoneKeyword = ['NONE'];\r\nexport const AtomOnlyKeywords = [\r\n    kwd.BACKBONE, kwd.SIDECHAIN, kwd.BONDED, kwd.RING, kwd.AROMATICRING, kwd.METAL\r\n];\r\nexport const ChainKeywords = [\r\n    kwd.POLYMER, kwd.WATER\r\n];\r\nexport const SmallResname = ['ALA', 'GLY', 'SER'];\r\nexport const NucleophilicResname = ['CYS', 'SER', 'THR'];\r\nexport const HydrophobicResname = ['ALA', 'ILE', 'LEU', 'MET', 'PHE', 'PRO', 'TRP', 'VAL'];\r\nexport const AromaticResname = ['PHE', 'TRP', 'TYR', 'HIS'];\r\nexport const AmideResname = ['ASN', 'GLN'];\r\nexport const AcidicResname = ['ASP', 'GLU'];\r\nexport const BasicResname = ['ARG', 'HIS', 'LYS'];\r\nexport const ChargedResname = ['ARG', 'ASP', 'GLU', 'HIS', 'LYS'];\r\nexport const PolarResname = ['ASN', 'ARG', 'ASP', 'CYS', 'GLY', 'GLN', 'GLU', 'HIS', 'LYS', 'SER', 'THR', 'TYR'];\r\nexport const NonpolarResname = ['ALA', 'ILE', 'LEU', 'MET', 'PHE', 'PRO', 'TRP', 'VAL'];\r\nexport const CyclicResname = ['HIS', 'PHE', 'PRO', 'TRP', 'TYR'];\r\nexport const AliphaticResname = ['ALA', 'GLY', 'ILE', 'LEU', 'VAL'];\r\n//# sourceMappingURL=selection-constants.js.map","/**\r\n * @file Selection Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { kwd, SelectAllKeyword, SmallResname, NucleophilicResname, HydrophobicResname, AromaticResname, AmideResname, AcidicResname, BasicResname, ChargedResname, PolarResname, NonpolarResname, CyclicResname, AliphaticResname } from './selection-constants';\r\nfunction parseSele(string) {\r\n    let retSelection = {\r\n        operator: undefined,\r\n        rules: []\r\n    };\r\n    if (!string) {\r\n        return retSelection;\r\n    }\r\n    let selection = retSelection;\r\n    let newSelection;\r\n    let oldSelection;\r\n    const selectionStack = [];\r\n    string = string.replace(/\\(/g, ' ( ').replace(/\\)/g, ' ) ').trim();\r\n    if (string.charAt(0) === '(' && string.substr(-1) === ')') {\r\n        string = string.slice(1, -1).trim();\r\n    }\r\n    const chunks = string.split(/\\s+/);\r\n    // Log.log( string, chunks )\r\n    const createNewContext = (operator) => {\r\n        newSelection = {\r\n            operator,\r\n            rules: []\r\n        };\r\n        if (selection === undefined) {\r\n            selection = newSelection;\r\n            retSelection = newSelection;\r\n        }\r\n        else {\r\n            selection.rules.push(newSelection);\r\n            selectionStack.push(selection);\r\n            selection = newSelection;\r\n        }\r\n    };\r\n    const getPrevContext = function (operator) {\r\n        oldSelection = selection;\r\n        selection = selectionStack.pop();\r\n        if (selection === undefined) {\r\n            createNewContext(operator);\r\n            pushRule(oldSelection);\r\n        }\r\n    };\r\n    const pushRule = function (rule) {\r\n        selection.rules.push(rule);\r\n    };\r\n    let not = false;\r\n    for (let i = 0; i < chunks.length; ++i) {\r\n        const c = chunks[i];\r\n        const cu = c.toUpperCase();\r\n        // handle parens\r\n        if (c === '(') {\r\n            // Log.log( \"(\" );\r\n            not = false;\r\n            createNewContext();\r\n            continue;\r\n        }\r\n        else if (c === ')') {\r\n            // Log.log( \")\" );\r\n            getPrevContext();\r\n            if (selection.negate) {\r\n                getPrevContext();\r\n            }\r\n            continue;\r\n        }\r\n        // leave 'not' context\r\n        if (not > 0) {\r\n            if (cu === 'NOT') {\r\n                not = 1;\r\n            }\r\n            else if (not === 1) {\r\n                not = 2;\r\n            }\r\n            else if (not === 2) {\r\n                not = false;\r\n                getPrevContext();\r\n            }\r\n            else {\r\n                throw new Error(\"something went wrong with 'not'\");\r\n            }\r\n        }\r\n        // handle logic operators\r\n        if (cu === 'AND') {\r\n            // Log.log( \"AND\" );\r\n            if (selection.operator === 'OR') {\r\n                const lastRule = selection.rules.pop();\r\n                createNewContext('AND');\r\n                pushRule(lastRule);\r\n            }\r\n            else {\r\n                selection.operator = 'AND';\r\n            }\r\n            continue;\r\n        }\r\n        else if (cu === 'OR') {\r\n            // Log.log( \"OR\" );\r\n            if (selection.operator === 'AND') {\r\n                getPrevContext('OR');\r\n            }\r\n            else {\r\n                selection.operator = 'OR';\r\n            }\r\n            continue;\r\n        }\r\n        else if (c.toUpperCase() === 'NOT') {\r\n            // Log.log( \"NOT\", j );\r\n            not = 1;\r\n            createNewContext();\r\n            selection.negate = true;\r\n            continue;\r\n        }\r\n        else {\r\n            // Log.log( \"chunk\", c, j, selection );\r\n        }\r\n        // handle keyword attributes\r\n        // ensure `cu` is not a number before testing if it is in the\r\n        // kwd enum dictionary which includes the enum numbers as well...\r\n        if (+cu !== +cu) {\r\n            const keyword = kwd[cu];\r\n            if (keyword !== undefined) {\r\n                pushRule({ keyword });\r\n                continue;\r\n            }\r\n        }\r\n        if (cu === 'HYDROGEN') {\r\n            pushRule({\r\n                operator: 'OR',\r\n                rules: [\r\n                    { element: 'H' },\r\n                    { element: 'D' }\r\n                ]\r\n            });\r\n            continue;\r\n        }\r\n        if (cu === 'SMALL') {\r\n            pushRule({ resname: SmallResname });\r\n            continue;\r\n        }\r\n        if (cu === 'NUCLEOPHILIC') {\r\n            pushRule({ resname: NucleophilicResname });\r\n            continue;\r\n        }\r\n        if (cu === 'HYDROPHOBIC') {\r\n            pushRule({ resname: HydrophobicResname });\r\n            continue;\r\n        }\r\n        if (cu === 'AROMATIC') {\r\n            pushRule({ resname: AromaticResname });\r\n            continue;\r\n        }\r\n        if (cu === 'AMIDE') {\r\n            pushRule({ resname: AmideResname });\r\n            continue;\r\n        }\r\n        if (cu === 'ACIDIC') {\r\n            pushRule({ resname: AcidicResname });\r\n            continue;\r\n        }\r\n        if (cu === 'BASIC') {\r\n            pushRule({ resname: BasicResname });\r\n            continue;\r\n        }\r\n        if (cu === 'CHARGED') {\r\n            pushRule({ resname: ChargedResname });\r\n            continue;\r\n        }\r\n        if (cu === 'POLAR') {\r\n            pushRule({ resname: PolarResname });\r\n            continue;\r\n        }\r\n        if (cu === 'NONPOLAR') {\r\n            pushRule({ resname: NonpolarResname });\r\n            continue;\r\n        }\r\n        if (cu === 'CYCLIC') {\r\n            pushRule({ resname: CyclicResname });\r\n            continue;\r\n        }\r\n        if (cu === 'ALIPHATIC') {\r\n            pushRule({ resname: AliphaticResname });\r\n            continue;\r\n        }\r\n        if (cu === 'SIDECHAINATTACHED') {\r\n            pushRule({\r\n                operator: 'OR',\r\n                rules: [\r\n                    { keyword: kwd.SIDECHAIN },\r\n                    {\r\n                        operator: 'AND',\r\n                        negate: false,\r\n                        rules: [\r\n                            { keyword: kwd.PROTEIN },\r\n                            {\r\n                                operator: 'OR',\r\n                                negate: false,\r\n                                rules: [\r\n                                    { atomname: 'CA' },\r\n                                    { atomname: 'BB' }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        operator: 'AND',\r\n                        negate: false,\r\n                        rules: [\r\n                            { resname: 'PRO' },\r\n                            { atomname: 'N' }\r\n                        ]\r\n                    },\r\n                    {\r\n                        operator: 'AND',\r\n                        negate: false,\r\n                        rules: [\r\n                            { keyword: kwd.NUCLEIC },\r\n                            {\r\n                                operator: 'OR',\r\n                                negate: true,\r\n                                rules: [\r\n                                    { atomname: 'P' },\r\n                                    { atomname: 'OP1' },\r\n                                    { atomname: 'OP2' },\r\n                                    { atomname: \"O3'\" },\r\n                                    { atomname: 'O3*' },\r\n                                    { atomname: \"O5'\" },\r\n                                    { atomname: 'O5*' },\r\n                                    { atomname: \"C5'\" },\r\n                                    { atomname: 'C5*' }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n            });\r\n            continue;\r\n        }\r\n        if (cu === 'LIGAND') {\r\n            pushRule({\r\n                operator: 'AND',\r\n                rules: [\r\n                    {\r\n                        operator: 'OR',\r\n                        rules: [\r\n                            {\r\n                                operator: 'AND',\r\n                                rules: [\r\n                                    { keyword: kwd.HETERO },\r\n                                    {\r\n                                        negate: true,\r\n                                        operator: undefined,\r\n                                        rules: [\r\n                                            { keyword: kwd.POLYMER }\r\n                                        ]\r\n                                    }\r\n                                ]\r\n                            },\r\n                            {\r\n                                negate: true,\r\n                                operator: undefined,\r\n                                rules: [\r\n                                    { keyword: kwd.POLYMER }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        negate: true,\r\n                        operator: undefined,\r\n                        rules: [\r\n                            {\r\n                                operator: 'OR',\r\n                                rules: [\r\n                                    { keyword: kwd.WATER },\r\n                                    { keyword: kwd.ION }\r\n                                ]\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n            });\r\n            continue;\r\n        }\r\n        if (SelectAllKeyword.indexOf(cu) !== -1) {\r\n            pushRule({ keyword: kwd.ALL });\r\n            continue;\r\n        }\r\n        // handle atom expressions\r\n        if (c.charAt(0) === '@') {\r\n            const indexList = c.substr(1).split(',').map(x => parseInt(x));\r\n            indexList.sort(function (a, b) { return a - b; });\r\n            pushRule({ atomindex: indexList });\r\n            continue;\r\n        }\r\n        if (c.charAt(0) === '#') {\r\n            console.error('# for element selection deprecated, use _');\r\n            pushRule({ element: cu.substr(1) });\r\n            continue;\r\n        }\r\n        if (c.charAt(0) === '_') {\r\n            pushRule({ element: cu.substr(1) });\r\n            continue;\r\n        }\r\n        if (c[0] === '[' && c[c.length - 1] === ']') {\r\n            const resnameList = cu.substr(1, c.length - 2).split(',');\r\n            const resname = resnameList.length > 1 ? resnameList : resnameList[0];\r\n            pushRule({ resname: resname });\r\n            continue;\r\n        }\r\n        else if ((c.length >= 1 && c.length <= 4) &&\r\n            c[0] !== '^' && c[0] !== ':' && c[0] !== '.' && c[0] !== '%' && c[0] !== '/' &&\r\n            isNaN(parseInt(c))) {\r\n            pushRule({ resname: cu });\r\n            continue;\r\n        }\r\n        // there must be only one constraint per rule\r\n        // otherwise a test quickly becomes not applicable\r\n        // e.g. chainTest for chainname when resno is present too\r\n        const sele = {\r\n            operator: 'AND',\r\n            rules: []\r\n        };\r\n        const model = c.split('/');\r\n        if (model.length > 1 && model[1]) {\r\n            if (isNaN(parseInt(model[1]))) {\r\n                throw new Error('model must be an integer');\r\n            }\r\n            sele.rules.push({\r\n                model: parseInt(model[1])\r\n            });\r\n        }\r\n        const altloc = model[0].split('%');\r\n        if (altloc.length > 1) {\r\n            sele.rules.push({\r\n                altloc: altloc[1]\r\n            });\r\n        }\r\n        const atomname = altloc[0].split('.');\r\n        if (atomname.length > 1 && atomname[1]) {\r\n            if (atomname[1].length > 4) {\r\n                throw new Error('atomname must be one to four characters');\r\n            }\r\n            sele.rules.push({\r\n                atomname: atomname[1].substring(0, 4).toUpperCase()\r\n            });\r\n        }\r\n        const chain = atomname[0].split(':');\r\n        if (chain.length > 1 && chain[1]) {\r\n            sele.rules.push({\r\n                chainname: chain[1]\r\n            });\r\n        }\r\n        const inscode = chain[0].split('^');\r\n        if (inscode.length > 1) {\r\n            sele.rules.push({\r\n                inscode: inscode[1]\r\n            });\r\n        }\r\n        if (inscode[0]) {\r\n            let negate, negate2;\r\n            if (inscode[0][0] === '-') {\r\n                inscode[0] = inscode[0].substr(1);\r\n                negate = true;\r\n            }\r\n            if (inscode[0].includes('--')) {\r\n                inscode[0] = inscode[0].replace('--', '-');\r\n                negate2 = true;\r\n            }\r\n            let resi = inscode[0].split('-');\r\n            if (resi.length === 1) {\r\n                let resiSingle = parseInt(resi[0]);\r\n                if (isNaN(resiSingle)) {\r\n                    throw new Error('resi must be an integer');\r\n                }\r\n                if (negate)\r\n                    resiSingle *= -1;\r\n                sele.rules.push({\r\n                    resno: resiSingle\r\n                });\r\n            }\r\n            else if (resi.length === 2) {\r\n                const resiRange = resi.map(x => parseInt(x));\r\n                if (negate)\r\n                    resiRange[0] *= -1;\r\n                if (negate2)\r\n                    resiRange[1] *= -1;\r\n                sele.rules.push({\r\n                    resno: [resiRange[0], resiRange[1]]\r\n                });\r\n            }\r\n            else {\r\n                throw new Error(\"resi range must contain one '-'\");\r\n            }\r\n        }\r\n        // round up\r\n        if (sele.rules.length === 1) {\r\n            pushRule(sele.rules[0]);\r\n        }\r\n        else if (sele.rules.length > 1) {\r\n            pushRule(sele);\r\n        }\r\n        else {\r\n            throw new Error('empty selection chunk');\r\n        }\r\n    }\r\n    // cleanup\r\n    if (retSelection.operator === undefined &&\r\n        retSelection.rules.length === 1 &&\r\n        retSelection.rules[0].hasOwnProperty('operator')) {\r\n        retSelection = retSelection.rules[0];\r\n    }\r\n    return retSelection;\r\n}\r\nexport { parseSele };\r\n//# sourceMappingURL=selection-parser.js.map","/**\r\n * @file Selection Test\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { binarySearchIndexOf, rangeInSortedArray } from '../utils';\r\nimport { kwd, AtomOnlyKeywords, ChainKeywords } from './selection-constants';\r\nfunction atomTestFn(a, s) {\r\n    // returning -1 means the rule is not applicable\r\n    if (s.atomname === undefined && s.element === undefined &&\r\n        s.altloc === undefined && s.atomindex === undefined &&\r\n        s.keyword === undefined && s.inscode === undefined &&\r\n        s.resname === undefined && s.sstruc === undefined &&\r\n        s.resno === undefined && s.chainname === undefined &&\r\n        s.model === undefined)\r\n        return -1;\r\n    if (s.keyword !== undefined) {\r\n        if (s.keyword === kwd.BACKBONE && !a.isBackbone())\r\n            return false;\r\n        if (s.keyword === kwd.SIDECHAIN && !a.isSidechain())\r\n            return false;\r\n        if (s.keyword === kwd.BONDED && !a.isBonded())\r\n            return false;\r\n        if (s.keyword === kwd.RING && !a.isRing())\r\n            return false;\r\n        if (s.keyword === kwd.AROMATICRING && !a.isAromatic())\r\n            return false;\r\n        if (s.keyword === kwd.HETERO && !a.isHetero())\r\n            return false;\r\n        if (s.keyword === kwd.PROTEIN && !a.isProtein())\r\n            return false;\r\n        if (s.keyword === kwd.NUCLEIC && !a.isNucleic())\r\n            return false;\r\n        if (s.keyword === kwd.RNA && !a.isRna())\r\n            return false;\r\n        if (s.keyword === kwd.DNA && !a.isDna())\r\n            return false;\r\n        if (s.keyword === kwd.POLYMER && !a.isPolymer())\r\n            return false;\r\n        if (s.keyword === kwd.WATER && !a.isWater())\r\n            return false;\r\n        if (s.keyword === kwd.HELIX && !a.isHelix())\r\n            return false;\r\n        if (s.keyword === kwd.SHEET && !a.isSheet())\r\n            return false;\r\n        if (s.keyword === kwd.TURN && !a.isTurn())\r\n            return false;\r\n        if (s.keyword === kwd.ION && !a.isIon())\r\n            return false;\r\n        if (s.keyword === kwd.SACCHARIDE && !a.isSaccharide())\r\n            return false;\r\n        if (s.keyword === kwd.METAL && !a.isMetal())\r\n            return false;\r\n    }\r\n    if (s.atomname !== undefined && s.atomname !== a.atomname)\r\n        return false;\r\n    if (s.element !== undefined && s.element !== a.element)\r\n        return false;\r\n    if (s.altloc !== undefined && s.altloc !== a.altloc)\r\n        return false;\r\n    if (s.atomindex !== undefined &&\r\n        binarySearchIndexOf(s.atomindex, a.index) < 0)\r\n        return false;\r\n    if (s.resname !== undefined) {\r\n        if (Array.isArray(s.resname)) {\r\n            if (!s.resname.includes(a.resname))\r\n                return false;\r\n        }\r\n        else {\r\n            if (s.resname !== a.resname)\r\n                return false;\r\n        }\r\n    }\r\n    if (s.sstruc !== undefined && s.sstruc !== a.sstruc)\r\n        return false;\r\n    if (s.resno !== undefined) {\r\n        if (Array.isArray(s.resno) && s.resno.length === 2) {\r\n            if (s.resno[0] > a.resno || s.resno[1] < a.resno)\r\n                return false;\r\n        }\r\n        else {\r\n            if (s.resno !== a.resno)\r\n                return false;\r\n        }\r\n    }\r\n    if (s.inscode !== undefined && s.inscode !== a.inscode)\r\n        return false;\r\n    if (s.chainname !== undefined && s.chainname !== a.chainname)\r\n        return false;\r\n    if (s.model !== undefined && s.model !== a.modelIndex)\r\n        return false;\r\n    return true;\r\n}\r\nfunction residueTestFn(r, s) {\r\n    // returning -1 means the rule is not applicable\r\n    if (s.resname === undefined && s.resno === undefined && s.inscode === undefined &&\r\n        s.sstruc === undefined && s.model === undefined && s.chainname === undefined &&\r\n        s.atomindex === undefined &&\r\n        (s.keyword === undefined || AtomOnlyKeywords.includes(s.keyword)))\r\n        return -1;\r\n    if (s.keyword !== undefined) {\r\n        if (s.keyword === kwd.HETERO && !r.isHetero())\r\n            return false;\r\n        if (s.keyword === kwd.PROTEIN && !r.isProtein())\r\n            return false;\r\n        if (s.keyword === kwd.NUCLEIC && !r.isNucleic())\r\n            return false;\r\n        if (s.keyword === kwd.RNA && !r.isRna())\r\n            return false;\r\n        if (s.keyword === kwd.DNA && !r.isDna())\r\n            return false;\r\n        if (s.keyword === kwd.POLYMER && !r.isPolymer())\r\n            return false;\r\n        if (s.keyword === kwd.WATER && !r.isWater())\r\n            return false;\r\n        if (s.keyword === kwd.HELIX && !r.isHelix())\r\n            return false;\r\n        if (s.keyword === kwd.SHEET && !r.isSheet())\r\n            return false;\r\n        if (s.keyword === kwd.TURN && !r.isTurn())\r\n            return false;\r\n        if (s.keyword === kwd.ION && !r.isIon())\r\n            return false;\r\n        if (s.keyword === kwd.SACCHARIDE && !r.isSaccharide())\r\n            return false;\r\n    }\r\n    if (s.atomindex !== undefined &&\r\n        rangeInSortedArray(s.atomindex, r.atomOffset, r.atomEnd) === 0)\r\n        return false;\r\n    if (s.resname !== undefined) {\r\n        if (Array.isArray(s.resname)) {\r\n            if (!s.resname.includes(r.resname))\r\n                return false;\r\n        }\r\n        else {\r\n            if (s.resname !== r.resname)\r\n                return false;\r\n        }\r\n    }\r\n    if (s.sstruc !== undefined && s.sstruc !== r.sstruc)\r\n        return false;\r\n    if (s.resno !== undefined) {\r\n        if (Array.isArray(s.resno) && s.resno.length === 2) {\r\n            if (s.resno[0] > r.resno || s.resno[1] < r.resno)\r\n                return false;\r\n        }\r\n        else {\r\n            if (s.resno !== r.resno)\r\n                return false;\r\n        }\r\n    }\r\n    if (s.inscode !== undefined && s.inscode !== r.inscode)\r\n        return false;\r\n    if (s.chainname !== undefined && s.chainname !== r.chainname)\r\n        return false;\r\n    if (s.model !== undefined && s.model !== r.modelIndex)\r\n        return false;\r\n    return true;\r\n}\r\nfunction chainTestFn(c, s) {\r\n    // returning -1 means the rule is not applicable\r\n    if (s.chainname === undefined && s.model === undefined && s.atomindex === undefined &&\r\n        (s.keyword === undefined || !ChainKeywords.includes(s.keyword) || !c.entity))\r\n        return -1;\r\n    if (s.keyword !== undefined) {\r\n        if (s.keyword === kwd.POLYMER && !c.entity.isPolymer())\r\n            return false;\r\n        if (s.keyword === kwd.WATER && !c.entity.isWater())\r\n            return false;\r\n    }\r\n    if (s.atomindex !== undefined &&\r\n        rangeInSortedArray(s.atomindex, c.atomOffset, c.atomEnd) === 0)\r\n        return false;\r\n    if (s.chainname !== undefined && s.chainname !== c.chainname)\r\n        return false;\r\n    if (s.model !== undefined && s.model !== c.modelIndex)\r\n        return false;\r\n    return true;\r\n}\r\nfunction modelTestFn(m, s) {\r\n    // returning -1 means the rule is not applicable\r\n    if (s.model === undefined && s.atomindex === undefined)\r\n        return -1;\r\n    if (s.atomindex !== undefined &&\r\n        rangeInSortedArray(s.atomindex, m.atomOffset, m.atomEnd) === 0)\r\n        return false;\r\n    if (s.model !== undefined && s.model !== m.index)\r\n        return false;\r\n    return true;\r\n}\r\nfunction makeTest(selection, fn) {\r\n    if (selection === null)\r\n        return false;\r\n    if (selection.error)\r\n        return false;\r\n    if (!selection.rules || selection.rules.length === 0)\r\n        return false;\r\n    const n = selection.rules.length;\r\n    const t = !selection.negate;\r\n    const f = !!selection.negate;\r\n    const subTests = [];\r\n    for (let i = 0; i < n; ++i) {\r\n        const s = selection.rules[i];\r\n        if (s.hasOwnProperty('operator')) {\r\n            subTests[i] = makeTest(s, fn); // TODO\r\n        }\r\n    }\r\n    // ( x and y ) can short circuit on false\r\n    // ( x or y ) can short circuit on true\r\n    // not ( x and y )\r\n    return function test(entity) {\r\n        const and = selection.operator === 'AND';\r\n        let na = false;\r\n        for (let i = 0; i < n; ++i) {\r\n            const s = selection.rules[i]; // TODO\r\n            let ret;\r\n            if (s.hasOwnProperty('operator')) {\r\n                const test = subTests[i];\r\n                if (test !== false) {\r\n                    ret = test(entity);\r\n                }\r\n                else {\r\n                    ret = -1;\r\n                }\r\n                if (ret === -1) {\r\n                    na = true;\r\n                    continue;\r\n                }\r\n                else if (ret === true) {\r\n                    if (and) {\r\n                        continue;\r\n                    }\r\n                    else {\r\n                        return t;\r\n                    }\r\n                }\r\n                else {\r\n                    if (and) {\r\n                        return f;\r\n                    }\r\n                    else {\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (s.keyword === kwd.ALL) {\r\n                    if (and) {\r\n                        continue;\r\n                    }\r\n                    else {\r\n                        return t;\r\n                    }\r\n                }\r\n                else if (s.keyword === kwd.NONE) {\r\n                    if (and) {\r\n                        continue;\r\n                    }\r\n                    else {\r\n                        return f;\r\n                    }\r\n                }\r\n                ret = fn(entity, s);\r\n                // console.log( entity.qualifiedName(), ret, s, selection.negate, \"t\", t, \"f\", f )\r\n                if (ret === -1) {\r\n                    na = true;\r\n                    continue;\r\n                }\r\n                else if (ret === true) {\r\n                    if (and) {\r\n                        continue;\r\n                    }\r\n                    else {\r\n                        return t;\r\n                    }\r\n                }\r\n                else {\r\n                    if (and) {\r\n                        return f;\r\n                    }\r\n                    else {\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (na) {\r\n            return -1;\r\n        }\r\n        else {\r\n            if (and) {\r\n                return t;\r\n            }\r\n            else {\r\n                return f;\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction filter(selection, fn) {\r\n    if (selection.error)\r\n        return selection;\r\n    if (!selection.rules || selection.rules.length === 0)\r\n        return selection;\r\n    const n = selection.rules.length;\r\n    const filtered = {\r\n        operator: selection.operator,\r\n        rules: []\r\n    };\r\n    if (selection.hasOwnProperty('negate')) {\r\n        filtered.negate = selection.negate;\r\n    }\r\n    for (let i = 0; i < n; ++i) {\r\n        const s = selection.rules[i];\r\n        if (s.hasOwnProperty('operator')) {\r\n            const fs = filter(s, fn);\r\n            if (fs !== null)\r\n                filtered.rules.push(fs); // TODO\r\n        }\r\n        else if (!fn(s)) {\r\n            filtered.rules.push(s); // TODO\r\n        }\r\n    }\r\n    if (filtered.rules.length > 0) { // TODO\r\n        // TODO maybe the filtered rules could be returned\r\n        // in some case, but the way how tests are applied\r\n        // e.g. when traversing a structure would also need\r\n        // to change\r\n        return selection;\r\n        // return filtered;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nfunction makeAtomTest(selection, atomOnly = false) {\r\n    let filteredSelection = selection;\r\n    if (atomOnly) {\r\n        filteredSelection = filter(selection, function (s) {\r\n            if (s.keyword !== undefined && !AtomOnlyKeywords.includes(s.keyword))\r\n                return true;\r\n            if (s.model !== undefined)\r\n                return true;\r\n            if (s.chainname !== undefined)\r\n                return true;\r\n            if (s.resname !== undefined)\r\n                return true;\r\n            if (s.resno !== undefined)\r\n                return true;\r\n            if (s.sstruc !== undefined)\r\n                return true;\r\n            return false;\r\n        });\r\n    }\r\n    return makeTest(filteredSelection, atomTestFn);\r\n}\r\nfunction makeResidueTest(selection, residueOnly = false) {\r\n    let filteredSelection = selection;\r\n    if (residueOnly) {\r\n        filteredSelection = filter(selection, function (s) {\r\n            if (s.keyword !== undefined && AtomOnlyKeywords.includes(s.keyword))\r\n                return true;\r\n            if (s.model !== undefined)\r\n                return true;\r\n            if (s.chainname !== undefined)\r\n                return true;\r\n            if (s.atomname !== undefined)\r\n                return true;\r\n            if (s.element !== undefined)\r\n                return true;\r\n            if (s.altloc !== undefined)\r\n                return true;\r\n            return false;\r\n        });\r\n    }\r\n    return makeTest(filteredSelection, residueTestFn);\r\n}\r\nfunction makeChainTest(selection, chainOnly = false) {\r\n    let filteredSelection = selection;\r\n    if (chainOnly) {\r\n        filteredSelection = filter(selection, function (s) {\r\n            if (s.keyword !== undefined && !ChainKeywords.includes(s.keyword))\r\n                return true;\r\n            // if( s.model!==undefined ) return true;\r\n            if (s.resname !== undefined)\r\n                return true;\r\n            if (s.resno !== undefined)\r\n                return true;\r\n            if (s.atomname !== undefined)\r\n                return true;\r\n            if (s.element !== undefined)\r\n                return true;\r\n            if (s.altloc !== undefined)\r\n                return true;\r\n            if (s.sstruc !== undefined)\r\n                return true;\r\n            if (s.inscode !== undefined)\r\n                return true;\r\n            return false;\r\n        });\r\n    }\r\n    return makeTest(filteredSelection, chainTestFn);\r\n}\r\nfunction makeModelTest(selection, modelOnly = false) {\r\n    let filteredSelection = selection;\r\n    if (modelOnly) {\r\n        filteredSelection = filter(selection, function (s) {\r\n            if (s.keyword !== undefined)\r\n                return true;\r\n            if (s.chainname !== undefined)\r\n                return true;\r\n            if (s.resname !== undefined)\r\n                return true;\r\n            if (s.resno !== undefined)\r\n                return true;\r\n            if (s.atomname !== undefined)\r\n                return true;\r\n            if (s.element !== undefined)\r\n                return true;\r\n            if (s.altloc !== undefined)\r\n                return true;\r\n            if (s.sstruc !== undefined)\r\n                return true;\r\n            if (s.inscode !== undefined)\r\n                return true;\r\n            return false;\r\n        });\r\n    }\r\n    return makeTest(filteredSelection, modelTestFn);\r\n}\r\nexport { makeAtomTest, makeResidueTest, makeChainTest, makeModelTest };\r\n//# sourceMappingURL=selection-test.js.map","/**\r\n * @file Selection\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport { parseSele } from './selection-parser';\r\nimport { makeAtomTest, makeResidueTest, makeChainTest, makeModelTest } from './selection-test';\r\nimport { SelectAllKeyword, SelectNoneKeyword } from './selection-constants';\r\n/**\r\n * Selection\r\n */\r\nclass Selection {\r\n    /**\r\n     * Create Selection\r\n     * @param {String} string - selection string, see {@tutorial selection-language}\r\n     */\r\n    constructor(string) {\r\n        this.signals = {\r\n            stringChanged: new Signal()\r\n        };\r\n        this.setString(string);\r\n    }\r\n    get type() { return 'selection'; }\r\n    setString(string, silent) {\r\n        if (string === undefined)\r\n            string = this.string || '';\r\n        if (string === this.string)\r\n            return;\r\n        try {\r\n            this.selection = parseSele(string);\r\n        }\r\n        catch (e) {\r\n            // Log.error( e.stack );\r\n            this.selection = { 'error': e.message };\r\n        }\r\n        const selection = this.selection;\r\n        this.string = string;\r\n        this.test = makeAtomTest(selection);\r\n        this.residueTest = makeResidueTest(selection);\r\n        this.chainTest = makeChainTest(selection);\r\n        this.modelTest = makeModelTest(selection);\r\n        this.atomOnlyTest = makeAtomTest(selection, true);\r\n        this.residueOnlyTest = makeResidueTest(selection, true);\r\n        this.chainOnlyTest = makeChainTest(selection, true);\r\n        this.modelOnlyTest = makeModelTest(selection, true);\r\n        if (!silent) {\r\n            this.signals.stringChanged.dispatch(this.string);\r\n        }\r\n    }\r\n    isAllSelection() {\r\n        return SelectAllKeyword.includes(this.string.toUpperCase());\r\n    }\r\n    isNoneSelection() {\r\n        return SelectNoneKeyword.includes(this.string.toUpperCase());\r\n    }\r\n}\r\nexport default Selection;\r\n//# sourceMappingURL=selection.js.map","/**\r\n * @file Selection Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Color } from 'three';\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Selection from '../selection/selection';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color based on {@link Selection}\r\n */\r\nclass SelectionColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.colormakerList = []; // TODO\r\n        this.selectionList = [];\r\n        const dataList = params.dataList || [];\r\n        dataList.forEach((data) => {\r\n            const [scheme, sele, params = {}] = data;\r\n            if (ColormakerRegistry.hasScheme(scheme)) {\r\n                Object.assign(params, {\r\n                    scheme: scheme,\r\n                    structure: this.parameters.structure\r\n                });\r\n            }\r\n            else {\r\n                Object.assign(params, {\r\n                    scheme: 'uniform',\r\n                    value: new Color(scheme).getHex()\r\n                });\r\n            }\r\n            this.colormakerList.push(ColormakerRegistry.getScheme(params));\r\n            this.selectionList.push(new Selection(sele));\r\n        });\r\n    }\r\n    atomColor(a) {\r\n        for (let i = 0, n = this.selectionList.length; i < n; ++i) {\r\n            const test = this.selectionList[i].test;\r\n            if (test && test(a)) {\r\n                return this.colormakerList[i].atomColor(a);\r\n            }\r\n        }\r\n        return 0xFFFFFF;\r\n    }\r\n}\r\nexport default SelectionColormaker;\r\n//# sourceMappingURL=selection-colormaker.js.map","/**\r\n * @file Colormaker Registry\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { generateUUID } from '../math/math-utils';\r\nimport Colormaker from './colormaker';\r\nimport SelectionColormaker from './selection-colormaker';\r\nconst ColormakerScales = {\r\n    '': '',\r\n    // Sequential\r\n    OrRd: '[S] Orange-Red',\r\n    PuBu: '[S] Purple-Blue',\r\n    BuPu: '[S] Blue-Purple',\r\n    Oranges: '[S] Oranges',\r\n    BuGn: '[S] Blue-Green',\r\n    YlOrBr: '[S] Yellow-Orange-Brown',\r\n    YlGn: '[S] Yellow-Green',\r\n    Reds: '[S] Reds',\r\n    RdPu: '[S] Red-Purple',\r\n    Greens: '[S] Greens',\r\n    YlGnBu: '[S] Yellow-Green-Blue',\r\n    Purples: '[S] Purples',\r\n    GnBu: '[S] Green-Blue',\r\n    Greys: '[S] Greys',\r\n    YlOrRd: '[S] Yellow-Orange-Red',\r\n    PuRd: '[S] Purple-Red',\r\n    Blues: '[S] Blues',\r\n    PuBuGn: '[S] Purple-Blue-Green',\r\n    // Diverging\r\n    Viridis: '[D] Viridis',\r\n    Spectral: '[D] Spectral',\r\n    RdYlGn: '[D] Red-Yellow-Green',\r\n    RdBu: '[D] Red-Blue',\r\n    PiYG: '[D] Pink-Yellowgreen',\r\n    PRGn: '[D] Purplered-Green',\r\n    RdYlBu: '[D] Red-Yellow-Blue',\r\n    BrBG: '[D] Brown-Bluegreen',\r\n    RdGy: '[D] Red-Grey',\r\n    PuOr: '[D] Purple-Orange',\r\n    // Qualitative\r\n    Set1: '[Q] Set1',\r\n    Set2: '[Q] Set2',\r\n    Set3: '[Q] Set3',\r\n    Dark2: '[Q] Dark2',\r\n    Paired: '[Q] Paired',\r\n    Pastel1: '[Q] Pastel1',\r\n    Pastel2: '[Q] Pastel2',\r\n    Accent: '[Q] Accent',\r\n    // Other\r\n    rainbow: '[?] Rainbow',\r\n    rwb: '[?] Red-White-Blue'\r\n};\r\nconst ColormakerModes = {\r\n    '': '',\r\n    rgb: 'Red Green Blue',\r\n    hsv: 'Hue Saturation Value',\r\n    hsl: 'Hue Saturation Lightness',\r\n    hsi: 'Hue Saturation Intensity',\r\n    lab: 'CIE L*a*b*',\r\n    hcl: 'Hue Chroma Lightness'\r\n};\r\n/**\r\n * Class for registering {@link Colormaker}s. Generally use the\r\n * global {@link src/globals.js~ColormakerRegistry} instance.\r\n */\r\nclass ColormakerRegistry {\r\n    constructor() {\r\n        this.schemes = {};\r\n        this.userSchemes = {};\r\n    }\r\n    getScheme(params) {\r\n        const p = params || {};\r\n        const id = (p.scheme || '').toLowerCase();\r\n        let SchemeClass;\r\n        if (id in this.schemes) {\r\n            SchemeClass = this.schemes[id];\r\n        }\r\n        else if (id in this.userSchemes) {\r\n            SchemeClass = this.userSchemes[id];\r\n        }\r\n        else {\r\n            SchemeClass = Colormaker;\r\n        }\r\n        return new SchemeClass(params);\r\n    }\r\n    /**\r\n     * Get an description of available schemes as an\r\n     * object with id-label as key-value pairs\r\n     * @return {Object} available schemes\r\n     */\r\n    getSchemes() {\r\n        const types = {};\r\n        Object.keys(this.schemes).forEach(function (k) {\r\n            types[k] = k;\r\n        });\r\n        Object.keys(this.userSchemes).forEach(function (k) {\r\n            types[k] = k.split('|')[1];\r\n        });\r\n        return types;\r\n    }\r\n    /**\r\n     * Get an description of available scales as an\r\n     * object with id-label as key-value pairs\r\n     * @return {Object} available scales\r\n     */\r\n    getScales() {\r\n        return ColormakerScales;\r\n    }\r\n    getModes() {\r\n        return ColormakerModes;\r\n    }\r\n    /**\r\n     * Add a scheme with a hardcoded id\r\n     * @param {String} id - the id\r\n     * @param {Colormaker} scheme - the colormaker\r\n     * @return {undefined}\r\n     */\r\n    add(id, scheme) {\r\n        id = id.toLowerCase();\r\n        this.schemes[id] = scheme;\r\n    }\r\n    /**\r\n     * Register a custom scheme\r\n     *\r\n     * @example\r\n     * // Create a class with a `atomColor` method that returns a hex color.\r\n     * var schemeId = NGL.ColormakerRegistry.addScheme( function( params ){\r\n     *     this.atomColor = function( atom ){\r\n     *         if( atom.serial < 1000 ){\r\n     *             return 0x0000FF;  // blue\r\n     *         }else if( atom.serial > 2000 ){\r\n     *             return 0xFF0000;  // red\r\n     *         }else{\r\n     *             return 0x00FF00;  // green\r\n     *         }\r\n     *     };\r\n     * } );\r\n     *\r\n     * stage.loadFile( \"rcsb://3dqb.pdb\" ).then( function( o ){\r\n     *     o.addRepresentation( \"cartoon\", { color: schemeId } );  // pass schemeId here\r\n     *     o.autoView();\r\n     * } );\r\n     *\r\n     * @param {Function|Colormaker} scheme - constructor or {@link Colormaker} instance\r\n     * @param {String} label - scheme label\r\n     * @return {String} id to refer to the registered scheme\r\n     */\r\n    addScheme(scheme, label) {\r\n        if (!(scheme instanceof Colormaker)) {\r\n            scheme = this._createScheme(scheme);\r\n        }\r\n        return this._addUserScheme(scheme, label);\r\n    }\r\n    /**\r\n     * Add a user-defined scheme\r\n     * @param {Colormaker} scheme - the user-defined scheme\r\n     * @param {String} [label] - scheme label\r\n     * @return {String} id to refer to the registered scheme\r\n     */\r\n    _addUserScheme(scheme, label) {\r\n        label = label || '';\r\n        const id = `${generateUUID()}|${label}`.toLowerCase();\r\n        this.userSchemes[id] = scheme;\r\n        return id;\r\n    }\r\n    /**\r\n     * Remove the scheme with the given id\r\n     * @param  {String} id - scheme to remove\r\n     * @return {undefined}\r\n     */\r\n    removeScheme(id) {\r\n        id = id.toLowerCase();\r\n        delete this.userSchemes[id];\r\n    }\r\n    _createScheme(constructor) {\r\n        const _Colormaker = function (params) {\r\n            Colormaker.call(this, params);\r\n            constructor.call(this, params);\r\n        };\r\n        _Colormaker.prototype = Colormaker.prototype;\r\n        _Colormaker.prototype.constructor = Colormaker;\r\n        return _Colormaker;\r\n    }\r\n    /**\r\n     * Create and a selection-based coloring scheme. Supply a list with pairs\r\n     * of colorname and selection for coloring by selections. Use the last\r\n     * entry as a default (catch all) coloring definition.\r\n     *\r\n     * @example\r\n     * var schemeId = NGL.ColormakerRegistry.addSelectionScheme( [\r\n     *     [ \"red\", \"64-74 or 134-154 or 222-254 or 310-310 or 322-326\" ],\r\n     *     [ \"green\", \"311-322\" ],\r\n     *     [ \"yellow\", \"40-63 or 75-95 or 112-133 or 155-173 or 202-221 or 255-277 or 289-309\" ],\r\n     *     [ \"blue\", \"1-39 or 96-112 or 174-201 or 278-288\" ],\r\n     *     [ \"white\", \"*\" ]\r\n     * ], \"Transmembrane 3dqb\" );\r\n     *\r\n     * stage.loadFile( \"rcsb://3dqb.pdb\" ).then( function( o ){\r\n     *     o.addRepresentation( \"cartoon\", { color: schemeId } );  // pass schemeId here\r\n     *     o.autoView();\r\n     * } );\r\n     *\r\n     * @param {Array} dataList - cloror-selection pairs\r\n     * @param {String} label - scheme name\r\n     * @return {String} id to refer to the registered scheme\r\n     */\r\n    addSelectionScheme(dataList, label) {\r\n        class MySelectionColormaker extends SelectionColormaker {\r\n            constructor(params) {\r\n                super(Object.assign({ dataList }, params));\r\n            }\r\n        }\r\n        return this._addUserScheme(MySelectionColormaker, label);\r\n    }\r\n    /**\r\n     * Check if a scheme with the given id exists\r\n     * @param  {String}  id - the id to check\r\n     * @return {Boolean} flag indicating if the scheme exists\r\n     */\r\n    hasScheme(id) {\r\n        id = id.toLowerCase();\r\n        return id in this.schemes || id in this.userSchemes;\r\n    }\r\n}\r\nexport default ColormakerRegistry;\r\n//# sourceMappingURL=colormaker-registry.js.map","/**\r\n * @file Parser Registry\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Registry from '../utils/registry';\r\nclass ParserRegistry extends Registry {\r\n    constructor() {\r\n        super('parser');\r\n    }\r\n    __hasObjName(key, objName) {\r\n        const parser = this.get(key);\r\n        return parser && parser.prototype.__objName === objName;\r\n    }\r\n    isTrajectory(key) {\r\n        return this.__hasObjName(key, 'frames');\r\n    }\r\n    isStructure(key) {\r\n        return this.__hasObjName(key, 'structure');\r\n    }\r\n    isVolume(key) {\r\n        return this.__hasObjName(key, 'volume');\r\n    }\r\n    isSurface(key) {\r\n        return this.__hasObjName(key, 'surface');\r\n    }\r\n    isBinary(key) {\r\n        const parser = this.get(key);\r\n        return parser && parser.prototype.isBinary;\r\n    }\r\n    isXml(key) {\r\n        const parser = this.get(key);\r\n        return parser && parser.prototype.isXml;\r\n    }\r\n    isJson(key) {\r\n        const parser = this.get(key);\r\n        return parser && parser.prototype.isJson;\r\n    }\r\n    getTrajectoryExtensions() {\r\n        return this.names.filter(name => this.isTrajectory(name));\r\n    }\r\n    getStructureExtensions() {\r\n        return this.names.filter(name => this.isStructure(name));\r\n    }\r\n    getVolumeExtensions() {\r\n        return this.names.filter(name => this.isVolume(name));\r\n    }\r\n    getSurfaceExtensions() {\r\n        return this.names.filter(name => this.isSurface(name));\r\n    }\r\n}\r\nexport default ParserRegistry;\r\n//# sourceMappingURL=parser-registry.js.map","/**\r\n * @file Worker Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { uniqueArray } from '../utils';\r\nfunction getWorkerDeps(vars) {\r\n    const deps = vars;\r\n    vars.forEach(function (sym) {\r\n        if (sym.__deps) {\r\n            Array.prototype.push.apply(deps, getWorkerDeps(sym.__deps));\r\n        }\r\n    });\r\n    return deps;\r\n}\r\nfunction makeWorkerString(vars) {\r\n    const deps = uniqueArray(getWorkerDeps(vars));\r\n    return deps.map(function (sym) {\r\n        return sym.toString();\r\n    }).join('\\n\\n\\n');\r\n}\r\nfunction onmessage(e) {\r\n    const name = e.data.__name;\r\n    const postId = e.data.__postId;\r\n    /* global self */\r\n    if (name === undefined) {\r\n        console.error('message __name undefined');\r\n    }\r\n    else if (self.func === undefined) {\r\n        console.error('worker func undefined', name);\r\n    }\r\n    else {\r\n        const callback = function (aMessage, transferList) {\r\n            aMessage = aMessage || {};\r\n            if (postId !== undefined)\r\n                aMessage.__postId = postId;\r\n            try {\r\n                self.postMessage(aMessage, transferList);\r\n            }\r\n            catch (error) {\r\n                console.error('self.postMessage:', error);\r\n                self.postMessage(aMessage);\r\n            }\r\n        };\r\n        self.func(e, callback);\r\n    }\r\n}\r\nexport function makeWorkerBlob(func, deps) {\r\n    let str = \"'use strict';\\n\\n\" + makeWorkerString(deps);\r\n    str += '\\n\\n\\nself.func = ' + func.toString() + ';';\r\n    str += '\\n\\n\\nself.onmessage = ' + onmessage.toString() + ';';\r\n    // console.log(str);\r\n    return new Blob([str], { type: 'application/javascript' });\r\n}\r\n//# sourceMappingURL=worker-utils.js.map","/**\r\n * @file Worker Registry\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { makeWorkerBlob } from './worker-utils';\r\nclass WorkerRegistry {\r\n    constructor() {\r\n        this.activeWorkerCount = 0;\r\n        this._funcDict = {};\r\n        this._depsDict = {};\r\n        this._blobDict = {};\r\n    }\r\n    add(name, func, deps) {\r\n        this._funcDict[name] = func;\r\n        this._depsDict[name] = deps;\r\n    }\r\n    get(name) {\r\n        if (!this._blobDict[name]) {\r\n            this._blobDict[name] = makeWorkerBlob(this._funcDict[name], this._depsDict[name]);\r\n        }\r\n        return this._blobDict[name];\r\n    }\r\n}\r\nexport default WorkerRegistry;\r\n//# sourceMappingURL=worker-registry.js.map","/**\r\n * @file Globals\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { getBrowser, getQuery, boolean } from './utils';\r\nimport Registry from './utils/registry';\r\nimport _ColormakerRegistry from './color/colormaker-registry';\r\nimport _ParserRegistry from './parser/parser-registry';\r\nimport _WorkerRegistry from './worker/worker-registry';\r\n/**\r\n * The browser name: \"Opera\", \"Chrome\", \"Firefox\", \"Mobile Safari\",\r\n * \"Internet Explorer\", \"Safari\" or false.\r\n */\r\nexport const Browser = getBrowser();\r\n/**\r\n * Flag indicating support for the 'passive' option for event handler\r\n */\r\nexport let SupportsPassiveEventHandler = false;\r\ntry {\r\n    // Test via a getter in the options object to see if the passive property is accessed\r\n    const opts = Object.defineProperty({}, 'passive', {\r\n        get: function () {\r\n            SupportsPassiveEventHandler = true;\r\n        }\r\n    });\r\n    window.addEventListener('test', e => { }, opts);\r\n}\r\ncatch (e) { }\r\n/**\r\n * Flag indicating a mobile browser\r\n */\r\nexport const Mobile = typeof window !== 'undefined' ? typeof window.orientation !== 'undefined' : false;\r\nexport let SupportsReadPixelsFloat = false;\r\nexport function setSupportsReadPixelsFloat(value) {\r\n    SupportsReadPixelsFloat = value;\r\n}\r\n/**\r\n * Flag indicating support for the `EXT_frag_depth` WebGL extension\r\n * (Always present in WebGL2)\r\n */\r\nexport let ExtensionFragDepth = false;\r\nexport function setExtensionFragDepth(value) {\r\n    ExtensionFragDepth = value;\r\n}\r\nexport const Log = {\r\n    log: Function.prototype.bind.call(console.log, console),\r\n    info: Function.prototype.bind.call(console.info, console),\r\n    warn: Function.prototype.bind.call(console.warn, console),\r\n    error: Function.prototype.bind.call(console.error, console),\r\n    time: Function.prototype.bind.call(console.time, console),\r\n    timeEnd: Function.prototype.bind.call(console.timeEnd, console)\r\n};\r\nexport let MeasurementDefaultParams = {\r\n    color: 'green',\r\n    labelColor: 0x808080,\r\n    labelAttachment: 'bottom-center',\r\n    labelSize: 0.7,\r\n    labelZOffset: 0.5,\r\n    labelYOffset: 0.1,\r\n    labelBorder: true,\r\n    labelBorderColor: 0xd3d3d3,\r\n    labelBorderWidth: 0.25,\r\n    lineOpacity: 0.8,\r\n    linewidth: 5.0,\r\n    opacity: 0.6,\r\n    labelUnit: 'angstrom',\r\n    arcVisible: true,\r\n    planeVisible: false\r\n};\r\nexport function setMeasurementDefaultParams(params = {}) {\r\n    Object.assign(MeasurementDefaultParams, params);\r\n}\r\nexport let Debug = boolean(getQuery('debug'));\r\nexport function setDebug(value) {\r\n    Debug = value;\r\n}\r\nexport const WebglErrorMessage = '<div style=\"display:flex;align-items:center;justify-content:center;height:100%;\"><p style=\"padding:15px;text-align:center;\">Your browser/graphics card does not seem to support <a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/WebGL\">WebGL</a>.<br/><br/>Find out how to get it <a target=\"_blank\" href=\"http://get.webgl.org/\">here</a>.</p></div>';\r\n/**\r\n * List of file extensions to be recognized as scripts\r\n */\r\nexport const ScriptExtensions = ['ngl', 'js'];\r\nexport const WorkerRegistry = new _WorkerRegistry();\r\nexport const ColormakerRegistry = new _ColormakerRegistry();\r\nexport const DatasourceRegistry = new Registry('datasource');\r\nexport const RepresentationRegistry = new Registry('representatation');\r\nexport const ParserRegistry = new _ParserRegistry();\r\nexport const ShaderRegistry = new Registry('shader');\r\nexport const DecompressorRegistry = new Registry('decompressor');\r\nexport const ComponentRegistry = new Registry('component');\r\nexport const BufferRegistry = new Registry('buffer');\r\nexport const PickerRegistry = new Registry('picker');\r\nexport let ListingDatasource;\r\nexport function setListingDatasource(value) {\r\n    ListingDatasource = value;\r\n}\r\nexport let TrajectoryDatasource;\r\nexport function setTrajectoryDatasource(value) {\r\n    TrajectoryDatasource = value;\r\n}\r\n//# sourceMappingURL=globals.js.map","/**\r\n * @file Streamer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { DecompressorRegistry } from '../globals';\r\nimport { uint8ToString, defaults } from '../utils';\r\nclass Streamer {\r\n    constructor(src, params = {}) {\r\n        this.chunkSize = 1024 * 1024 * 10;\r\n        this.newline = '\\n';\r\n        this.__pointer = 0;\r\n        this.__partialLine = '';\r\n        this.compressed = defaults(params.compressed, false);\r\n        this.binary = defaults(params.binary, false);\r\n        this.json = defaults(params.json, false);\r\n        this.xml = defaults(params.xml, false);\r\n        this.src = src;\r\n    }\r\n    isBinary() {\r\n        return this.binary || this.compressed;\r\n    }\r\n    read() {\r\n        return this._read().then(data => {\r\n            const decompressFn = this.compressed ? DecompressorRegistry.get(this.compressed) : undefined;\r\n            if (this.compressed && decompressFn) {\r\n                this.data = decompressFn(data);\r\n            }\r\n            else {\r\n                if ((this.binary || this.compressed) && data instanceof ArrayBuffer) {\r\n                    data = new Uint8Array(data);\r\n                }\r\n                this.data = data;\r\n            }\r\n            return this.data;\r\n        });\r\n    }\r\n    _chunk(start, end) {\r\n        end = Math.min(this.data.length, end);\r\n        if (start === 0 && this.data.length === end) {\r\n            return this.data;\r\n        }\r\n        else {\r\n            if (this.isBinary()) {\r\n                return this.data.subarray(start, end);\r\n            }\r\n            else {\r\n                return this.data.substring(start, end);\r\n            }\r\n        }\r\n    }\r\n    chunk(start) {\r\n        const end = start + this.chunkSize;\r\n        return this._chunk(start, end);\r\n    }\r\n    peekLines(m) {\r\n        const data = this.data;\r\n        const n = data.length;\r\n        // FIXME does not work for multi-char newline\r\n        const newline = this.isBinary() ? this.newline.charCodeAt(0) : this.newline;\r\n        let i;\r\n        let count = 0;\r\n        for (i = 0; i < n; ++i) {\r\n            if (data[i] === newline)\r\n                ++count;\r\n            if (count === m)\r\n                break;\r\n        }\r\n        const chunk = this._chunk(0, i + 1);\r\n        const d = this.chunkToLines(chunk, '', i > n);\r\n        return d.lines;\r\n    }\r\n    chunkCount() {\r\n        return Math.floor(this.data.length / this.chunkSize) + 1;\r\n    }\r\n    asText() {\r\n        return this.isBinary() ? uint8ToString(this.data) : this.data;\r\n    }\r\n    chunkToLines(chunk, partialLine, isLast) {\r\n        const newline = this.newline;\r\n        if (!this.isBinary() && chunk.length === this.data.length) {\r\n            return {\r\n                lines: chunk.split(newline),\r\n                partialLine: ''\r\n            };\r\n        }\r\n        let lines = [];\r\n        const str = this.isBinary() ? uint8ToString(chunk) : chunk;\r\n        const idx = str.lastIndexOf(newline);\r\n        if (idx === -1) {\r\n            partialLine += str;\r\n        }\r\n        else {\r\n            const str2 = partialLine + str.substr(0, idx);\r\n            lines = lines.concat(str2.split(newline));\r\n            if (idx === str.length - newline.length) {\r\n                partialLine = '';\r\n            }\r\n            else {\r\n                partialLine = str.substr(idx + newline.length);\r\n            }\r\n        }\r\n        if (isLast && partialLine !== '') {\r\n            lines.push(partialLine);\r\n        }\r\n        return {\r\n            lines: lines,\r\n            partialLine: partialLine\r\n        };\r\n    }\r\n    nextChunk() {\r\n        const start = this.__pointer;\r\n        if (start > this.data.length) {\r\n            return undefined;\r\n        }\r\n        this.__pointer += this.chunkSize;\r\n        return this.chunk(start);\r\n    }\r\n    nextChunkOfLines() {\r\n        const chunk = this.nextChunk();\r\n        if (chunk === undefined) {\r\n            return undefined;\r\n        }\r\n        const isLast = this.__pointer > this.data.length;\r\n        const d = this.chunkToLines(chunk, this.__partialLine, isLast);\r\n        this.__partialLine = d.partialLine;\r\n        return d.lines;\r\n    }\r\n    eachChunk(callback) {\r\n        const chunkSize = this.chunkSize;\r\n        const n = this.data.length;\r\n        const chunkCount = this.chunkCount();\r\n        for (let i = 0; i < n; i += chunkSize) {\r\n            const chunk = this.chunk(i);\r\n            const chunkNo = Math.round(i / chunkSize);\r\n            callback(chunk, chunkNo, chunkCount);\r\n        }\r\n    }\r\n    eachChunkOfLines(callback) {\r\n        this.eachChunk((chunk, chunkNo, chunkCount) => {\r\n            const isLast = chunkNo === chunkCount + 1;\r\n            const d = this.chunkToLines(chunk, this.__partialLine, isLast);\r\n            this.__partialLine = d.partialLine;\r\n            callback(d.lines, chunkNo, chunkCount);\r\n        });\r\n    }\r\n    dispose() {\r\n        delete this.src;\r\n    }\r\n}\r\nexport default Streamer;\r\n//# sourceMappingURL=streamer.js.map","/**\r\n * @file File Streamer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Streamer from './streamer';\r\nclass FileStreamer extends Streamer {\r\n    _read() {\r\n        return new Promise((resolve, reject) => {\r\n            const file = this.src;\r\n            const reader = new FileReader();\r\n            reader.onload = (event) => {\r\n                if (event.target)\r\n                    resolve(event.target.result);\r\n            };\r\n            // if (typeof this.onprogress === 'function') {\r\n            //   reader.onprogress = event => this.onprogress(event)\r\n            // }\r\n            reader.onerror = event => reject(event);\r\n            if (this.binary || this.compressed) {\r\n                reader.readAsArrayBuffer(file);\r\n            }\r\n            else {\r\n                reader.readAsText(file);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport default FileStreamer;\r\n//# sourceMappingURL=file-streamer.js.map","/**\r\n * @file Network Streamer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Streamer from './streamer';\r\nclass NetworkStreamer extends Streamer {\r\n    _read() {\r\n        return new Promise((resolve, reject) => {\r\n            const url = this.src;\r\n            const xhr = new XMLHttpRequest();\r\n            xhr.open('GET', url, true);\r\n            xhr.addEventListener('load', () => {\r\n                if (xhr.status === 200 || xhr.status === 304 ||\r\n                    // when requesting from local file system\r\n                    // the status in Google Chrome/Chromium is 0\r\n                    xhr.status === 0) {\r\n                    try {\r\n                        resolve(xhr.response);\r\n                    }\r\n                    catch (e) {\r\n                        reject(e);\r\n                    }\r\n                }\r\n                else {\r\n                    reject(xhr.statusText);\r\n                }\r\n            }, false);\r\n            // if (typeof this.onprogress === 'function') {\r\n            //   xhr.addEventListener('progress', event => this.onprogress(event), false);\r\n            // }\r\n            xhr.addEventListener('error', event => reject('network error'), false);\r\n            if (this.isBinary()) {\r\n                xhr.responseType = 'arraybuffer';\r\n            }\r\n            else if (this.json) {\r\n                xhr.responseType = 'json';\r\n            }\r\n            else if (this.xml) {\r\n                xhr.responseType = 'document';\r\n            }\r\n            else {\r\n                xhr.responseType = 'text';\r\n            }\r\n            // xhr.crossOrigin = true;\r\n            xhr.send();\r\n        });\r\n    }\r\n}\r\nexport default NetworkStreamer;\r\n//# sourceMappingURL=network-streamer.js.map","/**\r\n * @file Loader\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ParserRegistry } from '../globals';\r\nimport { createParams } from '../utils';\r\nimport FileStreamer from '../streamer/file-streamer';\r\nimport NetworkStreamer from '../streamer/network-streamer';\r\n/**\r\n * Loader parameter object.\r\n * @typedef {Object} LoaderParameters - loader parameters\r\n * @property {String} ext - file extension, determines file type\r\n * @property {Boolean} compressed - flag data as compressed\r\n * @property {Boolean} binary - flag data as binary\r\n * @property {String} name - set data name\r\n */\r\n/**\r\n * Loader base class\r\n */\r\nclass Loader {\r\n    /**\r\n     * Construct a loader object\r\n     * @param  {String|File|Blob} src - data source, string is interpreted as an URL\r\n     * @param  {LoaderParameters} params - parameters object\r\n     */\r\n    constructor(src, params = {}) {\r\n        this.parameters = createParams(params, {\r\n            ext: '',\r\n            compressed: false,\r\n            binary: ParserRegistry.isBinary(params.ext || ''),\r\n            name: '',\r\n            dir: '',\r\n            path: '',\r\n            protocol: ''\r\n        });\r\n        const streamerParams = {\r\n            compressed: this.parameters.compressed,\r\n            binary: this.parameters.binary,\r\n            json: ParserRegistry.isJson(this.parameters.ext),\r\n            xml: ParserRegistry.isXml(this.parameters.ext)\r\n        };\r\n        if ((typeof File !== 'undefined' && src instanceof File) ||\r\n            (typeof Blob !== 'undefined' && src instanceof Blob)) {\r\n            this.streamer = new FileStreamer(src, streamerParams);\r\n        }\r\n        else {\r\n            this.streamer = new NetworkStreamer(src, streamerParams);\r\n        }\r\n    }\r\n}\r\nexport default Loader;\r\n//# sourceMappingURL=loader.js.map","/**\r\n * @file Parser Loader\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ParserRegistry } from '../globals';\r\nimport Loader from './loader';\r\n/**\r\n * Parser loader class\r\n * @extends Loader\r\n */\r\nclass ParserLoader extends Loader {\r\n    constructor(src, params = {}) {\r\n        super(src, params);\r\n        this.parserParams = {\r\n            voxelSize: params.voxelSize,\r\n            firstModelOnly: params.firstModelOnly,\r\n            asTrajectory: params.asTrajectory,\r\n            cAlphaOnly: params.cAlphaOnly,\r\n            name: this.parameters.name,\r\n            path: this.parameters.path\r\n        };\r\n    }\r\n    /**\r\n     * Load parsed object\r\n     * @return {Promise} resolves to the loaded & parsed {@link Structure},\r\n     *                   {@link Volume}, {@link Surface} or data object\r\n     */\r\n    load() {\r\n        var ParserClass = ParserRegistry.get(this.parameters.ext);\r\n        var parser = new ParserClass(this.streamer, this.parserParams);\r\n        return parser.parse();\r\n    }\r\n}\r\nexport default ParserLoader;\r\n//# sourceMappingURL=parser-loader.js.map","/**\r\n * @file Script\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport { Log } from './globals';\r\n/**\r\n * Script class\r\n */\r\nclass Script {\r\n    /**\r\n     * Create a script instance\r\n     * @param {String} functionBody - the function source\r\n     * @param {String} name - name of the script\r\n     * @param {String} path - path of the script\r\n     */\r\n    constructor(functionBody, name, path) {\r\n        this.name = name;\r\n        this.path = path;\r\n        this.signals = {\r\n            elementAdded: new Signal(),\r\n            elementRemoved: new Signal(),\r\n            nameChanged: new Signal()\r\n        };\r\n        this.type = 'Script';\r\n        this.dir = path.substring(0, path.lastIndexOf('/') + 1);\r\n        try {\r\n            /* eslint-disable no-new-func */\r\n            this.fn = new Function('stage', '__name', '__path', '__dir', functionBody);\r\n        }\r\n        catch (e) {\r\n            Log.error('Script compilation failed', e);\r\n            this.fn = function () { };\r\n        }\r\n    }\r\n    /**\r\n     * Execute the script\r\n     * @param  {Stage} stage - the stage context\r\n     * @return {Promise} - resolve when script finished running\r\n     */\r\n    run(stage) {\r\n        return new Promise((resolve, reject) => {\r\n            try {\r\n                this.fn.apply(null, [stage, this.name, this.path, this.dir]);\r\n                resolve();\r\n            }\r\n            catch (e) {\r\n                Log.error('Script.fn', e);\r\n                reject(e);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport default Script;\r\n//# sourceMappingURL=script.js.map","/**\r\n * @file Script Loader\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Loader from './loader';\r\nimport Script from '../script';\r\n/**\r\n * Script loader class\r\n * @extends Loader\r\n */\r\nclass ScriptLoader extends Loader {\r\n    /**\r\n     * Load script\r\n     * @return {Promise} resolves to the loaded {@link Script}\r\n     */\r\n    load() {\r\n        return this.streamer.read().then(() => {\r\n            return new Script(this.streamer.asText(), this.parameters.name, this.parameters.path);\r\n        });\r\n    }\r\n}\r\nexport default ScriptLoader;\r\n//# sourceMappingURL=script-loader.js.map","/**\r\n * @file Loader Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { DatasourceRegistry, DecompressorRegistry, ParserRegistry, ScriptExtensions } from '../globals';\r\nimport ParserLoader from './parser-loader';\r\nimport ScriptLoader from './script-loader';\r\nexport function getFileInfo(file) {\r\n    const compressedExtList = DecompressorRegistry.names;\r\n    let path;\r\n    let compressed;\r\n    let protocol = '';\r\n    if (file instanceof File) {\r\n        path = file.name;\r\n    }\r\n    else if (file instanceof Blob) {\r\n        path = '';\r\n    }\r\n    else {\r\n        path = file;\r\n    }\r\n    const queryIndex = path.lastIndexOf('?');\r\n    const query = queryIndex !== -1 ? path.substring(queryIndex) : '';\r\n    path = path.substring(0, queryIndex === -1 ? path.length : queryIndex);\r\n    const name = path.replace(/^.*[\\\\/]/, '');\r\n    let base = name.substring(0, name.lastIndexOf('.'));\r\n    const nameSplit = name.split('.');\r\n    let ext = nameSplit.length > 1 ? (nameSplit.pop() || '').toLowerCase() : '';\r\n    const protocolMatch = path.match(/^(.+):\\/\\/(.+)$/);\r\n    if (protocolMatch) {\r\n        protocol = protocolMatch[1].toLowerCase();\r\n        path = protocolMatch[2] || '';\r\n    }\r\n    const dir = path.substring(0, path.lastIndexOf('/') + 1);\r\n    if (compressedExtList.includes(ext)) {\r\n        compressed = ext;\r\n        const n = path.length - ext.length - 1;\r\n        ext = (path.substr(0, n).split('.').pop() || '').toLowerCase();\r\n        const m = base.length - ext.length - 1;\r\n        base = base.substr(0, m);\r\n    }\r\n    else {\r\n        compressed = false;\r\n    }\r\n    return { path, name, ext, base, dir, compressed, protocol, query, 'src': file };\r\n}\r\nexport function getDataInfo(src) {\r\n    let info = getFileInfo(src);\r\n    const datasource = DatasourceRegistry.get(info.protocol);\r\n    if (datasource) {\r\n        info = getFileInfo(datasource.getUrl(info.src));\r\n        if (!info.ext && datasource.getExt) {\r\n            info.ext = datasource.getExt(src);\r\n        }\r\n    }\r\n    return info;\r\n}\r\n/**\r\n * Load a file\r\n *\r\n * @example\r\n * // load from URL\r\n * NGL.autoLoad( \"http://files.rcsb.org/download/5IOS.cif\" );\r\n *\r\n * @example\r\n * // load binary data in CCP4 format via a Blob\r\n * var binaryBlob = new Blob( [ ccp4Data ], { type: 'application/octet-binary'} );\r\n * NGL.autoLoad( binaryBlob, { ext: \"ccp4\" } );\r\n *\r\n * @example\r\n * // load string data in PDB format via a Blob\r\n * var stringBlob = new Blob( [ pdbData ], { type: 'text/plain'} );\r\n * NGL.autoLoad( stringBlob, { ext: \"pdb\" } );\r\n *\r\n * @example\r\n * // load a File object\r\n * NGL.autoLoad( file );\r\n *\r\n * @param  {String|File|Blob} file - either a URL or an object containing the file data\r\n * @param  {LoaderParameters} params - loading parameters\r\n * @return {Promise} Promise resolves to the loaded data\r\n */\r\nexport function autoLoad(file, params = {}) {\r\n    const p = Object.assign(getDataInfo(file), params);\r\n    let loader;\r\n    if (ParserRegistry.names.includes(p.ext)) {\r\n        loader = new ParserLoader(p.src, p);\r\n    }\r\n    else if (ScriptExtensions.includes(p.ext)) {\r\n        loader = new ScriptLoader(p.src, p);\r\n    }\r\n    if (loader) {\r\n        return loader.load();\r\n    }\r\n    else {\r\n        return Promise.reject(new Error(`autoLoad: ext '${p.ext}' unknown`));\r\n    }\r\n}\r\n//# sourceMappingURL=loader-utils.js.map","/**\r\n * @file Writer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults, download } from '../utils';\r\n/**\r\n * Base class for writers\r\n * @interface\r\n */\r\nclass Writer {\r\n    /**\r\n     * Get a blob with the written data\r\n     * @return {Blob} the blob\r\n     */\r\n    getBlob() {\r\n        return new Blob([this.getData()], { type: this.mimeType });\r\n    }\r\n    /**\r\n     * Trigger a download of the\r\n     * @param  {[type]} name [description]\r\n     * @param  {[type]} ext  [description]\r\n     * @return {[type]}      [description]\r\n     */\r\n    download(name, ext) {\r\n        name = defaults(name, this.defaultName);\r\n        ext = defaults(ext, this.defaultExt);\r\n        download(this.getBlob(), `${name}.${ext}`);\r\n    }\r\n}\r\nexport default Writer;\r\n//# sourceMappingURL=writer.js.map","/**\r\n * @file Pdb Writer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { sprintf } from 'sprintf-js';\r\nimport Writer from './writer';\r\nimport { defaults, ensureArray } from '../utils';\r\n// http://www.wwpdb.org/documentation/file-format\r\n// Sample PDB line, the coords X,Y,Z are fields 5,6,7 on each line.\r\n// ATOM      1  N   ARG     1      29.292  13.212 -12.751  1.00 33.78      1BPT 108\r\nconst AtomFormat = 'ATOM  %5d %-4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s';\r\nconst HetatmFormat = 'HETATM%5d %-4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s';\r\n/**\r\n * Create a PDB file from a Structure object\r\n */\r\nexport default class PdbWriter extends Writer {\r\n    /**\r\n     * @param  {Structure} structure - the structure object\r\n     * @param  {Object} params - parameters]\r\n     */\r\n    constructor(structure, params) {\r\n        super();\r\n        this.mimeType = 'text/plain';\r\n        this.defaultName = 'structure';\r\n        this.defaultExt = 'pdb';\r\n        const p = Object.assign({}, params);\r\n        this.renumberSerial = defaults(p.renumberSerial, true);\r\n        this.remarks = ensureArray(defaults(p.remarks, []));\r\n        this.structure = structure;\r\n        this._records = [];\r\n    }\r\n    _writeRecords() {\r\n        this._records.length = 0;\r\n        this._writeTitle();\r\n        this._writeRemarks();\r\n        this._writeAtoms();\r\n    }\r\n    _writeTitle() {\r\n        // FIXME multiline if title line longer than 80 chars\r\n        this._records.push(sprintf('TITLE %-74s', this.structure.name));\r\n    }\r\n    _writeRemarks() {\r\n        this.remarks.forEach(str => {\r\n            this._records.push(sprintf('REMARK %-73s', str));\r\n        });\r\n        if (this.structure.trajectory) {\r\n            this._records.push(sprintf('REMARK %-73s', \"Trajectory '\" + this.structure.trajectory.name + \"'\"));\r\n            this._records.push(sprintf('REMARK %-73s', `Frame ${this.structure.trajectory.frame}` // TODO\r\n            ));\r\n        }\r\n    }\r\n    _writeAtoms() {\r\n        let ia = 1;\r\n        let im = 1;\r\n        this.structure.eachModel(m => {\r\n            this._records.push(sprintf('MODEL %-74d', im++));\r\n            m.eachAtom((a) => {\r\n                const formatString = a.hetero ? HetatmFormat : AtomFormat;\r\n                const serial = this.renumberSerial ? ia : a.serial;\r\n                // Alignment of one-letter atom name such as C starts at column 14,\r\n                // while two-letter atom name such as FE starts at column 13.\r\n                let atomname = a.atomname;\r\n                if (atomname.length === 1)\r\n                    atomname = ' ' + atomname;\r\n                this._records.push(sprintf(formatString, serial, atomname, a.resname, defaults(a.chainname, ' '), a.resno, a.x, a.y, a.z, defaults(a.occupancy, 1.0), defaults(a.bfactor, 0.0), '', // segid\r\n                defaults(a.element, '')));\r\n                ia += 1;\r\n            });\r\n            this._records.push(sprintf('%-80s', 'ENDMDL'));\r\n            im += 1;\r\n        });\r\n        this._records.push(sprintf('%-80s', 'END'));\r\n    }\r\n    getString() {\r\n        console.warn('PdbWriter.getString() is deprecated, use .getData instead');\r\n        return this.getData();\r\n    }\r\n    /**\r\n     * Get string containing the PDB file data\r\n     * @return {String} PDB file\r\n     */\r\n    getData() {\r\n        this._writeRecords();\r\n        return this._records.join('\\n');\r\n    }\r\n}\r\n//# sourceMappingURL=pdb-writer.js.map","/**\r\n * Writer class for sdf/mol files.\r\n */\r\nimport { sprintf } from 'sprintf-js';\r\nimport Writer from './writer.js';\r\n// Hard-coded chiral as false as we don't specify it any atoms\r\nconst CountFormat = '%3i%3i  0  0  0  0  0  0  0  0999 V2000';\r\nconst AtomLine = '%10.4f%10.4f%10.4f %-3s 0%3i  0  0  0';\r\nconst BondFormat = '%3i%3i%3i  0  0  0';\r\nclass SdfWriter extends Writer {\r\n    /**\r\n     * @param {Structure} structure - structure to write\r\n     * @param {Object} params - parameters\r\n     */\r\n    constructor(structure) {\r\n        super();\r\n        this.mimeType = 'text/plain';\r\n        this.defaultName = 'structure';\r\n        this.defaultExt = 'sdf';\r\n        this.structure = structure;\r\n        // Follow the pdb-writer example:\r\n        this._records = [];\r\n    }\r\n    get idString() {\r\n        return this.structure.id;\r\n    }\r\n    get titleString() {\r\n        return '  ' + this.structure.title;\r\n    }\r\n    get countsString() {\r\n        return sprintf(CountFormat, this.structure.atomCount, this.structure.bondCount);\r\n    }\r\n    get chargeLines() {\r\n        const pairs = [];\r\n        this.structure.eachAtom(ap => {\r\n            if (ap.formalCharge != null && ap.formalCharge !== 0) {\r\n                pairs.push([ap.index, ap.formalCharge]);\r\n            }\r\n        });\r\n        const lines = [];\r\n        for (let i = 0; i < pairs.length; i += 8) {\r\n            const nCharges = Math.min(8, pairs.length - i);\r\n            let s = sprintf('M  CHG%3i', nCharges);\r\n            for (let j = i; j < i + nCharges; j++) {\r\n                s += sprintf(' %3i %3i', pairs[j][0] + 1, pairs[j][1]);\r\n            }\r\n            lines.push(s);\r\n        }\r\n        return lines;\r\n    }\r\n    formatAtom(ap) {\r\n        let charge = 0;\r\n        if (ap.formalCharge != null && ap.formalCharge !== 0) {\r\n            charge = 4 - ap.formalCharge;\r\n        }\r\n        const line = sprintf(AtomLine, ap.x, ap.y, ap.z, ap.element, charge);\r\n        if (line.length !== 48) {\r\n            throw new Error('Incompatible atom for sdf format');\r\n        }\r\n        return line;\r\n    }\r\n    formatBond(bp) {\r\n        return sprintf(BondFormat, bp.atomIndex1 + 1, bp.atomIndex2 + 1, bp.bondOrder);\r\n    }\r\n    _writeRecords() {\r\n        this._records.length = 0;\r\n        this._writeHeader();\r\n        this._writeCTab();\r\n        this._writeFooter();\r\n    }\r\n    _writeHeader() {\r\n        this._records.push(this.idString, this.titleString, '');\r\n    }\r\n    _writeCTab() {\r\n        this._records.push(this.countsString);\r\n        this.structure.eachAtom(ap => {\r\n            this._records.push(this.formatAtom(ap));\r\n        });\r\n        this.structure.eachBond(bp => {\r\n            this._records.push(this.formatBond(bp));\r\n        });\r\n        this.chargeLines.forEach(line => {\r\n            this._records.push(line);\r\n        });\r\n        this._records.push('M  END');\r\n    }\r\n    _writeFooter() {\r\n        this._records.push('$$$$');\r\n    }\r\n    getData() {\r\n        this._writeRecords();\r\n        return this._records.join('\\n');\r\n    }\r\n}\r\nexport default SdfWriter;\r\n//# sourceMappingURL=sdf-writer.js.map","/**\r\n * @file IO Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n *\r\n * Adapted and converted to TypeScript from https://github.com/image-js/iobuffer\r\n * MIT License, Copyright (c) 2015 Michaël Zasso\r\n */\r\nconst defaultByteLength = 1024 * 8;\r\nconst charArray = [];\r\n/**\r\n * Class for writing and reading binary data\r\n */\r\nclass IOBuffer {\r\n    /**\r\n     * If it's a number, it will initialize the buffer with the number as\r\n     * the buffer's length. If it's undefined, it will initialize the buffer\r\n     * with a default length of 8 Kb. If its an ArrayBuffer, a TypedArray,\r\n     * it will create a view over the underlying ArrayBuffer.\r\n     */\r\n    constructor(data, params = {}) {\r\n        this._mark = 0;\r\n        this._marks = [];\r\n        this.offset = 0; // The current offset of the buffer's pointer\r\n        this.littleEndian = true;\r\n        let dataIsGiven = false;\r\n        if (data === undefined) {\r\n            data = defaultByteLength;\r\n        }\r\n        if (typeof data === 'number') {\r\n            data = new ArrayBuffer(data);\r\n        }\r\n        else {\r\n            dataIsGiven = true;\r\n        }\r\n        const offset = params.offset ? params.offset >>> 0 : 0;\r\n        let byteLength = data.byteLength - offset;\r\n        let dvOffset = offset;\r\n        if (!(data instanceof ArrayBuffer)) {\r\n            if (data.byteLength !== data.buffer.byteLength) {\r\n                dvOffset = data.byteOffset + offset;\r\n            }\r\n            data = data.buffer;\r\n        }\r\n        if (dataIsGiven) {\r\n            this._lastWrittenByte = byteLength;\r\n        }\r\n        else {\r\n            this._lastWrittenByte = 0;\r\n        }\r\n        this.buffer = data;\r\n        this.length = byteLength;\r\n        this.byteLength = byteLength;\r\n        this.byteOffset = dvOffset;\r\n        this._data = new DataView(this.buffer, dvOffset, byteLength);\r\n    }\r\n    /**\r\n     * Checks if the memory allocated to the buffer is sufficient to store more bytes after the offset\r\n     * @param {number} [byteLength=1] The needed memory in bytes\r\n     * @return {boolean} Returns true if there is sufficient space and false otherwise\r\n     */\r\n    available(byteLength) {\r\n        if (byteLength === undefined)\r\n            byteLength = 1;\r\n        return (this.offset + byteLength) <= this.length;\r\n    }\r\n    /**\r\n     * Check if little-endian mode is used for reading and writing multi-byte values\r\n     * @return {boolean} Returns true if little-endian mode is used, false otherwise\r\n     */\r\n    isLittleEndian() {\r\n        return this.littleEndian;\r\n    }\r\n    /**\r\n     * Set little-endian mode for reading and writing multi-byte values\r\n     * @return {IOBuffer}\r\n     */\r\n    setLittleEndian() {\r\n        this.littleEndian = true;\r\n        return this;\r\n    }\r\n    /**\r\n     * Check if big-endian mode is used for reading and writing multi-byte values\r\n     * @return {boolean} Returns true if big-endian mode is used, false otherwise\r\n     */\r\n    isBigEndian() {\r\n        return !this.littleEndian;\r\n    }\r\n    /**\r\n     * Switches to big-endian mode for reading and writing multi-byte values\r\n     * @return {IOBuffer}\r\n     */\r\n    setBigEndian() {\r\n        this.littleEndian = false;\r\n        return this;\r\n    }\r\n    /**\r\n     * Move the pointer n bytes forward\r\n     * @param {number} n\r\n     * @return {IOBuffer}\r\n     */\r\n    skip(n) {\r\n        if (n === undefined)\r\n            n = 1;\r\n        this.offset += n;\r\n        return this;\r\n    }\r\n    /**\r\n     * Move the pointer to the given offset\r\n     * @param {number} offset\r\n     * @return {IOBuffer}\r\n     */\r\n    seek(offset) {\r\n        this.offset = offset;\r\n        return this;\r\n    }\r\n    /**\r\n     * Store the current pointer offset.\r\n     * @see {@link IOBuffer#reset}\r\n     * @return {IOBuffer}\r\n     */\r\n    mark() {\r\n        this._mark = this.offset;\r\n        return this;\r\n    }\r\n    /**\r\n     * Move the pointer back to the last pointer offset set by mark\r\n     * @see {@link IOBuffer#mark}\r\n     * @return {IOBuffer}\r\n     */\r\n    reset() {\r\n        this.offset = this._mark;\r\n        return this;\r\n    }\r\n    /**\r\n     * Push the current pointer offset to the mark stack\r\n     * @see {@link IOBuffer#popMark}\r\n     * @return {IOBuffer}\r\n     */\r\n    pushMark() {\r\n        this._marks.push(this.offset);\r\n        return this;\r\n    }\r\n    /**\r\n     * Pop the last pointer offset from the mark stack, and set the current pointer offset to the popped value\r\n     * @see {@link IOBuffer#pushMark}\r\n     * @return {IOBuffer}\r\n     */\r\n    popMark() {\r\n        const offset = this._marks.pop();\r\n        if (offset === undefined)\r\n            throw new Error('Mark stack empty');\r\n        this.seek(offset);\r\n        return this;\r\n    }\r\n    /**\r\n     * Move the pointer offset back to 0\r\n     * @return {IOBuffer}\r\n     */\r\n    rewind() {\r\n        this.offset = 0;\r\n        return this;\r\n    }\r\n    /**\r\n     * Make sure the buffer has sufficient memory to write a given byteLength at the current pointer offset\r\n     * If the buffer's memory is insufficient, this method will create a new buffer (a copy) with a length\r\n     * that is twice (byteLength + current offset)\r\n     * @param {number} [byteLength = 1]\r\n     * @return {IOBuffer}\r\n     */\r\n    ensureAvailable(byteLength) {\r\n        if (byteLength === undefined)\r\n            byteLength = 1;\r\n        if (!this.available(byteLength)) {\r\n            const lengthNeeded = this.offset + byteLength;\r\n            const newLength = lengthNeeded * 2;\r\n            const newArray = new Uint8Array(newLength);\r\n            newArray.set(new Uint8Array(this.buffer));\r\n            this.buffer = newArray.buffer;\r\n            this.length = this.byteLength = newLength;\r\n            this._data = new DataView(this.buffer);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Read a byte and return false if the byte's value is 0, or true otherwise\r\n     * Moves pointer forward\r\n     * @return {boolean}\r\n     */\r\n    readBoolean() {\r\n        return this.readUint8() !== 0;\r\n    }\r\n    /**\r\n     * Read a signed 8-bit integer and move pointer forward\r\n     * @return {number}\r\n     */\r\n    readInt8() {\r\n        return this._data.getInt8(this.offset++);\r\n    }\r\n    /**\r\n     * Read an unsigned 8-bit integer and move pointer forward\r\n     * @return {number}\r\n     */\r\n    readUint8() {\r\n        return this._data.getUint8(this.offset++);\r\n    }\r\n    /**\r\n     * Alias for {@link IOBuffer#readUint8}\r\n     * @return {number}\r\n     */\r\n    readByte() {\r\n        return this.readUint8();\r\n    }\r\n    /**\r\n     * Read n bytes and move pointer forward.\r\n     * @param {number} n\r\n     * @return {Uint8Array}\r\n     */\r\n    readBytes(n) {\r\n        if (n === undefined)\r\n            n = 1;\r\n        var bytes = new Uint8Array(n);\r\n        for (var i = 0; i < n; i++) {\r\n            bytes[i] = this.readByte();\r\n        }\r\n        return bytes;\r\n    }\r\n    /**\r\n     * Read a 16-bit signed integer and move pointer forward\r\n     * @return {number}\r\n     */\r\n    readInt16() {\r\n        var value = this._data.getInt16(this.offset, this.littleEndian);\r\n        this.offset += 2;\r\n        return value;\r\n    }\r\n    /**\r\n     * Read a 16-bit unsigned integer and move pointer forward\r\n     * @return {number}\r\n     */\r\n    readUint16() {\r\n        var value = this._data.getUint16(this.offset, this.littleEndian);\r\n        this.offset += 2;\r\n        return value;\r\n    }\r\n    /**\r\n     * Read a 32-bit signed integer and move pointer forward\r\n     * @return {number}\r\n     */\r\n    readInt32() {\r\n        var value = this._data.getInt32(this.offset, this.littleEndian);\r\n        this.offset += 4;\r\n        return value;\r\n    }\r\n    /**\r\n     * Read a 32-bit unsigned integer and move pointer forward\r\n     * @return {number}\r\n     */\r\n    readUint32() {\r\n        var value = this._data.getUint32(this.offset, this.littleEndian);\r\n        this.offset += 4;\r\n        return value;\r\n    }\r\n    /**\r\n     * Read a 32-bit floating number and move pointer forward\r\n     * @return {number}\r\n     */\r\n    readFloat32() {\r\n        var value = this._data.getFloat32(this.offset, this.littleEndian);\r\n        this.offset += 4;\r\n        return value;\r\n    }\r\n    /**\r\n     * Read a 64-bit floating number and move pointer forward\r\n     * @return {number}\r\n     */\r\n    readFloat64() {\r\n        var value = this._data.getFloat64(this.offset, this.littleEndian);\r\n        this.offset += 8;\r\n        return value;\r\n    }\r\n    /**\r\n     * Read 1-byte ascii character and move pointer forward\r\n     * @return {string}\r\n     */\r\n    readChar() {\r\n        return String.fromCharCode(this.readInt8());\r\n    }\r\n    /**\r\n     * Read n 1-byte ascii characters and move pointer forward\r\n     * @param {number} n\r\n     * @return {string}\r\n     */\r\n    readChars(n = 1) {\r\n        charArray.length = n;\r\n        for (var i = 0; i < n; i++) {\r\n            charArray[i] = this.readChar();\r\n        }\r\n        return charArray.join('');\r\n    }\r\n    /**\r\n     * Write 0xff if the passed value is truthy, 0x00 otherwise\r\n     * @param {any} value\r\n     * @return {IOBuffer}\r\n     */\r\n    writeBoolean(value = false) {\r\n        this.writeUint8(value ? 0xff : 0x00);\r\n        return this;\r\n    }\r\n    /**\r\n     * Write value as an 8-bit signed integer\r\n     * @param {number} value\r\n     * @return {IOBuffer}\r\n     */\r\n    writeInt8(value) {\r\n        this.ensureAvailable(1);\r\n        this._data.setInt8(this.offset++, value);\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * Write value as a 8-bit unsigned integer\r\n     * @param {number} value\r\n     * @return {IOBuffer}\r\n     */\r\n    writeUint8(value) {\r\n        this.ensureAvailable(1);\r\n        this._data.setUint8(this.offset++, value);\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * An alias for {@link IOBuffer#writeUint8}\r\n     * @param {number} value\r\n     * @return {IOBuffer}\r\n     */\r\n    writeByte(value) {\r\n        return this.writeUint8(value);\r\n    }\r\n    /**\r\n     * Write bytes\r\n     * @param {Array|Uint8Array} bytes\r\n     * @return {IOBuffer}\r\n     */\r\n    writeBytes(bytes) {\r\n        this.ensureAvailable(bytes.length);\r\n        for (var i = 0; i < bytes.length; i++) {\r\n            this._data.setUint8(this.offset++, bytes[i]);\r\n        }\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * Write value as an 16-bit signed integer\r\n     * @param {number} value\r\n     * @return {IOBuffer}\r\n     */\r\n    writeInt16(value) {\r\n        this.ensureAvailable(2);\r\n        this._data.setInt16(this.offset, value, this.littleEndian);\r\n        this.offset += 2;\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * Write value as a 16-bit unsigned integer\r\n     * @param {number} value\r\n     * @return {IOBuffer}\r\n     */\r\n    writeUint16(value) {\r\n        this.ensureAvailable(2);\r\n        this._data.setUint16(this.offset, value, this.littleEndian);\r\n        this.offset += 2;\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * Write a 32-bit signed integer at the current pointer offset\r\n     * @param {number} value\r\n     * @return {IOBuffer}\r\n     */\r\n    writeInt32(value) {\r\n        this.ensureAvailable(4);\r\n        this._data.setInt32(this.offset, value, this.littleEndian);\r\n        this.offset += 4;\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * Write a 32-bit unsigned integer at the current pointer offset\r\n     * @param {number} value - The value to set\r\n     * @return {IOBuffer}\r\n     */\r\n    writeUint32(value) {\r\n        this.ensureAvailable(4);\r\n        this._data.setUint32(this.offset, value, this.littleEndian);\r\n        this.offset += 4;\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * Write a 32-bit floating number at the current pointer offset\r\n     * @param {number} value - The value to set\r\n     * @return {IOBuffer}\r\n     */\r\n    writeFloat32(value) {\r\n        this.ensureAvailable(4);\r\n        this._data.setFloat32(this.offset, value, this.littleEndian);\r\n        this.offset += 4;\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * Write a 64-bit floating number at the current pointer offset\r\n     * @param {number} value\r\n     * @return {IOBuffer}\r\n     */\r\n    writeFloat64(value) {\r\n        this.ensureAvailable(8);\r\n        this._data.setFloat64(this.offset, value, this.littleEndian);\r\n        this.offset += 8;\r\n        this._updateLastWrittenByte();\r\n        return this;\r\n    }\r\n    /**\r\n     * Write the charCode of the passed string's first character to the current pointer offset\r\n     * @param {string} str - The character to set\r\n     * @return {IOBuffer}\r\n     */\r\n    writeChar(str) {\r\n        return this.writeUint8(str.charCodeAt(0));\r\n    }\r\n    /**\r\n     * Write the charCodes of the passed string's characters to the current pointer offset\r\n     * @param {string} str\r\n     * @return {IOBuffer}\r\n     */\r\n    writeChars(str) {\r\n        for (var i = 0; i < str.length; i++) {\r\n            this.writeUint8(str.charCodeAt(i));\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Export a Uint8Array view of the internal buffer.\r\n     * The view starts at the byte offset and its length\r\n     * is calculated to stop at the last written byte or the original length.\r\n     * @return {Uint8Array}\r\n     */\r\n    toArray() {\r\n        return new Uint8Array(this.buffer, this.byteOffset, this._lastWrittenByte);\r\n    }\r\n    /**\r\n     * Update the last written byte offset\r\n     * @private\r\n     */\r\n    _updateLastWrittenByte() {\r\n        if (this.offset > this._lastWrittenByte) {\r\n            this._lastWrittenByte = this.offset;\r\n        }\r\n    }\r\n}\r\nexport default IOBuffer;\r\n//# sourceMappingURL=io-buffer.js.map","/**\r\n * @file STL Writer\r\n * @author Paul Pillot <paul.pillot@cimf.ca>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport Writer from './writer';\r\nimport IOBuffer from '../utils/io-buffer';\r\n// https://en.wikipedia.org/wiki/STL_(file_format)#ASCII_STL\r\n/**\r\n * Create an STL File from a surface Object (e.g. for 3D printing)\r\n *\r\n * @example\r\n * molsurf = new MolecularSurface(structure)\r\n * surf = molsurf.getSurface({type: 'av', probeRadius: 1.4})\r\n * stl = new StlWriter(surf)\r\n * stl.download('myFileName')\r\n */\r\nexport default class StlWriter extends Writer {\r\n    /**\r\n     * @param {Surface} surface - the surface to write out\r\n     */\r\n    constructor(surface) {\r\n        super();\r\n        this.mimeType = 'application/vnd.ms-pki.stl';\r\n        this.defaultName = 'surface';\r\n        this.defaultExt = 'stl';\r\n        this.surface = surface;\r\n    }\r\n    /*\r\n     * Get STL Binary data\r\n     *\r\n     * Adapted from: https://github.com/mrdoob/three.js/blob/master/examples/js/exporters/STLBinaryExporter.js\r\n     * see https://en.wikipedia.org/wiki/STL_(file_format)#Binary_STL for the file format description\r\n     *\r\n     * @return {DataView} the data\r\n     */\r\n    getData() {\r\n        const triangles = this.surface.index.length / 3;\r\n        const bufferLength = triangles * 2 + triangles * 3 * 4 * 4 + 80 + 4;\r\n        const output = new IOBuffer(bufferLength);\r\n        output.skip(80); // skip header\r\n        output.writeUint32(triangles);\r\n        const vector = new Vector3();\r\n        const vectorNorm1 = new Vector3();\r\n        const vectorNorm2 = new Vector3();\r\n        const vectorNorm3 = new Vector3();\r\n        // traversing vertices\r\n        for (let i = 0; i < triangles; i++) {\r\n            const indices = [\r\n                this.surface.index[i * 3],\r\n                this.surface.index[i * 3 + 1],\r\n                this.surface.index[i * 3 + 2]\r\n            ];\r\n            vectorNorm1.fromArray(this.surface.normal, indices[0] * 3);\r\n            vectorNorm2.fromArray(this.surface.normal, indices[1] * 3);\r\n            vectorNorm3.fromArray(this.surface.normal, indices[2] * 3);\r\n            vector.addVectors(vectorNorm1, vectorNorm2).add(vectorNorm3).normalize();\r\n            output.writeFloat32(vector.x);\r\n            output.writeFloat32(vector.y);\r\n            output.writeFloat32(vector.z);\r\n            for (let j = 0; j < 3; j++) {\r\n                vector.fromArray(this.surface.position, indices[j] * 3);\r\n                output.writeFloat32(vector.x); // vertices\r\n                output.writeFloat32(vector.y);\r\n                output.writeFloat32(vector.z);\r\n            }\r\n            output.writeUint16(0); // attribute byte count\r\n        }\r\n        return new DataView(output.buffer);\r\n    }\r\n}\r\n//# sourceMappingURL=stl-writer.js.map","/**\r\n * @file Counter\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Log } from '../globals';\r\nimport * as signalsWrapper from 'signals';\r\n/**\r\n * Counter class for keeping track of counts\r\n */\r\nclass Counter {\r\n    constructor() {\r\n        this.count = 0;\r\n        this.signals = {\r\n            countChanged: new signalsWrapper.Signal()\r\n        };\r\n    }\r\n    /**\r\n     * Set the `count` to zero\r\n     * @return {undefined}\r\n     */\r\n    clear() {\r\n        this.change(-this.count);\r\n    }\r\n    /**\r\n     * Change the `count`\r\n     * @fires Counter#countChanged\r\n     * @param {Integer} delta - count change\r\n     * @return {undefined}\r\n     */\r\n    change(delta) {\r\n        this.count += delta;\r\n        this.signals.countChanged.dispatch(delta, this.count);\r\n        if (this.count < 0) {\r\n            Log.warn('Counter.count below zero', this.count);\r\n        }\r\n    }\r\n    /**\r\n     * Increments the `count` by one.\r\n     * @return {undefined}\r\n     */\r\n    increment() {\r\n        this.change(1);\r\n    }\r\n    /**\r\n     * Decrements the `count` by one.\r\n     * @return {undefined}\r\n     */\r\n    decrement() {\r\n        this.change(-1);\r\n    }\r\n    /**\r\n     * Listen to another counter object and change this `count` by the\r\n     * same amount\r\n     * @param  {Counter} counter - the counter object to listen to\r\n     * @return {undefined}\r\n     */\r\n    listen(counter) {\r\n        this.change(counter.count);\r\n        counter.signals.countChanged.add(this.change, this);\r\n    }\r\n    /**\r\n     * Stop listening to the other counter object\r\n     * @param  {Counter} counter - the counter object to stop listening to\r\n     * @return {undefined}\r\n     */\r\n    unlisten(counter) {\r\n        const countChanged = counter.signals.countChanged;\r\n        if (countChanged.has(this.change, this)) {\r\n            countChanged.remove(this.change, this);\r\n        }\r\n    }\r\n    /**\r\n     * Invole the callback function once, when the `count` becomes zero\r\n     * @param  {Function} callback - the callback function\r\n     * @param  {Object}   context - the context for the callback function\r\n     * @return {undefined}\r\n     */\r\n    onZeroOnce(callback, context) {\r\n        if (this.count === 0) {\r\n            callback.call(context);\r\n        }\r\n        else {\r\n            const fn = () => {\r\n                if (this.count === 0) {\r\n                    this.signals.countChanged.remove(fn, this);\r\n                    callback.call(context);\r\n                }\r\n            };\r\n            this.signals.countChanged.add(fn, this);\r\n        }\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n        this.signals.countChanged.dispose();\r\n    }\r\n}\r\nexport default Counter;\r\n//# sourceMappingURL=counter.js.map","/**\r\n * @file Stats\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport * as signalsWrapper from 'signals';\r\nexport default class Stats {\r\n    constructor() {\r\n        this.signals = {\r\n            updated: new signalsWrapper.Signal()\r\n        };\r\n        this.maxDuration = -Infinity;\r\n        this.minDuration = Infinity;\r\n        this.avgDuration = 14;\r\n        this.lastDuration = Infinity;\r\n        this.prevFpsTime = 0;\r\n        this.lastFps = Infinity;\r\n        this.lastFrames = 1;\r\n        this.frames = 0;\r\n        this.count = 0;\r\n        this.begin();\r\n    }\r\n    update() {\r\n        this.startTime = this.end();\r\n        this.currentTime = this.startTime;\r\n        this.signals.updated.dispatch();\r\n    }\r\n    begin() {\r\n        this.startTime = window.performance.now();\r\n        this.lastFrames = this.frames;\r\n    }\r\n    end() {\r\n        const time = window.performance.now();\r\n        this.count += 1;\r\n        this.frames += 1;\r\n        this.lastDuration = time - this.startTime;\r\n        this.minDuration = Math.min(this.minDuration, this.lastDuration);\r\n        this.maxDuration = Math.max(this.maxDuration, this.lastDuration);\r\n        this.avgDuration -= this.avgDuration / 30;\r\n        this.avgDuration += this.lastDuration / 30;\r\n        if (time > this.prevFpsTime + 1000) {\r\n            this.lastFps = this.frames;\r\n            this.prevFpsTime = time;\r\n            this.frames = 0;\r\n        }\r\n        return time;\r\n    }\r\n}\r\n//# sourceMappingURL=stats.js.map","/**\r\n * @file Shader Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ShaderChunk } from 'three';\r\nimport './chunk/fog_fragment.glsl';\r\nimport './chunk/interior_fragment.glsl';\r\nimport './chunk/matrix_scale.glsl';\r\nimport './chunk/nearclip_vertex.glsl';\r\nimport './chunk/nearclip_fragment.glsl';\r\nimport './chunk/opaque_back_fragment.glsl';\r\nimport './chunk/radiusclip_vertex.glsl';\r\nimport './chunk/radiusclip_fragment.glsl';\r\nimport './chunk/unpack_color.glsl';\r\nimport { ShaderRegistry } from '../globals';\r\nfunction getDefines(defines) {\r\n    if (defines === undefined)\r\n        return '';\r\n    const lines = [];\r\n    for (const name in defines) {\r\n        const value = defines[name];\r\n        if (!value)\r\n            continue;\r\n        lines.push(`#define ${name} ${value}`);\r\n    }\r\n    return lines.join('\\n') + '\\n';\r\n}\r\nconst reInclude = /^(?!\\/\\/)\\s*#include\\s+(\\S+)/gmi;\r\nconst shaderCache = {};\r\nexport function getShader(name, defines = {}) {\r\n    let hash = name + '|';\r\n    for (const key in defines) {\r\n        hash += key + ':' + defines[key];\r\n    }\r\n    if (!shaderCache[hash]) {\r\n        const definesText = getDefines(defines);\r\n        let shaderText = ShaderRegistry.get(`shader/${name}`);\r\n        if (!shaderText) {\r\n            throw new Error(`empty shader, '${name}'`);\r\n        }\r\n        shaderText = shaderText.replace(reInclude, function (match, p1) {\r\n            const path = `shader/chunk/${p1}.glsl`;\r\n            const chunk = ShaderRegistry.get(path) || ShaderChunk[p1];\r\n            if (!chunk) {\r\n                throw new Error(`empty chunk, '${p1}'`);\r\n            }\r\n            return chunk;\r\n        });\r\n        shaderCache[hash] = definesText + shaderText;\r\n    }\r\n    return shaderCache[hash];\r\n}\r\n//# sourceMappingURL=shader-utils.js.map","/**\r\n * @file Viewer Constants\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug } from '../globals';\r\nif (typeof WebGLRenderingContext !== 'undefined') {\r\n    const wrcp = WebGLRenderingContext.prototype;\r\n    // wrap WebGL debug function used by three.js and\r\n    // ignore calls to them when the debug flag is not set\r\n    const _getShaderParameter = wrcp.getShaderParameter;\r\n    wrcp.getShaderParameter = function getShaderParameter() {\r\n        if (Debug) {\r\n            return _getShaderParameter.apply(this, arguments);\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    };\r\n    const _getShaderInfoLog = wrcp.getShaderInfoLog;\r\n    wrcp.getShaderInfoLog = function getShaderInfoLog() {\r\n        if (Debug) {\r\n            return _getShaderInfoLog.apply(this, arguments);\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    };\r\n    const _getProgramParameter = wrcp.getProgramParameter;\r\n    wrcp.getProgramParameter = function getProgramParameter(program, pname) {\r\n        if (Debug || pname !== wrcp.LINK_STATUS) {\r\n            return _getProgramParameter.apply(this, arguments);\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    };\r\n    const _getProgramInfoLog = wrcp.getProgramInfoLog;\r\n    wrcp.getProgramInfoLog = function getProgramInfoLog() {\r\n        if (Debug) {\r\n            return _getProgramInfoLog.apply(this, arguments);\r\n        }\r\n        else {\r\n            return '';\r\n        }\r\n    };\r\n}\r\nexport const JitterVectors = [\r\n    [\r\n        [0, 0]\r\n    ],\r\n    [\r\n        [4, 4], [-4, -4]\r\n    ],\r\n    [\r\n        [-2, -6], [6, -2], [-6, 2], [2, 6]\r\n    ],\r\n    [\r\n        [1, -3], [-1, 3], [5, 1], [-3, -5],\r\n        [-5, 5], [-7, -1], [3, 7], [7, -7]\r\n    ],\r\n    [\r\n        [1, 1], [-1, -3], [-3, 2], [4, -1],\r\n        [-5, -2], [2, 5], [5, 3], [3, -5],\r\n        [-2, 6], [0, -7], [-4, -6], [-6, 4],\r\n        [-8, 0], [7, -4], [6, 7], [-7, -8]\r\n    ],\r\n    [\r\n        [-4, -7], [-7, -5], [-3, -5], [-5, -4],\r\n        [-1, -4], [-2, -2], [-6, -1], [-4, 0],\r\n        [-7, 1], [-1, 2], [-6, 3], [-3, 3],\r\n        [-7, 6], [-3, 6], [-5, 7], [-1, 7],\r\n        [5, -7], [1, -6], [6, -5], [4, -4],\r\n        [2, -3], [7, -2], [1, -1], [4, -1],\r\n        [2, 1], [6, 2], [0, 4], [4, 4],\r\n        [2, 5], [7, 5], [5, 6], [3, 7]\r\n    ]\r\n];\r\nJitterVectors.forEach(offsetList => {\r\n    offsetList.forEach(offset => {\r\n        // 0.0625 = 1 / 16\r\n        offset[0] *= 0.0625;\r\n        offset[1] *= 0.0625;\r\n    });\r\n});\r\n//# sourceMappingURL=viewer-constants.js.map","/**\r\n * @file Tiled Renderer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nclass TiledRenderer {\r\n    constructor(renderer, camera, viewer, params) {\r\n        this.canvas = document.createElement('canvas');\r\n        this._viewer = viewer;\r\n        this._factor = defaults(params.factor, 2);\r\n        this._antialias = defaults(params.antialias, false);\r\n        this._onProgress = params.onProgress;\r\n        this._onFinish = params.onFinish;\r\n        if (this._antialias)\r\n            this._factor *= 2;\r\n        this._n = this._factor * this._factor;\r\n        // canvas\r\n        this._width = this._viewer.width;\r\n        this._height = this._viewer.height;\r\n        if (this._antialias) {\r\n            this.canvas.width = this._width * this._factor / 2;\r\n            this.canvas.height = this._height * this._factor / 2;\r\n        }\r\n        else {\r\n            this.canvas.width = this._width * this._factor;\r\n            this.canvas.height = this._height * this._factor;\r\n        }\r\n        this._ctx = this.canvas.getContext('2d');\r\n        this._viewerSampleLevel = viewer.sampleLevel;\r\n        this._viewer.setSampling(-1);\r\n    }\r\n    _renderTile(i) {\r\n        const viewer = this._viewer;\r\n        const width = this._width;\r\n        const height = this._height;\r\n        const factor = this._factor;\r\n        const x = i % factor;\r\n        const y = Math.floor(i / factor);\r\n        const offsetX = x * width;\r\n        const offsetY = y * height;\r\n        viewer.camera.setViewOffset(width * factor, height * factor, offsetX, offsetY, width, height);\r\n        viewer.render();\r\n        if (this._antialias) {\r\n            const w = Math.round((offsetX + width) / 2) - Math.round(offsetX / 2);\r\n            const h = Math.round((offsetY + height) / 2) - Math.round(offsetY / 2);\r\n            this._ctx.drawImage(viewer.renderer.domElement, Math.round(offsetX / 2), Math.round(offsetY / 2), w, h);\r\n        }\r\n        else {\r\n            this._ctx.drawImage(viewer.renderer.domElement, Math.floor(offsetX), Math.floor(offsetY), Math.ceil(width), Math.ceil(height));\r\n        }\r\n        if (typeof this._onProgress === 'function') {\r\n            this._onProgress(i + 1, this._n, false);\r\n        }\r\n    }\r\n    _finalize() {\r\n        this._viewer.setSampling(this._viewerSampleLevel);\r\n        this._viewer.camera.view = null; // TODO\r\n        if (typeof this._onFinish === 'function') {\r\n            this._onFinish(this._n + 1, this._n, false);\r\n        }\r\n    }\r\n    render() {\r\n        for (let i = 0; i <= this._n; ++i) {\r\n            if (i === this._n) {\r\n                this._finalize();\r\n            }\r\n            else {\r\n                this._renderTile(i);\r\n            }\r\n        }\r\n    }\r\n    renderAsync() {\r\n        let count = 0;\r\n        const n = this._n;\r\n        const fn = () => {\r\n            if (count === n) {\r\n                this._finalize();\r\n            }\r\n            else {\r\n                this._renderTile(count);\r\n            }\r\n            count += 1;\r\n        };\r\n        for (let i = 0; i <= n; ++i) {\r\n            setTimeout(fn, 0);\r\n        }\r\n    }\r\n}\r\nexport default TiledRenderer;\r\n//# sourceMappingURL=tiled-renderer.js.map","/**\r\n * @file Math Constants\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nexport const EPS = 0.0000001;\r\nexport const TwoPI = 2 * Math.PI;\r\nexport const DEG2RAD = Math.PI / 180;\r\nexport const RAD2DEG = 180 / Math.PI;\r\n//# sourceMappingURL=math-constants.js.map","/**\r\n * @file Array Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { TwoPI } from './math-constants';\r\nexport function circularMean(array, max, stride = 1, offset = 0, indices) {\r\n    // http://en.wikipedia.org/wiki/Center_of_mass#Systems_with_periodic_boundary_conditions\r\n    // Bai, Linge; Breen, David (2008). Calculating Center of Mass in an Unbounded 2D Environment. Journal of Graphics, GPU, and Game Tools 13 (4): 53–60.\r\n    // http://stackoverflow.com/questions/18166507/using-fft-to-find-the-center-of-mass-under-periodic-boundary-conditions\r\n    const n = indices ? indices.length : array.length / stride;\r\n    let cosMean = 0;\r\n    let sinMean = 0;\r\n    if (indices) {\r\n        for (let i = 0; i < n; ++i) {\r\n            const c = (array[indices[i] * stride + offset] + max) % max;\r\n            const angle = (c / max) * TwoPI - Math.PI;\r\n            cosMean += Math.cos(angle);\r\n            sinMean += Math.sin(angle);\r\n        }\r\n    }\r\n    else {\r\n        for (let i = offset; i < n; i += stride) {\r\n            const c = (array[i] + max) % max;\r\n            const angle = (c / max) * TwoPI - Math.PI;\r\n            cosMean += Math.cos(angle);\r\n            sinMean += Math.sin(angle);\r\n        }\r\n    }\r\n    cosMean /= n;\r\n    sinMean /= n;\r\n    const meanAngle = Math.atan2(sinMean, cosMean);\r\n    const mean = (meanAngle + Math.PI) / TwoPI * max;\r\n    return mean;\r\n}\r\nexport function calculateCenterArray(array1, array2, center, offset = 0) {\r\n    const n = array1.length;\r\n    const c = center || new Float32Array(n);\r\n    for (let i = 0; i < n; i += 3) {\r\n        c[offset + i + 0] = (array1[i + 0] + array2[i + 0]) / 2.0;\r\n        c[offset + i + 1] = (array1[i + 1] + array2[i + 1]) / 2.0;\r\n        c[offset + i + 2] = (array1[i + 2] + array2[i + 2]) / 2.0;\r\n    }\r\n    return c;\r\n}\r\nexport function calculateDirectionArray(array1, array2) {\r\n    const n = array1.length;\r\n    const direction = new Float32Array(n);\r\n    for (let i = 0; i < n; i += 3) {\r\n        direction[i + 0] = array2[i + 0] - array1[i + 0];\r\n        direction[i + 1] = array2[i + 1] - array1[i + 1];\r\n        direction[i + 2] = array2[i + 2] - array1[i + 2];\r\n    }\r\n    return direction;\r\n}\r\nexport function uniformArray(n, a, optionalTarget) {\r\n    const array = optionalTarget || new Float32Array(n);\r\n    for (let i = 0; i < n; ++i) {\r\n        array[i] = a;\r\n    }\r\n    return array;\r\n}\r\nexport function uniformArray3(n, a, b, c, optionalTarget) {\r\n    const array = optionalTarget || new Float32Array(n * 3);\r\n    for (let i = 0; i < n; ++i) {\r\n        const j = i * 3;\r\n        array[j + 0] = a;\r\n        array[j + 1] = b;\r\n        array[j + 2] = c;\r\n    }\r\n    return array;\r\n}\r\nexport function centerArray3(array, center = new Vector3()) {\r\n    const n = array.length;\r\n    for (let i = 0; i < n; i += 3) {\r\n        center.x += array[i];\r\n        center.y += array[i + 1];\r\n        center.z += array[i + 2];\r\n    }\r\n    center.divideScalar(n / 3);\r\n    return center;\r\n}\r\nexport function serialArray(n) {\r\n    const array = new Float32Array(n);\r\n    for (let i = 0; i < n; ++i) {\r\n        array[i] = i;\r\n    }\r\n    return array;\r\n}\r\nexport function serialBlockArray(n, b, offset = 0, optionalTarget) {\r\n    const array = optionalTarget || new Float32Array(n * b);\r\n    for (let i = 0; i < n; ++i) {\r\n        const k = offset + i * b;\r\n        for (let j = 0; j < b; ++j) {\r\n            array[k + j] = i;\r\n        }\r\n    }\r\n    return array;\r\n}\r\nexport function randomColorArray(n) {\r\n    const array = new Float32Array(n * 3);\r\n    for (let i = 0; i < n; ++i) {\r\n        const j = i * 3;\r\n        array[j + 0] = Math.random();\r\n        array[j + 1] = Math.random();\r\n        array[j + 2] = Math.random();\r\n    }\r\n    return array;\r\n}\r\nexport function replicateArrayEntries(array, m) {\r\n    const n = array.length;\r\n    const repArr = new Float32Array(n * m);\r\n    for (let i = 0; i < n; ++i) {\r\n        const k = i * m;\r\n        const a = array[i];\r\n        for (let j = 0; j < m; ++j) {\r\n            repArr[k + j] = a;\r\n        }\r\n    }\r\n    return repArr;\r\n}\r\nexport function replicateArray3Entries(array, m) {\r\n    const n = array.length / 3;\r\n    const repArr = new Float32Array(n * m * 3);\r\n    for (let i = 0; i < n; ++i) {\r\n        const v = i * 3;\r\n        const k = i * m * 3;\r\n        const a = array[v + 0];\r\n        const b = array[v + 1];\r\n        const c = array[v + 2];\r\n        for (let j = 0; j < m; ++j) {\r\n            const l = k + j * 3;\r\n            repArr[l + 0] = a;\r\n            repArr[l + 1] = b;\r\n            repArr[l + 2] = c;\r\n        }\r\n    }\r\n    return repArr;\r\n}\r\nexport function calculateMeanArray(array1, array2) {\r\n    const n = array1.length;\r\n    const mean = new Float32Array(n);\r\n    for (let i = 0; i < n; i++) {\r\n        mean[i] = (array1[i] + array2[i]) / 2.0;\r\n    }\r\n    return mean;\r\n}\r\nexport function calculateMinArray(array1, array2) {\r\n    const n = array1.length;\r\n    const min = new Float32Array(n);\r\n    for (let i = 0; i < n; i++) {\r\n        min[i] = Math.min(array1[i], array2[i]);\r\n    }\r\n    return min;\r\n}\r\nexport function copyArray(src, dst, srcOffset, dstOffset, length) {\r\n    for (let i = 0; i < length; ++i) {\r\n        dst[dstOffset + i] = src[srcOffset + i];\r\n    }\r\n}\r\nexport function copyWithin(array, srcOffset, dstOffset, length) {\r\n    copyArray(array, array, srcOffset, dstOffset, length);\r\n}\r\nconst swap = new Float32Array(4);\r\nconst temp = new Float32Array(4);\r\n/**\r\n * quicksortIP\r\n * @function\r\n * @author Roman Bolzern <roman.bolzern@fhnw.ch>, 2013\r\n * @author I4DS http://www.fhnw.ch/i4ds, 2013\r\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\r\n * @description\r\n * In-place quicksort for typed arrays (e.g. for Float32Array)\r\n * provides fast sorting\r\n * useful e.g. for a custom shader and/or BufferGeometry\r\n * Complexity: http://bigocheatsheet.com/ see Quicksort\r\n *\r\n * @example\r\n * points: [x, y, z, x, y, z, x, y, z, ...]\r\n * eleSize: 3 //because of (x, y, z)\r\n * orderElement: 0 //order according to x\r\n *\r\n * @param {TypedArray} arr - array to be sorted\r\n * @param {Integer} eleSize - element size\r\n * @param {Integer} orderElement - index of element used for sorting, < eleSize\r\n * @param {Integer} [begin] - start index for range to be sorted\r\n * @param {Integer} [end] - end index for range to be sorted\r\n * @return {TypedArray} the input array\r\n */\r\nexport function quicksortIP(arr, eleSize, orderElement, begin = 0, end) {\r\n    end = (end || (arr.length / eleSize)) - 1;\r\n    const stack = [];\r\n    let sp = -1;\r\n    let left = begin;\r\n    let right = end;\r\n    let tmp = 0.0;\r\n    let x = 0;\r\n    let y = 0;\r\n    const swapF = function (a, b) {\r\n        a *= eleSize;\r\n        b *= eleSize;\r\n        for (y = 0; y < eleSize; y++) {\r\n            tmp = arr[a + y];\r\n            arr[a + y] = arr[b + y];\r\n            arr[b + y] = tmp;\r\n        }\r\n    };\r\n    let i, j;\r\n    while (true) {\r\n        if (right - left <= 25) {\r\n            for (j = left + 1; j <= right; j++) {\r\n                for (x = 0; x < eleSize; x++) {\r\n                    swap[x] = arr[j * eleSize + x];\r\n                }\r\n                i = j - 1;\r\n                while (i >= left && arr[i * eleSize + orderElement] > swap[orderElement]) {\r\n                    for (x = 0; x < eleSize; x++) {\r\n                        arr[(i + 1) * eleSize + x] = arr[i * eleSize + x];\r\n                    }\r\n                    i--;\r\n                }\r\n                for (x = 0; x < eleSize; x++) {\r\n                    arr[(i + 1) * eleSize + x] = swap[x];\r\n                }\r\n            }\r\n            if (sp === -1)\r\n                break;\r\n            right = stack[sp--]; // ?\r\n            left = stack[sp--];\r\n        }\r\n        else {\r\n            const median = (left + right) >> 1;\r\n            i = left + 1;\r\n            j = right;\r\n            swapF(median, i);\r\n            if (arr[left * eleSize + orderElement] > arr[right * eleSize + orderElement]) {\r\n                swapF(left, right);\r\n            }\r\n            if (arr[i * eleSize + orderElement] > arr[right * eleSize + orderElement]) {\r\n                swapF(i, right);\r\n            }\r\n            if (arr[left * eleSize + orderElement] > arr[i * eleSize + orderElement]) {\r\n                swapF(left, i);\r\n            }\r\n            for (x = 0; x < eleSize; x++) {\r\n                temp[x] = arr[i * eleSize + x];\r\n            }\r\n            while (true) {\r\n                do\r\n                    i++;\r\n                while (arr[i * eleSize + orderElement] < temp[orderElement]);\r\n                do\r\n                    j--;\r\n                while (arr[j * eleSize + orderElement] > temp[orderElement]);\r\n                if (j < i)\r\n                    break;\r\n                swapF(i, j);\r\n            }\r\n            for (x = 0; x < eleSize; x++) {\r\n                arr[(left + 1) * eleSize + x] = arr[j * eleSize + x];\r\n                arr[j * eleSize + x] = temp[x];\r\n            }\r\n            if (right - i + 1 >= j - left) {\r\n                stack[++sp] = i;\r\n                stack[++sp] = right;\r\n                right = j - 1;\r\n            }\r\n            else {\r\n                stack[++sp] = left;\r\n                stack[++sp] = j - 1;\r\n                left = i;\r\n            }\r\n        }\r\n    }\r\n    return arr;\r\n}\r\nexport function quicksortCmp(arr, cmp, begin = 0, end) {\r\n    cmp = cmp || function cmp(a, b) {\r\n        if (a > b)\r\n            return 1;\r\n        if (a < b)\r\n            return -1;\r\n        return 0;\r\n    };\r\n    end = (end || arr.length) - 1;\r\n    const stack = [];\r\n    let sp = -1;\r\n    let left = begin;\r\n    let right = end;\r\n    let tmp;\r\n    function swap(a, b) {\r\n        const tmp2 = arr[a];\r\n        arr[a] = arr[b];\r\n        arr[b] = tmp2;\r\n    }\r\n    let i, j;\r\n    while (true) {\r\n        if (right - left <= 25) {\r\n            for (let k = left + 1; k <= right; ++k) {\r\n                tmp = arr[k];\r\n                i = k - 1;\r\n                while (i >= left && cmp(arr[i], tmp) > 0) {\r\n                    arr[i + 1] = arr[i];\r\n                    --i;\r\n                }\r\n                arr[i + 1] = tmp;\r\n            }\r\n            if (sp === -1)\r\n                break;\r\n            right = stack[sp--]; // ?\r\n            left = stack[sp--];\r\n        }\r\n        else {\r\n            const median = (left + right) >> 1;\r\n            i = left + 1;\r\n            j = right;\r\n            swap(median, i);\r\n            if (cmp(arr[left], arr[right]) > 0) {\r\n                swap(left, right);\r\n            }\r\n            if (cmp(arr[i], arr[right]) > 0) {\r\n                swap(i, right);\r\n            }\r\n            if (cmp(arr[left], arr[i]) > 0) {\r\n                swap(left, i);\r\n            }\r\n            tmp = arr[i];\r\n            while (true) {\r\n                do\r\n                    i++;\r\n                while (cmp(arr[i], tmp) < 0);\r\n                do\r\n                    j--;\r\n                while (cmp(arr[j], tmp) > 0);\r\n                if (j < i)\r\n                    break;\r\n                swap(i, j);\r\n            }\r\n            arr[left + 1] = arr[j];\r\n            arr[j] = tmp;\r\n            if (right - i + 1 >= j - left) {\r\n                stack[++sp] = i;\r\n                stack[++sp] = right;\r\n                right = j - 1;\r\n            }\r\n            else {\r\n                stack[++sp] = left;\r\n                stack[++sp] = j - 1;\r\n                left = i;\r\n            }\r\n        }\r\n    }\r\n    return arr;\r\n}\r\nexport function quickselectCmp(arr, n, cmp, left = 0, right) {\r\n    cmp = cmp || function cmp(a, b) {\r\n        if (a > b)\r\n            return 1;\r\n        if (a < b)\r\n            return -1;\r\n        return 0;\r\n    };\r\n    right = (right || arr.length) - 1;\r\n    let pivotIndex, pivotValue, storeIndex;\r\n    function swap(a, b) {\r\n        const tmp = arr[a];\r\n        arr[a] = arr[b];\r\n        arr[b] = tmp;\r\n    }\r\n    while (true) {\r\n        if (left === right) {\r\n            return arr[left];\r\n        }\r\n        pivotIndex = (left + right) >> 1;\r\n        pivotValue = arr[pivotIndex];\r\n        swap(pivotIndex, right);\r\n        storeIndex = left;\r\n        for (let i = left; i < right; ++i) {\r\n            if (cmp(arr[i], pivotValue) < 0) {\r\n                swap(storeIndex, i);\r\n                ++storeIndex;\r\n            }\r\n        }\r\n        swap(right, storeIndex);\r\n        pivotIndex = storeIndex;\r\n        if (n === pivotIndex) {\r\n            return arr[n];\r\n        }\r\n        else if (n < pivotIndex) {\r\n            right = pivotIndex - 1;\r\n        }\r\n        else {\r\n            left = pivotIndex + 1;\r\n        }\r\n    }\r\n}\r\nexport function arrayMax(array) {\r\n    let max = -Infinity;\r\n    for (let i = 0, il = array.length; i < il; ++i) {\r\n        if (array[i] > max)\r\n            max = array[i];\r\n    }\r\n    return max;\r\n}\r\nexport function arrayMin(array) {\r\n    let min = Infinity;\r\n    for (let i = 0, il = array.length; i < il; ++i) {\r\n        if (array[i] < min)\r\n            min = array[i];\r\n    }\r\n    return min;\r\n}\r\nexport function arraySum(array, stride = 1, offset = 0) {\r\n    const n = array.length;\r\n    let sum = 0;\r\n    for (let i = offset; i < n; i += stride) {\r\n        sum += array[i];\r\n    }\r\n    return sum;\r\n}\r\nexport function arrayMean(array, stride = 1, offset = 0) {\r\n    return arraySum(array, stride, offset) / (array.length / stride);\r\n}\r\nexport function arrayRms(array) {\r\n    const n = array.length;\r\n    let sumSq = 0;\r\n    for (let i = 0; i < n; ++i) {\r\n        const di = array[i];\r\n        sumSq += di * di;\r\n    }\r\n    return Math.sqrt(sumSq / n);\r\n}\r\nexport function arraySorted(array) {\r\n    for (let i = 1, il = array.length; i < il; ++i) {\r\n        if (array[i - 1] > array[i])\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\nexport function arraySortedCmp(array, cmp) {\r\n    for (let i = 1, il = array.length; i < il; ++i) {\r\n        if (cmp(array[i - 1], array[i]) > 0)\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n//# sourceMappingURL=array-utils.js.map","/**\r\n * @file Viewer Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector2, Vector3, Matrix4, Points } from 'three';\r\nimport { createParams } from '../utils';\r\nimport TiledRenderer from './tiled-renderer';\r\nimport { quicksortCmp } from '../math/array-utils';\r\nfunction _trimCanvas(canvas, r, g, b, a) {\r\n    const canvasHeight = canvas.height;\r\n    const canvasWidth = canvas.width;\r\n    const ctx = canvas.getContext('2d');\r\n    const pixels = ctx.getImageData(0, 0, canvasWidth, canvasHeight).data;\r\n    let x, y, doBreak, off;\r\n    doBreak = false;\r\n    for (y = 0; y < canvasHeight; y++) {\r\n        for (x = 0; x < canvasWidth; x++) {\r\n            off = (y * canvasWidth + x) * 4;\r\n            if (pixels[off] !== r || pixels[off + 1] !== g ||\r\n                pixels[off + 2] !== b || pixels[off + 3] !== a) {\r\n                doBreak = true;\r\n                break;\r\n            }\r\n        }\r\n        if (doBreak) {\r\n            break;\r\n        }\r\n    }\r\n    const topY = y;\r\n    doBreak = false;\r\n    for (x = 0; x < canvasWidth; x++) {\r\n        for (y = 0; y < canvasHeight; y++) {\r\n            off = (y * canvasWidth + x) * 4;\r\n            if (pixels[off] !== r || pixels[off + 1] !== g ||\r\n                pixels[off + 2] !== b || pixels[off + 3] !== a) {\r\n                doBreak = true;\r\n                break;\r\n            }\r\n        }\r\n        if (doBreak) {\r\n            break;\r\n        }\r\n    }\r\n    const topX = x;\r\n    doBreak = false;\r\n    for (y = canvasHeight - 1; y >= 0; y--) {\r\n        for (x = canvasWidth - 1; x >= 0; x--) {\r\n            off = (y * canvasWidth + x) * 4;\r\n            if (pixels[off] !== r || pixels[off + 1] !== g ||\r\n                pixels[off + 2] !== b || pixels[off + 3] !== a) {\r\n                doBreak = true;\r\n                break;\r\n            }\r\n        }\r\n        if (doBreak) {\r\n            break;\r\n        }\r\n    }\r\n    const bottomY = y;\r\n    doBreak = false;\r\n    for (x = canvasWidth - 1; x >= 0; x--) {\r\n        for (y = canvasHeight - 1; y >= 0; y--) {\r\n            off = (y * canvasWidth + x) * 4;\r\n            if (pixels[off] !== r || pixels[off + 1] !== g ||\r\n                pixels[off + 2] !== b || pixels[off + 3] !== a) {\r\n                doBreak = true;\r\n                break;\r\n            }\r\n        }\r\n        if (doBreak) {\r\n            break;\r\n        }\r\n    }\r\n    const bottomX = x;\r\n    const trimedCanvas = document.createElement('canvas');\r\n    trimedCanvas.width = bottomX - topX;\r\n    trimedCanvas.height = bottomY - topY;\r\n    const trimedCtx = trimedCanvas.getContext('2d');\r\n    trimedCtx.drawImage(canvas, topX, topY, trimedCanvas.width, trimedCanvas.height, 0, 0, trimedCanvas.width, trimedCanvas.height);\r\n    return trimedCanvas;\r\n}\r\n/**\r\n * Image parameter object.\r\n * @typedef {Object} ImageParameters - image generation parameters\r\n * @property {Boolean} trim - trim the image\r\n * @property {Integer} factor - scaling factor to apply to the viewer canvas\r\n * @property {Boolean} antialias - antialias the image\r\n * @property {Boolean} transparent - transparent image background\r\n */\r\nexport const ImageDefaultParameters = {\r\n    trim: false,\r\n    factor: 1,\r\n    antialias: false,\r\n    transparent: false,\r\n    onProgress: undefined\r\n};\r\n/**\r\n * Make image from what is shown in a viewer canvas\r\n * @param  {Viewer} viewer - the viewer\r\n * @param  {ImageParameters} params - parameters object\r\n * @return {Promise} A Promise object that resolves to an image {@link Blob}.\r\n */\r\nexport function makeImage(viewer, params = {}) {\r\n    const { trim, factor, antialias, transparent } = createParams(params, ImageDefaultParameters);\r\n    const renderer = viewer.renderer;\r\n    const camera = viewer.camera;\r\n    const originalClearAlpha = renderer.getClearAlpha();\r\n    const backgroundColor = renderer.getClearColor();\r\n    function setLineWidthAndPixelSize(invert = false) {\r\n        let _factor = factor;\r\n        if (antialias)\r\n            _factor *= 2;\r\n        if (invert)\r\n            _factor = 1 / _factor;\r\n        viewer.scene.traverse(function (o) {\r\n            const m = o.material;\r\n            if (m && m.linewidth) {\r\n                m.linewidth *= _factor;\r\n            }\r\n            if (m && m.uniforms && m.uniforms.size) {\r\n                if (m.uniforms.size.__seen === undefined) {\r\n                    m.uniforms.size.value *= _factor;\r\n                    m.uniforms.size.__seen = true;\r\n                }\r\n            }\r\n            if (m && m.uniforms && m.uniforms.linewidth) {\r\n                if (m.uniforms.linewidth.__seen === undefined) {\r\n                    m.uniforms.linewidth.value *= _factor;\r\n                    m.uniforms.linewidth.__seen = true;\r\n                }\r\n            }\r\n        });\r\n        viewer.scene.traverse(function (o) {\r\n            const m = o.material;\r\n            if (m && m.uniforms && m.uniforms.size) {\r\n                delete m.uniforms.size.__seen;\r\n            }\r\n            if (m && m.uniforms && m.uniforms.linewidth) {\r\n                delete m.uniforms.linewidth.__seen;\r\n            }\r\n        });\r\n    }\r\n    function trimCanvas(canvas) {\r\n        if (trim) {\r\n            const bg = backgroundColor;\r\n            const r = transparent ? 0 : bg.r * 255;\r\n            const g = transparent ? 0 : bg.g * 255;\r\n            const b = transparent ? 0 : bg.b * 255;\r\n            const a = transparent ? 0 : 255;\r\n            return _trimCanvas(canvas, r, g, b, a);\r\n        }\r\n        else {\r\n            return canvas;\r\n        }\r\n    }\r\n    function onProgress(i, n, finished) {\r\n        if (typeof params.onProgress === 'function') {\r\n            params.onProgress(i, n, finished);\r\n        }\r\n    }\r\n    return new Promise(function (resolve, reject) {\r\n        const tiledRenderer = new TiledRenderer(renderer, camera, viewer, { factor, antialias, onProgress, onFinish });\r\n        renderer.setClearAlpha(transparent ? 0 : 1);\r\n        setLineWidthAndPixelSize();\r\n        tiledRenderer.renderAsync();\r\n        function onFinish(i, n) {\r\n            const canvas = trimCanvas(tiledRenderer.canvas);\r\n            canvas.toBlob(function (blob) {\r\n                renderer.setClearAlpha(originalClearAlpha);\r\n                setLineWidthAndPixelSize(true);\r\n                viewer.requestRender();\r\n                onProgress(n, n, true);\r\n                if (blob) {\r\n                    resolve(blob);\r\n                }\r\n                else {\r\n                    reject('error creating image');\r\n                }\r\n            }, 'image/png');\r\n        }\r\n    });\r\n}\r\nconst vertex = new Vector3();\r\nconst matrix = new Matrix4();\r\nconst modelViewProjectionMatrix = new Matrix4();\r\nexport function sortProjectedPosition(scene, camera) {\r\n    // console.time( \"sort\" );\r\n    scene.traverseVisible(function (o) {\r\n        if (!(o instanceof Points) || !o.userData.buffer.parameters.sortParticles) {\r\n            return;\r\n        }\r\n        const attributes = o.geometry.attributes; // TODO\r\n        const n = attributes.position.count;\r\n        if (n === 0)\r\n            return;\r\n        matrix.multiplyMatrices(camera.matrixWorldInverse, o.matrixWorld);\r\n        modelViewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, matrix);\r\n        let sortData, sortArray, zArray, cmpFn;\r\n        if (!o.userData.sortData) {\r\n            zArray = new Float32Array(n);\r\n            sortArray = new Uint32Array(n);\r\n            cmpFn = function (ai, bi) {\r\n                const a = zArray[ai];\r\n                const b = zArray[bi];\r\n                if (a > b)\r\n                    return 1;\r\n                if (a < b)\r\n                    return -1;\r\n                return 0;\r\n            };\r\n            sortData = {\r\n                __zArray: zArray,\r\n                __sortArray: sortArray,\r\n                __cmpFn: cmpFn\r\n            };\r\n            o.userData.sortData = sortData;\r\n        }\r\n        else {\r\n            sortData = o.userData.sortData;\r\n            zArray = sortData.__zArray;\r\n            sortArray = sortData.__sortArray;\r\n            cmpFn = sortData.__cmpFn;\r\n        }\r\n        for (let i = 0; i < n; ++i) {\r\n            vertex.fromArray(attributes.position.array, i * 3);\r\n            vertex.applyMatrix4(modelViewProjectionMatrix);\r\n            // negate, so that sorting order is reversed\r\n            zArray[i] = -vertex.z;\r\n            sortArray[i] = i;\r\n        }\r\n        quicksortCmp(sortArray, cmpFn);\r\n        let index, indexSrc, indexDst, tmpTab;\r\n        for (let name in attributes) {\r\n            const attr = attributes[name];\r\n            const array = attr.array;\r\n            const itemSize = attr.itemSize;\r\n            if (!sortData[name]) {\r\n                sortData[name] = new Float32Array(itemSize * n);\r\n            }\r\n            tmpTab = sortData[name];\r\n            sortData[name] = array;\r\n            for (let i = 0; i < n; ++i) {\r\n                index = sortArray[i];\r\n                for (let j = 0; j < itemSize; ++j) {\r\n                    indexSrc = index * itemSize + j;\r\n                    indexDst = i * itemSize + j;\r\n                    tmpTab[indexDst] = array[indexSrc];\r\n                }\r\n            }\r\n            attributes[name].array = tmpTab;\r\n            attributes[name].needsUpdate = true;\r\n        }\r\n    });\r\n    // console.timeEnd( \"sort\" );\r\n}\r\nconst resolution = new Vector2();\r\nconst projectionMatrixInverse = new Matrix4();\r\nconst projectionMatrixTranspose = new Matrix4();\r\nexport function updateMaterialUniforms(group, camera, renderer, cDist, bRadius) {\r\n    let size = new Vector2();\r\n    renderer.getSize(size);\r\n    const canvasHeight = size.height;\r\n    const pixelRatio = renderer.getPixelRatio();\r\n    const ortho = camera.type === 'OrthographicCamera';\r\n    resolution.set(size.width, size.height);\r\n    projectionMatrixInverse.getInverse(camera.projectionMatrix);\r\n    projectionMatrixTranspose.copy(camera.projectionMatrix).transpose();\r\n    group.traverse(function (o) {\r\n        const m = o.material;\r\n        if (!m)\r\n            return;\r\n        const u = m.uniforms;\r\n        if (!u)\r\n            return;\r\n        if (m.clipNear) {\r\n            const nearFactor = (50 - m.clipNear) / 50;\r\n            const nearClip = cDist - (bRadius * nearFactor);\r\n            u.clipNear.value = nearClip;\r\n        }\r\n        if (u.canvasHeight) {\r\n            u.canvasHeight.value = canvasHeight;\r\n        }\r\n        if (u.resolution) {\r\n            u.resolution.value.copy(resolution);\r\n        }\r\n        if (u.pixelRatio) {\r\n            u.pixelRatio.value = pixelRatio;\r\n        }\r\n        if (u.projectionMatrixInverse) {\r\n            u.projectionMatrixInverse.value.copy(projectionMatrixInverse);\r\n        }\r\n        if (u.projectionMatrixTranspose) {\r\n            u.projectionMatrixTranspose.value.copy(projectionMatrixTranspose);\r\n        }\r\n        if (u.ortho) {\r\n            u.ortho.value = ortho;\r\n        }\r\n    });\r\n}\r\nexport function updateCameraUniforms(group, camera) {\r\n    projectionMatrixInverse.getInverse(camera.projectionMatrix);\r\n    projectionMatrixTranspose.copy(camera.projectionMatrix).transpose();\r\n    group.traverse(function (o) {\r\n        const m = o.material;\r\n        if (!m)\r\n            return;\r\n        const u = m.uniforms;\r\n        if (!u)\r\n            return;\r\n        if (u.projectionMatrixInverse) {\r\n            u.projectionMatrixInverse.value.copy(projectionMatrixInverse);\r\n        }\r\n        if (u.projectionMatrixTranspose) {\r\n            u.projectionMatrixTranspose.value.copy(projectionMatrixTranspose);\r\n        }\r\n    });\r\n}\r\n//# sourceMappingURL=viewer-utils.js.map","/**\r\n * @file Viewer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// adapted from https://webglfundamentals.org/webgl/resources/webgl-utils.js\r\n// Copyright 2012, Gregg Tavares. Modified BSD License\r\nexport function createProgram(gl, shaders, attribs, locations) {\r\n    const program = gl.createProgram();\r\n    if (!program) {\r\n        console.log(`error creating WebGL program`);\r\n        return;\r\n    }\r\n    shaders.forEach(shader => gl.attachShader(program, shader));\r\n    if (attribs) {\r\n        attribs.forEach((attrib, i) => {\r\n            gl.bindAttribLocation(program, locations ? locations[i] : i, attrib);\r\n        });\r\n    }\r\n    gl.linkProgram(program);\r\n    // Check the link status\r\n    const linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n    if (!linked) {\r\n        console.log(`error linking program: ${gl.getProgramInfoLog(program)}`);\r\n        gl.deleteProgram(program);\r\n        return null;\r\n    }\r\n    return program;\r\n}\r\nexport function loadShader(gl, shaderSource, shaderType) {\r\n    const shader = gl.createShader(shaderType);\r\n    if (!shader) {\r\n        console.log(`error creating WebGL shader ${shaderType}`);\r\n        return; // can't create shader\r\n    }\r\n    gl.shaderSource(shader, shaderSource);\r\n    gl.compileShader(shader);\r\n    // Check the compile status\r\n    const compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n    if (!compiled) {\r\n        console.log(`error compiling shader ${shader}: ${gl.getShaderInfoLog(shader)}`);\r\n        gl.deleteShader(shader);\r\n        return null;\r\n    }\r\n    return shader;\r\n}\r\n//\r\nexport function getErrorDescription(gl, error) {\r\n    switch (error) {\r\n        case gl.NO_ERROR: return 'no error';\r\n        case gl.INVALID_ENUM: return 'invalid enum';\r\n        case gl.INVALID_VALUE: return 'invalid value';\r\n        case gl.INVALID_OPERATION: return 'invalid operation';\r\n        case gl.INVALID_FRAMEBUFFER_OPERATION: return 'invalid framebuffer operation';\r\n        case gl.OUT_OF_MEMORY: return 'out of memory';\r\n        case gl.CONTEXT_LOST_WEBGL: return 'context lost';\r\n    }\r\n    return 'unknown error';\r\n}\r\nexport function getExtension(gl, name) {\r\n    const ext = gl.getExtension(name);\r\n    if (!ext)\r\n        console.log(`extension '${name}' not available`);\r\n    return ext;\r\n}\r\nconst TextureTestVertShader = `\r\nattribute vec4 a_position;\r\n\r\nvoid main() {\r\n  gl_Position = a_position;\r\n}`;\r\nconst TextureTestFragShader = `\r\nprecision mediump float;\r\nuniform vec4 u_color;\r\nuniform sampler2D u_texture;\r\n\r\nvoid main() {\r\n  gl_FragColor = texture2D(u_texture, vec2(0.5, 0.5)) * u_color;\r\n}`;\r\nconst TextureTestTexCoords = new Float32Array([\r\n    -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0\r\n]);\r\nexport function testTextureSupport(type) {\r\n    // adapted from\r\n    // https://stackoverflow.com/questions/28827511/webgl-ios-render-to-floating-point-texture\r\n    // Get A WebGL context\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = 16;\r\n    canvas.height = 16;\r\n    canvas.style.width = 16 + 'px';\r\n    canvas.style.height = 16 + 'px';\r\n    const gl = canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\");\r\n    if (!gl) {\r\n        console.log(`error creating webgl context for ${type}`);\r\n        return false;\r\n    }\r\n    if (!(gl instanceof WebGLRenderingContext)) {\r\n        console.log(`Got unexpected type for WebGL rendering context`);\r\n        return false;\r\n    }\r\n    getExtension(gl, 'OES_texture_float');\r\n    getExtension(gl, 'OES_texture_half_float');\r\n    getExtension(gl, 'WEBGL_color_buffer_float');\r\n    // setup shaders\r\n    const vertShader = loadShader(gl, TextureTestVertShader, gl.VERTEX_SHADER);\r\n    const fragShader = loadShader(gl, TextureTestFragShader, gl.FRAGMENT_SHADER);\r\n    if (!vertShader || !fragShader)\r\n        return false;\r\n    // setup program\r\n    const program = createProgram(gl, [vertShader, fragShader]);\r\n    if (!program) {\r\n        console.log(`error creating WebGL program`);\r\n        return false;\r\n    }\r\n    gl.useProgram(program);\r\n    // look up where the vertex data needs to go.\r\n    const positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n    const colorLoc = gl.getUniformLocation(program, \"u_color\");\r\n    if (!colorLoc) {\r\n        console.log(`error getting 'u_color' uniform location`);\r\n        return false;\r\n    }\r\n    // provide texture coordinates for the rectangle.\r\n    const positionBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, TextureTestTexCoords, gl.STATIC_DRAW);\r\n    gl.enableVertexAttribArray(positionLocation);\r\n    gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\r\n    const whiteTex = gl.createTexture();\r\n    const whiteData = new Uint8Array([255, 255, 255, 255]);\r\n    gl.bindTexture(gl.TEXTURE_2D, whiteTex);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, whiteData);\r\n    const tex = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, tex);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, type, null);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    const fb = gl.createFramebuffer();\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tex, 0);\r\n    const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\r\n    if (status !== gl.FRAMEBUFFER_COMPLETE) {\r\n        console.log(`error creating framebuffer for ${type}`);\r\n        return false;\r\n    }\r\n    // Draw the rectangle.\r\n    gl.bindTexture(gl.TEXTURE_2D, whiteTex);\r\n    gl.uniform4fv(colorLoc, [0, 10, 20, 1]);\r\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    gl.bindTexture(gl.TEXTURE_2D, tex);\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n    gl.clearColor(1, 0, 0, 1);\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n    gl.uniform4fv(colorLoc, [0, 1 / 10, 1 / 20, 1]);\r\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    // Check if rendered correctly\r\n    const pixel = new Uint8Array(4);\r\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\r\n    if (pixel[0] !== 0 || pixel[1] < 248 || pixel[2] < 248 || pixel[3] < 254) {\r\n        console.log(`not able to actually render to ${type} texture`);\r\n        return false;\r\n    }\r\n    // Check reading from float texture\r\n    if (type === gl.FLOAT) {\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\r\n        const floatPixel = new Float32Array(4);\r\n        gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.FLOAT, floatPixel);\r\n        const error = gl.getError();\r\n        if (error) {\r\n            console.log(`error reading pixels as float: '${getErrorDescription(gl, error)}'`);\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n//# sourceMappingURL=gl-utils.js.map","/**\r\n * @file Viewer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport { PerspectiveCamera, OrthographicCamera, StereoCamera, Vector2, Box3, Vector3, Matrix4, Color, WebGLRenderer, WebGLRenderTarget, NearestFilter, LinearFilter, AdditiveBlending, RGBAFormat, FloatType, /*HalfFloatType, */ UnsignedByteType, ShaderMaterial, PlaneGeometry, Scene, Mesh, Group, Uniform, Fog, SpotLight, AmbientLight, BufferGeometry, BufferAttribute, LineSegments } from 'three';\r\nimport '../shader/BasicLine.vert';\r\nimport '../shader/BasicLine.frag';\r\nimport '../shader/Quad.vert';\r\nimport '../shader/Quad.frag';\r\nimport { Debug, Log, WebglErrorMessage, Browser, setExtensionFragDepth, SupportsReadPixelsFloat, setSupportsReadPixelsFloat } from '../globals';\r\nimport { degToRad } from '../math/math-utils';\r\nimport Stats from './stats';\r\nimport { getShader } from '../shader/shader-utils';\r\nimport { JitterVectors } from './viewer-constants';\r\nimport { makeImage, sortProjectedPosition, updateMaterialUniforms, updateCameraUniforms } from './viewer-utils';\r\nimport { testTextureSupport } from './gl-utils';\r\nconst pixelBufferFloat = new Float32Array(4 * 25);\r\nconst pixelBufferUint = new Uint8Array(4 * 25);\r\n// When picking, we read a 25 pixel (5x5) array (readRenderTargetPixels)\r\n// We read the pixels in the order below to find what was picked.\r\n// This starts at the center and tries successively further points.\r\n// (Many points will be at equal distance to the center, their order\r\n// is arbitrary).\r\nconst pixelOrder = [12, 7, 13, 17, 11, 6, 8, 18, 16, 2, 14, 22, 10, 1, 3, 9, 19, 23, 21, 15, 5, 0, 4, 24, 20];\r\nconst tmpMatrix = new Matrix4();\r\nfunction onBeforeRender(renderer, scene, camera, geometry, material /*, group */) {\r\n    const u = material.uniforms;\r\n    const updateList = [];\r\n    if (u.objectId) {\r\n        u.objectId.value = SupportsReadPixelsFloat ? this.id : this.id / 255;\r\n        updateList.push('objectId');\r\n    }\r\n    if (u.modelViewMatrixInverse || u.modelViewMatrixInverseTranspose ||\r\n        u.modelViewProjectionMatrix || u.modelViewProjectionMatrixInverse) {\r\n        this.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, this.matrixWorld);\r\n    }\r\n    if (u.modelViewMatrixInverse) {\r\n        u.modelViewMatrixInverse.value.getInverse(this.modelViewMatrix);\r\n        updateList.push('modelViewMatrixInverse');\r\n    }\r\n    if (u.modelViewMatrixInverseTranspose) {\r\n        if (u.modelViewMatrixInverse) {\r\n            u.modelViewMatrixInverseTranspose.value.copy(u.modelViewMatrixInverse.value).transpose();\r\n        }\r\n        else {\r\n            u.modelViewMatrixInverseTranspose.value\r\n                .getInverse(this.modelViewMatrix)\r\n                .transpose();\r\n        }\r\n        updateList.push('modelViewMatrixInverseTranspose');\r\n    }\r\n    if (u.modelViewProjectionMatrix) {\r\n        u.modelViewProjectionMatrix.value.multiplyMatrices(camera.projectionMatrix, this.modelViewMatrix);\r\n        updateList.push('modelViewProjectionMatrix');\r\n    }\r\n    if (u.modelViewProjectionMatrixInverse) {\r\n        if (u.modelViewProjectionMatrix) {\r\n            tmpMatrix.copy(u.modelViewProjectionMatrix.value);\r\n            u.modelViewProjectionMatrixInverse.value.getInverse(tmpMatrix);\r\n        }\r\n        else {\r\n            tmpMatrix.multiplyMatrices(camera.projectionMatrix, this.modelViewMatrix);\r\n            u.modelViewProjectionMatrixInverse.value.getInverse(tmpMatrix);\r\n        }\r\n        updateList.push('modelViewProjectionMatrixInverse');\r\n    }\r\n    if (updateList.length) {\r\n        const materialProperties = renderer.properties.get(material);\r\n        if (materialProperties.program) {\r\n            const gl = renderer.getContext();\r\n            const p = materialProperties.program;\r\n            gl.useProgram(p.program);\r\n            const pu = p.getUniforms();\r\n            updateList.forEach(function (name) {\r\n                pu.setValue(gl, name, u[name].value);\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * Viewer class\r\n * @class\r\n * @param {String|Element} [idOrElement] - dom id or element\r\n */\r\nexport default class Viewer {\r\n    constructor(idOrElement) {\r\n        this.boundingBox = new Box3();\r\n        this.boundingBoxSize = new Vector3();\r\n        this.boundingBoxLength = 0;\r\n        this.info = {\r\n            memory: {\r\n                programs: 0,\r\n                geometries: 0,\r\n                textures: 0\r\n            },\r\n            render: {\r\n                calls: 0,\r\n                vertices: 0,\r\n                faces: 0,\r\n                points: 0\r\n            }\r\n        };\r\n        this.distVector = new Vector3();\r\n        this.signals = {\r\n            ticked: new Signal(),\r\n            rendered: new Signal()\r\n        };\r\n        if (typeof idOrElement === 'string') {\r\n            const elm = document.getElementById(idOrElement);\r\n            if (elm === null) {\r\n                this.container = document.createElement('div');\r\n            }\r\n            else {\r\n                this.container = elm;\r\n            }\r\n        }\r\n        else if (idOrElement instanceof HTMLElement) {\r\n            this.container = idOrElement;\r\n        }\r\n        else {\r\n            this.container = document.createElement('div');\r\n        }\r\n        if (this.container === document.body) {\r\n            this.width = window.innerWidth || 1;\r\n            this.height = window.innerHeight || 1;\r\n        }\r\n        else {\r\n            const box = this.container.getBoundingClientRect();\r\n            this.width = box.width || 1;\r\n            this.height = box.height || 1;\r\n            this.container.style.overflow = 'hidden';\r\n        }\r\n        this.wrapper = document.createElement('div');\r\n        this.wrapper.style.position = 'relative';\r\n        this.container.appendChild(this.wrapper);\r\n        this._initParams();\r\n        this._initStats();\r\n        this._initCamera();\r\n        this._initScene();\r\n        if (this._initRenderer() === false) {\r\n            Log.error('Viewer: could not initialize renderer');\r\n            return;\r\n        }\r\n        this._initHelper();\r\n        // fog & background\r\n        this.setBackground();\r\n        this.setFog();\r\n        this.animate = this.animate.bind(this);\r\n    }\r\n    _initParams() {\r\n        this.parameters = {\r\n            fogColor: new Color(0x000000),\r\n            fogNear: 50,\r\n            fogFar: 100,\r\n            backgroundColor: new Color(0x000000),\r\n            cameraType: 'perspective',\r\n            cameraFov: 40,\r\n            cameraEyeSep: 0.3,\r\n            cameraZ: -80,\r\n            clipNear: 0,\r\n            clipFar: 100,\r\n            clipDist: 10,\r\n            clipMode: 'scene',\r\n            clipScale: 'relative',\r\n            lightColor: new Color(0xdddddd),\r\n            lightIntensity: 1.0,\r\n            ambientColor: new Color(0xdddddd),\r\n            ambientIntensity: 0.2,\r\n            sampleLevel: 0\r\n        };\r\n    }\r\n    _initCamera() {\r\n        const lookAt = new Vector3(0, 0, 0);\r\n        const { width, height } = this;\r\n        this.perspectiveCamera = new PerspectiveCamera(this.parameters.cameraFov, width / height);\r\n        this.perspectiveCamera.position.z = this.parameters.cameraZ;\r\n        this.perspectiveCamera.lookAt(lookAt);\r\n        this.orthographicCamera = new OrthographicCamera(width / -2, width / 2, height / 2, height / -2);\r\n        this.orthographicCamera.position.z = this.parameters.cameraZ;\r\n        this.orthographicCamera.lookAt(lookAt);\r\n        this.stereoCamera = new StereoCamera();\r\n        this.stereoCamera.aspect = 0.5;\r\n        this.stereoCamera.eyeSep = this.parameters.cameraEyeSep;\r\n        const cameraType = this.parameters.cameraType;\r\n        if (cameraType === 'orthographic') {\r\n            this.camera = this.orthographicCamera;\r\n        }\r\n        else if (cameraType === 'perspective' || cameraType === 'stereo') {\r\n            this.camera = this.perspectiveCamera;\r\n        }\r\n        else {\r\n            throw new Error(`Unknown cameraType '${cameraType}'`);\r\n        }\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n    _initStats() {\r\n        this.stats = new Stats();\r\n    }\r\n    _initScene() {\r\n        if (!this.scene) {\r\n            this.scene = new Scene();\r\n            this.scene.name = 'scene';\r\n        }\r\n        this.rotationGroup = new Group();\r\n        this.rotationGroup.name = 'rotationGroup';\r\n        this.scene.add(this.rotationGroup);\r\n        this.translationGroup = new Group();\r\n        this.translationGroup.name = 'translationGroup';\r\n        this.rotationGroup.add(this.translationGroup);\r\n        this.modelGroup = new Group();\r\n        this.modelGroup.name = 'modelGroup';\r\n        this.translationGroup.add(this.modelGroup);\r\n        this.pickingGroup = new Group();\r\n        this.pickingGroup.name = 'pickingGroup';\r\n        this.translationGroup.add(this.pickingGroup);\r\n        this.backgroundGroup = new Group();\r\n        this.backgroundGroup.name = 'backgroundGroup';\r\n        this.translationGroup.add(this.backgroundGroup);\r\n        this.helperGroup = new Group();\r\n        this.helperGroup.name = 'helperGroup';\r\n        this.translationGroup.add(this.helperGroup);\r\n        // fog\r\n        this.scene.fog = new Fog(this.parameters.fogColor.getHex());\r\n        // light\r\n        this.spotLight = new SpotLight(this.parameters.lightColor.getHex(), this.parameters.lightIntensity);\r\n        this.scene.add(this.spotLight);\r\n        this.ambientLight = new AmbientLight(this.parameters.ambientColor.getHex(), this.parameters.ambientIntensity);\r\n        this.scene.add(this.ambientLight);\r\n    }\r\n    _initRenderer() {\r\n        const dpr = window.devicePixelRatio;\r\n        const { width, height } = this;\r\n        try {\r\n            this.renderer = new WebGLRenderer({\r\n                preserveDrawingBuffer: true,\r\n                alpha: true,\r\n                antialias: true\r\n            });\r\n        }\r\n        catch (e) {\r\n            this.wrapper.innerHTML = WebglErrorMessage;\r\n            return false;\r\n        }\r\n        this.renderer.setPixelRatio(dpr);\r\n        this.renderer.setSize(width, height);\r\n        this.renderer.autoClear = false;\r\n        this.renderer.sortObjects = true;\r\n        const gl = this.renderer.getContext();\r\n        // console.log(gl.getContextAttributes().antialias)\r\n        // console.log(gl.getParameter(gl.SAMPLES))\r\n        // For WebGL1, extensions must be explicitly enabled. \r\n        // The following are builtin to WebGL2 (and don't appear as \r\n        // extensions)\r\n        // EXT_frag_depth, OES_element_index_uint, OES_texture_float \r\n        // OES_texture_half_float\r\n        // The WEBGL_color_buffer_float extension is replaced by\r\n        // EXT_color_buffer_float\r\n        // If not webgl2 context, explicitly check for these\r\n        if (!this.renderer.capabilities.isWebGL2) {\r\n            setExtensionFragDepth(this.renderer.capabilities.isWebGL2);\r\n            this.renderer.extensions.get('OES_element_index_uint');\r\n            setSupportsReadPixelsFloat((this.renderer.extensions.get('OES_texture_float') &&\r\n                this.renderer.extensions.get('WEBGL_color_buffer_float')) ||\r\n                (this.renderer.extensions.get('OES_texture_float') &&\r\n                    testTextureSupport(gl.FLOAT)));\r\n            // picking texture\r\n            this.renderer.extensions.get('OES_texture_float');\r\n            this.supportsHalfFloat = (this.renderer.extensions.get('OES_texture_half_float') &&\r\n                testTextureSupport(0x8D61));\r\n        }\r\n        else {\r\n            setExtensionFragDepth(true);\r\n            setSupportsReadPixelsFloat(this.renderer.extensions.get('EXT_color_buffer_float'));\r\n            this.supportsHalfFloat = true;\r\n        }\r\n        this.wrapper.appendChild(this.renderer.domElement);\r\n        const dprWidth = width * dpr;\r\n        const dprHeight = height * dpr;\r\n        if (Debug) {\r\n            console.log(JSON.stringify({\r\n                'Browser': Browser,\r\n                'OES_texture_float': !!this.renderer.extensions.get('OES_texture_float'),\r\n                'OES_texture_half_float': !!this.renderer.extensions.get('OES_texture_half_float'),\r\n                'WEBGL_color_buffer_float': !!this.renderer.extensions.get('WEBGL_color_buffer_float'),\r\n                'testTextureSupport Float': testTextureSupport(gl.FLOAT),\r\n                'testTextureSupport HalfFloat': testTextureSupport(0x8D61),\r\n                'this.supportsHalfFloat': this.supportsHalfFloat,\r\n                'SupportsReadPixelsFloat': SupportsReadPixelsFloat\r\n            }, null, 2));\r\n        }\r\n        this.pickingTarget = new WebGLRenderTarget(dprWidth, dprHeight, {\r\n            minFilter: NearestFilter,\r\n            magFilter: NearestFilter,\r\n            stencilBuffer: false,\r\n            format: RGBAFormat,\r\n            type: SupportsReadPixelsFloat ? FloatType : UnsignedByteType\r\n        });\r\n        this.pickingTarget.texture.generateMipmaps = false;\r\n        // workaround to reset the gl state after using testTextureSupport\r\n        // fixes some bug where nothing is rendered to the canvas\r\n        // when animations are started on page load\r\n        this.renderer.setRenderTarget(this.pickingTarget);\r\n        this.renderer.clear();\r\n        this.renderer.setRenderTarget(null);\r\n        // ssaa textures\r\n        this.sampleTarget = new WebGLRenderTarget(dprWidth, dprHeight, {\r\n            minFilter: LinearFilter,\r\n            magFilter: LinearFilter,\r\n            format: RGBAFormat\r\n        });\r\n        this.holdTarget = new WebGLRenderTarget(dprWidth, dprHeight, {\r\n            minFilter: NearestFilter,\r\n            magFilter: NearestFilter,\r\n            format: RGBAFormat,\r\n            type: UnsignedByteType\r\n            // using HalfFloatType or FloatType does not work on some Chrome 61 installations\r\n            // type: this.supportsHalfFloat ? HalfFloatType : (\r\n            //   SupportsReadPixelsFloat ? FloatType : UnsignedByteType\r\n            // )\r\n        });\r\n        this.compositeUniforms = {\r\n            'tForeground': new Uniform(this.sampleTarget.texture),\r\n            'scale': new Uniform(1.0)\r\n        };\r\n        this.compositeMaterial = new ShaderMaterial({\r\n            uniforms: this.compositeUniforms,\r\n            vertexShader: getShader('Quad.vert'),\r\n            fragmentShader: getShader('Quad.frag'),\r\n            premultipliedAlpha: true,\r\n            transparent: true,\r\n            blending: AdditiveBlending,\r\n            depthTest: false,\r\n            depthWrite: false\r\n        });\r\n        this.compositeCamera = new OrthographicCamera(-1, 1, 1, -1, 0, 1);\r\n        this.compositeScene = new Scene();\r\n        this.compositeScene.name = 'compositeScene';\r\n        this.compositeScene.add(new Mesh(new PlaneGeometry(2, 2), this.compositeMaterial));\r\n    }\r\n    _initHelper() {\r\n        const indices = new Uint16Array([\r\n            0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6,\r\n            6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7\r\n        ]);\r\n        const positions = new Float32Array(8 * 3);\r\n        const bbGeometry = new BufferGeometry();\r\n        bbGeometry.setIndex(new BufferAttribute(indices, 1));\r\n        bbGeometry.setAttribute('position', new BufferAttribute(positions, 3));\r\n        const bbMaterial = new ShaderMaterial({\r\n            uniforms: { 'uColor': { value: new Color('skyblue') } },\r\n            vertexShader: getShader('BasicLine.vert'),\r\n            fragmentShader: getShader('BasicLine.frag')\r\n        });\r\n        this.boundingBoxMesh = new LineSegments(bbGeometry, bbMaterial);\r\n        this.helperGroup.add(this.boundingBoxMesh);\r\n    }\r\n    updateHelper() {\r\n        const position = this.boundingBoxMesh.geometry.attributes.position; // TODO\r\n        const array = position.array;\r\n        const { min, max } = this.boundingBox;\r\n        array[0] = max.x;\r\n        array[1] = max.y;\r\n        array[2] = max.z;\r\n        array[3] = min.x;\r\n        array[4] = max.y;\r\n        array[5] = max.z;\r\n        array[6] = min.x;\r\n        array[7] = min.y;\r\n        array[8] = max.z;\r\n        array[9] = max.x;\r\n        array[10] = min.y;\r\n        array[11] = max.z;\r\n        array[12] = max.x;\r\n        array[13] = max.y;\r\n        array[14] = min.z;\r\n        array[15] = min.x;\r\n        array[16] = max.y;\r\n        array[17] = min.z;\r\n        array[18] = min.x;\r\n        array[19] = min.y;\r\n        array[20] = min.z;\r\n        array[21] = max.x;\r\n        array[22] = min.y;\r\n        array[23] = min.z;\r\n        position.needsUpdate = true;\r\n        if (!this.boundingBox.isEmpty()) {\r\n            this.boundingBoxMesh.geometry.computeBoundingSphere();\r\n        }\r\n    }\r\n    /** Distance from origin (lookAt point) */\r\n    get cameraDistance() {\r\n        return Math.abs(this.camera.position.z);\r\n    }\r\n    /** Set distance from origin (lookAt point); along the -z axis */\r\n    set cameraDistance(d) {\r\n        this.camera.position.z = -d;\r\n    }\r\n    add(buffer, instanceList) {\r\n        // Log.time( \"Viewer.add\" );\r\n        if (instanceList) {\r\n            instanceList.forEach(instance => this.addBuffer(buffer, instance));\r\n        }\r\n        else {\r\n            this.addBuffer(buffer);\r\n        }\r\n        buffer.group.name = 'meshGroup';\r\n        buffer.wireframeGroup.name = 'wireframeGroup';\r\n        if (buffer.parameters.background) {\r\n            this.backgroundGroup.add(buffer.group);\r\n            this.backgroundGroup.add(buffer.wireframeGroup);\r\n        }\r\n        else {\r\n            this.modelGroup.add(buffer.group);\r\n            this.modelGroup.add(buffer.wireframeGroup);\r\n        }\r\n        if (buffer.pickable) {\r\n            this.pickingGroup.add(buffer.pickingGroup);\r\n        }\r\n        if (Debug)\r\n            this.updateHelper();\r\n        // Log.timeEnd( \"Viewer.add\" );\r\n    }\r\n    addBuffer(buffer, instance) {\r\n        // Log.time( \"Viewer.addBuffer\" );\r\n        function setUserData(object) {\r\n            if (object instanceof Group) {\r\n                object.children.forEach(setUserData);\r\n            }\r\n            else {\r\n                object.userData.buffer = buffer;\r\n                object.userData.instance = instance;\r\n                object.onBeforeRender = onBeforeRender;\r\n            }\r\n        }\r\n        const mesh = buffer.getMesh();\r\n        if (instance) {\r\n            mesh.applyMatrix4(instance.matrix);\r\n        }\r\n        setUserData(mesh);\r\n        buffer.group.add(mesh);\r\n        const wireframeMesh = buffer.getWireframeMesh();\r\n        if (instance) {\r\n            // wireframeMesh.applyMatrix( instance.matrix );\r\n            wireframeMesh.matrix.copy(mesh.matrix);\r\n            wireframeMesh.position.copy(mesh.position);\r\n            wireframeMesh.quaternion.copy(mesh.quaternion);\r\n            wireframeMesh.scale.copy(mesh.scale);\r\n        }\r\n        setUserData(wireframeMesh);\r\n        buffer.wireframeGroup.add(wireframeMesh);\r\n        if (buffer.pickable) {\r\n            const pickingMesh = buffer.getPickingMesh();\r\n            if (instance) {\r\n                // pickingMesh.applyMatrix( instance.matrix );\r\n                pickingMesh.matrix.copy(mesh.matrix);\r\n                pickingMesh.position.copy(mesh.position);\r\n                pickingMesh.quaternion.copy(mesh.quaternion);\r\n                pickingMesh.scale.copy(mesh.scale);\r\n            }\r\n            setUserData(pickingMesh);\r\n            buffer.pickingGroup.add(pickingMesh);\r\n        }\r\n        if (instance) {\r\n            this._updateBoundingBox(buffer.geometry, buffer.matrix, instance.matrix);\r\n        }\r\n        else {\r\n            this._updateBoundingBox(buffer.geometry, buffer.matrix);\r\n        }\r\n        // Log.timeEnd( \"Viewer.addBuffer\" );\r\n    }\r\n    remove(buffer) {\r\n        this.translationGroup.children.forEach(function (group) {\r\n            group.remove(buffer.group);\r\n            group.remove(buffer.wireframeGroup);\r\n        });\r\n        if (buffer.pickable) {\r\n            this.pickingGroup.remove(buffer.pickingGroup);\r\n        }\r\n        this.updateBoundingBox();\r\n        if (Debug)\r\n            this.updateHelper();\r\n        // this.requestRender();\r\n    }\r\n    _updateBoundingBox(geometry, matrix, instanceMatrix) {\r\n        const boundingBox = this.boundingBox;\r\n        function updateGeometry(geometry, matrix, instanceMatrix) {\r\n            if (geometry.boundingBox == null) {\r\n                geometry.computeBoundingBox();\r\n            }\r\n            const geoBoundingBox = geometry.boundingBox.clone();\r\n            if (matrix) {\r\n                geoBoundingBox.applyMatrix4(matrix);\r\n            }\r\n            if (instanceMatrix) {\r\n                geoBoundingBox.applyMatrix4(instanceMatrix);\r\n            }\r\n            if (geoBoundingBox.min.equals(geoBoundingBox.max)) {\r\n                // mainly to give a single impostor geometry some volume\r\n                // as it is only expanded in the shader on the GPU\r\n                geoBoundingBox.expandByScalar(5);\r\n            }\r\n            boundingBox.union(geoBoundingBox);\r\n        }\r\n        function updateNode(node) {\r\n            if (node.geometry !== undefined) {\r\n                let matrix, instanceMatrix;\r\n                if (node.userData.buffer) {\r\n                    matrix = node.userData.buffer.matrix;\r\n                }\r\n                if (node.userData.instance) {\r\n                    instanceMatrix = node.userData.instance.matrix;\r\n                }\r\n                updateGeometry(node.geometry, matrix, instanceMatrix); // TODO\r\n            }\r\n        }\r\n        if (geometry) {\r\n            updateGeometry(geometry, matrix, instanceMatrix);\r\n        }\r\n        else {\r\n            boundingBox.makeEmpty();\r\n            this.modelGroup.traverse(updateNode);\r\n            this.backgroundGroup.traverse(updateNode);\r\n        }\r\n        boundingBox.getSize(this.boundingBoxSize);\r\n        this.boundingBoxLength = this.boundingBoxSize.length();\r\n    }\r\n    updateBoundingBox() {\r\n        this._updateBoundingBox();\r\n        if (Debug)\r\n            this.updateHelper();\r\n    }\r\n    getPickingPixels() {\r\n        const { width, height } = this;\r\n        const n = width * height * 4;\r\n        const imgBuffer = SupportsReadPixelsFloat ? new Float32Array(n) : new Uint8Array(n);\r\n        this.render(true);\r\n        this.renderer.readRenderTargetPixels(this.pickingTarget, 0, 0, width, height, imgBuffer);\r\n        return imgBuffer;\r\n    }\r\n    getImage(picking) {\r\n        return new Promise(resolve => {\r\n            if (picking) {\r\n                const { width, height } = this;\r\n                const n = width * height * 4;\r\n                let imgBuffer = this.getPickingPixels();\r\n                if (SupportsReadPixelsFloat) {\r\n                    const imgBuffer2 = new Uint8Array(n);\r\n                    for (let i = 0; i < n; ++i) {\r\n                        imgBuffer2[i] = Math.round(imgBuffer[i] * 255);\r\n                    }\r\n                    imgBuffer = imgBuffer2;\r\n                }\r\n                const canvas = document.createElement('canvas');\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n                const ctx = canvas.getContext('2d'); // TODO\r\n                const imgData = ctx.getImageData(0, 0, width, height);\r\n                imgData.data.set(imgBuffer); // TODO\r\n                ctx.putImageData(imgData, 0, 0);\r\n                canvas.toBlob(resolve, 'image/png'); // TODO\r\n            }\r\n            else {\r\n                this.renderer.domElement.toBlob(resolve, 'image/png'); // TODO\r\n            }\r\n        });\r\n    }\r\n    makeImage(params = {}) {\r\n        return makeImage(this, params);\r\n    }\r\n    setLight(color, intensity, ambientColor, ambientIntensity) {\r\n        const p = this.parameters;\r\n        if (color !== undefined)\r\n            p.lightColor.set(color); // TODO\r\n        if (intensity !== undefined)\r\n            p.lightIntensity = intensity;\r\n        if (ambientColor !== undefined)\r\n            p.ambientColor.set(ambientColor); // TODO\r\n        if (ambientIntensity !== undefined)\r\n            p.ambientIntensity = ambientIntensity;\r\n        this.requestRender();\r\n    }\r\n    setFog(color, near, far) {\r\n        const p = this.parameters;\r\n        if (color !== undefined)\r\n            p.fogColor.set(color); // TODO\r\n        if (near !== undefined)\r\n            p.fogNear = near;\r\n        if (far !== undefined)\r\n            p.fogFar = far;\r\n        this.requestRender();\r\n    }\r\n    setBackground(color) {\r\n        const p = this.parameters;\r\n        if (color)\r\n            p.backgroundColor.set(color); // TODO\r\n        this.setFog(p.backgroundColor);\r\n        this.renderer.setClearColor(p.backgroundColor, 0);\r\n        this.renderer.domElement.style.backgroundColor = p.backgroundColor.getStyle();\r\n        this.requestRender();\r\n    }\r\n    setSampling(level) {\r\n        if (level !== undefined) {\r\n            this.parameters.sampleLevel = level;\r\n            this.sampleLevel = level;\r\n        }\r\n        this.requestRender();\r\n    }\r\n    setCamera(type, fov, eyeSep) {\r\n        const p = this.parameters;\r\n        if (type)\r\n            p.cameraType = type;\r\n        if (fov)\r\n            p.cameraFov = fov;\r\n        if (eyeSep)\r\n            p.cameraEyeSep = eyeSep;\r\n        if (p.cameraType === 'orthographic') {\r\n            if (this.camera !== this.orthographicCamera) {\r\n                this.camera = this.orthographicCamera;\r\n                this.camera.position.copy(this.perspectiveCamera.position);\r\n                this.camera.up.copy(this.perspectiveCamera.up);\r\n                this.updateZoom();\r\n            }\r\n        }\r\n        else if (p.cameraType === 'perspective' || p.cameraType === 'stereo') {\r\n            if (this.camera !== this.perspectiveCamera) {\r\n                this.camera = this.perspectiveCamera;\r\n                this.camera.position.copy(this.orthographicCamera.position);\r\n                this.camera.up.copy(this.orthographicCamera.up);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(`Unknown cameraType '${p.cameraType}'`);\r\n        }\r\n        this.perspectiveCamera.fov = p.cameraFov;\r\n        this.stereoCamera.eyeSep = p.cameraEyeSep;\r\n        this.camera.updateProjectionMatrix();\r\n        this.requestRender();\r\n    }\r\n    setClip(near, far, dist, clipMode, clipScale) {\r\n        const p = this.parameters;\r\n        if (near !== undefined)\r\n            p.clipNear = near;\r\n        if (far !== undefined)\r\n            p.clipFar = far;\r\n        if (dist !== undefined)\r\n            p.clipDist = dist;\r\n        if (clipMode !== undefined)\r\n            p.clipMode = clipMode;\r\n        if (clipScale !== undefined)\r\n            p.clipScale = clipScale;\r\n        this.requestRender();\r\n    }\r\n    setSize(width, height) {\r\n        this.width = width || 1;\r\n        this.height = height || 1;\r\n        this.perspectiveCamera.aspect = this.width / this.height;\r\n        this.orthographicCamera.left = -this.width / 2;\r\n        this.orthographicCamera.right = this.width / 2;\r\n        this.orthographicCamera.top = this.height / 2;\r\n        this.orthographicCamera.bottom = -this.height / 2;\r\n        this.camera.updateProjectionMatrix();\r\n        const dpr = window.devicePixelRatio;\r\n        this.renderer.setPixelRatio(dpr);\r\n        this.renderer.setSize(width, height);\r\n        const dprWidth = this.width * dpr;\r\n        const dprHeight = this.height * dpr;\r\n        this.pickingTarget.setSize(dprWidth, dprHeight);\r\n        this.sampleTarget.setSize(dprWidth, dprHeight);\r\n        this.holdTarget.setSize(dprWidth, dprHeight);\r\n        this.requestRender();\r\n    }\r\n    handleResize() {\r\n        if (this.container === document.body) {\r\n            this.setSize(window.innerWidth, window.innerHeight);\r\n        }\r\n        else {\r\n            const box = this.container.getBoundingClientRect();\r\n            this.setSize(box.width, box.height);\r\n        }\r\n    }\r\n    updateInfo(reset) {\r\n        const { memory, render } = this.info;\r\n        if (reset) {\r\n            memory.programs = 0;\r\n            memory.geometries = 0;\r\n            memory.textures = 0;\r\n            render.calls = 0;\r\n            render.vertices = 0;\r\n            render.points = 0;\r\n        }\r\n        else {\r\n            const rInfo = this.renderer.info;\r\n            const rMemory = rInfo.memory;\r\n            const rRender = rInfo.render;\r\n            memory.geometries = rMemory.geometries;\r\n            memory.textures = rMemory.textures;\r\n            render.calls += rRender.calls;\r\n            render.faces += rRender.triangles;\r\n            render.points += rRender.points;\r\n        }\r\n    }\r\n    animate() {\r\n        this.signals.ticked.dispatch(this.stats);\r\n        const delta = window.performance.now() - this.stats.startTime;\r\n        if (delta > 500 && !this.isStill && this.sampleLevel < 3 && this.sampleLevel !== -1) {\r\n            const currentSampleLevel = this.sampleLevel;\r\n            this.sampleLevel = 3;\r\n            this.renderPending = true;\r\n            this.render();\r\n            this.isStill = true;\r\n            this.sampleLevel = currentSampleLevel;\r\n            if (Debug)\r\n                Log.log('rendered still frame');\r\n        }\r\n        window.requestAnimationFrame(this.animate);\r\n    }\r\n    pick(x, y) {\r\n        if (this.parameters.cameraType === 'stereo') {\r\n            // TODO picking broken for stereo camera\r\n            return {\r\n                'pid': 0,\r\n                'instance': undefined,\r\n                'picker': undefined\r\n            };\r\n        }\r\n        x *= window.devicePixelRatio;\r\n        y *= window.devicePixelRatio;\r\n        x = Math.max(x - 2, 0);\r\n        y = Math.max(y - 2, 0);\r\n        let pid = 0, instance, picker;\r\n        const pixelBuffer = SupportsReadPixelsFloat ? pixelBufferFloat : pixelBufferUint;\r\n        this.render(true);\r\n        this.renderer.readRenderTargetPixels(this.pickingTarget, x, y, 5, 5, pixelBuffer);\r\n        for (let i = 0; i < pixelOrder.length; i++) {\r\n            const offset = pixelOrder[i] * 4;\r\n            const oid = Math.round(pixelBuffer[offset + 3]);\r\n            const object = this.pickingGroup.getObjectById(oid);\r\n            if (object) {\r\n                instance = object.userData.instance;\r\n                picker = object.userData.buffer.picking;\r\n            }\r\n            else {\r\n                continue;\r\n            }\r\n            if (SupportsReadPixelsFloat) {\r\n                pid =\r\n                    ((Math.round(pixelBuffer[offset] * 255) << 16) & 0xFF0000) |\r\n                        ((Math.round(pixelBuffer[offset + 1] * 255) << 8) & 0x00FF00) |\r\n                        ((Math.round(pixelBuffer[offset + 2] * 255)) & 0x0000FF);\r\n            }\r\n            else {\r\n                pid =\r\n                    (pixelBuffer[offset] << 16) |\r\n                        (pixelBuffer[offset + 1] << 8) |\r\n                        (pixelBuffer[offset + 2]);\r\n            }\r\n        }\r\n        // if( Debug ){\r\n        //   const rgba = Array.apply( [], pixelBuffer );\r\n        //   Log.log( pixelBuffer );\r\n        //   Log.log(\r\n        //     \"picked color\",\r\n        //     rgba.map( c => { return c.toPrecision( 2 ) } )\r\n        //   );\r\n        //   Log.log( \"picked pid\", pid );\r\n        //   Log.log( \"picked oid\", oid );\r\n        //   Log.log( \"picked object\", object );\r\n        //   Log.log( \"picked instance\", instance );\r\n        //   Log.log( \"picked position\", x, y );\r\n        //   Log.log( \"devicePixelRatio\", window.devicePixelRatio );\r\n        // }\r\n        return { pid, instance, picker };\r\n    }\r\n    requestRender() {\r\n        if (this.renderPending) {\r\n            // Log.info(\"there is still a 'render' call pending\")\r\n            return;\r\n        }\r\n        // start gathering stats anew after inactivity\r\n        if (window.performance.now() - this.stats.startTime > 22) {\r\n            this.stats.begin();\r\n            this.isStill = false;\r\n        }\r\n        this.renderPending = true;\r\n        window.requestAnimationFrame(() => {\r\n            this.render();\r\n            this.stats.update();\r\n        });\r\n    }\r\n    updateZoom() {\r\n        const fov = degToRad(this.perspectiveCamera.fov);\r\n        const height = 2 * Math.tan(fov / 2) * this.cameraDistance;\r\n        this.orthographicCamera.zoom = this.height / height;\r\n    }\r\n    /**\r\n     * Convert an absolute clip value to a relative one using bRadius.\r\n     *\r\n     * 0.0 -> 50.0\r\n     * bRadius -> 0.0\r\n     */\r\n    absoluteToRelative(d) {\r\n        return 50 * (1 - d / this.bRadius);\r\n    }\r\n    /**\r\n     * Convert a relative clip value to an absolute one using bRadius\r\n     *\r\n     * 0.0 -> bRadius\r\n     * 50.0 -> 0.0\r\n     */\r\n    relativeToAbsolute(d) {\r\n        return this.bRadius * (1 - d / 50);\r\n    }\r\n    /**\r\n     * Intepret clipMode, clipScale and set the camera and fog clipping.\r\n     * Also ensures bRadius and cDist are valid\r\n     */\r\n    __updateClipping() {\r\n        const p = this.parameters;\r\n        // bRadius must always be updated for material-based clipping\r\n        // and for focus calculations\r\n        this.bRadius = Math.max(10, this.boundingBoxLength * 0.5);\r\n        // FL: Removed below, but leaving commented as I don't understand intention\r\n        // this.bRadius += this.boundingBox.getCenter(this.distVector).length()\r\n        if (!isFinite(this.bRadius)) {\r\n            this.bRadius = 50;\r\n        }\r\n        this.camera.getWorldPosition(this.distVector);\r\n        this.cDist = this.distVector.length();\r\n        if (!this.cDist) {\r\n            // recover from a broken (NaN) camera position\r\n            this.cameraDistance = Math.abs(p.cameraZ);\r\n            this.cDist = Math.abs(p.cameraZ);\r\n        }\r\n        // fog\r\n        const fog = this.scene.fog;\r\n        fog.color.set(p.fogColor);\r\n        if (p.clipMode === 'camera') {\r\n            // Always interpret clipScale as absolute for clipMode camera\r\n            this.camera.near = p.clipNear;\r\n            this.camera.far = p.clipFar;\r\n            fog.near = p.fogNear;\r\n            fog.far = p.fogFar;\r\n        }\r\n        else {\r\n            // scene mode\r\n            if (p.clipScale === 'absolute') {\r\n                // absolute scene mode; offset clip planes from scene center\r\n                // (note: positive values move near plane towards camera and rear plane away)\r\n                this.camera.near = this.cDist - p.clipNear;\r\n                this.camera.far = this.cDist + p.clipFar;\r\n                fog.near = this.cDist - p.fogNear;\r\n                fog.far = this.cDist + p.fogFar;\r\n            }\r\n            else {\r\n                // relative scene mode (default): convert pecentages to Angstroms\r\n                const nearFactor = (50 - p.clipNear) / 50;\r\n                const farFactor = -(50 - p.clipFar) / 50;\r\n                this.camera.near = this.cDist - (this.bRadius * nearFactor);\r\n                this.camera.far = this.cDist + (this.bRadius * farFactor);\r\n                const fogNearFactor = (50 - p.fogNear) / 50;\r\n                const fogFarFactor = -(50 - p.fogFar) / 50;\r\n                fog.near = this.cDist - (this.bRadius * fogNearFactor);\r\n                fog.far = this.cDist + (this.bRadius * fogFarFactor);\r\n            }\r\n        }\r\n        if (p.clipMode !== 'camera') {\r\n            if (this.camera.type === 'PerspectiveCamera') {\r\n                this.camera.near = Math.max(0.1, p.clipDist, this.camera.near);\r\n                this.camera.far = Math.max(1, this.camera.far);\r\n                fog.near = Math.max(0.1, fog.near);\r\n                fog.far = Math.max(1, fog.far);\r\n            }\r\n            else if (this.camera.type === 'OrthographicCamera') {\r\n                if (p.clipDist > 0) {\r\n                    this.camera.near = Math.max(p.clipDist, this.camera.near);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    __updateCamera() {\r\n        const camera = this.camera;\r\n        camera.updateMatrix();\r\n        camera.updateMatrixWorld(true);\r\n        camera.updateProjectionMatrix();\r\n        updateMaterialUniforms(this.scene, camera, this.renderer, this.cDist, this.bRadius);\r\n        sortProjectedPosition(this.scene, camera);\r\n    }\r\n    __setVisibility(model, picking, background, helper) {\r\n        this.modelGroup.visible = model;\r\n        this.pickingGroup.visible = picking;\r\n        this.backgroundGroup.visible = background;\r\n        this.helperGroup.visible = helper;\r\n    }\r\n    __updateLights() {\r\n        this.spotLight.color.set(this.parameters.lightColor);\r\n        this.spotLight.intensity = this.parameters.lightIntensity;\r\n        this.distVector.copy(this.camera.position).setLength(this.boundingBoxLength * 100);\r\n        this.spotLight.position.copy(this.camera.position).add(this.distVector);\r\n        this.ambientLight.color.set(this.parameters.ambientColor);\r\n        this.ambientLight.intensity = this.parameters.ambientIntensity;\r\n    }\r\n    __renderPickingGroup(camera) {\r\n        this.renderer.setRenderTarget(this.pickingTarget || null);\r\n        this.renderer.clear();\r\n        this.__setVisibility(false, true, false, false);\r\n        this.renderer.render(this.scene, camera);\r\n        this.renderer.setRenderTarget(null);\r\n        this.updateInfo();\r\n        //  back to standard render target\r\n        this.renderer.setRenderTarget(null); // TODO\r\n        // if (Debug) {\r\n        //   this.__setVisibility(false, true, false, true);\r\n        //   this.renderer.clear();\r\n        //   this.renderer.render(this.scene, camera);\r\n        // }\r\n    }\r\n    __renderModelGroup(camera, renderTarget) {\r\n        this.renderer.setRenderTarget(renderTarget || null);\r\n        this.renderer.clear();\r\n        this.__setVisibility(false, false, true, false);\r\n        this.renderer.render(this.scene, camera);\r\n        this.renderer.clear(false, true, true);\r\n        this.updateInfo();\r\n        this.__setVisibility(true, false, false, Debug);\r\n        this.renderer.render(this.scene, camera);\r\n        this.renderer.setRenderTarget(null); // set back to default canvas\r\n        this.updateInfo();\r\n    }\r\n    __renderSuperSample(camera) {\r\n        // based on the Supersample Anti-Aliasing Render Pass\r\n        // contributed to three.js by bhouston / http://clara.io/\r\n        //\r\n        // This manual approach to SSAA re-renders the scene ones for\r\n        // each sample with camera jitter and accumulates the results.\r\n        // References: https://en.wikipedia.org/wiki/Supersampling\r\n        const offsetList = JitterVectors[Math.max(0, Math.min(this.sampleLevel, 5))];\r\n        const baseSampleWeight = 1.0 / offsetList.length;\r\n        const roundingRange = 1 / 32;\r\n        this.compositeUniforms.tForeground.value = this.sampleTarget.texture;\r\n        let width = this.sampleTarget.width;\r\n        const height = this.sampleTarget.height;\r\n        if (this.parameters.cameraType === 'stereo') {\r\n            width /= 2;\r\n        }\r\n        // render the scene multiple times, each slightly jitter offset\r\n        // from the last and accumulate the results.\r\n        for (let i = 0; i < offsetList.length; ++i) {\r\n            const offset = offsetList[i];\r\n            camera.setViewOffset(width, height, offset[0], offset[1], width, height);\r\n            camera.updateProjectionMatrix();\r\n            updateCameraUniforms(this.scene, camera);\r\n            let sampleWeight = baseSampleWeight;\r\n            // the theory is that equal weights for each sample lead to an\r\n            // accumulation of rounding errors.\r\n            // The following equation varies the sampleWeight per sample\r\n            // so that it is uniformly distributed across a range of values\r\n            // whose rounding errors cancel each other out.\r\n            const uniformCenteredDistribution = -0.5 + (i + 0.5) / offsetList.length;\r\n            sampleWeight += roundingRange * uniformCenteredDistribution;\r\n            this.compositeUniforms.scale.value = sampleWeight;\r\n            this.__renderModelGroup(camera, this.sampleTarget);\r\n            this.renderer.setRenderTarget(this.holdTarget);\r\n            if (i === 0) {\r\n                this.renderer.clear();\r\n            }\r\n            this.renderer.render(this.compositeScene, this.compositeCamera);\r\n        }\r\n        this.compositeUniforms.scale.value = 1.0;\r\n        this.compositeUniforms.tForeground.value = this.holdTarget.texture;\r\n        camera.clearViewOffset();\r\n        this.renderer.setRenderTarget(null);\r\n        this.renderer.clear();\r\n        this.renderer.render(this.compositeScene, this.compositeCamera);\r\n    }\r\n    __renderStereo(picking = false) {\r\n        const stereoCamera = this.stereoCamera;\r\n        stereoCamera.update(this.perspectiveCamera);\r\n        const renderer = this.renderer;\r\n        let size = new Vector2();\r\n        renderer.getSize(size);\r\n        renderer.setScissorTest(true);\r\n        renderer.setScissor(0, 0, size.width / 2, size.height);\r\n        renderer.setViewport(0, 0, size.width / 2, size.height);\r\n        updateCameraUniforms(this.scene, stereoCamera.cameraL);\r\n        this.__render(picking, stereoCamera.cameraL);\r\n        renderer.setScissor(size.width / 2, 0, size.width / 2, size.height);\r\n        renderer.setViewport(size.width / 2, 0, size.width / 2, size.height);\r\n        updateCameraUniforms(this.scene, stereoCamera.cameraR);\r\n        this.__render(picking, stereoCamera.cameraR);\r\n        renderer.setScissorTest(false);\r\n        renderer.setViewport(0, 0, size.width, size.height);\r\n    }\r\n    __render(picking = false, camera) {\r\n        if (picking) {\r\n            if (!this.lastRenderedPicking)\r\n                this.__renderPickingGroup(camera);\r\n        }\r\n        else if (this.sampleLevel > 0 && this.parameters.cameraType !== 'stereo') {\r\n            // TODO super sample broken for stereo camera\r\n            this.__renderSuperSample(camera);\r\n        }\r\n        else {\r\n            this.__renderModelGroup(camera);\r\n        }\r\n    }\r\n    render(picking = false) {\r\n        if (this.rendering) {\r\n            Log.warn(\"'tried to call 'render' from within 'render'\");\r\n            return;\r\n        }\r\n        // Log.time('Viewer.render')\r\n        this.rendering = true;\r\n        try {\r\n            this.__updateClipping();\r\n            this.__updateCamera();\r\n            this.__updateLights();\r\n            this.updateInfo(true);\r\n            // render\r\n            if (this.parameters.cameraType === 'stereo') {\r\n                this.__renderStereo(picking);\r\n            }\r\n            else {\r\n                this.__render(picking, this.camera);\r\n            }\r\n            this.lastRenderedPicking = picking;\r\n        }\r\n        finally {\r\n            this.rendering = false;\r\n            this.renderPending = false;\r\n        }\r\n        this.signals.rendered.dispatch();\r\n        // Log.timeEnd('Viewer.render')\r\n        // Log.log(this.info.memory, this.info.render)\r\n    }\r\n    clear() {\r\n        Log.log('scene cleared');\r\n        this.scene.remove(this.rotationGroup);\r\n        this._initScene();\r\n        this.renderer.clear();\r\n    }\r\n    dispose() {\r\n        this.renderer.dispose();\r\n    }\r\n}\r\n//# sourceMappingURL=viewer.js.map","/**\r\n * @file Constants\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nexport const LeftMouseButton = 1;\r\nexport const MiddleMouseButton = 2;\r\nexport const RightMouseButton = 3;\r\n//# sourceMappingURL=constants.js.map","/**\r\n * @file Mouse Observer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector2, Vector3 } from 'three';\r\nimport { Signal } from 'signals';\r\nimport { LeftMouseButton, RightMouseButton } from '../constants.js';\r\nimport { defaults } from '../utils';\r\n/**\r\n * @example\r\n * mouseObserver.signals.scrolled.add( function( delta ){ ... } );\r\n *\r\n * @typedef {Object} MouseSignals\r\n * @property {Signal<Integer, Integer>} moved - on move: deltaX, deltaY\r\n * @property {Signal<Number>} scrolled - on scroll: delta\r\n * @property {Signal<Integer, Integer>} dragged - on drag: deltaX, deltaY\r\n * @property {Signal} dropped - on drop\r\n * @property {Signal} clicked - on click\r\n * @property {Signal} hovered - on hover\r\n */\r\nfunction getTouchDistance(event) {\r\n    const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n    const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\nfunction getMouseButtons(event) {\r\n    if (typeof event === 'object') {\r\n        if ('buttons' in event) {\r\n            return event.buttons;\r\n        }\r\n        else if ('which' in event) {\r\n            const b = event.which;\r\n            if (b === 2) {\r\n                return 4;\r\n            }\r\n            else if (b === 3) {\r\n                return 2;\r\n            }\r\n            else if (b > 0) {\r\n                return 1 << (b - 1);\r\n            }\r\n        }\r\n        else if ('button' in event) {\r\n            const b = event.button;\r\n            if (b === 1) {\r\n                return 4;\r\n            }\r\n            else if (b === 2) {\r\n                return 2;\r\n            }\r\n            else if (b >= 0) {\r\n                return 1 << b;\r\n            }\r\n        }\r\n    }\r\n    return 0;\r\n}\r\n/**\r\n * Mouse observer\r\n *\r\n * @example\r\n * // listen to mouse moving (and touch-moving) events\r\n * mouseObserver.moved.moved.add( function( deltaX, deltaY ){ ... } );\r\n *\r\n * @example\r\n * // listen to scrolling (and pinching) events\r\n * mouseObserver.signals.scrolled.add( function( delta ){ ... } );\r\n *\r\n * @example\r\n * // listen to dragging (and touch-dragging) events\r\n * mouseObserver.signals.dragged.add( function( deltaX, deltaY ){ ... } );\r\n *\r\n * @example\r\n * // listen to clicking (and tapping) events\r\n * mouseObserver.signals.clicked.add( function(){ ... } );\r\n *\r\n * @example\r\n * // listen to double clicking (and double tapping) events\r\n * mouseObserver.signals.doubleClicked.add( function(){ ... } );\r\n *\r\n * @example\r\n * // listen to hovering events\r\n * mouseObserver.signals.hovered.add( function(){ ... } );\r\n */\r\nclass MouseObserver {\r\n    /**\r\n     * @param  {Element} domElement - the dom element to observe mouse events in\r\n     * @param  {Object} params - parameters object\r\n     * @param  {Integer} params.hoverTimeout - timeout in ms until the {@link MouseSignals.hovered}\r\n     *                                         signal is fired, set to -1 to ignore hovering\r\n     * @param  {Boolean} params.handleScroll - whether or not to handle scroll events\r\n     * @param  {Integer} params.doubleClickSpeed - max time in ms to trigger double click\r\n     */\r\n    constructor(domElement, stage, params = {}) {\r\n        this.domElement = domElement;\r\n        this.signals = {\r\n            moved: new Signal(),\r\n            scrolled: new Signal(),\r\n            dragged: new Signal(),\r\n            dropped: new Signal(),\r\n            clicked: new Signal(),\r\n            hovered: new Signal(),\r\n            doubleClicked: new Signal()\r\n        };\r\n        this.position = new Vector2(); // Position on page\r\n        this.prevPosition = new Vector2(); // Previous position on page\r\n        this.down = new Vector2(); // Position on page when clicked\r\n        this.canvasPosition = new Vector2(); // Position on dom element\r\n        this.prevClickCP = new Vector2();\r\n        this.moving = false; // Flag indicating if the mouse is moving\r\n        this.hovering = true; // Flag indicating if the mouse is hovering\r\n        this.scrolled = false; // Flag indicating if there was a scolling event since the last mouse move\r\n        this.lastMoved = Infinity; // Timestamp of last mouse move\r\n        this.which = 0; // 0: No button; 1: Left button; 2: Middle button; 3: Right button\r\n        this.buttons = 0; // 0: No button; 1: Left button; 2: Right button; 4: Middle button\r\n        this.pressed = false; // Flag indicating if the mouse is pressed down\r\n        this.altKey = false; // Flag indicating if the alt key is pressed\r\n        this.ctrlKey = false; // Flag indicating if the ctrl key is pressed\r\n        this.metaKey = false; // Flag indicating if the meta key is pressed\r\n        this.shiftKey = false; // Flag indicating if the shift key is pressed\r\n        this.domElement.style.touchAction = 'none';\r\n        this.hoverTimeout = defaults(params.hoverTimeout, 50);\r\n        this.handleScroll = defaults(params.handleScroll, true);\r\n        this.doubleClickSpeed = defaults(params.doubleClickSpeed, 500);\r\n        this.stage = stage;\r\n        this._listen = this._listen.bind(this);\r\n        this._onMousewheel = this._onMousewheel.bind(this);\r\n        this._onMousemove = this._onMousemove.bind(this);\r\n        this._onMousedown = this._onMousedown.bind(this);\r\n        this._onMouseup = this._onMouseup.bind(this);\r\n        this._onContextmenu = this._onContextmenu.bind(this);\r\n        this._onTouchstart = this._onTouchstart.bind(this);\r\n        this._onTouchend = this._onTouchend.bind(this);\r\n        this._onTouchmove = this._onTouchmove.bind(this);\r\n        this._listen();\r\n        const opt = { passive: false }; // treat as 'passive' so preventDefault can be called\r\n        document.addEventListener('mousewheel', this._onMousewheel, opt);\r\n        document.addEventListener('wheel', this._onMousewheel, opt);\r\n        document.addEventListener('MozMousePixelScroll', this._onMousewheel, opt);\r\n        document.addEventListener('mousemove', this._onMousemove, opt);\r\n        document.addEventListener('mousedown', this._onMousedown, opt);\r\n        document.addEventListener('mouseup', this._onMouseup, opt);\r\n        document.addEventListener('contextmenu', this._onContextmenu, opt);\r\n        document.addEventListener('touchstart', this._onTouchstart, opt);\r\n        document.addEventListener('touchend', this._onTouchend, opt);\r\n        document.addEventListener('touchmove', this._onTouchmove, opt);\r\n    }\r\n    get key() {\r\n        let key = 0;\r\n        if (this.altKey)\r\n            key += 1;\r\n        if (this.ctrlKey)\r\n            key += 2;\r\n        if (this.metaKey)\r\n            key += 4;\r\n        if (this.shiftKey)\r\n            key += 8;\r\n        return key;\r\n    }\r\n    setParameters(params = {}) {\r\n        this.hoverTimeout = defaults(params.hoverTimeout, this.hoverTimeout);\r\n    }\r\n    /*\r\n    * Returns mouse position in normalized device coordinates\r\n    */\r\n    getNdcPosition() {\r\n        const ssPos = this.canvasPosition;\r\n        const canvasSize = new Vector2(this.stage.viewer.container.clientWidth, this.stage.viewer.container.clientHeight);\r\n        return ssPos.divide(canvasSize).multiplyScalar(2.0).subScalar(1.0);\r\n    }\r\n    /*\r\n    * Returns world coordinates corresponding to the current mouse position\r\n    */\r\n    getWorldPosition() {\r\n        const ndcPos = this.getNdcPosition();\r\n        const ndcToWorld = new Vector3(ndcPos.x, ndcPos.y, 0).unproject(this.stage.viewer.camera);\r\n        // Since the whole stage itself is also transformed, it is necessary to \r\n        // apply inverse transformations to the computed world position to get\r\n        // correct behavior\r\n        ndcToWorld\r\n            .applyQuaternion(this.stage.viewerControls.rotation.clone().conjugate())\r\n            .add(this.stage.viewerControls.position.clone().negate());\r\n        return ndcToWorld;\r\n    }\r\n    /**\r\n     * listen to mouse actions\r\n     * @emits {MouseSignals.clicked} when clicked\r\n     * @emits {MouseSignals.hovered} when hovered\r\n     * @return {undefined}\r\n     */\r\n    _listen() {\r\n        const now = window.performance.now();\r\n        const cp = this.canvasPosition;\r\n        if (this.doubleClickPending && now - this.lastClicked > this.doubleClickSpeed) {\r\n            this.doubleClickPending = false;\r\n        }\r\n        if (now - this.lastMoved > this.hoverTimeout) {\r\n            this.moving = false;\r\n        }\r\n        if (this.scrolled || (!this.moving && !this.hovering)) {\r\n            this.scrolled = false;\r\n            if (this.hoverTimeout !== -1 && this.overElement) {\r\n                this.hovering = true;\r\n                this.signals.hovered.dispatch(cp.x, cp.y);\r\n            }\r\n        }\r\n        window.requestAnimationFrame(this._listen);\r\n    }\r\n    /**\r\n     * handle mouse scroll\r\n     * @emits {MouseSignals.scrolled} when scrolled\r\n     * @param  {Event} event - mouse event\r\n     * @return {undefined}\r\n     */\r\n    _onMousewheel(event) {\r\n        if (event.target !== this.domElement || !this.handleScroll) {\r\n            return;\r\n        }\r\n        event.preventDefault();\r\n        this._setKeys(event);\r\n        let delta = 0;\r\n        if ('deltaY' in event && 'deltaMode' in event) {\r\n            // all modern browsers, using WheelEvent; deltaY + down (toward user)\r\n            if (event.deltaMode === WheelEvent.DOM_DELTA_PIXEL)\r\n                // everything except Firefox: normally 100 per wheel click\r\n                delta = -event.deltaY * (2.5 / 100.0);\r\n            else if (event.deltaMode === WheelEvent.DOM_DELTA_LINE)\r\n                // Firefox in line mode, normally 3 per wheel click\r\n                delta = -event.deltaY * (2.5 / 3.0);\r\n            else // page mode: 1 per wheel click\r\n                delta = -event.deltaY * 2.5;\r\n        }\r\n        else if ('deltaY' in event && !('detail' in event)) {\r\n            // Old Firefox or IE 11: deltaY but no deltaMode; treat as pixels\r\n            delta = -event.deltaY * (2.5 / 100.0);\r\n        }\r\n        else if (event.wheelDelta !== undefined) {\r\n            delta = -event.wheelDelta * (2.5 / 100);\r\n        }\r\n        else if (event.wheelDeltaY !== undefined) {\r\n            delta = -event.wheelDeltaY * (2.5 / 100);\r\n        }\r\n        else {\r\n            // Old Firefox, MouseWheelEvent\r\n            delta = -event.detail / 3;\r\n        }\r\n        this.signals.scrolled.dispatch(delta);\r\n        setTimeout(() => {\r\n            this.scrolled = true;\r\n        }, this.hoverTimeout);\r\n    }\r\n    /**\r\n     * handle mouse move\r\n     * @emits {MouseSignals.moved} when moved\r\n     * @emits {MouseSignals.dragged} when dragged\r\n     * @param  {Event} event - mouse event\r\n     * @return {undefined}\r\n     */\r\n    _onMousemove(event) {\r\n        if (event.target === this.domElement) {\r\n            event.preventDefault();\r\n            this.overElement = true;\r\n        }\r\n        else {\r\n            this.overElement = false;\r\n        }\r\n        this._setKeys(event);\r\n        this.moving = true;\r\n        this.hovering = false;\r\n        this.lastMoved = window.performance.now();\r\n        this.prevPosition.copy(this.position);\r\n        this.position.set(event.clientX, event.clientY);\r\n        this._setCanvasPosition(event);\r\n        const dx = this.prevPosition.x - this.position.x;\r\n        const dy = this.prevPosition.y - this.position.y;\r\n        this.signals.moved.dispatch(dx, dy);\r\n        if (this.pressed) {\r\n            this.signals.dragged.dispatch(dx, dy);\r\n        }\r\n    }\r\n    _onMousedown(event) {\r\n        if (event.target !== this.domElement) {\r\n            return;\r\n        }\r\n        event.preventDefault();\r\n        this._setKeys(event);\r\n        this.moving = false;\r\n        this.hovering = false;\r\n        this.down.set(event.clientX, event.clientY);\r\n        this.position.set(event.clientX, event.clientY);\r\n        this.which = event.which;\r\n        this.buttons = getMouseButtons(event);\r\n        this.pressed = true;\r\n        this._setCanvasPosition(event);\r\n    }\r\n    /**\r\n     * handle mouse up\r\n     * @emits {MouseSignals.doubleClicked} when double clicked\r\n     * @emits {MouseSignals.dropped} when dropped\r\n     * @param  {Event} event - mouse event\r\n     * @return {undefined}\r\n     */\r\n    _onMouseup(event) {\r\n        if (event.target === this.domElement) {\r\n            event.preventDefault();\r\n        }\r\n        this._setKeys(event);\r\n        const cp = this.canvasPosition;\r\n        if (this._distance() < 4) {\r\n            this.lastClicked = window.performance.now();\r\n            if (this.doubleClickPending && this.prevClickCP.distanceTo(cp) < 4) {\r\n                this.signals.doubleClicked.dispatch(cp.x, cp.y);\r\n                this.doubleClickPending = false;\r\n            }\r\n            this.signals.clicked.dispatch(cp.x, cp.y);\r\n            this.doubleClickPending = true;\r\n            this.prevClickCP.copy(cp);\r\n        }\r\n        this.which = undefined;\r\n        this.buttons = undefined;\r\n        this.pressed = undefined;\r\n        // if (this._distance() > 3 || event.which === RightMouseButton) {\r\n        //   this.signals.dropped.dispatch();\r\n        // }\r\n    }\r\n    _onContextmenu(event) {\r\n        if (event.target === this.domElement) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    _onTouchstart(event) {\r\n        if (event.target !== this.domElement) {\r\n            return;\r\n        }\r\n        event.preventDefault();\r\n        this.pressed = true;\r\n        switch (event.touches.length) {\r\n            case 1: {\r\n                this.moving = false;\r\n                this.hovering = false;\r\n                this.down.set(event.touches[0].pageX, event.touches[0].pageY);\r\n                this.position.set(event.touches[0].pageX, event.touches[0].pageY);\r\n                this._setCanvasPosition(event.touches[0]);\r\n                break;\r\n            }\r\n            case 2: {\r\n                this.down.set((event.touches[0].pageX + event.touches[1].pageX) / 2, (event.touches[0].pageY + event.touches[1].pageY) / 2);\r\n                this.position.set((event.touches[0].pageX + event.touches[1].pageX) / 2, (event.touches[0].pageY + event.touches[1].pageY) / 2);\r\n                this.lastTouchDistance = getTouchDistance(event);\r\n            }\r\n        }\r\n    }\r\n    _onTouchend(event) {\r\n        if (event.target === this.domElement) {\r\n            event.preventDefault();\r\n        }\r\n        this.which = undefined;\r\n        this.buttons = undefined;\r\n        this.pressed = undefined;\r\n    }\r\n    _onTouchmove(event) {\r\n        if (event.target === this.domElement) {\r\n            event.preventDefault();\r\n            this.overElement = true;\r\n        }\r\n        else {\r\n            this.overElement = false;\r\n        }\r\n        switch (event.touches.length) {\r\n            case 1: {\r\n                this._setKeys(event);\r\n                this.which = LeftMouseButton;\r\n                this.buttons = 1;\r\n                this.moving = true;\r\n                this.hovering = false;\r\n                this.lastMoved = window.performance.now();\r\n                this.prevPosition.copy(this.position);\r\n                this.position.set(event.touches[0].pageX, event.touches[0].pageY);\r\n                this._setCanvasPosition(event.touches[0]);\r\n                const dx = this.prevPosition.x - this.position.x;\r\n                const dy = this.prevPosition.y - this.position.y;\r\n                this.signals.moved.dispatch(dx, dy);\r\n                if (this.pressed) {\r\n                    this.signals.dragged.dispatch(dx, dy);\r\n                }\r\n                break;\r\n            }\r\n            case 2: {\r\n                const touchDistance = getTouchDistance(event);\r\n                const delta = touchDistance - this.lastTouchDistance;\r\n                this.lastTouchDistance = touchDistance;\r\n                this.prevPosition.copy(this.position);\r\n                this.position.set((event.touches[0].pageX + event.touches[1].pageX) / 2, (event.touches[0].pageY + event.touches[1].pageY) / 2);\r\n                if (Math.abs(delta) > 2 && this.handleScroll &&\r\n                    this.position.distanceTo(this.prevPosition) < 2) {\r\n                    this.which = 0;\r\n                    this.buttons = 0;\r\n                    this.signals.scrolled.dispatch(delta / 2);\r\n                }\r\n                else {\r\n                    this.which = RightMouseButton;\r\n                    this.buttons = 2;\r\n                    const dx = this.prevPosition.x - this.position.x;\r\n                    const dy = this.prevPosition.y - this.position.y;\r\n                    this.signals.moved.dispatch(dx, dy);\r\n                    if (this.pressed) {\r\n                        this.signals.dragged.dispatch(dx, dy);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _distance() {\r\n        return this.position.distanceTo(this.down);\r\n    }\r\n    _setCanvasPosition(event) {\r\n        const box = this.domElement.getBoundingClientRect();\r\n        let offsetX, offsetY;\r\n        if ('offsetX' in event && 'offsetY' in event) {\r\n            offsetX = event.offsetX;\r\n            offsetY = event.offsetY;\r\n        }\r\n        else {\r\n            offsetX = event.clientX - box.left;\r\n            offsetY = event.clientY - box.top;\r\n        }\r\n        this.canvasPosition.set(offsetX, box.height - offsetY);\r\n    }\r\n    _setKeys(event) {\r\n        this.altKey = event.altKey;\r\n        this.ctrlKey = event.ctrlKey;\r\n        this.metaKey = event.metaKey;\r\n        this.shiftKey = event.shiftKey;\r\n    }\r\n    dispose() {\r\n        document.removeEventListener('mousewheel', this._onMousewheel);\r\n        document.removeEventListener('wheel', this._onMousewheel);\r\n        document.removeEventListener('MozMousePixelScroll', this._onMousewheel);\r\n        document.removeEventListener('mousemove', this._onMousemove);\r\n        document.removeEventListener('mousedown', this._onMousedown);\r\n        document.removeEventListener('mouseup', this._onMouseup);\r\n        document.removeEventListener('contextmenu', this._onContextmenu);\r\n        document.removeEventListener('touchstart', this._onTouchstart);\r\n        document.removeEventListener('touchend', this._onTouchend);\r\n        document.removeEventListener('touchmove', this._onTouchmove);\r\n    }\r\n}\r\nexport default MouseObserver;\r\n//# sourceMappingURL=mouse-observer.js.map","/**\r\n * @file Trackball Controls\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Matrix4, Quaternion } from 'three';\r\nimport { defaults } from '../utils';\r\nconst tmpRotateXMatrix = new Matrix4();\r\nconst tmpRotateYMatrix = new Matrix4();\r\nconst tmpRotateZMatrix = new Matrix4();\r\nconst tmpRotateMatrix = new Matrix4();\r\nconst tmpRotateCameraMatrix = new Matrix4();\r\nconst tmpRotateVector = new Vector3();\r\nconst tmpRotateQuaternion = new Quaternion();\r\nconst tmpRotateQuaternion2 = new Quaternion();\r\nconst tmpPanMatrix = new Matrix4();\r\nconst tmpPanVector = new Vector3();\r\nconst tmpAtomVector = new Vector3();\r\n/**\r\n * Trackball controls\r\n */\r\nclass TrackballControls {\r\n    constructor(stage, params = {}) {\r\n        this.stage = stage;\r\n        this.rotateSpeed = defaults(params.rotateSpeed, 2.0);\r\n        this.zoomSpeed = defaults(params.zoomSpeed, 1.2);\r\n        this.panSpeed = defaults(params.panSpeed, 1.0);\r\n        this.viewer = stage.viewer;\r\n        this.mouse = stage.mouseObserver;\r\n        this.controls = stage.viewerControls;\r\n    }\r\n    get component() {\r\n        return this.stage.transformComponent;\r\n    }\r\n    get atom() {\r\n        return this.stage.transformAtom;\r\n    }\r\n    _setPanVector(x, y, z = 0) {\r\n        const scaleFactor = this.controls.getCanvasScaleFactor(z);\r\n        tmpPanVector.set(x, y, 0);\r\n        tmpPanVector.multiplyScalar(this.panSpeed * scaleFactor);\r\n    }\r\n    _getRotateXY(x, y) {\r\n        return [\r\n            this.rotateSpeed * -x * 0.01,\r\n            this.rotateSpeed * y * 0.01\r\n        ];\r\n    }\r\n    _getCameraRotation(m) {\r\n        m.extractRotation(this.viewer.camera.matrixWorld);\r\n        m.multiply(tmpRotateYMatrix.makeRotationY(Math.PI));\r\n        return m;\r\n    }\r\n    _transformPanVector() {\r\n        if (!this.component)\r\n            return;\r\n        // Adjust for component and scene rotation\r\n        tmpPanMatrix.extractRotation(this.component.transform);\r\n        tmpPanMatrix.premultiply(this.viewer.rotationGroup.matrix);\r\n        tmpPanMatrix.getInverse(tmpPanMatrix);\r\n        // Adjust for camera rotation\r\n        tmpPanMatrix.multiply(this._getCameraRotation(tmpRotateMatrix));\r\n        tmpPanVector.applyMatrix4(tmpPanMatrix);\r\n    }\r\n    zoom(delta) {\r\n        this.controls.zoom(this.zoomSpeed * delta * 0.02);\r\n    }\r\n    pan(x, y) {\r\n        this._setPanVector(x, y);\r\n        // Adjust for scene rotation\r\n        tmpPanMatrix.getInverse(this.viewer.rotationGroup.matrix);\r\n        // Adjust for camera rotation\r\n        tmpPanMatrix.multiply(this._getCameraRotation(tmpRotateMatrix));\r\n        tmpPanVector.applyMatrix4(tmpPanMatrix);\r\n        this.controls.translate(tmpPanVector);\r\n    }\r\n    panComponent(x, y) {\r\n        if (!this.component)\r\n            return;\r\n        this._setPanVector(x, y);\r\n        this._transformPanVector();\r\n        this.component.position.add(tmpPanVector);\r\n        this.component.updateMatrix();\r\n    }\r\n    panAtom(x, y) {\r\n        if (!this.atom || !this.component)\r\n            return;\r\n        this.atom.positionToVector3(tmpAtomVector);\r\n        tmpAtomVector.add(this.viewer.translationGroup.position);\r\n        tmpAtomVector.applyMatrix4(this.viewer.rotationGroup.matrix);\r\n        this._setPanVector(x, y, tmpAtomVector.z);\r\n        this._transformPanVector();\r\n        this.atom.positionAdd(tmpPanVector);\r\n        this.component.updateRepresentations({ 'position': true });\r\n    }\r\n    rotate(x, y) {\r\n        const [dx, dy] = this._getRotateXY(x, y);\r\n        // rotate around screen X then screen Y\r\n        this._getCameraRotation(tmpRotateMatrix);\r\n        tmpRotateVector.set(1, 0, 0); // X axis\r\n        tmpRotateVector.applyMatrix4(tmpRotateMatrix); // screen X\r\n        tmpRotateQuaternion.setFromAxisAngle(tmpRotateVector, dy);\r\n        tmpRotateVector.set(0, 1, 0); // Y axis\r\n        tmpRotateVector.applyMatrix4(tmpRotateMatrix); // screen Y\r\n        tmpRotateQuaternion2.setFromAxisAngle(tmpRotateVector, dx);\r\n        tmpRotateQuaternion.multiply(tmpRotateQuaternion2);\r\n        tmpRotateMatrix.makeRotationFromQuaternion(tmpRotateQuaternion);\r\n        this.controls.applyMatrix(tmpRotateMatrix);\r\n    }\r\n    zRotate(x, y) {\r\n        const dz = this.rotateSpeed * ((-x + y) / -2) * 0.01;\r\n        tmpRotateZMatrix.makeRotationZ(dz);\r\n        this.controls.applyMatrix(tmpRotateZMatrix);\r\n    }\r\n    rotateComponent(x, y) {\r\n        if (!this.component)\r\n            return;\r\n        const [dx, dy] = this._getRotateXY(x, y);\r\n        this._getCameraRotation(tmpRotateCameraMatrix);\r\n        tmpRotateMatrix.extractRotation(this.component.transform);\r\n        tmpRotateMatrix.premultiply(this.viewer.rotationGroup.matrix);\r\n        tmpRotateMatrix.getInverse(tmpRotateMatrix);\r\n        tmpRotateMatrix.premultiply(tmpRotateCameraMatrix);\r\n        tmpRotateVector.set(1, 0, 0);\r\n        tmpRotateVector.applyMatrix4(tmpRotateMatrix);\r\n        tmpRotateXMatrix.makeRotationAxis(tmpRotateVector, dy);\r\n        tmpRotateVector.set(0, 1, 0);\r\n        tmpRotateVector.applyMatrix4(tmpRotateMatrix);\r\n        tmpRotateYMatrix.makeRotationAxis(tmpRotateVector, dx);\r\n        tmpRotateXMatrix.multiply(tmpRotateYMatrix);\r\n        tmpRotateQuaternion.setFromRotationMatrix(tmpRotateXMatrix);\r\n        this.component.quaternion.premultiply(tmpRotateQuaternion);\r\n        this.component.quaternion.normalize();\r\n        this.component.updateMatrix();\r\n    }\r\n}\r\nexport default TrackballControls;\r\n//# sourceMappingURL=trackball-controls.js.map","/**\r\n * @file Picking Proxy\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nconst tmpVec = new Vector3();\r\nfunction closer(x, a, b) {\r\n    return x.distanceTo(a) < x.distanceTo(b);\r\n}\r\n/**\r\n * Picking proxy class.\r\n */\r\nclass PickingProxy {\r\n    /**\r\n     * Create picking proxy object\r\n     * @param  {PickingData} pickingData - picking data\r\n     * @param  {Stage} stage - stage object\r\n     */\r\n    constructor(pickingData, stage) {\r\n        this.stage = stage;\r\n        this.pid = pickingData.pid;\r\n        this.picker = pickingData.picker;\r\n        /**\r\n         * @type {Object}\r\n         */\r\n        this.instance = pickingData.instance;\r\n        /**\r\n         * @type {Stage}\r\n         */\r\n        this.stage = stage;\r\n        /**\r\n         * @type {ViewerControls}\r\n         */\r\n        this.controls = stage.viewerControls;\r\n        /**\r\n         * @type {MouseObserver}\r\n         */\r\n        this.mouse = stage.mouseObserver;\r\n    }\r\n    /**\r\n     * Kind of the picked data\r\n     * @type {String}\r\n     */\r\n    get type() { return this.picker.type; }\r\n    /**\r\n     * If the `alt` key was pressed\r\n     * @type {Boolean}\r\n     */\r\n    get altKey() { return this.mouse.altKey; }\r\n    /**\r\n     * If the `ctrl` key was pressed\r\n     * @type {Boolean}\r\n     */\r\n    get ctrlKey() { return this.mouse.ctrlKey; }\r\n    /**\r\n     * If the `meta` key was pressed\r\n     * @type {Boolean}\r\n     */\r\n    get metaKey() { return this.mouse.metaKey; }\r\n    /**\r\n     * If the `shift` key was pressed\r\n     * @type {Boolean}\r\n     */\r\n    get shiftKey() { return this.mouse.shiftKey; }\r\n    /**\r\n     * Position of the mouse on the canvas\r\n     * @type {Vector2}\r\n     */\r\n    get canvasPosition() { return this.mouse.canvasPosition; }\r\n    /**\r\n     * The component the picked data is part of\r\n     * @type {Component}\r\n     */\r\n    get component() {\r\n        return this.stage.getComponentsByObject(this.picker.data).list[0]; // TODO\r\n    }\r\n    /**\r\n     * The picked object data\r\n     * @type {Object}\r\n     */\r\n    get object() {\r\n        return this.picker.getObject(this.pid);\r\n    }\r\n    /**\r\n     * The 3d position in the scene of the picked object\r\n     * @type {Vector3}\r\n     */\r\n    get position() {\r\n        return this.picker.getPosition(this.pid, this.instance, this.component);\r\n    }\r\n    /**\r\n     * The atom of a picked bond that is closest to the mouse\r\n     * @type {AtomProxy}\r\n     */\r\n    get closestBondAtom() {\r\n        if (this.type !== 'bond' || !this.bond)\r\n            return undefined;\r\n        const bond = this.bond;\r\n        const controls = this.controls;\r\n        const cp = this.canvasPosition;\r\n        const v1 = bond.atom1.positionToVector3();\r\n        const v2 = bond.atom2.positionToVector3();\r\n        v1.applyMatrix4(this.component.matrix);\r\n        v2.applyMatrix4(this.component.matrix);\r\n        const acp1 = controls.getPositionOnCanvas(v1);\r\n        const acp2 = controls.getPositionOnCanvas(v2);\r\n        return closer(cp, acp1, acp2) ? bond.atom1 : bond.atom2;\r\n    }\r\n    /**\r\n     * Close-by atom\r\n     * @type {AtomProxy}\r\n     */\r\n    get closeAtom() {\r\n        const cp = this.canvasPosition;\r\n        const ca = this.closestBondAtom;\r\n        if (!ca)\r\n            return undefined;\r\n        const v = ca.positionToVector3().applyMatrix4(this.component.matrix);\r\n        const acp = this.controls.getPositionOnCanvas(v);\r\n        ca.positionToVector3(tmpVec);\r\n        if (this.instance)\r\n            tmpVec.applyMatrix4(this.instance.matrix);\r\n        tmpVec.applyMatrix4(this.component.matrix);\r\n        const viewer = this.controls.viewer;\r\n        tmpVec.add(viewer.translationGroup.position);\r\n        tmpVec.applyMatrix4(viewer.rotationGroup.matrix);\r\n        const scaleFactor = this.controls.getCanvasScaleFactor(tmpVec.z);\r\n        const sc = this.component;\r\n        const radius = sc.getMaxRepresentationRadius(ca.index);\r\n        //console.log(scaleFactor, cp.distanceTo(acp), radius/scaleFactor, radius)\r\n        if (cp.distanceTo(acp) <= radius / scaleFactor) {\r\n            return ca;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get arrow() { return this._objectIfType('arrow'); }\r\n    /**\r\n     * @type {AtomProxy}\r\n     */\r\n    get atom() { return this._objectIfType('atom'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get axes() { return this._objectIfType('axes'); }\r\n    /**\r\n     * @type {BondProxy}\r\n     */\r\n    get bond() { return this._objectIfType('bond'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get box() { return this._objectIfType('box'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get cone() { return this._objectIfType('cone'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get clash() { return this._objectIfType('clash'); }\r\n    /**\r\n     * @type {BondProxy}\r\n     */\r\n    get contact() { return this._objectIfType('contact'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get cylinder() { return this._objectIfType('cylinder'); }\r\n    /**\r\n     * @type {BondProxy}\r\n     */\r\n    get distance() { return this._objectIfType('distance'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get ellipsoid() { return this._objectIfType('ellipsoid'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get octahedron() { return this._objectIfType('octahedron'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get point() { return this._objectIfType('point'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get mesh() { return this._objectIfType('mesh'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get slice() { return this._objectIfType('slice'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get sphere() { return this._objectIfType('sphere'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get tetrahedron() { return this._objectIfType('tetrahedron'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get torus() { return this._objectIfType('torus'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get surface() { return this._objectIfType('surface'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get unitcell() { return this._objectIfType('unitcell'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get unknown() { return this._objectIfType('unknown'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get volume() { return this._objectIfType('volume'); }\r\n    /**\r\n     * @type {Object}\r\n     */\r\n    get wideline() { return this._objectIfType('wideline'); }\r\n    _objectIfType(type) {\r\n        return this.type === type ? this.object : undefined;\r\n    }\r\n    getLabel() {\r\n        const atom = this.atom || this.closeAtom;\r\n        let msg = 'nothing';\r\n        if (this.arrow) {\r\n            msg = this.arrow.name;\r\n        }\r\n        else if (atom) {\r\n            msg = `atom: ${atom.qualifiedName()} (${atom.structure.name})`;\r\n        }\r\n        else if (this.axes) {\r\n            msg = 'axes';\r\n        }\r\n        else if (this.bond) {\r\n            msg = `bond: ${this.bond.atom1.qualifiedName()} - ${this.bond.atom2.qualifiedName()} (${this.bond.structure.name})`;\r\n        }\r\n        else if (this.box) {\r\n            msg = this.box.name;\r\n        }\r\n        else if (this.cone) {\r\n            msg = this.cone.name;\r\n        }\r\n        else if (this.clash) {\r\n            msg = `clash: ${this.clash.clash.sele1} - ${this.clash.clash.sele2}`;\r\n        }\r\n        else if (this.contact) {\r\n            msg = `${this.contact.type}: ${this.contact.atom1.qualifiedName()} - ${this.contact.atom2.qualifiedName()} (${this.contact.atom1.structure.name})`;\r\n        }\r\n        else if (this.cylinder) {\r\n            msg = this.cylinder.name;\r\n        }\r\n        else if (this.distance) {\r\n            msg = `distance: ${this.distance.atom1.qualifiedName()} - ${this.distance.atom2.qualifiedName()} (${this.distance.structure.name})`;\r\n        }\r\n        else if (this.ellipsoid) {\r\n            msg = this.ellipsoid.name;\r\n        }\r\n        else if (this.octahedron) {\r\n            msg = this.octahedron.name;\r\n        }\r\n        else if (this.point) {\r\n            msg = this.point.name;\r\n        }\r\n        else if (this.mesh) {\r\n            msg = `mesh: ${this.mesh.name || this.mesh.serial} (${this.mesh.shape.name})`;\r\n        }\r\n        else if (this.slice) {\r\n            msg = `slice: ${this.slice.value.toPrecision(3)} (${this.slice.volume.name})`;\r\n        }\r\n        else if (this.sphere) {\r\n            msg = this.sphere.name;\r\n        }\r\n        else if (this.surface) {\r\n            msg = `surface: ${this.surface.surface.name}`;\r\n        }\r\n        else if (this.tetrahedron) {\r\n            msg = this.tetrahedron.name;\r\n        }\r\n        else if (this.torus) {\r\n            msg = this.torus.name;\r\n        }\r\n        else if (this.unitcell) {\r\n            msg = `unitcell: ${this.unitcell.unitcell.spacegroup} (${this.unitcell.structure.name})`;\r\n        }\r\n        else if (this.unknown) {\r\n            msg = 'unknown';\r\n        }\r\n        else if (this.volume) {\r\n            msg = `volume: ${this.volume.value.toPrecision(3)} (${this.volume.volume.name})`;\r\n        }\r\n        else if (this.wideline) {\r\n            msg = this.wideline.name;\r\n        }\r\n        return msg;\r\n    }\r\n}\r\nexport default PickingProxy;\r\n//# sourceMappingURL=picking-proxy.js.map","/**\r\n * @file Picking Controls\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport PickingProxy from './picking-proxy';\r\n/**\r\n * Picking controls\r\n */\r\nclass PickingControls {\r\n    constructor(stage) {\r\n        this.stage = stage;\r\n        this.viewer = stage.viewer;\r\n    }\r\n    /**\r\n     * get picking data\r\n     * @param {Number} x - canvas x coordinate\r\n     * @param {Number} y - canvas y coordinate\r\n     * @return {PickingProxy|undefined} picking proxy\r\n     */\r\n    pick(x, y) {\r\n        const pickingData = this.viewer.pick(x, y);\r\n        if (pickingData.picker &&\r\n            pickingData.picker.type !== 'ignore' &&\r\n            pickingData.pid !== undefined) {\r\n            const pickerArray = pickingData.picker.array;\r\n            if (pickerArray && pickingData.pid >= pickerArray.length) {\r\n                console.error('pid >= picker.array.length');\r\n            }\r\n            else {\r\n                return new PickingProxy(pickingData, this.stage);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default PickingControls;\r\n//# sourceMappingURL=picking-controls.js.map","/**\r\n * @file Viewer Controls\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Matrix4, Quaternion, OrthographicCamera } from 'three';\r\nimport * as signalsWrapper from 'signals';\r\nimport { ensureVector2, ensureVector3, ensureMatrix4, ensureQuaternion } from '../utils';\r\nimport { degToRad } from '../math/math-utils';\r\n/**\r\n * Orientation matrix, a 4x4 transformation matrix with rotation part\r\n * used for scene rotation, scale part for scene camera distance and\r\n * position part for scene translation\r\n * @typedef {Matrix4} OrientationMatrix - orientation matrix\r\n */\r\nconst tmpQ = new Quaternion();\r\nconst tmpP = new Vector3();\r\nconst tmpS = new Vector3();\r\nconst tmpCanvasVector = new Vector3();\r\nconst tmpScaleVector = new Vector3();\r\nconst tmpRotateMatrix = new Matrix4();\r\nconst tmpRotateVector = new Vector3();\r\nconst tmpAlignMatrix = new Matrix4();\r\n/**\r\n * Viewer controls\r\n */\r\nclass ViewerControls {\r\n    /**\r\n     * @param  {Stage} stage - the stage object\r\n     */\r\n    constructor(stage) {\r\n        this.stage = stage;\r\n        this.signals = {\r\n            changed: new signalsWrapper.Signal()\r\n        };\r\n        this.viewer = stage.viewer;\r\n    }\r\n    /**\r\n     * scene center position\r\n     * @type {Vector3}\r\n     */\r\n    get position() {\r\n        return this.viewer.translationGroup.position;\r\n    }\r\n    /**\r\n     * scene rotation\r\n     * @type {Quaternion}\r\n     */\r\n    get rotation() {\r\n        return this.viewer.rotationGroup.quaternion;\r\n    }\r\n    /**\r\n     * Trigger render and emit changed event\r\n     * @emits {ViewerControls.signals.changed}\r\n     * @return {undefined}\r\n     */\r\n    changed() {\r\n        this.viewer.requestRender();\r\n        this.signals.changed.dispatch();\r\n    }\r\n    getPositionOnCanvas(position, optionalTarget) {\r\n        const canvasPosition = ensureVector2(optionalTarget);\r\n        const viewer = this.viewer;\r\n        tmpCanvasVector.copy(position)\r\n            .add(viewer.translationGroup.position)\r\n            .applyMatrix4(viewer.rotationGroup.matrix)\r\n            .project(viewer.camera);\r\n        return canvasPosition.set((tmpCanvasVector.x + 1) * viewer.width / 2, (tmpCanvasVector.y + 1) * viewer.height / 2);\r\n    }\r\n    getCanvasScaleFactor(z = 0) {\r\n        const camera = this.viewer.camera;\r\n        if (camera instanceof OrthographicCamera) {\r\n            return 1 / camera.zoom;\r\n        }\r\n        else {\r\n            z = Math.abs(z);\r\n            z += this.getCameraDistance();\r\n            const fov = degToRad(camera.fov);\r\n            const unitHeight = 2.0 * z * Math.tan(fov / 2);\r\n            return unitHeight / this.viewer.height;\r\n        }\r\n    }\r\n    /**\r\n     * get scene orientation\r\n     * @param {Matrix4} optionalTarget - pre-allocated target matrix\r\n     * @return {OrientationMatrix} scene orientation\r\n     */\r\n    getOrientation(optionalTarget) {\r\n        const m = ensureMatrix4(optionalTarget);\r\n        m.copy(this.viewer.rotationGroup.matrix);\r\n        const z = this.getCameraDistance();\r\n        m.scale(tmpScaleVector.set(z, z, z));\r\n        m.setPosition(this.viewer.translationGroup.position);\r\n        return m;\r\n    }\r\n    /**\r\n     * set scene orientation\r\n     * @param {OrientationMatrix|Array} orientation - scene orientation\r\n     * @return {undefined}\r\n     */\r\n    orient(orientation) {\r\n        ensureMatrix4(orientation).decompose(tmpP, tmpQ, tmpS);\r\n        const v = this.viewer;\r\n        v.rotationGroup.setRotationFromQuaternion(tmpQ);\r\n        v.translationGroup.position.copy(tmpP);\r\n        v.cameraDistance = tmpS.z;\r\n        v.updateZoom();\r\n        this.changed();\r\n    }\r\n    /**\r\n     * translate scene\r\n     * @param  {Vector3|Array} vector - translation vector\r\n     * @return {undefined}\r\n     */\r\n    translate(vector) {\r\n        this.viewer.translationGroup.position\r\n            .add(ensureVector3(vector));\r\n        this.changed();\r\n    }\r\n    /**\r\n     * center scene\r\n     * @param  {Vector3|Array} position - center position\r\n     * @return {undefined}\r\n     */\r\n    center(position) {\r\n        this.viewer.translationGroup.position\r\n            .copy(ensureVector3(position)).negate();\r\n        this.changed();\r\n    }\r\n    /**\r\n     * \"zoom\" scene by moving camera closer to origin\r\n     * @param  {Number} delta - zoom change\r\n     * @return {undefined}\r\n     */\r\n    zoom(delta) {\r\n        this.distance(this.getCameraDistance() * (1 - delta));\r\n    }\r\n    /**\r\n     * get camera distance\r\n     */\r\n    getCameraDistance() {\r\n        return this.viewer.cameraDistance;\r\n    }\r\n    /**\r\n     * camera distance\r\n     * @param  {Number} z - distance\r\n     * @return {undefined}\r\n     */\r\n    distance(distance) {\r\n        // Math.abs because distance used to be \"z\", normally negative.\r\n        // Math.max to prevent us from getting _too_ close.\r\n        this.viewer.cameraDistance = Math.max(Math.abs(distance), 0.2);\r\n        this.viewer.updateZoom();\r\n        this.changed();\r\n    }\r\n    /**\r\n     * spin scene on axis\r\n     * @param  {Vector3|Array} axis - rotation axis\r\n     * @param  {Number} angle - amount to spin\r\n     * @return {undefined}\r\n     */\r\n    spin(axis, angle) {\r\n        tmpRotateMatrix.getInverse(this.viewer.rotationGroup.matrix);\r\n        tmpRotateVector\r\n            .copy(ensureVector3(axis)).applyMatrix4(tmpRotateMatrix);\r\n        this.viewer.rotationGroup.rotateOnAxis(tmpRotateVector, angle);\r\n        this.changed();\r\n    }\r\n    /**\r\n     * rotate scene\r\n     * @param  {Quaternion|Array} quaternion - rotation quaternion\r\n     * @return {undefined}\r\n     */\r\n    rotate(quaternion) {\r\n        this.viewer.rotationGroup\r\n            .setRotationFromQuaternion(ensureQuaternion(quaternion));\r\n        this.changed();\r\n    }\r\n    /**\r\n     * align scene to basis matrix\r\n     * @param  {Matrix4|Array} basis - basis matrix\r\n     * @return {undefined}\r\n     */\r\n    align(basis) {\r\n        tmpAlignMatrix.getInverse(ensureMatrix4(basis));\r\n        this.viewer.rotationGroup.setRotationFromMatrix(tmpAlignMatrix);\r\n        this.changed();\r\n    }\r\n    /**\r\n     * apply rotation matrix to scene\r\n     * @param  {Matrix4|Array} matrix - rotation matrix\r\n     * @return {undefined}\r\n     */\r\n    applyMatrix(matrix) {\r\n        this.viewer.rotationGroup.applyMatrix4(ensureMatrix4(matrix));\r\n        this.changed();\r\n    }\r\n}\r\nexport default ViewerControls;\r\n//# sourceMappingURL=viewer-controls.js.map","/**\r\n * @file Animation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Quaternion } from 'three';\r\nimport { defaults, ensureVector3, ensureQuaternion } from '../utils';\r\nimport { lerp, smoothstep } from '../math/math-utils';\r\n/**\r\n * Animation. Base animation class.\r\n * @interface\r\n */\r\nclass Animation {\r\n    constructor(duration, controls, ...args) {\r\n        this.pausedTime = -1;\r\n        this.elapsedDuration = 0;\r\n        this.pausedDuration = 0;\r\n        this.ignoreGlobalToggle = false;\r\n        this._paused = false;\r\n        this._resolveList = [];\r\n        this.duration = defaults(duration, 1000);\r\n        this.controls = controls;\r\n        this.startTime = window.performance.now();\r\n        this._init(...args);\r\n    }\r\n    /**\r\n     * True when animation has finished\r\n     */\r\n    get done() {\r\n        return this.alpha === 1;\r\n    }\r\n    /**\r\n     * True when animation is paused\r\n     */\r\n    get paused() {\r\n        return this._paused;\r\n    }\r\n    tick(stats) {\r\n        if (this._paused)\r\n            return;\r\n        this.elapsedDuration = stats.currentTime - this.startTime - this.pausedDuration;\r\n        if (this.duration === 0) {\r\n            this.alpha = 1;\r\n        }\r\n        else {\r\n            this.alpha = smoothstep(0, 1, this.elapsedDuration / this.duration);\r\n        }\r\n        this._tick(stats);\r\n        if (this.done) {\r\n            this._resolveList.forEach(resolve => resolve());\r\n        }\r\n        return this.done;\r\n    }\r\n    /**\r\n     * Pause animation\r\n     * @param {boolean} [hold] - put animation on a hold which\r\n     *                           must be release before it can be resumed\r\n     */\r\n    pause(hold) {\r\n        if (hold)\r\n            this._hold = true;\r\n        if (this.pausedTime === -1) {\r\n            this.pausedTime = window.performance.now();\r\n        }\r\n        this._paused = true;\r\n    }\r\n    /**\r\n     * Resume animation\r\n     * @param {Boolean} [releaseHold] - release a hold on the animation\r\n     */\r\n    resume(releaseHold) {\r\n        if (!releaseHold && this._hold)\r\n            return;\r\n        this.pausedDuration += window.performance.now() - this.pausedTime;\r\n        this._paused = false;\r\n        this._hold = false;\r\n        this.pausedTime = -1;\r\n    }\r\n    /**\r\n     * Toggle animation\r\n     */\r\n    toggle() {\r\n        if (this._paused) {\r\n            this.resume();\r\n        }\r\n        else {\r\n            this.pause();\r\n        }\r\n    }\r\n    /**\r\n     * Promise-like interface\r\n     */\r\n    then(callback) {\r\n        let p;\r\n        if (this.done) {\r\n            p = Promise.resolve();\r\n        }\r\n        else {\r\n            p = new Promise(resolve => this._resolveList.push(resolve));\r\n        }\r\n        return p.then(callback);\r\n    }\r\n}\r\nexport default Animation;\r\n/**\r\n * Spin animation. Spin around an axis.\r\n */\r\nexport class SpinAnimation extends Animation {\r\n    constructor(duration, controls, ...args) {\r\n        super(defaults(duration, Infinity), controls, ...args);\r\n    }\r\n    _init(axis, angle) {\r\n        if (Array.isArray(axis)) {\r\n            this.axis = new Vector3().fromArray(axis);\r\n        }\r\n        else {\r\n            this.axis = defaults(axis, new Vector3(0, 1, 0));\r\n        }\r\n        this.angle = defaults(angle, 0.01);\r\n    }\r\n    _tick(stats) {\r\n        if (!this.axis || !this.angle)\r\n            return;\r\n        this.controls.spin(this.axis, this.angle * stats.lastDuration / 16);\r\n    }\r\n}\r\n/**\r\n * Rock animation. Rock around an axis.\r\n */\r\nexport class RockAnimation extends Animation {\r\n    constructor(duration, controls, ...args) {\r\n        super(defaults(duration, Infinity), controls, ...args);\r\n        this.angleSum = 0;\r\n        this.direction = 1;\r\n    }\r\n    _init(axis, angleStep, angleEnd) {\r\n        if (Array.isArray(axis)) {\r\n            this.axis = new Vector3().fromArray(axis);\r\n        }\r\n        else {\r\n            this.axis = defaults(axis, new Vector3(0, 1, 0));\r\n        }\r\n        this.angleStep = defaults(angleStep, 0.01);\r\n        this.angleEnd = defaults(angleEnd, 0.2);\r\n    }\r\n    _tick(stats) {\r\n        if (!this.axis || !this.angleStep || !this.angleEnd)\r\n            return;\r\n        const alpha = smoothstep(0, 1, Math.abs(this.angleSum) / this.angleEnd);\r\n        const angle = this.angleStep * this.direction * (1.1 - alpha);\r\n        this.controls.spin(this.axis, angle * stats.lastDuration / 16);\r\n        this.angleSum += this.angleStep;\r\n        if (this.angleSum >= this.angleEnd) {\r\n            this.direction *= -1;\r\n            this.angleSum = -this.angleEnd;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Move animation. Move from one position to another.\r\n */\r\nexport class MoveAnimation extends Animation {\r\n    _init(moveFrom, moveTo) {\r\n        this.moveFrom = ensureVector3(defaults(moveFrom, new Vector3()));\r\n        this.moveTo = ensureVector3(defaults(moveTo, new Vector3()));\r\n    }\r\n    _tick( /* stats */) {\r\n        this.controls.position.lerpVectors(this.moveFrom, this.moveTo, this.alpha).negate();\r\n        this.controls.changed();\r\n    }\r\n}\r\n/**\r\n * Zoom animation. Gradually change the zoom level.\r\n */\r\nexport class ZoomAnimation extends Animation {\r\n    _init(zoomFrom, zoomTo) {\r\n        this.zoomFrom = zoomFrom;\r\n        this.zoomTo = zoomTo;\r\n    }\r\n    _tick() {\r\n        this.controls.distance(lerp(this.zoomFrom, this.zoomTo, this.alpha));\r\n    }\r\n}\r\n/**\r\n * Rotate animation. Rotate from one orientation to another.\r\n */\r\nexport class RotateAnimation extends Animation {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._currentRotation = new Quaternion();\r\n    }\r\n    _init(rotateFrom, rotateTo) {\r\n        this.rotateFrom = ensureQuaternion(rotateFrom);\r\n        this.rotateTo = ensureQuaternion(rotateTo);\r\n        this._currentRotation = new Quaternion();\r\n    }\r\n    _tick() {\r\n        this._currentRotation\r\n            .copy(this.rotateFrom)\r\n            .slerp(this.rotateTo, this.alpha);\r\n        this.controls.rotate(this._currentRotation);\r\n    }\r\n}\r\n/**\r\n * Value animation. Call callback with interpolated value.\r\n */\r\nexport class ValueAnimation extends Animation {\r\n    _init(valueFrom, valueTo, callback) {\r\n        this.valueFrom = valueFrom;\r\n        this.valueTo = valueTo;\r\n        this.callback = callback;\r\n    }\r\n    _tick( /* stats */) {\r\n        this.callback(lerp(this.valueFrom, this.valueTo, this.alpha));\r\n    }\r\n}\r\n/**\r\n * Timeout animation. Call callback after duration.\r\n */\r\nexport class TimeoutAnimation extends Animation {\r\n    _init(callback) {\r\n        this.callback = callback;\r\n    }\r\n    _tick() {\r\n        if (this.alpha === 1)\r\n            this.callback();\r\n    }\r\n}\r\n/**\r\n * Animation list.\r\n */\r\nexport class AnimationList {\r\n    constructor(list = []) {\r\n        this._resolveList = [];\r\n        this._list = list;\r\n    }\r\n    /**\r\n     * True when all animations have finished\r\n     */\r\n    get done() {\r\n        return this._list.every(animation => {\r\n            return animation.done;\r\n        });\r\n    }\r\n    /**\r\n     * Promise-like interface\r\n     */\r\n    then(callback) {\r\n        let p;\r\n        if (this.done) {\r\n            p = Promise.resolve();\r\n        }\r\n        else {\r\n            p = new Promise(resolve => {\r\n                this._resolveList.push(resolve);\r\n                this._list.forEach(animation => {\r\n                    animation.then(() => {\r\n                        this._resolveList.forEach(callback => {\r\n                            callback();\r\n                        });\r\n                        this._resolveList.length = 0;\r\n                    });\r\n                });\r\n            });\r\n        }\r\n        return p.then(callback);\r\n    }\r\n}\r\n//# sourceMappingURL=animation.js.map","/**\r\n * @file Animation Controls\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Quaternion } from 'three';\r\nimport { ensureMatrix4 } from '../utils';\r\nimport { SpinAnimation, RockAnimation, MoveAnimation, ZoomAnimation, RotateAnimation, ValueAnimation, TimeoutAnimation, AnimationList } from '../animation/animation';\r\n/**\r\n * Animation controls\r\n */\r\nclass AnimationControls {\r\n    /**\r\n     * Create animation controls\r\n     * @param  {Stage} stage - the stage object\r\n     */\r\n    constructor(stage) {\r\n        this.stage = stage;\r\n        this.animationList = [];\r\n        this.finishedList = [];\r\n        this.viewer = stage.viewer;\r\n        this.controls = stage.viewerControls;\r\n    }\r\n    /**\r\n     * True when all animations are paused\r\n     * @type {Boolean}\r\n     */\r\n    get paused() {\r\n        return this.animationList.every((animation) => animation.paused);\r\n    }\r\n    /**\r\n     * Add an animation\r\n     */\r\n    add(animation) {\r\n        if (animation.duration === 0) {\r\n            animation.tick(this.viewer.stats);\r\n        }\r\n        else {\r\n            this.animationList.push(animation);\r\n        }\r\n        return animation;\r\n    }\r\n    /**\r\n     * Remove an animation\r\n     */\r\n    remove(animation) {\r\n        const list = this.animationList;\r\n        const index = list.indexOf(animation);\r\n        if (index > -1) {\r\n            list.splice(index, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Run all animations\r\n     */\r\n    run(stats) {\r\n        const finishedList = this.finishedList;\r\n        const animationList = this.animationList;\r\n        const n = animationList.length;\r\n        for (let i = 0; i < n; ++i) {\r\n            const animation = animationList[i];\r\n            // tick returns true when finished\r\n            if (animation.tick(stats)) {\r\n                finishedList.push(animation);\r\n            }\r\n        }\r\n        const m = finishedList.length;\r\n        if (m) {\r\n            for (let j = 0; j < m; ++j) {\r\n                this.remove(finishedList[j]);\r\n            }\r\n            finishedList.length = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Add a spin animation\r\n     * @param  {Vector3} axis - axis to spin around\r\n     * @param  {Number} angle - amount to spin per frame, radians\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {SpinAnimation} the animation\r\n     */\r\n    spin(axis, angle, duration) {\r\n        return this.add(new SpinAnimation(duration, this.controls, axis, angle));\r\n    }\r\n    /**\r\n     * Add a rock animation\r\n     * @param  {Vector3} axis - axis to rock around\r\n     * @param  {Number} angle - amount to spin per frame, radians\r\n     * @param  {Number} end - maximum extend of motion, radians\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {SpinAnimation} the animation\r\n     */\r\n    rock(axis, angle, end, duration) {\r\n        return this.add(new RockAnimation(duration, this.controls, axis, angle, end));\r\n    }\r\n    /**\r\n     * Add a rotate animation\r\n     * @param  {Quaternion} rotateTo - target rotation\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {RotateAnimation} the animation\r\n     */\r\n    rotate(rotateTo, duration) {\r\n        const rotateFrom = this.viewer.rotationGroup.quaternion.clone();\r\n        return this.add(new RotateAnimation(duration, this.controls, rotateFrom, rotateTo));\r\n    }\r\n    /**\r\n     * Add a move animation\r\n     * @param  {Vector3} moveTo - target position\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {MoveAnimation} the animation\r\n     */\r\n    move(moveTo, duration) {\r\n        const moveFrom = this.controls.position.clone().negate();\r\n        return this.add(new MoveAnimation(duration, this.controls, moveFrom, moveTo));\r\n    }\r\n    /**\r\n     * Add a zoom animation\r\n     * @param  {Number} zoomTo - target distance\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {ZoomAnimation} the animation\r\n     */\r\n    zoom(zoomTo, duration) {\r\n        const zoomFrom = this.viewer.camera.position.z;\r\n        return this.add(new ZoomAnimation(duration, this.controls, zoomFrom, zoomTo));\r\n    }\r\n    /**\r\n     * Add a zoom and a move animation\r\n     * @param  {Vector3} moveTo - target position\r\n     * @param  {Number} zoomTo - target distance\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {Array} the animations\r\n     */\r\n    zoomMove(moveTo, zoomTo, duration) {\r\n        return new AnimationList([\r\n            this.move(moveTo, duration),\r\n            this.zoom(zoomTo, duration)\r\n        ]);\r\n    }\r\n    /**\r\n     * Add an orient animation\r\n     * @param  {OrientationMatrix|Array} orientTo - target orientation\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {Array} the animations\r\n     */\r\n    orient(orientTo, duration) {\r\n        const p = new Vector3();\r\n        const q = new Quaternion();\r\n        const s = new Vector3();\r\n        ensureMatrix4(orientTo).decompose(p, q, s);\r\n        return new AnimationList([\r\n            this.move(p.negate(), duration),\r\n            this.rotate(q, duration),\r\n            this.zoom(-s.x, duration)\r\n        ]);\r\n    }\r\n    /**\r\n     * Add a value animation\r\n     * @param  {Number} valueFrom - start value\r\n     * @param  {Number} valueTo - target value\r\n     * @param  {Function} callback - called on every tick\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {ValueAnimation} the animation\r\n     */\r\n    value(valueFrom, valueTo, callback, duration) {\r\n        return this.add(new ValueAnimation(duration, this.controls, valueFrom, valueTo, callback));\r\n    }\r\n    /**\r\n     * Add a timeout animation\r\n     * @param  {Function} callback - called after duration\r\n     * @param  {Number} duration - timeout in milliseconds\r\n     * @return {TimeoutAnimation} the animation\r\n     */\r\n    timeout(callback, duration) {\r\n        return this.add(new TimeoutAnimation(duration, this.controls, callback));\r\n    }\r\n    /**\r\n     * Add a component spin animation\r\n     * @param  {Component} component - object to move\r\n     * @param  {Vector3} axis - axis to spin around\r\n     * @param  {Number} angle - amount to spin per frame, radians\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {SpinAnimation} the animation\r\n     */\r\n    spinComponent(component, axis, angle, duration) {\r\n        return this.add(\r\n        // TODO\r\n        new SpinAnimation(duration, component.controls, axis, angle));\r\n    }\r\n    /**\r\n     * Add a component rock animation\r\n     * @param  {Component} component - object to move\r\n     * @param  {Vector3} axis - axis to rock around\r\n     * @param  {Number} angle - amount to spin per frame, radians\r\n     * @param  {Number} end - maximum extend of motion, radians\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {SpinAnimation} the animation\r\n     */\r\n    rockComponent(component, axis, angle, end, duration) {\r\n        return this.add(\r\n        // TODO\r\n        new RockAnimation(duration, component.controls, axis, angle, end));\r\n    }\r\n    /**\r\n     * Add a component move animation\r\n     * @param  {Component} component - object to move\r\n     * @param  {Vector3} moveTo - target position\r\n     * @param  {Number} duration - animation time in milliseconds\r\n     * @return {MoveAnimation} the animation\r\n     */\r\n    moveComponent(component, moveTo, duration) {\r\n        const moveFrom = component.controls.position.clone().negate();\r\n        return this.add(\r\n        // TODO\r\n        new MoveAnimation(duration, component.controls, moveFrom, moveTo));\r\n    }\r\n    /**\r\n     * Pause all animations\r\n     * @return {undefined}\r\n     */\r\n    pause() {\r\n        this.animationList.forEach(animation => animation.pause());\r\n    }\r\n    /**\r\n     * Resume all animations\r\n     * @return {undefined}\r\n     */\r\n    resume() {\r\n        this.animationList.forEach(animation => animation.resume());\r\n    }\r\n    /**\r\n     * Toggle all animations\r\n     * @return {undefined}\r\n     */\r\n    toggle() {\r\n        if (this.paused) {\r\n            this.resume();\r\n        }\r\n        else {\r\n            this.pause();\r\n        }\r\n    }\r\n    /**\r\n     * Clear all animations\r\n     * @return {undefined}\r\n     */\r\n    clear() {\r\n        this.animationList.length = 0;\r\n    }\r\n    dispose() {\r\n        this.clear();\r\n    }\r\n}\r\nexport default AnimationControls;\r\n//# sourceMappingURL=animation-controls.js.map","/**\r\n * @file Queue\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nclass Queue {\r\n    constructor(fn, argList) {\r\n        this.fn = fn;\r\n        this.queue = [];\r\n        this.pending = false;\r\n        this.next = this.next.bind(this);\r\n        if (argList) {\r\n            for (let i = 0, il = argList.length; i < il; ++i) {\r\n                this.queue.push(argList[i]);\r\n            }\r\n            this.next();\r\n        }\r\n    }\r\n    run(arg) {\r\n        this.fn(arg, this.next);\r\n    }\r\n    next() {\r\n        const arg = this.queue.shift();\r\n        if (arg !== undefined) {\r\n            this.pending = true;\r\n            setTimeout(() => this.run(arg));\r\n        }\r\n        else {\r\n            this.pending = false;\r\n        }\r\n    }\r\n    push(arg) {\r\n        this.queue.push(arg);\r\n        if (!this.pending)\r\n            this.next();\r\n    }\r\n    kill() {\r\n        this.queue.length = 0;\r\n    }\r\n    length() {\r\n        return this.queue.length;\r\n    }\r\n}\r\nexport default Queue;\r\n//# sourceMappingURL=queue.js.map","/**\r\n * @file Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Color, Vector3, Matrix4 } from 'three';\r\nimport { Debug, Log, ColormakerRegistry, ExtensionFragDepth } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Queue from '../utils/queue.js';\r\nimport Counter from '../utils/counter.js';\r\n/**\r\n * Representation parameter object.\r\n * @typedef {Object} RepresentationParameters - representation parameters\r\n * @property {Boolean} [lazy] - only build & update the representation when visible\r\n *                            otherwise defer changes until set visible again\r\n * @property {Integer} [clipNear] - position of camera near/front clipping plane\r\n *                                in percent of scene bounding box\r\n * @property {Integer} [clipRadius] - radius of clipping sphere\r\n * @property {Vector3} [clipCenter] - position of for spherical clipping\r\n * @property {Boolean} [flatShaded] - render flat shaded\r\n * @property {Float} [opacity] - translucency: 1 is fully opaque, 0 is fully transparent\r\n * @property {Boolean} [depthWrite] - depth write\r\n * @property {String} [side] - which triangle sides to render, \"front\" front-side,\r\n *                            \"back\" back-side, \"double\" front- and back-side\r\n * @property {Boolean} [wireframe] - render as wireframe\r\n * @property {String} [colorScheme] - color scheme\r\n * @property {String} [colorScale] - color scale, either a string for a\r\n *                                 predefined scale or an array of\r\n *                                 colors to be used as the scale\r\n * @property {Boolean} [colorReverse] - reverse color scale\r\n * @property {Color} [colorValue] - color value\r\n * @property {Integer[]} [colorDomain] - scale value range\r\n * @property {Integer} colorDomain.0 - min value\r\n * @property {Integer} colorDomain.1 - max value\r\n * @property {String} [colorMode] - color mode, one of rgb, hsv, hsl, hsi, lab, hcl\r\n * @property {Float} [roughness] - how rough the material is, between 0 and 1\r\n * @property {Float} [metalness] - how metallic the material is, between 0 and 1\r\n * @property {Color} [diffuse] - diffuse color for lighting\r\n * @property {Boolean} [diffuseInterior] - diffuse interior, i.e. ignore normal\r\n * @property {Boolean} [useInteriorColor] - use interior color\r\n * @property {Color} [interiorColor] - interior color\r\n * @property {Float} [interiorDarkening] - interior darkening: 0 no darking, 1 fully darkened\r\n * @property {Boolean} [disablePicking] - disable picking\r\n */\r\n/**\r\n * Representation object\r\n * @interface\r\n * @param {Object} object - the object to be represented\r\n * @param {Viewer} viewer - a viewer object\r\n * @param {RepresentationParameters} [params] - representation parameters\r\n */\r\nclass Representation {\r\n    constructor(object, viewer, params) {\r\n        // eslint-disable-next-line no-unused-vars\r\n        // const p = params || {}\r\n        this.type = '';\r\n        this.parameters = {\r\n            lazy: {\r\n                type: 'boolean'\r\n            },\r\n            clipNear: {\r\n                type: 'range', step: 1, max: 100, min: 0, buffer: true\r\n            },\r\n            clipRadius: {\r\n                type: 'number', precision: 1, max: 1000, min: 0, buffer: true\r\n            },\r\n            clipCenter: {\r\n                type: 'vector3', precision: 1, buffer: true\r\n            },\r\n            flatShaded: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            opacity: {\r\n                type: 'range', step: 0.01, max: 1, min: 0, buffer: true\r\n            },\r\n            depthWrite: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            side: {\r\n                type: 'select',\r\n                buffer: true,\r\n                options: { front: 'front', back: 'back', double: 'double' }\r\n            },\r\n            wireframe: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            colorScheme: {\r\n                type: 'select',\r\n                update: 'color',\r\n                options: {}\r\n            },\r\n            colorScale: {\r\n                type: 'select',\r\n                update: 'color',\r\n                options: ColormakerRegistry.getScales()\r\n            },\r\n            colorReverse: {\r\n                type: 'boolean', update: 'color'\r\n            },\r\n            colorValue: {\r\n                type: 'color', update: 'color'\r\n            },\r\n            colorDomain: {\r\n                type: 'hidden', update: 'color'\r\n            },\r\n            colorMode: {\r\n                type: 'select',\r\n                update: 'color',\r\n                options: ColormakerRegistry.getModes()\r\n            },\r\n            roughness: {\r\n                type: 'range', step: 0.01, max: 1, min: 0, buffer: true\r\n            },\r\n            metalness: {\r\n                type: 'range', step: 0.01, max: 1, min: 0, buffer: true\r\n            },\r\n            diffuse: {\r\n                type: 'color', buffer: true\r\n            },\r\n            diffuseInterior: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            useInteriorColor: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            interiorColor: {\r\n                type: 'color', buffer: true\r\n            },\r\n            interiorDarkening: {\r\n                type: 'range', step: 0.01, max: 1, min: 0, buffer: true\r\n            },\r\n            matrix: {\r\n                type: 'hidden', buffer: true\r\n            },\r\n            disablePicking: {\r\n                type: 'boolean', rebuild: true\r\n            }\r\n        };\r\n        /**\r\n         * @type {Viewer}\r\n         */\r\n        this.viewer = viewer;\r\n        /**\r\n         * Counter that keeps track of tasks related to the creation of\r\n         * the representation, including surface calculations.\r\n         * @type {Counter}\r\n         */\r\n        this.tasks = new Counter();\r\n        /**\r\n         * @type {Queue}\r\n         * @private\r\n         */\r\n        this.queue = new Queue(this.make.bind(this));\r\n        /**\r\n         * @type {Array}\r\n         * @private\r\n         */\r\n        this.bufferList = [];\r\n        if (this.parameters.colorScheme) {\r\n            this.parameters.colorScheme.options = ColormakerRegistry.getSchemes();\r\n        }\r\n        this.toBePrepared = false;\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        this.clipNear = defaults(p.clipNear, 0);\r\n        this.clipRadius = defaults(p.clipRadius, 0);\r\n        this.clipCenter = defaults(p.clipCenter, new Vector3());\r\n        this.flatShaded = defaults(p.flatShaded, false);\r\n        this.side = defaults(p.side, 'double');\r\n        this.opacity = defaults(p.opacity, 1.0);\r\n        this.depthWrite = defaults(p.depthWrite, true);\r\n        this.wireframe = defaults(p.wireframe, false);\r\n        this.setColor(p.color, p);\r\n        this.colorScheme = defaults(p.colorScheme, 'uniform');\r\n        this.colorScale = defaults(p.colorScale, '');\r\n        this.colorReverse = defaults(p.colorReverse, false);\r\n        this.colorValue = defaults(p.colorValue, 0x909090);\r\n        this.colorDomain = defaults(p.colorDomain, undefined);\r\n        this.colorMode = defaults(p.colorMode, 'hcl');\r\n        this.visible = defaults(p.visible, true);\r\n        this.quality = defaults(p.quality, undefined);\r\n        this.roughness = defaults(p.roughness, 0.4);\r\n        this.metalness = defaults(p.metalness, 0.0);\r\n        this.diffuse = defaults(p.diffuse, 0xffffff);\r\n        this.diffuseInterior = defaults(p.diffuseInterior, false);\r\n        this.useInteriorColor = defaults(p.useInteriorColor, false);\r\n        this.interiorColor = defaults(p.interiorColor, 0x222222);\r\n        this.interiorDarkening = defaults(p.interiorDarkening, 0);\r\n        this.lazy = defaults(p.lazy, false);\r\n        this.lazyProps = {\r\n            build: false,\r\n            bufferParams: {},\r\n            what: {}\r\n        };\r\n        this.matrix = defaults(p.matrix, new Matrix4());\r\n        this.disablePicking = defaults(p.disablePicking, false);\r\n        // handle common parameters when applicable\r\n        const tp = this.parameters;\r\n        if (tp.sphereDetail === true) {\r\n            tp.sphereDetail = {\r\n                type: 'integer', max: 3, min: 0, rebuild: 'impostor'\r\n            };\r\n        }\r\n        if (tp.radialSegments === true) {\r\n            tp.radialSegments = {\r\n                type: 'integer', max: 25, min: 5, rebuild: 'impostor'\r\n            };\r\n        }\r\n        if (tp.openEnded === true) {\r\n            tp.openEnded = {\r\n                type: 'boolean', rebuild: 'impostor', buffer: true\r\n            };\r\n        }\r\n        if (tp.disableImpostor === true) {\r\n            tp.disableImpostor = {\r\n                type: 'boolean', rebuild: true\r\n            };\r\n        }\r\n        if (p.quality === 'low') {\r\n            if (tp.sphereDetail)\r\n                this.sphereDetail = 0;\r\n            if (tp.radialSegments)\r\n                this.radialSegments = 5;\r\n        }\r\n        else if (p.quality === 'medium') {\r\n            if (tp.sphereDetail)\r\n                this.sphereDetail = 1;\r\n            if (tp.radialSegments)\r\n                this.radialSegments = 10;\r\n        }\r\n        else if (p.quality === 'high') {\r\n            if (tp.sphereDetail)\r\n                this.sphereDetail = 2;\r\n            if (tp.radialSegments)\r\n                this.radialSegments = 20;\r\n        }\r\n        else {\r\n            if (tp.sphereDetail) {\r\n                this.sphereDetail = defaults(p.sphereDetail, 1);\r\n            }\r\n            if (tp.radialSegments) {\r\n                this.radialSegments = defaults(p.radialSegments, 10);\r\n            }\r\n        }\r\n        if (tp.openEnded) {\r\n            this.openEnded = defaults(p.openEnded, true);\r\n        }\r\n        if (tp.disableImpostor) {\r\n            this.disableImpostor = defaults(p.disableImpostor, false);\r\n        }\r\n    }\r\n    getColorParams(p) {\r\n        return Object.assign({\r\n            scheme: this.colorScheme,\r\n            scale: this.colorScale,\r\n            reverse: this.colorReverse,\r\n            value: this.colorValue,\r\n            domain: this.colorDomain,\r\n            mode: this.colorMode\r\n        }, p);\r\n    }\r\n    getBufferParams(p = {}) {\r\n        return Object.assign({\r\n            clipNear: this.clipNear,\r\n            clipRadius: this.clipRadius,\r\n            clipCenter: this.clipCenter,\r\n            flatShaded: this.flatShaded,\r\n            opacity: this.opacity,\r\n            depthWrite: this.depthWrite,\r\n            side: this.side,\r\n            wireframe: this.wireframe,\r\n            roughness: this.roughness,\r\n            metalness: this.metalness,\r\n            diffuse: this.diffuse,\r\n            diffuseInterior: this.diffuseInterior,\r\n            useInteriorColor: this.useInteriorColor,\r\n            interiorColor: this.interiorColor,\r\n            interiorDarkening: this.interiorDarkening,\r\n            matrix: this.matrix,\r\n            disablePicking: this.disablePicking\r\n        }, p);\r\n    }\r\n    setColor(value, p) {\r\n        const types = Object.keys(ColormakerRegistry.getSchemes());\r\n        if (typeof value === 'string' && types.includes(value.toLowerCase())) {\r\n            if (p) {\r\n                p.colorScheme = value;\r\n            }\r\n            else {\r\n                this.setParameters({ colorScheme: value });\r\n            }\r\n        }\r\n        else if (value !== undefined) {\r\n            let val = new Color(value).getHex(); //TODO\r\n            if (p) {\r\n                p.colorScheme = 'uniform';\r\n                p.colorValue = val;\r\n            }\r\n            else {\r\n                this.setParameters({\r\n                    colorScheme: 'uniform', colorValue: val\r\n                });\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    // TODO\r\n    prepare(cb) {\r\n    }\r\n    create() {\r\n        // this.bufferList.length = 0;\r\n    }\r\n    update(what) {\r\n        this.build();\r\n    }\r\n    build(updateWhat) {\r\n        if (this.lazy && (!this.visible || !this.opacity)) {\r\n            this.lazyProps.build = true;\r\n            return;\r\n        }\r\n        if (!this.toBePrepared) {\r\n            this.tasks.increment();\r\n            this.make();\r\n            return;\r\n        }\r\n        // don't let tasks accumulate\r\n        if (this.queue.length() > 0) {\r\n            this.tasks.change(1 - this.queue.length());\r\n            this.queue.kill();\r\n        }\r\n        else {\r\n            this.tasks.increment();\r\n        }\r\n        this.queue.push(updateWhat || false);\r\n    }\r\n    make(updateWhat, callback) {\r\n        if (Debug)\r\n            Log.time('Representation.make ' + this.type);\r\n        const _make = () => {\r\n            if (updateWhat) {\r\n                this.update(updateWhat);\r\n                this.viewer.requestRender();\r\n                this.tasks.decrement();\r\n                if (callback)\r\n                    callback();\r\n            }\r\n            else {\r\n                this.clear();\r\n                this.create();\r\n                if (!this.manualAttach && !this.disposed) {\r\n                    if (Debug)\r\n                        Log.time('Representation.attach ' + this.type);\r\n                    this.attach(() => {\r\n                        if (Debug)\r\n                            Log.timeEnd('Representation.attach ' + this.type);\r\n                        this.tasks.decrement();\r\n                        if (callback)\r\n                            callback();\r\n                    });\r\n                }\r\n            }\r\n            if (Debug)\r\n                Log.timeEnd('Representation.make ' + this.type);\r\n        };\r\n        if (this.toBePrepared) {\r\n            this.prepare(_make);\r\n        }\r\n        else {\r\n            _make();\r\n        }\r\n    }\r\n    attach(callback) {\r\n        this.setVisibility(this.visible);\r\n        callback();\r\n    }\r\n    /**\r\n     * Set the visibility of the representation\r\n     * @param {Boolean} value - visibility flag\r\n     * @param {Boolean} [noRenderRequest] - whether or not to request a re-render from the viewer\r\n     * @return {Representation} this object\r\n     */\r\n    setVisibility(value, noRenderRequest) {\r\n        this.visible = value;\r\n        if (this.visible && this.opacity) {\r\n            const lazyProps = this.lazyProps;\r\n            const bufferParams = lazyProps.bufferParams;\r\n            const what = lazyProps.what;\r\n            if (lazyProps.build) {\r\n                lazyProps.build = false;\r\n                this.build();\r\n                return this;\r\n            }\r\n            else if (Object.keys(bufferParams).length || Object.keys(what).length) {\r\n                lazyProps.bufferParams = {};\r\n                lazyProps.what = {};\r\n                this.updateParameters(bufferParams, what);\r\n            }\r\n        }\r\n        this.bufferList.forEach(function (buffer) {\r\n            buffer.setVisibility(value);\r\n        });\r\n        if (!noRenderRequest)\r\n            this.viewer.requestRender();\r\n        return this;\r\n    }\r\n    /**\r\n     * Set the visibility of the representation\r\n     * @param {RepresentationParameters} params - parameters object\r\n     * @param {Object} [what] - buffer data attributes to be updated,\r\n     *                        note that this needs to be implemented in the\r\n     *                        derived classes. Generally it allows more\r\n     *                        fine-grained control over updating than\r\n     *                        forcing a rebuild.\r\n     * @param {Boolean} what.position - update position data\r\n     * @param {Boolean} what.color - update color data\r\n     * @param {Boolean} [rebuild] - whether or not to rebuild the representation\r\n     * @return {Representation} this object\r\n     */\r\n    setParameters(params, what = {}, rebuild = false) {\r\n        const p = params || {};\r\n        const tp = this.parameters;\r\n        const bufferParams = {};\r\n        if (!this.opacity && p.opacity !== undefined) {\r\n            if (this.lazyProps.build) {\r\n                this.lazyProps.build = false;\r\n                rebuild = true;\r\n            }\r\n            else {\r\n                Object.assign(bufferParams, this.lazyProps.bufferParams);\r\n                Object.assign(what, this.lazyProps.what);\r\n                this.lazyProps.bufferParams = {};\r\n                this.lazyProps.what = {};\r\n            }\r\n        }\r\n        this.setColor(p.color, p);\r\n        for (let name in p) {\r\n            if (p[name] === undefined)\r\n                continue;\r\n            if (tp[name] === undefined)\r\n                continue;\r\n            if (tp[name].int)\r\n                p[name] = parseInt(p[name]);\r\n            if (tp[name].float)\r\n                p[name] = parseFloat(p[name]);\r\n            // no value change\r\n            if (p[name] === this[name] && (!p[name].equals || p[name].equals(this[name])))\r\n                continue;\r\n            if (this[name] && this[name].copy && p[name].copy) {\r\n                this[name].copy(p[name]);\r\n            }\r\n            else if (this[name] && this[name].set) {\r\n                this[name].set(p[name]);\r\n            }\r\n            else {\r\n                this[name] = p[name];\r\n            }\r\n            // buffer param\r\n            if (tp[name].buffer) {\r\n                if (tp[name].buffer === true) {\r\n                    bufferParams[name] = p[name];\r\n                }\r\n                else {\r\n                    let key = tp[name].buffer;\r\n                    bufferParams[key] = p[name];\r\n                }\r\n            }\r\n            // mark for update\r\n            if (tp[name].update) {\r\n                what[tp[name].update] = true;\r\n            }\r\n            // mark for rebuild\r\n            if (tp[name].rebuild &&\r\n                !(tp[name].rebuild === 'impostor' &&\r\n                    ExtensionFragDepth && !this.disableImpostor)) {\r\n                rebuild = true;\r\n            }\r\n        }\r\n        //\r\n        if (rebuild) {\r\n            this.build();\r\n        }\r\n        else {\r\n            this.updateParameters(bufferParams, what);\r\n        }\r\n        return this;\r\n    }\r\n    updateParameters(bufferParams = {}, what) {\r\n        if (this.lazy && (!this.visible || !this.opacity) && bufferParams.hasOwnProperty('opacity') === false) {\r\n            Object.assign(this.lazyProps.bufferParams, bufferParams);\r\n            Object.assign(this.lazyProps.what, what);\r\n            return;\r\n        }\r\n        this.bufferList.forEach(function (buffer) {\r\n            buffer.setParameters(bufferParams);\r\n        });\r\n        if (Object.keys(what).length) {\r\n            this.update(what); // update buffer attribute\r\n        }\r\n        this.viewer.requestRender();\r\n    }\r\n    getParameters() {\r\n        const params = {\r\n            lazy: this.lazy,\r\n            visible: this.visible,\r\n            quality: this.quality\r\n        };\r\n        Object.keys(this.parameters).forEach(name => {\r\n            if (this.parameters[name] !== null) {\r\n                params[name] = this[name];\r\n            }\r\n        });\r\n        return params;\r\n    }\r\n    clear() {\r\n        this.bufferList.forEach(buffer => {\r\n            this.viewer.remove(buffer);\r\n            buffer.dispose();\r\n        });\r\n        this.bufferList.length = 0;\r\n        this.viewer.requestRender();\r\n    }\r\n    dispose() {\r\n        this.disposed = true;\r\n        this.queue.kill();\r\n        this.tasks.dispose();\r\n        this.clear();\r\n    }\r\n}\r\nexport default Representation;\r\n//# sourceMappingURL=representation.js.map","/**\r\n * @file Worker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Log, Debug, WorkerRegistry } from '../globals';\r\nexport default class _Worker {\r\n    constructor(name) {\r\n        this.pending = 0;\r\n        this.postCount = 0;\r\n        this.onmessageDict = {};\r\n        this.onerrorDict = {};\r\n        this.name = name;\r\n        this.blobUrl = window.URL.createObjectURL(WorkerRegistry.get(name));\r\n        this.worker = new Worker(this.blobUrl);\r\n        WorkerRegistry.activeWorkerCount += 1;\r\n        this.worker.onmessage = (event) => {\r\n            this.pending -= 1;\r\n            const postId = event.data.__postId;\r\n            if (Debug)\r\n                Log.timeEnd('Worker.postMessage ' + name + ' #' + postId);\r\n            const onmessage = this.onmessageDict[postId];\r\n            if (onmessage) {\r\n                onmessage.call(this.worker, event);\r\n            }\r\n            else {\r\n                // Log.debug('No onmessage', postId, name)\r\n            }\r\n            delete this.onmessageDict[postId];\r\n            delete this.onerrorDict[postId];\r\n        };\r\n        this.worker.onerror = (event) => {\r\n            this.pending -= 1;\r\n            if (event.data) {\r\n                const postId = event.data.__postId;\r\n                const onerror = this.onerrorDict[postId];\r\n                if (onerror) {\r\n                    onerror.call(this.worker, event);\r\n                }\r\n                else {\r\n                    Log.error('Worker.onerror', postId, name, event);\r\n                }\r\n                delete this.onmessageDict[postId];\r\n                delete this.onerrorDict[postId];\r\n            }\r\n            else {\r\n                Log.error('Worker.onerror', name, event);\r\n            }\r\n        };\r\n    }\r\n    post(aMessage = {}, transferList, onmessage, onerror) {\r\n        this.onmessageDict[this.postCount] = onmessage;\r\n        this.onerrorDict[this.postCount] = onerror;\r\n        aMessage.__name = this.name;\r\n        aMessage.__postId = this.postCount;\r\n        aMessage.__debug = Debug;\r\n        if (Debug)\r\n            Log.time(`Worker.postMessage ${this.name} #${this.postCount}`);\r\n        try {\r\n            this.worker.postMessage(aMessage, transferList);\r\n        }\r\n        catch (error) {\r\n            Log.error('worker.post:', error);\r\n            this.worker.postMessage(aMessage);\r\n        }\r\n        this.pending += 1;\r\n        this.postCount += 1;\r\n        return this;\r\n    }\r\n    terminate() {\r\n        if (this.worker) {\r\n            this.worker.terminate();\r\n            window.URL.revokeObjectURL(this.blobUrl);\r\n            WorkerRegistry.activeWorkerCount -= 1;\r\n        }\r\n        else {\r\n            Log.log('no worker to terminate');\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=worker.js.map","/**\r\n * @file Worker Pool\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Worker from './worker.js';\r\nclass WorkerPool {\r\n    constructor(name, maxCount = 2) {\r\n        this.pool = [];\r\n        this.count = 0;\r\n        this.maxCount = Math.min(8, maxCount);\r\n        this.name = name;\r\n    }\r\n    post(aMessage = {}, transferList, onmessage, onerror) {\r\n        const worker = this.getNextWorker();\r\n        if (worker) {\r\n            worker.post(aMessage, transferList, onmessage, onerror);\r\n        }\r\n        else {\r\n            console.error('unable to get worker from pool');\r\n        }\r\n        return this;\r\n    }\r\n    terminate() {\r\n        this.pool.forEach(function (worker) {\r\n            worker.terminate();\r\n        });\r\n    }\r\n    getNextWorker() {\r\n        let nextWorker;\r\n        let minPending = Infinity;\r\n        for (let i = 0; i < this.maxCount; ++i) {\r\n            if (i >= this.count) {\r\n                nextWorker = new Worker(this.name);\r\n                this.pool.push(nextWorker);\r\n                this.count += 1;\r\n                break;\r\n            }\r\n            const worker = this.pool[i];\r\n            if (worker.pending === 0) {\r\n                nextWorker = worker;\r\n                break;\r\n            }\r\n            else if (worker.pending < minPending) {\r\n                minPending = worker.pending;\r\n                nextWorker = worker;\r\n            }\r\n        }\r\n        return nextWorker;\r\n    }\r\n}\r\nWorkerPool.prototype.constructor = WorkerPool;\r\nexport default WorkerPool;\r\n//# sourceMappingURL=worker-pool.js.map","/**\r\n * @file Vector Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { EPS } from './math-constants';\r\n/**\r\n * Calculate the two intersection points\r\n * Converted to JavaScript from\r\n * {@link http://paulbourke.net/geometry/pointlineplane/lineline.c}\r\n */\r\nexport function lineLineIntersect(p1, p2, p3, p4) {\r\n    const p13 = new Vector3();\r\n    const p43 = new Vector3();\r\n    const p21 = new Vector3();\r\n    let d1343, d4321, d1321, d4343, d2121;\r\n    let denom, numer;\r\n    p13.x = p1.x - p3.x;\r\n    p13.y = p1.y - p3.y;\r\n    p13.z = p1.z - p3.z;\r\n    p43.x = p4.x - p3.x;\r\n    p43.y = p4.y - p3.y;\r\n    p43.z = p4.z - p3.z;\r\n    if (Math.abs(p43.x) < EPS && Math.abs(p43.y) < EPS && Math.abs(p43.z) < EPS) {\r\n        return null;\r\n    }\r\n    p21.x = p2.x - p1.x;\r\n    p21.y = p2.y - p1.y;\r\n    p21.z = p2.z - p1.z;\r\n    if (Math.abs(p21.x) < EPS && Math.abs(p21.y) < EPS && Math.abs(p21.z) < EPS) {\r\n        return null;\r\n    }\r\n    d1343 = p13.x * p43.x + p13.y * p43.y + p13.z * p43.z;\r\n    d4321 = p43.x * p21.x + p43.y * p21.y + p43.z * p21.z;\r\n    d1321 = p13.x * p21.x + p13.y * p21.y + p13.z * p21.z;\r\n    d4343 = p43.x * p43.x + p43.y * p43.y + p43.z * p43.z;\r\n    d2121 = p21.x * p21.x + p21.y * p21.y + p21.z * p21.z;\r\n    denom = d2121 * d4343 - d4321 * d4321;\r\n    if (Math.abs(denom) < EPS) {\r\n        return null;\r\n    }\r\n    numer = d1343 * d4321 - d1321 * d4343;\r\n    const mua = numer / denom;\r\n    const mub = (d1343 + d4321 * mua) / d4343;\r\n    const pa = new Vector3(p1.x + mua * p21.x, p1.y + mua * p21.y, p1.z + mua * p21.z);\r\n    const pb = new Vector3(p3.x + mub * p43.x, p3.y + mub * p43.y, p3.z + mub * p43.z);\r\n    return [pa, pb];\r\n}\r\nexport function calculateMeanVector3(array) {\r\n    const n = array.length;\r\n    const m = n / 3;\r\n    let x = 0;\r\n    let y = 0;\r\n    let z = 0;\r\n    for (let i = 0; i < n; i += 3) {\r\n        x += array[i + 0];\r\n        y += array[i + 1];\r\n        z += array[i + 2];\r\n    }\r\n    return new Vector3(x / m, y / m, z / m);\r\n}\r\nexport function isPointOnSegment(p, l1, l2) {\r\n    const len = l1.distanceTo(l2);\r\n    return p.distanceTo(l1) <= len && p.distanceTo(l2) <= len;\r\n}\r\nexport function projectPointOnVector(point, vector, origin) {\r\n    if (origin) {\r\n        point.sub(origin).projectOnVector(vector).add(origin);\r\n    }\r\n    else {\r\n        point.projectOnVector(vector);\r\n    }\r\n    return point;\r\n}\r\nexport function computeBoundingBox(array) {\r\n    let minX = +Infinity;\r\n    let minY = +Infinity;\r\n    let minZ = +Infinity;\r\n    let maxX = -Infinity;\r\n    let maxY = -Infinity;\r\n    let maxZ = -Infinity;\r\n    for (let i = 0, l = array.length; i < l; i += 3) {\r\n        const x = array[i];\r\n        const y = array[i + 1];\r\n        const z = array[i + 2];\r\n        if (x < minX)\r\n            minX = x;\r\n        if (y < minY)\r\n            minY = y;\r\n        if (z < minZ)\r\n            minZ = z;\r\n        if (x > maxX)\r\n            maxX = x;\r\n        if (y > maxY)\r\n            maxY = y;\r\n        if (z > maxZ)\r\n            maxZ = z;\r\n    }\r\n    return [\r\n        v3new([minX, minY, minZ]),\r\n        v3new([maxX, maxY, maxZ])\r\n    ];\r\n}\r\ncomputeBoundingBox.__deps = [v3new];\r\nexport function applyMatrix4toVector3array(m, a) {\r\n    for (let i = 0, il = a.length; i < il; i += 3) {\r\n        const x = a[i];\r\n        const y = a[i + 1];\r\n        const z = a[i + 2];\r\n        a[i] = m[0] * x + m[4] * y + m[8] * z + m[12];\r\n        a[i + 1] = m[1] * x + m[5] * y + m[9] * z + m[13];\r\n        a[i + 2] = m[2] * x + m[6] * y + m[10] * z + m[14];\r\n    }\r\n}\r\nexport function applyMatrix3toVector3array(m, a) {\r\n    for (let i = 0, il = a.length; i < il; i += 3) {\r\n        const x = a[i];\r\n        const y = a[i + 1];\r\n        const z = a[i + 2];\r\n        a[i] = m[0] * x + m[3] * y + m[6] * z;\r\n        a[i + 1] = m[1] * x + m[4] * y + m[7] * z;\r\n        a[i + 2] = m[2] * x + m[5] * y + m[8] * z;\r\n    }\r\n}\r\nexport function normalizeVector3array(a) {\r\n    for (let i = 0, il = a.length; i < il; i += 3) {\r\n        const x = a[i];\r\n        const y = a[i + 1];\r\n        const z = a[i + 2];\r\n        const len2 = x * x + y * y + z * z;\r\n        if (len2 > 0) { // avoid divide by zero\r\n            const s = 1 / Math.sqrt(len2);\r\n            a[i] = x * s;\r\n            a[i + 1] = y * s;\r\n            a[i + 2] = z * s;\r\n        }\r\n        // else leave as all zeros\r\n    }\r\n}\r\nexport function v3new(array) {\r\n    return new Float32Array(array || 3); // TODO\r\n}\r\nexport function v3cross(out, a, b) {\r\n    const ax = a[0];\r\n    const ay = a[1];\r\n    const az = a[2];\r\n    const bx = b[0];\r\n    const by = b[1];\r\n    const bz = b[2];\r\n    out[0] = ay * bz - az * by;\r\n    out[1] = az * bx - ax * bz;\r\n    out[2] = ax * by - ay * bx;\r\n}\r\nexport function v3dot(a, b) {\r\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n}\r\nexport function v3sub(out, a, b) {\r\n    out[0] = a[0] - b[0];\r\n    out[1] = a[1] - b[1];\r\n    out[2] = a[2] - b[2];\r\n}\r\nexport function v3add(out, a, b) {\r\n    out[0] = a[0] + b[0];\r\n    out[1] = a[1] + b[1];\r\n    out[2] = a[2] + b[2];\r\n}\r\nexport function v3fromArray(out, array, offset = 0) {\r\n    out[0] = array[offset];\r\n    out[1] = array[offset + 1];\r\n    out[2] = array[offset + 2];\r\n}\r\nexport function v3toArray(input, array, offset = 0) {\r\n    array[offset] = input[0];\r\n    array[offset + 1] = input[1];\r\n    array[offset + 2] = input[2];\r\n}\r\nexport function v3forEach(array, fn, b) {\r\n    const a = v3new();\r\n    for (let i = 0, n = array.length; i < n; i += 3) {\r\n        v3fromArray(a, array, i);\r\n        fn(a, a, b);\r\n        v3toArray(a, array, i);\r\n    }\r\n}\r\nv3forEach.__deps = [v3new, v3fromArray, v3toArray];\r\nexport function v3length(a) {\r\n    return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]);\r\n}\r\nexport function v3divide(out, a, b) {\r\n    out[0] = a[0] / b[0];\r\n    out[1] = a[1] / b[1];\r\n    out[2] = a[2] / b[2];\r\n}\r\nexport function v3multiply(out, a, b) {\r\n    out[0] = a[0] * b[0];\r\n    out[1] = a[1] * b[1];\r\n    out[2] = a[2] * b[2];\r\n}\r\nexport function v3divideScalar(out, a, s) {\r\n    v3multiplyScalar(out, a, 1 / s);\r\n}\r\nv3divideScalar.__deps = [v3multiplyScalar];\r\nexport function v3multiplyScalar(out, a, s) {\r\n    out[0] = a[0] * s;\r\n    out[1] = a[1] * s;\r\n    out[2] = a[2] * s;\r\n}\r\nexport function v3normalize(out, a) {\r\n    v3multiplyScalar(out, a, 1 / v3length(a));\r\n}\r\nv3normalize.__deps = [v3multiplyScalar, v3length];\r\nexport function v3subScalar(out, a, s) {\r\n    out[0] = a[0] - s;\r\n    out[1] = a[1] - s;\r\n    out[2] = a[2] - s;\r\n}\r\nexport function v3addScalar(out, a, s) {\r\n    out[0] = a[0] + s;\r\n    out[1] = a[1] + s;\r\n    out[2] = a[2] + s;\r\n}\r\nexport function v3floor(out, a) {\r\n    out[0] = Math.floor(a[0]);\r\n    out[1] = Math.floor(a[1]);\r\n    out[2] = Math.floor(a[2]);\r\n}\r\nexport function v3ceil(out, a) {\r\n    out[0] = Math.ceil(a[0]);\r\n    out[1] = Math.ceil(a[1]);\r\n    out[2] = Math.ceil(a[2]);\r\n}\r\nexport function v3round(out, a) {\r\n    out[0] = Math.round(a[0]);\r\n    out[1] = Math.round(a[1]);\r\n    out[2] = Math.round(a[2]);\r\n}\r\nexport function v3negate(out, a) {\r\n    out[0] = -a[0];\r\n    out[1] = -a[1];\r\n    out[2] = -a[2];\r\n}\r\nexport function v3angle(a, b) {\r\n    const ax = a[0];\r\n    const ay = a[1];\r\n    const az = a[2];\r\n    const bx = b[0];\r\n    const by = b[1];\r\n    const bz = b[2];\r\n    const cx = ay * bz - az * by;\r\n    const cy = az * bx - ax * bz;\r\n    const cz = ax * by - ay * bx;\r\n    const s = Math.sqrt(cx * cx + cy * cy + cz * cz);\r\n    const c = ax * bx + ay * by + az * bz;\r\n    return Math.atan2(s, c);\r\n}\r\n//# sourceMappingURL=vector-utils.js.map","/**\r\n * @file Dash\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { calculateDirectionArray, calculateCenterArray, replicateArrayEntries, replicateArray3Entries } from '../math/array-utils';\r\nexport function getFixedCountDashData(data, segmentCount = 9) {\r\n    const s = Math.floor(segmentCount / 2);\r\n    const n = data.position1.length / 3;\r\n    const sn = s * n;\r\n    const sn3 = sn * 3;\r\n    const step = 1 / segmentCount;\r\n    const direction = calculateDirectionArray(data.position1, data.position2);\r\n    const position1 = new Float32Array(sn3);\r\n    const position2 = new Float32Array(sn3);\r\n    const v = new Vector3();\r\n    for (let i = 0; i < n; ++i) {\r\n        const i3 = i * 3;\r\n        v.set(direction[i3], direction[i3 + 1], direction[i3 + 2]);\r\n        const x = data.position1[i3];\r\n        const y = data.position1[i3 + 1];\r\n        const z = data.position1[i3 + 2];\r\n        for (let j = 0; j < s; ++j) {\r\n            const j3 = s * i3 + j * 3;\r\n            const f1 = step * (j * 2 + 1);\r\n            const f2 = step * (j * 2 + 2);\r\n            position1[j3] = x + v.x * f1;\r\n            position1[j3 + 1] = y + v.y * f1;\r\n            position1[j3 + 2] = z + v.z * f1;\r\n            position2[j3] = x + v.x * f2;\r\n            position2[j3 + 1] = y + v.y * f2;\r\n            position2[j3 + 2] = z + v.z * f2;\r\n        }\r\n    }\r\n    const position = calculateCenterArray(position1, position2);\r\n    const color = replicateArray3Entries(data.color, s); // TODO\r\n    const color2 = color;\r\n    const d = { position, position1, position2, color, color2 };\r\n    if (data.radius) { // TODO\r\n        d.radius = replicateArrayEntries(data.radius, s); // TODO\r\n    }\r\n    if (data.picking && data.picking.array) {\r\n        data.picking.array = replicateArrayEntries(data.picking.array, s);\r\n        d.picking = data.picking;\r\n    }\r\n    if (data.primitiveId) {\r\n        d.primitiveId = replicateArrayEntries(data.primitiveId, s);\r\n    }\r\n    return d;\r\n}\r\nexport function getFixedLengthDashData(data, segmentLength = 0.1) {\r\n    const direction = calculateDirectionArray(data.position1, data.position2);\r\n    const pos1 = [];\r\n    const pos2 = [];\r\n    const col = [];\r\n    const rad = data.radius ? [] : undefined;\r\n    const pick = data.picking ? [] : undefined;\r\n    const id = data.primitiveId ? [] : undefined;\r\n    const v = new Vector3();\r\n    const n = data.position1.length / 3;\r\n    let k = 0;\r\n    for (let i = 0; i < n; ++i) {\r\n        const i3 = i * 3;\r\n        v.set(direction[i3], direction[i3 + 1], direction[i3 + 2]);\r\n        const vl = v.length();\r\n        const segmentCount = vl / segmentLength;\r\n        const s = Math.floor(segmentCount / 2);\r\n        const step = 1 / segmentCount;\r\n        const x = data.position1[i3];\r\n        const y = data.position1[i3 + 1];\r\n        const z = data.position1[i3 + 2];\r\n        for (let j = 0; j < s; ++j) {\r\n            const j3 = k * 3 + j * 3;\r\n            const f1 = step * (j * 2 + 1);\r\n            const f2 = step * (j * 2 + 2);\r\n            pos1[j3] = x + v.x * f1;\r\n            pos1[j3 + 1] = y + v.y * f1;\r\n            pos1[j3 + 2] = z + v.z * f1;\r\n            pos2[j3] = x + v.x * f2;\r\n            pos2[j3 + 1] = y + v.y * f2;\r\n            pos2[j3 + 2] = z + v.z * f2;\r\n            if (data.color) {\r\n                col[j3] = data.color[i3];\r\n                col[j3 + 1] = data.color[i3 + 1];\r\n                col[j3 + 2] = data.color[i3 + 2];\r\n            }\r\n            if (rad)\r\n                rad[k + j] = data.radius[i];\r\n            if (pick) {\r\n                if (data.picking.array) {\r\n                    pick[k + j] = data.picking.array[i];\r\n                }\r\n                else {\r\n                    pick[k + j] = i;\r\n                }\r\n            }\r\n            if (id)\r\n                id[k + j] = data.primitiveId[i];\r\n        }\r\n        k += s;\r\n    }\r\n    const position1 = new Float32Array(pos1);\r\n    const position2 = new Float32Array(pos2);\r\n    const position = calculateCenterArray(position1, position2);\r\n    const color = new Float32Array(col);\r\n    const color2 = color;\r\n    const d = { position, position1, position2, color, color2 };\r\n    if (rad)\r\n        d.radius = new Float32Array(rad);\r\n    if (pick && data.picking) {\r\n        data.picking.array = new Float32Array(pick);\r\n        d.picking = data.picking;\r\n    }\r\n    if (id)\r\n        d.primitiveId = new Float32Array(id);\r\n    return d;\r\n}\r\nexport function getFixedLengthWrappedDashData(data, segmentLength = 0.1) {\r\n    const direction = calculateDirectionArray(data.position1, data.position2);\r\n    const pos1 = [];\r\n    const pos2 = [];\r\n    const col = [];\r\n    const rad = data.radius ? [] : undefined;\r\n    const pick = data.picking ? [] : undefined;\r\n    const id = data.primitiveId ? [] : undefined;\r\n    const v = new Vector3();\r\n    const n = data.position1.length / 3;\r\n    let remaining = segmentLength;\r\n    let drawing = true;\r\n    let k = 0;\r\n    let k3 = 0;\r\n    let kprev = 0;\r\n    for (let i = 0; i < n; ++i) {\r\n        const i3 = i * 3;\r\n        const x = data.position1[i3];\r\n        const y = data.position1[i3 + 1];\r\n        const z = data.position1[i3 + 2];\r\n        v.set(direction[i3], direction[i3 + 1], direction[i3 + 2]);\r\n        const vl = v.length();\r\n        if (drawing) {\r\n            pos1[k3] = x;\r\n            pos1[k3 + 1] = y;\r\n            pos1[k3 + 2] = z;\r\n        }\r\n        let dist = remaining;\r\n        const inv = 1 / vl;\r\n        while (dist < vl) {\r\n            const a = drawing ? pos2 : pos1;\r\n            a[k3] = x + v.x * dist * inv;\r\n            a[k3 + 1] = y + v.y * dist * inv;\r\n            a[k3 + 2] = z + v.z * dist * inv;\r\n            if (drawing) {\r\n                k++;\r\n                k3 = k * 3;\r\n            }\r\n            drawing = !drawing;\r\n            remaining = segmentLength;\r\n            dist += segmentLength;\r\n        }\r\n        if (drawing) {\r\n            pos2[k3] = data.position2[i3];\r\n            pos2[k3 + 1] = data.position2[i3 + 1];\r\n            pos2[k3 + 2] = data.position2[i3 + 2];\r\n            k++;\r\n            k3 = k * 3;\r\n        }\r\n        remaining = dist - vl;\r\n        for (let j = kprev; j < k; j++) {\r\n            if (data.color) {\r\n                const j3 = j * 3;\r\n                col[j3] = data.color[i3];\r\n                col[j3 + 1] = data.color[i3 + 1];\r\n                col[j3 + 2] = data.color[i3 + 2];\r\n            }\r\n            if (rad)\r\n                rad[j] = data.radius[i];\r\n            if (pick) {\r\n                if (data.picking.array) {\r\n                    pick[j] = data.picking.array[i];\r\n                }\r\n                else {\r\n                    pick[j] = i;\r\n                }\r\n            }\r\n            if (id)\r\n                id[j] = data.primitiveId[i];\r\n        }\r\n        kprev = k;\r\n    }\r\n    if (!drawing && n > 0) {\r\n        const k3 = k * 3;\r\n        pos2[k3] = data.position2[3 * n - 3];\r\n        pos2[k3 + 1] = data.position2[3 * n - 2];\r\n        pos2[k3 + 1] = data.position2[3 * n - 1];\r\n    }\r\n    const position1 = new Float32Array(pos1);\r\n    const position2 = new Float32Array(pos2);\r\n    const position = calculateCenterArray(position1, position2);\r\n    const color = new Float32Array(col);\r\n    const color2 = color;\r\n    const d = { position, position1, position2, color, color2 };\r\n    if (rad)\r\n        d.radius = new Float32Array(rad);\r\n    if (pick && data.picking) {\r\n        data.picking.array = new Float32Array(pick);\r\n        d.picking = data.picking;\r\n    }\r\n    if (id)\r\n        d.primitiveId = new Float32Array(id);\r\n    return d;\r\n}\r\n//# sourceMappingURL=dash.js.map","/**\r\n * @file Primitive\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Color } from 'three';\r\nimport { BufferRegistry, PickerRegistry } from '../globals';\r\nimport { getFixedLengthDashData } from './dash';\r\nfunction addElement(elm, array) {\r\n    if (elm.toArray !== undefined) {\r\n        elm = elm.toArray();\r\n    }\r\n    else if (elm.x !== undefined) {\r\n        elm = [elm.x, elm.y, elm.z];\r\n    }\r\n    else if (elm.r !== undefined) {\r\n        elm = [elm.r, elm.g, elm.b];\r\n    }\r\n    array.push.apply(array, elm);\r\n}\r\nconst tmpVec = new Vector3();\r\n/**\r\n * Base class for geometry primitives\r\n * @interface\r\n */\r\nexport class Primitive {\r\n    static get Picker() { return PickerRegistry.get(this.type); }\r\n    static get Buffer() { return BufferRegistry.get(this.type); }\r\n    static getShapeKey(name) {\r\n        return this.type + name[0].toUpperCase() + name.substr(1);\r\n    }\r\n    static expandBoundingBox(box, data) { }\r\n    static valueToShape(shape, name, value) {\r\n        const data = shape._primitiveData[this.getShapeKey(name)];\r\n        const type = this.fields[name];\r\n        switch (type) {\r\n            case 'v3':\r\n            case 'c':\r\n                addElement(value, data);\r\n                break;\r\n            default:\r\n                data.push(value);\r\n        }\r\n    }\r\n    static objectToShape(shape, data) {\r\n        Object.keys(this.fields).forEach(name => {\r\n            this.valueToShape(shape, name, data[name]);\r\n        });\r\n        this.valueToShape(shape, 'name', data.name);\r\n        this.expandBoundingBox(shape.boundingBox, data);\r\n    }\r\n    static valueFromShape(shape, pid, name) {\r\n        const data = shape._primitiveData[this.getShapeKey(name)];\r\n        const type = this.fields[name];\r\n        switch (type) {\r\n            case 'v3':\r\n                return new Vector3().fromArray(data, 3 * pid);\r\n            case 'c':\r\n                return new Color().fromArray(data, 3 * pid);\r\n            default:\r\n                return data[pid];\r\n        }\r\n    }\r\n    static objectFromShape(shape, pid) {\r\n        let name = this.valueFromShape(shape, pid, 'name');\r\n        if (name === undefined) {\r\n            name = `${this.type}: ${pid} (${shape.name})`;\r\n        }\r\n        const o = { shape, name };\r\n        Object.keys(this.fields).forEach(name => {\r\n            o[name] = this.valueFromShape(shape, pid, name);\r\n        });\r\n        return o;\r\n    }\r\n    static arrayFromShape(shape, name) {\r\n        const data = shape._primitiveData[this.getShapeKey(name)];\r\n        const type = this.fields[name];\r\n        switch (type) {\r\n            case 's':\r\n                return data;\r\n            default:\r\n                return new Float32Array(data);\r\n        }\r\n    }\r\n    static dataFromShape(shape) {\r\n        const data = {};\r\n        if (this.Picker) {\r\n            data.picking = new this.Picker(shape);\r\n        }\r\n        Object.keys(this.fields).forEach(name => {\r\n            data[name] = this.arrayFromShape(shape, name);\r\n        });\r\n        return data;\r\n    }\r\n    static bufferFromShape(shape, params) {\r\n        return new this.Buffer(this.dataFromShape(shape), params);\r\n    }\r\n}\r\nPrimitive.type = '';\r\nPrimitive.fields = {};\r\n/**\r\n * Sphere geometry primitive\r\n */\r\nexport class SpherePrimitive extends Primitive {\r\n    static positionFromShape(shape, pid) {\r\n        return this.valueFromShape(shape, pid, 'position');\r\n    }\r\n    static expandBoundingBox(box, data) {\r\n        box.expandByPoint(tmpVec.fromArray(data.position));\r\n    }\r\n}\r\nSpherePrimitive.type = 'sphere';\r\nSpherePrimitive.fields = {\r\n    position: 'v3',\r\n    color: 'c',\r\n    radius: 'f'\r\n};\r\n/**\r\n * Box geometry primitive\r\n */\r\nexport class BoxPrimitive extends Primitive {\r\n    static positionFromShape(shape, pid) {\r\n        return this.valueFromShape(shape, pid, 'position');\r\n    }\r\n    static expandBoundingBox(box, data) {\r\n        box.expandByPoint(tmpVec.fromArray(data.position));\r\n    }\r\n}\r\nBoxPrimitive.type = 'box';\r\nBoxPrimitive.fields = {\r\n    position: 'v3',\r\n    color: 'c',\r\n    size: 'f',\r\n    heightAxis: 'v3',\r\n    depthAxis: 'v3'\r\n};\r\n/**\r\n * Octahedron geometry primitive\r\n */\r\nexport class OctahedronPrimitive extends BoxPrimitive {\r\n}\r\nOctahedronPrimitive.type = 'octahedron';\r\n/**\r\n * Tetrahedron geometry primitive\r\n */\r\nexport class TetrahedronPrimitive extends BoxPrimitive {\r\n}\r\nTetrahedronPrimitive.type = 'tetrahedron';\r\n/**\r\n * Cylinder geometry primitive\r\n */\r\nexport class CylinderPrimitive extends Primitive {\r\n    static positionFromShape(shape, pid) {\r\n        const p1 = this.valueFromShape(shape, pid, 'position1');\r\n        const p2 = this.valueFromShape(shape, pid, 'position2');\r\n        return p1.add(p2).multiplyScalar(0.5);\r\n    }\r\n    static expandBoundingBox(box, data) {\r\n        box.expandByPoint(tmpVec.fromArray(data.position1));\r\n        box.expandByPoint(tmpVec.fromArray(data.position2));\r\n    }\r\n    static bufferFromShape(shape, params = {}) {\r\n        let data = this.dataFromShape(shape);\r\n        if (this.type === 'cylinder' && params.dashedCylinder) {\r\n            data = getFixedLengthDashData(data);\r\n        }\r\n        return new this.Buffer(data, params);\r\n    }\r\n}\r\nCylinderPrimitive.type = 'cylinder';\r\nCylinderPrimitive.fields = {\r\n    position1: 'v3',\r\n    position2: 'v3',\r\n    color: 'c',\r\n    radius: 'f'\r\n};\r\n/**\r\n * Arrow geometry primitive\r\n */\r\nexport class ArrowPrimitive extends CylinderPrimitive {\r\n}\r\nArrowPrimitive.type = 'arrow';\r\n/**\r\n * Cone geometry primitive\r\n */\r\nexport class ConePrimitive extends CylinderPrimitive {\r\n}\r\nConePrimitive.type = 'cone';\r\n/**\r\n * Ellipsoid geometry primitive\r\n */\r\nexport class EllipsoidPrimitive extends SpherePrimitive {\r\n}\r\nEllipsoidPrimitive.type = 'ellipsoid';\r\nEllipsoidPrimitive.fields = {\r\n    position: 'v3',\r\n    color: 'c',\r\n    radius: 'f',\r\n    majorAxis: 'v3',\r\n    minorAxis: 'v3'\r\n};\r\n/**\r\n * Torus geometry primitive\r\n */\r\nexport class TorusPrimitive extends EllipsoidPrimitive {\r\n}\r\nTorusPrimitive.type = 'torus';\r\n/**\r\n * Text geometry primitive\r\n */\r\nexport class TextPrimitive extends Primitive {\r\n    static positionFromShape(shape, pid) {\r\n        return this.valueFromShape(shape, pid, 'position');\r\n    }\r\n    static expandBoundingBox(box, data) {\r\n        box.expandByPoint(tmpVec.fromArray(data.position));\r\n    }\r\n}\r\nTextPrimitive.type = 'text';\r\nTextPrimitive.fields = {\r\n    position: 'v3',\r\n    color: 'c',\r\n    size: 'f',\r\n    text: 's'\r\n};\r\n/**\r\n * Point primitive\r\n */\r\nexport class PointPrimitive extends Primitive {\r\n    static positionFromShape(shape, pid) {\r\n        return this.valueFromShape(shape, pid, 'position');\r\n    }\r\n    static expandBoundingBox(box, data) {\r\n        box.expandByPoint(tmpVec.fromArray(data.position));\r\n    }\r\n}\r\nPointPrimitive.type = 'point';\r\nPointPrimitive.fields = {\r\n    position: 'v3',\r\n    color: 'c',\r\n};\r\n/**\r\n * Wideline geometry primitive\r\n */\r\nexport class WidelinePrimitive extends Primitive {\r\n    static positionFromShape(shape, pid) {\r\n        const p1 = this.valueFromShape(shape, pid, 'position1');\r\n        const p2 = this.valueFromShape(shape, pid, 'position2');\r\n        return p1.add(p2).multiplyScalar(0.5);\r\n    }\r\n    static expandBoundingBox(box, data) {\r\n        box.expandByPoint(tmpVec.fromArray(data.position1));\r\n        box.expandByPoint(tmpVec.fromArray(data.position2));\r\n    }\r\n}\r\nWidelinePrimitive.type = 'wideline';\r\nWidelinePrimitive.fields = {\r\n    position1: 'v3',\r\n    position2: 'v3',\r\n    color: 'c'\r\n};\r\n//# sourceMappingURL=primitive.js.map","/**\r\n * @file Spatial Hash\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Box3 } from 'three';\r\nfunction createBoundingBox(positions) {\r\n    const { x, y, z } = positions;\r\n    const boundingBox = new Box3();\r\n    const count = x.length;\r\n    const { min, max } = boundingBox;\r\n    for (let i = 0; i < count; i++) {\r\n        min.x = Math.min(x[i], min.x);\r\n        min.y = Math.min(y[i], min.y);\r\n        min.z = Math.min(z[i], min.z);\r\n        max.x = Math.max(x[i], max.x);\r\n        max.y = Math.max(y[i], max.y);\r\n        max.z = Math.max(z[i], max.z);\r\n    }\r\n    return boundingBox;\r\n}\r\nexport default class SpatialHash {\r\n    constructor(positions, boundingBox) {\r\n        this.exp = 3;\r\n        const bb = boundingBox || createBoundingBox(positions);\r\n        this.minX = bb.min.x;\r\n        this.minY = bb.min.y;\r\n        this.minZ = bb.min.z;\r\n        this.boundX = ((bb.max.x - this.minX) >> this.exp) + 1;\r\n        this.boundY = ((bb.max.y - this.minY) >> this.exp) + 1;\r\n        this.boundZ = ((bb.max.z - this.minZ) >> this.exp) + 1;\r\n        const n = this.boundX * this.boundY * this.boundZ;\r\n        const an = (positions.count !== undefined) ? positions.count : positions.x.length;\r\n        const xArray = positions.x;\r\n        const yArray = positions.y;\r\n        const zArray = positions.z;\r\n        let count = 0;\r\n        const grid = new Uint32Array(n);\r\n        const bucketIndex = new Int32Array(an);\r\n        for (let i = 0; i < an; ++i) {\r\n            const x = (xArray[i] - this.minX) >> this.exp;\r\n            const y = (yArray[i] - this.minY) >> this.exp;\r\n            const z = (zArray[i] - this.minZ) >> this.exp;\r\n            const idx = (((x * this.boundY) + y) * this.boundZ) + z;\r\n            if ((grid[idx] += 1) === 1) {\r\n                count += 1;\r\n            }\r\n            bucketIndex[i] = idx;\r\n        }\r\n        const bucketCount = new Uint16Array(count);\r\n        for (let i = 0, j = 0; i < n; ++i) {\r\n            const c = grid[i];\r\n            if (c > 0) {\r\n                grid[i] = j + 1;\r\n                bucketCount[j] = c;\r\n                j += 1;\r\n            }\r\n        }\r\n        const bucketOffset = new Uint32Array(count);\r\n        for (let i = 1; i < count; ++i) {\r\n            bucketOffset[i] += bucketOffset[i - 1] + bucketCount[i - 1];\r\n        }\r\n        const bucketFill = new Uint16Array(count);\r\n        const bucketArray = new Int32Array(an);\r\n        for (let i = 0; i < an; ++i) {\r\n            const bucketIdx = grid[bucketIndex[i]];\r\n            if (bucketIdx > 0) {\r\n                const k = bucketIdx - 1;\r\n                bucketArray[bucketOffset[k] + bucketFill[k]] = i;\r\n                bucketFill[k] += 1;\r\n            }\r\n        }\r\n        this.grid = grid;\r\n        this.bucketCount = bucketCount;\r\n        this.bucketOffset = bucketOffset;\r\n        this.bucketArray = bucketArray;\r\n        this.xArray = xArray;\r\n        this.yArray = yArray;\r\n        this.zArray = zArray;\r\n    }\r\n    within(x, y, z, r) {\r\n        const result = [];\r\n        this.eachWithin(x, y, z, r, atomIndex => result.push(atomIndex));\r\n        return result;\r\n    }\r\n    eachWithin(x, y, z, r, callback) {\r\n        const rSq = r * r;\r\n        const loX = Math.max(0, (x - r - this.minX) >> this.exp);\r\n        const loY = Math.max(0, (y - r - this.minY) >> this.exp);\r\n        const loZ = Math.max(0, (z - r - this.minZ) >> this.exp);\r\n        const hiX = Math.min(this.boundX, ((x + r - this.minX) >> this.exp) + 1);\r\n        const hiY = Math.min(this.boundY, ((y + r - this.minY) >> this.exp) + 1);\r\n        const hiZ = Math.min(this.boundZ, ((z + r - this.minZ) >> this.exp) + 1);\r\n        for (let ix = loX; ix < hiX; ++ix) {\r\n            for (let iy = loY; iy < hiY; ++iy) {\r\n                for (let iz = loZ; iz < hiZ; ++iz) {\r\n                    const idx = (((ix * this.boundY) + iy) * this.boundZ) + iz;\r\n                    const bucketIdx = this.grid[idx];\r\n                    if (bucketIdx > 0) {\r\n                        const k = bucketIdx - 1;\r\n                        const offset = this.bucketOffset[k];\r\n                        const count = this.bucketCount[k];\r\n                        const end = offset + count;\r\n                        for (let i = offset; i < end; ++i) {\r\n                            const atomIndex = this.bucketArray[i];\r\n                            const dx = this.xArray[atomIndex] - x;\r\n                            const dy = this.yArray[atomIndex] - y;\r\n                            const dz = this.zArray[atomIndex] - z;\r\n                            const dSq = dx * dx + dy * dy + dz * dz;\r\n                            if (dSq <= rSq)\r\n                                callback(atomIndex, dSq);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=spatial-hash.js.map","/**\r\n * @file Store\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Log } from '../globals';\r\nimport { getTypedArray } from '../utils';\r\n/**\r\n * Store base class\r\n * @interface\r\n */\r\nexport default class Store {\r\n    /**\r\n     * @param {Integer} [size] - initial size\r\n     */\r\n    constructor(size = 0) {\r\n        this._fields = this._defaultFields;\r\n        this._init(0);\r\n    }\r\n    /**\r\n     * Initialize the store\r\n     * @param  {Integer} size - size to initialize\r\n     * @return {undefined}\r\n     */\r\n    _init(size) {\r\n        this.length = size;\r\n        this.count = 0;\r\n        for (let i = 0, il = this._fields.length; i < il; ++i) {\r\n            const [name, size, type] = this._fields[i];\r\n            this._initField(name, size, type);\r\n        }\r\n    }\r\n    /**\r\n     * Initialize a field\r\n     * @param  {String} name - field name\r\n     * @param  {Integer} size - element size\r\n     * @param  {String} type - data type, one of int8, int16, int32,\r\n     *                         uint8, uint16, uint32, float32\r\n     * @return {undefined}\r\n     */\r\n    _initField(name, size, type) {\r\n        this[name] = getTypedArray(type, this.length * size);\r\n    }\r\n    /**\r\n     * Add a field\r\n     * @param  {String} name - field name\r\n     * @param  {Integer} size - element size\r\n     * @param  {String} type - data type, one of int8, int16, int32,\r\n     *                         uint8, uint16, uint32, float32\r\n     * @return {undefined}\r\n     */\r\n    addField(name, size, type) {\r\n        this._fields.push([name, size, type]);\r\n        this._initField(name, size, type);\r\n    }\r\n    /**\r\n     * Resize the store to the new size\r\n     * @param  {Integer} size - new size\r\n     * @return {undefined}\r\n     */\r\n    resize(size) {\r\n        // Log.time( \"Store.resize\" );\r\n        this.length = Math.round(size || 0);\r\n        this.count = Math.min(this.count, this.length);\r\n        for (let i = 0, il = this._fields.length; i < il; ++i) {\r\n            const name = this._fields[i][0];\r\n            const itemSize = this._fields[i][1];\r\n            const arraySize = this.length * itemSize;\r\n            const tmpArray = new this[name].constructor(arraySize);\r\n            if (this[name].length > arraySize) {\r\n                tmpArray.set(this[name].subarray(0, arraySize));\r\n            }\r\n            else {\r\n                tmpArray.set(this[name]);\r\n            }\r\n            this[name] = tmpArray;\r\n        }\r\n        // Log.timeEnd( \"Store.resize\" );\r\n    }\r\n    /**\r\n     * Resize the store to 1.5 times its current size if full\r\n     * @return {undefined}\r\n     */\r\n    growIfFull() {\r\n        if (this.count >= this.length) {\r\n            const size = Math.round(this.length * 1.5);\r\n            this.resize(Math.max(256, size));\r\n        }\r\n    }\r\n    /**\r\n     * Copy data from one store to another\r\n     * @param  {Store} other - store to copy from\r\n     * @param  {Integer} thisOffset - offset to start copying to\r\n     * @param  {Integer} otherOffset - offset to start copying from\r\n     * @param  {Integer} length - number of entries to copy\r\n     * @return {undefined}\r\n     */\r\n    copyFrom(other, thisOffset, otherOffset, length) {\r\n        for (let i = 0, il = this._fields.length; i < il; ++i) {\r\n            const name = this._fields[i][0];\r\n            const itemSize = this._fields[i][1];\r\n            const thisField = this[name];\r\n            const otherField = other[name];\r\n            for (let j = 0; j < length; ++j) {\r\n                const thisIndex = itemSize * (thisOffset + j);\r\n                const otherIndex = itemSize * (otherOffset + j);\r\n                for (let k = 0; k < itemSize; ++k) {\r\n                    thisField[thisIndex + k] = otherField[otherIndex + k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Copy data within this store\r\n     * @param  {Integer} thisOffset - offset to start copying to\r\n     * @param  {Integer} otherOffset - offset to start copying from\r\n     * @param  {Integer} length - number of entries to copy\r\n     * @return {undefined}\r\n     */\r\n    copyWithin(offsetTarget, offsetSource, length) {\r\n        for (let i = 0, il = this._fields.length; i < il; ++i) {\r\n            const name = this._fields[i][0];\r\n            const itemSize = this._fields[i][1];\r\n            const thisField = this[name];\r\n            for (let j = 0; j < length; ++j) {\r\n                const targetIndex = itemSize * (offsetTarget + j);\r\n                const sourceIndex = itemSize * (offsetSource + j);\r\n                for (let k = 0; k < itemSize; ++k) {\r\n                    thisField[targetIndex + k] = thisField[sourceIndex + k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Sort entries in the store given the compare function\r\n     * @param  {[type]} compareFunction - function to sort by\r\n     * @return {undefined}\r\n     */\r\n    sort(compareFunction) {\r\n        Log.time('Store.sort');\r\n        const thisStore = this;\r\n        const tmpStore = new this.constructor(1);\r\n        function swap(index1, index2) {\r\n            if (index1 === index2)\r\n                return;\r\n            tmpStore.copyFrom(thisStore, 0, index1, 1);\r\n            thisStore.copyWithin(index1, index2, 1);\r\n            thisStore.copyFrom(tmpStore, index2, 0, 1);\r\n        }\r\n        function quicksort(left, right) {\r\n            if (left < right) {\r\n                let pivot = Math.floor((left + right) / 2);\r\n                let leftNew = left;\r\n                let rightNew = right;\r\n                do {\r\n                    while (compareFunction(leftNew, pivot) < 0) {\r\n                        leftNew += 1;\r\n                    }\r\n                    while (compareFunction(rightNew, pivot) > 0) {\r\n                        rightNew -= 1;\r\n                    }\r\n                    if (leftNew <= rightNew) {\r\n                        if (leftNew === pivot) {\r\n                            pivot = rightNew;\r\n                        }\r\n                        else if (rightNew === pivot) {\r\n                            pivot = leftNew;\r\n                        }\r\n                        swap(leftNew, rightNew);\r\n                        leftNew += 1;\r\n                        rightNew -= 1;\r\n                    }\r\n                } while (leftNew <= rightNew);\r\n                quicksort(left, rightNew);\r\n                quicksort(leftNew, right);\r\n            }\r\n        }\r\n        quicksort(0, this.count - 1);\r\n        Log.timeEnd('Store.sort');\r\n    }\r\n    /**\r\n     * Empty the store\r\n     * @return {undefined}\r\n     */\r\n    clear() {\r\n        this.count = 0;\r\n    }\r\n    /**\r\n     * Dispose of the store entries and fields\r\n     * @return {undefined}\r\n     */\r\n    dispose() {\r\n        delete this.length;\r\n        delete this.count;\r\n        for (let i = 0, il = this._fields.length; i < il; ++i) {\r\n            const name = this._fields[i][0];\r\n            delete this[name];\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=store.js.map","/**\r\n * @file Contact Store\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Store from './store';\r\n/**\r\n * Bond store\r\n */\r\nexport default class ContactStore extends Store {\r\n    get _defaultFields() {\r\n        return [\r\n            ['index1', 1, 'int32'],\r\n            ['index2', 1, 'int32'],\r\n            ['type', 1, 'int8']\r\n        ];\r\n    }\r\n    addContact(index1, index2, type) {\r\n        this.growIfFull();\r\n        const i = this.count;\r\n        if (index1 < index2) {\r\n            this.index1[i] = index1;\r\n            this.index2[i] = index2;\r\n        }\r\n        else {\r\n            this.index2[i] = index1;\r\n            this.index1[i] = index2;\r\n        }\r\n        if (type)\r\n            this.type[i] = type;\r\n        this.count += 1;\r\n    }\r\n}\r\n//# sourceMappingURL=contact-store.js.map","/**\r\n * @file Bit array\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @author Paul Pillot <paulpillot@gmail.com>\r\n * @private\r\n */\r\n/**\r\n * Compute the Hamming weight of a 32-bit unsigned integer\r\n * @param  {Integer} v - a 32-bit unsigned integer\r\n * @return {Integer} the Hamming weight\r\n */\r\nfunction hammingWeight(v) {\r\n    // works with signed or unsigned shifts\r\n    v -= ((v >>> 1) & 0x55555555);\r\n    v = (v & 0x33333333) + ((v >>> 2) & 0x33333333);\r\n    return ((v + (v >>> 4) & 0xF0F0F0F) * 0x1010101) >>> 24;\r\n}\r\n/**\r\n * Bit array\r\n *\r\n * Based heavily on https://github.com/lemire/FastBitSet.js\r\n * which is licensed under the Apache License, Version 2.0.\r\n */\r\nexport default class BitArray {\r\n    /**\r\n     * @param  {Integer} length - array length\r\n     * @param  {Boolean} [setAll] - initialize with true\r\n     */\r\n    constructor(length, setAll) {\r\n        this.length = length;\r\n        this._words = new Uint32Array((length + 32) >>> 5);\r\n        if (setAll === true) {\r\n            this.setAll();\r\n        }\r\n    }\r\n    /**\r\n     * Get value at index\r\n     * @param  {Integer} index - the index\r\n     * @return {Boolean} value\r\n     */\r\n    get(index) {\r\n        return (this._words[index >>> 5] & (1 << index)) !== 0;\r\n    }\r\n    /**\r\n     * Set value at index to true\r\n     * @param  {Integer} index - the index\r\n     * @return {undefined}\r\n     */\r\n    set(index) {\r\n        this._words[index >>> 5] |= 1 << index;\r\n    }\r\n    /**\r\n     * Set value at index to false\r\n     * @param  {Integer} index - the index\r\n     * @return {undefined}\r\n     */\r\n    clear(index) {\r\n        this._words[index >>> 5] &= ~(1 << index);\r\n    }\r\n    /**\r\n     * Flip value at index\r\n     * @param  {Integer} index - the index\r\n     * @return {undefined}\r\n     */\r\n    flip(index) {\r\n        this._words[index >>> 5] ^= 1 << index;\r\n    }\r\n    _assignRange(start, end, value) {\r\n        if (end < start)\r\n            return;\r\n        const words = this._words;\r\n        const wordValue = value === true ? 0xFFFFFFFF : 0;\r\n        const wordStart = start >>> 5;\r\n        const wordEnd = end >>> 5;\r\n        // set complete words when applicable\r\n        for (let k = wordStart; k < wordEnd; ++k) {\r\n            words[k] = wordValue;\r\n        }\r\n        // set parts of the range not spanning complete words\r\n        const startWord = wordStart << 5;\r\n        const endWord = wordEnd << 5;\r\n        if (value === true) {\r\n            if (end - start < 32) {\r\n                for (let i = start, n = end + 1; i < n; ++i) {\r\n                    words[i >>> 5] |= 1 << i;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = start, n = startWord; i < n; ++i) {\r\n                    words[i >>> 5] |= 1 << i;\r\n                }\r\n                for (let i = endWord, n = end + 1; i < n; ++i) {\r\n                    words[i >>> 5] |= 1 << i;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (end - start < 32) {\r\n                for (let i = start, n = end + 1; i < n; ++i) {\r\n                    words[i >>> 5] &= ~(1 << i);\r\n                }\r\n            }\r\n            else {\r\n                for (let i = start, n = startWord; i < n; ++i) {\r\n                    words[i >>> 5] &= ~(1 << i);\r\n                }\r\n                for (let i = endWord, n = end + 1; i < n; ++i) {\r\n                    words[i >>> 5] &= ~(1 << i);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Set bits of the given range\r\n     * @param {Integer} start - start index\r\n     * @param {Integer} end - end index\r\n     * @return {BitArray} this object\r\n     */\r\n    setRange(start, end) {\r\n        return this._assignRange(start, end, true);\r\n    }\r\n    /**\r\n     * Clear bits of the given range\r\n     * @param {Integer} start - start index\r\n     * @param {Integer} end - end index\r\n     * @return {BitArray} this object\r\n     */\r\n    clearRange(start, end) {\r\n        return this._assignRange(start, end, false);\r\n    }\r\n    /**\r\n     * Set bits at all given indices\r\n     * @param {...Integer} arguments - indices\r\n     * @return {Boolean} this object\r\n     */\r\n    setBits(...indices) {\r\n        const words = this._words;\r\n        const n = indices.length;\r\n        for (let i = 0; i < n; ++i) {\r\n            const index = indices[i];\r\n            words[index >>> 5] |= 1 << index;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Clear bits at all given indices\r\n     * @param {...Integer} arguments - indices\r\n     * @return {Boolean} this object\r\n     */\r\n    clearBits(...indices) {\r\n        const words = this._words;\r\n        const n = indices.length;\r\n        for (let i = 0; i < n; ++i) {\r\n            const index = indices[i];\r\n            words[index >>> 5] &= ~(1 << index);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Set all bits of the array\r\n     * @return {BitArray} this object\r\n     */\r\n    setAll() {\r\n        return this._assignRange(0, this.length - 1, true);\r\n    }\r\n    /**\r\n     * Clear all bits of the array\r\n     * @return {BitArray} this object\r\n     */\r\n    clearAll() {\r\n        return this._assignRange(0, this.length - 1, false);\r\n    }\r\n    /**\r\n     * Flip all the values in the array\r\n     * @return {BitArray} this object\r\n     */\r\n    flipAll() {\r\n        const count = this._words.length;\r\n        const words = this._words;\r\n        const bs = 32 - this.length % 32;\r\n        for (let k = 0; k < count - 1; ++k) {\r\n            words[k] = ~words[k];\r\n        }\r\n        words[count - 1] = (~(words[count - 1] << bs)) >>> bs;\r\n        return this;\r\n    }\r\n    _isRangeValue(start, end, value) {\r\n        if (end < start)\r\n            return;\r\n        const words = this._words;\r\n        const wordValue = value === true ? 0xFFFFFFFF : 0;\r\n        const wordStart = start >>> 5;\r\n        const wordEnd = end >>> 5;\r\n        // set complete words when applicable\r\n        for (let k = wordStart; k < wordEnd; ++k) {\r\n            if (words[k] !== wordValue)\r\n                return false;\r\n        }\r\n        // set parts of the range not spanning complete words\r\n        if (end - start < 32) {\r\n            for (let i = start, n = end + 1; i < n; ++i) {\r\n                if (!!(words[i >>> 5] & (1 << i)) !== value)\r\n                    return false;\r\n            }\r\n        }\r\n        else {\r\n            const startWord = wordStart << 5;\r\n            const endWord = wordEnd << 5;\r\n            for (let i = start, n = startWord << 5; i < n; ++i) {\r\n                if (!!(words[i >>> 5] & (1 << i)) !== value)\r\n                    return false;\r\n            }\r\n            for (let i = endWord, n = end + 1; i < n; ++i) {\r\n                if (!!(words[i >>> 5] & (1 << i)) !== value)\r\n                    return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Test if bits in given range are set\r\n     * @param {Integer} start - start index\r\n     * @param {Integer} end - end index\r\n     * @return {BitArray} this object\r\n     */\r\n    isRangeSet(start, end) {\r\n        return this._isRangeValue(start, end, true);\r\n    }\r\n    /**\r\n     * Test if bits in given range are clear\r\n     * @param {Integer} start - start index\r\n     * @param {Integer} end - end index\r\n     * @return {BitArray} this object\r\n     */\r\n    isRangeClear(start, end) {\r\n        return this._isRangeValue(start, end, false);\r\n    }\r\n    /**\r\n     * Test if all bits in the array are set\r\n     * @return {Boolean} test result\r\n     */\r\n    isAllSet() {\r\n        return this._isRangeValue(0, this.length - 1, true);\r\n    }\r\n    /**\r\n     * Test if all bits in the array are clear\r\n     * @return {Boolean} test result\r\n     */\r\n    isAllClear() {\r\n        return this._isRangeValue(0, this.length - 1, false);\r\n    }\r\n    /**\r\n     * Test if bits at all given indices are set\r\n     * @param {...Integer} arguments - indices\r\n     * @return {Boolean} test result\r\n     */\r\n    isSet(...indices) {\r\n        const words = this._words;\r\n        const n = indices.length;\r\n        for (let i = 0; i < n; ++i) {\r\n            const index = indices[i];\r\n            if ((words[index >>> 5] & (1 << index)) === 0)\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Test if bits at all given indices are clear\r\n     * @param {...Integer} arguments - indices\r\n     * @return {Boolean} test result\r\n     */\r\n    isClear(...indices) {\r\n        const words = this._words;\r\n        const n = indices.length;\r\n        for (let i = 0; i < n; ++i) {\r\n            const index = indices[i];\r\n            if ((words[index >>> 5] & (1 << index)) !== 0)\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Test if two BitArrays are identical in all their values\r\n     * @param {BitArray} otherBitarray - the other BitArray\r\n     * @return {Boolean} test result\r\n     */\r\n    isEqualTo(otherBitarray) {\r\n        const words1 = this._words;\r\n        const words2 = otherBitarray._words;\r\n        const count = Math.min(words1.length, words2.length);\r\n        for (let k = 0; k < count; ++k) {\r\n            if (words1[k] !== words2[k]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * How many set bits?\r\n     * @return {Integer} number of set bits\r\n     */\r\n    getSize() {\r\n        const count = this._words.length;\r\n        const words = this._words;\r\n        let size = 0;\r\n        for (let i = 0; i < count; ++i) {\r\n            size += hammingWeight(words[i]);\r\n        }\r\n        return size;\r\n    }\r\n    /**\r\n     * Calculate difference betwen this and another bit array.\r\n     * Store result in this object.\r\n     * @param  {BitArray} otherBitarray - the other bit array\r\n     * @return {BitArray} this object\r\n     */\r\n    difference(otherBitarray) {\r\n        const words1 = this._words;\r\n        const words2 = otherBitarray._words;\r\n        const count = Math.min(words1.length, words2.length);\r\n        for (let k = 0; k < count; ++k) {\r\n            words1[k] = words1[k] & ~words2[k];\r\n        }\r\n        for (let k = words1.length; k < count; ++k) {\r\n            words1[k] = 0;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Calculate union betwen this and another bit array.\r\n     * Store result in this object.\r\n     * @param  {BitArray} otherBitarray - the other bit array\r\n     * @return {BitArray} this object\r\n     */\r\n    union(otherBitarray) {\r\n        const words1 = this._words;\r\n        const words2 = otherBitarray._words;\r\n        const count = Math.min(words1.length, words2.length);\r\n        for (let k = 0; k < count; ++k) {\r\n            words1[k] |= words2[k];\r\n        }\r\n        for (let k = words1.length; k < count; ++k) {\r\n            words1[k] = 0;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Calculate intersection betwen this and another bit array.\r\n     * Store result in this object.\r\n     * @param  {BitArray} otherBitarray - the other bit array\r\n     * @return {BitArray} this object\r\n     */\r\n    intersection(otherBitarray) {\r\n        const words1 = this._words;\r\n        const words2 = otherBitarray._words;\r\n        const count = Math.min(words1.length, words2.length);\r\n        for (let k = 0; k < count; ++k) {\r\n            words1[k] &= words2[k];\r\n        }\r\n        for (let k = words1.length; k < count; ++k) {\r\n            words1[k] = 0;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Test if there is any intersection betwen this and another bit array.\r\n     * @param  {BitArray} otherBitarray - the other bit array\r\n     * @return {Boolean} test result\r\n     */\r\n    intersects(otherBitarray) {\r\n        const words1 = this._words;\r\n        const words2 = otherBitarray._words;\r\n        const count = Math.min(words1.length, words2.length);\r\n        for (let k = 0; k < count; ++k) {\r\n            if ((words1[k] & words2[k]) !== 0) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Calculate the number of bits in common betwen this and another bit array.\r\n     * @param  {BitArray} otherBitarray - the other bit array\r\n     * @return {Integer} size\r\n     */\r\n    getIntersectionSize(otherBitarray) {\r\n        const words1 = this._words;\r\n        const words2 = otherBitarray._words;\r\n        const count = Math.min(words1.length, words2.length);\r\n        let size = 0;\r\n        for (let k = 0; k < count; ++k) {\r\n            size += hammingWeight(words1[k] & words2[k]);\r\n        }\r\n        return size;\r\n    }\r\n    /**\r\n     * Calculate intersection betwen this and another bit array.\r\n     * Store result in a new bit array.\r\n     * @param  {BitArray} otherBitarray - the other bit array\r\n     * @return {BitArray} the new bit array\r\n     */\r\n    makeIntersection(otherBitarray) {\r\n        const words1 = this._words;\r\n        const words2 = otherBitarray._words;\r\n        const count = Math.min(words1.length, words2.length);\r\n        const wordsA = new Uint32Array(count);\r\n        const intersection = Object.create(BitArray.prototype);\r\n        intersection._words = wordsA;\r\n        intersection.length = Math.min(this.length, otherBitarray.length);\r\n        for (let k = 0; k < count; ++k) {\r\n            wordsA[k] = words1[k] & words2[k];\r\n        }\r\n        return intersection;\r\n    }\r\n    /**\r\n     * Iterate over all set bits in the array\r\n     * @param  {function( index: Integer, i: Integer )} callback - the callback\r\n     * @return {undefined}\r\n     */\r\n    forEach(callback) {\r\n        const count = this._words.length;\r\n        const words = this._words;\r\n        let i = 0;\r\n        for (let k = 0; k < count; ++k) {\r\n            let w = words[k];\r\n            while (w !== 0) {\r\n                const t = w & -w;\r\n                const index = (k << 5) + hammingWeight(t - 1);\r\n                callback(index, i);\r\n                w ^= t;\r\n                ++i;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Get an array with the set bits\r\n     * @return {Array} bit indices\r\n     */\r\n    toArray() {\r\n        const words = this._words;\r\n        const answer = new Array(this.getSize());\r\n        const count = this._words.length;\r\n        let pos = 0;\r\n        for (let k = 0; k < count; ++k) {\r\n            let w = words[k];\r\n            while (w !== 0) {\r\n                const t = w & -w;\r\n                answer[pos++] = (k << 5) + hammingWeight(t - 1);\r\n                w ^= t;\r\n            }\r\n        }\r\n        return answer;\r\n    }\r\n    toString() {\r\n        return '{' + this.toArray().join(',') + '}';\r\n    }\r\n    toSeleString() {\r\n        const sele = this.toArray().join(',');\r\n        return sele ? '@' + sele : 'NONE';\r\n    }\r\n    /**\r\n     * Clone this object\r\n     * @return {BitArray} the cloned object\r\n     */\r\n    clone() {\r\n        const clone = Object.create(BitArray.prototype);\r\n        clone.length = this.length;\r\n        clone._words = new Uint32Array(this._words);\r\n        return clone;\r\n    }\r\n}\r\n//# sourceMappingURL=bitarray.js.map","/**\r\n * @file Adjacency List\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nexport function createAdjacencyList(edges) {\r\n    const { edgeCount, nodeCount, nodeArray1, nodeArray2 } = edges;\r\n    const countArray = new Uint8Array(nodeCount);\r\n    const offsetArray = new Int32Array(nodeCount);\r\n    // count edges per node\r\n    for (let i = 0; i < edgeCount; ++i) {\r\n        countArray[nodeArray1[i]] += 1;\r\n        countArray[nodeArray2[i]] += 1;\r\n    }\r\n    // get offsets to node edges\r\n    for (let i = 1; i < nodeCount; ++i) {\r\n        offsetArray[i] += offsetArray[i - 1] + countArray[i - 1];\r\n    }\r\n    // prepare index array\r\n    const bondCount2 = edgeCount * 2;\r\n    const indexArray = new Int32Array(bondCount2);\r\n    for (let j = 0; j < bondCount2; ++j) {\r\n        indexArray[j] = -1;\r\n    }\r\n    // build index array\r\n    for (let i = 0; i < edgeCount; ++i) {\r\n        const idx1 = nodeArray1[i];\r\n        const idx2 = nodeArray2[i];\r\n        let j1 = offsetArray[idx1];\r\n        while (indexArray[j1] !== -1 && j1 < bondCount2) {\r\n            j1 += 1;\r\n        }\r\n        indexArray[j1] = i;\r\n        let j2 = offsetArray[idx2];\r\n        while (indexArray[j2] !== -1 && j2 < bondCount2) {\r\n            j2 += 1;\r\n        }\r\n        indexArray[j2] = i;\r\n    }\r\n    return { countArray, offsetArray, indexArray };\r\n}\r\n//# sourceMappingURL=adjacency-list.js.map","/**\r\n * @file Features\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nexport function createFeatures() {\r\n    return {\r\n        types: [],\r\n        groups: [],\r\n        centers: { x: [], y: [], z: [] },\r\n        atomSets: []\r\n    };\r\n}\r\nexport function createFeatureState(type = 0 /* Unknown */, group = 0 /* Unknown */) {\r\n    return { type, group, x: 0, y: 0, z: 0, atomSet: [] };\r\n}\r\nexport function addAtom(state, atom) {\r\n    state.x += atom.x;\r\n    state.y += atom.y;\r\n    state.z += atom.z;\r\n    state.atomSet.push(atom.index);\r\n}\r\nexport function addFeature(features, state) {\r\n    const n = state.atomSet.length;\r\n    if (n > 0) {\r\n        const { types, groups, centers, atomSets } = features;\r\n        types.push(state.type);\r\n        groups.push(state.group);\r\n        centers.x.push(state.x / n);\r\n        centers.y.push(state.y / n);\r\n        centers.z.push(state.z / n);\r\n        atomSets.push(state.atomSet);\r\n    }\r\n}\r\n//# sourceMappingURL=features.js.map","/**\r\n * @file Structure Constants\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// entity types\r\nexport const UnknownEntity = 0;\r\nexport const PolymerEntity = 1;\r\nexport const NonPolymerEntity = 2;\r\nexport const MacrolideEntity = 3;\r\nexport const WaterEntity = 4;\r\n// molecule types\r\nexport const UnknownType = 0;\r\nexport const WaterType = 1;\r\nexport const IonType = 2;\r\nexport const ProteinType = 3;\r\nexport const RnaType = 4;\r\nexport const DnaType = 5;\r\nexport const SaccharideType = 6;\r\n// backbone types\r\nexport const UnknownBackboneType = 0;\r\nexport const ProteinBackboneType = 1;\r\nexport const RnaBackboneType = 2;\r\nexport const DnaBackboneType = 3;\r\nexport const CgProteinBackboneType = 4;\r\nexport const CgRnaBackboneType = 5;\r\nexport const CgDnaBackboneType = 6;\r\n// chemical component types\r\nexport const ChemCompProtein = [\r\n    'D-BETA-PEPTIDE, C-GAMMA LINKING', 'D-GAMMA-PEPTIDE, C-DELTA LINKING',\r\n    'D-PEPTIDE COOH CARBOXY TERMINUS', 'D-PEPTIDE NH3 AMINO TERMINUS', 'D-PEPTIDE LINKING',\r\n    'L-BETA-PEPTIDE, C-GAMMA LINKING', 'L-GAMMA-PEPTIDE, C-DELTA LINKING',\r\n    'L-PEPTIDE COOH CARBOXY TERMINUS', 'L-PEPTIDE NH3 AMINO TERMINUS', 'L-PEPTIDE LINKING',\r\n    'PEPTIDE LINKING', 'PEPTIDE-LIKE'\r\n];\r\nexport const ChemCompRna = [\r\n    'RNA OH 3 PRIME TERMINUS', 'RNA OH 5 PRIME TERMINUS', 'RNA LINKING'\r\n];\r\nexport const ChemCompDna = [\r\n    'DNA OH 3 PRIME TERMINUS', 'DNA OH 5 PRIME TERMINUS', 'DNA LINKING',\r\n    'L-DNA LINKING', 'L-RNA LINKING'\r\n];\r\nexport const ChemCompSaccharide = [\r\n    'D-SACCHARIDE', 'D-SACCHARIDE 1,4 AND 1,4 LINKING', 'D-SACCHARIDE 1,4 AND 1,6 LINKING',\r\n    'L-SACCHARIDE', 'L-SACCHARIDE 1,4 AND 1,4 LINKING', 'L-SACCHARIDE 1,4 AND 1,6 LINKING',\r\n    'SACCHARIDE'\r\n];\r\nexport const ChemCompOther = [\r\n    'OTHER'\r\n];\r\nexport const ChemCompNonPolymer = [\r\n    'NON-POLYMER'\r\n];\r\nexport const ChemCompHetero = ChemCompNonPolymer.concat(ChemCompOther, ChemCompSaccharide);\r\n// secondary structure\r\nexport const SecStrucHelix = ['h', 'g', 'i'];\r\nexport const SecStrucSheet = ['e', 'b'];\r\nexport const SecStrucTurn = ['s', 't', 'l', ''];\r\nexport const AtomicNumbers = {\r\n    'H': 1, 'D': 1, 'T': 1, 'HE': 2, 'LI': 3, 'BE': 4, 'B': 5, 'C': 6, 'N': 7, 'O': 8, 'F': 9, 'NE': 10, 'NA': 11, 'MG': 12, 'AL': 13, 'SI': 14, 'P': 15, 'S': 16, 'CL': 17, 'AR': 18, 'K': 19, 'CA': 20, 'SC': 21, 'TI': 22, 'V': 23, 'CR': 24, 'MN': 25, 'FE': 26, 'CO': 27, 'NI': 28, 'CU': 29, 'ZN': 30, 'GA': 31, 'GE': 32, 'AS': 33, 'SE': 34, 'BR': 35, 'KR': 36, 'RB': 37, 'SR': 38, 'Y': 39, 'ZR': 40, 'NB': 41, 'MO': 42, 'TC': 43, 'RU': 44, 'RH': 45, 'PD': 46, 'AG': 47, 'CD': 48, 'IN': 49, 'SN': 50, 'SB': 51, 'TE': 52, 'I': 53, 'XE': 54, 'CS': 55, 'BA': 56, 'LA': 57, 'CE': 58, 'PR': 59, 'ND': 60, 'PM': 61, 'SM': 62, 'EU': 63, 'GD': 64, 'TB': 65, 'DY': 66, 'HO': 67, 'ER': 68, 'TM': 69, 'YB': 70, 'LU': 71, 'HF': 72, 'TA': 73, 'W': 74, 'RE': 75, 'OS': 76, 'IR': 77, 'PT': 78, 'AU': 79, 'HG': 80, 'TL': 81, 'PB': 82, 'BI': 83, 'PO': 84, 'AT': 85, 'RN': 86, 'FR': 87, 'RA': 88, 'AC': 89, 'TH': 90, 'PA': 91, 'U': 92, 'NP': 93, 'PU': 94, 'AM': 95, 'CM': 96, 'BK': 97, 'CF': 98, 'ES': 99, 'FM': 100, 'MD': 101, 'NO': 102, 'LR': 103, 'RF': 104, 'DB': 105, 'SG': 106, 'BH': 107, 'HS': 108, 'MT': 109, 'DS': 110, 'RG': 111, 'CN': 112, 'NH': 113, 'FL': 114, 'MC': 115, 'LV': 116, 'TS': 117, 'OG': 118\r\n};\r\nexport const DefaultAtomicNumber = 0;\r\n// https://doi.org/10.1515/pac-2015-0305 (table 2, 3, and 4)\r\nexport const AtomWeights = {\r\n    1: 1.008, 2: 4.0026, 3: 6.94, 4: 9.0122, 5: 10.81, 6: 10.81, 7: 14.007, 8: 15.999, 9: 18.998, 10: 20.180, 11: 22.990, 12: 24.305, 13: 26.982, 14: 28.085, 15: 30.974, 16: 32.06, 17: 35.45, 18: 39.948, 19: 39.098, 20: 40.078, 21: 44.956, 22: 47.867, 23: 50.942, 24: 51.996, 25: 54.938, 26: 55.845, 27: 58.933, 28: 58.693, 29: 63.546, 30: 65.38, 31: 69.723, 32: 72.630, 33: 74.922, 34: 78.971, 35: 79.904, 36: 83.798, 37: 85.468, 38: 87.62, 39: 88.906, 40: 91.224, 41: 92.906, 42: 95.95, 43: 96.906, 44: 101.07, 45: 102.91, 46: 106.42, 47: 107.87, 48: 112.41, 49: 114.82, 50: 118.71, 51: 121.76, 52: 127.60, 53: 127.60, 54: 131.29, 55: 132.91, 56: 137.33, 57: 138.91, 58: 140.12, 59: 140.91, 60: 144.24, 61: 144.912, 62: 150.36, 63: 151.96, 64: 157.25, 65: 158.93, 66: 162.50, 67: 164.93, 68: 167.26, 69: 168.93, 70: 173.05, 71: 174.97, 72: 178.49, 73: 180.95, 74: 183.84, 75: 186.21, 76: 190.23, 77: 192.22, 78: 195.08, 79: 196.97, 80: 200.59, 81: 204.38, 82: 207.2, 83: 208.98, 84: 1.97, 85: 2.02, 86: 2.2, 87: 3.48, 88: 2.83, 89: 2.0, 90: 232.04, 91: 231.04, 92: 238.03, 93: 237.048, 94: 244.064, 95: 243.061, 96: 247.070, 97: 247.070, 98: 251.079, 99: 252.083, 100: 257.095, 101: 258.098, 102: 259.101, 103: 262.110, 104: 267.122, 105: 270.131, 106: 271.134, 107: 270.133, 108: 270.134, 109: 278.156, 110: 281.165, 111: 281.166, 112: 285.177, 113: 286.182, 114: 289.190, 115: 289.194, 116: 293.204, 117: 293.208, 118: 294.214\r\n};\r\nexport const DefaultAtomWeight = 10.81; // C\r\n// http://dx.doi.org/10.1021/jp8111556 (or 2.0)\r\nexport const VdwRadii = {\r\n    1: 1.1, 2: 1.4, 3: 1.81, 4: 1.53, 5: 1.92, 6: 1.7, 7: 1.55, 8: 1.52, 9: 1.47, 10: 1.54, 11: 2.27, 12: 1.73, 13: 1.84, 14: 2.1, 15: 1.8, 16: 1.8, 17: 1.75, 18: 1.88, 19: 2.75, 20: 2.31, 21: 2.3, 22: 2.15, 23: 2.05, 24: 2.05, 25: 2.05, 26: 2.05, 27: 2.0, 28: 2.0, 29: 2.0, 30: 2.1, 31: 1.87, 32: 2.11, 33: 1.85, 34: 1.9, 35: 1.83, 36: 2.02, 37: 3.03, 38: 2.49, 39: 2.4, 40: 2.3, 41: 2.15, 42: 2.1, 43: 2.05, 44: 2.05, 45: 2.0, 46: 2.05, 47: 2.1, 48: 2.2, 49: 2.2, 50: 1.93, 51: 2.17, 52: 2.06, 53: 1.98, 54: 2.16, 55: 3.43, 56: 2.68, 57: 2.5, 58: 2.48, 59: 2.47, 60: 2.45, 61: 2.43, 62: 2.42, 63: 2.4, 64: 2.38, 65: 2.37, 66: 2.35, 67: 2.33, 68: 2.32, 69: 2.3, 70: 2.28, 71: 2.27, 72: 2.25, 73: 2.2, 74: 2.1, 75: 2.05, 76: 2.0, 77: 2.0, 78: 2.05, 79: 2.1, 80: 2.05, 81: 1.96, 82: 2.02, 83: 2.07, 84: 1.97, 85: 2.02, 86: 2.2, 87: 3.48, 88: 2.83, 89: 2.0, 90: 2.4, 91: 2.0, 92: 2.3, 93: 2.0, 94: 2.0, 95: 2.0, 96: 2.0, 97: 2.0, 98: 2.0, 99: 2.0, 100: 2.0, 101: 2.0, 102: 2.0, 103: 2.0, 104: 2.0, 105: 2.0, 106: 2.0, 107: 2.0, 108: 2.0, 109: 2.0, 110: 2.0, 111: 2.0, 112: 2.0, 113: 2.0, 114: 2.0, 115: 2.0, 116: 2.0, 117: 2.0, 118: 2.0\r\n};\r\nexport const DefaultVdwRadius = 2.0; // C\r\n// Peter Rose (peter.rose@rcsb.org), private communication, average accross PDB\r\nexport const ResidueRadii = {\r\n    '2QY': 6.58,\r\n    'CY0': 11.98,\r\n    '2QZ': 2.52,\r\n    'CY1': 6.59,\r\n    'HHK': 5.11,\r\n    'CXM': 4.69,\r\n    'HHI': 4.58,\r\n    'CY4': 4.57,\r\n    'S12': 18.57,\r\n    'CY3': 2.79,\r\n    'C5C': 5.35,\r\n    'PFX': 11.84,\r\n    '2R3': 6.94,\r\n    '2R1': 3.78,\r\n    'ILX': 4.99,\r\n    '32S': 5.68,\r\n    'BTK': 8.59,\r\n    '32T': 5.72,\r\n    'FAK': 9.8,\r\n    'B27': 2.78,\r\n    'ILM': 3.84,\r\n    'C4R': 5.63,\r\n    '32L': 6.75,\r\n    'SYS': 3.01,\r\n    '1MH': 5.04,\r\n    'ILE': 3.65,\r\n    'YNM': 6.39,\r\n    '2RX': 4.91,\r\n    'B3A': 2.48,\r\n    'GEE': 4.76,\r\n    '7MN': 7.34,\r\n    'B3E': 5.4,\r\n    'ARG': 6.33,\r\n    '200': 6.89,\r\n    'HIP': 5.47,\r\n    'HIA': 4.64,\r\n    'B3K': 5.89,\r\n    'HIC': 5.76,\r\n    'B3L': 4.96,\r\n    'B3M': 5.07,\r\n    'ARM': 6.86,\r\n    'ARO': 7.35,\r\n    'AR4': 8.42,\r\n    'PG1': 10.67,\r\n    'YOF': 6.44,\r\n    'IML': 3.74,\r\n    'SXE': 6.65,\r\n    'HIQ': 7.98,\r\n    'PFF': 6.31,\r\n    'HIS': 4.52,\r\n    '0TD': 3.62,\r\n    'C3Y': 5.24,\r\n    '1OP': 11.55,\r\n    '02Y': 4.77,\r\n    '02V': 4.83,\r\n    'ASB': 5.59,\r\n    '30V': 8.53,\r\n    'S2P': 4.81,\r\n    'ASP': 3.55,\r\n    'ASN': 3.54,\r\n    '2OR': 6.91,\r\n    'QMM': 6.13,\r\n    '2P0': 8.52,\r\n    'ASL': 5.36,\r\n    'HFA': 5.14,\r\n    '5PG': 5.69,\r\n    'B3X': 4.38,\r\n    'AS9': 4.1,\r\n    'ARV': 7.59,\r\n    'B3U': 6.06,\r\n    'S2C': 7.54,\r\n    'B3T': 3.34,\r\n    '175': 5.64,\r\n    'GFT': 8.18,\r\n    'HG7': 6.8,\r\n    'B3Q': 4.48,\r\n    'ASA': 3.64,\r\n    '02K': 2.94,\r\n    'B3Y': 7.45,\r\n    'PHD': 5.35,\r\n    'C6C': 6.42,\r\n    'BUC': 5.8,\r\n    'HGL': 8.07,\r\n    'PHE': 5.06,\r\n    '03Y': 2.6,\r\n    'PHA': 5.11,\r\n    'OCY': 5.0,\r\n    '4PH': 6.79,\r\n    '5OH': 4.7,\r\n    '31Q': 10.46,\r\n    'BTR': 7.98,\r\n    '3PX': 4.7,\r\n    '1PA': 8.07,\r\n    'ASX': 3.54,\r\n    'IOR': 7.23,\r\n    '03E': 3.38,\r\n    'PHL': 5.17,\r\n    'KWS': 5.09,\r\n    'PHI': 7.12,\r\n    'NAL': 7.22,\r\n    'S1H': 19.21,\r\n    '2ML': 3.86,\r\n    '2MR': 7.35,\r\n    'GHG': 4.83,\r\n    'TYY': 6.54,\r\n    '2MT': 3.67,\r\n    '56A': 13.01,\r\n    'SVA': 5.46,\r\n    'TYX': 8.31,\r\n    'TYS': 8.59,\r\n    'TYR': 6.38,\r\n    'TYQ': 6.43,\r\n    'HLU': 3.99,\r\n    'MYK': 19.47,\r\n    'TYO': 7.71,\r\n    'HLX': 4.98,\r\n    'TYN': 9.87,\r\n    'TYJ': 6.25,\r\n    'TYI': 6.49,\r\n    'LYH': 5.13,\r\n    'LYF': 12.19,\r\n    'SUN': 6.73,\r\n    'LYR': 18.28,\r\n    'TYB': 6.46,\r\n    '11W': 14.39,\r\n    'LYS': 5.54,\r\n    'LYN': 4.8,\r\n    '11Q': 4.85,\r\n    'LYO': 4.71,\r\n    'LYZ': 1.76,\r\n    'TXY': 6.44,\r\n    'MYN': 4.71,\r\n    'TY5': 10.6,\r\n    'HMR': 5.09,\r\n    '01W': 8.55,\r\n    'LYX': 13.36,\r\n    'TY8': 7.22,\r\n    'TY2': 6.49,\r\n    'KYN': 6.18,\r\n    'KYQ': 9.75,\r\n    'CZZ': 5.14,\r\n    'IIL': 3.81,\r\n    'HNC': 10.41,\r\n    'OIC': 4.62,\r\n    'LVN': 2.89,\r\n    'QIL': 3.84,\r\n    'JJL': 8.3,\r\n    'VAH': 3.88,\r\n    'JJJ': 7.5,\r\n    'JJK': 7.43,\r\n    'VAD': 2.56,\r\n    'CYW': 4.65,\r\n    '0QL': 5.72,\r\n    '143': 8.22,\r\n    'SVX': 7.04,\r\n    'CYJ': 11.64,\r\n    'SVY': 7.1,\r\n    'SVZ': 6.6,\r\n    'CYG': 8.03,\r\n    'CYF': 13.54,\r\n    'SVV': 5.09,\r\n    'GL3': 2.72,\r\n    '8SP': 14.26,\r\n    'CYS': 2.78,\r\n    '004': 4.33,\r\n    'CYR': 10.33,\r\n    'PLJ': 3.71,\r\n    'EXY': 7.37,\r\n    'HL2': 3.75,\r\n    'A5N': 5.21,\r\n    'CYQ': 5.67,\r\n    'CZ2': 5.16,\r\n    'LWY': 4.12,\r\n    'PM3': 8.78,\r\n    'OHS': 6.98,\r\n    'OHI': 5.35,\r\n    '3TY': 8.42,\r\n    'CYD': 8.55,\r\n    'DYS': 7.87,\r\n    'DAH': 6.47,\r\n    '4IK': 11.81,\r\n    '3EG': 3.66,\r\n    'AYA': 3.65,\r\n    '4IN': 6.31,\r\n    'DAB': 3.48,\r\n    '4HT': 6.03,\r\n    'RGL': 7.03,\r\n    'DAM': 2.49,\r\n    'NFA': 5.04,\r\n    'WFP': 6.07,\r\n    '2JC': 2.97,\r\n    'HAR': 7.55,\r\n    '2JG': 5.67,\r\n    'MH6': 1.72,\r\n    '2JF': 9.13,\r\n    '3FG': 4.96,\r\n    'MGN': 4.84,\r\n    'AZH': 5.36,\r\n    'AZK': 6.03,\r\n    'ZBZ': 7.79,\r\n    'TBG': 2.58,\r\n    'VAL': 2.51,\r\n    'MGG': 7.34,\r\n    'AZS': 5.61,\r\n    'FHL': 9.75,\r\n    '2JH': 4.56,\r\n    'IEL': 7.07,\r\n    'FHO': 6.75,\r\n    'DA2': 7.79,\r\n    'FH7': 6.99,\r\n    'ME0': 4.52,\r\n    '3GL': 4.84,\r\n    'MDO': 5.03,\r\n    'AZY': 7.37,\r\n    'A8E': 3.76,\r\n    'ZCL': 6.71,\r\n    'MDH': 2.58,\r\n    'LA2': 14.07,\r\n    '4FW': 6.1,\r\n    'YCM': 5.32,\r\n    'MDF': 4.95,\r\n    'YCP': 3.01,\r\n    'TEF': 8.63,\r\n    'FGP': 4.34,\r\n    'UF0': 19.72,\r\n    'XCN': 4.57,\r\n    'FGL': 2.56,\r\n    'MF3': 6.37,\r\n    'MEQ': 5.13,\r\n    'LAA': 3.23,\r\n    'IGL': 5.52,\r\n    'MET': 4.49,\r\n    'NIY': 6.81,\r\n    'QCS': 5.18,\r\n    'TCQ': 8.56,\r\n    'MEN': 4.33,\r\n    '4HL': 8.79,\r\n    'MEA': 4.95,\r\n    'EFC': 5.28,\r\n    'LAL': 2.41,\r\n    '2HF': 5.52,\r\n    'KBE': 5.64,\r\n    'OCS': 3.94,\r\n    'CAF': 5.46,\r\n    'NC1': 11.4,\r\n    'NBQ': 9.82,\r\n    'CAB': 4.19,\r\n    'MBQ': 9.55,\r\n    '193': 7.38,\r\n    '192': 2.44,\r\n    '0WZ': 7.61,\r\n    'CAS': 5.35,\r\n    'NB8': 11.98,\r\n    'OBS': 11.71,\r\n    '1AC': 2.42,\r\n    'PCA': 3.48,\r\n    'MCL': 9.73,\r\n    'LBY': 7.75,\r\n    'GAU': 4.67,\r\n    'PBF': 9.75,\r\n    'MCG': 6.46,\r\n    'DDE': 6.86,\r\n    '19W': 3.94,\r\n    'MD5': 9.33,\r\n    'MD6': 6.44,\r\n    'MD3': 8.41,\r\n    'MCS': 7.56,\r\n    'OBF': 3.64,\r\n    'UAL': 4.68,\r\n    'PAT': 6.05,\r\n    'IAM': 8.88,\r\n    'PAQ': 8.77,\r\n    'FDL': 9.49,\r\n    'NCB': 3.45,\r\n    'LCK': 9.81,\r\n    'DDZ': 2.52,\r\n    '2FM': 5.54,\r\n    'IAR': 6.77,\r\n    'OAS': 4.8,\r\n    'HBN': 8.8,\r\n    'TA4': 5.55,\r\n    '1C3': 7.43,\r\n    'ECX': 5.51,\r\n    'PF5': 6.28,\r\n    'RE3': 5.29,\r\n    'FCL': 6.25,\r\n    'ECC': 4.79,\r\n    'LDH': 7.06,\r\n    'NCY': 2.91,\r\n    'CCS': 4.58,\r\n    'PEC': 6.54,\r\n    '2CO': 4.45,\r\n    'LE1': 2.72,\r\n    'HCM': 5.53,\r\n    '07O': 8.05,\r\n    'HCL': 4.96,\r\n    'NEP': 6.94,\r\n    'PE1': 8.01,\r\n    'LEF': 4.37,\r\n    'FC0': 5.18,\r\n    'LED': 4.34,\r\n    'HCS': 4.09,\r\n    'DBU': 2.49,\r\n    'RE0': 5.53,\r\n    'LEN': 3.82,\r\n    '1E3': 8.71,\r\n    'BB9': 2.56,\r\n    'BB8': 5.14,\r\n    'PCS': 5.05,\r\n    'BB7': 4.56,\r\n    'BB6': 2.62,\r\n    'LEU': 3.83,\r\n    'DBZ': 7.08,\r\n    'LET': 11.29,\r\n    'DBY': 6.46,\r\n    'ICY': 7.76,\r\n    'MAA': 2.4,\r\n    'CGA': 7.91,\r\n    '5CS': 8.34,\r\n    'UGY': 3.7,\r\n    'LGY': 11.71,\r\n    'N10': 8.96,\r\n    'AAR': 6.39,\r\n    'FT6': 7.5,\r\n    'MOD': 12.62,\r\n    '5CW': 7.21,\r\n    'PVH': 4.58,\r\n    'BBC': 6.42,\r\n    'YYA': 7.3,\r\n    'O12': 14.08,\r\n    'NOT': 7.15,\r\n    'KGC': 9.88,\r\n    'MP4': 5.86,\r\n    '0CS': 4.07,\r\n    'MP8': 3.75,\r\n    'VLL': 2.54,\r\n    'VLM': 2.51,\r\n    'BCS': 8.03,\r\n    'MNL': 4.9,\r\n    'AA4': 4.47,\r\n    'SAC': 3.49,\r\n    'BCX': 2.99,\r\n    '3CF': 6.47,\r\n    'SAH': 11.7,\r\n    'NNH': 6.86,\r\n    'CGU': 4.71,\r\n    'SIB': 12.41,\r\n    'TLY': 8.78,\r\n    'SIC': 4.81,\r\n    'VMS': 8.82,\r\n    'TMD': 6.76,\r\n    'MMO': 6.53,\r\n    'PXU': 2.46,\r\n    '4AW': 6.22,\r\n    'OTH': 3.6,\r\n    'DLS': 6.84,\r\n    'MME': 4.99,\r\n    'DM0': 6.99,\r\n    '0FL': 2.76,\r\n    'SBL': 8.96,\r\n    'CDV': 3.72,\r\n    'OTY': 6.51,\r\n    'PYA': 7.75,\r\n    '2AS': 3.57,\r\n    'DMH': 4.92,\r\n    'ELY': 7.42,\r\n    'GVL': 9.6,\r\n    'FVA': 2.9,\r\n    'SAR': 2.48,\r\n    '4BF': 6.92,\r\n    'EME': 4.69,\r\n    'CDE': 2.51,\r\n    '3AR': 7.86,\r\n    '3AH': 9.11,\r\n    'AC5': 2.44,\r\n    'FTR': 6.08,\r\n    'MLL': 3.76,\r\n    'NPH': 11.66,\r\n    'NPI': 6.9,\r\n    'DMT': 6.67,\r\n    'PYX': 11.3,\r\n    'MLE': 3.87,\r\n    'PYL': 9.67,\r\n    'ZZU': 6.94,\r\n    'H5M': 3.61,\r\n    'SCH': 4.46,\r\n    'DMK': 3.52,\r\n    'FTY': 9.07,\r\n    '2AG': 3.7,\r\n    'ABA': 2.55,\r\n    'ZZJ': 2.44,\r\n    'MLZ': 6.8,\r\n    'MLY': 6.88,\r\n    'KCX': 7.28,\r\n    'ZZD': 8.16,\r\n    '3A5': 5.37,\r\n    'LHC': 7.75,\r\n    '9AT': 2.47,\r\n    'OZT': 3.4,\r\n    'THO': 2.62,\r\n    'THR': 2.5,\r\n    'DFI': 3.93,\r\n    'MKD': 6.42,\r\n    '4CY': 4.6,\r\n    'SDP': 6.07,\r\n    'DFO': 3.94,\r\n    '0A0': 3.45,\r\n    '4DB': 9.73,\r\n    'ML3': 6.26,\r\n    'BG1': 8.02,\r\n    'SD4': 4.57,\r\n    'THC': 3.8,\r\n    'SCS': 5.48,\r\n    'TH5': 4.65,\r\n    'BFD': 5.33,\r\n    'AEI': 6.34,\r\n    'TH6': 2.85,\r\n    'SCY': 4.53,\r\n    'TIS': 4.81,\r\n    'SEE': 4.53,\r\n    'BHD': 3.48,\r\n    'SEB': 8.18,\r\n    'SEC': 2.96,\r\n    'SEP': 4.8,\r\n    'CLH': 7.13,\r\n    'TIH': 5.02,\r\n    'CLG': 13.62,\r\n    'SEN': 6.43,\r\n    'XXA': 7.34,\r\n    'SEL': 2.46,\r\n    'SE7': 4.19,\r\n    '4CF': 7.72,\r\n    'G8M': 3.57,\r\n    'BH2': 3.51,\r\n    'UN2': 3.22,\r\n    'VR0': 10.51,\r\n    'MK8': 4.76,\r\n    'DHA': 2.32,\r\n    'LMQ': 4.69,\r\n    'SFE': 5.01,\r\n    'AHB': 3.47,\r\n    'OXX': 7.05,\r\n    'BIF': 9.63,\r\n    'IZO': 4.47,\r\n    'NMM': 8.25,\r\n    '0BN': 7.0,\r\n    'HZP': 3.12,\r\n    'NMC': 4.23,\r\n    'DHL': 2.69,\r\n    '9DS': 9.29,\r\n    'SER': 2.41,\r\n    'CHG': 4.2,\r\n    'MIR': 6.54,\r\n    'AGQ': 7.79,\r\n    'SET': 2.46,\r\n    'MIS': 6.32,\r\n    '4FB': 3.08,\r\n    '0AR': 8.46,\r\n    'LME': 3.99,\r\n    'FZN': 24.42,\r\n    'AGT': 9.04,\r\n    'IYR': 6.46,\r\n    '9DN': 9.31,\r\n    'CHP': 5.75,\r\n    'UNK': 1.64,\r\n    'XX1': 9.92,\r\n    'AGM': 6.57,\r\n    '0AH': 5.78,\r\n    'LLP': 10.22,\r\n    '0AF': 6.72,\r\n    '4DP': 9.28,\r\n    'HYP': 2.25,\r\n    'DIR': 5.8,\r\n    'LLY': 8.71,\r\n    '0AK': 6.11,\r\n    'NLE': 4.67,\r\n    'OYL': 6.42,\r\n    'WVL': 4.69,\r\n    '0A8': 8.1,\r\n    'NLY': 6.37,\r\n    'MHO': 4.89,\r\n    'VOL': 2.55,\r\n    '0A1': 7.1,\r\n    'MHL': 3.92,\r\n    'NLP': 4.81,\r\n    'NLQ': 4.65,\r\n    'MHW': 2.74,\r\n    'BIL': 4.7,\r\n    'NLO': 4.8,\r\n    'MHU': 7.51,\r\n    'XW1': 9.36,\r\n    'LLO': 10.13,\r\n    'SGB': 6.88,\r\n    'MHV': 3.6,\r\n    'MHS': 4.51,\r\n    '0A9': 5.17,\r\n    '0LF': 9.96,\r\n    'HT7': 6.82,\r\n    'X2W': 6.6,\r\n    'YPZ': 9.38,\r\n    'I58': 6.73,\r\n    'FLA': 2.4,\r\n    'M0H': 4.83,\r\n    'HSL': 2.46,\r\n    'FLE': 6.17,\r\n    'KOR': 10.1,\r\n    '1VR': 3.89,\r\n    'HSO': 4.56,\r\n    'TTS': 9.41,\r\n    'RVX': 7.01,\r\n    'TTQ': 7.71,\r\n    'H14': 5.27,\r\n    'HTI': 7.8,\r\n    'ONH': 6.14,\r\n    'LP6': 8.58,\r\n    'ONL': 4.83,\r\n    'AHH': 5.06,\r\n    'HS8': 7.4,\r\n    'HS9': 4.71,\r\n    'BL2': 5.82,\r\n    'AHP': 5.26,\r\n    '6HN': 7.34,\r\n    'HRP': 5.46,\r\n    'POM': 3.6,\r\n    'WPA': 5.11,\r\n    '2ZC': 4.29,\r\n    'CPC': 2.65,\r\n    'AIB': 2.4,\r\n    'XSN': 3.47,\r\n    'M2S': 5.28,\r\n    'GND': 6.67,\r\n    'GNC': 4.6,\r\n    'MVA': 2.56,\r\n    'OLZ': 5.32,\r\n    'M2L': 6.15,\r\n    'TRF': 6.69,\r\n    'NZH': 7.66,\r\n    'SRZ': 5.27,\r\n    'OLD': 10.47,\r\n    'CME': 5.86,\r\n    'CMH': 5.3,\r\n    'ALA': 2.38,\r\n    'TRQ': 7.36,\r\n    'PPN': 7.24,\r\n    'TRP': 6.07,\r\n    'TRO': 5.82,\r\n    'TRN': 5.95,\r\n    'NYS': 8.1,\r\n    'ALC': 5.26,\r\n    'U3X': 11.7,\r\n    'HVA': 2.58,\r\n    'TS9': 3.92,\r\n    'TRX': 7.27,\r\n    'TRW': 11.8,\r\n    'LPL': 7.51,\r\n    'GMA': 4.4,\r\n    'OMT': 5.07,\r\n    'CMT': 3.54,\r\n    'GME': 4.66,\r\n    'NYB': 6.07,\r\n    'PR3': 5.12,\r\n    'LPD': 2.48,\r\n    'GLU': 4.49,\r\n    '1X6': 6.84,\r\n    'LPG': 2.39,\r\n    'GLX': 4.52,\r\n    'PR4': 4.52,\r\n    'CML': 6.16,\r\n    'FME': 4.52,\r\n    'HTR': 6.48,\r\n    'PR7': 4.66,\r\n    'Z3E': 7.2,\r\n    'GLZ': 2.39,\r\n    'BMT': 6.37,\r\n    'WRP': 8.16,\r\n    'GLY': 2.37,\r\n    'OMY': 6.11,\r\n    'MTY': 5.46,\r\n    'OMX': 6.15,\r\n    'GLN': 4.46,\r\n    '2XA': 8.25,\r\n    '28X': 7.84,\r\n    '7JA': 9.46,\r\n    'FLT': 9.65,\r\n    'GLJ': 3.7,\r\n    'OMH': 5.26,\r\n    'TSY': 4.26,\r\n    'PRV': 4.28,\r\n    'CS4': 11.21,\r\n    'DOA': 12.33,\r\n    '23P': 5.42,\r\n    'CS3': 8.24,\r\n    '6CL': 6.47,\r\n    'PRR': 5.58,\r\n    'KST': 11.58,\r\n    'CS1': 7.23,\r\n    'PRS': 2.63,\r\n    'ZYJ': 11.4,\r\n    'IT1': 9.75,\r\n    'UU5': 4.98,\r\n    'ESB': 6.69,\r\n    'UU4': 2.49,\r\n    'ESC': 5.65,\r\n    'LSO': 10.58,\r\n    'ZYK': 11.45,\r\n    '9NV': 8.99,\r\n    '23F': 5.27,\r\n    'ORN': 4.25,\r\n    'HOX': 6.61,\r\n    'CSD': 3.95,\r\n    'FP9': 3.03,\r\n    'DO2': 4.44,\r\n    'SLL': 11.53,\r\n    'P3Q': 9.54,\r\n    'ORQ': 6.04,\r\n    'MSL': 5.21,\r\n    'DNP': 2.45,\r\n    'CSB': 3.51,\r\n    'WLU': 4.24,\r\n    'CSA': 5.7,\r\n    'MT2': 5.51,\r\n    'CSO': 3.53,\r\n    'TPO': 4.73,\r\n    'MSP': 13.11,\r\n    '23S': 6.09,\r\n    'MSO': 4.96,\r\n    'PRO': 2.41,\r\n    'TPL': 5.41,\r\n    'DNS': 8.79,\r\n    'CSK': 3.91,\r\n    'Z70': 7.4,\r\n    'CSJ': 7.51,\r\n    'DNW': 7.97,\r\n    'PRK': 9.15,\r\n    'GSU': 11.81,\r\n    'LTA': 6.57,\r\n    'HPE': 6.63,\r\n    'TPQ': 6.48,\r\n    'PRJ': 5.26,\r\n    'PSW': 4.65,\r\n    'L3O': 3.89,\r\n    'CSU': 4.89,\r\n    'ALY': 7.38,\r\n    'M3L': 7.12,\r\n    'CSW': 3.68,\r\n    'XPR': 7.68,\r\n    'D4P': 5.66,\r\n    'FOE': 8.17,\r\n    'SLZ': 5.69,\r\n    'CSP': 5.26,\r\n    'TQI': 7.68,\r\n    'ALT': 2.72,\r\n    'CSR': 5.42,\r\n    'CSS': 3.61,\r\n    'M3R': 7.18,\r\n    'ALO': 2.57,\r\n    'R4K': 4.67,\r\n    'SMF': 9.0,\r\n    'MSA': 2.73,\r\n    'SMC': 3.39,\r\n    'CSX': 3.47,\r\n    'SME': 4.8,\r\n    'ETA': 2.4,\r\n    'CSZ': 3.6,\r\n    '22G': 8.8,\r\n    'MSE': 4.62,\r\n    'ALN': 6.16,\r\n    'PSH': 7.26,\r\n    'CTE': 7.27,\r\n    'DON': 6.72,\r\n    'CTH': 3.45,\r\n    'U2X': 11.54,\r\n    '6CW': 7.56,\r\n    'TQZ': 6.97,\r\n    '3YM': 6.52,\r\n    'OSE': 4.49,\r\n    '2VA': 9.82,\r\n    'TQQ': 7.76,\r\n    'NRG': 8.35,\r\n    'BPE': 7.24,\r\n    'F2F': 6.25,\r\n    '1TQ': 8.58,\r\n    'I2M': 3.13,\r\n    'NVA': 3.76,\r\n    'R1A': 8.2,\r\n    'QPA': 6.95,\r\n    'C1X': 11.63,\r\n    'FRD': 5.05,\r\n    'HR7': 6.98,\r\n    'SNC': 3.93,\r\n    'QPH': 5.15,\r\n    '26B': 8.39,\r\n    'DPQ': 6.54,\r\n    'DPP': 2.51,\r\n    '2TY': 8.65,\r\n    'TNR': 6.88,\r\n    'PTH': 8.35,\r\n    'DPL': 3.58,\r\n    'APK': 8.79,\r\n    '1TY': 8.84,\r\n    'HRG': 7.36,\r\n    'PTM': 8.74,\r\n    '1U8': 3.62,\r\n    'PTR': 8.64,\r\n    'LVG': 3.01,\r\n    '6FL': 4.85,\r\n    'SOC': 4.05,\r\n    'KPI': 9.79,\r\n    'IPG': 2.91,\r\n    'P2Y': 2.51,\r\n    'N2C': 3.55,\r\n    'T0I': 7.34,\r\n    'MPH': 5.29,\r\n    'R2T': 4.71,\r\n    'TOX': 6.78,\r\n    'P2Q': 9.8,\r\n    'GPL': 10.77,\r\n    'MPJ': 5.07,\r\n    'F2Y': 6.2,\r\n    'T11': 8.58,\r\n    '9NR': 9.33,\r\n    'FPR': 8.85,\r\n    '9NF': 8.93,\r\n    'KPY': 10.17,\r\n    '9NE': 9.77,\r\n    'TOQ': 7.5,\r\n    'MPQ': 4.2,\r\n    'FPK': 3.08,\r\n    'HQA': 7.25,\r\n    'SOY': 10.94\r\n};\r\nexport const DefaultResidueRadius = 5.0;\r\n// http://dx.doi.org/10.1039/b801115j (or 1.6)\r\nexport const CovalentRadii = {\r\n    1: 0.31, 2: 0.28, 3: 1.28, 4: 0.96, 5: 0.84, 6: 0.76, 7: 0.71, 8: 0.66, 9: 0.57, 10: 0.58, 11: 1.66, 12: 1.41, 13: 1.21, 14: 1.11, 15: 1.07, 16: 1.05, 17: 1.02, 18: 1.06, 19: 2.03, 20: 1.76, 21: 1.7, 22: 1.6, 23: 1.53, 24: 1.39, 25: 1.39, 26: 1.32, 27: 1.26, 28: 1.24, 29: 1.32, 30: 1.22, 31: 1.22, 32: 1.2, 33: 1.19, 34: 1.2, 35: 1.2, 36: 1.16, 37: 2.2, 38: 1.95, 39: 1.9, 40: 1.75, 41: 1.64, 42: 1.54, 43: 1.47, 44: 1.46, 45: 1.42, 46: 1.39, 47: 1.45, 48: 1.44, 49: 1.42, 50: 1.39, 51: 1.39, 52: 1.38, 53: 1.39, 54: 1.4, 55: 2.44, 56: 2.15, 57: 2.07, 58: 2.04, 59: 2.03, 60: 2.01, 61: 1.99, 62: 1.98, 63: 1.98, 64: 1.96, 65: 1.94, 66: 1.92, 67: 1.92, 68: 1.89, 69: 1.9, 70: 1.87, 71: 1.87, 72: 1.75, 73: 1.7, 74: 1.62, 75: 1.51, 76: 1.44, 77: 1.41, 78: 1.36, 79: 1.36, 80: 1.32, 81: 1.45, 82: 1.46, 83: 1.48, 84: 1.4, 85: 1.5, 86: 1.5, 87: 2.6, 88: 2.21, 89: 2.15, 90: 2.06, 91: 2.0, 92: 1.96, 93: 1.9, 94: 1.87, 95: 1.8, 96: 1.69, 97: 1.6, 98: 1.6, 99: 1.6, 100: 1.6, 101: 1.6, 102: 1.6, 103: 1.6, 104: 1.6, 105: 1.6, 106: 1.6, 107: 1.6, 108: 1.6, 109: 1.6, 110: 1.6, 111: 1.6, 112: 1.6, 113: 1.6, 114: 1.6, 115: 1.6, 116: 1.6, 117: 1.6, 118: 1.6\r\n};\r\nexport const DefaultCovalentRadius = 1.6;\r\nexport const Valences = {\r\n    1: [1],\r\n    2: [0],\r\n    3: [1],\r\n    4: [2],\r\n    5: [3],\r\n    6: [4],\r\n    7: [3],\r\n    8: [2],\r\n    9: [1],\r\n    10: [0],\r\n    11: [1],\r\n    12: [2],\r\n    13: [6],\r\n    14: [6],\r\n    15: [3, 5, 7],\r\n    16: [2, 4, 6],\r\n    17: [1],\r\n    18: [0],\r\n    19: [1],\r\n    20: [2],\r\n    31: [3],\r\n    32: [4],\r\n    33: [3, 5],\r\n    34: [2, 4, 6],\r\n    35: [1],\r\n    36: [0],\r\n    37: [1],\r\n    38: [2],\r\n    49: [3],\r\n    50: [4],\r\n    51: [3, 5],\r\n    52: [2],\r\n    53: [1, 2, 5],\r\n    54: [0, 2],\r\n    55: [1],\r\n    56: [2],\r\n    81: [3],\r\n    82: [4],\r\n    83: [3],\r\n    84: [2],\r\n    85: [1],\r\n    86: [0],\r\n    87: [1],\r\n    88: [2]\r\n};\r\nexport const DefaultValence = -1;\r\nexport const OuterShellElectronCounts = {\r\n    1: 1, 2: 2, 3: 1, 4: 2, 5: 3, 6: 4, 7: 5, 8: 6, 9: 7, 10: 8, 11: 1, 12: 2, 13: 3, 14: 4, 15: 5, 16: 6, 17: 7, 18: 8, 19: 1, 20: 2, 21: 3, 22: 4, 23: 5, 24: 6, 25: 7, 26: 8, 27: 9, 28: 10, 29: 11, 30: 2, 31: 3, 32: 4, 33: 5, 34: 6, 35: 7, 36: 8, 37: 1, 38: 2, 39: 3, 40: 4, 41: 5, 42: 6, 43: 7, 44: 8, 45: 9, 46: 10, 47: 11, 48: 2, 49: 3, 50: 4, 51: 5, 52: 6, 53: 7, 54: 8, 55: 1, 56: 2, 57: 3, 58: 4, 59: 3, 60: 4, 61: 5, 62: 6, 63: 7, 64: 8, 65: 9, 66: 10, 67: 11, 68: 12, 69: 13, 70: 14, 71: 15, 72: 4, 73: 5, 74: 6, 75: 7, 76: 8, 77: 9, 78: 10, 79: 11, 80: 2, 81: 3, 82: 4, 83: 5, 84: 6, 85: 7, 86: 8, 87: 1, 88: 2, 89: 3, 90: 4, 91: 3, 92: 4, 93: 5, 94: 6, 95: 7, 96: 8, 97: 9, 98: 10, 99: 11, 100: 12, 101: 13, 102: 14, 103: 15, 104: 2, 105: 2, 106: 2, 107: 2, 108: 2, 109: 2, 110: 2, 111: 2, 112: 2, 113: 3, 114: 4, 115: 5, 116: 6, 117: 7, 118: 8\r\n};\r\nexport const DefaultOuterShellElectronCount = 2;\r\n// http://blanco.biomol.uci.edu/Whole_residue_HFscales.txt\r\n// https://www.nature.com/articles/nsb1096-842\r\nexport const ResidueHydrophobicity = {\r\n    // AA  DGwif   DGwoct  Oct-IF\r\n    'ALA': [0.17, 0.50, 0.33],\r\n    'ARG': [0.81, 1.81, 1.00],\r\n    'ASN': [0.42, 0.85, 0.43],\r\n    'ASP': [1.23, 3.64, 2.41],\r\n    'ASH': [-0.07, 0.43, 0.50],\r\n    'CYS': [-0.24, -0.02, 0.22],\r\n    'GLN': [0.58, 0.77, 0.19],\r\n    'GLU': [2.02, 3.63, 1.61],\r\n    'GLH': [-0.01, 0.11, 0.12],\r\n    'GLY': [0.01, 1.15, 1.14],\r\n    // \"His+\": [  0.96,  2.33,  1.37 ],\r\n    'HIS': [0.17, 0.11, -0.06],\r\n    'ILE': [-0.31, -1.12, -0.81],\r\n    'LEU': [-0.56, -1.25, -0.69],\r\n    'LYS': [0.99, 2.80, 1.81],\r\n    'MET': [-0.23, -0.67, -0.44],\r\n    'PHE': [-1.13, -1.71, -0.58],\r\n    'PRO': [0.45, 0.14, -0.31],\r\n    'SER': [0.13, 0.46, 0.33],\r\n    'THR': [0.14, 0.25, 0.11],\r\n    'TRP': [-1.85, -2.09, -0.24],\r\n    'TYR': [-0.94, -0.71, 0.23],\r\n    'VAL': [0.07, -0.46, -0.53]\r\n};\r\nexport const DefaultResidueHydrophobicity = [0.00, 0.00, 0.00];\r\nexport const AA1 = {\r\n    'HIS': 'H',\r\n    'ARG': 'R',\r\n    'LYS': 'K',\r\n    'ILE': 'I',\r\n    'PHE': 'F',\r\n    'LEU': 'L',\r\n    'TRP': 'W',\r\n    'ALA': 'A',\r\n    'MET': 'M',\r\n    'PRO': 'P',\r\n    'CYS': 'C',\r\n    'ASN': 'N',\r\n    'VAL': 'V',\r\n    'GLY': 'G',\r\n    'SER': 'S',\r\n    'GLN': 'Q',\r\n    'TYR': 'Y',\r\n    'ASP': 'D',\r\n    'GLU': 'E',\r\n    'THR': 'T',\r\n    'SEC': 'U',\r\n    'PYL': 'O',\r\n};\r\nexport const AA3 = Object.keys(AA1);\r\nexport const RnaBases = ['A', 'C', 'T', 'G', 'U', 'I'];\r\nexport const DnaBases = ['DA', 'DC', 'DT', 'DG', 'DU', 'DI'];\r\nexport const PurinBases = ['A', 'G', 'I', 'DA', 'DG', 'DI'];\r\nexport const Bases = RnaBases.concat(DnaBases);\r\nexport const WaterNames = [\r\n    'SOL', 'WAT', 'HOH', 'H2O', 'W', 'DOD', 'D3O', 'TIP3', 'TIP4', 'SPC'\r\n];\r\n// all chemical components with the word \"ion\" in their name, Sep 2016\r\n//\r\n// SET SESSION group_concat_max_len = 1000000;\r\n// SELECT GROUP_CONCAT(id_ ORDER BY id_ ASC SEPARATOR '\", \"') from\r\n// (\r\n//     SELECT count(obj_id) as c, id_\r\n//     FROM pdb.chem_comp WHERE name LIKE \"% ION%\"\r\n//     GROUP BY id_\r\n// ) AS t1;\r\nexport const IonNames = [\r\n    '118', '119', '1AL', '1CU', '2FK', '2HP', '2OF', '3CO',\r\n    '3MT', '3NI', '3OF', '3P8', '4MO', '4PU', '543', '6MO', 'ACT', 'AG', 'AL',\r\n    'ALF', 'AM', 'ATH', 'AU', 'AU3', 'AUC', 'AZI', 'BA', 'BCT', 'BEF', 'BF4', 'BO4',\r\n    'BR', 'BS3', 'BSY', 'CA', 'CAC', 'CD', 'CD1', 'CD3', 'CD5', 'CE', 'CHT', 'CL',\r\n    'CO', 'CO3', 'CO5', 'CON', 'CR', 'CS', 'CSB', 'CU', 'CU1', 'CU3', 'CUA', 'CUZ',\r\n    'CYN', 'DME', 'DMI', 'DSC', 'DTI', 'DY', 'E4N', 'EDR', 'EMC', 'ER3', 'EU',\r\n    'EU3', 'F', 'FE', 'FE2', 'FPO', 'GA', 'GD3', 'GEP', 'HAI', 'HG', 'HGC', 'IN',\r\n    'IOD', 'IR', 'IR3', 'IRI', 'IUM', 'K', 'KO4', 'LA', 'LCO', 'LCP', 'LI', 'LU',\r\n    'MAC', 'MG', 'MH2', 'MH3', 'MLI', 'MLT', 'MMC', 'MN', 'MN3', 'MN5', 'MN6',\r\n    'MO1', 'MO2', 'MO3', 'MO4', 'MO5', 'MO6', 'MOO', 'MOS', 'MOW', 'MW1', 'MW2',\r\n    'MW3', 'NA', 'NA2', 'NA5', 'NA6', 'NAO', 'NAW', 'NCO', 'NET', 'NH4', 'NI',\r\n    'NI1', 'NI2', 'NI3', 'NO2', 'NO3', 'NRU', 'O4M', 'OAA', 'OC1', 'OC2', 'OC3',\r\n    'OC4', 'OC5', 'OC6', 'OC7', 'OC8', 'OCL', 'OCM', 'OCN', 'OCO', 'OF1', 'OF2',\r\n    'OF3', 'OH', 'OS', 'OS4', 'OXL', 'PB', 'PBM', 'PD', 'PDV', 'PER', 'PI', 'PO3',\r\n    'PO4', 'PR', 'PT', 'PT4', 'PTN', 'RB', 'RH3', 'RHD', 'RU', 'SB', 'SCN', 'SE4',\r\n    'SEK', 'SM', 'SMO', 'SO3', 'SO4', 'SR', 'T1A', 'TB', 'TBA', 'TCN', 'TEA', 'TH',\r\n    'THE', 'TL', 'TMA', 'TRA', 'UNX', 'V', 'VN3', 'VO4', 'W', 'WO5', 'Y1', 'YB',\r\n    'YB2', 'YH', 'YT3', 'ZCM', 'ZN', 'ZN2', 'ZN3', 'ZNO', 'ZO3',\r\n    // additional ion names\r\n    'OHX'\r\n];\r\n// all chemical components with the word \"%saccharide%\" in their type, Sep 2016\r\n//\r\n// SET SESSION group_concat_max_len = 1000000;\r\n// select GROUP_CONCAT(id_ ORDER BY id_ ASC SEPARATOR '\", \"') from\r\n// (\r\n//     SELECT count(obj_id), id_\r\n//     FROM pdb.chem_comp WHERE type like \"%SACCHARIDE%\"\r\n//     GROUP BY id_\r\n// ) AS t1;\r\nexport const SaccharideNames = [\r\n    '045', '0AT', '0BD', '0MK', '0NZ', '0TS', '0V4', '0XY', '0YT', '10M',\r\n    '147', '149', '14T', '15L', '16G', '18T', '18Y', '1AR', '1BW', '1GL', '1GN',\r\n    '1JB', '1LL', '1NA', '1S3', '26M', '26Q', '26R', '26V', '26W', '26Y', '27C',\r\n    '289', '291', '293', '2DG', '2F8', '2FG', '2FL', '2FP', '2GL', '2M4', '2M5',\r\n    '32O', '34V', '3CM', '3DO', '3DY', '3FM', '3LR', '3MF', '3MG', '3SA', '3ZW',\r\n    '46D', '46M', '46Z', '48Z', '4CQ', '4GC', '4NN', '50A', '5DI', '5GF', '5MM',\r\n    '5RP', '5SA', '5SP', '64K', '6PG', '6SA', '7JZ', '7SA', 'A1Q', 'A2G', 'AAB',\r\n    'AAL', 'AAO', 'ABC', 'ABD', 'ABE', 'ABF', 'ABL', 'ACG', 'ACI', 'ACR', 'ACX',\r\n    'ADA', 'ADG', 'ADR', 'AF1', 'AFD', 'AFL', 'AFO', 'AFP', 'AFR', 'AGC', 'AGH',\r\n    'AGL', 'AHR', 'AIG', 'ALL', 'ALX', 'AMU', 'AOG', 'AOS', 'ARA', 'ARB', 'ARE',\r\n    'ARI', 'ASG', 'ASO', 'AXP', 'AXR', 'B0D', 'B16', 'B2G', 'B4G', 'B6D', 'B8D',\r\n    'B9D', 'BBK', 'BCD', 'BDG', 'BDP', 'BDR', 'BEM', 'BFP', 'BGC', 'BGL', 'BGP',\r\n    'BGS', 'BHG', 'BMA', 'BMX', 'BNG', 'BNX', 'BOG', 'BRI', 'BXF', 'BXP', 'BXX',\r\n    'BXY', 'C3X', 'C4X', 'C5X', 'CAP', 'CBI', 'CBK', 'CBS', 'CDR', 'CEG', 'CGF',\r\n    'CHO', 'CR1', 'CR6', 'CRA', 'CT3', 'CTO', 'CTR', 'CTT', 'D6G', 'DAF', 'DAG',\r\n    'DDA', 'DDB', 'DDL', 'DEL', 'DFR', 'DFX', 'DG0', 'DGC', 'DGD', 'DGM', 'DGS',\r\n    'DIG', 'DLF', 'DLG', 'DMU', 'DNO', 'DOM', 'DP5', 'DQQ', 'DQR', 'DR2', 'DR3',\r\n    'DR4', 'DRI', 'DSR', 'DT6', 'DVC', 'E4P', 'E5G', 'EAG', 'EBG', 'EBQ', 'EGA',\r\n    'EJT', 'EPG', 'ERE', 'ERI', 'F1P', 'F1X', 'F6P', 'FBP', 'FCA', 'FCB', 'FCT',\r\n    'FDP', 'FDQ', 'FFC', 'FIX', 'FMO', 'FRU', 'FSI', 'FU4', 'FUB', 'FUC', 'FUD',\r\n    'FUL', 'FXP', 'G16', 'G1P', 'G2F', 'G3I', 'G4D', 'G4S', 'G6D', 'G6P', 'G6S',\r\n    'GAC', 'GAD', 'GAL', 'GC1', 'GC4', 'GCD', 'GCN', 'GCO', 'GCS', 'GCT', 'GCU',\r\n    'GCV', 'GCW', 'GCX', 'GE1', 'GFG', 'GFP', 'GIV', 'GL0', 'GL2', 'GL5', 'GL6',\r\n    'GL7', 'GL9', 'GLA', 'GLB', 'GLC', 'GLD', 'GLF', 'GLG', 'GLO', 'GLP', 'GLS',\r\n    'GLT', 'GLW', 'GMH', 'GN1', 'GNX', 'GP1', 'GP4', 'GPH', 'GPM', 'GQ1', 'GQ2',\r\n    'GQ4', 'GS1', 'GS4', 'GSA', 'GSD', 'GTE', 'GTH', 'GTK', 'GTR', 'GTZ', 'GU0',\r\n    'GU1', 'GU2', 'GU3', 'GU4', 'GU5', 'GU6', 'GU8', 'GU9', 'GUF', 'GUP', 'GUZ',\r\n    'GYP', 'GYV', 'H2P', 'HDL', 'HMS', 'HS2', 'HSD', 'HSG', 'HSH', 'HSJ', 'HSQ',\r\n    'HSR', 'HSU', 'HSX', 'HSY', 'HSZ', 'IAB', 'IDG', 'IDR', 'IDS', 'IDT', 'IDU',\r\n    'IDX', 'IDY', 'IMK', 'IN1', 'IPT', 'ISL', 'KBG', 'KD2', 'KDA', 'KDM', 'KDO',\r\n    'KFN', 'KO1', 'KO2', 'KTU', 'L6S', 'LAG', 'LAI', 'LAK', 'LAO', 'LAT', 'LB2',\r\n    'LBT', 'LCN', 'LDY', 'LGC', 'LGU', 'LM2', 'LMT', 'LMU', 'LOG', 'LOX', 'LPK',\r\n    'LSM', 'LTM', 'LVZ', 'LXB', 'LXZ', 'M1F', 'M3M', 'M6P', 'M8C', 'MA1', 'MA2',\r\n    'MA3', 'MAB', 'MAG', 'MAL', 'MAN', 'MAT', 'MAV', 'MAW', 'MBG', 'MCU', 'MDA',\r\n    'MDM', 'MDP', 'MFA', 'MFB', 'MFU', 'MG5', 'MGA', 'MGL', 'MLB', 'MMA', 'MMN',\r\n    'MN0', 'MRP', 'MTT', 'MUG', 'MVP', 'MXY', 'N1L', 'N9S', 'NAA', 'NAG', 'NBG',\r\n    'NDG', 'NED', 'NG1', 'NG6', 'NGA', 'NGB', 'NGC', 'NGE', 'NGF', 'NGL', 'NGS',\r\n    'NGY', 'NHF', 'NM6', 'NM9', 'NTF', 'NTO', 'NTP', 'NXD', 'NYT', 'OPG', 'OPM',\r\n    'ORP', 'OX2', 'P3M', 'P53', 'P6P', 'PA5', 'PNA', 'PNG', 'PNW', 'PRP', 'PSJ',\r\n    'PSV', 'PTQ', 'QDK', 'QPS', 'QV4', 'R1P', 'R1X', 'R2B', 'R5P', 'RAA', 'RAE',\r\n    'RAF', 'RAM', 'RAO', 'RAT', 'RB5', 'RBL', 'RCD', 'RDP', 'REL', 'RER', 'RF5',\r\n    'RG1', 'RGG', 'RHA', 'RIB', 'RIP', 'RNS', 'RNT', 'ROB', 'ROR', 'RPA', 'RST',\r\n    'RUB', 'RUU', 'RZM', 'S6P', 'S7P', 'SA0', 'SCR', 'SDD', 'SF6', 'SF9', 'SG4',\r\n    'SG5', 'SG6', 'SG7', 'SGA', 'SGC', 'SGD', 'SGN', 'SGS', 'SHB', 'SHG', 'SI3',\r\n    'SIO', 'SOE', 'SOL', 'SSG', 'SUC', 'SUP', 'SUS', 'T6P', 'T6T', 'TAG', 'TCB',\r\n    'TDG', 'TGK', 'TGY', 'TH1', 'TIA', 'TM5', 'TM6', 'TM9', 'TMR', 'TMX', 'TOA',\r\n    'TOC', 'TRE', 'TYV', 'UCD', 'UDC', 'VG1', 'X0X', 'X1X', 'X2F', 'X4S', 'X5S',\r\n    'X6X', 'XBP', 'XDN', 'XDP', 'XIF', 'XIM', 'XLF', 'XLS', 'XMM', 'XUL', 'XXR',\r\n    'XYP', 'XYS', 'YO5', 'Z3Q', 'Z6J', 'Z9M', 'ZDC', 'ZDM'\r\n];\r\nexport const ProteinBackboneAtoms = [\r\n    'CA', 'C', 'N', 'O',\r\n    'O1', 'O2', 'OC1', 'OC2', 'OX1', 'OXT', 'OT1', 'OT2',\r\n    'H', 'H1', 'H2', 'H3', 'HA', 'HN',\r\n    'BB'\r\n];\r\nexport const NucleicBackboneAtoms = [\r\n    'P', 'OP1', 'OP2', 'HOP2', 'HOP3',\r\n    \"O2'\", \"O3'\", \"O4'\", \"O5'\", \"C1'\", \"C2'\", \"C3'\", \"C4'\", \"C5'\",\r\n    \"H1'\", \"H2'\", \"H2''\", \"HO2'\", \"H3'\", \"H4'\", \"H5'\", \"H5''\", \"HO3'\", \"HO5'\",\r\n    'O2*', 'O3*', 'O4*', 'O5*', 'C1*', 'C2*', 'C3*', 'C4*', 'C5*'\r\n];\r\nexport const ResidueTypeAtoms = {};\r\nResidueTypeAtoms[ProteinBackboneType] = {\r\n    trace: 'CA',\r\n    direction1: 'C',\r\n    direction2: ['O', 'OC1', 'O1', 'OX1', 'OXT', 'OT1', 'OT2'],\r\n    backboneStart: 'N',\r\n    backboneEnd: 'C'\r\n};\r\nResidueTypeAtoms[RnaBackboneType] = {\r\n    trace: [\"C4'\", 'C4*'],\r\n    direction1: [\"C1'\", 'C1*'],\r\n    direction2: [\"C3'\", 'C3*'],\r\n    backboneStart: 'P',\r\n    backboneEnd: [\"O3'\", 'O3*']\r\n};\r\nResidueTypeAtoms[DnaBackboneType] = {\r\n    trace: [\"C3'\", 'C3*'],\r\n    direction1: [\"C2'\", 'C2*'],\r\n    direction2: [\"O4'\", 'O4*'],\r\n    backboneStart: 'P',\r\n    backboneEnd: [\"O3'\", 'O3*']\r\n};\r\nResidueTypeAtoms[CgProteinBackboneType] = {\r\n    trace: ['CA', 'BB'],\r\n    backboneStart: ['CA', 'BB'],\r\n    backboneEnd: ['CA', 'BB']\r\n};\r\nResidueTypeAtoms[CgRnaBackboneType] = {\r\n    trace: [\"C4'\", 'C4*', 'P'],\r\n    backboneStart: [\"C4'\", 'C4*', 'P'],\r\n    backboneEnd: [\"C4'\", 'C4*', 'P']\r\n};\r\nResidueTypeAtoms[CgDnaBackboneType] = {\r\n    trace: [\"C3'\", 'C3*', \"C2'\", 'P'],\r\n    backboneStart: [\"C3'\", 'C3*', \"C2'\", 'P'],\r\n    backboneEnd: [\"C3'\", 'C3*', \"C2'\", 'P']\r\n};\r\nResidueTypeAtoms[UnknownBackboneType] = {};\r\n//# sourceMappingURL=structure-constants.js.map","/**\r\n * @file Geometry\r\n * @author Fred Ludlow <Fred.Ludlow@astx.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { degToRad } from '../math/math-utils';\r\nexport function assignGeometry(totalCoordination) {\r\n    switch (totalCoordination) {\r\n        case 0:\r\n            return 0 /* Spherical */;\r\n        case 1:\r\n            return 1 /* Terminal */;\r\n        case 2:\r\n            return 2 /* Linear */;\r\n        case 3:\r\n            return 3 /* Trigonal */;\r\n        case 4:\r\n            return 4 /* Tetrahedral */;\r\n        default:\r\n            return 8 /* Unknown */;\r\n    }\r\n}\r\nexport const Angles = new Map([\r\n    [2 /* Linear */, degToRad(180)],\r\n    [3 /* Trigonal */, degToRad(120)],\r\n    [4 /* Tetrahedral */, degToRad(109.4721)],\r\n    [6 /* Octahedral */, degToRad(90)]\r\n]);\r\n/**\r\n * Calculate the angles x-1-2 for all x where x is a heavy atom bonded to ap1.\r\n * @param  {AtomProxy} ap1 First atom (angle centre)\r\n * @param  {AtomProxy} ap2 Second atom\r\n * @return {number[]}        Angles in radians\r\n */\r\nexport function calcAngles(ap1, ap2) {\r\n    let angles = [];\r\n    const d1 = new Vector3();\r\n    const d2 = new Vector3();\r\n    d1.subVectors(ap2, ap1);\r\n    ap1.eachBondedAtom(x => {\r\n        if (x.number !== 1 /* H */) {\r\n            d2.subVectors(x, ap1);\r\n            angles.push(d1.angleTo(d2));\r\n        }\r\n    });\r\n    return angles;\r\n}\r\n/**\r\n * Find two neighbours of ap1 to define a plane (if possible) and\r\n * measure angle out of plane to ap2\r\n * @param  {AtomProxy} ap1 First atom (angle centre)\r\n * @param  {AtomProxy} ap2 Second atom (out-of-plane)\r\n * @return {number}        Angle from plane to second atom\r\n */\r\nexport function calcPlaneAngle(ap1, ap2) {\r\n    const x1 = ap1.clone();\r\n    const v12 = new Vector3();\r\n    v12.subVectors(ap2, ap1);\r\n    const neighbours = [new Vector3(), new Vector3()];\r\n    let ni = 0;\r\n    ap1.eachBondedAtom(x => {\r\n        if (ni > 1) {\r\n            return;\r\n        }\r\n        if (x.number !== 1 /* H */) {\r\n            x1.index = x.index;\r\n            neighbours[ni++].subVectors(x, ap1);\r\n        }\r\n    });\r\n    if (ni === 1) {\r\n        x1.eachBondedAtom(x => {\r\n            if (ni > 1) {\r\n                return;\r\n            }\r\n            if (x.number !== 1 /* H */ && x.index !== ap1.index) {\r\n                neighbours[ni++].subVectors(x, ap1);\r\n            }\r\n        });\r\n    }\r\n    if (ni !== 2) {\r\n        return;\r\n    }\r\n    const cp = neighbours[0].cross(neighbours[1]);\r\n    return Math.abs((Math.PI / 2) - cp.angleTo(v12));\r\n}\r\n//# sourceMappingURL=geometry.js.map","/**\r\n * @file Valence Model\r\n * @author Fred Ludlow <Fred.Ludlow@astx.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { assignGeometry } from './geometry';\r\n/**\r\n * Are we involved in some kind of pi system. Either explicitly forming\r\n * double bond or N, O next to a double bond, except:\r\n *\r\n *   N,O with degree 4 cannot be conjugated.\r\n *   N,O adjacent to P=O or S=O do not qualify (keeps sulfonamide N sp3 geom)\r\n */\r\nfunction isConjugated(a) {\r\n    const _bp = a.structure.getBondProxy();\r\n    const atomicNumber = a.number;\r\n    const hetero = atomicNumber === 8 /* O */ || atomicNumber === 7 /* N */;\r\n    if (hetero && a.bondCount === 4) {\r\n        return false;\r\n    }\r\n    let flag = false;\r\n    a.eachBond(b => {\r\n        if (b.bondOrder > 1) {\r\n            flag = true;\r\n            return;\r\n        }\r\n        if (hetero) {\r\n            const a2 = b.getOtherAtom(a);\r\n            a2.eachBond(b2 => {\r\n                if (b2.bondOrder > 1) {\r\n                    const atomicNumber2 = a2.number;\r\n                    if ((atomicNumber2 === 15 /* P */ || atomicNumber2 === 16 /* S */) &&\r\n                        b2.getOtherAtom(a2).number === 8 /* O */) {\r\n                        return;\r\n                    }\r\n                    flag = true;\r\n                }\r\n            }, _bp); // Avoid reuse of structure._bp\r\n        }\r\n    });\r\n    return flag;\r\n}\r\n/* function hasExplicitCharge(r: ResidueProxy) {\r\n  let flag = false\r\n  r.eachAtom(a => {\r\n    if (a.formalCharge != null && a.formalCharge !== 0) flag = true\r\n  })\r\n  return flag\r\n}\r\n\r\nfunction hasExplicitHydrogen(r: ResidueProxy) {\r\n  let flag = false\r\n  r.eachAtom(a => {\r\n    if (a.number === Elements.H) flag = true\r\n  })\r\n  return flag\r\n} */\r\nexport function explicitValence(a) {\r\n    let v = 0;\r\n    a.eachBond(b => v += b.bondOrder);\r\n    return v;\r\n}\r\n/**\r\n * Attempts to produce a consistent charge and implicit\r\n * H-count for an atom.\r\n *\r\n * If both params.assignCharge and params.assignH, this\r\n * approximately followsthe rules described in\r\n * https://docs.eyesopen.com/toolkits/python/oechemtk/valence.html#openeye-hydrogen-count-model\r\n *\r\n * If only charge or hydrogens are to be assigned it takes\r\n * a much simpler view and deduces one from the other\r\n *\r\n * @param {AtomProxy}           a      Atom to analyze\r\n * @param {assignChargeHParams} params What to assign\r\n */\r\nexport function calculateHydrogensCharge(a, params) {\r\n    const hydrogenCount = a.bondToElementCount(1 /* H */);\r\n    let charge = a.formalCharge || 0;\r\n    const assignCharge = (params.assignCharge === 'always' ||\r\n        (params.assignCharge === 'auto' && charge === 0));\r\n    const assignH = (params.assignH === 'always' ||\r\n        (params.assignH === 'auto' && hydrogenCount === 0));\r\n    const degree = a.bondCount;\r\n    const valence = explicitValence(a);\r\n    const conjugated = isConjugated(a);\r\n    const multiBond = (valence - degree > 0);\r\n    let implicitHCount = 0;\r\n    let geom = 8 /* Unknown */;\r\n    switch (a.number) {\r\n        case 1 /* H */:\r\n            if (assignCharge) {\r\n                if (degree === 0) {\r\n                    charge = 1;\r\n                    geom = 0 /* Spherical */;\r\n                }\r\n                else if (degree === 1) {\r\n                    charge = 0;\r\n                    geom = 1 /* Terminal */;\r\n                }\r\n            }\r\n            break;\r\n        case 6 /* C */:\r\n            // TODO: Isocyanide?\r\n            if (assignCharge) {\r\n                charge = 0; // Assume carbon always neutral\r\n            }\r\n            if (assignH) {\r\n                // Carbocation/carbanion are 3-valent\r\n                implicitHCount = Math.max(0, 4 - valence - Math.abs(charge));\r\n            }\r\n            // Carbocation is planar, carbanion is tetrahedral\r\n            geom = assignGeometry(degree + implicitHCount + Math.max(0, -charge));\r\n            break;\r\n        case 7 /* N */:\r\n            if (assignCharge) {\r\n                if (!assignH) { // Trust input H explicitly:\r\n                    charge = valence - 3;\r\n                }\r\n                else if (conjugated && valence < 4) {\r\n                    // Neutral unless amidine/guanidine double-bonded N:\r\n                    if (degree - hydrogenCount === 1 && valence - hydrogenCount === 2) {\r\n                        charge = 1;\r\n                    }\r\n                    else {\r\n                        charge = 0;\r\n                    }\r\n                }\r\n                else {\r\n                    // Sulfonamide nitrogen and classed as sp3 in conjugation model but\r\n                    // they won't be charged\r\n                    // Don't assign charge to nitrogens bound to metals\r\n                    let flag = false;\r\n                    a.eachBondedAtom(ba => {\r\n                        if (ba.number === 16 /* S */ || ba.isMetal())\r\n                            flag = true;\r\n                    });\r\n                    if (flag)\r\n                        charge = 0;\r\n                    else\r\n                        charge = 1;\r\n                    // TODO: Planarity sanity check?\r\n                }\r\n            }\r\n            if (assignH) {\r\n                // NH4+ -> 4, 1' amide -> 2, nitro N/N+ depiction -> 0\r\n                implicitHCount = Math.max(0, 3 - valence + charge);\r\n            }\r\n            if (conjugated && !multiBond) {\r\n                // Amide, anilinic N etc. cannot consider lone-pair for geometry purposes\r\n                // Anilinic N geometry is depenent on ring electronics, for our purposes we\r\n                // assume it's trigonal!\r\n                geom = assignGeometry(degree + implicitHCount - charge);\r\n            }\r\n            else {\r\n                // Everything else, pyridine, amine, nitrile, lp plays normal role:\r\n                geom = assignGeometry(degree + implicitHCount + 1 - charge);\r\n            }\r\n            break;\r\n        case 8 /* O */:\r\n            if (assignCharge) {\r\n                if (!assignH) {\r\n                    charge = valence - 2; //\r\n                }\r\n                if (valence === 1) {\r\n                    a.eachBondedAtom(ba => {\r\n                        ba.eachBond(b => {\r\n                            const oa = b.getOtherAtom(ba);\r\n                            if (oa.index !== a.index && oa.number === 8 /* O */ && b.bondOrder === 2) {\r\n                                charge = -1;\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n            if (assignH) {\r\n                // ethanol -> 1, carboxylate -> -1\r\n                implicitHCount = Math.max(0, 2 - valence + charge);\r\n            }\r\n            if (conjugated && !multiBond) {\r\n                // carboxylate OH, phenol OH, one lone-pair taken up with conjugation\r\n                geom = assignGeometry(degree + implicitHCount - charge + 1);\r\n            }\r\n            else {\r\n                // Carbonyl (trigonal)\r\n                geom = assignGeometry(degree + implicitHCount - charge + 2);\r\n            }\r\n            break;\r\n        // Only handles thiols/thiolates/thioether/sulfonium. Sulfoxides and higher\r\n        // oxidiation states are assumed neutral S (charge carried on O if required)\r\n        case 16 /* S */:\r\n            if (assignCharge) {\r\n                if (!assignH) {\r\n                    if (valence <= 3 && !a.bondToElementCount(8 /* O */)) {\r\n                        charge = valence - 2; // e.g. explicitly deprotonated thiol\r\n                    }\r\n                    else {\r\n                        charge = 0;\r\n                    }\r\n                }\r\n            }\r\n            if (assignH) {\r\n                if (valence < 2) {\r\n                    implicitHCount = Math.max(0, 2 - valence + charge);\r\n                }\r\n            }\r\n            if (valence <= 3) {\r\n                // Thiol, thiolate, tioether -> tetrahedral\r\n                geom = assignGeometry(degree + implicitHCount - charge + 2);\r\n            }\r\n            break;\r\n        case 9 /* F */:\r\n        case 17 /* CL */:\r\n        case 35 /* BR */:\r\n        case 53 /* I */:\r\n        case 85 /* AT */:\r\n            // Never implicitly protonate halides\r\n            if (assignCharge) {\r\n                charge = valence - 1;\r\n            }\r\n            break;\r\n        case 3 /* LI */:\r\n        case 11 /* NA */:\r\n        case 19 /* K */:\r\n        case 37 /* RB */:\r\n        case 55 /* CS */:\r\n        case 87 /* FR */:\r\n            if (assignCharge) {\r\n                charge = 1 - valence;\r\n            }\r\n            break;\r\n        case 4 /* BE */:\r\n        case 12 /* MG */:\r\n        case 20 /* CA */:\r\n        case 38 /* SR */:\r\n        case 56 /* BA */:\r\n        case 88 /* RA */:\r\n            if (assignCharge) {\r\n                charge = 2 - valence;\r\n            }\r\n            break;\r\n        default:\r\n            console.warn('Requested charge, protonation for an unhandled element', a.element);\r\n    }\r\n    return [charge, implicitHCount, implicitHCount + hydrogenCount, geom];\r\n}\r\nexport function ValenceModel(data, params) {\r\n    const structure = data.structure;\r\n    const n = structure.atomCount;\r\n    const charge = new Int8Array(n);\r\n    const implicitH = new Int8Array(n);\r\n    const totalH = new Int8Array(n);\r\n    const idealGeometry = new Int8Array(n);\r\n    structure.eachAtom(a => {\r\n        const i = a.index;\r\n        const [chg, implH, totH, geom] = calculateHydrogensCharge(a, params);\r\n        charge[i] = chg;\r\n        implicitH[i] = implH;\r\n        totalH[i] = totH;\r\n        idealGeometry[i] = geom;\r\n    });\r\n    return { charge, implicitH, totalH, idealGeometry };\r\n}\r\n//# sourceMappingURL=valence-model.js.map","import SpatialHash from '../geometry/spatial-hash';\r\nimport { ValenceModel } from '../chemistry/valence-model';\r\nexport function createData(structure) {\r\n    return {\r\n        structure,\r\n        '@spatialLookup': undefined,\r\n        '@valenceModel': undefined\r\n    };\r\n}\r\nexport function spatialLookup(data) {\r\n    if (data['@spatialLookup'])\r\n        return data['@spatialLookup'];\r\n    const lookup = new SpatialHash(data.structure.atomStore, data.structure.boundingBox);\r\n    data['@spatialLookup'] = lookup;\r\n    return lookup;\r\n}\r\nexport function valenceModel(data) {\r\n    if (data['@valenceModel'])\r\n        return data['@valenceModel'];\r\n    const valenceModel = ValenceModel(data, { assignCharge: 'auto', assignH: 'auto' });\r\n    data['@valenceModel'] = valenceModel;\r\n    return valenceModel;\r\n}\r\n//# sourceMappingURL=data.js.map","/**\r\n * @file Functional Groups\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\n/**\r\n * Nitrogen in a quaternary amine\r\n */\r\nexport function isQuaternaryAmine(a) {\r\n    return (a.number === 7 &&\r\n        a.bondCount === 4 &&\r\n        a.bondToElementCount(1 /* H */) === 0);\r\n}\r\n/**\r\n * Nitrogen in a tertiary amine\r\n */\r\nexport function isTertiaryAmine(a, idealValence) {\r\n    return (a.number === 7 &&\r\n        a.bondCount >= 3 &&\r\n        idealValence === 3);\r\n}\r\n/**\r\n * Nitrogen in an imide\r\n */\r\nexport function isImide(a) {\r\n    let flag = false;\r\n    if (a.number === 7 /* N */ && (a.bondCount - a.bondToElementCount(1 /* H */)) === 2) {\r\n        let carbonylCount = 0;\r\n        a.eachBondedAtom(ba => {\r\n            if (isCarbonyl(ba))\r\n                ++carbonylCount;\r\n        });\r\n        flag = carbonylCount === 2;\r\n    }\r\n    return flag;\r\n}\r\n/**\r\n * Nitrogen in an amide\r\n */\r\nexport function isAmide(a) {\r\n    let flag = false;\r\n    if (a.number === 7 /* N */ && (a.bondCount - a.bondToElementCount(1 /* H */)) === 2) {\r\n        let carbonylCount = 0;\r\n        a.eachBondedAtom(ba => {\r\n            if (isCarbonyl(ba))\r\n                ++carbonylCount;\r\n        });\r\n        flag = carbonylCount === 1;\r\n    }\r\n    return flag;\r\n}\r\n/**\r\n * Sulfur in a sulfonium group\r\n */\r\nexport function isSulfonium(a) {\r\n    return (a.number === 16 &&\r\n        a.bondCount === 3 &&\r\n        a.bondToElementCount(1 /* H */) === 0);\r\n}\r\n/**\r\n * Sulfur in a sulfonic acid or sulfonate group\r\n */\r\nexport function isSulfonicAcid(a) {\r\n    return (a.number === 16 &&\r\n        a.bondToElementCount(8 /* O */) === 3);\r\n}\r\n/**\r\n * Sulfur in a sulfate group\r\n */\r\nexport function isSulfate(a) {\r\n    return (a.number === 16 &&\r\n        a.bondToElementCount(8 /* O */) === 4);\r\n}\r\n/**\r\n * Phosphor in a phosphate group\r\n */\r\nexport function isPhosphate(a) {\r\n    return (a.number === 15 &&\r\n        a.bondToElementCount(8 /* O */) === a.bondCount);\r\n}\r\n/**\r\n * Halogen with one bond to a carbon\r\n */\r\nexport function isHalocarbon(a) {\r\n    return (a.isHalogen() &&\r\n        a.bondCount === 1 &&\r\n        a.bondToElementCount(6 /* C */) === 1);\r\n}\r\n/**\r\n * Carbon in a carbonyl/acyl group\r\n */\r\nexport function isCarbonyl(a) {\r\n    let flag = false;\r\n    if (a.number === 6 /* C */) {\r\n        a.eachBond(b => {\r\n            if (b.bondOrder === 2 && b.getOtherAtom(a).number === 8 /* O */) {\r\n                flag = true;\r\n            }\r\n        });\r\n    }\r\n    return flag;\r\n}\r\n/**\r\n * Carbon in a carboxylate group\r\n */\r\nexport function isCarboxylate(a) {\r\n    let terminalOxygenCount = 0;\r\n    if (a.number === 6 &&\r\n        a.bondToElementCount(8 /* O */) === 2 &&\r\n        a.bondToElementCount(6 /* C */) === 1) {\r\n        a.eachBondedAtom(ba => {\r\n            if (ba.number === 8 && ba.bondCount - ba.bondToElementCount(1 /* H */) === 1) {\r\n                ++terminalOxygenCount;\r\n            }\r\n        });\r\n    }\r\n    return terminalOxygenCount === 2;\r\n}\r\n/**\r\n * Carbon in a guanidine group\r\n */\r\nexport function isGuanidine(a) {\r\n    let terminalNitrogenCount = 0;\r\n    if (a.number === 6 &&\r\n        a.bondCount === 3 &&\r\n        a.bondToElementCount(7 /* N */) === 3) {\r\n        a.eachBondedAtom(ba => {\r\n            if (ba.bondCount - ba.bondToElementCount(1 /* H */) === 1) {\r\n                ++terminalNitrogenCount;\r\n            }\r\n        });\r\n    }\r\n    return terminalNitrogenCount === 2;\r\n}\r\n/**\r\n * Carbon in a acetamidine group\r\n */\r\nexport function isAcetamidine(a) {\r\n    let terminalNitrogenCount = 0;\r\n    if (a.number === 6 &&\r\n        a.bondCount === 3 &&\r\n        a.bondToElementCount(7 /* N */) === 2 &&\r\n        a.bondToElementCount(6 /* C */) === 1) {\r\n        a.eachBondedAtom(ba => {\r\n            if (ba.bondCount - ba.bondToElementCount(1 /* H */) === 1) {\r\n                ++terminalNitrogenCount;\r\n            }\r\n        });\r\n    }\r\n    return terminalNitrogenCount === 2;\r\n}\r\nconst PolarElements = [\r\n    7 /* N */, 8 /* O */, 16 /* S */,\r\n    9 /* F */, 17 /* CL */, 35 /* BR */, 53 /* I */\r\n];\r\nexport function isPolar(a) {\r\n    return PolarElements.includes(a.number);\r\n}\r\nexport function hasPolarNeighbour(a) {\r\n    let flag = false;\r\n    a.eachBondedAtom(ba => {\r\n        if (isPolar(ba))\r\n            flag = true;\r\n    });\r\n    return flag;\r\n}\r\nexport function hasAromaticNeighbour(a) {\r\n    let flag = false;\r\n    a.eachBondedAtom(function (bap) {\r\n        if (bap.aromatic)\r\n            flag = true;\r\n    });\r\n    return flag;\r\n}\r\n//# sourceMappingURL=functional-groups.js.map","/**\r\n * @file Charged\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @author Fred Ludlow <Fred.Ludlow@astx.com>\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { defaults } from '../../utils';\r\nimport { radToDeg } from '../../math/math-utils';\r\nimport { AA3, Bases } from '../../structure/structure-constants';\r\nimport { valenceModel } from '../../structure/data';\r\nimport { isGuanidine, isAcetamidine, isSulfonicAcid, isPhosphate, isSulfate, isCarboxylate } from '../functional-groups';\r\nimport { addAtom, addFeature, createFeatureState, } from './features';\r\nimport { ContactDefaultParams, invalidAtomContact } from './contact';\r\nconst PositvelyCharged = ['ARG', 'HIS', 'LYS'];\r\nconst NegativelyCharged = ['GLU', 'ASP'];\r\nexport function addPositiveCharges(structure, features) {\r\n    const { charge } = valenceModel(structure.data);\r\n    const atomInGroupDict = {};\r\n    structure.eachResidue(r => {\r\n        if (PositvelyCharged.includes(r.resname)) {\r\n            const state = createFeatureState(1 /* PositiveCharge */);\r\n            r.eachAtom(a => {\r\n                if (a.number === 7 /* N */ && a.isSidechain()) {\r\n                    addAtom(state, a);\r\n                }\r\n            });\r\n            addFeature(features, state);\r\n        }\r\n        else if (!AA3.includes(r.resname) && !r.isNucleic()) {\r\n            r.eachAtom(a => {\r\n                let addGroup = false;\r\n                const state = createFeatureState(1 /* PositiveCharge */);\r\n                if (isGuanidine(a)) {\r\n                    state.group = 8 /* Guanidine */;\r\n                    addGroup = true;\r\n                }\r\n                else if (isAcetamidine(a)) {\r\n                    state.group = 9 /* Acetamidine */;\r\n                    addGroup = true;\r\n                }\r\n                if (addGroup) {\r\n                    a.eachBondedAtom(a => {\r\n                        if (a.number === 7 /* N */) {\r\n                            atomInGroupDict[a.index] = true;\r\n                            addAtom(state, a);\r\n                        }\r\n                    });\r\n                    addFeature(features, state);\r\n                }\r\n            });\r\n            r.eachAtom(a => {\r\n                const state = createFeatureState(1 /* PositiveCharge */);\r\n                if (charge[a.index] > 0) {\r\n                    if (!atomInGroupDict[a.index]) {\r\n                        addAtom(state, a);\r\n                        addFeature(features, state);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n}\r\nexport function addNegativeCharges(structure, features) {\r\n    const { charge } = valenceModel(structure.data);\r\n    const atomInGroupDict = {};\r\n    structure.eachResidue(r => {\r\n        if (NegativelyCharged.includes(r.resname)) {\r\n            const state = createFeatureState(2 /* NegativeCharge */);\r\n            r.eachAtom(a => {\r\n                if (a.number === 8 /* O */ && a.isSidechain()) {\r\n                    addAtom(state, a);\r\n                }\r\n            });\r\n            addFeature(features, state);\r\n        }\r\n        else if (Bases.includes(r.resname)) {\r\n            const state = createFeatureState(2 /* NegativeCharge */);\r\n            r.eachAtom(a => {\r\n                if (isPhosphate(a)) {\r\n                    state.group = 6 /* Phosphate */;\r\n                    a.eachBondedAtom(a => {\r\n                        if (a.number === 8 /* O */)\r\n                            addAtom(state, a);\r\n                    });\r\n                    addFeature(features, state);\r\n                }\r\n            });\r\n        }\r\n        else if (!AA3.includes(r.resname) && !Bases.includes(r.resname)) {\r\n            r.eachAtom(a => {\r\n                let addGroup = false;\r\n                const state = createFeatureState(2 /* NegativeCharge */);\r\n                if (isSulfonicAcid(a)) {\r\n                    state.group = 4 /* SulfonicAcid */;\r\n                    addGroup = true;\r\n                }\r\n                else if (isPhosphate(a)) {\r\n                    state.group = 6 /* Phosphate */;\r\n                    addGroup = true;\r\n                }\r\n                else if (isSulfate(a)) {\r\n                    state.group = 5 /* Sulfate */;\r\n                    addGroup = true;\r\n                }\r\n                else if (isCarboxylate(a)) {\r\n                    state.group = 10 /* Carboxylate */;\r\n                    addGroup = true;\r\n                }\r\n                if (addGroup) {\r\n                    a.eachBondedAtom(a => {\r\n                        if (a.number === 8 /* O */) {\r\n                            atomInGroupDict[a.index] = true;\r\n                            addAtom(state, a);\r\n                        }\r\n                    });\r\n                    addFeature(features, state);\r\n                }\r\n            });\r\n            r.eachAtom(a => {\r\n                const state = createFeatureState(2 /* NegativeCharge */);\r\n                if (charge[a.index] < 0) {\r\n                    if (!atomInGroupDict[a.index]) {\r\n                        addAtom(state, a);\r\n                        addFeature(features, state);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n}\r\nexport function addAromaticRings(structure, features) {\r\n    const a = structure.getAtomProxy();\r\n    structure.eachResidue(r => {\r\n        const rings = r.getAromaticRings();\r\n        if (rings) {\r\n            const offset = r.atomOffset;\r\n            rings.forEach(ring => {\r\n                const state = createFeatureState(3 /* AromaticRing */);\r\n                ring.forEach(i => {\r\n                    a.index = i + offset;\r\n                    addAtom(state, a);\r\n                });\r\n                addFeature(features, state);\r\n            });\r\n        }\r\n    });\r\n}\r\nfunction isIonicInteraction(ti, tj) {\r\n    return ((ti === 2 /* NegativeCharge */ && tj === 1 /* PositiveCharge */) ||\r\n        (ti === 1 /* PositiveCharge */ && tj === 2 /* NegativeCharge */));\r\n}\r\nfunction isPiStacking(ti, tj) {\r\n    return ti === 3 /* AromaticRing */ && tj === 3 /* AromaticRing */;\r\n}\r\nfunction isCationPi(ti, tj) {\r\n    return ((ti === 3 /* AromaticRing */ && tj === 1 /* PositiveCharge */) ||\r\n        (ti === 1 /* PositiveCharge */ && tj === 3 /* AromaticRing */));\r\n}\r\nexport function addChargedContacts(structure, contacts, params = {}) {\r\n    const maxIonicDist = defaults(params.maxIonicDist, ContactDefaultParams.maxIonicDist);\r\n    const maxPiStackingDist = defaults(params.maxPiStackingDist, ContactDefaultParams.maxPiStackingDist);\r\n    const maxPiStackingOffset = defaults(params.maxPiStackingOffset, ContactDefaultParams.maxPiStackingOffset);\r\n    const maxPiStackingAngle = defaults(params.maxPiStackingAngle, ContactDefaultParams.maxPiStackingAngle);\r\n    const maxCationPiDist = defaults(params.maxCationPiDist, ContactDefaultParams.maxCationPiDist);\r\n    const maxCationPiOffset = defaults(params.maxCationPiOffset, ContactDefaultParams.maxCationPiOffset);\r\n    const masterIdx = defaults(params.masterModelIndex, ContactDefaultParams.masterModelIndex);\r\n    const maxDistance = Math.max(maxIonicDist + 2, maxPiStackingDist, maxCationPiDist);\r\n    // const maxSaltBridgeDistSq = maxSaltBridgeDist * maxSaltBridgeDist\r\n    const maxPiStackingDistSq = maxPiStackingDist * maxPiStackingDist;\r\n    const maxCationPiDistSq = maxCationPiDist * maxCationPiDist;\r\n    const { features, spatialHash, contactStore, featureSet } = contacts;\r\n    const { types, centers, atomSets } = features;\r\n    const { x, y, z } = centers;\r\n    const n = types.length;\r\n    const ax = structure.atomStore.x;\r\n    const ay = structure.atomStore.y;\r\n    const az = structure.atomStore.z;\r\n    const ap1 = structure.getAtomProxy();\r\n    const ap2 = structure.getAtomProxy();\r\n    const areAtomSetsWithinDist = function (atomSet1, atomSet2, maxDist) {\r\n        const sn = atomSet1.length;\r\n        const sm = atomSet2.length;\r\n        for (let si = 0; si < sn; ++si) {\r\n            ap1.index = atomSet1[si];\r\n            for (let sj = 0; sj < sm; ++sj) {\r\n                ap2.index = atomSet2[sj];\r\n                if (ap1.distanceTo(ap2) <= maxDist) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    const v1 = new Vector3();\r\n    const v2 = new Vector3();\r\n    const v3 = new Vector3();\r\n    const d1 = new Vector3();\r\n    const d2 = new Vector3();\r\n    const n1 = new Vector3();\r\n    const n2 = new Vector3();\r\n    const getNormal = function (atoms, normal) {\r\n        v1.set(ax[atoms[0]], ay[atoms[0]], az[atoms[0]]);\r\n        v2.set(ax[atoms[1]], ay[atoms[1]], az[atoms[1]]);\r\n        v3.set(ax[atoms[2]], ay[atoms[2]], az[atoms[2]]);\r\n        d1.subVectors(v1, v2);\r\n        d2.subVectors(v1, v3);\r\n        normal.crossVectors(d1, d2);\r\n    };\r\n    const getOffset = function (i, j, normal) {\r\n        v1.set(x[i], y[i], z[i]);\r\n        v2.set(x[j], y[j], z[j]);\r\n        return v1.sub(v2).projectOnPlane(normal).add(v2).distanceTo(v2);\r\n    };\r\n    const add = function (i, j, ct) {\r\n        featureSet.setBits(i, j);\r\n        contactStore.addContact(i, j, ct);\r\n    };\r\n    for (let i = 0; i < n; ++i) {\r\n        spatialHash.eachWithin(x[i], y[i], z[i], maxDistance, (j, dSq) => {\r\n            if (j <= i)\r\n                return;\r\n            ap1.index = atomSets[i][0];\r\n            ap2.index = atomSets[j][0];\r\n            if (invalidAtomContact(ap1, ap2, masterIdx))\r\n                return;\r\n            const ti = types[i];\r\n            const tj = types[j];\r\n            if (isIonicInteraction(ti, tj)) {\r\n                if (areAtomSetsWithinDist(atomSets[i], atomSets[j], maxIonicDist)) {\r\n                    add(i, j, 1 /* IonicInteraction */);\r\n                }\r\n            }\r\n            else if (isPiStacking(ti, tj)) {\r\n                if (dSq <= maxPiStackingDistSq) {\r\n                    getNormal(atomSets[i], n1);\r\n                    getNormal(atomSets[j], n2);\r\n                    const angle = radToDeg(n1.angleTo(n2));\r\n                    const offset = Math.min(getOffset(i, j, n2), getOffset(j, i, n1));\r\n                    if (offset <= maxPiStackingOffset) {\r\n                        if (angle <= maxPiStackingAngle || angle >= 180 - maxPiStackingAngle) {\r\n                            add(i, j, 3 /* PiStacking */); // parallel\r\n                        }\r\n                        else if (angle <= maxPiStackingAngle + 90 && angle >= 90 - maxPiStackingAngle) {\r\n                            add(i, j, 3 /* PiStacking */); // t-shaped\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (isCationPi(ti, tj)) {\r\n                if (dSq <= maxCationPiDistSq) {\r\n                    const [l, k] = ti === 3 /* AromaticRing */ ? [i, j] : [j, i];\r\n                    getNormal(atomSets[l], n1);\r\n                    const offset = getOffset(k, l, n1);\r\n                    if (offset <= maxCationPiOffset) {\r\n                        add(l, k, 2 /* CationPi */);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=charged.js.map","/**\r\n * @file Hydrogen Bonds\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @author Fred Ludlow <Fred.Ludlow@astx.com>\r\n */\r\nimport { defaults } from '../../utils';\r\nimport { degToRad } from '../../math/math-utils';\r\nimport { valenceModel } from '../../structure/data';\r\nimport { Angles, calcAngles, calcPlaneAngle } from '../geometry';\r\nimport { addAtom, addFeature, createFeatureState, } from './features';\r\nimport { ContactDefaultParams, invalidAtomContact } from './contact';\r\n// Geometric characteristics of hydrogen bonds involving sulfur atoms in proteins\r\n// https://doi.org/10.1002/prot.22327\r\n// Satisfying Hydrogen Bonding Potential in Proteins (HBPLUS)\r\n// https://doi.org/10.1006/jmbi.1994.1334\r\n// http://www.csb.yale.edu/userguides/datamanip/hbplus/hbplus_descrip.html\r\n/**\r\n * Potential hydrogen donor\r\n */\r\nexport function addHydrogenDonors(structure, features) {\r\n    const { totalH } = valenceModel(structure.data);\r\n    structure.eachAtom(a => {\r\n        const state = createFeatureState(4 /* HydrogenDonor */);\r\n        const an = a.number;\r\n        if (isHistidineNitrogen(a)) {\r\n            // include both nitrogen atoms in histidine due to\r\n            // their often ambiguous protonation assignment\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n        else if (totalH[a.index] > 0 &&\r\n            (an === 7 /* N */ || an === 8 /* O */ || an === 16 /* S */)) {\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n    });\r\n}\r\n/**\r\n * Weak hydrogen donor.\r\n */\r\nexport function addWeakHydrogenDonors(structure, features) {\r\n    const { totalH } = valenceModel(structure.data);\r\n    structure.eachAtom(a => {\r\n        if (a.number === 6 /* C */ &&\r\n            totalH[a.index] > 0 &&\r\n            (a.bondToElementCount(7 /* N */) > 0 ||\r\n                a.bondToElementCount(8 /* O */) > 0 ||\r\n                inAromaticRingWithElectronNegativeElement(a))) {\r\n            const state = createFeatureState(9 /* WeakHydrogenDonor */);\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n    });\r\n}\r\nfunction inAromaticRingWithElectronNegativeElement(a) {\r\n    if (!a.isAromatic())\r\n        return false;\r\n    const ringData = a.residueType.getRings();\r\n    if (!ringData)\r\n        return false;\r\n    let hasElement = false;\r\n    const rings = ringData.rings;\r\n    rings.forEach(ring => {\r\n        if (hasElement)\r\n            return; // already found one\r\n        if (ring.some(idx => (a.index - a.residueAtomOffset) === idx)) { // in ring\r\n            hasElement = ring.some(idx => {\r\n                const atomTypeId = a.residueType.atomTypeIdList[idx];\r\n                const number = a.atomMap.get(atomTypeId).number;\r\n                return number === 7 /* N */ || number === 8 /* O */;\r\n            });\r\n        }\r\n    });\r\n    return hasElement;\r\n}\r\n/**\r\n * Potential hydrogen acceptor\r\n */\r\nexport function addHydrogenAcceptors(structure, features) {\r\n    const { charge, implicitH, idealGeometry } = valenceModel(structure.data);\r\n    structure.eachAtom(a => {\r\n        const state = createFeatureState(5 /* HydrogenAcceptor */);\r\n        const an = a.number;\r\n        if (an === 8 /* O */) {\r\n            // Basically assume all oxygen atoms are acceptors!\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n        else if (an === 7 /* N */) {\r\n            if (isHistidineNitrogen(a)) {\r\n                // include both nitrogen atoms in histidine due to\r\n                // their often ambiguous protonation assignment\r\n                addAtom(state, a);\r\n                addFeature(features, state);\r\n            }\r\n            else if (charge[a.index] < 1) {\r\n                // Neutral nitrogen might be an acceptor\r\n                // It must have at least one lone pair not conjugated\r\n                const totalBonds = a.bondCount + implicitH[a.index];\r\n                const ig = idealGeometry[a.index];\r\n                if ((ig === 4 /* Tetrahedral */ && totalBonds < 4) ||\r\n                    (ig === 3 /* Trigonal */ && totalBonds < 3) ||\r\n                    (ig === 2 /* Linear */ && totalBonds < 2)) {\r\n                    addAtom(state, a);\r\n                    addFeature(features, state);\r\n                }\r\n            }\r\n        }\r\n        else if (an === 16) { // S\r\n            if (a.resname === 'CYS' || a.resname === 'MET' || a.formalCharge === -1) {\r\n                addAtom(state, a);\r\n                addFeature(features, state);\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Atom that is only bound to carbon or hydrogen\r\n */\r\n// function isHydrocarbon (atom: AtomProxy) {\r\n//   let flag = true\r\n//   atom.eachBondedAtom(ap => {\r\n//     const e = ap.element\r\n//     if (e !== 'C' && e !== 'H') flag = false\r\n//   })\r\n//   return flag\r\n// }\r\nfunction isHistidineNitrogen(ap) {\r\n    return ap.resname === 'HIS' && ap.number == 7 /* N */ && ap.isRing();\r\n}\r\nfunction isBackboneHydrogenBond(ap1, ap2) {\r\n    return ap1.isBackbone() && ap2.isBackbone();\r\n}\r\nfunction isWaterHydrogenBond(ap1, ap2) {\r\n    return ap1.isWater() && ap2.isWater();\r\n}\r\nfunction isHydrogenBond(ti, tj) {\r\n    return ((ti === 5 /* HydrogenAcceptor */ && tj === 4 /* HydrogenDonor */) ||\r\n        (ti === 4 /* HydrogenDonor */ && tj === 5 /* HydrogenAcceptor */));\r\n}\r\nfunction isWeakHydrogenBond(ti, tj) {\r\n    return ((ti === 9 /* WeakHydrogenDonor */ && tj === 5 /* HydrogenAcceptor */) ||\r\n        (ti === 5 /* HydrogenAcceptor */ && tj === 9 /* WeakHydrogenDonor */));\r\n}\r\nfunction getHydrogenBondType(ap1, ap2) {\r\n    if (isWaterHydrogenBond(ap1, ap2)) {\r\n        return 9 /* WaterHydrogenBond */;\r\n    }\r\n    else if (isBackboneHydrogenBond(ap1, ap2)) {\r\n        return 10 /* BackboneHydrogenBond */;\r\n    }\r\n    else {\r\n        return 4 /* HydrogenBond */;\r\n    }\r\n}\r\n/**\r\n * All pairs of hydrogen donor and acceptor atoms\r\n */\r\nexport function addHydrogenBonds(structure, contacts, params = {}) {\r\n    const maxHbondDist = defaults(params.maxHbondDist, ContactDefaultParams.maxHbondDist);\r\n    const maxHbondSulfurDist = defaults(params.maxHbondSulfurDist, ContactDefaultParams.maxHbondSulfurDist);\r\n    const maxHbondAccAngle = degToRad(defaults(params.maxHbondAccAngle, ContactDefaultParams.maxHbondAccAngle));\r\n    const maxHbondDonAngle = degToRad(defaults(params.maxHbondDonAngle, ContactDefaultParams.maxHbondDonAngle));\r\n    const maxHbondAccPlaneAngle = degToRad(defaults(params.maxHbondAccPlaneAngle, ContactDefaultParams.maxHbondAccPlaneAngle));\r\n    const maxHbondDonPlaneAngle = degToRad(defaults(params.maxHbondDonPlaneAngle, ContactDefaultParams.maxHbondDonPlaneAngle));\r\n    const masterIdx = defaults(params.masterModelIndex, ContactDefaultParams.masterModelIndex);\r\n    const maxDist = Math.max(maxHbondDist, maxHbondSulfurDist);\r\n    const maxHbondDistSq = maxHbondDist * maxHbondDist;\r\n    const { features, spatialHash, contactStore, featureSet } = contacts;\r\n    const { types, centers, atomSets } = features;\r\n    const { x, y, z } = centers;\r\n    const n = types.length;\r\n    const { idealGeometry } = valenceModel(structure.data);\r\n    const donor = structure.getAtomProxy();\r\n    const acceptor = structure.getAtomProxy();\r\n    for (let i = 0; i < n; ++i) {\r\n        spatialHash.eachWithin(x[i], y[i], z[i], maxDist, (j, dSq) => {\r\n            if (j <= i)\r\n                return;\r\n            const ti = types[i];\r\n            const tj = types[j];\r\n            const isWeak = isWeakHydrogenBond(ti, tj);\r\n            if (!isWeak && !isHydrogenBond(ti, tj))\r\n                return;\r\n            const [l, k] = tj === 5 /* HydrogenAcceptor */ ? [i, j] : [j, i];\r\n            donor.index = atomSets[l][0];\r\n            acceptor.index = atomSets[k][0];\r\n            if (acceptor.index === donor.index)\r\n                return; // DA to self\r\n            if (invalidAtomContact(donor, acceptor, masterIdx))\r\n                return;\r\n            if (donor.number !== 16 /* S */ && acceptor.number !== 16 /* S */ && dSq > maxHbondDistSq)\r\n                return;\r\n            if (donor.connectedTo(acceptor))\r\n                return;\r\n            const donorAngles = calcAngles(donor, acceptor);\r\n            const idealDonorAngle = Angles.get(idealGeometry[donor.index]) || degToRad(120);\r\n            if (donorAngles.some(donorAngle => {\r\n                return Math.abs(idealDonorAngle - donorAngle) > maxHbondDonAngle;\r\n            }))\r\n                return;\r\n            if (idealGeometry[donor.index] === 3 /* Trigonal */) {\r\n                const outOfPlane = calcPlaneAngle(donor, acceptor);\r\n                if (outOfPlane !== undefined && outOfPlane > maxHbondDonPlaneAngle)\r\n                    return;\r\n            }\r\n            const acceptorAngles = calcAngles(acceptor, donor);\r\n            const idealAcceptorAngle = Angles.get(idealGeometry[acceptor.index]) || degToRad(120);\r\n            if (acceptorAngles.some(acceptorAngle => {\r\n                // Do not limit large acceptor angles\r\n                return idealAcceptorAngle - acceptorAngle > maxHbondAccAngle;\r\n            }))\r\n                return;\r\n            if (idealGeometry[acceptor.index] === 3 /* Trigonal */) {\r\n                const outOfPlane = calcPlaneAngle(acceptor, donor);\r\n                if (outOfPlane !== undefined && outOfPlane > maxHbondAccPlaneAngle)\r\n                    return;\r\n            }\r\n            featureSet.setBits(l, k);\r\n            const bondType = isWeak ? 8 /* WeakHydrogenBond */ : getHydrogenBondType(donor, acceptor);\r\n            contactStore.addContact(l, k, bondType);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=hydrogen-bonds.js.map","/**\r\n * @file Metal Binding\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { defaults } from '../../utils';\r\n// import { valenceModel } from '../../structure/data'\r\nimport { AA3, Bases } from '../../structure/structure-constants';\r\n// import { hasAromaticNeighbour } from '../functional-groups'\r\nimport { addAtom, addFeature, createFeatureState, } from './features';\r\nimport { ContactDefaultParams, invalidAtomContact } from './contact';\r\nconst IonicTypeMetals = [\r\n    3 /* LI */, 11 /* NA */, 19 /* K */, 37 /* RB */, 55 /* CS */,\r\n    12 /* MG */, 20 /* CA */, 38 /* SR */, 56 /* BA */, 13 /* AL */,\r\n    31 /* GA */, 49 /* IN */, 81 /* TL */, 21 /* SC */, 50 /* SN */,\r\n    82 /* PB */, 83 /* BI */, 51 /* SB */, 80 /* HG */\r\n];\r\n/**\r\n * Metal binding partners (dative bond or ionic-type interaction)\r\n */\r\nexport function addMetalBinding(structure, features) {\r\n    structure.eachAtom(a => {\r\n        let dative = false;\r\n        let ionic = false;\r\n        const isStandardAminoacid = AA3.includes(a.resname);\r\n        const isStandardBase = Bases.includes(a.resname);\r\n        if (!isStandardAminoacid && !isStandardBase) {\r\n            if (a.isHalogen() || a.number === 8 /* O */ || a.number === 16 /* S */) {\r\n                dative = true;\r\n                ionic = true;\r\n            }\r\n            else if (a.number === 7 /* N */) {\r\n                dative = true;\r\n            }\r\n        }\r\n        else if (isStandardAminoacid) {\r\n            // main chain oxygen atom or oxygen, nitrogen and sulfur from specific amino acids\r\n            if (a.number === 8 /* O */) {\r\n                if (['ASP', 'GLU', 'SER', 'THR', 'TYR', 'ASN', 'GLN'].includes(a.resname) && a.isSidechain()) {\r\n                    dative = true;\r\n                    ionic = true;\r\n                }\r\n                else if (a.isBackbone()) {\r\n                    dative = true;\r\n                    ionic = true;\r\n                }\r\n            }\r\n            else if (a.number === 16 /* S */ && 'CYS' === a.resname) {\r\n                dative = true;\r\n                ionic = true;\r\n            }\r\n            else if (a.number === 7 /* N */) {\r\n                if (a.resname === 'HIS' && a.isSidechain()) {\r\n                    dative = true;\r\n                }\r\n            }\r\n        }\r\n        else if (isStandardBase) {\r\n            // http://pubs.acs.org/doi/pdf/10.1021/acs.accounts.6b00253\r\n            // http://onlinelibrary.wiley.com/doi/10.1002/anie.200900399/full\r\n            if (a.number === 8 /* O */ && a.isBackbone()) {\r\n                dative = true;\r\n                ionic = true;\r\n            }\r\n            else if (['N3', 'N4', 'N7'].includes(a.atomname)) {\r\n                dative = true;\r\n            }\r\n            else if (['O2', 'O4', 'O6'].includes(a.atomname)) {\r\n                dative = true;\r\n                ionic = true;\r\n            }\r\n        }\r\n        if (dative) {\r\n            const state = createFeatureState(11 /* DativeBondPartner */);\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n        if (ionic) {\r\n            const state = createFeatureState(10 /* IonicTypePartner */);\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n    });\r\n}\r\n/**\r\n * Metal Pi complexation partner\r\n */\r\n// export function addMetalPiPartners (structure: Structure, features: Features) {\r\n//   const { charge } = valenceModel(structure.data)\r\n//   structure.eachAtom(a => {\r\n//     const state = createFeatureState(FeatureType.MetalPiPartner)\r\n//     const resname = a.resname\r\n//     const element = a.element\r\n//     const atomname = a.atomname\r\n//     if (!a.isPolymer()) {\r\n//       // water oxygen, as well as oxygen from carboxylate, phosphoryl, phenolate, alcohol;\r\n//       // nitrogen from imidazole; sulfur from thiolate\r\n//       if (element === 'O') {\r\n//         // Water oxygen\r\n//         if (a.bondCount === 0 || a.isWater()) {\r\n//           addAtom(state, a)\r\n//           addFeature(features, state)\r\n//           return\r\n//         }\r\n//         // Oxygen in alcohol (R-[O]-H)\r\n//         if (a.bondCount === 2 && charge[ a.index ] || a.hasBondToElement('H')) {\r\n//           addAtom(state, a)\r\n//           addFeature(features, state)\r\n//           return\r\n//         }\r\n//         // Phenolate oxygen\r\n//         if (hasAromaticNeighbour(a) && !a.aromatic) {\r\n//           addAtom(state, a)\r\n//           addFeature(features, state)\r\n//           return\r\n//         }\r\n//         // Carboxylic acid oxygen\r\n//         if (a.bondToElementCount('C') === 1) {\r\n//           let flag = false\r\n//           a.eachBondedAtom(ba => {\r\n//             if (ba.element === 'C' && ba.bondToElementCount('O') === 2 && ba.bondToElementCount('C') === 1) {\r\n//               flag = true\r\n//             }\r\n//           })\r\n//           if (flag) {\r\n//             addAtom(state, a)\r\n//             addFeature(features, state)\r\n//             return\r\n//           }\r\n//         }\r\n//         // Phosphoryl oxygen\r\n//         if (a.bondToElementCount('P') === 1) {\r\n//           let flag = false\r\n//           a.eachBondedAtom(ba => {\r\n//             if (ba.element === 'P' && ba.bondToElementCount('O') >= 3) {\r\n//               flag = true\r\n//             }\r\n//           })\r\n//           if (flag) {\r\n//             addAtom(state, a)\r\n//             addFeature(features, state)\r\n//             return\r\n//           }\r\n//         }\r\n//       } else if (element === 'N') {\r\n//         // Imidazole/pyrrole or similar\r\n//         if (a.bondToElementCount('C') === 2) {\r\n//           addAtom(state, a)\r\n//           addFeature(features, state)\r\n//           return\r\n//         }\r\n//       } else if (element === 'S') {\r\n//         // Thiolate\r\n//         if (hasAromaticNeighbour(a) && !a.aromatic) {\r\n//           addAtom(state, a)\r\n//           addFeature(features, state)\r\n//           return\r\n//         }\r\n//         // Sulfur in Iron sulfur cluster\r\n//         const ironCount = a.bondToElementCount('FE')\r\n//         if (ironCount > 0 && ironCount === a.bondCount) {\r\n//           addAtom(state, a)\r\n//           addFeature(features, state)\r\n//           return\r\n//         }\r\n//       }\r\n//     }\r\n//   })\r\n// }\r\nexport function addMetals(structure, features) {\r\n    structure.eachAtom(a => {\r\n        if (a.isTransitionMetal() || a.number === 30 /* ZN */ || a.number === 48 /* CD */) {\r\n            const state = createFeatureState(12 /* TransitionMetal */);\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n        else if (IonicTypeMetals.includes(a.number)) {\r\n            const state = createFeatureState(13 /* IonicTypeMetal */);\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n    });\r\n}\r\nfunction isMetalComplex(ti, tj) {\r\n    if (ti === 12 /* TransitionMetal */) {\r\n        return (tj === 11 /* DativeBondPartner */ ||\r\n            tj === 12 /* TransitionMetal */);\r\n    }\r\n    else if (ti === 13 /* IonicTypeMetal */) {\r\n        return (tj === 10 /* IonicTypePartner */);\r\n    }\r\n}\r\n/**\r\n * Metal complexes of metals and appropriate groups in protein and ligand, including water\r\n */\r\nexport function addMetalComplexation(structure, contacts, params = {}) {\r\n    const maxMetalDist = defaults(params.maxMetalDist, ContactDefaultParams.maxMetalDist);\r\n    const masterIdx = defaults(params.masterModelIndex, ContactDefaultParams.masterModelIndex);\r\n    const { features, spatialHash, contactStore, featureSet } = contacts;\r\n    const { types, centers, atomSets } = features;\r\n    const { x, y, z } = centers;\r\n    const n = types.length;\r\n    const ap1 = structure.getAtomProxy();\r\n    const ap2 = structure.getAtomProxy();\r\n    for (let i = 0; i < n; ++i) {\r\n        spatialHash.eachWithin(x[i], y[i], z[i], maxMetalDist, (j, dSq) => {\r\n            if (j <= i)\r\n                return;\r\n            ap1.index = atomSets[i][0];\r\n            ap2.index = atomSets[j][0];\r\n            if (invalidAtomContact(ap1, ap2, masterIdx))\r\n                return;\r\n            const m1 = ap1.isMetal();\r\n            const m2 = ap2.isMetal();\r\n            if (!m1 && !m2)\r\n                return;\r\n            const [ti, tj] = m1 ? [types[i], types[j]] : [types[j], types[i]];\r\n            if (isMetalComplex(ti, tj)) {\r\n                featureSet.setBits(i, j);\r\n                contactStore.addContact(i, j, 7 /* MetalCoordination */);\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=metal-binding.js.map","/**\r\n * @file Hydrophobic\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { defaults } from '../../utils';\r\nimport { addAtom, addFeature, createFeatureState, } from './features';\r\nimport { ContactDefaultParams, invalidAtomContact } from './contact';\r\n/**\r\n * Hydrophobic carbon (only bonded to carbon or hydrogen); fluorine\r\n */\r\nexport function addHydrophobic(structure, features) {\r\n    structure.eachAtom(a => {\r\n        const state = createFeatureState(8 /* Hydrophobic */);\r\n        let flag = false;\r\n        if (a.number === 6 /* C */) {\r\n            flag = true;\r\n            a.eachBondedAtom(ap => {\r\n                const an = ap.number;\r\n                if (an !== 6 /* C */ && an !== 1 /* H */)\r\n                    flag = false;\r\n            });\r\n        }\r\n        else if (a.number === 9 /* F */) {\r\n            flag = true;\r\n        }\r\n        if (flag) {\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n    });\r\n}\r\nfunction isHydrophobicContact(ti, tj) {\r\n    return ti === 8 /* Hydrophobic */ && tj === 8 /* Hydrophobic */;\r\n}\r\n/**\r\n * All hydrophobic contacts\r\n */\r\nexport function addHydrophobicContacts(structure, contacts, params = {}) {\r\n    const maxHydrophobicDist = defaults(params.maxHydrophobicDist, ContactDefaultParams.maxHydrophobicDist);\r\n    const masterIdx = defaults(params.masterModelIndex, ContactDefaultParams.masterModelIndex);\r\n    const { features, spatialHash, contactStore, featureSet } = contacts;\r\n    const { types, centers, atomSets } = features;\r\n    const { x, y, z } = centers;\r\n    const n = types.length;\r\n    const ap1 = structure.getAtomProxy();\r\n    const ap2 = structure.getAtomProxy();\r\n    for (let i = 0; i < n; ++i) {\r\n        spatialHash.eachWithin(x[i], y[i], z[i], maxHydrophobicDist, (j, dSq) => {\r\n            if (j <= i)\r\n                return;\r\n            ap1.index = atomSets[i][0];\r\n            ap2.index = atomSets[j][0];\r\n            if (invalidAtomContact(ap1, ap2, masterIdx))\r\n                return;\r\n            if (ap1.number === 9 /* F */ && ap2.number === 9 /* F */)\r\n                return;\r\n            if (ap1.connectedTo(ap2))\r\n                return;\r\n            if (isHydrophobicContact(types[i], types[j])) {\r\n                featureSet.setBits(i, j);\r\n                contactStore.addContact(i, j, 6 /* Hydrophobic */);\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=hydrophobic.js.map","/**\r\n * @file Halogen Bonds\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @author Fred Ludlow <Fred.Ludlow@astx.com>\r\n */\r\nimport { defaults } from '../../utils';\r\nimport { degToRad } from '../../math/math-utils';\r\nimport { addAtom, addFeature, createFeatureState, } from './features';\r\nimport { ContactDefaultParams, invalidAtomContact } from './contact';\r\nimport { calcAngles } from '../geometry';\r\nconst halBondElements = [17, 35, 53, 85];\r\n/**\r\n * Halogen bond donors (X-C, with X one of Cl, Br, I or At) not F!\r\n */\r\nexport function addHalogenDonors(structure, features) {\r\n    structure.eachAtom(a => {\r\n        if (halBondElements.includes(a.number) && a.bondToElementCount(6 /* C */) === 1) {\r\n            const state = createFeatureState(6 /* HalogenDonor */);\r\n            addAtom(state, a);\r\n            addFeature(features, state);\r\n        }\r\n    });\r\n}\r\nconst X = [7 /* N */, 8 /* O */, 16 /* S */];\r\nconst Y = [6 /* C */, 7 /* N */, 15 /* P */, 16 /* S */];\r\n/**\r\n * Halogen bond acceptors (Y-{O|N|S}, with Y=C,P,N,S)\r\n */\r\nexport function addHalogenAcceptors(structure, features) {\r\n    structure.eachAtom(a => {\r\n        if (X.includes(a.number)) {\r\n            let flag = false;\r\n            a.eachBondedAtom(ba => {\r\n                if (Y.includes(ba.number)) {\r\n                    flag = true;\r\n                }\r\n            });\r\n            if (flag) {\r\n                const state = createFeatureState(7 /* HalogenAcceptor */);\r\n                addAtom(state, a);\r\n                addFeature(features, state);\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction isHalogenBond(ti, tj) {\r\n    return ((ti === 7 /* HalogenAcceptor */ && tj === 6 /* HalogenDonor */) ||\r\n        (ti === 6 /* HalogenDonor */ && tj === 7 /* HalogenAcceptor */));\r\n}\r\n// http://www.pnas.org/content/101/48/16789.full\r\nconst OptimalHalogenAngle = degToRad(180); // adjusted from 165 to account for spherical statistics\r\nconst OptimalAcceptorAngle = degToRad(120);\r\n/**\r\n * All pairs of halogen donor and acceptor atoms\r\n */\r\nexport function addHalogenBonds(structure, contacts, params = {}) {\r\n    const maxHalogenBondDist = defaults(params.maxHalogenBondDist, ContactDefaultParams.maxHalogenBondDist);\r\n    const maxHalogenBondAngle = degToRad(defaults(params.maxHalogenBondAngle, ContactDefaultParams.maxHalogenBondAngle));\r\n    const masterIdx = defaults(params.masterModelIndex, ContactDefaultParams.masterModelIndex);\r\n    const { features, spatialHash, contactStore, featureSet } = contacts;\r\n    const { types, centers, atomSets } = features;\r\n    const { x, y, z } = centers;\r\n    const n = types.length;\r\n    const ap1 = structure.getAtomProxy();\r\n    const ap2 = structure.getAtomProxy();\r\n    for (let i = 0; i < n; ++i) {\r\n        spatialHash.eachWithin(x[i], y[i], z[i], maxHalogenBondDist, (j, dSq) => {\r\n            if (j <= i)\r\n                return;\r\n            ap1.index = atomSets[i][0];\r\n            ap2.index = atomSets[j][0];\r\n            if (invalidAtomContact(ap1, ap2, masterIdx))\r\n                return;\r\n            if (!isHalogenBond(types[i], types[j]))\r\n                return;\r\n            const [halogen, acceptor] = types[i] === 6 /* HalogenDonor */ ? [ap1, ap2] : [ap2, ap1];\r\n            const halogenAngles = calcAngles(halogen, acceptor);\r\n            // Singly bonded halogen only (not bromide ion for example)\r\n            if (halogenAngles.length !== 1)\r\n                return;\r\n            if (OptimalHalogenAngle - halogenAngles[0] > maxHalogenBondAngle)\r\n                return;\r\n            const acceptorAngles = calcAngles(acceptor, halogen);\r\n            // Angle must be defined. Excludes water as acceptor. Debatable\r\n            if (acceptorAngles.length === 0)\r\n                return;\r\n            if (acceptorAngles.some(acceptorAngle => {\r\n                return (OptimalAcceptorAngle - acceptorAngle > maxHalogenBondAngle);\r\n            }))\r\n                return;\r\n            featureSet.setBits(i, j);\r\n            contactStore.addContact(i, j, 5 /* HalogenBond */);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=halogen-bonds.js.map","/**\r\n * @file Refine Contacts\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { Debug, Log } from '../../globals';\r\nimport { defaults } from '../../utils';\r\nimport { ContactDefaultParams, isMasterContact } from './contact';\r\n// also allows intra-residue contacts\r\nexport function invalidAtomContact(ap1, ap2, masterIdx) {\r\n    return !isMasterContact(ap1, ap2, masterIdx) && (ap1.modelIndex !== ap2.modelIndex ||\r\n        (ap1.altloc && ap2.altloc && ap1.altloc !== ap2.altloc));\r\n}\r\nexport function refineLineOfSight(structure, contacts, params = {}) {\r\n    if (Debug)\r\n        Log.time('refineLineOfSight');\r\n    const lineOfSightDistFactor = defaults(params.lineOfSightDistFactor, ContactDefaultParams.lineOfSightDistFactor);\r\n    const masterIdx = defaults(params.masterModelIndex, ContactDefaultParams.masterModelIndex);\r\n    const spatialHash = structure.spatialHash;\r\n    const { contactSet, contactStore, features } = contacts;\r\n    const { index1, index2 } = contactStore;\r\n    const { centers, atomSets } = features;\r\n    const { x, y, z } = centers;\r\n    const ac1 = structure.getAtomProxy();\r\n    const ac2 = structure.getAtomProxy();\r\n    const aw = structure.getAtomProxy();\r\n    const c1 = new Vector3();\r\n    const c2 = new Vector3();\r\n    const lineOfSightDist = 3 * lineOfSightDistFactor;\r\n    const lineOfSightDistFactorSq = lineOfSightDistFactor * lineOfSightDistFactor;\r\n    contactSet.forEach(i => {\r\n        c1.set(x[index1[i]], y[index1[i]], z[index1[i]]);\r\n        c2.set(x[index2[i]], y[index2[i]], z[index2[i]]);\r\n        const cx = (c1.x + c2.x) / 2;\r\n        const cy = (c1.y + c2.y) / 2;\r\n        const cz = (c1.z + c2.z) / 2;\r\n        const as1 = atomSets[index1[i]];\r\n        const as2 = atomSets[index2[i]];\r\n        ac1.index = as1[0];\r\n        ac2.index = as2[0];\r\n        spatialHash.eachWithin(cx, cy, cz, lineOfSightDist, (j, dSq) => {\r\n            aw.index = j;\r\n            if (aw.number !== 1 /* H */ &&\r\n                (aw.vdw * aw.vdw * lineOfSightDistFactorSq) > dSq &&\r\n                !invalidAtomContact(ac1, aw, masterIdx) &&\r\n                !invalidAtomContact(ac2, aw, masterIdx) &&\r\n                !as1.includes(j) &&\r\n                !as2.includes(j) &&\r\n                // to ignore atoms in the center of functional groups\r\n                c1.distanceToSquared(aw) > 1 &&\r\n                c2.distanceToSquared(aw) > 1) {\r\n                contactSet.clear(i);\r\n                if (Debug)\r\n                    Log.log('removing', ac1.qualifiedName(), ac2.qualifiedName(), 'because', aw.qualifiedName());\r\n            }\r\n        });\r\n    });\r\n    if (Debug)\r\n        Log.timeEnd('refineLineOfSight');\r\n}\r\n/**\r\n * For atoms interacting with several atoms in the same residue\r\n * only the one with the closest distance is kept.\r\n */\r\nexport function refineHydrophobicContacts(structure, contacts) {\r\n    const { contactSet, contactStore, features } = contacts;\r\n    const { type, index1, index2 } = contactStore;\r\n    const { atomSets } = features;\r\n    const ap1 = structure.getAtomProxy();\r\n    const ap2 = structure.getAtomProxy();\r\n    const residueContactDict = {};\r\n    /* keep only closest contact between residues */\r\n    const handleResidueContact = function (dist, i, key) {\r\n        const [minDist, minIndex] = residueContactDict[key] || [Infinity, -1];\r\n        if (dist < minDist) {\r\n            if (minIndex !== -1)\r\n                contactSet.clear(minIndex);\r\n            residueContactDict[key] = [dist, i];\r\n        }\r\n        else {\r\n            contactSet.clear(i);\r\n        }\r\n    };\r\n    contactSet.forEach(i => {\r\n        if (type[i] !== 6 /* Hydrophobic */)\r\n            return;\r\n        ap1.index = atomSets[index1[i]][0];\r\n        ap2.index = atomSets[index2[i]][0];\r\n        const dist = ap1.distanceTo(ap2);\r\n        handleResidueContact(dist, i, `${ap1.index}|${ap2.residueIndex}`);\r\n        handleResidueContact(dist, i, `${ap2.index}|${ap1.residueIndex}`);\r\n    });\r\n}\r\nfunction isHydrogenBondType(type) {\r\n    return (type === 4 /* HydrogenBond */ ||\r\n        type === 9 /* WaterHydrogenBond */ ||\r\n        type === 10 /* BackboneHydrogenBond */);\r\n}\r\n/**\r\n * Remove weak hydrogen bonds when the acceptor is involved in\r\n * a normal/strong hydrogen bond\r\n */\r\nexport function refineWeakHydrogenBonds(structure, contacts) {\r\n    const { contactSet, contactStore, features, adjacencyList } = contacts;\r\n    const { type, index1, index2 } = contactStore;\r\n    const { types } = features;\r\n    contactSet.forEach(i => {\r\n        if (type[i] !== 8 /* WeakHydrogenBond */)\r\n            return;\r\n        let accFeat;\r\n        if (types[index1[i]] === 9 /* WeakHydrogenDonor */) {\r\n            accFeat = index2[i];\r\n        }\r\n        else {\r\n            accFeat = index1[i];\r\n        }\r\n        const n = adjacencyList.countArray[accFeat];\r\n        const offset = adjacencyList.offsetArray[accFeat];\r\n        for (let j = 0; j < n; ++j) {\r\n            const ci = adjacencyList.indexArray[offset + j];\r\n            if (isHydrogenBondType(type[ci])) {\r\n                contactSet.clear(i);\r\n                return;\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Remove hydrogen bonds between groups that also form\r\n * a salt bridge between each other\r\n */\r\nexport function refineSaltBridges(structure, contacts) {\r\n    const { contactSet, contactStore, features } = contacts;\r\n    const { type, index1, index2 } = contactStore;\r\n    const { atomSets } = features;\r\n    const ionicInteractionDict = {};\r\n    const add = function (idx, i) {\r\n        if (!ionicInteractionDict[idx])\r\n            ionicInteractionDict[idx] = [];\r\n        ionicInteractionDict[idx].push(i);\r\n    };\r\n    contactSet.forEach(i => {\r\n        if (type[i] !== 1 /* IonicInteraction */)\r\n            return;\r\n        atomSets[index1[i]].forEach(idx => add(idx, i));\r\n        atomSets[index2[i]].forEach(idx => add(idx, i));\r\n    });\r\n    contactSet.forEach(i => {\r\n        if (!isHydrogenBondType(type[i]))\r\n            return;\r\n        const iil1 = ionicInteractionDict[atomSets[index1[i]][0]];\r\n        const iil2 = ionicInteractionDict[atomSets[index2[i]][0]];\r\n        if (!iil1 || !iil2)\r\n            return;\r\n        const n = iil1.length;\r\n        for (let j = 0; j < n; ++j) {\r\n            if (iil2.includes(iil1[j])) {\r\n                contactSet.clear(i);\r\n                return;\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Remove hydrophobic and cation-pi interactions between groups that also form\r\n * a pi-stacking interaction between each other\r\n */\r\nexport function refinePiStacking(structure, contacts) {\r\n    const { contactSet, contactStore, features } = contacts;\r\n    const { type, index1, index2 } = contactStore;\r\n    const { atomSets } = features;\r\n    const piStackingDict = {};\r\n    const add = function (idx, i) {\r\n        if (!piStackingDict[idx])\r\n            piStackingDict[idx] = [];\r\n        piStackingDict[idx].push(i);\r\n    };\r\n    contactSet.forEach(i => {\r\n        if (type[i] !== 3 /* PiStacking */)\r\n            return;\r\n        atomSets[index1[i]].forEach(idx => add(idx, i));\r\n        atomSets[index2[i]].forEach(idx => add(idx, i));\r\n    });\r\n    contactSet.forEach(i => {\r\n        if (type[i] !== 6 /* Hydrophobic */ &&\r\n            type[i] !== 2 /* CationPi */)\r\n            return;\r\n        const pil1 = piStackingDict[atomSets[index1[i]][0]];\r\n        const pil2 = piStackingDict[atomSets[index2[i]][0]];\r\n        if (!pil1 || !pil2)\r\n            return;\r\n        const n = pil1.length;\r\n        for (let j = 0; j < n; ++j) {\r\n            if (pil2.includes(pil1[j])) {\r\n                contactSet.clear(i);\r\n                return;\r\n            }\r\n        }\r\n    });\r\n}\r\n/**\r\n * Remove ionic interactions between groups that also form\r\n * a metal coordination between each other\r\n */\r\nexport function refineMetalCoordination(structure, contacts) {\r\n    const { contactSet, contactStore, features } = contacts;\r\n    const { type, index1, index2 } = contactStore;\r\n    const { atomSets } = features;\r\n    const ionicInteractionDict = {};\r\n    const add = function (idx, i) {\r\n        if (!ionicInteractionDict[idx])\r\n            ionicInteractionDict[idx] = [];\r\n        ionicInteractionDict[idx].push(i);\r\n    };\r\n    contactSet.forEach(i => {\r\n        if (type[i] !== 1 /* IonicInteraction */)\r\n            return;\r\n        atomSets[index1[i]].forEach(idx => add(idx, i));\r\n        atomSets[index2[i]].forEach(idx => add(idx, i));\r\n    });\r\n    contactSet.forEach(i => {\r\n        if (type[i] !== 7 /* MetalCoordination */)\r\n            return;\r\n        const iil1 = ionicInteractionDict[atomSets[index1[i]][0]];\r\n        const iil2 = ionicInteractionDict[atomSets[index2[i]][0]];\r\n        if (!iil1 || !iil2)\r\n            return;\r\n        const n = iil1.length;\r\n        for (let j = 0; j < n; ++j) {\r\n            if (iil2.includes(iil1[j])) {\r\n                contactSet.clear(iil1[j]);\r\n                return;\r\n            }\r\n        }\r\n    });\r\n}\r\n// TODO: refactor refineSaltBridges, refinePiStacking and refineMetalCoordination to be DRY\r\n//# sourceMappingURL=refine-contacts.js.map","/**\r\n * @file Contact\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { Color } from 'three';\r\nimport { Debug, Log } from '../../globals';\r\nimport { createParams } from '../../utils';\r\nimport SpatialHash from '../../geometry/spatial-hash';\r\nimport { calculateCenterArray, calculateDirectionArray, uniformArray } from '../../math/array-utils';\r\nimport ContactStore from '../../store/contact-store';\r\nimport BitArray from '../../utils/bitarray';\r\nimport Selection from '../../selection/selection';\r\nimport { ContactPicker } from '../../utils/picker';\r\nimport { createAdjacencyList } from '../../utils/adjacency-list';\r\nimport { createFeatures } from './features';\r\nimport { addAromaticRings, addNegativeCharges, addPositiveCharges, addChargedContacts } from './charged';\r\nimport { addHydrogenAcceptors, addHydrogenDonors, addHydrogenBonds, addWeakHydrogenDonors } from './hydrogen-bonds';\r\nimport { addMetalBinding, addMetals, addMetalComplexation } from './metal-binding';\r\nimport { addHydrophobic, addHydrophobicContacts } from './hydrophobic';\r\nimport { addHalogenAcceptors, addHalogenDonors, addHalogenBonds } from './halogen-bonds';\r\nimport { refineLineOfSight, refineHydrophobicContacts, refineSaltBridges, refinePiStacking, refineMetalCoordination } from './refine-contacts';\r\nexport const ContactDefaultParams = {\r\n    maxHydrophobicDist: 4.0,\r\n    maxHbondDist: 3.5,\r\n    maxHbondSulfurDist: 4.1,\r\n    maxHbondAccAngle: 45,\r\n    maxHbondDonAngle: 45,\r\n    maxHbondAccPlaneAngle: 90,\r\n    maxHbondDonPlaneAngle: 30,\r\n    maxPiStackingDist: 5.5,\r\n    maxPiStackingOffset: 2.0,\r\n    maxPiStackingAngle: 30,\r\n    maxCationPiDist: 6.0,\r\n    maxCationPiOffset: 2.0,\r\n    maxIonicDist: 5.0,\r\n    maxHalogenBondDist: 4.0,\r\n    maxHalogenBondAngle: 30,\r\n    maxMetalDist: 3.0,\r\n    refineSaltBridges: true,\r\n    masterModelIndex: -1,\r\n    lineOfSightDistFactor: 1.0\r\n};\r\nexport function isMasterContact(ap1, ap2, masterIdx) {\r\n    return ((ap1.modelIndex === masterIdx && ap2.modelIndex !== masterIdx) ||\r\n        (ap2.modelIndex === masterIdx && ap1.modelIndex !== masterIdx));\r\n}\r\nexport function invalidAtomContact(ap1, ap2, masterIdx) {\r\n    return !isMasterContact(ap1, ap2, masterIdx) && (ap1.modelIndex !== ap2.modelIndex ||\r\n        ap1.residueIndex === ap2.residueIndex ||\r\n        (ap1.altloc && ap2.altloc && ap1.altloc !== ap2.altloc));\r\n}\r\nexport function createContacts(features) {\r\n    const { types, centers } = features;\r\n    const spatialHash = new SpatialHash(centers);\r\n    const contactStore = new ContactStore();\r\n    const featureSet = new BitArray(types.length, false);\r\n    return { features, spatialHash, contactStore, featureSet };\r\n}\r\nexport function createFrozenContacts(contacts) {\r\n    const { index1, index2, count } = contacts.contactStore;\r\n    const adjacencyList = createAdjacencyList({\r\n        nodeArray1: index1,\r\n        nodeArray2: index2,\r\n        edgeCount: count,\r\n        nodeCount: contacts.featureSet.length\r\n    });\r\n    const contactSet = new BitArray(contacts.contactStore.count, true);\r\n    return Object.assign({ adjacencyList, contactSet }, contacts);\r\n}\r\nfunction calculateFeatures(structure) {\r\n    const features = createFeatures();\r\n    if (Debug)\r\n        Log.time('calculateFeatures');\r\n    addPositiveCharges(structure, features);\r\n    addNegativeCharges(structure, features);\r\n    addAromaticRings(structure, features);\r\n    addHydrogenAcceptors(structure, features);\r\n    addHydrogenDonors(structure, features);\r\n    addWeakHydrogenDonors(structure, features);\r\n    addMetalBinding(structure, features);\r\n    addMetals(structure, features);\r\n    addHydrophobic(structure, features);\r\n    addHalogenAcceptors(structure, features);\r\n    addHalogenDonors(structure, features);\r\n    if (Debug)\r\n        Log.timeEnd('calculateFeatures');\r\n    return features;\r\n}\r\nexport function calculateContacts(structure, params = ContactDefaultParams) {\r\n    const features = calculateFeatures(structure);\r\n    const contacts = createContacts(features);\r\n    if (Debug)\r\n        Log.time('calculateContacts');\r\n    addChargedContacts(structure, contacts, params);\r\n    addHydrogenBonds(structure, contacts, params);\r\n    addMetalComplexation(structure, contacts, params);\r\n    addHydrophobicContacts(structure, contacts, params);\r\n    addHalogenBonds(structure, contacts, params);\r\n    const frozenContacts = createFrozenContacts(contacts);\r\n    refineLineOfSight(structure, frozenContacts, params);\r\n    refineHydrophobicContacts(structure, frozenContacts);\r\n    if (params.refineSaltBridges)\r\n        refineSaltBridges(structure, frozenContacts);\r\n    refinePiStacking(structure, frozenContacts);\r\n    refineMetalCoordination(structure, frozenContacts);\r\n    if (Debug)\r\n        Log.timeEnd('calculateContacts');\r\n    return frozenContacts;\r\n}\r\nexport function contactTypeName(type) {\r\n    switch (type) {\r\n        case 4 /* HydrogenBond */:\r\n        case 9 /* WaterHydrogenBond */:\r\n        case 10 /* BackboneHydrogenBond */:\r\n            return 'hydrogen bond';\r\n        case 6 /* Hydrophobic */:\r\n            return 'hydrophobic contact';\r\n        case 5 /* HalogenBond */:\r\n            return 'halogen bond';\r\n        case 1 /* IonicInteraction */:\r\n            return 'ionic interaction';\r\n        case 7 /* MetalCoordination */:\r\n            return 'metal coordination';\r\n        case 2 /* CationPi */:\r\n            return 'cation-pi interaction';\r\n        case 3 /* PiStacking */:\r\n            return 'pi-pi stacking';\r\n        case 8 /* WeakHydrogenBond */:\r\n            return 'weak hydrogen bond';\r\n        default:\r\n            return 'unknown contact';\r\n    }\r\n}\r\nexport const ContactDataDefaultParams = {\r\n    hydrogenBond: true,\r\n    hydrophobic: true,\r\n    halogenBond: true,\r\n    ionicInteraction: true,\r\n    metalCoordination: true,\r\n    cationPi: true,\r\n    piStacking: true,\r\n    weakHydrogenBond: true,\r\n    waterHydrogenBond: true,\r\n    backboneHydrogenBond: true,\r\n    radius: 1,\r\n    filterSele: ''\r\n};\r\nexport const ContactLabelDefaultParams = {\r\n    unit: '',\r\n    size: 2.0\r\n};\r\nconst tmpColor = new Color();\r\nfunction contactColor(type) {\r\n    switch (type) {\r\n        case 4 /* HydrogenBond */:\r\n        case 9 /* WaterHydrogenBond */:\r\n        case 10 /* BackboneHydrogenBond */:\r\n            return tmpColor.setHex(0x2B83BA).toArray();\r\n        case 6 /* Hydrophobic */:\r\n            return tmpColor.setHex(0x808080).toArray();\r\n        case 5 /* HalogenBond */:\r\n            return tmpColor.setHex(0x40FFBF).toArray();\r\n        case 1 /* IonicInteraction */:\r\n            return tmpColor.setHex(0xF0C814).toArray();\r\n        case 7 /* MetalCoordination */:\r\n            return tmpColor.setHex(0x8C4099).toArray();\r\n        case 2 /* CationPi */:\r\n            return tmpColor.setHex(0xFF8000).toArray();\r\n        case 3 /* PiStacking */:\r\n            return tmpColor.setHex(0x8CB366).toArray();\r\n        case 8 /* WeakHydrogenBond */:\r\n            return tmpColor.setHex(0xC5DDEC).toArray();\r\n        default:\r\n            return tmpColor.setHex(0xCCCCCC).toArray();\r\n    }\r\n}\r\nexport function getContactData(contacts, structure, params) {\r\n    const p = createParams(params, ContactDataDefaultParams);\r\n    const types = [];\r\n    if (p.hydrogenBond)\r\n        types.push(4 /* HydrogenBond */);\r\n    if (p.hydrophobic)\r\n        types.push(6 /* Hydrophobic */);\r\n    if (p.halogenBond)\r\n        types.push(5 /* HalogenBond */);\r\n    if (p.ionicInteraction)\r\n        types.push(1 /* IonicInteraction */);\r\n    if (p.metalCoordination)\r\n        types.push(7 /* MetalCoordination */);\r\n    if (p.cationPi)\r\n        types.push(2 /* CationPi */);\r\n    if (p.piStacking)\r\n        types.push(3 /* PiStacking */);\r\n    if (p.weakHydrogenBond)\r\n        types.push(8 /* WeakHydrogenBond */);\r\n    if (p.waterHydrogenBond)\r\n        types.push(9 /* WaterHydrogenBond */);\r\n    if (p.backboneHydrogenBond)\r\n        types.push(10 /* BackboneHydrogenBond */);\r\n    const { features, contactSet, contactStore } = contacts;\r\n    const { centers, atomSets } = features;\r\n    const { x, y, z } = centers;\r\n    const { index1, index2, type } = contactStore;\r\n    const position1 = [];\r\n    const position2 = [];\r\n    const color = [];\r\n    const radius = [];\r\n    const picking = [];\r\n    let filterSet;\r\n    if (p.filterSele) {\r\n        if (Array.isArray(p.filterSele)) {\r\n            filterSet = p.filterSele.map(sele => {\r\n                return structure.getAtomSet(new Selection(sele));\r\n            });\r\n        }\r\n        else {\r\n            filterSet = structure.getAtomSet(new Selection(p.filterSele));\r\n        }\r\n    }\r\n    contactSet.forEach(i => {\r\n        const ti = type[i];\r\n        if (!types.includes(ti))\r\n            return;\r\n        if (filterSet) {\r\n            const idx1 = atomSets[index1[i]][0];\r\n            const idx2 = atomSets[index2[i]][0];\r\n            if (Array.isArray(filterSet)) {\r\n                if (!(filterSet[0].isSet(idx1) && filterSet[1].isSet(idx2) || (filterSet[1].isSet(idx1) && filterSet[0].isSet(idx2))))\r\n                    return;\r\n            }\r\n            else {\r\n                if (!filterSet.isSet(idx1) && !filterSet.isSet(idx2))\r\n                    return;\r\n            }\r\n        }\r\n        const k = index1[i];\r\n        const l = index2[i];\r\n        position1.push(x[k], y[k], z[k]);\r\n        position2.push(x[l], y[l], z[l]);\r\n        color.push(...contactColor(ti));\r\n        radius.push(p.radius);\r\n        picking.push(i);\r\n    });\r\n    return {\r\n        position1: new Float32Array(position1),\r\n        position2: new Float32Array(position2),\r\n        color: new Float32Array(color),\r\n        color2: new Float32Array(color),\r\n        radius: new Float32Array(radius),\r\n        picking: new ContactPicker(picking, contacts, structure)\r\n    };\r\n}\r\nexport function getLabelData(contactData, params) {\r\n    const position = calculateCenterArray(contactData.position1, contactData.position2);\r\n    const text = [];\r\n    const direction = calculateDirectionArray(contactData.position1, contactData.position2);\r\n    const n = direction.length / 3;\r\n    for (let i = 0; i < n; i++) {\r\n        const j = 3 * i;\r\n        const d = Math.sqrt(Math.pow(direction[j], 2) + Math.pow(direction[j + 1], 2) + Math.pow(direction[j + 2], 2));\r\n        switch (params.unit) {\r\n            case 'angstrom':\r\n                text[i] = d.toFixed(2) + ' ' + String.fromCharCode(0x212B);\r\n                break;\r\n            case 'nm':\r\n                text[i] = (d / 10).toFixed(2) + ' nm';\r\n                break;\r\n            default:\r\n                text[i] = d.toFixed(2);\r\n                break;\r\n        }\r\n    }\r\n    return {\r\n        position,\r\n        size: uniformArray(position.length / 3, params.size),\r\n        color: contactData.color,\r\n        text\r\n    };\r\n}\r\n//# sourceMappingURL=contact.js.map","/**\r\n * @file Picker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { PickerRegistry } from '../globals';\r\nimport { calculateMeanVector3 } from '../math/vector-utils';\r\nimport Selection from '../selection/selection';\r\nimport { ArrowPrimitive, BoxPrimitive, ConePrimitive, CylinderPrimitive, EllipsoidPrimitive, OctahedronPrimitive, SpherePrimitive, TetrahedronPrimitive, TorusPrimitive, PointPrimitive, WidelinePrimitive } from '../geometry/primitive';\r\nimport { contactTypeName } from '../chemistry/interactions/contact';\r\n/**\r\n * Picker class\r\n * @interface\r\n */\r\nclass Picker {\r\n    /**\r\n     * @param  {Array|TypedArray} [array] - mapping\r\n     */\r\n    constructor(array) {\r\n        this.array = array;\r\n    }\r\n    get type() { return ''; }\r\n    get data() { return {}; }\r\n    /**\r\n     * Get the index for the given picking id\r\n     * @param  {Integer} pid - the picking id\r\n     * @return {Integer} the index\r\n     */\r\n    getIndex(pid) {\r\n        return this.array ? this.array[pid] : pid;\r\n    }\r\n    /**\r\n     * Get object data\r\n     * @abstract\r\n     * @param  {Integer} pid - the picking id\r\n     * @return {Object} the object data\r\n     */\r\n    getObject(pid) {\r\n        return {};\r\n    }\r\n    _applyTransformations(vector, instance, component) {\r\n        if (instance) {\r\n            vector.applyMatrix4(instance.matrix);\r\n        }\r\n        if (component) {\r\n            vector.applyMatrix4(component.matrix);\r\n        }\r\n        return vector;\r\n    }\r\n    /**\r\n     * Get object position\r\n     * @abstract\r\n     * @param  {Integer} pid - the picking id\r\n     * @return {Vector3} the object position\r\n     */\r\n    _getPosition(pid) {\r\n        return new Vector3();\r\n    }\r\n    /**\r\n     * Get position for the given picking id\r\n     * @param  {Integer} pid - the picking id\r\n     * @param  {Object} instance - the instance that should be applied\r\n     * @param  {Component} component - the component of the picked object\r\n     * @return {Vector3} the position\r\n     */\r\n    getPosition(pid, instance, component) {\r\n        return this._applyTransformations(this._getPosition(pid), instance, component);\r\n    }\r\n}\r\n/**\r\n * Shape picker class\r\n * @interface\r\n */\r\nclass ShapePicker extends Picker {\r\n    /**\r\n     * @param  {Shape} shape - shape object\r\n     */\r\n    constructor(shape) {\r\n        super();\r\n        this.shape = shape;\r\n    }\r\n    get primitive() { return; }\r\n    get data() { return this.shape; }\r\n    get type() { return this.primitive.type; }\r\n    getObject(pid) {\r\n        return this.primitive.objectFromShape(this.shape, this.getIndex(pid));\r\n    }\r\n    _getPosition(pid) {\r\n        return this.primitive.positionFromShape(this.shape, this.getIndex(pid));\r\n    }\r\n}\r\n//\r\nclass CylinderPicker extends ShapePicker {\r\n    get primitive() { return CylinderPrimitive; }\r\n}\r\nclass ArrowPicker extends ShapePicker {\r\n    get primitive() { return ArrowPrimitive; }\r\n}\r\nclass AtomPicker extends Picker {\r\n    constructor(array, structure) {\r\n        super(array);\r\n        this.structure = structure;\r\n    }\r\n    get type() { return 'atom'; }\r\n    get data() { return this.structure; }\r\n    getObject(pid) {\r\n        return this.structure.getAtomProxy(this.getIndex(pid));\r\n    }\r\n    _getPosition(pid) {\r\n        return new Vector3().copy(this.getObject(pid));\r\n    }\r\n}\r\nclass AxesPicker extends Picker {\r\n    constructor(axes) {\r\n        super();\r\n        this.axes = axes;\r\n    }\r\n    get type() { return 'axes'; }\r\n    get data() { return this.axes; }\r\n    getObject( /* pid */) {\r\n        return {\r\n            axes: this.axes\r\n        };\r\n    }\r\n    _getPosition( /* pid */) {\r\n        return this.axes.center.clone();\r\n    }\r\n}\r\nclass BondPicker extends Picker {\r\n    constructor(array, structure, bondStore) {\r\n        super(array);\r\n        this.structure = structure;\r\n        this.bondStore = bondStore || structure.bondStore;\r\n    }\r\n    get type() { return 'bond'; }\r\n    get data() { return this.structure; }\r\n    getObject(pid) {\r\n        const bp = this.structure.getBondProxy(this.getIndex(pid));\r\n        bp.bondStore = this.bondStore;\r\n        return bp;\r\n    }\r\n    _getPosition(pid) {\r\n        const b = this.getObject(pid);\r\n        return new Vector3()\r\n            .copy(b.atom1)\r\n            .add(b.atom2)\r\n            .multiplyScalar(0.5);\r\n    }\r\n}\r\nclass ContactPicker extends Picker {\r\n    constructor(array, contacts, structure) {\r\n        super(array);\r\n        this.contacts = contacts;\r\n        this.structure = structure;\r\n    }\r\n    get type() { return 'contact'; }\r\n    get data() { return this.contacts; }\r\n    getObject(pid) {\r\n        const idx = this.getIndex(pid);\r\n        const { features, contactStore } = this.contacts;\r\n        const { centers, atomSets } = features;\r\n        const { x, y, z } = centers;\r\n        const { index1, index2, type } = contactStore;\r\n        const k = index1[idx];\r\n        const l = index2[idx];\r\n        return {\r\n            center1: new Vector3(x[k], y[k], z[k]),\r\n            center2: new Vector3(x[l], y[l], z[l]),\r\n            atom1: this.structure.getAtomProxy(atomSets[k][0]),\r\n            atom2: this.structure.getAtomProxy(atomSets[l][0]),\r\n            type: contactTypeName(type[idx])\r\n        };\r\n    }\r\n    _getPosition(pid) {\r\n        const { center1, center2 } = this.getObject(pid);\r\n        return new Vector3().addVectors(center1, center2).multiplyScalar(0.5);\r\n    }\r\n}\r\nclass ConePicker extends ShapePicker {\r\n    get primitive() { return ConePrimitive; }\r\n}\r\nclass ClashPicker extends Picker {\r\n    constructor(array, validation, structure) {\r\n        super(array);\r\n        this.validation = validation;\r\n        this.structure = structure;\r\n    }\r\n    get type() { return 'clash'; }\r\n    get data() { return this.validation; }\r\n    getObject(pid) {\r\n        const val = this.validation;\r\n        const idx = this.getIndex(pid);\r\n        return {\r\n            validation: val,\r\n            index: idx,\r\n            clash: val.clashArray[idx]\r\n        };\r\n    }\r\n    _getAtomProxyFromSele(sele) {\r\n        const selection = new Selection(sele);\r\n        const idx = this.structure.getAtomIndices(selection)[0];\r\n        return this.structure.getAtomProxy(idx);\r\n    }\r\n    _getPosition(pid) {\r\n        const clash = this.getObject(pid).clash;\r\n        const ap1 = this._getAtomProxyFromSele(clash.sele1);\r\n        const ap2 = this._getAtomProxyFromSele(clash.sele2);\r\n        return new Vector3().copy(ap1).add(ap2).multiplyScalar(0.5);\r\n    }\r\n}\r\nclass DistancePicker extends BondPicker {\r\n    get type() { return 'distance'; }\r\n}\r\nclass EllipsoidPicker extends ShapePicker {\r\n    get primitive() { return EllipsoidPrimitive; }\r\n}\r\nclass OctahedronPicker extends ShapePicker {\r\n    get primitive() { return OctahedronPrimitive; }\r\n}\r\nclass BoxPicker extends ShapePicker {\r\n    get primitive() { return BoxPrimitive; }\r\n}\r\nclass IgnorePicker extends Picker {\r\n    get type() { return 'ignore'; }\r\n}\r\nclass MeshPicker extends ShapePicker {\r\n    constructor(shape, mesh) {\r\n        super(shape);\r\n        this.mesh = mesh;\r\n    }\r\n    get type() { return 'mesh'; }\r\n    getObject( /* pid */) {\r\n        const m = this.mesh;\r\n        return {\r\n            shape: this.shape,\r\n            name: m.name,\r\n            serial: m.serial\r\n        };\r\n    }\r\n    _getPosition( /* pid */) {\r\n        if (!this.__position) {\r\n            this.__position = calculateMeanVector3(this.mesh.position);\r\n        }\r\n        return this.__position;\r\n    }\r\n}\r\nclass SpherePicker extends ShapePicker {\r\n    get primitive() { return SpherePrimitive; }\r\n}\r\nclass SurfacePicker extends Picker {\r\n    constructor(array, surface) {\r\n        super(array);\r\n        this.surface = surface;\r\n    }\r\n    get type() { return 'surface'; }\r\n    get data() { return this.surface; }\r\n    getObject(pid) {\r\n        return {\r\n            surface: this.surface,\r\n            index: this.getIndex(pid)\r\n        };\r\n    }\r\n    _getPosition( /* pid */) {\r\n        return this.surface.center.clone();\r\n    }\r\n}\r\nclass TetrahedronPicker extends ShapePicker {\r\n    get primitive() { return TetrahedronPrimitive; }\r\n}\r\nclass TorusPicker extends ShapePicker {\r\n    get primitive() { return TorusPrimitive; }\r\n}\r\nclass UnitcellPicker extends Picker {\r\n    constructor(unitcell, structure) {\r\n        super();\r\n        this.unitcell = unitcell;\r\n        this.structure = structure;\r\n    }\r\n    get type() { return 'unitcell'; }\r\n    get data() { return this.unitcell; }\r\n    getObject( /* pid */) {\r\n        return {\r\n            unitcell: this.unitcell,\r\n            structure: this.structure\r\n        };\r\n    }\r\n    _getPosition( /* pid */) {\r\n        return this.unitcell.getCenter(this.structure);\r\n    }\r\n}\r\nclass UnknownPicker extends Picker {\r\n    get type() { return 'unknown'; }\r\n}\r\nclass VolumePicker extends Picker {\r\n    constructor(array, volume) {\r\n        super(array);\r\n        this.volume = volume;\r\n    }\r\n    get type() { return 'volume'; }\r\n    get data() { return this.volume; }\r\n    getObject(pid) {\r\n        const vol = this.volume;\r\n        const idx = this.getIndex(pid);\r\n        return {\r\n            volume: vol,\r\n            index: idx,\r\n            value: vol.data[idx]\r\n        };\r\n    }\r\n    _getPosition(pid) {\r\n        const dp = this.volume.position;\r\n        const idx = this.getIndex(pid);\r\n        return new Vector3(dp[idx * 3], dp[idx * 3 + 1], dp[idx * 3 + 2]);\r\n    }\r\n}\r\nclass SlicePicker extends VolumePicker {\r\n    get type() { return 'slice'; }\r\n}\r\nclass PointPicker extends ShapePicker {\r\n    get primitive() { return PointPrimitive; }\r\n}\r\nclass WidelinePicker extends ShapePicker {\r\n    get primitive() { return WidelinePrimitive; }\r\n}\r\nPickerRegistry.add('arrow', ArrowPicker);\r\nPickerRegistry.add('box', BoxPicker);\r\nPickerRegistry.add('cone', ConePicker);\r\nPickerRegistry.add('cylinder', CylinderPicker);\r\nPickerRegistry.add('ellipsoid', EllipsoidPicker);\r\nPickerRegistry.add('octahedron', OctahedronPicker);\r\nPickerRegistry.add('sphere', SpherePicker);\r\nPickerRegistry.add('tetrahedron', TetrahedronPicker);\r\nPickerRegistry.add('torus', TorusPicker);\r\nPickerRegistry.add('point', PointPicker);\r\nPickerRegistry.add('wideline', WidelinePicker);\r\nexport { Picker, ShapePicker, ArrowPicker, AtomPicker, AxesPicker, BondPicker, BoxPicker, ConePicker, ContactPicker, CylinderPicker, ClashPicker, DistancePicker, EllipsoidPicker, IgnorePicker, OctahedronPicker, MeshPicker, SlicePicker, SpherePicker, SurfacePicker, TetrahedronPicker, TorusPicker, UnitcellPicker, UnknownPicker, VolumePicker, PointPicker, WidelinePicker };\r\n//# sourceMappingURL=picker.js.map","/**\r\n * @file Marching Cubes\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { getUintArray } from '../utils';\r\nfunction getEdgeTable() {\r\n    return new Uint32Array([\r\n        0x0, 0x109, 0x203, 0x30a, 0x406, 0x50f, 0x605, 0x70c,\r\n        0x80c, 0x905, 0xa0f, 0xb06, 0xc0a, 0xd03, 0xe09, 0xf00,\r\n        0x190, 0x99, 0x393, 0x29a, 0x596, 0x49f, 0x795, 0x69c,\r\n        0x99c, 0x895, 0xb9f, 0xa96, 0xd9a, 0xc93, 0xf99, 0xe90,\r\n        0x230, 0x339, 0x33, 0x13a, 0x636, 0x73f, 0x435, 0x53c,\r\n        0xa3c, 0xb35, 0x83f, 0x936, 0xe3a, 0xf33, 0xc39, 0xd30,\r\n        0x3a0, 0x2a9, 0x1a3, 0xaa, 0x7a6, 0x6af, 0x5a5, 0x4ac,\r\n        0xbac, 0xaa5, 0x9af, 0x8a6, 0xfaa, 0xea3, 0xda9, 0xca0,\r\n        0x460, 0x569, 0x663, 0x76a, 0x66, 0x16f, 0x265, 0x36c,\r\n        0xc6c, 0xd65, 0xe6f, 0xf66, 0x86a, 0x963, 0xa69, 0xb60,\r\n        0x5f0, 0x4f9, 0x7f3, 0x6fa, 0x1f6, 0xff, 0x3f5, 0x2fc,\r\n        0xdfc, 0xcf5, 0xfff, 0xef6, 0x9fa, 0x8f3, 0xbf9, 0xaf0,\r\n        0x650, 0x759, 0x453, 0x55a, 0x256, 0x35f, 0x55, 0x15c,\r\n        0xe5c, 0xf55, 0xc5f, 0xd56, 0xa5a, 0xb53, 0x859, 0x950,\r\n        0x7c0, 0x6c9, 0x5c3, 0x4ca, 0x3c6, 0x2cf, 0x1c5, 0xcc,\r\n        0xfcc, 0xec5, 0xdcf, 0xcc6, 0xbca, 0xac3, 0x9c9, 0x8c0,\r\n        0x8c0, 0x9c9, 0xac3, 0xbca, 0xcc6, 0xdcf, 0xec5, 0xfcc,\r\n        0xcc, 0x1c5, 0x2cf, 0x3c6, 0x4ca, 0x5c3, 0x6c9, 0x7c0,\r\n        0x950, 0x859, 0xb53, 0xa5a, 0xd56, 0xc5f, 0xf55, 0xe5c,\r\n        0x15c, 0x55, 0x35f, 0x256, 0x55a, 0x453, 0x759, 0x650,\r\n        0xaf0, 0xbf9, 0x8f3, 0x9fa, 0xef6, 0xfff, 0xcf5, 0xdfc,\r\n        0x2fc, 0x3f5, 0xff, 0x1f6, 0x6fa, 0x7f3, 0x4f9, 0x5f0,\r\n        0xb60, 0xa69, 0x963, 0x86a, 0xf66, 0xe6f, 0xd65, 0xc6c,\r\n        0x36c, 0x265, 0x16f, 0x66, 0x76a, 0x663, 0x569, 0x460,\r\n        0xca0, 0xda9, 0xea3, 0xfaa, 0x8a6, 0x9af, 0xaa5, 0xbac,\r\n        0x4ac, 0x5a5, 0x6af, 0x7a6, 0xaa, 0x1a3, 0x2a9, 0x3a0,\r\n        0xd30, 0xc39, 0xf33, 0xe3a, 0x936, 0x83f, 0xb35, 0xa3c,\r\n        0x53c, 0x435, 0x73f, 0x636, 0x13a, 0x33, 0x339, 0x230,\r\n        0xe90, 0xf99, 0xc93, 0xd9a, 0xa96, 0xb9f, 0x895, 0x99c,\r\n        0x69c, 0x795, 0x49f, 0x596, 0x29a, 0x393, 0x99, 0x190,\r\n        0xf00, 0xe09, 0xd03, 0xc0a, 0xb06, 0xa0f, 0x905, 0x80c,\r\n        0x70c, 0x605, 0x50f, 0x406, 0x30a, 0x203, 0x109, 0x0\r\n    ]);\r\n}\r\nfunction getTriTable() {\r\n    return new Int32Array([\r\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 1, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 8, 3, 9, 8, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 3, 1, 2, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 2, 10, 0, 2, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 8, 3, 2, 10, 8, 10, 9, 8, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 11, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 11, 2, 8, 11, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 9, 0, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 11, 2, 1, 9, 11, 9, 8, 11, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 10, 1, 11, 10, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 10, 1, 0, 8, 10, 8, 11, 10, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 9, 0, 3, 11, 9, 11, 10, 9, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 8, 10, 10, 8, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 7, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 3, 0, 7, 3, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 1, 9, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 1, 9, 4, 7, 1, 7, 3, 1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 10, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 4, 7, 3, 0, 4, 1, 2, 10, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 2, 10, 9, 0, 2, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 10, 9, 2, 9, 7, 2, 7, 3, 7, 9, 4, -1, -1, -1, -1,\r\n        8, 4, 7, 3, 11, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        11, 4, 7, 11, 2, 4, 2, 0, 4, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 0, 1, 8, 4, 7, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 7, 11, 9, 4, 11, 9, 11, 2, 9, 2, 1, -1, -1, -1, -1,\r\n        3, 10, 1, 3, 11, 10, 7, 8, 4, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 11, 10, 1, 4, 11, 1, 0, 4, 7, 11, 4, -1, -1, -1, -1,\r\n        4, 7, 8, 9, 0, 11, 9, 11, 10, 11, 0, 3, -1, -1, -1, -1,\r\n        4, 7, 11, 4, 11, 9, 9, 11, 10, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 5, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 5, 4, 0, 8, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 5, 4, 1, 5, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        8, 5, 4, 8, 3, 5, 3, 1, 5, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 10, 9, 5, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 0, 8, 1, 2, 10, 4, 9, 5, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 2, 10, 5, 4, 2, 4, 0, 2, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 10, 5, 3, 2, 5, 3, 5, 4, 3, 4, 8, -1, -1, -1, -1,\r\n        9, 5, 4, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 11, 2, 0, 8, 11, 4, 9, 5, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 5, 4, 0, 1, 5, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 1, 5, 2, 5, 8, 2, 8, 11, 4, 8, 5, -1, -1, -1, -1,\r\n        10, 3, 11, 10, 1, 3, 9, 5, 4, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 9, 5, 0, 8, 1, 8, 10, 1, 8, 11, 10, -1, -1, -1, -1,\r\n        5, 4, 0, 5, 0, 11, 5, 11, 10, 11, 0, 3, -1, -1, -1, -1,\r\n        5, 4, 8, 5, 8, 10, 10, 8, 11, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 7, 8, 5, 7, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 3, 0, 9, 5, 3, 5, 7, 3, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 7, 8, 0, 1, 7, 1, 5, 7, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 5, 3, 3, 5, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 7, 8, 9, 5, 7, 10, 1, 2, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 1, 2, 9, 5, 0, 5, 3, 0, 5, 7, 3, -1, -1, -1, -1,\r\n        8, 0, 2, 8, 2, 5, 8, 5, 7, 10, 5, 2, -1, -1, -1, -1,\r\n        2, 10, 5, 2, 5, 3, 3, 5, 7, -1, -1, -1, -1, -1, -1, -1,\r\n        7, 9, 5, 7, 8, 9, 3, 11, 2, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 5, 7, 9, 7, 2, 9, 2, 0, 2, 7, 11, -1, -1, -1, -1,\r\n        2, 3, 11, 0, 1, 8, 1, 7, 8, 1, 5, 7, -1, -1, -1, -1,\r\n        11, 2, 1, 11, 1, 7, 7, 1, 5, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 5, 8, 8, 5, 7, 10, 1, 3, 10, 3, 11, -1, -1, -1, -1,\r\n        5, 7, 0, 5, 0, 9, 7, 11, 0, 1, 0, 10, 11, 10, 0, -1,\r\n        11, 10, 0, 11, 0, 3, 10, 5, 0, 8, 0, 7, 5, 7, 0, -1,\r\n        11, 10, 5, 7, 11, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 6, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 3, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 0, 1, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 8, 3, 1, 9, 8, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 6, 5, 2, 6, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 6, 5, 1, 2, 6, 3, 0, 8, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 6, 5, 9, 0, 6, 0, 2, 6, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 9, 8, 5, 8, 2, 5, 2, 6, 3, 2, 8, -1, -1, -1, -1,\r\n        2, 3, 11, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        11, 0, 8, 11, 2, 0, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 1, 9, 2, 3, 11, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 10, 6, 1, 9, 2, 9, 11, 2, 9, 8, 11, -1, -1, -1, -1,\r\n        6, 3, 11, 6, 5, 3, 5, 1, 3, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 11, 0, 11, 5, 0, 5, 1, 5, 11, 6, -1, -1, -1, -1,\r\n        3, 11, 6, 0, 3, 6, 0, 6, 5, 0, 5, 9, -1, -1, -1, -1,\r\n        6, 5, 9, 6, 9, 11, 11, 9, 8, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 10, 6, 4, 7, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 3, 0, 4, 7, 3, 6, 5, 10, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 9, 0, 5, 10, 6, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 6, 5, 1, 9, 7, 1, 7, 3, 7, 9, 4, -1, -1, -1, -1,\r\n        6, 1, 2, 6, 5, 1, 4, 7, 8, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 5, 5, 2, 6, 3, 0, 4, 3, 4, 7, -1, -1, -1, -1,\r\n        8, 4, 7, 9, 0, 5, 0, 6, 5, 0, 2, 6, -1, -1, -1, -1,\r\n        7, 3, 9, 7, 9, 4, 3, 2, 9, 5, 9, 6, 2, 6, 9, -1,\r\n        3, 11, 2, 7, 8, 4, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 10, 6, 4, 7, 2, 4, 2, 0, 2, 7, 11, -1, -1, -1, -1,\r\n        0, 1, 9, 4, 7, 8, 2, 3, 11, 5, 10, 6, -1, -1, -1, -1,\r\n        9, 2, 1, 9, 11, 2, 9, 4, 11, 7, 11, 4, 5, 10, 6, -1,\r\n        8, 4, 7, 3, 11, 5, 3, 5, 1, 5, 11, 6, -1, -1, -1, -1,\r\n        5, 1, 11, 5, 11, 6, 1, 0, 11, 7, 11, 4, 0, 4, 11, -1,\r\n        0, 5, 9, 0, 6, 5, 0, 3, 6, 11, 6, 3, 8, 4, 7, -1,\r\n        6, 5, 9, 6, 9, 11, 4, 7, 9, 7, 11, 9, -1, -1, -1, -1,\r\n        10, 4, 9, 6, 4, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 10, 6, 4, 9, 10, 0, 8, 3, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 0, 1, 10, 6, 0, 6, 4, 0, -1, -1, -1, -1, -1, -1, -1,\r\n        8, 3, 1, 8, 1, 6, 8, 6, 4, 6, 1, 10, -1, -1, -1, -1,\r\n        1, 4, 9, 1, 2, 4, 2, 6, 4, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 0, 8, 1, 2, 9, 2, 4, 9, 2, 6, 4, -1, -1, -1, -1,\r\n        0, 2, 4, 4, 2, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        8, 3, 2, 8, 2, 4, 4, 2, 6, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 4, 9, 10, 6, 4, 11, 2, 3, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 2, 2, 8, 11, 4, 9, 10, 4, 10, 6, -1, -1, -1, -1,\r\n        3, 11, 2, 0, 1, 6, 0, 6, 4, 6, 1, 10, -1, -1, -1, -1,\r\n        6, 4, 1, 6, 1, 10, 4, 8, 1, 2, 1, 11, 8, 11, 1, -1,\r\n        9, 6, 4, 9, 3, 6, 9, 1, 3, 11, 6, 3, -1, -1, -1, -1,\r\n        8, 11, 1, 8, 1, 0, 11, 6, 1, 9, 1, 4, 6, 4, 1, -1,\r\n        3, 11, 6, 3, 6, 0, 0, 6, 4, -1, -1, -1, -1, -1, -1, -1,\r\n        6, 4, 8, 11, 6, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        7, 10, 6, 7, 8, 10, 8, 9, 10, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 7, 3, 0, 10, 7, 0, 9, 10, 6, 7, 10, -1, -1, -1, -1,\r\n        10, 6, 7, 1, 10, 7, 1, 7, 8, 1, 8, 0, -1, -1, -1, -1,\r\n        10, 6, 7, 10, 7, 1, 1, 7, 3, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 6, 1, 6, 8, 1, 8, 9, 8, 6, 7, -1, -1, -1, -1,\r\n        2, 6, 9, 2, 9, 1, 6, 7, 9, 0, 9, 3, 7, 3, 9, -1,\r\n        7, 8, 0, 7, 0, 6, 6, 0, 2, -1, -1, -1, -1, -1, -1, -1,\r\n        7, 3, 2, 6, 7, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 3, 11, 10, 6, 8, 10, 8, 9, 8, 6, 7, -1, -1, -1, -1,\r\n        2, 0, 7, 2, 7, 11, 0, 9, 7, 6, 7, 10, 9, 10, 7, -1,\r\n        1, 8, 0, 1, 7, 8, 1, 10, 7, 6, 7, 10, 2, 3, 11, -1,\r\n        11, 2, 1, 11, 1, 7, 10, 6, 1, 6, 7, 1, -1, -1, -1, -1,\r\n        8, 9, 6, 8, 6, 7, 9, 1, 6, 11, 6, 3, 1, 3, 6, -1,\r\n        0, 9, 1, 11, 6, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        7, 8, 0, 7, 0, 6, 3, 11, 0, 11, 6, 0, -1, -1, -1, -1,\r\n        7, 11, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        7, 6, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 0, 8, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 1, 9, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        8, 1, 9, 8, 3, 1, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 1, 2, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 10, 3, 0, 8, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 9, 0, 2, 10, 9, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1,\r\n        6, 11, 7, 2, 10, 3, 10, 8, 3, 10, 9, 8, -1, -1, -1, -1,\r\n        7, 2, 3, 6, 2, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        7, 0, 8, 7, 6, 0, 6, 2, 0, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 7, 6, 2, 3, 7, 0, 1, 9, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 6, 2, 1, 8, 6, 1, 9, 8, 8, 7, 6, -1, -1, -1, -1,\r\n        10, 7, 6, 10, 1, 7, 1, 3, 7, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 7, 6, 1, 7, 10, 1, 8, 7, 1, 0, 8, -1, -1, -1, -1,\r\n        0, 3, 7, 0, 7, 10, 0, 10, 9, 6, 10, 7, -1, -1, -1, -1,\r\n        7, 6, 10, 7, 10, 8, 8, 10, 9, -1, -1, -1, -1, -1, -1, -1,\r\n        6, 8, 4, 11, 8, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 6, 11, 3, 0, 6, 0, 4, 6, -1, -1, -1, -1, -1, -1, -1,\r\n        8, 6, 11, 8, 4, 6, 9, 0, 1, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 4, 6, 9, 6, 3, 9, 3, 1, 11, 3, 6, -1, -1, -1, -1,\r\n        6, 8, 4, 6, 11, 8, 2, 10, 1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 10, 3, 0, 11, 0, 6, 11, 0, 4, 6, -1, -1, -1, -1,\r\n        4, 11, 8, 4, 6, 11, 0, 2, 9, 2, 10, 9, -1, -1, -1, -1,\r\n        10, 9, 3, 10, 3, 2, 9, 4, 3, 11, 3, 6, 4, 6, 3, -1,\r\n        8, 2, 3, 8, 4, 2, 4, 6, 2, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 4, 2, 4, 6, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 9, 0, 2, 3, 4, 2, 4, 6, 4, 3, 8, -1, -1, -1, -1,\r\n        1, 9, 4, 1, 4, 2, 2, 4, 6, -1, -1, -1, -1, -1, -1, -1,\r\n        8, 1, 3, 8, 6, 1, 8, 4, 6, 6, 10, 1, -1, -1, -1, -1,\r\n        10, 1, 0, 10, 0, 6, 6, 0, 4, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 6, 3, 4, 3, 8, 6, 10, 3, 0, 3, 9, 10, 9, 3, -1,\r\n        10, 9, 4, 6, 10, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 9, 5, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 3, 4, 9, 5, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 0, 1, 5, 4, 0, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1,\r\n        11, 7, 6, 8, 3, 4, 3, 5, 4, 3, 1, 5, -1, -1, -1, -1,\r\n        9, 5, 4, 10, 1, 2, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1,\r\n        6, 11, 7, 1, 2, 10, 0, 8, 3, 4, 9, 5, -1, -1, -1, -1,\r\n        7, 6, 11, 5, 4, 10, 4, 2, 10, 4, 0, 2, -1, -1, -1, -1,\r\n        3, 4, 8, 3, 5, 4, 3, 2, 5, 10, 5, 2, 11, 7, 6, -1,\r\n        7, 2, 3, 7, 6, 2, 5, 4, 9, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 5, 4, 0, 8, 6, 0, 6, 2, 6, 8, 7, -1, -1, -1, -1,\r\n        3, 6, 2, 3, 7, 6, 1, 5, 0, 5, 4, 0, -1, -1, -1, -1,\r\n        6, 2, 8, 6, 8, 7, 2, 1, 8, 4, 8, 5, 1, 5, 8, -1,\r\n        9, 5, 4, 10, 1, 6, 1, 7, 6, 1, 3, 7, -1, -1, -1, -1,\r\n        1, 6, 10, 1, 7, 6, 1, 0, 7, 8, 7, 0, 9, 5, 4, -1,\r\n        4, 0, 10, 4, 10, 5, 0, 3, 10, 6, 10, 7, 3, 7, 10, -1,\r\n        7, 6, 10, 7, 10, 8, 5, 4, 10, 4, 8, 10, -1, -1, -1, -1,\r\n        6, 9, 5, 6, 11, 9, 11, 8, 9, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 6, 11, 0, 6, 3, 0, 5, 6, 0, 9, 5, -1, -1, -1, -1,\r\n        0, 11, 8, 0, 5, 11, 0, 1, 5, 5, 6, 11, -1, -1, -1, -1,\r\n        6, 11, 3, 6, 3, 5, 5, 3, 1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 10, 9, 5, 11, 9, 11, 8, 11, 5, 6, -1, -1, -1, -1,\r\n        0, 11, 3, 0, 6, 11, 0, 9, 6, 5, 6, 9, 1, 2, 10, -1,\r\n        11, 8, 5, 11, 5, 6, 8, 0, 5, 10, 5, 2, 0, 2, 5, -1,\r\n        6, 11, 3, 6, 3, 5, 2, 10, 3, 10, 5, 3, -1, -1, -1, -1,\r\n        5, 8, 9, 5, 2, 8, 5, 6, 2, 3, 8, 2, -1, -1, -1, -1,\r\n        9, 5, 6, 9, 6, 0, 0, 6, 2, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 5, 8, 1, 8, 0, 5, 6, 8, 3, 8, 2, 6, 2, 8, -1,\r\n        1, 5, 6, 2, 1, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 3, 6, 1, 6, 10, 3, 8, 6, 5, 6, 9, 8, 9, 6, -1,\r\n        10, 1, 0, 10, 0, 6, 9, 5, 0, 5, 6, 0, -1, -1, -1, -1,\r\n        0, 3, 8, 5, 6, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 5, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        11, 5, 10, 7, 5, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        11, 5, 10, 11, 7, 5, 8, 3, 0, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 11, 7, 5, 10, 11, 1, 9, 0, -1, -1, -1, -1, -1, -1, -1,\r\n        10, 7, 5, 10, 11, 7, 9, 8, 1, 8, 3, 1, -1, -1, -1, -1,\r\n        11, 1, 2, 11, 7, 1, 7, 5, 1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 3, 1, 2, 7, 1, 7, 5, 7, 2, 11, -1, -1, -1, -1,\r\n        9, 7, 5, 9, 2, 7, 9, 0, 2, 2, 11, 7, -1, -1, -1, -1,\r\n        7, 5, 2, 7, 2, 11, 5, 9, 2, 3, 2, 8, 9, 8, 2, -1,\r\n        2, 5, 10, 2, 3, 5, 3, 7, 5, -1, -1, -1, -1, -1, -1, -1,\r\n        8, 2, 0, 8, 5, 2, 8, 7, 5, 10, 2, 5, -1, -1, -1, -1,\r\n        9, 0, 1, 5, 10, 3, 5, 3, 7, 3, 10, 2, -1, -1, -1, -1,\r\n        9, 8, 2, 9, 2, 1, 8, 7, 2, 10, 2, 5, 7, 5, 2, -1,\r\n        1, 3, 5, 3, 7, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 7, 0, 7, 1, 1, 7, 5, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 0, 3, 9, 3, 5, 5, 3, 7, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 8, 7, 5, 9, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 8, 4, 5, 10, 8, 10, 11, 8, -1, -1, -1, -1, -1, -1, -1,\r\n        5, 0, 4, 5, 11, 0, 5, 10, 11, 11, 3, 0, -1, -1, -1, -1,\r\n        0, 1, 9, 8, 4, 10, 8, 10, 11, 10, 4, 5, -1, -1, -1, -1,\r\n        10, 11, 4, 10, 4, 5, 11, 3, 4, 9, 4, 1, 3, 1, 4, -1,\r\n        2, 5, 1, 2, 8, 5, 2, 11, 8, 4, 5, 8, -1, -1, -1, -1,\r\n        0, 4, 11, 0, 11, 3, 4, 5, 11, 2, 11, 1, 5, 1, 11, -1,\r\n        0, 2, 5, 0, 5, 9, 2, 11, 5, 4, 5, 8, 11, 8, 5, -1,\r\n        9, 4, 5, 2, 11, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 5, 10, 3, 5, 2, 3, 4, 5, 3, 8, 4, -1, -1, -1, -1,\r\n        5, 10, 2, 5, 2, 4, 4, 2, 0, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 10, 2, 3, 5, 10, 3, 8, 5, 4, 5, 8, 0, 1, 9, -1,\r\n        5, 10, 2, 5, 2, 4, 1, 9, 2, 9, 4, 2, -1, -1, -1, -1,\r\n        8, 4, 5, 8, 5, 3, 3, 5, 1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 4, 5, 1, 0, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        8, 4, 5, 8, 5, 3, 9, 0, 5, 0, 3, 5, -1, -1, -1, -1,\r\n        9, 4, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 11, 7, 4, 9, 11, 9, 10, 11, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 8, 3, 4, 9, 7, 9, 11, 7, 9, 10, 11, -1, -1, -1, -1,\r\n        1, 10, 11, 1, 11, 4, 1, 4, 0, 7, 4, 11, -1, -1, -1, -1,\r\n        3, 1, 4, 3, 4, 8, 1, 10, 4, 7, 4, 11, 10, 11, 4, -1,\r\n        4, 11, 7, 9, 11, 4, 9, 2, 11, 9, 1, 2, -1, -1, -1, -1,\r\n        9, 7, 4, 9, 11, 7, 9, 1, 11, 2, 11, 1, 0, 8, 3, -1,\r\n        11, 7, 4, 11, 4, 2, 2, 4, 0, -1, -1, -1, -1, -1, -1, -1,\r\n        11, 7, 4, 11, 4, 2, 8, 3, 4, 3, 2, 4, -1, -1, -1, -1,\r\n        2, 9, 10, 2, 7, 9, 2, 3, 7, 7, 4, 9, -1, -1, -1, -1,\r\n        9, 10, 7, 9, 7, 4, 10, 2, 7, 8, 7, 0, 2, 0, 7, -1,\r\n        3, 7, 10, 3, 10, 2, 7, 4, 10, 1, 10, 0, 4, 0, 10, -1,\r\n        1, 10, 2, 8, 7, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 9, 1, 4, 1, 7, 7, 1, 3, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 9, 1, 4, 1, 7, 0, 8, 1, 8, 7, 1, -1, -1, -1, -1,\r\n        4, 0, 3, 7, 4, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        4, 8, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 10, 8, 10, 11, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 0, 9, 3, 9, 11, 11, 9, 10, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 1, 10, 0, 10, 8, 8, 10, 11, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 1, 10, 11, 3, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 2, 11, 1, 11, 9, 9, 11, 8, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 0, 9, 3, 9, 11, 1, 2, 9, 2, 11, 9, -1, -1, -1, -1,\r\n        0, 2, 11, 8, 0, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        3, 2, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 3, 8, 2, 8, 10, 10, 8, 9, -1, -1, -1, -1, -1, -1, -1,\r\n        9, 10, 2, 0, 9, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        2, 3, 8, 2, 8, 10, 0, 1, 8, 1, 10, 8, -1, -1, -1, -1,\r\n        1, 10, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        1, 3, 8, 9, 1, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 9, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        0, 3, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1\r\n    ]);\r\n}\r\n// Triangles are constructed between points on cube edges.\r\n// allowedContours[edge1][edge1] indicates which lines from a given\r\n// triangle should be shown in line mode.\r\n// Values are bitmasks:\r\n// In loop over cubes we keep another bitmask indicating whether our current\r\n// cell is the first x-value (1),\r\n// first y-value (2) or first z-value (4) of the current loop.\r\n// We draw all lines on leading faces but only draw trailing face lines the first\r\n// time through the loop\r\n// A value of 8 below means the edge is always drawn (leading face)\r\n// E.g. the first row, lines between edge0 and other edges in the bottom\r\n// x-y plane are only drawn for the first value of z, edges in the\r\n// x-z plane are only drawn for the first value of y. No other lines\r\n// are drawn as they're redundant\r\n// The line between edge 1 and 5 is always drawn as it's on the leading edge\r\nfunction getAllowedContours() {\r\n    return [\r\n        [0, 4, 4, 4, 2, 0, 0, 0, 2, 2, 0, 0],\r\n        [4, 0, 4, 4, 0, 8, 0, 0, 0, 8, 8, 0],\r\n        [4, 4, 0, 4, 0, 0, 8, 0, 0, 0, 8, 8],\r\n        [4, 4, 4, 0, 0, 0, 0, 1, 1, 0, 0, 1],\r\n        [2, 0, 0, 0, 0, 8, 8, 8, 2, 2, 0, 0],\r\n        [0, 8, 0, 0, 8, 0, 8, 8, 0, 8, 8, 0],\r\n        [0, 0, 8, 0, 8, 8, 0, 8, 0, 0, 8, 8],\r\n        [0, 0, 0, 1, 8, 8, 8, 0, 1, 0, 0, 1],\r\n        [2, 0, 0, 1, 2, 0, 0, 1, 0, 2, 0, 1],\r\n        [2, 8, 0, 0, 2, 8, 0, 0, 2, 0, 8, 0],\r\n        [0, 8, 8, 0, 0, 8, 8, 0, 0, 8, 0, 8],\r\n        [0, 0, 8, 1, 0, 0, 8, 1, 1, 0, 8, 0]\r\n    ];\r\n}\r\nfunction MarchingCubes(field, nx, ny, nz, atomindex) {\r\n    // Based on alteredq / http://alteredqualia.com/\r\n    // port of greggman's ThreeD version of marching cubes to Three.js\r\n    // http://webglsamples.googlecode.com/hg/blob/blob.html\r\n    //\r\n    // Adapted for NGL by Alexander Rose\r\n    var isolevel = 0;\r\n    var noNormals = false;\r\n    var contour = false;\r\n    var wrap = false;\r\n    var n = nx * ny * nz;\r\n    // deltas\r\n    var yd = nx;\r\n    var zd = nx * ny;\r\n    var normalCache, vertexIndex;\r\n    var count, icount;\r\n    var ilist = new Int32Array(12);\r\n    var positionArray = [];\r\n    var normalArray = [];\r\n    var indexArray = [];\r\n    var atomindexArray = [];\r\n    var edgeTable = getEdgeTable();\r\n    var triTable = getTriTable();\r\n    var allowedContours = getAllowedContours();\r\n    var mx, my, mz;\r\n    //\r\n    this.triangulate = function (_isolevel, _noNormals, _box, _contour, _wrap) {\r\n        isolevel = _isolevel;\r\n        contour = _contour;\r\n        wrap = _wrap;\r\n        // Normals currently disabled in contour mode for performance (unused)\r\n        noNormals = _noNormals || contour;\r\n        if (!noNormals && !normalCache) {\r\n            normalCache = new Float32Array(n * 3);\r\n        }\r\n        var vIndexLength = n * 3;\r\n        if (!vertexIndex || vertexIndex.length !== vIndexLength) {\r\n            vertexIndex = new Int32Array(vIndexLength);\r\n        }\r\n        count = 0;\r\n        icount = 0;\r\n        if (_box !== undefined) {\r\n            var min = _box[0].map(Math.round);\r\n            var max = _box[1].map(Math.round);\r\n            mx = nx * Math.ceil(Math.abs(min[0]) / nx);\r\n            my = ny * Math.ceil(Math.abs(min[1]) / ny);\r\n            mz = nz * Math.ceil(Math.abs(min[2]) / nz);\r\n            triangulate(min[0], min[1], min[2], max[0], max[1], max[2]);\r\n        }\r\n        else {\r\n            mx = my = mz = 0;\r\n            triangulate();\r\n        }\r\n        positionArray.length = count * 3;\r\n        if (!noNormals)\r\n            normalArray.length = count * 3;\r\n        indexArray.length = icount;\r\n        if (atomindex)\r\n            atomindexArray.length = count;\r\n        return {\r\n            position: new Float32Array(positionArray),\r\n            normal: noNormals ? undefined : new Float32Array(normalArray),\r\n            index: getUintArray(indexArray, positionArray.length / 3),\r\n            atomindex: atomindex ? new Int32Array(atomindexArray) : undefined,\r\n            contour: contour\r\n        };\r\n    };\r\n    // polygonization\r\n    function lerp(a, b, t) { return a + (b - a) * t; }\r\n    function index(x, y, z) {\r\n        x = (x + mx) % nx;\r\n        y = (y + my) % ny;\r\n        z = (z + mz) % nz;\r\n        return ((zd * z) + yd * y) + x;\r\n    }\r\n    function VIntX(q, offset, x, y, z, valp1, valp2) {\r\n        var _q = 3 * q;\r\n        if (vertexIndex[_q] < 0) {\r\n            var mu = (isolevel - valp1) / (valp2 - valp1);\r\n            var nc = normalCache;\r\n            var c = count * 3;\r\n            positionArray[c + 0] = x + mu;\r\n            positionArray[c + 1] = y;\r\n            positionArray[c + 2] = z;\r\n            if (!noNormals) {\r\n                var q3 = q * 3;\r\n                normalArray[c] = -lerp(nc[q3], nc[q3 + 3], mu);\r\n                normalArray[c + 1] = -lerp(nc[q3 + 1], nc[q3 + 4], mu);\r\n                normalArray[c + 2] = -lerp(nc[q3 + 2], nc[q3 + 5], mu);\r\n            }\r\n            if (atomindex)\r\n                atomindexArray[count] = atomindex[q + Math.round(mu)];\r\n            vertexIndex[_q] = count;\r\n            ilist[offset] = count;\r\n            count += 1;\r\n        }\r\n        else {\r\n            ilist[offset] = vertexIndex[_q];\r\n        }\r\n    }\r\n    function VIntY(q, offset, x, y, z, valp1, valp2) {\r\n        var _q = 3 * q + 1;\r\n        if (vertexIndex[_q] < 0) {\r\n            var mu = (isolevel - valp1) / (valp2 - valp1);\r\n            var nc = normalCache;\r\n            var c = count * 3;\r\n            positionArray[c] = x;\r\n            positionArray[c + 1] = y + mu;\r\n            positionArray[c + 2] = z;\r\n            if (!noNormals) {\r\n                var q3 = q * 3;\r\n                var q6 = q3 + yd * 3;\r\n                normalArray[c] = -lerp(nc[q3], nc[q6], mu);\r\n                normalArray[c + 1] = -lerp(nc[q3 + 1], nc[q6 + 1], mu);\r\n                normalArray[c + 2] = -lerp(nc[q3 + 2], nc[q6 + 2], mu);\r\n            }\r\n            if (atomindex)\r\n                atomindexArray[count] = atomindex[q + Math.round(mu) * yd];\r\n            vertexIndex[_q] = count;\r\n            ilist[offset] = count;\r\n            count += 1;\r\n        }\r\n        else {\r\n            ilist[offset] = vertexIndex[_q];\r\n        }\r\n    }\r\n    function VIntZ(q, offset, x, y, z, valp1, valp2) {\r\n        var _q = 3 * q + 2;\r\n        if (vertexIndex[_q] < 0) {\r\n            var mu = (isolevel - valp1) / (valp2 - valp1);\r\n            var nc = normalCache;\r\n            var c = count * 3;\r\n            positionArray[c] = x;\r\n            positionArray[c + 1] = y;\r\n            positionArray[c + 2] = z + mu;\r\n            if (!noNormals) {\r\n                var q3 = q * 3;\r\n                var q6 = q3 + zd * 3;\r\n                normalArray[c] = -lerp(nc[q3], nc[q6], mu);\r\n                normalArray[c + 1] = -lerp(nc[q3 + 1], nc[q6 + 1], mu);\r\n                normalArray[c + 2] = -lerp(nc[q3 + 2], nc[q6 + 2], mu);\r\n            }\r\n            if (atomindex)\r\n                atomindexArray[count] = atomindex[q + Math.round(mu) * zd];\r\n            vertexIndex[_q] = count;\r\n            ilist[offset] = count;\r\n            count += 1;\r\n        }\r\n        else {\r\n            ilist[offset] = vertexIndex[_q];\r\n        }\r\n    }\r\n    function compNorm(q) {\r\n        var q3 = q * 3;\r\n        if (normalCache[q3] === 0.0) {\r\n            normalCache[q3] = field[(q - 1 + n) % n] - field[(q + 1) % n];\r\n            normalCache[q3 + 1] = field[(q - yd + n) % n] - field[(q + yd) % n];\r\n            normalCache[q3 + 2] = field[(q - zd + n) % n] - field[(q + zd) % n];\r\n        }\r\n    }\r\n    function polygonize(fx, fy, fz, q, edgeFilter) {\r\n        // cache indices\r\n        var q1;\r\n        var qy;\r\n        var qz;\r\n        var q1y;\r\n        var q1z;\r\n        var qyz;\r\n        var q1yz;\r\n        if (wrap) {\r\n            q = index(fx, fy, fz);\r\n            q1 = index(fx + 1, fy, fz);\r\n            qy = index(fx, fy + 1, fz);\r\n            qz = index(fx, fy, fz + 1);\r\n            q1y = index(fx + 1, fy + 1, fz);\r\n            q1z = index(fx + 1, fy, fz + 1);\r\n            qyz = index(fx, fy + 1, fz + 1);\r\n            q1yz = index(fx + 1, fy + 1, fz + 1);\r\n        }\r\n        else {\r\n            q1 = q + 1;\r\n            qy = q + yd;\r\n            qz = q + zd;\r\n            q1y = qy + 1;\r\n            q1z = qz + 1;\r\n            qyz = qy + zd;\r\n            q1yz = qyz + 1;\r\n        }\r\n        var cubeindex = 0;\r\n        var field0 = field[q];\r\n        var field1 = field[q1];\r\n        var field2 = field[qy];\r\n        var field3 = field[q1y];\r\n        var field4 = field[qz];\r\n        var field5 = field[q1z];\r\n        var field6 = field[qyz];\r\n        var field7 = field[q1yz];\r\n        if (field0 < isolevel)\r\n            cubeindex |= 1;\r\n        if (field1 < isolevel)\r\n            cubeindex |= 2;\r\n        if (field2 < isolevel)\r\n            cubeindex |= 8;\r\n        if (field3 < isolevel)\r\n            cubeindex |= 4;\r\n        if (field4 < isolevel)\r\n            cubeindex |= 16;\r\n        if (field5 < isolevel)\r\n            cubeindex |= 32;\r\n        if (field6 < isolevel)\r\n            cubeindex |= 128;\r\n        if (field7 < isolevel)\r\n            cubeindex |= 64;\r\n        // if cube is entirely in/out of the surface - bail, nothing to draw\r\n        var bits = edgeTable[cubeindex];\r\n        if (bits === 0)\r\n            return 0;\r\n        var fx2 = fx + 1;\r\n        var fy2 = fy + 1;\r\n        var fz2 = fz + 1;\r\n        // top of the cube\r\n        if (bits & 1) {\r\n            if (!noNormals) {\r\n                compNorm(q);\r\n                compNorm(q1);\r\n            }\r\n            VIntX(q, 0, fx, fy, fz, field0, field1);\r\n        }\r\n        if (bits & 2) {\r\n            if (!noNormals) {\r\n                compNorm(q1);\r\n                compNorm(q1y);\r\n            }\r\n            VIntY(q1, 1, fx2, fy, fz, field1, field3);\r\n        }\r\n        if (bits & 4) {\r\n            if (!noNormals) {\r\n                compNorm(qy);\r\n                compNorm(q1y);\r\n            }\r\n            VIntX(qy, 2, fx, fy2, fz, field2, field3);\r\n        }\r\n        if (bits & 8) {\r\n            if (!noNormals) {\r\n                compNorm(q);\r\n                compNorm(qy);\r\n            }\r\n            VIntY(q, 3, fx, fy, fz, field0, field2);\r\n        }\r\n        // bottom of the cube\r\n        if (bits & 16) {\r\n            if (!noNormals) {\r\n                compNorm(qz);\r\n                compNorm(q1z);\r\n            }\r\n            VIntX(qz, 4, fx, fy, fz2, field4, field5);\r\n        }\r\n        if (bits & 32) {\r\n            if (!noNormals) {\r\n                compNorm(q1z);\r\n                compNorm(q1yz);\r\n            }\r\n            VIntY(q1z, 5, fx2, fy, fz2, field5, field7);\r\n        }\r\n        if (bits & 64) {\r\n            if (!noNormals) {\r\n                compNorm(qyz);\r\n                compNorm(q1yz);\r\n            }\r\n            VIntX(qyz, 6, fx, fy2, fz2, field6, field7);\r\n        }\r\n        if (bits & 128) {\r\n            if (!noNormals) {\r\n                compNorm(qz);\r\n                compNorm(qyz);\r\n            }\r\n            VIntY(qz, 7, fx, fy, fz2, field4, field6);\r\n        }\r\n        // vertical lines of the cube\r\n        if (bits & 256) {\r\n            if (!noNormals) {\r\n                compNorm(q);\r\n                compNorm(qz);\r\n            }\r\n            VIntZ(q, 8, fx, fy, fz, field0, field4);\r\n        }\r\n        if (bits & 512) {\r\n            if (!noNormals) {\r\n                compNorm(q1);\r\n                compNorm(q1z);\r\n            }\r\n            VIntZ(q1, 9, fx2, fy, fz, field1, field5);\r\n        }\r\n        if (bits & 1024) {\r\n            if (!noNormals) {\r\n                compNorm(q1y);\r\n                compNorm(q1yz);\r\n            }\r\n            VIntZ(q1y, 10, fx2, fy2, fz, field3, field7);\r\n        }\r\n        if (bits & 2048) {\r\n            if (!noNormals) {\r\n                compNorm(qy);\r\n                compNorm(qyz);\r\n            }\r\n            VIntZ(qy, 11, fx, fy2, fz, field2, field6);\r\n        }\r\n        var triIndex = cubeindex << 4; // re-purpose cubeindex into an offset into triTable\r\n        var e1;\r\n        var e2;\r\n        var e3;\r\n        var i = 0;\r\n        // here is where triangles are created\r\n        while (triTable[triIndex + i] !== -1) {\r\n            e1 = triTable[triIndex + i];\r\n            e2 = triTable[triIndex + i + 1];\r\n            e3 = triTable[triIndex + i + 2];\r\n            if (contour) {\r\n                if (allowedContours[e1][e2] & edgeFilter) {\r\n                    indexArray[icount++] = ilist[e1];\r\n                    indexArray[icount++] = ilist[e2];\r\n                }\r\n                if (allowedContours[e2][e3] & edgeFilter) {\r\n                    indexArray[icount++] = ilist[e2];\r\n                    indexArray[icount++] = ilist[e3];\r\n                }\r\n                if (allowedContours[e1][e3] & edgeFilter) {\r\n                    indexArray[icount++] = ilist[e1];\r\n                    indexArray[icount++] = ilist[e3];\r\n                }\r\n            }\r\n            else {\r\n                // FIXME normals flipping (see above) and vertex order reversal\r\n                indexArray[icount++] = ilist[e2];\r\n                indexArray[icount++] = ilist[e1];\r\n                indexArray[icount++] = ilist[e3];\r\n            }\r\n            i += 3;\r\n        }\r\n    }\r\n    function triangulate(xBeg, yBeg, zBeg, xEnd, yEnd, zEnd) {\r\n        let q;\r\n        let q3;\r\n        let x;\r\n        let y;\r\n        let z;\r\n        let yOffset;\r\n        let zOffset;\r\n        xBeg = xBeg !== undefined ? xBeg : 0;\r\n        yBeg = yBeg !== undefined ? yBeg : 0;\r\n        zBeg = zBeg !== undefined ? zBeg : 0;\r\n        xEnd = xEnd !== undefined ? xEnd : nx - 1;\r\n        yEnd = yEnd !== undefined ? yEnd : ny - 1;\r\n        zEnd = zEnd !== undefined ? zEnd : nz - 1;\r\n        if (!wrap) {\r\n            if (noNormals) {\r\n                xBeg = Math.max(0, xBeg);\r\n                yBeg = Math.max(0, yBeg);\r\n                zBeg = Math.max(0, zBeg);\r\n                xEnd = Math.min(nx - 1, xEnd);\r\n                yEnd = Math.min(ny - 1, yEnd);\r\n                zEnd = Math.min(nz - 1, zEnd);\r\n            }\r\n            else {\r\n                xBeg = Math.max(1, xBeg);\r\n                yBeg = Math.max(1, yBeg);\r\n                zBeg = Math.max(1, zBeg);\r\n                xEnd = Math.min(nx - 2, xEnd);\r\n                yEnd = Math.min(ny - 2, yEnd);\r\n                zEnd = Math.min(nz - 2, zEnd);\r\n            }\r\n        }\r\n        let xBeg2, yBeg2, zBeg2, xEnd2, yEnd2, zEnd2;\r\n        if (!wrap) {\r\n            // init part of the vertexIndex\r\n            // (takes a significant amount of time to do for all)\r\n            xBeg2 = Math.max(0, xBeg - 2);\r\n            yBeg2 = Math.max(0, yBeg - 2);\r\n            zBeg2 = Math.max(0, zBeg - 2);\r\n            xEnd2 = Math.min(nx, xEnd + 2);\r\n            yEnd2 = Math.min(ny, yEnd + 2);\r\n            zEnd2 = Math.min(nz, zEnd + 2);\r\n            for (z = zBeg2; z < zEnd2; ++z) {\r\n                zOffset = zd * z;\r\n                for (y = yBeg2; y < yEnd2; ++y) {\r\n                    yOffset = zOffset + yd * y;\r\n                    for (x = xBeg2; x < xEnd2; ++x) {\r\n                        q = 3 * (yOffset + x);\r\n                        vertexIndex[q] = -1;\r\n                        vertexIndex[q + 1] = -1;\r\n                        vertexIndex[q + 2] = -1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            xBeg2 = xBeg - 2;\r\n            yBeg2 = yBeg - 2;\r\n            zBeg2 = zBeg - 2;\r\n            xEnd2 = xEnd + 2;\r\n            yEnd2 = yEnd + 2;\r\n            zEnd2 = zEnd + 2;\r\n            for (z = zBeg2; z < zEnd2; ++z) {\r\n                for (y = yBeg2; y < yEnd2; ++y) {\r\n                    for (x = xBeg2; x < xEnd2; ++x) {\r\n                        q3 = index(x, y, z) * 3;\r\n                        vertexIndex[q3] = -1;\r\n                        vertexIndex[q3 + 1] = -1;\r\n                        vertexIndex[q3 + 2] = -1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!wrap) {\r\n            // clip space where the isovalue is too low\r\n            var __break;\r\n            var __xBeg = xBeg;\r\n            var __yBeg = yBeg;\r\n            var __zBeg = zBeg;\r\n            var __xEnd = xEnd;\r\n            var __yEnd = yEnd;\r\n            var __zEnd = zEnd;\r\n            __break = false;\r\n            for (z = zBeg; z < zEnd; ++z) {\r\n                for (y = yBeg; y < yEnd; ++y) {\r\n                    for (x = xBeg; x < xEnd; ++x) {\r\n                        q = ((nx * ny) * z) + (nx * y) + x;\r\n                        if (field[q] >= isolevel) {\r\n                            __zBeg = z;\r\n                            __break = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (__break)\r\n                        break;\r\n                }\r\n                if (__break)\r\n                    break;\r\n            }\r\n            __break = false;\r\n            for (y = yBeg; y < yEnd; ++y) {\r\n                for (z = __zBeg; z < zEnd; ++z) {\r\n                    for (x = xBeg; x < xEnd; ++x) {\r\n                        q = ((nx * ny) * z) + (nx * y) + x;\r\n                        if (field[q] >= isolevel) {\r\n                            __yBeg = y;\r\n                            __break = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (__break)\r\n                        break;\r\n                }\r\n                if (__break)\r\n                    break;\r\n            }\r\n            __break = false;\r\n            for (x = xBeg; x < xEnd; ++x) {\r\n                for (y = __yBeg; y < yEnd; ++y) {\r\n                    for (z = __zBeg; z < zEnd; ++z) {\r\n                        q = ((nx * ny) * z) + (nx * y) + x;\r\n                        if (field[q] >= isolevel) {\r\n                            __xBeg = x;\r\n                            __break = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (__break)\r\n                        break;\r\n                }\r\n                if (__break)\r\n                    break;\r\n            }\r\n            __break = false;\r\n            for (z = zEnd; z >= zBeg; --z) {\r\n                for (y = yEnd; y >= yBeg; --y) {\r\n                    for (x = xEnd; x >= xBeg; --x) {\r\n                        q = ((nx * ny) * z) + (nx * y) + x;\r\n                        if (field[q] >= isolevel) {\r\n                            __zEnd = z;\r\n                            __break = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (__break)\r\n                        break;\r\n                }\r\n                if (__break)\r\n                    break;\r\n            }\r\n            __break = false;\r\n            for (y = yEnd; y >= yBeg; --y) {\r\n                for (z = __zEnd; z >= zBeg; --z) {\r\n                    for (x = xEnd; x >= xBeg; --x) {\r\n                        q = ((nx * ny) * z) + (nx * y) + x;\r\n                        if (field[q] >= isolevel) {\r\n                            __yEnd = y;\r\n                            __break = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (__break)\r\n                        break;\r\n                }\r\n                if (__break)\r\n                    break;\r\n            }\r\n            __break = false;\r\n            for (x = xEnd; x >= xBeg; --x) {\r\n                for (y = __yEnd; y >= yBeg; --y) {\r\n                    for (z = __zEnd; z >= zBeg; --z) {\r\n                        q = ((nx * ny) * z) + (nx * y) + x;\r\n                        if (field[q] >= isolevel) {\r\n                            __xEnd = x;\r\n                            __break = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (__break)\r\n                        break;\r\n                }\r\n                if (__break)\r\n                    break;\r\n            }\r\n            //\r\n            if (noNormals) {\r\n                xBeg = Math.max(0, __xBeg - 1);\r\n                yBeg = Math.max(0, __yBeg - 1);\r\n                zBeg = Math.max(0, __zBeg - 1);\r\n                xEnd = Math.min(nx - 1, __xEnd + 1);\r\n                yEnd = Math.min(ny - 1, __yEnd + 1);\r\n                zEnd = Math.min(nz - 1, __zEnd + 1);\r\n            }\r\n            else {\r\n                xBeg = Math.max(1, __xBeg - 1);\r\n                yBeg = Math.max(1, __yBeg - 1);\r\n                zBeg = Math.max(1, __zBeg - 1);\r\n                xEnd = Math.min(nx - 2, __xEnd + 1);\r\n                yEnd = Math.min(ny - 2, __yEnd + 1);\r\n                zEnd = Math.min(nz - 2, __zEnd + 1);\r\n            }\r\n        }\r\n        // polygonize part of the grid\r\n        var edgeFilter = 15;\r\n        for (z = zBeg; z < zEnd; ++z, edgeFilter &= ~4) {\r\n            zOffset = zd * z;\r\n            edgeFilter |= 2;\r\n            for (y = yBeg; y < yEnd; ++y, edgeFilter &= ~2) {\r\n                yOffset = zOffset + yd * y;\r\n                edgeFilter |= 1;\r\n                for (x = xBeg; x < xEnd; ++x, edgeFilter &= ~1) {\r\n                    q = yOffset + x;\r\n                    polygonize(x, y, z, q, edgeFilter);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.assign(MarchingCubes, { __deps: [getEdgeTable, getTriTable, getAllowedContours, getUintArray] });\r\nexport default MarchingCubes;\r\n//# sourceMappingURL=marching-cubes.js.map","/**\r\n * @file Matrix Utils\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n *\r\n * svd methods from Eugene Zatepyakin / http://inspirit.github.io/jsfeat/\r\n */\r\nimport { v3new, v3cross } from './vector-utils';\r\nexport class Matrix {\r\n    constructor(cols, rows) {\r\n        this.cols = cols;\r\n        this.rows = rows;\r\n        this.size = this.cols * this.rows;\r\n        this.data = new Float32Array(this.size);\r\n    }\r\n    copyTo(matrix) {\r\n        matrix.data.set(this.data);\r\n    }\r\n}\r\nexport function transpose(At, A) {\r\n    let i = 0;\r\n    let j = 0;\r\n    const nrows = A.rows;\r\n    const ncols = A.cols;\r\n    let Ai = 0;\r\n    let Ati = 0;\r\n    let pAt = 0;\r\n    const ad = A.data;\r\n    const atd = At.data;\r\n    for (; i < nrows; Ati += 1, Ai += ncols, i++) {\r\n        pAt = Ati;\r\n        for (j = 0; j < ncols; pAt += nrows, j++)\r\n            atd[pAt] = ad[Ai + j];\r\n    }\r\n}\r\n// C = A * B\r\nexport function multiply(C, A, B) {\r\n    let i = 0;\r\n    let j = 0;\r\n    let k = 0;\r\n    let Ap = 0;\r\n    let pA = 0;\r\n    let pB = 0;\r\n    let _pB = 0;\r\n    let Cp = 0;\r\n    const ncols = A.cols;\r\n    const nrows = A.rows;\r\n    const mcols = B.cols;\r\n    const ad = A.data;\r\n    const bd = B.data;\r\n    const cd = C.data;\r\n    let sum = 0.0;\r\n    for (; i < nrows; Ap += ncols, i++) {\r\n        for (_pB = 0, j = 0; j < mcols; Cp++, _pB++, j++) {\r\n            pB = _pB;\r\n            pA = Ap;\r\n            sum = 0.0;\r\n            for (k = 0; k < ncols; pA++, pB += mcols, k++) {\r\n                sum += ad[pA] * bd[pB];\r\n            }\r\n            cd[Cp] = sum;\r\n        }\r\n    }\r\n}\r\n// C = A * B'\r\nexport function multiplyABt(C, A, B) {\r\n    let i = 0;\r\n    let j = 0;\r\n    let k = 0;\r\n    let Ap = 0;\r\n    let pA = 0;\r\n    let pB = 0;\r\n    let Cp = 0;\r\n    const ncols = A.cols;\r\n    const nrows = A.rows;\r\n    const mrows = B.rows;\r\n    const ad = A.data;\r\n    const bd = B.data;\r\n    const cd = C.data;\r\n    let sum = 0.0;\r\n    for (; i < nrows; Ap += ncols, i++) {\r\n        for (pB = 0, j = 0; j < mrows; Cp++, j++) {\r\n            pA = Ap;\r\n            sum = 0.0;\r\n            for (k = 0; k < ncols; pA++, pB++, k++) {\r\n                sum += ad[pA] * bd[pB];\r\n            }\r\n            cd[Cp] = sum;\r\n        }\r\n    }\r\n}\r\n// C = A' * B\r\nexport function multiplyAtB(C, A, B) {\r\n    let i = 0;\r\n    let j = 0;\r\n    let k = 0;\r\n    let Ap = 0;\r\n    let pA = 0;\r\n    let pB = 0;\r\n    let _pB = 0;\r\n    let Cp = 0;\r\n    const ncols = A.cols;\r\n    const nrows = A.rows;\r\n    const mcols = B.cols;\r\n    const ad = A.data;\r\n    const bd = B.data;\r\n    const cd = C.data;\r\n    let sum = 0.0;\r\n    for (; i < ncols; Ap++, i++) {\r\n        for (_pB = 0, j = 0; j < mcols; Cp++, _pB++, j++) {\r\n            pB = _pB;\r\n            pA = Ap;\r\n            sum = 0.0;\r\n            for (k = 0; k < nrows; pA += ncols, pB += mcols, k++) {\r\n                sum += ad[pA] * bd[pB];\r\n            }\r\n            cd[Cp] = sum;\r\n        }\r\n    }\r\n}\r\nexport function invert3x3(from, to) {\r\n    const A = from.data;\r\n    const invA = to.data;\r\n    const t1 = A[4];\r\n    const t2 = A[8];\r\n    const t4 = A[5];\r\n    const t5 = A[7];\r\n    const t8 = A[0];\r\n    const t9 = t8 * t1;\r\n    const t11 = t8 * t4;\r\n    const t13 = A[3];\r\n    const t14 = A[1];\r\n    const t15 = t13 * t14;\r\n    const t17 = A[2];\r\n    const t18 = t13 * t17;\r\n    const t20 = A[6];\r\n    const t21 = t20 * t14;\r\n    const t23 = t20 * t17;\r\n    const t26 = 1.0 / (t9 * t2 - t11 * t5 - t15 * t2 + t18 * t5 + t21 * t4 - t23 * t1);\r\n    invA[0] = (t1 * t2 - t4 * t5) * t26;\r\n    invA[1] = -(t14 * t2 - t17 * t5) * t26;\r\n    invA[2] = -(-t14 * t4 + t17 * t1) * t26;\r\n    invA[3] = -(t13 * t2 - t4 * t20) * t26;\r\n    invA[4] = (t8 * t2 - t23) * t26;\r\n    invA[5] = -(t11 - t18) * t26;\r\n    invA[6] = -(-t13 * t5 + t1 * t20) * t26;\r\n    invA[7] = -(t8 * t5 - t21) * t26;\r\n    invA[8] = (t9 - t15) * t26;\r\n}\r\nexport function mat3x3determinant(M) {\r\n    const md = M.data;\r\n    return md[0] * md[4] * md[8] -\r\n        md[0] * md[5] * md[7] -\r\n        md[3] * md[1] * md[8] +\r\n        md[3] * md[2] * md[7] +\r\n        md[6] * md[1] * md[5] -\r\n        md[6] * md[2] * md[4];\r\n}\r\n// C = A * B\r\nexport function multiply3x3(C, A, B) {\r\n    const Cd = C.data;\r\n    const Ad = A.data;\r\n    const Bd = B.data;\r\n    const m10 = Ad[0];\r\n    const m11 = Ad[1];\r\n    const m12 = Ad[2];\r\n    const m13 = Ad[3];\r\n    const m14 = Ad[4];\r\n    const m15 = Ad[5];\r\n    const m16 = Ad[6];\r\n    const m17 = Ad[7];\r\n    const m18 = Ad[8];\r\n    const m20 = Bd[0];\r\n    const m21 = Bd[1];\r\n    const m22 = Bd[2];\r\n    const m23 = Bd[3];\r\n    const m24 = Bd[4];\r\n    const m25 = Bd[5];\r\n    const m26 = Bd[6];\r\n    const m27 = Bd[7];\r\n    const m28 = Bd[8];\r\n    Cd[0] = m10 * m20 + m11 * m23 + m12 * m26;\r\n    Cd[1] = m10 * m21 + m11 * m24 + m12 * m27;\r\n    Cd[2] = m10 * m22 + m11 * m25 + m12 * m28;\r\n    Cd[3] = m13 * m20 + m14 * m23 + m15 * m26;\r\n    Cd[4] = m13 * m21 + m14 * m24 + m15 * m27;\r\n    Cd[5] = m13 * m22 + m14 * m25 + m15 * m28;\r\n    Cd[6] = m16 * m20 + m17 * m23 + m18 * m26;\r\n    Cd[7] = m16 * m21 + m17 * m24 + m18 * m27;\r\n    Cd[8] = m16 * m22 + m17 * m25 + m18 * m28;\r\n}\r\nexport function meanRows(A) {\r\n    const nrows = A.rows;\r\n    const ncols = A.cols;\r\n    const Ad = A.data;\r\n    const mean = new Array(ncols);\r\n    for (let j = 0; j < ncols; ++j) {\r\n        mean[j] = 0.0;\r\n    }\r\n    for (let i = 0, p = 0; i < nrows; ++i) {\r\n        for (let j = 0; j < ncols; ++j, ++p) {\r\n            mean[j] += Ad[p];\r\n        }\r\n    }\r\n    for (let j = 0; j < ncols; ++j) {\r\n        mean[j] /= nrows;\r\n    }\r\n    return mean;\r\n}\r\nexport function meanCols(A) {\r\n    const nrows = A.rows;\r\n    const ncols = A.cols;\r\n    const Ad = A.data;\r\n    const mean = new Array(nrows);\r\n    for (let j = 0; j < nrows; ++j) {\r\n        mean[j] = 0.0;\r\n    }\r\n    for (let i = 0, p = 0; i < ncols; ++i) {\r\n        for (let j = 0; j < nrows; ++j, ++p) {\r\n            mean[j] += Ad[p];\r\n        }\r\n    }\r\n    for (let j = 0; j < nrows; ++j) {\r\n        mean[j] /= ncols;\r\n    }\r\n    return mean;\r\n}\r\nexport function subRows(A, row) {\r\n    const nrows = A.rows;\r\n    const ncols = A.cols;\r\n    const Ad = A.data;\r\n    for (let i = 0, p = 0; i < nrows; ++i) {\r\n        for (let j = 0; j < ncols; ++j, ++p) {\r\n            Ad[p] -= row[j];\r\n        }\r\n    }\r\n}\r\nexport function subCols(A, col) {\r\n    const nrows = A.rows;\r\n    const ncols = A.cols;\r\n    const Ad = A.data;\r\n    for (let i = 0, p = 0; i < ncols; ++i) {\r\n        for (let j = 0; j < nrows; ++j, ++p) {\r\n            Ad[p] -= col[j];\r\n        }\r\n    }\r\n}\r\nexport function addRows(A, row) {\r\n    const nrows = A.rows;\r\n    const ncols = A.cols;\r\n    const Ad = A.data;\r\n    for (let i = 0, p = 0; i < nrows; ++i) {\r\n        for (let j = 0; j < ncols; ++j, ++p) {\r\n            Ad[p] += row[j];\r\n        }\r\n    }\r\n}\r\nexport function addCols(A, col) {\r\n    const nrows = A.rows;\r\n    const ncols = A.cols;\r\n    const Ad = A.data;\r\n    for (let i = 0, p = 0; i < ncols; ++i) {\r\n        for (let j = 0; j < nrows; ++j, ++p) {\r\n            Ad[p] += col[j];\r\n        }\r\n    }\r\n}\r\nexport function swap(A, i0, i1, t) {\r\n    t = A[i0];\r\n    A[i0] = A[i1];\r\n    A[i1] = t;\r\n}\r\nexport function hypot(a, b) {\r\n    a = Math.abs(a);\r\n    b = Math.abs(b);\r\n    if (a > b) {\r\n        b /= a;\r\n        return a * Math.sqrt(1.0 + b * b);\r\n    }\r\n    if (b > 0) {\r\n        a /= b;\r\n        return b * Math.sqrt(1.0 + a * a);\r\n    }\r\n    return 0.0;\r\n}\r\nconst EPSILON = 0.0000001192092896;\r\nconst FLT_MIN = 1E-37;\r\nexport function JacobiSVDImpl(At, astep, _W, Vt, vstep, m, n, n1) {\r\n    const eps = EPSILON * 2.0;\r\n    const minval = FLT_MIN;\r\n    let i = 0;\r\n    let j = 0;\r\n    let k = 0;\r\n    let iter = 0;\r\n    const maxIter = Math.max(m, 30);\r\n    let Ai = 0;\r\n    let Aj = 0;\r\n    let Vi = 0;\r\n    let Vj = 0;\r\n    let changed = 0;\r\n    let c = 0.0;\r\n    let s = 0.0;\r\n    let t = 0.0;\r\n    let t0 = 0.0;\r\n    let t1 = 0.0;\r\n    let sd = 0.0;\r\n    let beta = 0.0;\r\n    let gamma = 0.0;\r\n    let delta = 0.0;\r\n    let a = 0.0;\r\n    let p = 0.0;\r\n    let b = 0.0;\r\n    let seed = 0x1234;\r\n    let val = 0.0;\r\n    let val0 = 0.0;\r\n    let asum = 0.0;\r\n    const W = new Float64Array(n << 3);\r\n    for (; i < n; i++) {\r\n        for (k = 0, sd = 0; k < m; k++) {\r\n            t = At[i * astep + k];\r\n            sd += t * t;\r\n        }\r\n        W[i] = sd;\r\n        if (Vt) {\r\n            for (k = 0; k < n; k++) {\r\n                Vt[i * vstep + k] = 0;\r\n            }\r\n            Vt[i * vstep + i] = 1;\r\n        }\r\n    }\r\n    for (; iter < maxIter; iter++) {\r\n        changed = 0;\r\n        for (i = 0; i < n - 1; i++) {\r\n            for (j = i + 1; j < n; j++) {\r\n                Ai = (i * astep) | 0;\r\n                Aj = (j * astep) | 0;\r\n                a = W[i];\r\n                p = 0;\r\n                b = W[j];\r\n                k = 2;\r\n                p += At[Ai] * At[Aj];\r\n                p += At[Ai + 1] * At[Aj + 1];\r\n                for (; k < m; k++) {\r\n                    p += At[Ai + k] * At[Aj + k];\r\n                }\r\n                if (Math.abs(p) <= eps * Math.sqrt(a * b))\r\n                    continue;\r\n                p *= 2.0;\r\n                beta = a - b;\r\n                gamma = hypot(p, beta);\r\n                if (beta < 0) {\r\n                    delta = (gamma - beta) * 0.5;\r\n                    s = Math.sqrt(delta / gamma);\r\n                    c = (p / (gamma * s * 2.0));\r\n                }\r\n                else {\r\n                    c = Math.sqrt((gamma + beta) / (gamma * 2.0));\r\n                    s = (p / (gamma * c * 2.0));\r\n                }\r\n                a = 0.0;\r\n                b = 0.0;\r\n                k = 2; // unroll\r\n                t0 = c * At[Ai] + s * At[Aj];\r\n                t1 = -s * At[Ai] + c * At[Aj];\r\n                At[Ai] = t0;\r\n                At[Aj] = t1;\r\n                a += t0 * t0;\r\n                b += t1 * t1;\r\n                t0 = c * At[Ai + 1] + s * At[Aj + 1];\r\n                t1 = -s * At[Ai + 1] + c * At[Aj + 1];\r\n                At[Ai + 1] = t0;\r\n                At[Aj + 1] = t1;\r\n                a += t0 * t0;\r\n                b += t1 * t1;\r\n                for (; k < m; k++) {\r\n                    t0 = c * At[Ai + k] + s * At[Aj + k];\r\n                    t1 = -s * At[Ai + k] + c * At[Aj + k];\r\n                    At[Ai + k] = t0;\r\n                    At[Aj + k] = t1;\r\n                    a += t0 * t0;\r\n                    b += t1 * t1;\r\n                }\r\n                W[i] = a;\r\n                W[j] = b;\r\n                changed = 1;\r\n                if (Vt) {\r\n                    Vi = (i * vstep) | 0;\r\n                    Vj = (j * vstep) | 0;\r\n                    k = 2;\r\n                    t0 = c * Vt[Vi] + s * Vt[Vj];\r\n                    t1 = -s * Vt[Vi] + c * Vt[Vj];\r\n                    Vt[Vi] = t0;\r\n                    Vt[Vj] = t1;\r\n                    t0 = c * Vt[Vi + 1] + s * Vt[Vj + 1];\r\n                    t1 = -s * Vt[Vi + 1] + c * Vt[Vj + 1];\r\n                    Vt[Vi + 1] = t0;\r\n                    Vt[Vj + 1] = t1;\r\n                    for (; k < n; k++) {\r\n                        t0 = c * Vt[Vi + k] + s * Vt[Vj + k];\r\n                        t1 = -s * Vt[Vi + k] + c * Vt[Vj + k];\r\n                        Vt[Vi + k] = t0;\r\n                        Vt[Vj + k] = t1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (changed === 0)\r\n            break;\r\n    }\r\n    for (i = 0; i < n; i++) {\r\n        for (k = 0, sd = 0; k < m; k++) {\r\n            t = At[i * astep + k];\r\n            sd += t * t;\r\n        }\r\n        W[i] = Math.sqrt(sd);\r\n    }\r\n    for (i = 0; i < n - 1; i++) {\r\n        j = i;\r\n        for (k = i + 1; k < n; k++) {\r\n            if (W[j] < W[k]) {\r\n                j = k;\r\n            }\r\n        }\r\n        if (i !== j) {\r\n            swap(W, i, j, sd);\r\n            if (Vt) {\r\n                for (k = 0; k < m; k++) {\r\n                    swap(At, i * astep + k, j * astep + k, t);\r\n                }\r\n                for (k = 0; k < n; k++) {\r\n                    swap(Vt, i * vstep + k, j * vstep + k, t);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    for (i = 0; i < n; i++) {\r\n        _W[i] = W[i];\r\n    }\r\n    if (!Vt) {\r\n        return;\r\n    }\r\n    for (i = 0; i < n1; i++) {\r\n        sd = i < n ? W[i] : 0;\r\n        while (sd <= minval) {\r\n            // if we got a zero singular value, then in order to get the corresponding left singular vector\r\n            // we generate a random vector, project it to the previously computed left singular vectors,\r\n            // subtract the projection and normalize the difference.\r\n            val0 = (1.0 / m);\r\n            for (k = 0; k < m; k++) {\r\n                seed = (seed * 214013 + 2531011);\r\n                val = (((seed >> 16) & 0x7fff) & 256) !== 0 ? val0 : -val0;\r\n                At[i * astep + k] = val;\r\n            }\r\n            for (iter = 0; iter < 2; iter++) {\r\n                for (j = 0; j < i; j++) {\r\n                    sd = 0;\r\n                    for (k = 0; k < m; k++) {\r\n                        sd += At[i * astep + k] * At[j * astep + k];\r\n                    }\r\n                    asum = 0.0;\r\n                    for (k = 0; k < m; k++) {\r\n                        t = (At[i * astep + k] - sd * At[j * astep + k]);\r\n                        At[i * astep + k] = t;\r\n                        asum += Math.abs(t);\r\n                    }\r\n                    asum = asum ? 1.0 / asum : 0;\r\n                    for (k = 0; k < m; k++) {\r\n                        At[i * astep + k] *= asum;\r\n                    }\r\n                }\r\n            }\r\n            sd = 0;\r\n            for (k = 0; k < m; k++) {\r\n                t = At[i * astep + k];\r\n                sd += t * t;\r\n            }\r\n            sd = Math.sqrt(sd);\r\n        }\r\n        s = (1.0 / sd);\r\n        for (k = 0; k < m; k++) {\r\n            At[i * astep + k] *= s;\r\n        }\r\n    }\r\n}\r\nexport function svd(A, W, U, V) {\r\n    let at = 0;\r\n    let i = 0;\r\n    const _m = A.rows;\r\n    const _n = A.cols;\r\n    let m = _m;\r\n    let n = _n;\r\n    if (m < n) {\r\n        at = 1;\r\n        i = m;\r\n        m = n;\r\n        n = i;\r\n    }\r\n    const amt = new Matrix(m, m);\r\n    const wmt = new Matrix(1, n);\r\n    const vmt = new Matrix(n, n);\r\n    if (at === 0) {\r\n        transpose(amt, A);\r\n    }\r\n    else {\r\n        for (i = 0; i < _n * _m; i++) {\r\n            amt.data[i] = A.data[i];\r\n        }\r\n        for (; i < n * m; i++) {\r\n            amt.data[i] = 0;\r\n        }\r\n    }\r\n    JacobiSVDImpl(amt.data, m, wmt.data, vmt.data, n, m, n, m);\r\n    if (W) {\r\n        for (i = 0; i < n; i++) {\r\n            W.data[i] = wmt.data[i];\r\n        }\r\n        for (; i < _n; i++) {\r\n            W.data[i] = 0;\r\n        }\r\n    }\r\n    if (at === 0) {\r\n        if (U)\r\n            transpose(U, amt);\r\n        if (V)\r\n            transpose(V, vmt);\r\n    }\r\n    else {\r\n        if (U)\r\n            transpose(U, vmt);\r\n        if (V)\r\n            transpose(V, amt);\r\n    }\r\n}\r\n//\r\nexport function m4new() {\r\n    return new Float32Array([\r\n        1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1\r\n    ]);\r\n}\r\nexport function m4set(out, n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44) {\r\n    out[0] = n11;\r\n    out[4] = n12;\r\n    out[8] = n13;\r\n    out[12] = n14;\r\n    out[1] = n21;\r\n    out[5] = n22;\r\n    out[9] = n23;\r\n    out[13] = n24;\r\n    out[2] = n31;\r\n    out[6] = n32;\r\n    out[10] = n33;\r\n    out[14] = n34;\r\n    out[3] = n41;\r\n    out[7] = n42;\r\n    out[11] = n43;\r\n    out[15] = n44;\r\n}\r\nexport function m4identity(out) {\r\n    m4set(out, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n}\r\nm4identity.__deps = [m4set];\r\nexport function m4multiply(out, a, b) {\r\n    const a11 = a[0];\r\n    const a12 = a[4];\r\n    const a13 = a[8];\r\n    const a14 = a[12];\r\n    const a21 = a[1];\r\n    const a22 = a[5];\r\n    const a23 = a[9];\r\n    const a24 = a[13];\r\n    const a31 = a[2];\r\n    const a32 = a[6];\r\n    const a33 = a[10];\r\n    const a34 = a[14];\r\n    const a41 = a[3];\r\n    const a42 = a[7];\r\n    const a43 = a[11];\r\n    const a44 = a[15];\r\n    const b11 = b[0];\r\n    const b12 = b[4];\r\n    const b13 = b[8];\r\n    const b14 = b[12];\r\n    const b21 = b[1];\r\n    const b22 = b[5];\r\n    const b23 = b[9];\r\n    const b24 = b[13];\r\n    const b31 = b[2];\r\n    const b32 = b[6];\r\n    const b33 = b[10];\r\n    const b34 = b[14];\r\n    const b41 = b[3];\r\n    const b42 = b[7];\r\n    const b43 = b[11];\r\n    const b44 = b[15];\r\n    out[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n    out[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n    out[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n    out[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n    out[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n    out[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n    out[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n    out[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n    out[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n    out[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n    out[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n    out[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n    out[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n    out[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n    out[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n    out[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n}\r\nexport function m4makeScale(out, x, y, z) {\r\n    m4set(out, x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1);\r\n}\r\nm4makeScale.__deps = [m4set];\r\nexport function m4makeTranslation(out, x, y, z) {\r\n    m4set(out, 1, 0, 0, x, 0, 1, 0, y, 0, 0, 1, z, 0, 0, 0, 1);\r\n}\r\nm4makeTranslation.__deps = [m4set];\r\nexport function m4makeRotationY(out, theta) {\r\n    const c = Math.cos(theta);\r\n    const s = Math.sin(theta);\r\n    m4set(out, c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1);\r\n}\r\nm4makeRotationY.__deps = [m4set];\r\n//\r\nexport function m3new() {\r\n    return new Float32Array([\r\n        1, 0, 0,\r\n        0, 1, 0,\r\n        0, 0, 1\r\n    ]);\r\n}\r\nexport function m3makeNormal(out, m4) {\r\n    const r0 = v3new([m4[0], m4[1], m4[2]]);\r\n    const r1 = v3new([m4[4], m4[5], m4[6]]);\r\n    const r2 = v3new([m4[8], m4[9], m4[10]]);\r\n    const cp = v3new();\r\n    //        [ r0 ]       [ r1 x r2 ]\r\n    // M3x3 = [ r1 ]   N = [ r2 x r0 ]\r\n    //        [ r2 ]       [ r0 x r1 ]\r\n    v3cross(cp, r1, r2);\r\n    out[0] = cp[0];\r\n    out[1] = cp[1];\r\n    out[2] = cp[2];\r\n    v3cross(cp, r2, r0);\r\n    out[3] = cp[0];\r\n    out[4] = cp[1];\r\n    out[5] = cp[2];\r\n    v3cross(cp, r0, r1);\r\n    out[6] = cp[0];\r\n    out[7] = cp[1];\r\n    out[8] = cp[2];\r\n}\r\nm3makeNormal.__deps = [v3new, v3cross];\r\n//# sourceMappingURL=matrix-utils.js.map","/**\r\n * @file Surface Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { degToRad } from '../math/math-utils';\r\nimport { m4new, m4multiply, m4makeTranslation, m4makeScale, m4makeRotationY } from '../math/matrix-utils.js';\r\nimport { v3addScalar, v3subScalar, v3divideScalar, v3multiplyScalar, v3floor, v3ceil, v3sub, v3negate, v3cross, v3fromArray, normalizeVector3array } from '../math/vector-utils.js';\r\nfunction laplacianSmooth(verts, faces, numiter, inflate) {\r\n    // based on D. Xu, Y. Zhang (2009) Generating Triangulated Macromolecular\r\n    // Surfaces by Euclidean Distance Transform. PLoS ONE 4(12): e8140.\r\n    //\r\n    // Permission to use, copy, modify, and distribute this program for\r\n    // any purpose, with or without fee, is hereby granted, provided that\r\n    // the notices on the head, the reference information, and this\r\n    // copyright notice appear in all copies or substantial portions of\r\n    // the Software. It is provided \"as is\" without express or implied\r\n    // warranty.\r\n    //\r\n    // ported to JavaScript and adapted to NGL by Alexander Rose\r\n    numiter = numiter || 1;\r\n    inflate = inflate || true;\r\n    const nv = verts.length / 3;\r\n    const nf = faces.length / 3;\r\n    let norms = undefined;\r\n    if (inflate) {\r\n        norms = new Float32Array(nv * 3);\r\n    }\r\n    const tps = new Float32Array(nv * 3);\r\n    let i;\r\n    const ndeg = 20;\r\n    const vertdeg = new Array(ndeg);\r\n    for (i = 0; i < ndeg; ++i) {\r\n        vertdeg[i] = new Uint32Array(nv);\r\n    }\r\n    for (i = 0; i < nv; ++i) {\r\n        vertdeg[0][i] = 0;\r\n    }\r\n    let j, jl;\r\n    let flagvert;\r\n    // for each face\r\n    for (i = 0; i < nf; ++i) {\r\n        var ao = i * 3;\r\n        var bo = i * 3 + 1;\r\n        var co = i * 3 + 2;\r\n        // vertex a\r\n        flagvert = true;\r\n        for (j = 0, jl = vertdeg[0][faces[ao]]; j < jl; ++j) {\r\n            if (faces[bo] === vertdeg[j + 1][faces[ao]]) {\r\n                flagvert = false;\r\n                break;\r\n            }\r\n        }\r\n        if (flagvert) {\r\n            vertdeg[0][faces[ao]]++;\r\n            vertdeg[vertdeg[0][faces[ao]]][faces[ao]] = faces[bo];\r\n        }\r\n        flagvert = true;\r\n        for (j = 0, jl = vertdeg[0][faces[ao]]; j < jl; ++j) {\r\n            if (faces[co] === vertdeg[j + 1][faces[ao]]) {\r\n                flagvert = false;\r\n                break;\r\n            }\r\n        }\r\n        if (flagvert) {\r\n            vertdeg[0][faces[ao]]++;\r\n            vertdeg[vertdeg[0][faces[ao]]][faces[ao]] = faces[co];\r\n        }\r\n        // vertex b\r\n        flagvert = true;\r\n        for (j = 0, jl = vertdeg[0][faces[bo]]; j < jl; ++j) {\r\n            if (faces[ao] === vertdeg[j + 1][faces[bo]]) {\r\n                flagvert = false;\r\n                break;\r\n            }\r\n        }\r\n        if (flagvert) {\r\n            vertdeg[0][faces[bo]]++;\r\n            vertdeg[vertdeg[0][faces[bo]]][faces[bo]] = faces[ao];\r\n        }\r\n        flagvert = true;\r\n        for (j = 0, jl = vertdeg[0][faces[bo]]; j < jl; ++j) {\r\n            if (faces[co] === vertdeg[j + 1][faces[bo]]) {\r\n                flagvert = false;\r\n                break;\r\n            }\r\n        }\r\n        if (flagvert) {\r\n            vertdeg[0][faces[bo]]++;\r\n            vertdeg[vertdeg[0][faces[bo]]][faces[bo]] = faces[co];\r\n        }\r\n        // vertex c\r\n        flagvert = true;\r\n        for (j = 0; j < vertdeg[0][faces[co]]; ++j) {\r\n            if (faces[ao] === vertdeg[j + 1][faces[co]]) {\r\n                flagvert = false;\r\n                break;\r\n            }\r\n        }\r\n        if (flagvert) {\r\n            vertdeg[0][faces[co]]++;\r\n            vertdeg[vertdeg[0][faces[co]]][faces[co]] = faces[ao];\r\n        }\r\n        flagvert = true;\r\n        for (j = 0, jl = vertdeg[0][faces[co]]; j < jl; ++j) {\r\n            if (faces[bo] === vertdeg[j + 1][faces[co]]) {\r\n                flagvert = false;\r\n                break;\r\n            }\r\n        }\r\n        if (flagvert) {\r\n            vertdeg[0][faces[co]]++;\r\n            vertdeg[vertdeg[0][faces[co]]][faces[co]] = faces[bo];\r\n        }\r\n    }\r\n    var wt = 1.0;\r\n    var wt2 = 0.5;\r\n    var i3, vi3, vdi, wtvi, wt2vi;\r\n    var ssign = -1;\r\n    var scaleFactor = 1;\r\n    var outwt = 0.75 / (scaleFactor + 3.5); // area-preserving\r\n    // smoothing iterations\r\n    for (var k = 0; k < numiter; ++k) {\r\n        // for each vertex\r\n        for (i = 0; i < nv; ++i) {\r\n            i3 = i * 3;\r\n            vdi = vertdeg[0][i];\r\n            if (vdi < 3) {\r\n                tps[i3] = verts[i3];\r\n                tps[i3 + 1] = verts[i3 + 1];\r\n                tps[i3 + 2] = verts[i3 + 2];\r\n            }\r\n            else if (vdi === 3 || vdi === 4) {\r\n                tps[i3] = 0;\r\n                tps[i3 + 1] = 0;\r\n                tps[i3 + 2] = 0;\r\n                for (j = 0; j < vdi; ++j) {\r\n                    vi3 = vertdeg[j + 1][i] * 3;\r\n                    tps[i3] += verts[vi3];\r\n                    tps[i3 + 1] += verts[vi3 + 1];\r\n                    tps[i3 + 2] += verts[vi3 + 2];\r\n                }\r\n                tps[i3] += wt2 * verts[i3];\r\n                tps[i3 + 1] += wt2 * verts[i3 + 1];\r\n                tps[i3 + 2] += wt2 * verts[i3 + 2];\r\n                wt2vi = wt2 + vdi;\r\n                tps[i3] /= wt2vi;\r\n                tps[i3 + 1] /= wt2vi;\r\n                tps[i3 + 2] /= wt2vi;\r\n            }\r\n            else {\r\n                tps[i3] = 0;\r\n                tps[i3 + 1] = 0;\r\n                tps[i3 + 2] = 0;\r\n                for (j = 0; j < vdi; ++j) {\r\n                    vi3 = vertdeg[j + 1][i] * 3;\r\n                    tps[i3] += verts[vi3];\r\n                    tps[i3 + 1] += verts[vi3 + 1];\r\n                    tps[i3 + 2] += verts[vi3 + 2];\r\n                }\r\n                tps[i3] += wt * verts[i3];\r\n                tps[i3 + 1] += wt * verts[i3 + 1];\r\n                tps[i3 + 2] += wt * verts[i3 + 2];\r\n                wtvi = wt + vdi;\r\n                tps[i3] /= wtvi;\r\n                tps[i3 + 1] /= wtvi;\r\n                tps[i3 + 2] /= wtvi;\r\n            }\r\n        }\r\n        verts.set(tps); // copy smoothed positions\r\n        if (inflate) {\r\n            computeVertexNormals(verts, faces, norms);\r\n            var nv3 = nv * 3;\r\n            for (i3 = 0; i3 < nv3; i3 += 3) {\r\n                // if(verts[i].inout) ssign=1;\r\n                // else ssign=-1;\r\n                verts[i3] += ssign * outwt * norms[i3];\r\n                verts[i3 + 1] += ssign * outwt * norms[i3 + 1];\r\n                verts[i3 + 2] += ssign * outwt * norms[i3 + 2];\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.assign(laplacianSmooth, { __deps: [computeVertexNormals] });\r\nfunction computeVertexNormals(position, index, normal) {\r\n    var i, il;\r\n    if (normal === undefined) {\r\n        normal = new Float32Array(position.length);\r\n    }\r\n    else {\r\n        // reset existing normals to zero\r\n        for (i = 0, il = normal.length; i < il; i++) {\r\n            normal[i] = 0;\r\n        }\r\n    }\r\n    var a = new Float32Array(3);\r\n    var b = new Float32Array(3);\r\n    var c = new Float32Array(3);\r\n    var cb = new Float32Array(3);\r\n    var ab = new Float32Array(3);\r\n    if (index) {\r\n        // indexed elements\r\n        for (i = 0, il = index.length; i < il; i += 3) {\r\n            var ai = index[i] * 3;\r\n            var bi = index[i + 1] * 3;\r\n            var ci = index[i + 2] * 3;\r\n            v3fromArray(a, position, ai);\r\n            v3fromArray(b, position, bi);\r\n            v3fromArray(c, position, ci);\r\n            v3sub(cb, c, b);\r\n            v3sub(ab, a, b);\r\n            v3cross(cb, cb, ab);\r\n            normal[ai] += cb[0];\r\n            normal[ai + 1] += cb[1];\r\n            normal[ai + 2] += cb[2];\r\n            normal[bi] += cb[0];\r\n            normal[bi + 1] += cb[1];\r\n            normal[bi + 2] += cb[2];\r\n            normal[ci] += cb[0];\r\n            normal[ci + 1] += cb[1];\r\n            normal[ci + 2] += cb[2];\r\n        }\r\n    }\r\n    else {\r\n        // non-indexed elements (unconnected triangle soup)\r\n        for (i = 0, il = position.length; i < il; i += 9) {\r\n            v3fromArray(a, position, i);\r\n            v3fromArray(b, position, i + 3);\r\n            v3fromArray(c, position, i + 6);\r\n            v3sub(cb, c, b);\r\n            v3sub(ab, a, b);\r\n            v3cross(cb, cb, ab);\r\n            normal[i] = cb[0];\r\n            normal[i + 1] = cb[1];\r\n            normal[i + 2] = cb[2];\r\n            normal[i + 3] = cb[0];\r\n            normal[i + 4] = cb[1];\r\n            normal[i + 5] = cb[2];\r\n            normal[i + 6] = cb[0];\r\n            normal[i + 7] = cb[1];\r\n            normal[i + 8] = cb[2];\r\n        }\r\n    }\r\n    normalizeVector3array(normal);\r\n    return normal;\r\n}\r\nObject.assign(computeVertexNormals, { __deps: [\r\n        v3sub, v3cross, v3fromArray, normalizeVector3array\r\n    ] });\r\nfunction getRadiusDict(radiusList) {\r\n    var radiusDict = {};\r\n    for (var i = 0, il = radiusList.length; i < il; ++i) {\r\n        radiusDict[radiusList[i]] = true;\r\n    }\r\n    return radiusDict;\r\n}\r\nfunction getSurfaceGrid(min, max, maxRadius, scaleFactor, extraMargin) {\r\n    // need margin to avoid boundary/round off effects\r\n    var margin = (1 / scaleFactor) * 3;\r\n    margin += maxRadius;\r\n    v3subScalar(min, min, extraMargin + margin);\r\n    v3addScalar(max, max, extraMargin + margin);\r\n    v3multiplyScalar(min, min, scaleFactor);\r\n    v3floor(min, min);\r\n    v3divideScalar(min, min, scaleFactor);\r\n    v3multiplyScalar(max, max, scaleFactor);\r\n    v3ceil(max, max);\r\n    v3divideScalar(max, max, scaleFactor);\r\n    var dim = new Float32Array(3);\r\n    v3sub(dim, max, min);\r\n    v3multiplyScalar(dim, dim, scaleFactor);\r\n    v3ceil(dim, dim);\r\n    v3addScalar(dim, dim, 1);\r\n    var maxSize = Math.pow(10, 6) * 256;\r\n    var tmpSize = dim[0] * dim[1] * dim[2] * 3;\r\n    if (maxSize <= tmpSize) {\r\n        scaleFactor *= Math.pow(maxSize / tmpSize, 1 / 3);\r\n        v3multiplyScalar(min, min, scaleFactor);\r\n        v3floor(min, min);\r\n        v3divideScalar(min, min, scaleFactor);\r\n        v3multiplyScalar(max, max, scaleFactor);\r\n        v3ceil(max, max);\r\n        v3divideScalar(max, max, scaleFactor);\r\n        v3sub(dim, max, min);\r\n        v3multiplyScalar(dim, dim, scaleFactor);\r\n        v3ceil(dim, dim);\r\n        v3addScalar(dim, dim, 1);\r\n    }\r\n    var tran = new Float32Array(min);\r\n    v3negate(tran, tran);\r\n    // coordinate transformation matrix\r\n    var matrix = m4new();\r\n    var mroty = m4new();\r\n    m4makeRotationY(mroty, degToRad(90));\r\n    m4multiply(matrix, matrix, mroty);\r\n    var mscale = m4new();\r\n    m4makeScale(mscale, -1 / scaleFactor, 1 / scaleFactor, 1 / scaleFactor);\r\n    m4multiply(matrix, matrix, mscale);\r\n    var mtrans = m4new();\r\n    m4makeTranslation(mtrans, -scaleFactor * tran[2], -scaleFactor * tran[1], -scaleFactor * tran[0]);\r\n    m4multiply(matrix, matrix, mtrans);\r\n    return {\r\n        dim: dim,\r\n        tran: tran,\r\n        matrix: matrix,\r\n        scaleFactor: scaleFactor\r\n    };\r\n}\r\nObject.assign(getSurfaceGrid, { '__deps': [\r\n        degToRad,\r\n        v3subScalar, v3addScalar, v3divideScalar, v3multiplyScalar,\r\n        v3floor, v3ceil, v3sub, v3negate,\r\n        m4new, m4multiply, m4makeTranslation, m4makeScale, m4makeRotationY\r\n    ] });\r\nexport { laplacianSmooth, computeVertexNormals, getRadiusDict, getSurfaceGrid };\r\n//# sourceMappingURL=surface-utils.js.map","/**\r\n * @file Surface\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Box3, Geometry, BufferGeometry, Group, Color } from 'three';\r\nimport { Debug, Log, ColormakerRegistry } from '../globals';\r\nimport { getUintArray } from '../utils';\r\nimport { AtomPicker, SurfacePicker } from '../utils/picker.js';\r\nimport { uniformArray, uniformArray3, serialArray } from '../math/array-utils.js';\r\nimport Selection from '../selection/selection.js';\r\n/**\r\n * Surface\r\n */\r\nclass Surface {\r\n    /**\r\n     * @param {String} name - surface name\r\n     * @param {String} path - source path\r\n     * @param {Object} data - surface data\r\n     * @param {Float32Array} data.position - surface positions\r\n     * @param {Int32Array} data.index - surface indices\r\n     * @param {Float32Array} data.normal - surface normals\r\n     * @param {Float32Array} data.color - surface colors\r\n     * @param {Int32Array} data.atomindex - atom indices\r\n     * @param {boolean} data.contour - contour mode flag\r\n     */\r\n    constructor(name, path, data) {\r\n        this.name = name || '';\r\n        this.path = path || '';\r\n        this.info = {};\r\n        this.center = new Vector3();\r\n        this.boundingBox = new Box3();\r\n        if (data instanceof Geometry ||\r\n            data instanceof BufferGeometry ||\r\n            data instanceof Group) {\r\n            // to be removed\r\n            this.fromGeometry(data);\r\n        }\r\n        else if (data) {\r\n            this.set(data.position, data.index, data.normal, data.color, data.atomindex, data.contour);\r\n            this.boundingBox.setFromArray(data.position);\r\n            this.boundingBox.getCenter(this.center);\r\n        }\r\n    }\r\n    get type() { return 'Surface'; }\r\n    /**\r\n     * set surface data\r\n     * @param {Float32Array} position - surface positions\r\n     * @param {Int32Array} index - surface indices\r\n     * @param {Float32Array} normal - surface normals\r\n     * @param {Float32Array} color - surface colors\r\n     * @param {Int32Array} atomindex - atom indices\r\n     * @param {boolean} contour - contour mode flag\r\n     * @return {undefined}\r\n     */\r\n    set(position, index, normal, color, atomindex, contour = false) {\r\n        /**\r\n         * @type {Float32Array}\r\n         */\r\n        this.position = position;\r\n        /**\r\n         * @type {Uint32Array|Uint16Array|undefined}\r\n         */\r\n        this.index = index;\r\n        /**\r\n         * @type {Float32Array|undefined}\r\n         */\r\n        this.normal = normal;\r\n        /**\r\n         * @type {Float32Array|undefined}\r\n         */\r\n        this.color = color;\r\n        /**\r\n         * @type {Int32Array|undefined}\r\n         */\r\n        this.atomindex = atomindex;\r\n        this.size = position.length / 3;\r\n        this.contour = contour;\r\n    }\r\n    fromGeometry(geometry) {\r\n        if (Debug)\r\n            Log.time('GeometrySurface.fromGeometry');\r\n        let geo;\r\n        if (geometry instanceof Geometry) {\r\n            geometry.computeVertexNormals(true);\r\n            geo = new BufferGeometry().fromGeometry(geometry);\r\n        }\r\n        else if (geometry instanceof BufferGeometry) {\r\n            geo = geometry;\r\n        }\r\n        else {\r\n            geo = geometry[0];\r\n        }\r\n        if (!geo.boundingBox)\r\n            geo.computeBoundingBox();\r\n        this.boundingBox.copy(geo.boundingBox);\r\n        this.boundingBox.getCenter(this.center);\r\n        let position, color, index, normal;\r\n        if (geo instanceof BufferGeometry) {\r\n            const attr = geo.attributes;\r\n            const an = attr.normal ? attr.normal.array : false;\r\n            // assume there are no normals if the first is zero\r\n            if (!an || (an[0] === 0 && an[1] === 0 && an[2] === 0)) {\r\n                geo.computeVertexNormals();\r\n            }\r\n            position = attr.position.array;\r\n            index = attr.index ? attr.index.array : null;\r\n            normal = attr.normal.array;\r\n        }\r\n        this.set(position, index, normal, color, undefined);\r\n        if (Debug)\r\n            Log.timeEnd('GeometrySurface.setGeometry');\r\n    }\r\n    getPosition() {\r\n        return this.position;\r\n    }\r\n    getColor(params) {\r\n        const p = params || {};\r\n        p.surface = this;\r\n        const n = this.size;\r\n        const array = new Float32Array(n * 3);\r\n        const colormaker = ColormakerRegistry.getScheme(p);\r\n        if (colormaker.volumeColor || p.scheme === 'random') {\r\n            for (let i = 0; i < n; ++i) {\r\n                colormaker.volumeColorToArray(i, array, i * 3);\r\n            }\r\n        }\r\n        else if (colormaker.positionColor) {\r\n            const v = new Vector3();\r\n            const pos = this.position;\r\n            for (let i = 0; i < n; ++i) {\r\n                var i3 = i * 3;\r\n                v.set(pos[i3], pos[i3 + 1], pos[i3 + 2]);\r\n                colormaker.positionColorToArray(v, array, i3);\r\n            }\r\n        }\r\n        else if (colormaker.atomColor && this.atomindex) {\r\n            const atomProxy = p.structure.getAtomProxy();\r\n            const atomindex = this.atomindex;\r\n            for (let i = 0; i < n; ++i) {\r\n                atomProxy.index = atomindex[i];\r\n                colormaker.atomColorToArray(atomProxy, array, i * 3);\r\n            }\r\n        }\r\n        else {\r\n            const tc = new Color(p.value);\r\n            uniformArray3(n, tc.r, tc.g, tc.b, array);\r\n        }\r\n        return array;\r\n    }\r\n    getPicking(structure) {\r\n        if (this.atomindex && structure) {\r\n            return new AtomPicker(this.atomindex, structure);\r\n        }\r\n        else {\r\n            return new SurfacePicker(serialArray(this.size), this);\r\n        }\r\n    }\r\n    getNormal() {\r\n        return this.normal;\r\n    }\r\n    getSize(size, scale) {\r\n        return uniformArray(this.size, size * scale);\r\n    }\r\n    getIndex() {\r\n        return this.index;\r\n    }\r\n    getFilteredIndex(sele, structure) {\r\n        if (sele && this.atomindex) {\r\n            const selection = new Selection(sele);\r\n            const atomSet = structure.getAtomSet(selection);\r\n            const filteredIndex = [];\r\n            const atomindex = this.atomindex;\r\n            const index = this.index;\r\n            const n = index.length;\r\n            const elementSize = this.contour ? 2 : 3;\r\n            let j = 0;\r\n            for (let i = 0; i < n; i += elementSize) {\r\n                let include = true;\r\n                for (let a = 0; a < elementSize; a++) {\r\n                    const idx = index[i + a];\r\n                    const ai = atomindex[idx];\r\n                    if (!atomSet.get(ai)) {\r\n                        include = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!include) {\r\n                    continue;\r\n                }\r\n                for (let a = 0; a < elementSize; a++, j++) {\r\n                    filteredIndex[j] = index[i + a];\r\n                }\r\n            }\r\n            return getUintArray(filteredIndex, this.position.length / 3);\r\n        }\r\n        else {\r\n            return this.index;\r\n        }\r\n    }\r\n    getAtomindex() {\r\n        return this.atomindex;\r\n    }\r\n    dispose() {\r\n        //\r\n    }\r\n}\r\nexport default Surface;\r\n//# sourceMappingURL=surface.js.map","/**\r\n * @file Volume\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Box3, Matrix3, Matrix4 } from 'three';\r\nimport { WorkerRegistry, ColormakerRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport WorkerPool from '../worker/worker-pool.js';\r\nimport { VolumePicker } from '../utils/picker.js';\r\nimport { uniformArray, serialArray, arrayMin, arrayMax, arraySum, arrayMean, arrayRms } from '../math/array-utils';\r\nimport MarchingCubes from './marching-cubes.js';\r\nimport { laplacianSmooth, computeVertexNormals } from './surface-utils.js';\r\nimport { applyMatrix4toVector3array, applyMatrix3toVector3array } from '../math/vector-utils.js';\r\nimport { m3new, m3makeNormal } from '../math/matrix-utils.js';\r\nimport Surface from './surface.js';\r\nexport function VolumeSurface(data, nx, ny, nz, atomindex) {\r\n    var mc = new MarchingCubes(data, nx, ny, nz, atomindex);\r\n    function getSurface(isolevel, smooth, box, matrix, contour, wrap = false) {\r\n        const sd = mc.triangulate(isolevel, smooth, box, contour, wrap);\r\n        if (smooth && !contour) {\r\n            laplacianSmooth(sd.position, sd.index, smooth, true);\r\n            sd.normal = computeVertexNormals(sd.position, sd.index);\r\n        }\r\n        if (matrix) {\r\n            applyMatrix4toVector3array(matrix, sd.position);\r\n            if (sd.normal) {\r\n                const normalMatrix = m3new();\r\n                m3makeNormal(normalMatrix, matrix);\r\n                applyMatrix3toVector3array(normalMatrix, sd.normal);\r\n            }\r\n        }\r\n        return sd;\r\n    }\r\n    this.getSurface = getSurface;\r\n}\r\nObject.assign(VolumeSurface, { __deps: [\r\n        laplacianSmooth, computeVertexNormals, MarchingCubes,\r\n        applyMatrix4toVector3array, applyMatrix3toVector3array,\r\n        m3new, m3makeNormal\r\n    ] });\r\nWorkerRegistry.add('surf', function func(e, callback) {\r\n    const a = e.data.args;\r\n    const p = e.data.params;\r\n    if (a) {\r\n        /* global self */\r\n        self.volsurf = new VolumeSurface(a[0], a[1], a[2], a[3], a[4]);\r\n    }\r\n    if (p) {\r\n        const sd = self.volsurf.getSurface(p.isolevel, p.smooth, p.box, p.matrix, p.contour, p.wrap);\r\n        const transferList = [sd.position.buffer, sd.index.buffer];\r\n        if (sd.normal)\r\n            transferList.push(sd.normal.buffer);\r\n        if (sd.atomindex)\r\n            transferList.push(sd.atomindex.buffer);\r\n        const data = {\r\n            sd: sd,\r\n            p: p\r\n        };\r\n        callback(data, transferList);\r\n    }\r\n}, [VolumeSurface]);\r\n/**\r\n * Volume\r\n */\r\nclass Volume {\r\n    /**\r\n     * Make Volume instance\r\n     * @param {String} name - volume name\r\n     * @param {String} path - source path\r\n     * @param {Float32array} data - volume 3d grid\r\n     * @param {Integer} nx - x dimension of the 3d volume\r\n     * @param {Integer} ny - y dimension of the 3d volume\r\n     * @param {Integer} nz - z dimension of the 3d volume\r\n     * @param {Int32Array} atomindex - atom indices corresponding to the cells in the 3d grid\r\n     */\r\n    constructor(name, path, data, nx, ny, nz, atomindex) {\r\n        this.name = name;\r\n        this.path = path;\r\n        this.matrix = new Matrix4();\r\n        this.normalMatrix = new Matrix3();\r\n        this.inverseMatrix = new Matrix4();\r\n        this.center = new Vector3();\r\n        this.boundingBox = new Box3();\r\n        this.setData(data, nx, ny, nz, atomindex);\r\n    }\r\n    get type() { return 'Volume'; }\r\n    /**\r\n     * set volume data\r\n     * @param {Float32array} data - volume 3d grid\r\n     * @param {Integer} nx - x dimension of the 3d volume\r\n     * @param {Integer} ny - y dimension of the 3d volume\r\n     * @param {Integer} nz - z dimension of the 3d volume\r\n     * @param {Int32Array} atomindex - atom indices corresponding to the cells in the 3d grid\r\n     * @return {undefined}\r\n     */\r\n    setData(data, nx, ny, nz, atomindex) {\r\n        this.nx = nx || 1;\r\n        this.ny = ny || 1;\r\n        this.nz = nz || 1;\r\n        this.data = data || new Float32Array(1);\r\n        this.setAtomindex(atomindex);\r\n        delete this._position;\r\n        delete this._min;\r\n        delete this._max;\r\n        delete this._mean;\r\n        delete this._rms;\r\n        if (this.worker)\r\n            this.worker.terminate();\r\n    }\r\n    /**\r\n     * Set statistics, which can be different from the data in this volume,\r\n     * if this volume is a slice of a bigger volume\r\n     * @param {Number|undefined} min - minimum value of the whole data set\r\n     * @param {Number|undefined} max - maximum value of the whole data set\r\n     * @param {Number|undefined} mean - average value of the whole data set\r\n     * @param {Number|undefined} rms - sigma value of the whole data set\r\n     */\r\n    setStats(min, max, mean, rms) {\r\n        this._min = min;\r\n        this._max = max;\r\n        this._mean = mean;\r\n        this._rms = rms;\r\n    }\r\n    /**\r\n     * set transformation matrix\r\n     * @param {Matrix4} matrix - 4x4 transformation matrix\r\n     * @return {undefined}\r\n     */\r\n    setMatrix(matrix) {\r\n        this.matrix.copy(matrix);\r\n        const bb = this.boundingBox;\r\n        const v = this.center; // temporary re-purposing\r\n        const x = this.nx - 1;\r\n        const y = this.ny - 1;\r\n        const z = this.nz - 1;\r\n        bb.makeEmpty();\r\n        bb.expandByPoint(v.set(x, y, z));\r\n        bb.expandByPoint(v.set(x, y, 0));\r\n        bb.expandByPoint(v.set(x, 0, z));\r\n        bb.expandByPoint(v.set(x, 0, 0));\r\n        bb.expandByPoint(v.set(0, y, z));\r\n        bb.expandByPoint(v.set(0, 0, z));\r\n        bb.expandByPoint(v.set(0, y, 0));\r\n        bb.expandByPoint(v.set(0, 0, 0));\r\n        bb.applyMatrix4(this.matrix);\r\n        bb.getCenter(this.center);\r\n        // make normal matrix\r\n        const me = this.matrix.elements;\r\n        const r0 = new Vector3(me[0], me[1], me[2]);\r\n        const r1 = new Vector3(me[4], me[5], me[6]);\r\n        const r2 = new Vector3(me[8], me[9], me[10]);\r\n        const cp = new Vector3();\r\n        //        [ r0 ]       [ r1 x r2 ]\r\n        // M3x3 = [ r1 ]   N = [ r2 x r0 ]\r\n        //        [ r2 ]       [ r0 x r1 ]\r\n        const ne = this.normalMatrix.elements;\r\n        cp.crossVectors(r1, r2);\r\n        ne[0] = cp.x;\r\n        ne[1] = cp.y;\r\n        ne[2] = cp.z;\r\n        cp.crossVectors(r2, r0);\r\n        ne[3] = cp.x;\r\n        ne[4] = cp.y;\r\n        ne[5] = cp.z;\r\n        cp.crossVectors(r0, r1);\r\n        ne[6] = cp.x;\r\n        ne[7] = cp.y;\r\n        ne[8] = cp.z;\r\n        this.inverseMatrix.getInverse(this.matrix);\r\n    }\r\n    /**\r\n     * set atom indices\r\n     * @param {Int32Array} atomindex - atom indices corresponding to the cells in the 3d grid\r\n     * @return {undefined}\r\n       */\r\n    setAtomindex(atomindex) {\r\n        this.atomindex = atomindex;\r\n    }\r\n    getBox(center, size, target) {\r\n        if (!target)\r\n            target = new Box3();\r\n        target.set(center, center);\r\n        target.expandByScalar(size);\r\n        target.applyMatrix4(this.inverseMatrix);\r\n        target.min.round();\r\n        target.max.round();\r\n        return target;\r\n    }\r\n    _getBox(center, size) {\r\n        if (!center || !size)\r\n            return;\r\n        if (!this.__box)\r\n            this.__box = new Box3();\r\n        const box = this.getBox(center, size, this.__box);\r\n        return [box.min.toArray(), box.max.toArray()];\r\n    }\r\n    _makeSurface(sd, isolevel, smooth) {\r\n        const name = this.name + '@' + isolevel.toPrecision(2);\r\n        const surface = new Surface(name, '', sd);\r\n        surface.info.isolevel = isolevel;\r\n        surface.info.smooth = smooth;\r\n        surface.info.volume = this;\r\n        return surface;\r\n    }\r\n    getSurface(isolevel, smooth, center, size, contour, wrap = false) {\r\n        isolevel = isNaN(isolevel) ? this.getValueForSigma(2) : isolevel;\r\n        smooth = defaults(smooth, 0);\r\n        //\r\n        if (this.volsurf === undefined) {\r\n            this.volsurf = new VolumeSurface(this.data, this.nx, this.ny, this.nz, this.atomindex);\r\n        }\r\n        const box = this._getBox(center, size);\r\n        const sd = this.volsurf.getSurface(isolevel, smooth, box, this.matrix.elements, contour, wrap);\r\n        return this._makeSurface(sd, isolevel, smooth);\r\n    }\r\n    getSurfaceWorker(isolevel, smooth, center, size, contour, wrap, callback) {\r\n        isolevel = isNaN(isolevel) ? this.getValueForSigma(2) : isolevel;\r\n        smooth = smooth || 0;\r\n        //\r\n        if (window.hasOwnProperty('Worker')) {\r\n            if (this.workerPool === undefined) {\r\n                this.workerPool = new WorkerPool('surf', 2);\r\n            }\r\n            const msg = {};\r\n            const worker = this.workerPool.getNextWorker();\r\n            if (worker.postCount === 0) {\r\n                Object.assign(msg, {\r\n                    args: [\r\n                        this.data, this.nx, this.ny, this.nz, this.atomindex\r\n                    ]\r\n                });\r\n            }\r\n            Object.assign(msg, {\r\n                params: {\r\n                    isolevel: isolevel,\r\n                    smooth: smooth,\r\n                    box: this._getBox(center, size),\r\n                    matrix: this.matrix.elements,\r\n                    contour: contour,\r\n                    wrap: wrap\r\n                }\r\n            });\r\n            worker.post(msg, undefined, (e) => {\r\n                const sd = e.data.sd;\r\n                const p = e.data.p;\r\n                callback(this._makeSurface(sd, p.isolevel, p.smooth));\r\n            }, (e) => {\r\n                console.warn('Volume.getSurfaceWorker error - trying without worker', e);\r\n                const surface = this.getSurface(isolevel, smooth, center, size, contour, wrap);\r\n                callback(surface);\r\n            });\r\n        }\r\n        else {\r\n            const surface = this.getSurface(isolevel, smooth, center, size, contour, wrap);\r\n            callback(surface);\r\n        }\r\n    }\r\n    getValueForSigma(sigma) {\r\n        return this.mean + defaults(sigma, 2) * this.rms;\r\n    }\r\n    getSigmaForValue(value) {\r\n        return (defaults(value, 0) - this.mean) / this.rms;\r\n    }\r\n    get position() {\r\n        if (!this._position) {\r\n            const nz = this.nz;\r\n            const ny = this.ny;\r\n            const nx = this.nx;\r\n            const position = new Float32Array(nx * ny * nz * 3);\r\n            let p = 0;\r\n            for (let z = 0; z < nz; ++z) {\r\n                for (let y = 0; y < ny; ++y) {\r\n                    for (let x = 0; x < nx; ++x) {\r\n                        position[p + 0] = x;\r\n                        position[p + 1] = y;\r\n                        position[p + 2] = z;\r\n                        p += 3;\r\n                    }\r\n                }\r\n            }\r\n            applyMatrix4toVector3array(this.matrix.elements, position);\r\n            this._position = position;\r\n        }\r\n        return this._position;\r\n    }\r\n    getDataAtomindex() {\r\n        return this.atomindex;\r\n    }\r\n    getDataPosition() {\r\n        return this.position;\r\n    }\r\n    getDataColor(params) {\r\n        const p = params || {};\r\n        p.volume = this;\r\n        p.scale = p.scale || 'Spectral';\r\n        p.domain = p.domain || [this.min, this.max];\r\n        const colormaker = ColormakerRegistry.getScheme(p);\r\n        const n = this.position.length / 3;\r\n        const array = new Float32Array(n * 3);\r\n        // var atoms = p.structure.atoms;\r\n        // var atomindex = this.atomindex;\r\n        for (let i = 0; i < n; ++i) {\r\n            colormaker.volumeColorToArray(i, array, i * 3);\r\n            // a = atoms[ atomindex[ i ] ];\r\n            // if( a ) colormaker.atomColorToArray( a, array, i * 3 );\r\n        }\r\n        return array;\r\n    }\r\n    getDataPicking() {\r\n        const picking = serialArray(this.position.length / 3);\r\n        return new VolumePicker(picking, this);\r\n    }\r\n    getDataSize(size, scale) {\r\n        const data = this.data;\r\n        const n = this.position.length / 3;\r\n        let array;\r\n        switch (size) {\r\n            case 'value':\r\n                array = new Float32Array(data);\r\n                break;\r\n            case 'abs-value':\r\n                array = new Float32Array(data);\r\n                for (let i = 0; i < n; ++i) {\r\n                    array[i] = Math.abs(array[i]);\r\n                }\r\n                break;\r\n            case 'value-min': {\r\n                array = new Float32Array(data);\r\n                const min = this.min;\r\n                for (let i = 0; i < n; ++i) {\r\n                    array[i] -= min;\r\n                }\r\n                break;\r\n            }\r\n            case 'deviation':\r\n                array = new Float32Array(data);\r\n                break;\r\n            default:\r\n                array = uniformArray(n, size);\r\n                break;\r\n        }\r\n        if (scale !== 1.0) {\r\n            for (let i = 0; i < n; ++i) {\r\n                array[i] *= scale;\r\n            }\r\n        }\r\n        return array;\r\n    }\r\n    get min() {\r\n        if (this._min === undefined) {\r\n            this._min = arrayMin(this.data);\r\n        }\r\n        return this._min;\r\n    }\r\n    get max() {\r\n        if (this._max === undefined) {\r\n            this._max = arrayMax(this.data);\r\n        }\r\n        return this._max;\r\n    }\r\n    get sum() {\r\n        if (this._sum === undefined) {\r\n            this._sum = arraySum(this.data);\r\n        }\r\n        return this._sum;\r\n    }\r\n    get mean() {\r\n        if (this._mean === undefined) {\r\n            this._mean = arrayMean(this.data);\r\n        }\r\n        return this._mean;\r\n    }\r\n    get rms() {\r\n        if (this._rms === undefined) {\r\n            this._rms = arrayRms(this.data);\r\n        }\r\n        return this._rms;\r\n    }\r\n    clone() {\r\n        const vol = new Volume(this.name, this.path, this.data, this.nx, this.ny, this.nz, this.atomindex);\r\n        vol.matrix.copy(this.matrix);\r\n        vol.header = Object.assign({}, this.header);\r\n        return vol;\r\n    }\r\n    dispose() {\r\n        if (this.workerPool)\r\n            this.workerPool.terminate();\r\n    }\r\n}\r\nexport default Volume;\r\n//# sourceMappingURL=volume.js.map","/**\r\n * @file Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Color, Vector3, Matrix4, FrontSide, BackSide, DoubleSide, \r\n// VertexColors,\r\nNoBlending, BufferGeometry, BufferAttribute, UniformsUtils, UniformsLib, Group, LineSegments, Points, Mesh, ShaderMaterial } from 'three';\r\nimport { Log } from '../globals';\r\nimport { createParams, getTypedArray, getUintArray } from '../utils';\r\nimport { getShader } from '../shader/shader-utils.js';\r\nimport { serialArray } from '../math/array-utils';\r\nfunction getThreeSide(side) {\r\n    if (side === 'front') {\r\n        return FrontSide;\r\n    }\r\n    else if (side === 'back') {\r\n        return BackSide;\r\n    }\r\n    else if (side === 'double') {\r\n        return DoubleSide;\r\n    }\r\n    else {\r\n        return DoubleSide;\r\n    }\r\n}\r\nconst itemSize = {\r\n    'f': 1, 'v2': 2, 'v3': 3, 'c': 3\r\n};\r\nfunction setObjectMatrix(object, matrix) {\r\n    object.matrix.copy(matrix);\r\n    object.matrix.decompose(object.position, object.quaternion, object.scale);\r\n    object.matrixWorldNeedsUpdate = true;\r\n}\r\nexport const BufferDefaultParameters = {\r\n    opaqueBack: false,\r\n    side: 'double',\r\n    opacity: 1.0,\r\n    depthWrite: true,\r\n    clipNear: 0,\r\n    clipRadius: 0,\r\n    clipCenter: new Vector3(),\r\n    flatShaded: false,\r\n    wireframe: false,\r\n    roughness: 0.4,\r\n    metalness: 0.0,\r\n    diffuse: 0xffffff,\r\n    diffuseInterior: false,\r\n    useInteriorColor: false,\r\n    interiorColor: 0xdddddd,\r\n    interiorDarkening: 0,\r\n    forceTransparent: false,\r\n    matrix: new Matrix4(),\r\n    disablePicking: false,\r\n    sortParticles: false,\r\n    background: false\r\n};\r\nexport const BufferParameterTypes = {\r\n    opaqueBack: { updateShader: true },\r\n    side: { updateShader: true, property: true },\r\n    opacity: { uniform: true },\r\n    depthWrite: { property: true },\r\n    clipNear: { updateShader: true, property: true },\r\n    clipRadius: { updateShader: true, uniform: true },\r\n    clipCenter: { uniform: true },\r\n    flatShaded: { updateShader: true },\r\n    background: { updateShader: true },\r\n    wireframe: { updateVisibility: true },\r\n    roughness: { uniform: true },\r\n    metalness: { uniform: true },\r\n    diffuse: { uniform: true },\r\n    diffuseInterior: { updateShader: true },\r\n    useInteriorColor: { updateShader: true },\r\n    interiorColor: { uniform: true },\r\n    interiorDarkening: { uniform: true },\r\n    matrix: {}\r\n};\r\n/**\r\n * Buffer class. Base class for buffers.\r\n * @interface\r\n */\r\nclass Buffer {\r\n    /**\r\n     * @param {Object} data - attribute object\r\n     * @param {Float32Array} data.position - positions\r\n     * @param {Float32Array} data.color - colors\r\n     * @param {Uint32Array|Uint16Array} data.index - triangle indices\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param {BufferParameters} params - parameters object\r\n     */\r\n    constructor(data, params = {}) {\r\n        this.parameterTypes = BufferParameterTypes;\r\n        this.geometry = new BufferGeometry();\r\n        this.indexVersion = 0;\r\n        this.wireframeIndexVersion = -1;\r\n        this.group = new Group();\r\n        this.wireframeGroup = new Group();\r\n        this.pickingGroup = new Group();\r\n        this.vertexShader = '';\r\n        this.fragmentShader = '';\r\n        this.isImpostor = false;\r\n        this.isText = false;\r\n        this.isSurface = false;\r\n        this.isPoint = false;\r\n        this.isLine = false;\r\n        this.dynamic = true;\r\n        this.visible = true;\r\n        this.wireframeIndexCount = 0;\r\n        this.parameters = createParams(params, this.defaultParameters);\r\n        this.uniforms = UniformsUtils.merge([\r\n            UniformsLib.common,\r\n            {\r\n                fogColor: { value: new Color(0x000000) },\r\n                fogNear: { value: 0.0 },\r\n                fogFar: { value: 0.0 },\r\n                opacity: { value: this.parameters.opacity },\r\n                clipNear: { value: 0.0 },\r\n                clipRadius: { value: this.parameters.clipRadius },\r\n                clipCenter: { value: this.parameters.clipCenter }\r\n            },\r\n            {\r\n                emissive: { value: new Color(0x000000) },\r\n                roughness: { value: this.parameters.roughness },\r\n                metalness: { value: this.parameters.metalness },\r\n                interiorColor: { value: new Color(this.parameters.interiorColor) },\r\n                interiorDarkening: { value: this.parameters.interiorDarkening },\r\n            },\r\n            UniformsLib.lights\r\n        ]);\r\n        this.uniforms.diffuse.value.set(this.parameters.diffuse);\r\n        this.pickingUniforms = {\r\n            clipNear: { value: 0.0 },\r\n            objectId: { value: 0 },\r\n            opacity: { value: this.parameters.opacity }\r\n        };\r\n        //\r\n        const position = data.position || data.position1;\r\n        this._positionDataSize = position ? position.length / 3 : 0;\r\n        if (!data.primitiveId) {\r\n            data.primitiveId = serialArray(this._positionDataSize);\r\n        }\r\n        this.addAttributes({\r\n            position: { type: 'v3', value: data.position },\r\n            color: { type: 'c', value: data.color },\r\n            primitiveId: { type: 'f', value: data.primitiveId }\r\n        });\r\n        if (params.matrix) {\r\n            this.matrix = params.matrix;\r\n        }\r\n        if (data.index) {\r\n            this.initIndex(data.index);\r\n        }\r\n        this.picking = data.picking;\r\n        this.makeWireframeGeometry();\r\n    }\r\n    get defaultParameters() { return BufferDefaultParameters; }\r\n    set matrix(m) {\r\n        this.setMatrix(m);\r\n    }\r\n    get matrix() {\r\n        return this.group.matrix.clone();\r\n    }\r\n    get transparent() {\r\n        return this.parameters.opacity < 1 || this.parameters.forceTransparent;\r\n    }\r\n    get size() {\r\n        return this._positionDataSize;\r\n    }\r\n    get attributeSize() {\r\n        return this.size;\r\n    }\r\n    get pickable() {\r\n        return !!this.picking && !this.parameters.disablePicking;\r\n    }\r\n    setMatrix(m) {\r\n        setObjectMatrix(this.group, m);\r\n        setObjectMatrix(this.wireframeGroup, m);\r\n        setObjectMatrix(this.pickingGroup, m);\r\n    }\r\n    initIndex(index) {\r\n        this.geometry.setIndex(new BufferAttribute(index, 1));\r\n        const nindex = this.geometry.getIndex();\r\n        if (!nindex) {\r\n            Log.error('Index is null');\r\n            return;\r\n        }\r\n        nindex.setUsage(this.dynamic ? WebGLRenderingContext.DYNAMIC_DRAW : 0);\r\n    }\r\n    makeMaterial() {\r\n        const side = getThreeSide(this.parameters.side);\r\n        const m = new ShaderMaterial({\r\n            uniforms: this.uniforms,\r\n            vertexShader: '',\r\n            fragmentShader: '',\r\n            depthTest: true,\r\n            transparent: this.transparent,\r\n            depthWrite: this.parameters.depthWrite,\r\n            lights: true,\r\n            fog: true,\r\n            side: side\r\n        });\r\n        m.vertexColors = true;\r\n        m.extensions.derivatives = true;\r\n        m.extensions.fragDepth = this.isImpostor;\r\n        const wm = new ShaderMaterial({\r\n            uniforms: this.uniforms,\r\n            vertexShader: '',\r\n            fragmentShader: '',\r\n            depthTest: true,\r\n            transparent: this.transparent,\r\n            depthWrite: this.parameters.depthWrite,\r\n            lights: false,\r\n            fog: true,\r\n            side: side\r\n        });\r\n        wm.vertexColors = true;\r\n        const pm = new ShaderMaterial({\r\n            uniforms: this.pickingUniforms,\r\n            vertexShader: '',\r\n            fragmentShader: '',\r\n            depthTest: true,\r\n            transparent: false,\r\n            depthWrite: this.parameters.depthWrite,\r\n            lights: false,\r\n            fog: false,\r\n            side: side,\r\n            blending: NoBlending\r\n        });\r\n        pm.vertexColors = true;\r\n        pm.extensions.fragDepth = this.isImpostor;\r\n        m.clipNear = this.parameters.clipNear;\r\n        wm.clipNear = this.parameters.clipNear;\r\n        pm.clipNear = this.parameters.clipNear;\r\n        this.material = m;\r\n        this.wireframeMaterial = wm;\r\n        this.pickingMaterial = pm;\r\n        // also sets vertexShader/fragmentShader\r\n        this.updateShader();\r\n    }\r\n    makeWireframeGeometry() {\r\n        this.makeWireframeIndex();\r\n        const geometry = this.geometry;\r\n        const wireframeIndex = this.wireframeIndex;\r\n        const wireframeGeometry = new BufferGeometry();\r\n        wireframeGeometry.attributes = geometry.attributes;\r\n        if (wireframeIndex) {\r\n            wireframeGeometry.setIndex(new BufferAttribute(wireframeIndex, 1).setUsage(this.dynamic ? WebGLRenderingContext.DYNAMIC_DRAW : 0));\r\n            wireframeGeometry.setDrawRange(0, this.wireframeIndexCount);\r\n        }\r\n        this.wireframeGeometry = wireframeGeometry;\r\n    }\r\n    makeWireframeIndex() {\r\n        const edges = [];\r\n        function checkEdge(a, b) {\r\n            if (a > b) {\r\n                const tmp = a;\r\n                a = b;\r\n                b = tmp;\r\n            }\r\n            const list = edges[a];\r\n            if (list === undefined) {\r\n                edges[a] = [b];\r\n                return true;\r\n            }\r\n            else if (!list.includes(b)) {\r\n                list.push(b);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        const geometry = this.geometry;\r\n        const index = geometry.index;\r\n        if (!this.parameters.wireframe) {\r\n            this.wireframeIndex = new Uint16Array(0);\r\n            this.wireframeIndexCount = 0;\r\n        }\r\n        else if (index) {\r\n            const array = index.array;\r\n            let n = array.length;\r\n            if (geometry.drawRange.count !== Infinity) {\r\n                n = geometry.drawRange.count;\r\n            }\r\n            let wireframeIndex;\r\n            if (this.wireframeIndex && this.wireframeIndex.length > n * 2) {\r\n                wireframeIndex = this.wireframeIndex;\r\n            }\r\n            else {\r\n                const count = geometry.attributes.position.count; // TODO\r\n                wireframeIndex = getUintArray(n * 2, count);\r\n            }\r\n            let j = 0;\r\n            edges.length = 0;\r\n            for (let i = 0; i < n; i += 3) {\r\n                const a = array[i + 0];\r\n                const b = array[i + 1];\r\n                const c = array[i + 2];\r\n                if (checkEdge(a, b)) {\r\n                    wireframeIndex[j + 0] = a;\r\n                    wireframeIndex[j + 1] = b;\r\n                    j += 2;\r\n                }\r\n                if (checkEdge(b, c)) {\r\n                    wireframeIndex[j + 0] = b;\r\n                    wireframeIndex[j + 1] = c;\r\n                    j += 2;\r\n                }\r\n                if (checkEdge(c, a)) {\r\n                    wireframeIndex[j + 0] = c;\r\n                    wireframeIndex[j + 1] = a;\r\n                    j += 2;\r\n                }\r\n            }\r\n            this.wireframeIndex = wireframeIndex;\r\n            this.wireframeIndexCount = j;\r\n            this.wireframeIndexVersion = this.indexVersion;\r\n        }\r\n        else {\r\n            const n = geometry.attributes.position.count; // TODO\r\n            let wireframeIndex;\r\n            if (this.wireframeIndex && this.wireframeIndex.length > n * 2) {\r\n                wireframeIndex = this.wireframeIndex;\r\n            }\r\n            else {\r\n                wireframeIndex = getUintArray(n * 2, n);\r\n            }\r\n            for (let i = 0, j = 0; i < n; i += 3) {\r\n                wireframeIndex[j + 0] = i;\r\n                wireframeIndex[j + 1] = i + 1;\r\n                wireframeIndex[j + 2] = i + 1;\r\n                wireframeIndex[j + 3] = i + 2;\r\n                wireframeIndex[j + 4] = i + 2;\r\n                wireframeIndex[j + 5] = i;\r\n                j += 6;\r\n            }\r\n            this.wireframeIndex = wireframeIndex;\r\n            this.wireframeIndexCount = n * 2;\r\n            this.wireframeIndexVersion = this.indexVersion;\r\n        }\r\n    }\r\n    updateWireframeIndex() {\r\n        if (!this.wireframeGeometry || !this.wireframeIndex)\r\n            return;\r\n        this.wireframeGeometry.setDrawRange(0, Infinity);\r\n        if (this.wireframeIndexVersion < this.indexVersion)\r\n            this.makeWireframeIndex();\r\n        if (this.wireframeGeometry.index &&\r\n            this.wireframeIndex.length > this.wireframeGeometry.index.array.length) {\r\n            this.wireframeGeometry.setIndex(new BufferAttribute(this.wireframeIndex, 1).setUsage(this.dynamic ? WebGLRenderingContext.DYNAMIC_DRAW : 0));\r\n        }\r\n        else {\r\n            const index = this.wireframeGeometry.getIndex();\r\n            if (!index) {\r\n                Log.error('Index is null');\r\n                return;\r\n            }\r\n            index.set(this.wireframeIndex);\r\n            index.needsUpdate = this.wireframeIndexCount > 0;\r\n            index.updateRange.count = this.wireframeIndexCount;\r\n        }\r\n        this.wireframeGeometry.setDrawRange(0, this.wireframeIndexCount);\r\n    }\r\n    getRenderOrder() {\r\n        let renderOrder = 0;\r\n        if (this.isText) {\r\n            renderOrder = 1;\r\n        }\r\n        else if (this.transparent) {\r\n            if (this.isSurface) {\r\n                renderOrder = 3;\r\n            }\r\n            else {\r\n                renderOrder = 2;\r\n            }\r\n        }\r\n        return renderOrder;\r\n    }\r\n    _getMesh(materialName) {\r\n        if (!this.material)\r\n            this.makeMaterial();\r\n        const g = this.geometry;\r\n        const m = this[materialName];\r\n        let mesh;\r\n        if (this.isLine) {\r\n            mesh = new LineSegments(g, m);\r\n        }\r\n        else if (this.isPoint) {\r\n            mesh = new Points(g, m);\r\n        }\r\n        else {\r\n            mesh = new Mesh(g, m);\r\n        }\r\n        mesh.frustumCulled = false;\r\n        mesh.renderOrder = this.getRenderOrder();\r\n        return mesh;\r\n    }\r\n    getMesh() {\r\n        return this._getMesh('material');\r\n    }\r\n    getWireframeMesh() {\r\n        let mesh;\r\n        if (!this.material)\r\n            this.makeMaterial();\r\n        if (!this.wireframeGeometry)\r\n            this.makeWireframeGeometry();\r\n        mesh = new LineSegments(this.wireframeGeometry, this.wireframeMaterial);\r\n        mesh.frustumCulled = false;\r\n        mesh.renderOrder = this.getRenderOrder();\r\n        return mesh;\r\n    }\r\n    getPickingMesh() {\r\n        return this._getMesh('pickingMaterial');\r\n    }\r\n    getShader(name, type) {\r\n        return getShader(name, this.getDefines(type));\r\n    }\r\n    getVertexShader(type) {\r\n        return this.getShader(this.vertexShader, type);\r\n    }\r\n    getFragmentShader(type) {\r\n        return this.getShader(this.fragmentShader, type);\r\n    }\r\n    getDefines(type) {\r\n        const defines = {};\r\n        if (this.parameters.clipNear) {\r\n            defines.NEAR_CLIP = 1;\r\n        }\r\n        if (this.parameters.clipRadius) {\r\n            defines.RADIUS_CLIP = 1;\r\n        }\r\n        if (type === 'picking') {\r\n            defines.PICKING = 1;\r\n        }\r\n        else {\r\n            if (type === 'background' || this.parameters.background) {\r\n                defines.NOLIGHT = 1;\r\n            }\r\n            if (this.parameters.flatShaded) {\r\n                defines.FLAT_SHADED = 1;\r\n            }\r\n            if (this.parameters.opaqueBack) {\r\n                defines.OPAQUE_BACK = 1;\r\n            }\r\n            if (this.parameters.diffuseInterior) {\r\n                defines.DIFFUSE_INTERIOR = 1;\r\n            }\r\n            if (this.parameters.useInteriorColor) {\r\n                defines.USE_INTERIOR_COLOR = 1;\r\n            }\r\n        }\r\n        return defines;\r\n    }\r\n    getParameters() {\r\n        return this.parameters;\r\n    }\r\n    addUniforms(uniforms) {\r\n        this.uniforms = UniformsUtils.merge([this.uniforms, uniforms]);\r\n        this.pickingUniforms = UniformsUtils.merge([this.pickingUniforms, uniforms]);\r\n    }\r\n    addAttributes(attributes) {\r\n        for (let name in attributes) {\r\n            let buf;\r\n            const a = attributes[name];\r\n            const arraySize = this.attributeSize * itemSize[a.type];\r\n            if (a.value) {\r\n                if (arraySize !== a.value.length) {\r\n                    Log.error('attribute value has wrong length', name);\r\n                }\r\n                buf = a.value;\r\n            }\r\n            else {\r\n                buf = getTypedArray('float32', arraySize);\r\n            }\r\n            this.geometry.setAttribute(name, new BufferAttribute(buf, itemSize[a.type]).setUsage(this.dynamic ? WebGLRenderingContext.DYNAMIC_DRAW : 0));\r\n        }\r\n    }\r\n    updateRenderOrder() {\r\n        const renderOrder = this.getRenderOrder();\r\n        function setRenderOrder(mesh) {\r\n            mesh.renderOrder = renderOrder;\r\n        }\r\n        this.group.children.forEach(setRenderOrder);\r\n        if (this.pickingGroup) {\r\n            this.pickingGroup.children.forEach(setRenderOrder);\r\n        }\r\n    }\r\n    updateShader() {\r\n        const m = this.material;\r\n        const wm = this.wireframeMaterial;\r\n        const pm = this.pickingMaterial;\r\n        m.vertexShader = this.getVertexShader();\r\n        m.fragmentShader = this.getFragmentShader();\r\n        m.needsUpdate = true;\r\n        wm.vertexShader = this.getShader('Line.vert');\r\n        wm.fragmentShader = this.getShader('Line.frag');\r\n        wm.needsUpdate = true;\r\n        pm.vertexShader = this.getVertexShader('picking');\r\n        pm.fragmentShader = this.getFragmentShader('picking');\r\n        pm.needsUpdate = true;\r\n    }\r\n    /**\r\n     * Set buffer parameters\r\n     * @param {BufferParameters} params - buffer parameters object\r\n     * @return {undefined}\r\n     */\r\n    setParameters(params) {\r\n        const p = params;\r\n        const pt = this.parameterTypes;\r\n        const pv = this.parameters;\r\n        const propertyData = {};\r\n        const uniformData = {};\r\n        let doShaderUpdate = false;\r\n        let doVisibilityUpdate = false;\r\n        for (const name in p) {\r\n            const value = p[name];\r\n            if (value === undefined)\r\n                continue;\r\n            pv[name] = value;\r\n            if (pt[name] === undefined)\r\n                continue;\r\n            if (pt[name].property) {\r\n                if (pt[name].property !== true) {\r\n                    propertyData[pt[name].property] = value;\r\n                }\r\n                else {\r\n                    propertyData[name] = value;\r\n                }\r\n            }\r\n            if (pt[name].uniform) {\r\n                if (pt[name].uniform !== true) {\r\n                    uniformData[pt[name].uniform] = value;\r\n                }\r\n                else {\r\n                    uniformData[name] = value;\r\n                }\r\n            }\r\n            if (pt[name].updateShader) {\r\n                doShaderUpdate = true;\r\n            }\r\n            if (pt[name].updateVisibility) {\r\n                doVisibilityUpdate = true;\r\n            }\r\n            if (this.dynamic && name === 'wireframe' && value === true) {\r\n                this.updateWireframeIndex();\r\n            }\r\n            if (name === 'forceTransparent') {\r\n                propertyData.transparent = this.transparent;\r\n            }\r\n            if (name === 'matrix') {\r\n                this.matrix = value;\r\n            }\r\n        }\r\n        this.setProperties(propertyData);\r\n        this.setUniforms(uniformData);\r\n        if (doShaderUpdate)\r\n            this.updateShader();\r\n        if (doVisibilityUpdate)\r\n            this.setVisibility(this.visible);\r\n    }\r\n    /**\r\n     * Sets buffer attributes\r\n     * @param {Object} data - An object where the keys are the attribute names\r\n     *      and the values are the attribute data.\r\n     * @example\r\n     * var buffer = new Buffer();\r\n     * buffer.setAttributes({ attrName: attrData });\r\n     */\r\n    setAttributes(data) {\r\n        const geometry = this.geometry;\r\n        const attributes = geometry.attributes; // TODO\r\n        for (const name in data) {\r\n            if (name === 'picking')\r\n                continue;\r\n            const array = data[name];\r\n            const length = array.length;\r\n            if (name === 'index') {\r\n                const index = geometry.getIndex();\r\n                if (!index) {\r\n                    Log.error('Index is null');\r\n                    continue;\r\n                }\r\n                geometry.setDrawRange(0, Infinity);\r\n                if (length > index.array.length) {\r\n                    geometry.setIndex(new BufferAttribute(array, 1)\r\n                        .setUsage(this.dynamic ? WebGLRenderingContext.DYNAMIC_DRAW : 0));\r\n                }\r\n                else {\r\n                    index.set(array);\r\n                    index.needsUpdate = length > 0;\r\n                    index.updateRange.count = length;\r\n                    geometry.setDrawRange(0, length);\r\n                }\r\n                this.indexVersion++;\r\n                if (this.parameters.wireframe)\r\n                    this.updateWireframeIndex();\r\n            }\r\n            else {\r\n                const attribute = attributes[name];\r\n                if (length > attribute.array.length) {\r\n                    geometry.setAttribute(name, new BufferAttribute(array, attribute.itemSize)\r\n                        .setUsage(this.dynamic ? WebGLRenderingContext.DYNAMIC_DRAW : 0));\r\n                }\r\n                else {\r\n                    attributes[name].set(array);\r\n                    attributes[name].needsUpdate = length > 0;\r\n                    attributes[name].updateRange.count = length;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setUniforms(data) {\r\n        if (!data)\r\n            return;\r\n        const u = this.material.uniforms;\r\n        const wu = this.wireframeMaterial.uniforms;\r\n        const pu = this.pickingMaterial.uniforms;\r\n        for (let name in data) {\r\n            if (name === 'opacity') {\r\n                this.setProperties({ transparent: this.transparent });\r\n            }\r\n            if (u[name] !== undefined) {\r\n                if (u[name].value.isVector3) {\r\n                    u[name].value.copy(data[name]);\r\n                }\r\n                else if (u[name].value.set) {\r\n                    u[name].value.set(data[name]);\r\n                }\r\n                else {\r\n                    u[name].value = data[name];\r\n                }\r\n            }\r\n            if (wu[name] !== undefined) {\r\n                if (wu[name].value.isVector3) {\r\n                    wu[name].value.copy(data[name]);\r\n                }\r\n                else if (wu[name].value.set) {\r\n                    wu[name].value.set(data[name]);\r\n                }\r\n                else {\r\n                    wu[name].value = data[name];\r\n                }\r\n            }\r\n            if (pu[name] !== undefined) {\r\n                if (pu[name].value.isVector3) {\r\n                    pu[name].value.copy(data[name]);\r\n                }\r\n                else if (pu[name].value.set) {\r\n                    pu[name].value.set(data[name]);\r\n                }\r\n                else {\r\n                    pu[name].value = data[name];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setProperties(data) {\r\n        if (!data)\r\n            return;\r\n        const m = this.material;\r\n        const wm = this.wireframeMaterial;\r\n        const pm = this.pickingMaterial;\r\n        for (const _name in data) {\r\n            const name = _name; // TODO\r\n            let value = data[name];\r\n            if (name === 'transparent') {\r\n                this.updateRenderOrder();\r\n            }\r\n            else if (name === 'side') {\r\n                value = getThreeSide(value);\r\n            }\r\n            m[name] = value;\r\n            wm[name] = value;\r\n            pm[name] = value;\r\n        }\r\n        m.needsUpdate = true;\r\n        wm.needsUpdate = true;\r\n        pm.needsUpdate = true;\r\n    }\r\n    /**\r\n     * Set buffer visibility\r\n     * @param {Boolean} value - visibility value\r\n     * @return {undefined}\r\n     */\r\n    setVisibility(value) {\r\n        this.visible = value;\r\n        if (this.parameters.wireframe) {\r\n            this.group.visible = false;\r\n            this.wireframeGroup.visible = value;\r\n            if (this.pickable) {\r\n                this.pickingGroup.visible = false;\r\n            }\r\n        }\r\n        else {\r\n            this.group.visible = value;\r\n            this.wireframeGroup.visible = false;\r\n            if (this.pickable) {\r\n                this.pickingGroup.visible = value;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Free buffer resources\r\n     * @return {undefined}\r\n     */\r\n    dispose() {\r\n        if (this.material)\r\n            this.material.dispose();\r\n        if (this.wireframeMaterial)\r\n            this.wireframeMaterial.dispose();\r\n        if (this.pickingMaterial)\r\n            this.pickingMaterial.dispose();\r\n        this.geometry.dispose();\r\n        if (this.wireframeGeometry)\r\n            this.wireframeGeometry.dispose();\r\n    }\r\n    /**\r\n     * Customize JSON serialization to avoid circular references\r\n     */\r\n    toJSON() {\r\n        var result = {};\r\n        for (var x in this) {\r\n            if (x !== \"group\" && x !== \"wireframeGroup\" && x != \"pickingGroup\"\r\n                && x !== \"picking\") {\r\n                result[x] = this[x];\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexport default Buffer;\r\n//# sourceMappingURL=buffer.js.map","/**\r\n * @file Mesh Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport '../shader/Mesh.vert';\r\nimport '../shader/Mesh.frag';\r\nimport Buffer from './buffer';\r\n/**\r\n * Mesh buffer. Draws a triangle mesh.\r\n *\r\n * @example\r\n * var meshBuffer = new MeshBuffer({\r\n *   position: new Float32Array(\r\n *     [ 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1 ]\r\n *   ),\r\n *   color: new Float32Array(\r\n *     [ 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0 ]\r\n *   )\r\n * });\r\n */\r\nclass MeshBuffer extends Buffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position - positions\r\n     * @param  {Float32Array} data.color - colors\r\n     * @param  {Float32Array} [data.index] - triangle indices\r\n     * @param  {Float32Array} [data.normal] - radii\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super(data, params);\r\n        this.vertexShader = 'Mesh.vert';\r\n        this.fragmentShader = 'Mesh.frag';\r\n        this.addAttributes({\r\n            'normal': { type: 'v3', value: data.normal }\r\n        });\r\n        if (data.normal === undefined) {\r\n            this.geometry.computeVertexNormals();\r\n        }\r\n    }\r\n}\r\nexport default MeshBuffer;\r\n//# sourceMappingURL=mesh-buffer.js.map","/**\r\n * @file Surface Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport MeshBuffer from './mesh-buffer';\r\n/**\r\n * Surface buffer. Like a {@link MeshBuffer}, but with `.isSurface` set to `true`.\r\n */\r\nclass SurfaceBuffer extends MeshBuffer {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.isSurface = true;\r\n    }\r\n}\r\nexport default SurfaceBuffer;\r\n//# sourceMappingURL=surface-buffer.js.map","/**\r\n * @file Double Sided Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3, Matrix4 required for declaration only\r\nimport { Group } from 'three';\r\nimport Buffer from './buffer';\r\nfunction setVisibilityTrue(m) { m.visible = true; }\r\nfunction setVisibilityFalse(m) { m.visible = false; }\r\n/**\r\n * A double-sided mesh buffer. Takes a buffer and renders the front and\r\n * the back as seperate objects to avoid some artifacts when rendering\r\n * transparent meshes. Also allows to render the back of a mesh opaque\r\n * while the front is transparent.\r\n * @implements {Buffer}\r\n *\r\n * @example\r\n * var sphereGeometryBuffer = new SphereGeometryBuffer({\r\n *   position: new Float32Array([ 0, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   radius: new Float32Array([ 1 ])\r\n * });\r\n * var doubleSidedBuffer = new DoubleSidedBuffer(sphereGeometryBuffer);\r\n */\r\nclass DoubleSidedBuffer {\r\n    /**\r\n     * Create a double sided buffer\r\n     * @param  {Buffer} buffer - the buffer to be rendered double-sided\r\n     */\r\n    constructor(buffer) {\r\n        this.group = new Group();\r\n        this.wireframeGroup = new Group();\r\n        this.pickingGroup = new Group();\r\n        this.frontMeshes = [];\r\n        this.backMeshes = [];\r\n        this.size = buffer.size;\r\n        this.side = buffer.parameters.side;\r\n        this.visible = buffer.visible;\r\n        this.geometry = buffer.geometry;\r\n        this.picking = buffer.picking;\r\n        this.group = new Group();\r\n        this.wireframeGroup = new Group();\r\n        this.pickingGroup = new Group();\r\n        // requires Group objects to be present\r\n        this.matrix = buffer.matrix;\r\n        const frontBuffer = buffer;\r\n        const backBuffer = new buffer.constructor({\r\n            position: new Float32Array(0)\r\n        });\r\n        frontBuffer.makeMaterial();\r\n        backBuffer.makeMaterial();\r\n        backBuffer.picking = buffer.picking;\r\n        backBuffer.geometry = buffer.geometry;\r\n        backBuffer.wireframeGeometry = buffer.wireframeGeometry;\r\n        backBuffer.setParameters(buffer.getParameters());\r\n        backBuffer.updateShader();\r\n        frontBuffer.setParameters({\r\n            side: 'front'\r\n        });\r\n        backBuffer.setParameters({\r\n            side: 'back',\r\n            opacity: backBuffer.parameters.opacity\r\n        });\r\n        this.buffer = buffer;\r\n        this.frontBuffer = frontBuffer;\r\n        this.backBuffer = backBuffer;\r\n    }\r\n    set matrix(m) {\r\n        Buffer.prototype.setMatrix.call(this, m);\r\n    }\r\n    get matrix() {\r\n        return this.group.matrix.clone();\r\n    }\r\n    get pickable() {\r\n        return !!this.picking && !this.parameters.disablePicking;\r\n    }\r\n    get parameters() {\r\n        return this.buffer.parameters;\r\n    }\r\n    getParameters() {\r\n        const p = Object.assign({}, this.buffer.parameters);\r\n        p.side = this.side;\r\n        return p;\r\n    }\r\n    getMesh(picking) {\r\n        let front, back;\r\n        if (picking) {\r\n            back = this.backBuffer.getPickingMesh();\r\n            front = this.frontBuffer.getPickingMesh();\r\n        }\r\n        else {\r\n            back = this.backBuffer.getMesh();\r\n            front = this.frontBuffer.getMesh();\r\n        }\r\n        this.frontMeshes.push(front);\r\n        this.backMeshes.push(back);\r\n        this.setParameters({ side: this.side });\r\n        return new Group().add(back, front);\r\n    }\r\n    getWireframeMesh() {\r\n        return this.buffer.getWireframeMesh();\r\n    }\r\n    getPickingMesh() {\r\n        return this.getMesh(true);\r\n    }\r\n    setAttributes(data) {\r\n        this.buffer.setAttributes(data);\r\n    }\r\n    setParameters(data) {\r\n        data = Object.assign({}, data);\r\n        if (data.side === 'front') {\r\n            this.frontMeshes.forEach(setVisibilityTrue);\r\n            this.backMeshes.forEach(setVisibilityFalse);\r\n        }\r\n        else if (data.side === 'back') {\r\n            this.frontMeshes.forEach(setVisibilityFalse);\r\n            this.backMeshes.forEach(setVisibilityTrue);\r\n        }\r\n        else if (data.side === 'double') {\r\n            this.frontMeshes.forEach(setVisibilityTrue);\r\n            this.backMeshes.forEach(setVisibilityTrue);\r\n        }\r\n        if (data.side !== undefined) {\r\n            this.side = data.side;\r\n        }\r\n        delete data.side;\r\n        if (data.matrix !== undefined) {\r\n            this.matrix = data.matrix;\r\n        }\r\n        delete data.matrix;\r\n        this.frontBuffer.setParameters(data);\r\n        if (data.wireframe !== undefined) {\r\n            this.wireframe = data.wireframe;\r\n            this.setVisibility(this.visible);\r\n        }\r\n        delete data.wireframe;\r\n        this.backBuffer.setParameters(data);\r\n    }\r\n    setVisibility(value) {\r\n        this.visible = value;\r\n        if (this.parameters.wireframe) {\r\n            this.group.visible = false;\r\n            this.wireframeGroup.visible = value;\r\n            if (this.pickable) {\r\n                this.pickingGroup.visible = false;\r\n            }\r\n        }\r\n        else {\r\n            this.group.visible = value;\r\n            this.wireframeGroup.visible = false;\r\n            if (this.pickable) {\r\n                this.pickingGroup.visible = value;\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this.frontBuffer.dispose();\r\n        this.backBuffer.dispose();\r\n    }\r\n    /**\r\n     * Customize JSON serialization to avoid circular references.\r\n     * Only export simple params which could be useful.\r\n     */\r\n    toJSON() {\r\n        var result = {};\r\n        for (var x in this) {\r\n            if (['side', 'size', 'visible', 'matrix', 'parameters'].includes(x)) {\r\n                result[x] = this[x];\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexport default DoubleSidedBuffer;\r\n//# sourceMappingURL=doublesided-buffer.js.map","/**\r\n * @file Contour Buffer\r\n * @author Fred ludlow <fred.ludlow@gmail.com>\r\n * @private\r\n */\r\nimport '../shader/Line.vert';\r\nimport '../shader/Line.frag';\r\nimport Buffer from './buffer';\r\n/**\r\n * Contour buffer. A buffer that draws lines (instead of triangle meshes).\r\n */\r\nclass ContourBuffer extends Buffer {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.isLine = true;\r\n        this.vertexShader = 'Line.vert';\r\n        this.fragmentShader = 'Line.frag';\r\n    }\r\n}\r\nexport default ContourBuffer;\r\n//# sourceMappingURL=contour-buffer.js.map","/**\r\n * @file Surface Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4, Vector3, Box3 } from 'three';\r\nimport { defaults } from '../utils';\r\nimport Representation from './representation.js';\r\nimport Volume from '../surface/volume.js';\r\nimport SurfaceBuffer from '../buffer/surface-buffer.js';\r\nimport DoubleSidedBuffer from '../buffer/doublesided-buffer';\r\nimport ContourBuffer from '../buffer/contour-buffer.js';\r\n/**\r\n * Surface representation\r\n */\r\n/**\r\n   * Create Surface representation object\r\n   * @param {Surface|Volume} surface - the surface or volume to be represented\r\n   * @param {Viewer} viewer - a viewer object\r\n   * @param {SurfaceRepresentationParameters} params - surface representation parameters\r\n   */\r\nclass SurfaceRepresentation extends Representation {\r\n    constructor(surface, viewer, params) {\r\n        super(surface, viewer, params);\r\n        this.type = 'surface';\r\n        this.parameters = Object.assign({\r\n            isolevelType: {\r\n                type: 'select',\r\n                options: {\r\n                    'value': 'value', 'sigma': 'sigma'\r\n                }\r\n            },\r\n            isolevel: {\r\n                type: 'number', precision: 2, max: 1000, min: -1000\r\n            },\r\n            negateIsolevel: {\r\n                type: 'boolean'\r\n            },\r\n            isolevelScroll: {\r\n                type: 'boolean'\r\n            },\r\n            smooth: {\r\n                type: 'integer', precision: 1, max: 10, min: 0\r\n            },\r\n            background: {\r\n                type: 'boolean', rebuild: true // FIXME\r\n            },\r\n            opaqueBack: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            boxSize: {\r\n                type: 'integer', precision: 1, max: 100, min: 0\r\n            },\r\n            colorVolume: {\r\n                type: 'hidden'\r\n            },\r\n            contour: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            useWorker: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            wrap: {\r\n                type: 'boolean', rebuild: true\r\n            }\r\n        }, this.parameters);\r\n        if (surface instanceof Volume) {\r\n            this.surface = undefined;\r\n            this.volume = surface;\r\n        }\r\n        else {\r\n            this.surface = surface;\r\n            this.volume = undefined;\r\n        }\r\n        this.boxCenter = new Vector3();\r\n        this.__boxCenter = new Vector3();\r\n        this.box = new Box3();\r\n        this.__box = new Box3();\r\n        this._position = new Vector3();\r\n        this.inverseMatrix = new Matrix4();\r\n        this.setBox = function setBox() {\r\n            this._position.copy(viewer.translationGroup.position).negate();\r\n            this._position.applyMatrix4(this.inverseMatrix);\r\n            if (!this._position.equals(this.boxCenter)) {\r\n                this.setParameters({ 'boxCenter': this._position });\r\n            }\r\n        };\r\n        this.toBePrepared = true;\r\n        this.viewer.signals.ticked.add(this.setBox, this);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'uniform');\r\n        p.colorValue = defaults(p.colorValue, 0xDDDDDD);\r\n        this.isolevelType = defaults(p.isolevelType, 'sigma');\r\n        this.isolevel = defaults(p.isolevel, 2.0);\r\n        this.negateIsolevel = defaults(p.negateIsolevel, false);\r\n        this.isolevelScroll = defaults(p.isolevelScroll, false);\r\n        this.smooth = defaults(p.smooth, 0);\r\n        this.background = defaults(p.background, false);\r\n        this.opaqueBack = defaults(p.opaqueBack, true);\r\n        this.boxSize = defaults(p.boxSize, 0);\r\n        this.colorVolume = defaults(p.colorVolume, undefined);\r\n        this.contour = defaults(p.contour, false);\r\n        this.useWorker = defaults(p.useWorker, true);\r\n        this.wrap = defaults(p.wrap, false);\r\n        super.init(p);\r\n        this.inverseMatrix.getInverse(this.matrix);\r\n        this.build();\r\n    }\r\n    attach(callback) {\r\n        this.bufferList.forEach(buffer => {\r\n            this.viewer.add(buffer);\r\n        });\r\n        this.setVisibility(this.visible);\r\n        callback();\r\n    }\r\n    prepare(callback) {\r\n        if (this.volume) {\r\n            let isolevel;\r\n            if (this.isolevelType === 'sigma') {\r\n                isolevel = this.volume.getValueForSigma(this.isolevel);\r\n            }\r\n            else {\r\n                isolevel = this.isolevel;\r\n            }\r\n            if (this.negateIsolevel)\r\n                isolevel *= -1;\r\n            if (!this.surface ||\r\n                this.__isolevel !== isolevel ||\r\n                this.__smooth !== this.smooth ||\r\n                this.__contour !== this.contour ||\r\n                this.__wrap !== this.wrap ||\r\n                this.__boxSize !== this.boxSize ||\r\n                (this.boxSize > 0 &&\r\n                    !this.__boxCenter.equals(this.boxCenter))) {\r\n                this.__isolevel = isolevel;\r\n                this.__smooth = this.smooth;\r\n                this.__contour = this.contour;\r\n                this.__wrap = this.wrap;\r\n                this.__boxSize = this.boxSize;\r\n                this.__boxCenter.copy(this.boxCenter);\r\n                this.__box.copy(this.box);\r\n                const onSurfaceFinish = (surface) => {\r\n                    this.surface = surface;\r\n                    callback();\r\n                };\r\n                if (this.useWorker) {\r\n                    this.volume.getSurfaceWorker(isolevel, this.smooth, this.boxCenter, this.boxSize, this.contour, this.wrap, onSurfaceFinish);\r\n                }\r\n                else {\r\n                    onSurfaceFinish(this.volume.getSurface(isolevel, this.smooth, this.boxCenter, this.boxSize, this.contour, this.wrap));\r\n                }\r\n            }\r\n            else {\r\n                callback();\r\n            }\r\n        }\r\n        else {\r\n            callback();\r\n        }\r\n    }\r\n    create() {\r\n        const sd = {\r\n            position: this.surface.getPosition(),\r\n            color: this.surface.getColor(this.getColorParams()),\r\n            index: this.surface.getIndex()\r\n        };\r\n        let buffer;\r\n        if (this.contour) {\r\n            buffer = new ContourBuffer(sd, this.getBufferParams({ wireframe: false }));\r\n        }\r\n        else {\r\n            Object.assign(sd, {\r\n                normal: this.surface.getNormal(),\r\n                picking: this.surface.getPicking()\r\n            });\r\n            const surfaceBuffer = new SurfaceBuffer(sd, this.getBufferParams({\r\n                background: this.background,\r\n                opaqueBack: this.opaqueBack,\r\n                dullInterior: false\r\n            }));\r\n            buffer = new DoubleSidedBuffer(surfaceBuffer);\r\n        }\r\n        this.bufferList.push(buffer);\r\n    }\r\n    update(what) {\r\n        if (this.bufferList.length === 0)\r\n            return;\r\n        what = what || {};\r\n        const surfaceData = {};\r\n        if (what.position) {\r\n            surfaceData.position = this.surface.getPosition();\r\n        }\r\n        if (what.color) {\r\n            surfaceData.color = this.surface.getColor(this.getColorParams());\r\n        }\r\n        if (what.index) {\r\n            surfaceData.index = this.surface.getIndex();\r\n        }\r\n        if (what.normal) {\r\n            surfaceData.normal = this.surface.getNormal();\r\n        }\r\n        this.bufferList.forEach(function (buffer) {\r\n            buffer.setAttributes(surfaceData);\r\n        });\r\n    }\r\n    /**\r\n     * Set representation parameters\r\n     * @alias SurfaceRepresentation#setParameters\r\n     * @param {SurfaceRepresentationParameters} params - surface parameter object\r\n     * @param {Object} [what] - buffer data attributes to be updated,\r\n     *                        note that this needs to be implemented in the\r\n     *                        derived classes. Generally it allows more\r\n     *                        fine-grained control over updating than\r\n     *                        forcing a rebuild.\r\n     * @param {Boolean} what.position - update position data\r\n     * @param {Boolean} what.color - update color data\r\n     * @param {Boolean} [rebuild] - whether or not to rebuild the representation\r\n     * @return {SurfaceRepresentation} this object\r\n     */\r\n    setParameters(params, what, rebuild) {\r\n        if (params && params.isolevelType !== undefined &&\r\n            this.volume) {\r\n            if (this.isolevelType === 'value' &&\r\n                params.isolevelType === 'sigma') {\r\n                this.isolevel = this.volume.getSigmaForValue(this.isolevel);\r\n            }\r\n            else if (this.isolevelType === 'sigma' &&\r\n                params.isolevelType === 'value') {\r\n                this.isolevel = this.volume.getValueForSigma(this.isolevel);\r\n            }\r\n            this.isolevelType = params.isolevelType;\r\n        }\r\n        if (params && params.boxCenter) {\r\n            this.boxCenter.copy(params.boxCenter);\r\n            delete params.boxCenter;\r\n        }\r\n        // Forbid wireframe && contour as in molsurface\r\n        if (params && params.wireframe && (params.contour || (params.contour === undefined && this.contour))) {\r\n            params.wireframe = false;\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        if (params.matrix) {\r\n            this.inverseMatrix.getInverse(params.matrix);\r\n        }\r\n        if (this.volume) {\r\n            this.volume.getBox(this.boxCenter, this.boxSize, this.box);\r\n        }\r\n        if (params && params.colorVolume !== undefined) {\r\n            if (what)\r\n                what.color = true;\r\n        }\r\n        if (this.surface && (params.isolevel !== undefined ||\r\n            params.negateIsolevel !== undefined ||\r\n            params.smooth !== undefined ||\r\n            params.wrap !== undefined ||\r\n            params.boxSize !== undefined ||\r\n            (this.boxSize > 0 &&\r\n                !this.__box.equals(this.box)))) {\r\n            this.build({\r\n                'position': true,\r\n                'color': true,\r\n                'index': true,\r\n                'normal': !this.contour\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n    getColorParams() {\r\n        const p = super.getColorParams();\r\n        p.volume = this.colorVolume;\r\n        return p;\r\n    }\r\n    dispose() {\r\n        this.viewer.signals.ticked.remove(this.setBox, this);\r\n        super.dispose();\r\n    }\r\n}\r\nexport default SurfaceRepresentation;\r\n//# sourceMappingURL=surface-representation.js.map","/**\r\n * @file Annotation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector2, Vector3 } from 'three';\r\nimport { defaults } from '../utils';\r\nimport { smoothstep } from '../math/math-utils';\r\n/**\r\n * Annotation HTML element floating on top of a position rendered in 3d\r\n */\r\nexport default class Annotation {\r\n    /**\r\n     * @param {Component} component - the associated component\r\n     * @param {Vector3} position - position in 3d\r\n     * @param {String|Element} content - HTML content\r\n     * @param {Object} [params] - parameters\r\n     * @param {Integer} params.offsetX - 2d offset in x direction\r\n     * @param {Integer} params.offsetY - 2d offset in y direction\r\n     * @param {Boolean} params.visible - visibility flag\r\n     */\r\n    constructor(component, position, content, params = {}) {\r\n        this.component = component;\r\n        this.position = position;\r\n        this.offsetX = defaults(params.offsetX, 0);\r\n        this.offsetY = defaults(params.offsetY, 0);\r\n        this.visible = defaults(params.visible, true);\r\n        this.stage = component.stage;\r\n        this.viewer = component.stage.viewer;\r\n        this._viewerPosition = new Vector3();\r\n        this._updateViewerPosition();\r\n        this._canvasPosition = new Vector2();\r\n        this._cameraPosition = new Vector3();\r\n        this.element = document.createElement('div');\r\n        Object.assign(this.element.style, {\r\n            display: 'block',\r\n            position: 'absolute',\r\n            pointerEvents: 'none',\r\n            whiteSpace: 'nowrap',\r\n            left: '-10000px'\r\n        });\r\n        this.viewer.wrapper.appendChild(this.element);\r\n        this.setContent(content);\r\n        this.updateVisibility();\r\n        this.viewer.signals.rendered.add(this._update, this);\r\n        this.component.signals.matrixChanged.add(this._updateViewerPosition, this);\r\n    }\r\n    /**\r\n     * Set HTML content of the annotation\r\n     * @param {String|Element} value - HTML content\r\n     * @return {undefined}\r\n     */\r\n    setContent(value) {\r\n        const displayValue = this.element.style.display;\r\n        if (displayValue === 'none') {\r\n            this.element.style.left = '-10000px';\r\n            this.element.style.display = 'block';\r\n        }\r\n        if (value instanceof HTMLElement) {\r\n            this.element.appendChild(value);\r\n        }\r\n        else {\r\n            const content = document.createElement('div');\r\n            content.innerText = value;\r\n            Object.assign(content.style, {\r\n                backgroundColor: 'rgba( 0, 0, 0, 0.6 )',\r\n                color: 'lightgrey',\r\n                padding: '8px',\r\n                fontFamily: 'sans-serif',\r\n            });\r\n            this.element.appendChild(content);\r\n        }\r\n        this._clientRect = this.element.getBoundingClientRect();\r\n        if (displayValue === 'none') {\r\n            this.element.style.display = displayValue;\r\n        }\r\n    }\r\n    /**\r\n     * Set visibility of the annotation\r\n     * @param {Boolean} value - visibility flag\r\n     * @return {undefined}\r\n     */\r\n    setVisibility(value) {\r\n        this.visible = value;\r\n        this.updateVisibility();\r\n    }\r\n    getVisibility() {\r\n        return this.visible && this.component.parameters.visible;\r\n    }\r\n    updateVisibility() {\r\n        this.element.style.display = this.getVisibility() ? 'block' : 'none';\r\n    }\r\n    _updateViewerPosition() {\r\n        this._viewerPosition\r\n            .copy(this.position)\r\n            .applyMatrix4(this.component.matrix);\r\n    }\r\n    _update() {\r\n        if (!this.getVisibility())\r\n            return;\r\n        const s = this.element.style;\r\n        const cp = this._canvasPosition;\r\n        const vp = this._viewerPosition;\r\n        const cr = this._clientRect;\r\n        this._cameraPosition.copy(vp)\r\n            .add(this.viewer.translationGroup.position)\r\n            .applyMatrix4(this.viewer.rotationGroup.matrix)\r\n            .sub(this.viewer.camera.position);\r\n        if (this._cameraPosition.z < 0) {\r\n            s.display = 'none';\r\n            return;\r\n        }\r\n        else {\r\n            s.display = 'block';\r\n        }\r\n        const depth = this._cameraPosition.length();\r\n        const fog = this.viewer.scene.fog; // TODO\r\n        s.opacity = (1 - smoothstep(fog.near, fog.far, depth)).toString();\r\n        s.zIndex = (Math.round((fog.far - depth) * 100)).toString();\r\n        this.stage.viewerControls.getPositionOnCanvas(vp, cp);\r\n        s.bottom = (this.offsetX + cp.y + cr.height / 2) + 'px';\r\n        s.left = (this.offsetY + cp.x - cr.width / 2) + 'px';\r\n    }\r\n    /**\r\n     * Safely remove the annotation\r\n     * @return {undefined}\r\n     */\r\n    dispose() {\r\n        this.viewer.wrapper.removeChild(this.element);\r\n        this.viewer.signals.ticked.remove(this._update, this);\r\n        this.component.signals.matrixChanged.remove(this._updateViewerPosition, this);\r\n    }\r\n}\r\n//# sourceMappingURL=annotation.js.map","/**\r\n * @file Component Controls\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Matrix4, Quaternion } from 'three';\r\nimport * as signalsWrapper from 'signals';\r\nimport { ensureVector3 } from '../utils';\r\nconst tmpRotateMatrix = new Matrix4();\r\nconst tmpRotateVector = new Vector3();\r\nconst tmpRotateQuaternion = new Quaternion();\r\n/**\r\n * Component controls\r\n */\r\nclass ComponentControls {\r\n    /**\r\n     * @param  {Component} component - the component object\r\n     */\r\n    constructor(component) {\r\n        this.component = component;\r\n        this.signals = {\r\n            changed: new signalsWrapper.Signal()\r\n        };\r\n        this.stage = component.stage;\r\n        this.viewer = component.stage.viewer;\r\n    }\r\n    /**\r\n     * component center position\r\n     * @type {Vector3}\r\n     */\r\n    get position() {\r\n        return this.component.position;\r\n    }\r\n    /**\r\n     * component rotation\r\n     * @type {Quaternion}\r\n     */\r\n    get rotation() {\r\n        return this.component.quaternion;\r\n    }\r\n    /**\r\n     * Trigger render and emit changed event\r\n     * @emits {ComponentControls.signals.changed}\r\n     * @return {undefined}\r\n     */\r\n    changed() {\r\n        this.component.updateMatrix();\r\n        this.viewer.requestRender();\r\n        this.signals.changed.dispatch();\r\n    }\r\n    /**\r\n     * spin component on axis\r\n     * @param  {Vector3|Array} axis - rotation axis\r\n     * @param  {Number} angle - amount to spin\r\n     * @return {undefined}\r\n     */\r\n    spin(axis, angle) {\r\n        tmpRotateMatrix.getInverse(this.viewer.rotationGroup.matrix);\r\n        tmpRotateVector\r\n            .copy(ensureVector3(axis)).applyMatrix4(tmpRotateMatrix);\r\n        tmpRotateMatrix.extractRotation(this.component.transform);\r\n        tmpRotateMatrix.premultiply(this.viewer.rotationGroup.matrix);\r\n        tmpRotateMatrix.getInverse(tmpRotateMatrix);\r\n        tmpRotateVector.copy(ensureVector3(axis));\r\n        tmpRotateVector.applyMatrix4(tmpRotateMatrix);\r\n        tmpRotateMatrix.makeRotationAxis(tmpRotateVector, angle);\r\n        tmpRotateQuaternion.setFromRotationMatrix(tmpRotateMatrix);\r\n        this.component.quaternion.premultiply(tmpRotateQuaternion);\r\n        this.changed();\r\n    }\r\n}\r\nexport default ComponentControls;\r\n//# sourceMappingURL=component-controls.js.map","/**\r\n * @file Radius Factory\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport { NucleicBackboneAtoms } from '../structure/structure-constants';\r\nexport const RadiusFactoryTypes = {\r\n    '': '',\r\n    'vdw': 'by vdW radius',\r\n    'covalent': 'by covalent radius',\r\n    'sstruc': 'by secondary structure',\r\n    'bfactor': 'by bfactor',\r\n    'size': 'size',\r\n    'data': 'data',\r\n    'explicit': 'explicit'\r\n};\r\nclass RadiusFactory {\r\n    constructor(params = {}) {\r\n        this.max = 10;\r\n        this.type = defaults(params.type, 'size');\r\n        this.scale = defaults(params.scale, 1);\r\n        this.size = defaults(params.size, 1);\r\n        this.data = defaults(params.data, {});\r\n    }\r\n    atomRadius(a) {\r\n        let r;\r\n        switch (this.type) {\r\n            case 'vdw':\r\n                r = a.vdw;\r\n                break;\r\n            case 'covalent':\r\n                r = a.covalent;\r\n                break;\r\n            case 'bfactor':\r\n                r = a.bfactor || 1.0;\r\n                break;\r\n            case 'sstruc':\r\n                const sstruc = a.sstruc;\r\n                if (sstruc === 'h') {\r\n                    r = 0.25;\r\n                }\r\n                else if (sstruc === 'g') {\r\n                    r = 0.25;\r\n                }\r\n                else if (sstruc === 'i') {\r\n                    r = 0.25;\r\n                }\r\n                else if (sstruc === 'e') {\r\n                    r = 0.25;\r\n                }\r\n                else if (sstruc === 'b') {\r\n                    r = 0.25;\r\n                }\r\n                else if (NucleicBackboneAtoms.includes(a.atomname)) {\r\n                    r = 0.4;\r\n                }\r\n                else {\r\n                    r = 0.1;\r\n                }\r\n                break;\r\n            case 'data':\r\n                r = defaults(this.data[a.index], 1.0);\r\n                break;\r\n            case 'explicit':\r\n                // defaults is inappropriate as AtomProxy.radius returns\r\n                // null for missing radii\r\n                r = a.radius;\r\n                if (r === null)\r\n                    r = this.size;\r\n                break;\r\n            default:\r\n                r = this.size;\r\n                break;\r\n        }\r\n        return Math.min(r * this.scale, this.max);\r\n    }\r\n}\r\nRadiusFactory.types = RadiusFactoryTypes;\r\nexport default RadiusFactory;\r\n//# sourceMappingURL=radius-factory.js.map","/**\r\n * @file Principal Axes\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Matrix4, Quaternion } from 'three';\r\nimport { Matrix, meanRows, subRows, transpose, multiplyABt, svd } from './matrix-utils.js';\r\nimport { projectPointOnVector } from './vector-utils';\r\nconst negateVector = new Vector3(-1, -1, -1);\r\nconst tmpMatrix = new Matrix4();\r\n/**\r\n * Principal axes\r\n */\r\nclass PrincipalAxes {\r\n    /**\r\n     * @param  {Matrix} points - 3 by N matrix\r\n     */\r\n    constructor(points) {\r\n        // console.time( \"PrincipalAxes\" );\r\n        const n = points.rows;\r\n        const n3 = n / 3;\r\n        const pointsT = new Matrix(n, 3);\r\n        const A = new Matrix(3, 3);\r\n        const W = new Matrix(1, 3);\r\n        const U = new Matrix(3, 3);\r\n        const V = new Matrix(3, 3);\r\n        // calculate\r\n        const mean = meanRows(points);\r\n        subRows(points, mean);\r\n        transpose(pointsT, points);\r\n        multiplyABt(A, pointsT, pointsT);\r\n        svd(A, W, U, V);\r\n        // console.log( points, pointsT, mean )\r\n        // console.log( n, A, W, U, V );\r\n        // center\r\n        const vm = new Vector3(mean[0], mean[1], mean[2]);\r\n        // normalized\r\n        const van = new Vector3(U.data[0], U.data[3], U.data[6]);\r\n        const vbn = new Vector3(U.data[1], U.data[4], U.data[7]);\r\n        const vcn = new Vector3(U.data[2], U.data[5], U.data[8]);\r\n        // scaled\r\n        const va = van.clone().multiplyScalar(Math.sqrt(W.data[0] / n3));\r\n        const vb = vbn.clone().multiplyScalar(Math.sqrt(W.data[1] / n3));\r\n        const vc = vcn.clone().multiplyScalar(Math.sqrt(W.data[2] / n3));\r\n        // points\r\n        this.begA = vm.clone().sub(va);\r\n        this.endA = vm.clone().add(va);\r\n        this.begB = vm.clone().sub(vb);\r\n        this.endB = vm.clone().add(vb);\r\n        this.begC = vm.clone().sub(vc);\r\n        this.endC = vm.clone().add(vc);\r\n        //\r\n        this.center = vm;\r\n        this.vecA = va;\r\n        this.vecB = vb;\r\n        this.vecC = vc;\r\n        this.normVecA = van;\r\n        this.normVecB = vbn;\r\n        this.normVecC = vcn;\r\n        // console.timeEnd( \"PrincipalAxes\" );\r\n    }\r\n    /**\r\n     * Get the basis matrix descriping the axes\r\n     * @param  {Matrix4} [optionalTarget] - target object\r\n     * @return {Matrix4} the basis\r\n     */\r\n    getBasisMatrix(optionalTarget = new Matrix4()) {\r\n        const basis = optionalTarget;\r\n        basis.makeBasis(this.normVecB, this.normVecA, this.normVecC);\r\n        if (basis.determinant() < 0) {\r\n            basis.scale(negateVector);\r\n        }\r\n        return basis;\r\n    }\r\n    /**\r\n     * Get a quaternion descriping the axes rotation\r\n     * @param  {Quaternion} [optionalTarget] - target object\r\n     * @return {Quaternion} the rotation\r\n     */\r\n    getRotationQuaternion(optionalTarget = new Quaternion()) {\r\n        const q = optionalTarget;\r\n        q.setFromRotationMatrix(this.getBasisMatrix(tmpMatrix));\r\n        return q.inverse();\r\n    }\r\n    /**\r\n     * Get the scale/length for each dimension for a box around the axes\r\n     * to enclose the atoms of a structure\r\n     * @param  {Structure|StructureView} structure - the structure\r\n     * @return {{d1a: Number, d2a: Number, d3a: Number, d1b: Number, d2b: Number, d3b: Number}} scale\r\n     */\r\n    getProjectedScaleForAtoms(structure) {\r\n        let d1a = -Infinity;\r\n        let d1b = -Infinity;\r\n        let d2a = -Infinity;\r\n        let d2b = -Infinity;\r\n        let d3a = -Infinity;\r\n        let d3b = -Infinity;\r\n        const p = new Vector3();\r\n        const t = new Vector3();\r\n        const center = this.center;\r\n        const ax1 = this.normVecA;\r\n        const ax2 = this.normVecB;\r\n        const ax3 = this.normVecC;\r\n        structure.eachAtom(function (ap) {\r\n            projectPointOnVector(p.copy(ap), ax1, center); // TODO\r\n            const dp1 = t.subVectors(p, center).normalize().dot(ax1);\r\n            const dt1 = p.distanceTo(center);\r\n            if (dp1 > 0) {\r\n                if (dt1 > d1a)\r\n                    d1a = dt1;\r\n            }\r\n            else {\r\n                if (dt1 > d1b)\r\n                    d1b = dt1;\r\n            }\r\n            projectPointOnVector(p.copy(ap), ax2, center);\r\n            const dp2 = t.subVectors(p, center).normalize().dot(ax2);\r\n            const dt2 = p.distanceTo(center);\r\n            if (dp2 > 0) {\r\n                if (dt2 > d2a)\r\n                    d2a = dt2;\r\n            }\r\n            else {\r\n                if (dt2 > d2b)\r\n                    d2b = dt2;\r\n            }\r\n            projectPointOnVector(p.copy(ap), ax3, center);\r\n            const dp3 = t.subVectors(p, center).normalize().dot(ax3);\r\n            const dt3 = p.distanceTo(center);\r\n            if (dp3 > 0) {\r\n                if (dt3 > d3a)\r\n                    d3a = dt3;\r\n            }\r\n            else {\r\n                if (dt3 > d3b)\r\n                    d3b = dt3;\r\n            }\r\n        });\r\n        return {\r\n            d1a: d1a,\r\n            d2a: d2a,\r\n            d3a: d3a,\r\n            d1b: -d1b,\r\n            d2b: -d2b,\r\n            d3b: -d3b\r\n        };\r\n    }\r\n}\r\nexport default PrincipalAxes;\r\n//# sourceMappingURL=principal-axes.js.map","/**\r\n * @file Filtered Volume\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport Volume from './volume.js';\r\nclass FilteredVolume {\r\n    constructor(volume, minValue, maxValue, outside) {\r\n        this.volume = volume;\r\n        this.setFilter(minValue, maxValue, outside);\r\n    }\r\n    get header() { return this.volume.header; }\r\n    get matrix() { return this.volume.matrix; }\r\n    get normalMatrix() { return this.volume.normalMatrix; }\r\n    get inverseMatrix() { return this.volume.inverseMatrix; }\r\n    get center() { return this.volume.center; }\r\n    get boundingBox() { return this.volume.boundingBox; }\r\n    get min() { return this.volume.min; }\r\n    get max() { return this.volume.max; }\r\n    get mean() { return this.volume.mean; }\r\n    get rms() { return this.volume.rms; }\r\n    _getFilterHash(minValue, maxValue, outside) {\r\n        return JSON.stringify([minValue, maxValue, outside]);\r\n    }\r\n    setFilter(minValue, maxValue, outside) {\r\n        if (isNaN(minValue) && this.header) {\r\n            minValue = this.header.DMEAN + 2.0 * this.header.ARMS;\r\n        }\r\n        minValue = (minValue !== undefined && !isNaN(minValue)) ? minValue : -Infinity;\r\n        maxValue = defaults(maxValue, Infinity);\r\n        outside = defaults(outside, false);\r\n        const data = this.volume.data;\r\n        const position = this.volume.position;\r\n        const atomindex = this.volume.atomindex;\r\n        const filterHash = this._getFilterHash(minValue, maxValue, outside);\r\n        if (filterHash === this._filterHash) {\r\n            // already filtered\r\n            return;\r\n        }\r\n        else if (minValue === -Infinity && maxValue === Infinity) {\r\n            this.data = data;\r\n            this.position = position;\r\n            this.atomindex = atomindex;\r\n        }\r\n        else {\r\n            const n = data.length;\r\n            if (!this._dataBuffer) {\r\n                // ArrayBuffer for re-use as Float32Array backend\r\n                this._dataBuffer = new ArrayBuffer(n * 4);\r\n                this._positionBuffer = new ArrayBuffer(n * 3 * 4);\r\n                if (atomindex)\r\n                    this._atomindexBuffer = new ArrayBuffer(n * 4);\r\n            }\r\n            const filteredData = new Float32Array(this._dataBuffer);\r\n            const filteredPosition = new Float32Array(this._positionBuffer);\r\n            let filteredAtomindex;\r\n            if (atomindex)\r\n                filteredAtomindex = new Uint32Array(this._atomindexBuffer);\r\n            let j = 0;\r\n            for (let i = 0; i < n; ++i) {\r\n                const i3 = i * 3;\r\n                const v = data[i];\r\n                if ((!outside && v >= minValue && v <= maxValue) ||\r\n                    (outside && (v < minValue || v > maxValue))) {\r\n                    const j3 = j * 3;\r\n                    filteredData[j] = v;\r\n                    filteredPosition[j3 + 0] = position[i3 + 0];\r\n                    filteredPosition[j3 + 1] = position[i3 + 1];\r\n                    filteredPosition[j3 + 2] = position[i3 + 2];\r\n                    if (atomindex && filteredAtomindex)\r\n                        filteredAtomindex[j] = atomindex[i];\r\n                    j += 1;\r\n                }\r\n            }\r\n            // set views\r\n            this.data = new Float32Array(this._dataBuffer, 0, j);\r\n            this.position = new Float32Array(this._positionBuffer, 0, j * 3);\r\n            if (atomindex)\r\n                this.atomindex = new Int32Array(this._atomindexBuffer, 0, j);\r\n        }\r\n        this._filterHash = filterHash;\r\n    }\r\n}\r\nFilteredVolume.prototype.getValueForSigma = Volume.prototype.getValueForSigma;\r\nFilteredVolume.prototype.getSigmaForValue = Volume.prototype.getSigmaForValue;\r\nFilteredVolume.prototype.getDataAtomindex = Volume.prototype.getDataAtomindex;\r\nFilteredVolume.prototype.getDataPosition = Volume.prototype.getDataPosition;\r\nFilteredVolume.prototype.getDataColor = Volume.prototype.getDataColor;\r\nFilteredVolume.prototype.getDataPicking = Volume.prototype.getDataPicking;\r\nFilteredVolume.prototype.getDataSize = Volume.prototype.getDataSize;\r\nexport default FilteredVolume;\r\n//# sourceMappingURL=filtered-volume.js.map","/**\r\n * @file Bond Hash\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { createAdjacencyList } from '../utils/adjacency-list';\r\nclass BondHash {\r\n    constructor(bondStore, atomCount) {\r\n        const al = createAdjacencyList({\r\n            nodeArray1: bondStore.atomIndex1,\r\n            nodeArray2: bondStore.atomIndex2,\r\n            edgeCount: bondStore.count,\r\n            nodeCount: atomCount\r\n        });\r\n        this.countArray = al.countArray;\r\n        this.offsetArray = al.offsetArray;\r\n        this.indexArray = al.indexArray;\r\n    }\r\n}\r\nexport default BondHash;\r\n//# sourceMappingURL=bond-hash.js.map","/**\r\n * @file Bond Store\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Store from './store';\r\n/**\r\n * Bond store\r\n */\r\nexport default class BondStore extends Store {\r\n    get _defaultFields() {\r\n        return [\r\n            ['atomIndex1', 1, 'int32'],\r\n            ['atomIndex2', 1, 'int32'],\r\n            ['bondOrder', 1, 'int8']\r\n        ];\r\n    }\r\n    addBond(atom1, atom2, bondOrder) {\r\n        this.growIfFull();\r\n        const i = this.count;\r\n        const ai1 = atom1.index;\r\n        const ai2 = atom2.index;\r\n        if (ai1 < ai2) {\r\n            this.atomIndex1[i] = ai1;\r\n            this.atomIndex2[i] = ai2;\r\n        }\r\n        else {\r\n            this.atomIndex2[i] = ai1;\r\n            this.atomIndex1[i] = ai2;\r\n        }\r\n        if (bondOrder)\r\n            this.bondOrder[i] = bondOrder;\r\n        this.count += 1;\r\n    }\r\n    addBondIfConnected(atom1, atom2, bondOrder) {\r\n        if (atom1.connectedTo(atom2)) {\r\n            this.addBond(atom1, atom2, bondOrder);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n//# sourceMappingURL=bond-store.js.map","/**\r\n * @file Atom Store\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Store from './store';\r\n/**\r\n * Atom store\r\n */\r\nexport default class AtomStore extends Store {\r\n    get _defaultFields() {\r\n        return [\r\n            ['residueIndex', 1, 'uint32'],\r\n            ['atomTypeId', 1, 'uint16'],\r\n            ['x', 1, 'float32'],\r\n            ['y', 1, 'float32'],\r\n            ['z', 1, 'float32'],\r\n            ['serial', 1, 'int32'],\r\n            ['bfactor', 1, 'float32'],\r\n            ['altloc', 1, 'uint8'],\r\n            ['occupancy', 1, 'float32']\r\n        ];\r\n    }\r\n    setAltloc(i, str) {\r\n        this.altloc[i] = str.charCodeAt(0);\r\n    }\r\n    getAltloc(i) {\r\n        const code = this.altloc[i];\r\n        return code ? String.fromCharCode(code) : '';\r\n    }\r\n}\r\n//# sourceMappingURL=atom-store.js.map","/**\r\n * @file Residue Store\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Store from './store.js';\r\n/**\r\n * Residue store\r\n */\r\nexport default class ResidueStore extends Store {\r\n    get _defaultFields() {\r\n        return [\r\n            ['chainIndex', 1, 'uint32'],\r\n            ['atomOffset', 1, 'uint32'],\r\n            ['atomCount', 1, 'uint16'],\r\n            ['residueTypeId', 1, 'uint16'],\r\n            ['resno', 1, 'int32'],\r\n            ['sstruc', 1, 'uint8'],\r\n            ['inscode', 1, 'uint8']\r\n        ];\r\n    }\r\n    setSstruc(i, str) {\r\n        this.sstruc[i] = str.charCodeAt(0);\r\n    }\r\n    getSstruc(i) {\r\n        const code = this.sstruc[i];\r\n        return code ? String.fromCharCode(code) : '';\r\n    }\r\n    setInscode(i, str) {\r\n        this.inscode[i] = str.charCodeAt(0);\r\n    }\r\n    getInscode(i) {\r\n        const code = this.inscode[i];\r\n        return code ? String.fromCharCode(code) : '';\r\n    }\r\n}\r\n//# sourceMappingURL=residue-store.js.map","/**\r\n * @file Chain Store\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Store from './store';\r\n/**\r\n * Chain store\r\n */\r\nexport default class ChainStore extends Store {\r\n    get _defaultFields() {\r\n        return [\r\n            ['entityIndex', 1, 'uint16'],\r\n            ['modelIndex', 1, 'uint16'],\r\n            ['residueOffset', 1, 'uint32'],\r\n            ['residueCount', 1, 'uint32'],\r\n            ['chainname', 4, 'uint8'],\r\n            ['chainid', 4, 'uint8']\r\n        ];\r\n    }\r\n    setChainname(i, str) {\r\n        const j = 4 * i;\r\n        this.chainname[j] = str.charCodeAt(0);\r\n        this.chainname[j + 1] = str.charCodeAt(1);\r\n        this.chainname[j + 2] = str.charCodeAt(2);\r\n        this.chainname[j + 3] = str.charCodeAt(3);\r\n    }\r\n    getChainname(i) {\r\n        let chainname = '';\r\n        for (let k = 0; k < 4; ++k) {\r\n            const code = this.chainname[4 * i + k];\r\n            if (code) {\r\n                chainname += String.fromCharCode(code);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        return chainname;\r\n    }\r\n    setChainid(i, str) {\r\n        const j = 4 * i;\r\n        this.chainid[j] = str.charCodeAt(0);\r\n        this.chainid[j + 1] = str.charCodeAt(1);\r\n        this.chainid[j + 2] = str.charCodeAt(2);\r\n        this.chainid[j + 3] = str.charCodeAt(3);\r\n    }\r\n    getChainid(i) {\r\n        let chainid = '';\r\n        for (let k = 0; k < 4; ++k) {\r\n            const code = this.chainid[4 * i + k];\r\n            if (code) {\r\n                chainid += String.fromCharCode(code);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        return chainid;\r\n    }\r\n}\r\n//# sourceMappingURL=chain-store.js.map","/**\r\n * @file Model Store\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Store from './store.js';\r\n/**\r\n * Model store\r\n */\r\nexport default class ModelStore extends Store {\r\n    get _defaultFields() {\r\n        return [\r\n            ['chainOffset', 1, 'uint32'],\r\n            ['chainCount', 1, 'uint32']\r\n        ];\r\n    }\r\n}\r\n//# sourceMappingURL=model-store.js.map","/**\r\n * @file Helixorient\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { ColormakerRegistry } from '../globals';\r\nimport { AtomPicker } from '../utils/picker';\r\nimport RadiusFactory from '../utils/radius-factory';\r\nimport { copyArray } from '../math/array-utils';\r\nimport { projectPointOnVector } from '../math/vector-utils';\r\nclass Helixorient {\r\n    constructor(polymer) {\r\n        this.polymer = polymer;\r\n        this.size = polymer.residueCount;\r\n    }\r\n    getCenterIterator(smooth = 0) {\r\n        const center = this.getPosition().center;\r\n        const size = center.length / 3;\r\n        let i = 0;\r\n        let j = -1;\r\n        const cache = [\r\n            new Vector3(),\r\n            new Vector3(),\r\n            new Vector3(),\r\n            new Vector3()\r\n        ];\r\n        function next() {\r\n            const vector = this.get(j);\r\n            j += 1;\r\n            return vector;\r\n        }\r\n        function get(idx) {\r\n            idx = Math.min(size - 1, Math.max(0, idx));\r\n            const v = cache[i % 4];\r\n            const idx3 = 3 * idx;\r\n            v.fromArray(center, idx3); // TODO\r\n            if (smooth) {\r\n                const w = Math.min(smooth, idx, size - idx - 1);\r\n                for (let k = 1; k <= w; ++k) {\r\n                    const l = k * 3;\r\n                    const t = (w + 1 - k) / (w + 1);\r\n                    v.x += t * center[idx3 - l + 0] + t * center[idx3 + l + 0];\r\n                    v.y += t * center[idx3 - l + 1] + t * center[idx3 + l + 1];\r\n                    v.z += t * center[idx3 - l + 2] + t * center[idx3 + l + 2];\r\n                }\r\n                v.x /= w + 1;\r\n                v.y /= w + 1;\r\n                v.z /= w + 1;\r\n            }\r\n            i += 1;\r\n            return v;\r\n        }\r\n        function reset() {\r\n            i = 0;\r\n            j = -1;\r\n        }\r\n        return { size, next, get, reset };\r\n    }\r\n    getColor(params) {\r\n        const polymer = this.polymer;\r\n        const structure = polymer.structure;\r\n        const n = polymer.residueCount;\r\n        const residueIndexStart = polymer.residueIndexStart;\r\n        const col = new Float32Array(n * 3);\r\n        const p = params || {};\r\n        p.structure = structure;\r\n        const colormaker = ColormakerRegistry.getScheme(p);\r\n        const rp = structure.getResidueProxy();\r\n        const ap = structure.getAtomProxy();\r\n        for (let i = 0; i < n; ++i) {\r\n            rp.index = residueIndexStart + i;\r\n            ap.index = rp.traceAtomIndex;\r\n            colormaker.atomColorToArray(ap, col, i * 3);\r\n        }\r\n        return {\r\n            'color': col\r\n        };\r\n    }\r\n    getPicking() {\r\n        const polymer = this.polymer;\r\n        const structure = polymer.structure;\r\n        const n = polymer.residueCount;\r\n        const residueIndexStart = polymer.residueIndexStart;\r\n        const pick = new Float32Array(n);\r\n        const rp = structure.getResidueProxy();\r\n        for (let i = 0; i < n; ++i) {\r\n            rp.index = residueIndexStart + i;\r\n            pick[i] = rp.traceAtomIndex;\r\n        }\r\n        return {\r\n            'picking': new AtomPicker(pick, structure)\r\n        };\r\n    }\r\n    getSize(params) {\r\n        const polymer = this.polymer;\r\n        const structure = polymer.structure;\r\n        const n = polymer.residueCount;\r\n        const residueIndexStart = polymer.residueIndexStart;\r\n        const size = new Float32Array(n);\r\n        const radiusFactory = new RadiusFactory(params);\r\n        const rp = structure.getResidueProxy();\r\n        const ap = structure.getAtomProxy();\r\n        for (let i = 0; i < n; ++i) {\r\n            rp.index = residueIndexStart + i;\r\n            ap.index = rp.traceAtomIndex;\r\n            size[i] = radiusFactory.atomRadius(ap);\r\n        }\r\n        return { size };\r\n    }\r\n    getPosition() {\r\n        const polymer = this.polymer;\r\n        const structure = polymer.structure;\r\n        const n = polymer.residueCount;\r\n        const n3 = n - 3;\r\n        const center = new Float32Array(3 * n);\r\n        const axis = new Float32Array(3 * n);\r\n        const diff = new Float32Array(n);\r\n        const radius = new Float32Array(n);\r\n        const rise = new Float32Array(n);\r\n        const twist = new Float32Array(n);\r\n        const resdir = new Float32Array(3 * n);\r\n        const r12 = new Vector3();\r\n        const r23 = new Vector3();\r\n        const r34 = new Vector3();\r\n        const diff13 = new Vector3();\r\n        const diff24 = new Vector3();\r\n        const v1 = new Vector3();\r\n        const v2 = new Vector3();\r\n        const vt = new Vector3();\r\n        const _axis = new Vector3();\r\n        const _prevAxis = new Vector3();\r\n        const _resdir = new Vector3();\r\n        const _center = new Vector3(0, 0, 0);\r\n        const type = 'trace';\r\n        const a1 = structure.getAtomProxy();\r\n        const a2 = structure.getAtomProxy(polymer.getAtomIndexByType(0, type));\r\n        const a3 = structure.getAtomProxy(polymer.getAtomIndexByType(1, type));\r\n        const a4 = structure.getAtomProxy(polymer.getAtomIndexByType(2, type));\r\n        for (let i = 0; i < n3; ++i) {\r\n            a1.index = a2.index;\r\n            a2.index = a3.index;\r\n            a3.index = a4.index;\r\n            a4.index = polymer.getAtomIndexByType(i + 3, type); // TODO\r\n            const j = 3 * i;\r\n            // ported from GROMACS src/tools/gmx_helixorient.c\r\n            r12.subVectors(a2, a1); // TODO\r\n            r23.subVectors(a3, a2); // TODO\r\n            r34.subVectors(a4, a3); // TODO\r\n            diff13.subVectors(r12, r23);\r\n            diff24.subVectors(r23, r34);\r\n            _axis.crossVectors(diff13, diff24).normalize();\r\n            _axis.toArray(axis, j); // TODO\r\n            if (i > 0) {\r\n                diff[i] = _axis.angleTo(_prevAxis);\r\n            }\r\n            const tmp = Math.cos(diff13.angleTo(diff24));\r\n            twist[i] = 180.0 / Math.PI * Math.acos(tmp);\r\n            const diff13Length = diff13.length();\r\n            const diff24Length = diff24.length();\r\n            radius[i] = (Math.sqrt(diff24Length * diff13Length) /\r\n                // clamp, to avoid instabilities for when\r\n                // angle between diff13 and diff24 is near 0\r\n                Math.max(2.0, 2.0 * (1.0 - tmp)));\r\n            rise[i] = Math.abs(r23.dot(_axis));\r\n            //\r\n            v1.copy(diff13).multiplyScalar(radius[i] / diff13Length);\r\n            v2.copy(diff24).multiplyScalar(radius[i] / diff24Length);\r\n            v1.subVectors(a2, v1); // TODO\r\n            v2.subVectors(a3, v2); // TODO\r\n            v1.toArray(center, j + 3); // TODO\r\n            v2.toArray(center, j + 6); // TODO\r\n            //\r\n            _resdir.subVectors(a1, _center); // TODO\r\n            _resdir.toArray(resdir, j); // TODO\r\n            _prevAxis.copy(_axis);\r\n            _center.copy(v1);\r\n        }\r\n        //\r\n        // calc axis as dir of second and third center pos\r\n        // project first traceAtom onto axis to get first center pos\r\n        v1.fromArray(center, 3); // TODO\r\n        v2.fromArray(center, 6); // TODO\r\n        _axis.subVectors(v1, v2).normalize();\r\n        // _center.copy( res[ 0 ].getTraceAtom() );\r\n        a1.index = polymer.getAtomIndexByType(0, type); // TODO\r\n        _center.copy(a1); // TODO\r\n        vt.copy(a1); // TODO\r\n        projectPointOnVector(vt, _axis, v1);\r\n        vt.toArray(center, 0); // TODO\r\n        // calc first resdir\r\n        _resdir.subVectors(_center, v1);\r\n        _resdir.toArray(resdir, 0); // TODO\r\n        // calc axis as dir of n-1 and n-2 center pos\r\n        // project last traceAtom onto axis to get last center pos\r\n        v1.fromArray(center, 3 * n - 6); // TODO\r\n        v2.fromArray(center, 3 * n - 9); // TODO\r\n        _axis.subVectors(v1, v2).normalize();\r\n        // _center.copy( res[ n - 1 ].getTraceAtom() );\r\n        a1.index = polymer.getAtomIndexByType(n - 1, type); // TODO\r\n        _center.copy(a1); // TODO\r\n        vt.copy(a1); // TODO\r\n        projectPointOnVector(vt, _axis, v1);\r\n        vt.toArray(center, 3 * n - 3); // TODO\r\n        // calc last three resdir\r\n        for (let i = n - 3; i < n; ++i) {\r\n            v1.fromArray(center, 3 * i); // TODO\r\n            // _center.copy( res[ i ].getTraceAtom() );\r\n            a1.index = polymer.getAtomIndexByType(i, type); // TODO\r\n            _center.copy(a1); // TODO\r\n            _resdir.subVectors(_center, v1);\r\n            _resdir.toArray(resdir, 3 * i); // TODO\r\n        }\r\n        // average measures to define them on the residues\r\n        const resRadius = new Float32Array(n);\r\n        const resTwist = new Float32Array(n);\r\n        const resRise = new Float32Array(n);\r\n        const resBending = new Float32Array(n);\r\n        resRadius[1] = radius[0];\r\n        resTwist[1] = twist[0];\r\n        resRise[1] = radius[0];\r\n        for (let i = 2; i < n - 2; ++i) {\r\n            resRadius[i] = 0.5 * (radius[i - 2] + radius[i - 1]);\r\n            resTwist[i] = 0.5 * (twist[i - 2] + twist[i - 1]);\r\n            resRise[i] = 0.5 * (rise[i - 2] + rise[i - 1]);\r\n            v1.fromArray(axis, 3 * (i - 2)); // TODO\r\n            v2.fromArray(axis, 3 * (i - 1)); // TODO\r\n            resBending[i] = 180.0 / Math.PI * Math.acos(Math.cos(v1.angleTo(v2)));\r\n        }\r\n        resRadius[n - 2] = radius[n - 4];\r\n        resTwist[n - 2] = twist[n - 4];\r\n        resRise[n - 2] = rise[n - 4];\r\n        // average helix axes to define them on the residues\r\n        const resAxis = new Float32Array(3 * n);\r\n        copyArray(axis, resAxis, 0, 0, 3);\r\n        copyArray(axis, resAxis, 0, 3, 3);\r\n        for (let i = 2; i < n - 2; ++i) {\r\n            v1.fromArray(axis, 3 * (i - 2)); // TODO\r\n            v2.fromArray(axis, 3 * (i - 1)); // TODO\r\n            _axis.addVectors(v2, v1).multiplyScalar(0.5).normalize();\r\n            _axis.toArray(resAxis, 3 * i); // TODO\r\n        }\r\n        copyArray(axis, resAxis, 3 * n - 12, 3 * n - 6, 3);\r\n        copyArray(axis, resAxis, 3 * n - 12, 3 * n - 3, 3);\r\n        return {\r\n            center,\r\n            axis: resAxis,\r\n            bending: resBending,\r\n            radius: resRadius,\r\n            rise: resRise,\r\n            twist: resTwist,\r\n            resdir: resdir\r\n        };\r\n    }\r\n}\r\nexport default Helixorient;\r\n//# sourceMappingURL=helixorient.js.map","/**\r\n * @file Helixbundle\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { ColormakerRegistry } from '../globals';\r\nimport { AtomPicker } from '../utils/picker.js';\r\nimport RadiusFactory from '../utils/radius-factory.js';\r\nimport Helixorient from './helixorient.js';\r\nimport { calculateMeanVector3, projectPointOnVector } from '../math/vector-utils.js';\r\nclass Helixbundle {\r\n    constructor(polymer) {\r\n        this.polymer = polymer;\r\n        this.helixorient = new Helixorient(polymer);\r\n        this.position = this.helixorient.getPosition();\r\n    }\r\n    getAxis(localAngle, centerDist, ssBorder, colorParams, radiusParams) {\r\n        localAngle = localAngle || 30;\r\n        centerDist = centerDist || 2.5;\r\n        ssBorder = ssBorder === undefined ? false : ssBorder;\r\n        const polymer = this.polymer;\r\n        const structure = polymer.structure;\r\n        const n = polymer.residueCount;\r\n        const residueIndexStart = polymer.residueIndexStart;\r\n        const pos = this.position;\r\n        const cp = colorParams || {};\r\n        cp.structure = structure;\r\n        const colormaker = ColormakerRegistry.getScheme(cp);\r\n        const radiusFactory = new RadiusFactory(radiusParams);\r\n        let j = 0;\r\n        let k = 0;\r\n        const axis = [];\r\n        const center = [];\r\n        const beg = [];\r\n        const end = [];\r\n        const col = [];\r\n        const pick = [];\r\n        const size = [];\r\n        const residueOffset = [];\r\n        const residueCount = [];\r\n        let tmpAxis = new Float32Array(n * 3);\r\n        let tmpCenter = new Float32Array(n * 3);\r\n        let _axis, _center;\r\n        const _beg = new Vector3();\r\n        const _end = new Vector3();\r\n        const rp1 = structure.getResidueProxy();\r\n        const rp2 = structure.getResidueProxy();\r\n        const ap = structure.getAtomProxy();\r\n        const c1 = new Vector3();\r\n        const c2 = new Vector3();\r\n        let split = false;\r\n        for (let i = 0; i < n; ++i) {\r\n            rp1.index = residueIndexStart + i;\r\n            c1.fromArray(pos.center, i * 3);\r\n            if (i === n - 1) {\r\n                split = true;\r\n            }\r\n            else {\r\n                rp2.index = residueIndexStart + i + 1;\r\n                c2.fromArray(pos.center, i * 3 + 3);\r\n                if (ssBorder && rp1.sstruc !== rp2.sstruc) {\r\n                    split = true;\r\n                }\r\n                else if (c1.distanceTo(c2) > centerDist) {\r\n                    split = true;\r\n                }\r\n                else if (pos.bending[i] > localAngle) {\r\n                    split = true;\r\n                }\r\n            }\r\n            if (split) {\r\n                if (i - j < 4) {\r\n                    j = i;\r\n                    split = false;\r\n                    continue;\r\n                }\r\n                ap.index = rp1.traceAtomIndex;\r\n                // ignore first and last axis\r\n                tmpAxis = pos.axis.subarray(j * 3 + 3, i * 3);\r\n                tmpCenter = pos.center.subarray(j * 3, i * 3 + 3);\r\n                _axis = calculateMeanVector3(tmpAxis).normalize();\r\n                _center = calculateMeanVector3(tmpCenter);\r\n                _beg.fromArray(tmpCenter);\r\n                projectPointOnVector(_beg, _axis, _center);\r\n                _end.fromArray(tmpCenter, tmpCenter.length - 3);\r\n                projectPointOnVector(_end, _axis, _center);\r\n                _axis.subVectors(_end, _beg);\r\n                _axis.toArray(axis, k);\r\n                _center.toArray(center, k);\r\n                _beg.toArray(beg, k);\r\n                _end.toArray(end, k);\r\n                colormaker.atomColorToArray(ap, col, k);\r\n                pick.push(ap.index);\r\n                size.push(radiusFactory.atomRadius(ap));\r\n                residueOffset.push(residueIndexStart + j);\r\n                residueCount.push(residueIndexStart + i + 1 - j);\r\n                k += 3;\r\n                j = i;\r\n                split = false;\r\n            }\r\n        }\r\n        const picking = new Float32Array(pick);\r\n        return {\r\n            axis: new Float32Array(axis),\r\n            center: new Float32Array(center),\r\n            begin: new Float32Array(beg),\r\n            end: new Float32Array(end),\r\n            color: new Float32Array(col),\r\n            picking: new AtomPicker(picking, structure),\r\n            size: new Float32Array(size),\r\n            residueOffset: residueOffset,\r\n            residueCount: residueCount\r\n        };\r\n    }\r\n}\r\nexport default Helixbundle;\r\n//# sourceMappingURL=helixbundle.js.map","/**\r\n * @file Binary Heap\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n/**\r\n * Binary heap implementation\r\n * @class\r\n * @author http://eloquentjavascript.net/appendix2.htm\r\n * @param {Function} scoreFunction - the heap scoring function\r\n */\r\nclass BinaryHeap {\r\n    constructor(scoreFunction) {\r\n        this.scoreFunction = scoreFunction;\r\n        this.content = [];\r\n        this.scoreFunction = scoreFunction;\r\n    }\r\n    push(element) {\r\n        // Add the new element to the end of the array.\r\n        this.content.push(element);\r\n        // Allow it to bubble up.\r\n        this.bubbleUp(this.content.length - 1);\r\n    }\r\n    pop() {\r\n        // Store the first element so we can return it later.\r\n        const result = this.content[0];\r\n        // Get the element at the end of the array.\r\n        const end = this.content.pop();\r\n        // If there are any elements left, put the end element at the\r\n        // start, and let it sink down.\r\n        if (end && this.content.length > 0) {\r\n            this.content[0] = end;\r\n            this.sinkDown(0);\r\n        }\r\n        return result;\r\n    }\r\n    peek() {\r\n        return this.content[0];\r\n    }\r\n    remove(element) {\r\n        const len = this.content.length;\r\n        // To remove a value, we must search through the array to find it.\r\n        for (let i = 0; i < len; i++) {\r\n            if (this.content[i] === element) {\r\n                // When it is found, the process seen in 'pop' is repeated\r\n                // to fill up the hole.\r\n                const end = this.content.pop();\r\n                if (end && i !== len - 1) {\r\n                    this.content[i] = end;\r\n                    if (this.scoreFunction(end) < this.scoreFunction(element)) {\r\n                        this.bubbleUp(i);\r\n                    }\r\n                    else {\r\n                        this.sinkDown(i);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        throw new Error('Node not found.');\r\n    }\r\n    size() {\r\n        return this.content.length;\r\n    }\r\n    bubbleUp(n) {\r\n        // Fetch the element that has to be moved.\r\n        const element = this.content[n];\r\n        // When at 0, an element can not go up any further.\r\n        while (n > 0) {\r\n            // Compute the parent element's index, and fetch it.\r\n            const parentN = Math.floor((n + 1) / 2) - 1;\r\n            const parent = this.content[parentN];\r\n            // Swap the elements if the parent is greater.\r\n            if (this.scoreFunction(element) < this.scoreFunction(parent)) {\r\n                this.content[parentN] = element;\r\n                this.content[n] = parent;\r\n                // Update 'n' to continue at the new position.\r\n                n = parentN;\r\n            }\r\n            else {\r\n                // Found a parent that is less, no need to move it further.\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    sinkDown(n) {\r\n        // Look up the target element and its score.\r\n        const length = this.content.length;\r\n        const element = this.content[n];\r\n        const elemScore = this.scoreFunction(element);\r\n        let child1Score = 0;\r\n        let child2Score = 0;\r\n        while (true) {\r\n            // Compute the indices of the child elements.\r\n            const child2N = (n + 1) * 2;\r\n            const child1N = child2N - 1;\r\n            // This is used to store the new position of the element, if any.\r\n            let swap = null;\r\n            // If the first child exists (is inside the array)...\r\n            if (child1N < length) {\r\n                // Look it up and compute its score.\r\n                const child1 = this.content[child1N];\r\n                child1Score = this.scoreFunction(child1);\r\n                // If the score is less than our element's, we need to swap.\r\n                if (child1Score < elemScore)\r\n                    swap = child1N;\r\n            }\r\n            // Do the same checks for the other child.\r\n            if (child2N < length) {\r\n                const child2 = this.content[child2N];\r\n                child2Score = this.scoreFunction(child2);\r\n                if (child2Score < (swap === null ? elemScore : child1Score))\r\n                    swap = child2N;\r\n            }\r\n            // If the element needs to be moved, swap it, and continue.\r\n            if (swap !== null) {\r\n                this.content[n] = this.content[swap];\r\n                this.content[swap] = element;\r\n                n = swap;\r\n            }\r\n            else {\r\n                // Otherwise, we are done.\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default BinaryHeap;\r\n//# sourceMappingURL=binary-heap.js.map","/**\r\n * @file Kdtree\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport BinaryHeap from './binary-heap';\r\n/**\r\n * Kdtree\r\n * @class\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>, 2016\r\n * @author Roman Bolzern <roman.bolzern@fhnw.ch>, 2013\r\n * @author I4DS http://www.fhnw.ch/i4ds, 2013\r\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\r\n * @description\r\n * k-d Tree for typed arrays of 3d points (e.g. for Float32Array), in-place\r\n * provides fast nearest neighbour search\r\n *\r\n * Based on https://github.com/ubilabs/kd-tree-javascript by Ubilabs\r\n *\r\n * Further information (including mathematical properties)\r\n * http://en.wikipedia.org/wiki/Binary_tree\r\n * http://en.wikipedia.org/wiki/K-d_tree\r\n *\r\n * @example\r\n * points: [x, y, z, x, y, z, x, y, z, ...]\r\n * metric: function(a, b){\r\n *    return Math.pow(a[0]-b[0], 2) + Math.pow(a[1]-b[1], 2) + Math.pow(a[2]-b[2], 2);\r\n * }\r\n *\r\n * @param {Float32Array} points - points\r\n * @param {Function} metric - metric\r\n */\r\nclass Kdtree {\r\n    constructor(points, metric) {\r\n        this.points = points;\r\n        this.metric = metric;\r\n        this.maxDepth = 0;\r\n        this.currentNode = 0;\r\n        const n = points.length / 3;\r\n        const indices = new Uint32Array(n);\r\n        for (let i = 0; i < n; ++i) {\r\n            indices[i] = i;\r\n        }\r\n        this.indices = indices;\r\n        this.nodes = new Int32Array(n * 4);\r\n        this.rootIndex = this.buildTree(0, -1, 0, n);\r\n    }\r\n    buildTree(depth, parent, arrBegin, arrEnd) {\r\n        if (depth > this.maxDepth)\r\n            this.maxDepth = depth;\r\n        const plength = arrEnd - arrBegin;\r\n        if (plength === 0) {\r\n            return -1;\r\n        }\r\n        const nodeIndex = this.currentNode * 4;\r\n        const nodes = this.nodes;\r\n        this.currentNode += 1;\r\n        if (plength === 1) {\r\n            nodes[nodeIndex] = arrBegin;\r\n            nodes[nodeIndex + 1] = -1;\r\n            nodes[nodeIndex + 2] = -1;\r\n            nodes[nodeIndex + 3] = parent;\r\n            return nodeIndex;\r\n        }\r\n        // if(plength <= 32){\r\n        //   return nodeIndex;\r\n        // }\r\n        const indices = this.indices;\r\n        const points = this.points;\r\n        const arrMedian = arrBegin + Math.floor(plength / 2);\r\n        const currentDim = depth % 3;\r\n        // inlined quickselect function\r\n        let j, tmp, pivotIndex, pivotValue, storeIndex;\r\n        let left = arrBegin;\r\n        let right = arrEnd - 1;\r\n        while (right > left) {\r\n            pivotIndex = (left + right) >> 1;\r\n            pivotValue = points[indices[pivotIndex] * 3 + currentDim];\r\n            // swap( pivotIndex, right );\r\n            tmp = indices[pivotIndex];\r\n            indices[pivotIndex] = indices[right];\r\n            indices[right] = tmp;\r\n            storeIndex = left;\r\n            for (j = left; j < right; ++j) {\r\n                if (points[indices[j] * 3 + currentDim] < pivotValue) {\r\n                    // swap( storeIndex, j );\r\n                    tmp = indices[storeIndex];\r\n                    indices[storeIndex] = indices[j];\r\n                    indices[j] = tmp;\r\n                    ++storeIndex;\r\n                }\r\n            }\r\n            // swap( right, storeIndex );\r\n            tmp = indices[right];\r\n            indices[right] = indices[storeIndex];\r\n            indices[storeIndex] = tmp;\r\n            pivotIndex = storeIndex;\r\n            if (arrMedian === pivotIndex) {\r\n                break;\r\n            }\r\n            else if (arrMedian < pivotIndex) {\r\n                right = pivotIndex - 1;\r\n            }\r\n            else {\r\n                left = pivotIndex + 1;\r\n            }\r\n        }\r\n        nodes[nodeIndex] = arrMedian;\r\n        nodes[nodeIndex + 1] = this.buildTree(depth + 1, nodeIndex, arrBegin, arrMedian);\r\n        nodes[nodeIndex + 2] = this.buildTree(depth + 1, nodeIndex, arrMedian + 1, arrEnd);\r\n        nodes[nodeIndex + 3] = parent;\r\n        return nodeIndex;\r\n    }\r\n    getNodeDepth(nodeIndex) {\r\n        const parentIndex = this.nodes[nodeIndex + 3];\r\n        return (parentIndex === -1) ? 0 : this.getNodeDepth(parentIndex) + 1;\r\n    }\r\n    // TODO\r\n    // function getNodePos (node) {}\r\n    /**\r\n     * find nearest points\r\n     * @param {Array} point - array of size 3\r\n     * @param {Integer} maxNodes - max amount of nodes to return\r\n     * @param {Float} maxDistance - maximum distance of point to result nodes\r\n     * @return {Array} array of point, distance pairs\r\n     */\r\n    nearest(point, maxNodes, maxDistance) {\r\n        const bestNodes = new BinaryHeap(e => -e[1]);\r\n        const nodes = this.nodes;\r\n        const points = this.points;\r\n        const indices = this.indices;\r\n        const nearestSearch = (nodeIndex) => {\r\n            let bestChild, otherChild;\r\n            const dimension = this.getNodeDepth(nodeIndex) % 3;\r\n            const pointIndex = indices[nodes[nodeIndex]] * 3;\r\n            const ownPoint = [\r\n                points[pointIndex + 0],\r\n                points[pointIndex + 1],\r\n                points[pointIndex + 2]\r\n            ];\r\n            const ownDistance = this.metric(point, ownPoint);\r\n            function saveNode(nodeIndex, distance) {\r\n                bestNodes.push([nodeIndex, distance]);\r\n                if (bestNodes.size() > maxNodes) {\r\n                    bestNodes.pop();\r\n                }\r\n            }\r\n            const leftIndex = nodes[nodeIndex + 1];\r\n            const rightIndex = nodes[nodeIndex + 2];\r\n            // if it's a leaf\r\n            if (rightIndex === -1 && leftIndex === -1) {\r\n                if ((bestNodes.size() < maxNodes || ownDistance < bestNodes.peek()[1]) &&\r\n                    ownDistance <= maxDistance) {\r\n                    saveNode(nodeIndex, ownDistance);\r\n                }\r\n                return;\r\n            }\r\n            if (rightIndex === -1) {\r\n                bestChild = leftIndex;\r\n            }\r\n            else if (leftIndex === -1) {\r\n                bestChild = rightIndex;\r\n            }\r\n            else {\r\n                if (point[dimension] <= points[pointIndex + dimension]) {\r\n                    bestChild = leftIndex;\r\n                }\r\n                else {\r\n                    bestChild = rightIndex;\r\n                }\r\n            }\r\n            // recursive search\r\n            nearestSearch(bestChild);\r\n            if ((bestNodes.size() < maxNodes || ownDistance < bestNodes.peek()[1]) &&\r\n                ownDistance <= maxDistance) {\r\n                saveNode(nodeIndex, ownDistance);\r\n            }\r\n            // if there's still room or the current distance is nearer than the best distance\r\n            const linearPoint = [];\r\n            for (let i = 0; i < 3; i += 1) {\r\n                if (i === dimension) {\r\n                    linearPoint[i] = point[i];\r\n                }\r\n                else {\r\n                    linearPoint[i] = points[pointIndex + i];\r\n                }\r\n            }\r\n            const linearDistance = this.metric(linearPoint, ownPoint);\r\n            if ((bestNodes.size() < maxNodes || Math.abs(linearDistance) < bestNodes.peek()[1]) &&\r\n                Math.abs(linearDistance) <= maxDistance) {\r\n                if (bestChild === leftIndex) {\r\n                    otherChild = rightIndex;\r\n                }\r\n                else {\r\n                    otherChild = leftIndex;\r\n                }\r\n                if (otherChild !== -1) {\r\n                    nearestSearch(otherChild);\r\n                }\r\n            }\r\n        };\r\n        nearestSearch(this.rootIndex);\r\n        const result = [];\r\n        for (let i = 0, il = Math.min(bestNodes.size(), maxNodes); i < il; i += 1) {\r\n            result.push(bestNodes.content[i]);\r\n        }\r\n        return result;\r\n    }\r\n    verify(nodeIndex, depth = 0) {\r\n        let count = 1;\r\n        if (nodeIndex === undefined) {\r\n            nodeIndex = this.rootIndex;\r\n        }\r\n        if (nodeIndex === -1) {\r\n            throw new Error('node is null');\r\n        }\r\n        const dim = depth % 3;\r\n        const nodes = this.nodes;\r\n        const points = this.points;\r\n        const indices = this.indices;\r\n        const leftIndex = nodes[nodeIndex + 1];\r\n        const rightIndex = nodes[nodeIndex + 2];\r\n        if (leftIndex !== -1) {\r\n            if (points[indices[nodes[leftIndex]] * 3 + dim] >\r\n                points[indices[nodes[nodeIndex]] * 3 + dim]) {\r\n                throw new Error('left child is > parent!');\r\n            }\r\n            count += this.verify(leftIndex, depth + 1);\r\n        }\r\n        if (rightIndex !== -1) {\r\n            if (points[indices[nodes[rightIndex]] * 3 + dim] <\r\n                points[indices[nodes[nodeIndex]] * 3 + dim]) {\r\n                throw new Error('right child is < parent!');\r\n            }\r\n            count += this.verify(rightIndex, depth + 1);\r\n        }\r\n        return count;\r\n    }\r\n}\r\nexport default Kdtree;\r\n//# sourceMappingURL=kdtree.js.map","/**\r\n * @file Atom Proxy\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { SecStrucHelix, SecStrucSheet, SecStrucTurn, ProteinType, RnaType, DnaType, WaterType, IonType, SaccharideType, CgProteinBackboneType, CgRnaBackboneType, CgDnaBackboneType } from '../structure/structure-constants';\r\n/**\r\n * Atom proxy\r\n */\r\nclass AtomProxy {\r\n    /**\r\n     * @param {Structure} structure - the structure\r\n     * @param {Integer} index - the index\r\n     */\r\n    constructor(structure, index = 0) {\r\n        this.structure = structure;\r\n        this.index = index;\r\n        this.chainStore = structure.chainStore;\r\n        this.residueStore = structure.residueStore;\r\n        this.atomStore = structure.atomStore;\r\n        this.residueMap = structure.residueMap;\r\n        this.atomMap = structure.atomMap;\r\n    }\r\n    /**\r\n     * @type {BondHash}\r\n     */\r\n    get bondHash() { return this.structure.bondHash; }\r\n    /**\r\n     * Molecular enity\r\n     * @type {Entity}\r\n     */\r\n    get entity() {\r\n        return this.structure.entityList[this.entityIndex];\r\n    }\r\n    get entityIndex() {\r\n        return this.chainStore.entityIndex[this.chainIndex];\r\n    }\r\n    get modelIndex() {\r\n        return this.chainStore.modelIndex[this.chainIndex];\r\n    }\r\n    get chainIndex() {\r\n        return this.residueStore.chainIndex[this.residueIndex];\r\n    }\r\n    /**\r\n     * @type {ResidueProxy}\r\n     */\r\n    get residue() {\r\n        console.warn('residue - might be expensive');\r\n        return this.structure.getResidueProxy(this.residueIndex);\r\n    }\r\n    get residueIndex() {\r\n        return this.atomStore.residueIndex[this.index];\r\n    }\r\n    set residueIndex(value) {\r\n        this.atomStore.residueIndex[this.index] = value;\r\n    }\r\n    //\r\n    /**\r\n     * Secondary structure code\r\n     * @type {String}\r\n     */\r\n    get sstruc() {\r\n        return this.residueStore.getSstruc(this.residueIndex);\r\n    }\r\n    /**\r\n     * Insertion code\r\n     * @type {String}\r\n     */\r\n    get inscode() {\r\n        return this.residueStore.getInscode(this.residueIndex);\r\n    }\r\n    /**\r\n     * Residue number/label\r\n     * @type {Integer}\r\n     */\r\n    get resno() {\r\n        return this.residueStore.resno[this.residueIndex];\r\n    }\r\n    /**\r\n     * Chain name\r\n     * @type {String}\r\n     */\r\n    get chainname() {\r\n        return this.chainStore.getChainname(this.chainIndex);\r\n    }\r\n    /**\r\n     * Chain id\r\n     * @type {String}\r\n     */\r\n    get chainid() {\r\n        return this.chainStore.getChainid(this.chainIndex);\r\n    }\r\n    //\r\n    /**\r\n     * @type {ResidueType}\r\n     */\r\n    get residueType() {\r\n        return this.residueMap.get(this.residueStore.residueTypeId[this.residueIndex]);\r\n    }\r\n    /**\r\n     * @type {AtomType}\r\n     */\r\n    get atomType() {\r\n        return this.atomMap.get(this.atomStore.atomTypeId[this.index]);\r\n    }\r\n    get residueAtomOffset() {\r\n        return this.residueStore.atomOffset[this.residueIndex];\r\n    }\r\n    //\r\n    /**\r\n     * Residue name\r\n     */\r\n    get resname() {\r\n        return this.residueType.resname;\r\n    }\r\n    /**\r\n     * Hetero flag\r\n     */\r\n    get hetero() {\r\n        return this.residueType.hetero;\r\n    }\r\n    //\r\n    /**\r\n     * Atom name\r\n     */\r\n    get atomname() {\r\n        return this.atomType.atomname;\r\n    }\r\n    /**\r\n     * Atomic number\r\n     */\r\n    get number() {\r\n        return this.atomType.number;\r\n    }\r\n    /**\r\n     * Element\r\n     */\r\n    get element() {\r\n        return this.atomType.element;\r\n    }\r\n    /**\r\n     * Van-der-Waals radius\r\n     */\r\n    get vdw() {\r\n        return this.atomType.vdw;\r\n    }\r\n    /**\r\n     * Covalent radius\r\n     */\r\n    get covalent() {\r\n        return this.atomType.covalent;\r\n    }\r\n    //\r\n    /**\r\n     * X coordinate\r\n     */\r\n    get x() {\r\n        return this.atomStore.x[this.index];\r\n    }\r\n    set x(value) {\r\n        this.atomStore.x[this.index] = value;\r\n    }\r\n    /**\r\n     * Y coordinate\r\n     */\r\n    get y() {\r\n        return this.atomStore.y[this.index];\r\n    }\r\n    set y(value) {\r\n        this.atomStore.y[this.index] = value;\r\n    }\r\n    /**\r\n     * Z coordinate\r\n     */\r\n    get z() {\r\n        return this.atomStore.z[this.index];\r\n    }\r\n    set z(value) {\r\n        this.atomStore.z[this.index] = value;\r\n    }\r\n    /**\r\n     * Serial number\r\n     */\r\n    get serial() {\r\n        return this.atomStore.serial[this.index];\r\n    }\r\n    set serial(value) {\r\n        this.atomStore.serial[this.index] = value;\r\n    }\r\n    /**\r\n     * B-factor value\r\n     */\r\n    get bfactor() {\r\n        return this.atomStore.bfactor[this.index];\r\n    }\r\n    set bfactor(value) {\r\n        this.atomStore.bfactor[this.index] = value;\r\n    }\r\n    /**\r\n     * Occupancy value\r\n     */\r\n    get occupancy() {\r\n        return this.atomStore.occupancy[this.index];\r\n    }\r\n    set occupancy(value) {\r\n        this.atomStore.occupancy[this.index] = value;\r\n    }\r\n    /**\r\n     * Alternate location identifier\r\n     */\r\n    get altloc() {\r\n        return this.atomStore.getAltloc(this.index);\r\n    }\r\n    set altloc(value) {\r\n        this.atomStore.setAltloc(this.index, value);\r\n    }\r\n    /**\r\n     * Partial charge\r\n     */\r\n    get partialCharge() {\r\n        return this.atomStore.partialCharge ? this.atomStore.partialCharge[this.index] : null;\r\n    }\r\n    set partialCharge(value) {\r\n        if (this.atomStore.partialCharge) {\r\n            this.atomStore.partialCharge[this.index] = value;\r\n        }\r\n    }\r\n    /**\r\n     * Explicit radius\r\n     */\r\n    get radius() {\r\n        return this.atomStore.radius ? this.atomStore.radius[this.index] : null;\r\n    }\r\n    set radius(value) {\r\n        if (this.atomStore.radius) {\r\n            this.atomStore.radius[this.index] = value;\r\n        }\r\n    }\r\n    /**\r\n     * Formal charge\r\n     */\r\n    get formalCharge() {\r\n        return this.atomStore.formalCharge ? this.atomStore.formalCharge[this.index] : null;\r\n    }\r\n    set formalCharge(value) {\r\n        if (this.atomStore.formalCharge) {\r\n            this.atomStore.formalCharge[this.index] = value;\r\n        }\r\n    }\r\n    /**\r\n     * Aromaticity flag\r\n     */\r\n    get aromatic() {\r\n        if (this.atomStore.aromatic) {\r\n            return this.atomStore.aromatic[this.index];\r\n        }\r\n        else {\r\n            return this.residueType.isAromatic(this) ? 1 : 0;\r\n        }\r\n    }\r\n    set aromatic(value) {\r\n        if (this.atomStore.aromatic) {\r\n            this.atomStore.aromatic[this.index] = value;\r\n        }\r\n    }\r\n    //\r\n    get bondCount() {\r\n        return this.bondHash.countArray[this.index]; // TODO\r\n    }\r\n    //\r\n    /**\r\n     * Iterate over each bond\r\n     * @param  {function(bond: BondProxy)} callback - iterator callback function\r\n     * @param  {BondProxy} [bp] - optional target bond proxy for use in the callback\r\n     * @return {undefined}\r\n     */\r\n    eachBond(callback, bp) {\r\n        bp = bp || this.structure._bp;\r\n        const idx = this.index;\r\n        const bondHash = this.bondHash; // TODO\r\n        const indexArray = bondHash.indexArray;\r\n        const n = bondHash.countArray[idx];\r\n        const offset = bondHash.offsetArray[idx];\r\n        for (let i = 0; i < n; ++i) {\r\n            bp.index = indexArray[offset + i];\r\n            callback(bp);\r\n        }\r\n    }\r\n    /**\r\n     * Iterate over each bonded atom\r\n     * @param  {function(atom: AtomProxy)} callback - iterator callback function\r\n     * @param  {AtomProxy} [ap] - optional target atom proxy for use in the callback\r\n     * @return {undefined}\r\n     */\r\n    eachBondedAtom(callback, _ap) {\r\n        const ap = _ap ? _ap : this.structure._ap;\r\n        const idx = this.index;\r\n        this.eachBond(function (bp) {\r\n            ap.index = idx !== bp.atomIndex1 ? bp.atomIndex1 : bp.atomIndex2;\r\n            callback(ap);\r\n        });\r\n        this.index = idx;\r\n    }\r\n    /**\r\n     * Check if this atom is bonded to the given atom,\r\n     * assumes both atoms are from the same structure\r\n     * @param  {AtomProxy} ap - the given atom\r\n     * @return {Boolean} whether a bond exists or not\r\n     */\r\n    hasBondTo(ap) {\r\n        let flag = false;\r\n        this.eachBondedAtom(function (bap) {\r\n            if (ap.index === bap.index)\r\n                flag = true;\r\n        });\r\n        return flag;\r\n    }\r\n    bondToElementCount(element) {\r\n        let count = 0;\r\n        const idx = this.index; // Avoid reentrancy problems\r\n        this.eachBondedAtom(function (bap) {\r\n            if (bap.number === element)\r\n                count += 1;\r\n        });\r\n        this.index = idx;\r\n        return count;\r\n    }\r\n    hasBondToElement(element) {\r\n        return this.bondToElementCount(element) > 0;\r\n    }\r\n    //\r\n    /**\r\n     * If atom is part of a backbone\r\n     * @return {Boolean} flag\r\n     */\r\n    isBackbone() {\r\n        const backboneIndexList = this.residueType.backboneIndexList;\r\n        if (backboneIndexList.length > 0) {\r\n            return backboneIndexList.includes(this.index - this.residueAtomOffset);\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * If atom is part of a polymer\r\n     * @return {Boolean} flag\r\n     */\r\n    isPolymer() {\r\n        if (this.structure.entityList.length > 0) {\r\n            return this.entity.isPolymer();\r\n        }\r\n        else {\r\n            const moleculeType = this.residueType.moleculeType;\r\n            return (moleculeType === ProteinType ||\r\n                moleculeType === RnaType ||\r\n                moleculeType === DnaType);\r\n        }\r\n    }\r\n    /**\r\n     * If atom is part of a sidechin\r\n     * @return {Boolean} flag\r\n     */\r\n    isSidechain() {\r\n        return this.isPolymer() && !this.isBackbone();\r\n    }\r\n    /**\r\n     * If atom is part of a coarse-grain group\r\n     * @return {Boolean} flag\r\n     */\r\n    isCg() {\r\n        const backboneType = this.residueType.backboneType;\r\n        return (backboneType === CgProteinBackboneType ||\r\n            backboneType === CgRnaBackboneType ||\r\n            backboneType === CgDnaBackboneType);\r\n    }\r\n    isTrace() {\r\n        return this.index === (this.residueType.traceAtomIndex + this.residueAtomOffset);\r\n    }\r\n    /**\r\n     * If atom is part of a hetero group\r\n     * @return {Boolean} flag\r\n     */\r\n    isHetero() {\r\n        return this.residueType.hetero === 1;\r\n    }\r\n    /**\r\n     * If atom is part of a protein molecule\r\n     * @return {Boolean} flag\r\n     */\r\n    isProtein() {\r\n        return this.residueType.moleculeType === ProteinType;\r\n    }\r\n    /**\r\n     * If atom is part of a nucleic molecule\r\n     * @return {Boolean} flag\r\n     */\r\n    isNucleic() {\r\n        const moleculeType = this.residueType.moleculeType;\r\n        return moleculeType === RnaType || moleculeType === DnaType;\r\n    }\r\n    /**\r\n     * If atom is part of a rna\r\n     * @return {Boolean} flag\r\n     */\r\n    isRna() {\r\n        return this.residueType.moleculeType === RnaType;\r\n    }\r\n    /**\r\n     * If atom is part of a dna\r\n     * @return {Boolean} flag\r\n     */\r\n    isDna() {\r\n        return this.residueType.moleculeType === DnaType;\r\n    }\r\n    /**\r\n     * If atom is part of a water molecule\r\n     * @return {Boolean} flag\r\n     */\r\n    isWater() {\r\n        return this.residueType.moleculeType === WaterType;\r\n    }\r\n    /**\r\n     * If atom is part of an ion\r\n     * @return {Boolean} flag\r\n     */\r\n    isIon() {\r\n        return this.residueType.moleculeType === IonType;\r\n    }\r\n    /**\r\n     * If atom is part of a saccharide\r\n     * @return {Boolean} flag\r\n     */\r\n    isSaccharide() {\r\n        return this.residueType.moleculeType === SaccharideType;\r\n    }\r\n    /**\r\n     * If atom is part of a helix\r\n     * @return {Boolean} flag\r\n     */\r\n    isHelix() {\r\n        return SecStrucHelix.includes(this.sstruc);\r\n    }\r\n    /**\r\n     * If atom is part of a sheet\r\n     * @return {Boolean} flag\r\n     */\r\n    isSheet() {\r\n        return SecStrucSheet.includes(this.sstruc);\r\n    }\r\n    /**\r\n     * If atom is part of a turn\r\n     * @return {Boolean} flag\r\n     */\r\n    isTurn() {\r\n        return SecStrucTurn.includes(this.sstruc) && this.isProtein();\r\n    }\r\n    isBonded() {\r\n        return this.bondHash.countArray[this.index] !== 0; // TODO\r\n    }\r\n    /**\r\n     * If atom is part of a ring\r\n     * @return {Boolean} flag\r\n     */\r\n    isRing() {\r\n        const atomRings = this.residueType.getRings().atomRings; // TODO\r\n        return atomRings[this.index - this.residueAtomOffset] !== undefined;\r\n    }\r\n    isAromatic() {\r\n        return this.aromatic === 1;\r\n    }\r\n    isMetal() { return this.atomType.isMetal(); }\r\n    isNonmetal() { return this.atomType.isNonmetal(); }\r\n    isMetalloid() { return this.atomType.isMetalloid(); }\r\n    isHalogen() { return this.atomType.isHalogen(); }\r\n    isDiatomicNonmetal() { return this.atomType.isDiatomicNonmetal(); }\r\n    isPolyatomicNonmetal() { return this.atomType.isPolyatomicNonmetal(); }\r\n    isAlkaliMetal() { return this.atomType.isAlkaliMetal(); }\r\n    isAlkalineEarthMetal() { return this.atomType.isAlkalineEarthMetal(); }\r\n    isNobleGas() { return this.atomType.isNobleGas(); }\r\n    isTransitionMetal() { return this.atomType.isTransitionMetal(); }\r\n    isPostTransitionMetal() { return this.atomType.isPostTransitionMetal(); }\r\n    isLanthanide() { return this.atomType.isLanthanide(); }\r\n    isActinide() { return this.atomType.isActinide(); }\r\n    getDefaultValence() { return this.atomType.getDefaultValence(); }\r\n    getValenceList() { return this.atomType.getValenceList(); }\r\n    getOuterShellElectronCount() { return this.atomType.getOuterShellElectronCount(); }\r\n    /**\r\n     * Distance to another atom\r\n     * @param  {AtomProxy} atom - the other atom\r\n     * @return {Number} the distance\r\n     */\r\n    distanceTo(atom) {\r\n        const taa = this.atomStore;\r\n        const aaa = atom.atomStore;\r\n        const ti = this.index;\r\n        const ai = atom.index;\r\n        const x = taa.x[ti] - aaa.x[ai];\r\n        const y = taa.y[ti] - aaa.y[ai];\r\n        const z = taa.z[ti] - aaa.z[ai];\r\n        const distSquared = x * x + y * y + z * z;\r\n        return Math.sqrt(distSquared);\r\n    }\r\n    /**\r\n     * If connected to another atom\r\n     * @param  {AtomProxy} atom - the other atom\r\n     * @return {Boolean} flag\r\n     */\r\n    connectedTo(atom) {\r\n        const taa = this.atomStore;\r\n        const aaa = atom.atomStore;\r\n        const ti = this.index;\r\n        const ai = atom.index;\r\n        if (taa.altloc && aaa.altloc) {\r\n            const ta = taa.altloc[ti]; // use Uint8 value to compare\r\n            const aa = aaa.altloc[ai]; // no need to convert to char\r\n            // 0 is the Null character, 32 is the space character\r\n            if (!(ta === 0 || aa === 0 || ta === 32 || aa === 32 || (ta === aa)))\r\n                return false;\r\n        }\r\n        const x = taa.x[ti] - aaa.x[ai];\r\n        const y = taa.y[ti] - aaa.y[ai];\r\n        const z = taa.z[ti] - aaa.z[ai];\r\n        const distSquared = x * x + y * y + z * z;\r\n        // if( this.isCg() ) console.log( this.qualifiedName(), Math.sqrt( distSquared ), distSquared )\r\n        if (distSquared < 48.0 && this.isCg())\r\n            return true;\r\n        if (isNaN(distSquared))\r\n            return false;\r\n        const d = this.covalent + atom.covalent;\r\n        const d1 = d + 0.3;\r\n        const d2 = d - 0.5;\r\n        return distSquared < (d1 * d1) && distSquared > (d2 * d2);\r\n    }\r\n    /**\r\n     * Set atom position from array\r\n     * @param  {Array|TypedArray} array - input array\r\n     * @param  {Integer} [offset] - the offset\r\n     * @return {AtomProxy} this object\r\n     */\r\n    positionFromArray(array, offset = 0) {\r\n        this.x = array[offset + 0];\r\n        this.y = array[offset + 1];\r\n        this.z = array[offset + 2];\r\n        return this;\r\n    }\r\n    /**\r\n     * Write atom position to array\r\n     * @param  {Array|TypedArray} [array] - target array\r\n     * @param  {Integer} [offset] - the offset\r\n     * @return {Array|TypedArray} target array\r\n     */\r\n    positionToArray(array = [], offset = 0) {\r\n        const index = this.index;\r\n        const atomStore = this.atomStore;\r\n        array[offset + 0] = atomStore.x[index];\r\n        array[offset + 1] = atomStore.y[index];\r\n        array[offset + 2] = atomStore.z[index];\r\n        return array;\r\n    }\r\n    /**\r\n     * Write atom position to vector\r\n     * @param  {Vector3} [v] - target vector\r\n     * @return {Vector3} target vector\r\n     */\r\n    positionToVector3(v) {\r\n        if (v === undefined)\r\n            v = new Vector3();\r\n        v.x = this.x;\r\n        v.y = this.y;\r\n        v.z = this.z;\r\n        return v;\r\n    }\r\n    /**\r\n     * Set atom position from vector\r\n     * @param  {Vector3} v - input vector\r\n     * @return {AtomProxy} this object\r\n     */\r\n    positionFromVector3(v) {\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n        this.z = v.z;\r\n        return this;\r\n    }\r\n    /**\r\n     * Add vector to atom position\r\n     * @param  {Vector3} v - input vector\r\n     * @return {AtomProxy} this object\r\n     */\r\n    positionAdd(v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        this.z += v.z;\r\n        return this;\r\n    }\r\n    /**\r\n     * Subtract vector from atom position\r\n     * @param  {Vector3} v - input vector\r\n     * @return {AtomProxy} this object\r\n     */\r\n    positionSub(v) {\r\n        this.x -= v.x;\r\n        this.y -= v.y;\r\n        this.z -= v.z;\r\n        return this;\r\n    }\r\n    /**\r\n     * Get intra group/residue bonds\r\n     * @param  {Boolean} firstOnly - immediately return the first connected atomIndex\r\n     * @return {Integer[]|Integer|undefined} connected atomIndices\r\n     */\r\n    getResidueBonds(firstOnly = false) {\r\n        const residueAtomOffset = this.residueAtomOffset;\r\n        const relativeIndex = this.index - this.residueAtomOffset;\r\n        const bonds = this.residueType.getBonds(); // TODO\r\n        const atomIndices1 = bonds.atomIndices1;\r\n        const atomIndices2 = bonds.atomIndices2;\r\n        let idx1, idx2, connectedAtomIndex;\r\n        let connectedAtomIndices;\r\n        if (!firstOnly)\r\n            connectedAtomIndices = [];\r\n        idx1 = atomIndices1.indexOf(relativeIndex);\r\n        while (idx1 !== -1) {\r\n            connectedAtomIndex = atomIndices2[idx1] + residueAtomOffset;\r\n            if (connectedAtomIndices) {\r\n                connectedAtomIndices.push(connectedAtomIndex);\r\n                idx1 = atomIndices1.indexOf(relativeIndex, idx1 + 1);\r\n            }\r\n            else {\r\n                return connectedAtomIndex;\r\n            }\r\n        }\r\n        idx2 = atomIndices2.indexOf(relativeIndex);\r\n        while (idx2 !== -1) {\r\n            connectedAtomIndex = atomIndices1[idx2] + residueAtomOffset;\r\n            if (connectedAtomIndices) {\r\n                connectedAtomIndices.push(connectedAtomIndex);\r\n                idx2 = atomIndices2.indexOf(relativeIndex, idx2 + 1);\r\n            }\r\n            else {\r\n                return connectedAtomIndex;\r\n            }\r\n        }\r\n        return connectedAtomIndices;\r\n    }\r\n    //\r\n    qualifiedName(noResname = false) {\r\n        var name = '';\r\n        if (this.resname && !noResname)\r\n            name += '[' + this.resname + ']';\r\n        if (this.resno !== undefined)\r\n            name += this.resno;\r\n        if (this.inscode)\r\n            name += '^' + this.inscode;\r\n        if (this.chainname)\r\n            name += ':' + this.chainname;\r\n        if (this.atomname)\r\n            name += '.' + this.atomname;\r\n        if (this.altloc)\r\n            name += '%' + this.altloc;\r\n        if (this.structure.modelStore.count > 1)\r\n            name += '/' + this.modelIndex;\r\n        return name;\r\n    }\r\n    /**\r\n     * Clone object\r\n     * @return {AtomProxy} cloned atom\r\n     */\r\n    clone() {\r\n        return new AtomProxy(this.structure, this.index);\r\n    }\r\n    toObject() {\r\n        return {\r\n            index: this.index,\r\n            residueIndex: this.residueIndex,\r\n            resname: this.resname,\r\n            x: this.x,\r\n            y: this.y,\r\n            z: this.z,\r\n            element: this.element,\r\n            chainname: this.chainname,\r\n            resno: this.resno,\r\n            serial: this.serial,\r\n            vdw: this.vdw,\r\n            covalent: this.covalent,\r\n            hetero: this.hetero,\r\n            bfactor: this.bfactor,\r\n            altloc: this.altloc,\r\n            atomname: this.atomname,\r\n            modelIndex: this.modelIndex\r\n        };\r\n    }\r\n}\r\nexport default AtomProxy;\r\n//# sourceMappingURL=atom-proxy.js.map","/**\r\n * @file Kdtree\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { Debug, Log } from '../globals';\r\nimport _Kdtree from '../utils/kdtree';\r\nimport AtomProxy from '../proxy/atom-proxy';\r\nfunction euclideanDistSq(a, b) {\r\n    const dx = a[0] - b[0];\r\n    const dy = a[1] - b[1];\r\n    const dz = a[2] - b[2];\r\n    return dx * dx + dy * dy + dz * dz;\r\n}\r\nfunction euclideanDist(a, b) {\r\n    return Math.sqrt(euclideanDistSq(a, b));\r\n}\r\nconst pointArray = new Float32Array(3);\r\nclass Kdtree {\r\n    constructor(structure, useSquaredDist = false) {\r\n        if (Debug)\r\n            Log.time('Kdtree build');\r\n        const metric = useSquaredDist ? euclideanDistSq : euclideanDist;\r\n        const points = new Float32Array(structure.atomCount * 3);\r\n        const atomIndices = new Uint32Array(structure.atomCount);\r\n        let i = 0;\r\n        structure.eachAtom(function (ap) {\r\n            points[i + 0] = ap.x;\r\n            points[i + 1] = ap.y;\r\n            points[i + 2] = ap.z;\r\n            atomIndices[i / 3] = ap.index;\r\n            i += 3;\r\n        });\r\n        this.atomIndices = atomIndices;\r\n        this.points = points;\r\n        this.kdtree = new _Kdtree(points, metric);\r\n        if (Debug)\r\n            Log.timeEnd('Kdtree build');\r\n        // console.log(\"this.kdtree.verify()\", this.kdtree.verify())\r\n    }\r\n    nearest(point, maxNodes, maxDistance) {\r\n        // Log.time( \"Kdtree nearest\" );\r\n        if (point instanceof Vector3) {\r\n            point.toArray(pointArray);\r\n        }\r\n        else if (point instanceof AtomProxy) {\r\n            point.positionToArray(pointArray);\r\n        }\r\n        const nodeList = this.kdtree.nearest(pointArray, maxNodes, maxDistance);\r\n        const indices = this.kdtree.indices;\r\n        const nodes = this.kdtree.nodes;\r\n        const atomIndices = this.atomIndices;\r\n        const resultList = [];\r\n        for (let i = 0, n = nodeList.length; i < n; ++i) {\r\n            const d = nodeList[i];\r\n            const nodeIndex = d[0];\r\n            const dist = d[1];\r\n            resultList.push({\r\n                index: atomIndices[indices[nodes[nodeIndex]]],\r\n                distance: dist\r\n            });\r\n        }\r\n        // Log.timeEnd( \"Kdtree nearest\" );\r\n        return resultList;\r\n    }\r\n}\r\nexport default Kdtree;\r\n//# sourceMappingURL=kdtree.js.map","/**\r\n * @file Symmetry Constants\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nexport const SymOpCode = {\r\n    ' ': 'X',\r\n    '!': 'Y',\r\n    '#': 'Z',\r\n    '$': '-X',\r\n    '%': '-Y',\r\n    '&': '-Z',\r\n    \"'\": 'Y+1/2',\r\n    '(': '1/2+X',\r\n    ')': '1/2+Y',\r\n    '*': '1/2-X',\r\n    '+': '1/2+Z',\r\n    ',': '1/2-Y',\r\n    '-': '1/2-Z',\r\n    '.': 'X+1/2',\r\n    '/': 'Z+1/2',\r\n    '0': '-X+1/2',\r\n    '1': '-Y+1/2',\r\n    '2': '-Z+1/2',\r\n    '3': '1/4+X',\r\n    '4': '1/4-Y',\r\n    '5': '1/4+Z',\r\n    '6': '1/4-X',\r\n    '7': '1/4+Y',\r\n    '8': '3/4-Y',\r\n    '9': '3/4+Z',\r\n    ':': '3/4+Y',\r\n    ';': '3/4+X',\r\n    '<': '3/4-X',\r\n    '=': '1/4-Z',\r\n    '>': '3/4-Z',\r\n    '?': 'X-Y',\r\n    '@': 'Y-X',\r\n    'A': 'Z+1/3',\r\n    'B': 'Z+2/3',\r\n    'C': 'X+2/3',\r\n    'D': 'Y+1/3',\r\n    'E': '-Y+2/3',\r\n    'F': 'X-Y+1/3',\r\n    'G': 'Y-X+2/3',\r\n    'H': '-X+1/3',\r\n    'I': 'X+1/3',\r\n    'J': 'Y+2/3',\r\n    'K': '-Y+1/3',\r\n    'L': 'X-Y+2/3',\r\n    'M': 'Y-X+1/3',\r\n    'N': '-X+2/3',\r\n    'O': '2/3+X',\r\n    'P': '1/3+Y',\r\n    'Q': '1/3+Z',\r\n    'R': '2/3-Y',\r\n    'S': '1/3+X-Y',\r\n    'T': '2/3+Y-X',\r\n    'U': '1/3-X',\r\n    'V': '2/3-X',\r\n    'W': '1/3-Y',\r\n    'X': '1/3-Z',\r\n    'Y': '2/3+Y',\r\n    'Z': '1/3+Y-X',\r\n    '[': '2/3+X-Y',\r\n    ']': '1/3+X',\r\n    '^': '2/3+Z',\r\n    '_': '2/3-Z',\r\n    '`': '5/6+Z',\r\n    'a': '1/6+Z',\r\n    'b': '5/6-Z',\r\n    'c': '1/6-Z',\r\n    'd': 'Z+5/6',\r\n    'e': 'Z+1/6',\r\n    'f': 'Z+1/4',\r\n    'g': '+Y'\r\n};\r\n// encoded, originally from CCP4 symop.lib\r\nexport const EncodedSymOp = {\r\n    'P 1': ' !#',\r\n    'P -1': ' !#$%&',\r\n    'P 1 2 1': ' !#$!&',\r\n    'P 1 21 1': \" !#$'&\",\r\n    'C 1 2 1': ' !#$!&()#*)&',\r\n    'P 1 m 1': ' !# %#',\r\n    'P 1 c 1': ' !# %+',\r\n    'C 1 m 1': ' !# %#()#(,#',\r\n    'C 1 c 1': ' !# %+()#(,+',\r\n    'P 1 2/m 1': ' !# %#$!&$%&',\r\n    'P 1 21/m 1': ' !#$)&$%& ,#',\r\n    'C 1 2/m 1': ' !# %#$!&$%&()#(,#*)&*,&',\r\n    'P 1 2/c 1': ' !#$!-$%& %+',\r\n    'P 1 21/c 1': ' !#$%&$)- ,+',\r\n    'C 1 2/c 1': ' !#$!-$%& %+()#*)-*,&(,+',\r\n    'P 2 2 2': ' !#$%#$!& %&',\r\n    'P 2 2 21': ' !#$%+$!- %&',\r\n    'P 21 21 2': ' !#$%#*)&(,&',\r\n    'P 21 21 21': ' !#*%+$)-(,&',\r\n    'C 2 2 21': ' !#$%+$!- %&()#*,+*)-(,&',\r\n    'C 2 2 2': ' !#$%#$!& %&()#*,#*)&(,&',\r\n    'F 2 2 2': ' !#$%#$!& %& )+$,+$)- ,-(!+*%+*!-(%-()#*,#*)&(,&',\r\n    'I 2 2 2': \" !#$%# %&$!&.'/01/.120'2\",\r\n    'I 21 21 21': ' !#*%+$)-(,&()+$,#*!& %-',\r\n    'P m m 2': ' !#$%# %#$!#',\r\n    'P m c 21': ' !#$%+ %+$!#',\r\n    'P c c 2': ' !#$%# %+$!+',\r\n    'P m a 2': ' !#$%#(%#*!#',\r\n    'P c a 21': ' !#$%+(%#*!+',\r\n    'P n c 2': ' !#$%# ,+$)+',\r\n    'P m n 21': ' !#*%+(%+$!#',\r\n    'P b a 2': ' !#$%#(,#*)#',\r\n    'P n a 21': ' !#$%+(,#*)+',\r\n    'P n n 2': ' !#$%#(,+*)+',\r\n    'C m m 2': ' !#$%# %#$!#()#*,#(,#*)#',\r\n    'C m c 21': ' !#$%+ %+$!#()#*,+(,+*)#',\r\n    'C c c 2': ' !#$%# %+$!+()#*,#(,+*)+',\r\n    'A m m 2': ' !#$%# %#$!# )+$,+ ,+$)+',\r\n    'A b m 2': ' !#$%# ,#$)# )+$,+ %+$!+',\r\n    'A m a 2': ' !#$%#(%#*!# )+$,+(,+*)+',\r\n    'A b a 2': ' !#$%#(,#*)# )+$,+(%+*!+',\r\n    'F m m 2': ' !#$%# %#$!# )+$,+ ,+$)+(!+*%+(%+*!+()#*,#(,#*)#',\r\n    'F d d 2': ' !#$%#345675 )+$,+3896:9(!+*%+;49<79()#*,#;85<:5',\r\n    'I m m 2': ' !#$%# %#$!#()+*,+(,+*)+',\r\n    'I b a 2': ' !#$%#(,#*)#()+*,+ %+$!+',\r\n    'I m a 2': ' !#$%#(%#*!#()+*,+ ,+$)+',\r\n    'P 2/m 2/m 2/m': ' !#$%#$!& %&$%& !& %#$!#',\r\n    'P 2/n 2/n 2/n': ' !#$%#$!& %&*,-()-(,+*)+',\r\n    'P 2/c 2/c 2/m': ' !#$%#$!- %-$%& !& %+$!+',\r\n    'P 2/b 2/a 2/n': ' !#$%#$!& %&*,&()&(,#*)#',\r\n    'P 21/m 2/m 2/a': ' !#*%#$!&(%&$%&(!& %#*!#',\r\n    'P 2/n 21/n 2/a': ' !#*%#*)- ,-$%&(!&(,+$)+',\r\n    'P 2/m 2/n 21/a': ' !#*%+*!- %&$%&(!-(%+$!#',\r\n    'P 21/c 2/c 2/a': ' !#*%#$!-(%-$%&(!& %+*!+',\r\n    'P 21/b 21/a 2/m': ' !#$%#*)&(,&$%& !&(,#*)#',\r\n    'P 21/c 21/c 2/n': ' !#*,#$)-(%-$%&()& ,+*!+',\r\n    'P 2/b 21/c 21/m': ' !#$%+$)- ,&$%& !- ,+$)#',\r\n    'P 21/n 21/n 2/m': ' !#$%#*)-(,-$%& !&(,+*)+',\r\n    'P 21/m 21/m 2/n': \" !#$%#*'&.,&*,&.'& %#$!#\",\r\n    'P 21/b 2/c 21/n': ' !#*,+$!-(,&$%&()- %+*)#',\r\n    'P 21/b 21/c 21/a': ' !#*%+$)-(,&$%&(!- ,+*)#',\r\n    'P 21/n 21/m 21/a': \" !#0%/$'&.12$%&.!2 1#0'/\",\r\n    'C 2/m 2/c 21/m': ' !#$%+$!- %&$%& !- %+$!#()#*,+*)-(,&*,&()-(,+*)#',\r\n    'C 2/m 2/c 21/a': ' !#$,+$)- %&$%& )- ,+$!#()#*%+*!-(,&*,&(!-(%+*)#',\r\n    'C 2/m 2/m 2/m': ' !#$%#$!& %&$%& !& %#$!#()#*,#*)&(,&*,&()&(,#*)#',\r\n    'C 2/c 2/c 2/m': ' !#$%#$!- %-$%& !& %+$!+()#*,#*)-(,-*,&()&(,+*)+',\r\n    'C 2/m 2/m 2/a': ' !#$,#$)& %&$%& )& ,#$!#()#*%#*!&(,&*,&(!&(%#*)#',\r\n    'C 2/c 2/c 2/a': ' !#*,#$!&(,&$,-(!- ,+*!+()#$%#*)& %&*%- )-(%+$)+',\r\n    'F 2/m 2/m 2/m': ' !#$%#$!& %&$%& !& %#$!# )+$,+$)- ,-$,- )- ,+$)+(!+*%+*!-(%-*%-(!-(%+*!+()#*,#*)&(,&*,&()&(,#*)#',\r\n    'F 2/d 2/d 2/d': ' !#$%#$!& %&64=37=345675 )+$,+$)- ,-68>3:>3896:9(!+*%+*!-(%-<4>;7>;49<79()#*,#*)&(,&<8=;:=;85<:5',\r\n    'I 2/m 2/m 2/m': ' !#$%#$!& %&$%& !& %#$!#()+*,+*)-(,-*,-()-(,+*)+',\r\n    'I 2/b 2/a 2/m': ' !#$%#*)&(,&$%& !&(,#*)#()+*,+$!- %-*,-()- %+$!+',\r\n    'I 21/b 21/c 21/a': ' !#*%+$)-(,&$%&(!- ,+*)#()+$,#*!& %-*,- )&(%#$!+',\r\n    'I 21/m 21/m 21/a': ' !#$,#$)& %&$%& )& ,#$!#()+*%+*!-(,-*,-(!-(%+*)+',\r\n    'P 4': ' !#$%#% #!$#',\r\n    'P 41': ' !#$%+% 5!$9',\r\n    'P 42': ' !#$%#% +!$+',\r\n    'P 43': ' !#$%+% 9!$5',\r\n    'I 4': ' !#$%#% #!$#()+*,+,(+)*+',\r\n    'I 41': ' !#*,+%(5)$9()+$%#, 9!*5',\r\n    'P -4': ' !#$%#!$&% &',\r\n    'I -4': ' !#$%#!$&% &()+*,+)*-,(-',\r\n    'P 4/m': ' !#$%#% #!$#$%& !&!$&% &',\r\n    'P 42/m': ' !#$%#% +!$+$%& !&!$-% -',\r\n    'P 4/n': ' !#$%#,(#)*#*,&()&!$&% &',\r\n    'P 42/n': ' !#$%#,(+)*+*,-()-!$&% &',\r\n    'I 4/m': ' !#$%#% #!$#$%& !&!$&% &()+*,+,(+)*+*,-()-)*-,(-',\r\n    'I 41/a': ' !#*,+%(5)$9$,=(!>!$&,(-()+$%#, 9!*5*%> )=)*-% &',\r\n    'P 4 2 2': ' !#$%#% #!$#$!& %&! &%$&',\r\n    'P 4 21 2': ' !#$%#,(#)*#*)&(,&! &%$&',\r\n    'P 41 2 2': ' !#$%+% 5!$9$!& %-! >%$=',\r\n    'P 41 21 2': ' !#$%+,(5)*9*)=(,>! &%$-',\r\n    'P 42 2 2': ' !#$%#% +!$+$!& %&! -%$-',\r\n    'P 42 21 2': ' !#$%#,(+)*+*)-(,-! &%$&',\r\n    'P 43 2 2': ' !#$%+% 9!$5$!& %-! =%$>',\r\n    'P 43 21 2': ' !#$%+,(9)*5*)>(,=! &%$-',\r\n    'I 4 2 2': ' !#$%#% #!$#$!& %&! &%$&()+*,+,(+)*+*)-(,-)(-,*-',\r\n    'I 41 2 2': ' !#*,+%(5)$9*!> ,=)(-%$&()+$%#, 9!*5$)=(%>! &,*-',\r\n    'P 4 m m': ' !#$%#% #!$# %#$!#%$#! #',\r\n    'P 4 b m': ' !#$%#% #!$#(,#*)#,*#)(#',\r\n    'P 42 c m': ' !#$%#% +!$+ %+$!+%$#! #',\r\n    'P 42 n m': ' !#$%#,(+)*+(,+*)+%$#! #',\r\n    'P 4 c c': ' !#$%#% #!$# %+$!+%$+! +',\r\n    'P 4 n c': ' !#$%#% #!$#(,+*)+,*+)(+',\r\n    'P 42 m c': ' !#$%#% +!$+ %#$!#%$+! +',\r\n    'P 42 b c': ' !#$%#% +!$+(,#*)#,*+)(+',\r\n    'I 4 m m': ' !#$%#% #!$# %#$!#%$#! #()+*,+,(+)*+(,+*)+,*+)(+',\r\n    'I 4 c m': ' !#$%#% #!$# %+$!+%$+! +()+*,+,(+)*+(,#*)#,*#)(#',\r\n    'I 41 m d': ' !#*,+%(5)$9 %#*)+%*5) 9()+$%#, 9!*5(,+$!#,$9!(5',\r\n    'I 41 c d': ' !#*,+%(5)$9 %+*)#%*9) 5()+$%#, 9!*5(,#$!+,$5!(9',\r\n    'P -4 2 m': ' !#$%#% &!$&$!& %&%$#! #',\r\n    'P -4 2 c': ' !#$%#% &!$&$!- %-%$+! +',\r\n    'P -4 21 m': ' !#$%#% &!$&*)&(,&,*#)(#',\r\n    'P -4 21 c': ' !#$%#% &!$&*)-(,-,*+)(+',\r\n    'P -4 m 2': ' !#$%#!$&% & %#$!#! &%$&',\r\n    'P -4 c 2': ' !#$%#% &!$& %+$!+! -%$-',\r\n    'P -4 b 2': ' !#$%#% &!$&(,#*)#)(&,*&',\r\n    'P -4 n 2': ' !#$%#% &!$&(,+*)+)(-,*-',\r\n    'I -4 m 2': ' !#$%#% &!$& %#$!#! &%$&()+*,+,(-)*-(,+*)+)(-,*-',\r\n    'I -4 c 2': ' !#$%#% &!$& %+$!+! -%$-()+*,+,(-)*-(,#*)#)(&,*&',\r\n    'I -4 2 m': ' !#$%#% &!$&$!& %&%$#! #()+*,+,(-)*-*)-(,-,*+)(+',\r\n    'I -4 2 d': ' !#$%#% &!$&*!>(%>,$9) 9()+*,+,(-)*-$)= ,=%*5!(5',\r\n    'P 4/m 2/m 2/m': ' !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #',\r\n    'P 4/m 2/c 2/c': ' !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +',\r\n    'P 4/n 2/b 2/m': ' !#$%#% #!$#$!& %&! &%$&*,&()&)*&,(&(,#*)#,*#)(#',\r\n    'P 4/n 2/n 2/c': ' !#$%#% #!$#$!& %&! &%$&*,-()-)*-,(-(,+*)+,*+)(+',\r\n    'P 4/m 21/b 2/m': ' !#$%#% #!$#*)&(,&)(&,*&$%& !&!$&% &(,#*)#,*#)(#',\r\n    'P 4/m 21/n 2/c': ' !#$%#% #!$#*)-(,-)(-,*-$%& !&!$&% &(,+*)+,*+)(+',\r\n    'P 4/n 21/m 2/m': ' !#$%#,(#)*#*)&(,&! &%$&*,&()&!$&% & %#$!#,*#)(#',\r\n    'P 4/n 2/c 2/c': ' !#$%#,(#)*#*)-(,-! -%$-*,&()&!$&% & %+$!+,*+)(+',\r\n    'P 42/m 2/m 2/c': ' !#$%#% +!$+$!& %&! -%$-$%& !&!$-% - %#$!#%$+! +',\r\n    'P 42/m 2/c 2/m': ' !#$%#% +!$+$!- %-! &%$&$%& !&!$-% - %+$!+%$#! #',\r\n    'P 42/n 2/b 2/c': ' !#$%#,(+)*+$!- %-)(&,*&*,-()-!$&% &(,#*)#%$+! +',\r\n    'P 42/n 2/n 2/m': ' !#$%#,(+)*+$!& %&)(-,*-*,-()-!$&% &(,+*)+%$#! #',\r\n    'P 42/m 21/b 2/c': ' !#$%#% +!$+*)&(,&)(-,*-$%& !&!$-% -(,#*)#,*+)(+',\r\n    'P 42/m 21/n 2/m': \" !#$%#,./'*/*'-.,-! &%$&$%& !&'*-,.-.,/*'/%$#! #\",\r\n    'P 42/n 21/m 2/c': ' !#$%#,(+)*+*)-(,-! &%$&*,-()-!$&% & %#$!#,*+)(+',\r\n    'P 42/n 21/c 2/m': ' !#$%#,(+)*+*)&(,&! -%$-*,-()-!$&% & %+$!+,*#)(#',\r\n    'I 4/m 2/m 2/m': ' !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #()+*,+,(+)*+*)-(,-)(-,*-*,-()-)*-,(-(,+*)+,*+)(+',\r\n    'I 4/m 2/c 2/m': ' !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +()+*,+,(+)*+*)&(,&)(&,*&*,-()-)*-,(-(,#*)#,*#)(#',\r\n    'I 41/a 2/m 2/d': ' !#*,+%(5)$9*!> ,=)(-%$&$,=(!>!$&,(-(,+$!#,$9!(5()+$%#, 9!*5$)=(%>! &,*-*%> )=)*-% & %#*)+%*5) 9',\r\n    'I 41/a 2/c 2/d': ' !#*,+%(5)$9*!= ,>)(&%$-$,=(!>!$&,(-(,#$!+,$5!(9()+$%#, 9!*5$)>(%=! -,*&*%> )=)*-% & %+*)#%*9) 5',\r\n    'P 3': ' !#%?#@$#',\r\n    'P 31': ' !#%?A@$B',\r\n    'P 32': ' !#%?B@$A',\r\n    'H 3': ' !#%?#@$#CDAEFAGHAIJBKLBMNB',\r\n    'R 3': ' !## !!# ',\r\n    'P -3': ' !#%?#@$#$%&!@&? &',\r\n    'H -3': ' !#%?#@$#$%&!@&? &OPQRSQTUQVWXYZX[]X]Y^W[^ZV^UR_PT_SO_',\r\n    'R -3': ' !## !!# $%&&$%%&$',\r\n    'P 3 1 2': ' !#%?#@$#%$&@!& ?&',\r\n    'P 3 2 1': ' !#%?#@$#! &?%&$@&',\r\n    'P 31 1 2': ' !#%?Q@$^%$_@!X ?&',\r\n    'P 31 2 1': ' !#%?A@$B! &?%_$@X',\r\n    'P 32 1 2': ' !#%?^@$Q%$X@!_ ?&',\r\n    'P 32 2 1': ' !#%?B@$A! &?%X$@_',\r\n    'H 3 2': ' !#%?#@$#! &?%&$@&OPQRSQTUQY]X[WXVZX]Y^W[^ZV^PO_SR_UT_',\r\n    'R 3 2': ' !## !!# %$&$&%&%$',\r\n    'P 3 m 1': ' !#%?#@$#%$#@!# ?#',\r\n    'P 3 1 m': ' !#%?#@$#! #?%#$@#',\r\n    'P 3 c 1': ' !#%?#@$#%$+@!+ ?+',\r\n    'P 3 1 c': ' !#%?#@$#! +?%+$@+',\r\n    'H 3 m': ' !#%?#@$#%$#@!# ?#OPQRSQTUQRUQTPQOSQ]Y^W[^ZV^WV^ZY^][^',\r\n    'R 3 m': ' !## !!# ! # #!#! ',\r\n    'H 3 c': ' !#%?#@$#%$+@!+ ?+OPQRSQTUQRU`TP`OS`]Y^W[^ZV^WVaZYa][a',\r\n    'R 3 c': \" !## !!# '././'/'.\",\r\n    'P -3 1 2/m': ' !#%?#@$#%$&@!& ?&$%&!@&? &! #?%#$@#',\r\n    'P -3 1 2/c': ' !#%?#@$#%$-@!- ?-$%&!@&? &! +?%+$@+',\r\n    'P -3 2/m 1': ' !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#',\r\n    'P -3 2/c 1': ' !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+',\r\n    'H -3 2/m': ' !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#OPQRSQTUQY]X[WXVZXVWXYZX[]XRUQTPQOSQ]Y^W[^ZV^PO_SR_UT_UR_PT_SO_WV^ZY^][^',\r\n    'R -3 2/m': ' !## !!# %$&$&%&%$$%&&$%%&$! # #!#! ',\r\n    'H -3 2/c': ' !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+OPQRSQTUQY]b[WbVZbVWXYZX[]XRU`TP`OS`]Y^W[^ZV^POcSRcUTcUR_PT_SO_WVaZYa][a',\r\n    'R -3 2/c': \" !## !!# 102021210$%&&$%%&$'././'/'.\",\r\n    'P 6': ' !#%?#@$#$%#!@#? #',\r\n    'P 61': ' !#%?A@$B$%/!@d? e',\r\n    'P 65': ' !#%?B@$A$%/!@e? d',\r\n    'P 62': ' !#%?^@$Q$%#!@^? Q',\r\n    'P 64': ' !#%?Q@$^$%#!@Q? ^',\r\n    'P 63': ' !#%?#@$#$%+!@+? +',\r\n    'P -6': ' !#%?#@$# !&%?&@$&',\r\n    'P 6/m': ' !#%?#@$#$%#!@#? #$%&!@&? & !&%?&@$&',\r\n    'P 63/m': ' !#%?#@$#$%+!@+? +$%&!@&? & !-%?-@$-',\r\n    'P 6 2 2': ' !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&',\r\n    'P 61 2 2': ' !#%?Q@$^$%+!@`? a! X?%&$@_%$b@!- ?c',\r\n    'P 65 2 2': ' !#%?^@$Q$%+!@a? `! _?%&$@X%$c@!- ?b',\r\n    'P 62 2 2': ' !#%?^@$Q$%#!@^? Q! _?%&$@X%$_@!& ?X',\r\n    'P 64 2 2': ' !#%?Q@$^$%#!@Q? ^! X?%&$@_%$X@!& ?_',\r\n    'P 63 2 2': ' !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-',\r\n    'P 6 m m': ' !#%?#@$#$%#!@#? #%$#@!# ?#! #?%#$@#',\r\n    'P 6 c c': ' !#%?#@$#$%#!@#? #%$+@!+ ?+! +?%+$@+',\r\n    'P 63 c m': ' !#%?#@$#$%+!@+? +%$+@!+ ?+! #?%#$@#',\r\n    'P 63 m c': ' !#%?#@$#$%+!@+? +%$#@!# ?#! +?%+$@+',\r\n    'P -6 m 2': ' !#%?#@$# !&%?&@$&%$#@!# ?#%$&@!& ?&',\r\n    'P -6 c 2': ' !#%?#@$# !-%?-@$-%$+@!+ ?+%$&@!& ?&',\r\n    'P -6 2 m': ' !#%?#@$# !&%?&@$&! &?%&$@&! #?%#$@#',\r\n    'P -6 2 c': ' !#%?#@$# !-%?-@$-! &?%&$@&! +?%+$@+',\r\n    'P 6/m 2/m 2/m': ' !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&$%&!@&? & !&@$&%?&%$#@!# ?#! #?%#$@#',\r\n    'P 6/m 2/c 2/c': ' !#%?#@$#$%#!@#? #! -?%-$@-%$-@!- ?-$%&!@&? & !&@$&%?&%$+@!+ ?+! +?%+$@+',\r\n    'P 63/m 2/c 2/m': ' !#%?#@$#$%+!@+? +! -?%-$@-%$&@!& ?&$%&!@&? & !-@$-%?-%$+@!+ ?+! #?%#$@#',\r\n    'P 63/m 2/m 2/c': ' !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-$%&!@&? & !-@$-%?-%$#@!# ?#! +?%+$@+',\r\n    'P 2 3': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ',\r\n    'F 2 3': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%&  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ',\r\n    'I 2 3': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(',\r\n    'P 21 3': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(',\r\n    'I 21 3': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- ',\r\n    'P 2/m -3': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$',\r\n    'P 2/n -3': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& *,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*',\r\n    'F 2/m -3': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-($,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- *,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$',\r\n    'F 2/d -3': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& 64=37=345675=64=375345674=67=3453756 )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(68>3:>3896:9=<8=;:5;85<:4><7>;49;79<(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(<4>;7>;49<79>68>3:93896:8=<:=;85;:5<()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- <8=;:=;8f<:f><4>;79;49<78>6:>3893:96',\r\n    'I 2/m -3': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*',\r\n    'P 21/a -3': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*',\r\n    'I 21/a -3': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*()+$,#*g& %-+()#$,&*!- %)+(,#$!&*%- *,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$',\r\n    'P 4 3 2': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$',\r\n    'P 42 3 2': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*',\r\n    'F 4 3 2': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$',\r\n    'F 41 3 2': ' !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46 )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<(!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86',\r\n    'I 4 3 2': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*',\r\n    'P 43 3 2': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7;>46=:<5839398<5:6=4;>75:<983>7;=46',\r\n    'P 41 3 2': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<',\r\n    'I 41 3 2': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46',\r\n    'P -4 3 m': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ',\r\n    'F -4 3 m': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&%  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(+%*+!*-%(- +)$+,$-) -,#)(#,*&)*&,((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() +,$+)$-, -(#)*#,*&)(&,+!(+%*-!*-%(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(#,*#)*&,(&(+!*+%*-!(-%+) +,$-)$-, ',\r\n    'I -4 3 m': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(',\r\n    'P -4 3 n': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(',\r\n    'F -4 3 c': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() #,$#)$&, &(#!*#%*&!(&%+! +%$-!$-% (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(#%*#!*&%(& +!$+%$-! -%#) #,$&)$&, ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! +%$+!$-% - #)$#,$&) &,#!(#%*&!*&%(',\r\n    'I -4 3 d': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7354<9:6>8;=357<946>:;=857394<>:6=8;()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- :;98657<=43>;9:658<=73>49:;586=7<>43',\r\n    'P 4/m -3 2/m': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ',\r\n    'P 4/n -3 2/n': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(',\r\n    'P 42/m -3 2/n': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(',\r\n    'P 42/n -3 2/m': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ',\r\n    'F 4/m -3 2/m': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#!  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*%*+!(+%(-!*-$-) -, +)$+,&,(&)*#,*#)((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%**%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*,$+) +, -)$-*&)(&,(#)*#,-%(-!*+%*+!(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$*,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$,*#)(#,(&)*&*-!(-%(+!*+%-, -)$+,$+) ',\r\n    'F 4/m -3 2/c': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() &,$&)$#, #(#%*#!*&%(&!+!$+% -! -%$$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*,$#) #, &)$&*&!(&%(#!*#%-% -!$+%$+! (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(&%*&!*#%(# +%$+!$-% -!#)$#, &) &,$*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*%*#!(#%(&!*&$-! -% +!$+%&, &)$#,$#) ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! -%$-!$+% + #,$#)$&, &)#!*#%(&!(&%**,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$%$+! +% -!$-$&) &, #)$#,&%(&!*#%*#!(',\r\n    'F 41/d -3 2/m': ' !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=4664=3:>;85<79=64>3:5;89<74=6:>385;79<,$+! #%(-)*&*&)(-% #!$+,-%(&)*+,$#!  )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<68>37=;49<:5=<8>;753496:4><:=;893756,*#!(+% &)$-*-!(&, +)$#%-, &!$+%*#)((!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<<4>;:=389675>68=379;45<:8=<7>;453:96%$#) +,(&!*-$&! -,(#)*+%&% -)$#,*+!(()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86<8=;7>3456:9><4=;:9385678>67=349;:5<%*+)(#, -!$&$-) &%(+!*#,&,(-!*#%$+) ',\r\n    'F 41/d -3 2/c': ' !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46<8>;7=3496:5><8=;793456:8><7=;493:56%*#)(+, &!$-$-! &,(+)*#%&, -!$#%*+)( )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<<4=;:>385679>64=3:9;85<78=67>345;:9<%$+) #,(-!*&$&) -%(#!*+,&%(-)*#,$+! (!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<68=37>;45<:9=<4>;:5389674>6:=389;75<,*+!(#% -)$&*-)(&% +!$#,-,(&!*+%$#) ()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>8664>3:=;89<75=68>375;49<:4=<:>;853796,$#! +%(&)*-*&!(-, #)$+%-% &)$+,*#!(',\r\n    'I 4/m -3 2/m': ' !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(',\r\n    'I 41/a -3 2/d': ' !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<$%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*4<97358;=:6>6>:;=8357<94=8;>:694<573()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46*,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$865:;943>7<=<=73>4;9:658>43=7<5869:;',\r\n    'P 1 1 2': ' !#$%#',\r\n    'P 1 1 21': ' !#$%+',\r\n    'B 1 1 2': ' !#$%#(g+*%+',\r\n    'A 1 2 1': ' !#$!& )+$)-',\r\n    'C 1 21 1': ' !#$)&()#*!&',\r\n    'I 1 2 1': \" !#$!&.'/0'2\",\r\n    'I 1 21 1': \" !#$)&.'/0!-\",\r\n    'P 1 1 m': ' !# !&',\r\n    'P 1 1 b': ' !# )&',\r\n    'B 1 1 m': ' !# !&(!+(!-',\r\n    'B 1 1 b': ' !# )&(!+()-',\r\n    'P 1 1 2/m': ' !# !&$%#$%&',\r\n    'P 1 1 21/m': ' !#$%+$%& !-',\r\n    'B 1 1 2/m': ' !# !&$%#$%&(!+(!-*%+*%-',\r\n    'P 1 1 2/b': ' !#$,#$%& )&',\r\n    'P 1 1 21/b': ' !#$%&$,+ )-',\r\n    'B 1 1 2/b': ' !#$,#$%& )&(!+*,+*%-()-',\r\n    'P 21 2 2': ' !#$!&(%&*%#',\r\n    'P 2 21 2': ' !# ,&$)&$%#',\r\n    'P 21 21 2 (a)': \" !#*,#.%&$'&\",\r\n    'P 21 2 21': ' !#$!&(%-*%+',\r\n    'P 2 21 21': ' !# %&$)-$,+',\r\n    'C 2 2 21a)': ' !#*%+(,&$)-()#$,+ %&*!-',\r\n    'C 2 2 2a': \" !#*,#.%&$'&()#$%# ,&*!&\",\r\n    'F 2 2 2a': \" !#*,#.%&$'& '/*%/.12$!2.!/$,/ %20'2.'#$%# 1&0!&\",\r\n    'I 2 2 2a': \" !#*,#.%&$'&()+$%+*!- ,-\",\r\n    'P 21/m 21/m 2/n a': \" !#*,#$)&(%&$%&.'& ,#*!#\",\r\n    'P 42 21 2a': \" !#*,#%.+'$+$'&.%&! -,*-\",\r\n    'I 2 3a': \" !#*,#.%&$'&!# ,- '&$%/$# !-*!/$%&.%()+$%+ ,-*!-)+(%&(!-*,#*+()&$)#*,- ,\"\r\n};\r\n//# sourceMappingURL=symmetry-constants.js.map","/**\r\n * @file Symmetry Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport { Log } from '../globals';\r\nimport { EncodedSymOp, SymOpCode } from './symmetry-constants';\r\nconst reInteger = /^[1-9]$/;\r\nexport function getSymmetryOperations(spacegroup) {\r\n    const encodedSymopList = EncodedSymOp[spacegroup];\r\n    const matrixDict = {};\r\n    if (encodedSymopList === undefined) {\r\n        console.warn(`spacegroup '${spacegroup}' not found in symop library`);\r\n        return matrixDict;\r\n    }\r\n    const symopList = [];\r\n    for (let i = 0, il = encodedSymopList.length; i < il; i += 3) {\r\n        const symop = [];\r\n        for (let j = 0; j < 3; ++j) {\r\n            symop.push(SymOpCode[encodedSymopList[i + j]]);\r\n        }\r\n        symopList.push(symop);\r\n    }\r\n    symopList.forEach(function (symop) {\r\n        let row = 0;\r\n        const matrix = new Matrix4().set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1);\r\n        const me = matrix.elements;\r\n        matrixDict[symop.toString()] = matrix;\r\n        symop.forEach(function (elm) {\r\n            let negate = false;\r\n            let denominator = false;\r\n            for (let i = 0, n = elm.length; i < n; ++i) {\r\n                const c = elm[i];\r\n                if (c === '-') {\r\n                    negate = true;\r\n                }\r\n                else if (c === '+') {\r\n                    negate = false;\r\n                }\r\n                else if (c === '/') {\r\n                    denominator = true;\r\n                }\r\n                else if (c === 'X') {\r\n                    me[0 + row] = negate ? -1 : 1;\r\n                }\r\n                else if (c === 'Y') {\r\n                    me[4 + row] = negate ? -1 : 1;\r\n                }\r\n                else if (c === 'Z') {\r\n                    me[8 + row] = negate ? -1 : 1;\r\n                }\r\n                else if (reInteger.test(c)) {\r\n                    const integer = parseInt(c);\r\n                    if (denominator) {\r\n                        me[12 + row] /= integer;\r\n                    }\r\n                    else {\r\n                        me[12 + row] = integer;\r\n                    }\r\n                }\r\n                else {\r\n                    Log.warn(`getSymmetryOperations: unknown token '${c}'`);\r\n                }\r\n            }\r\n            row += 1;\r\n        });\r\n    });\r\n    return matrixDict;\r\n}\r\n//# sourceMappingURL=symmetry-utils.js.map","/**\r\n * @file Assembly\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4, Box3, Vector3 } from 'three';\r\nimport { uniqueArray } from '../utils';\r\nimport Selection from '../selection/selection';\r\nfunction selectionFromChains(chainList) {\r\n    let sele = '';\r\n    if (chainList.length > 0) {\r\n        sele = ':' + uniqueArray(chainList).join(' OR :');\r\n    }\r\n    return new Selection(sele);\r\n}\r\n/**\r\n * Assembly of transformed parts of a {@link Structure}\r\n */\r\nclass Assembly {\r\n    /**\r\n     * @param {String} name - assembly name\r\n     */\r\n    constructor(name = '') {\r\n        this.name = name;\r\n        this.partList = [];\r\n    }\r\n    get type() { return 'Assembly'; }\r\n    /**\r\n     * Add transformed parts to the assembly\r\n     * @example\r\n     * var m1 = new NGL.Matrix4().set( ... );\r\n     * var m2 = new NGL.Matrix4().set( ... );\r\n     * var assembly = new NGL.Assembly( \"myAssembly\" );\r\n     * // add part that transforms chain 'A' and 'B' using matrices `m1` and `m2`\r\n     * assembly.addPart( [ m1, m2 ], [ \"A\", \"B\" ] )\r\n     *\r\n     * @param {Matrix4[]} matrixList - array of 4x4 transformation matrices\r\n     * @param {String[]} chainList - array of chain names\r\n     * @return {AssemblyPart} the added assembly part\r\n     */\r\n    addPart(matrixList, chainList) {\r\n        const part = new AssemblyPart(matrixList, chainList);\r\n        this.partList.push(part);\r\n        return part;\r\n    }\r\n    /**\r\n     * Get the number of atom for a given structure\r\n     * @param  {Structure} structure - the given structure\r\n     * @return {Integer} number of atoms in the assembly\r\n     */\r\n    getAtomCount(structure) {\r\n        return this.partList.reduce((count, part) => count + part.getAtomCount(structure), 0);\r\n    }\r\n    /**\r\n     * Get the number of residues for a given structure\r\n     * @param  {Structure} structure - the given structure\r\n     * @return {Integer} number of residues in the assembly\r\n     */\r\n    getResidueCount(structure) {\r\n        return this.partList.reduce((count, part) => count + part.getResidueCount(structure), 0);\r\n    }\r\n    /**\r\n     * Get number of instances the assembly will produce, i.e.\r\n     * the number of transformations performed by the assembly\r\n     * @return {Integer} number of instances\r\n     */\r\n    getInstanceCount() {\r\n        let instanceCount = 0;\r\n        this.partList.forEach(function (part) {\r\n            instanceCount += part.matrixList.length;\r\n        });\r\n        return instanceCount;\r\n    }\r\n    /**\r\n     * Determine if the assembly is the full and untransformed structure\r\n     * @param  {Structure}  structure - the given structure\r\n     * @return {Boolean} whether the assembly is identical to the structure\r\n     */\r\n    isIdentity(structure) {\r\n        if (this.partList.length !== 1)\r\n            return false;\r\n        const part = this.partList[0];\r\n        if (part.matrixList.length !== 1)\r\n            return false;\r\n        const identityMatrix = new Matrix4();\r\n        if (!identityMatrix.equals(part.matrixList[0]))\r\n            return false;\r\n        let structureChainList = [];\r\n        structure.eachChain(function (cp) {\r\n            structureChainList.push(cp.chainname);\r\n        });\r\n        structureChainList = uniqueArray(structureChainList);\r\n        if (part.chainList.length !== structureChainList.length)\r\n            return false;\r\n        return true;\r\n    }\r\n    getBoundingBox(structure) {\r\n        const boundingBox = new Box3();\r\n        this.partList.forEach(function (part) {\r\n            const partBox = part.getBoundingBox(structure);\r\n            boundingBox.expandByPoint(partBox.min);\r\n            boundingBox.expandByPoint(partBox.max);\r\n        });\r\n        return boundingBox;\r\n    }\r\n    getCenter(structure) {\r\n        return this.getBoundingBox(structure).getCenter(new Vector3());\r\n    }\r\n    getSelection() {\r\n        let chainList = [];\r\n        this.partList.forEach(function (part) {\r\n            chainList = chainList.concat(part.chainList);\r\n        });\r\n        return selectionFromChains(chainList);\r\n    }\r\n}\r\nexport class AssemblyPart {\r\n    constructor(matrixList = [], chainList = []) {\r\n        this.matrixList = matrixList;\r\n        this.chainList = chainList;\r\n    }\r\n    get type() { return 'AssemblyPart'; }\r\n    _getCount(structure, propertyName) {\r\n        let count = 0;\r\n        structure.eachChain(cp => {\r\n            if (this.chainList.length === 0 || this.chainList.includes(cp.chainname)) {\r\n                count += cp[propertyName];\r\n            }\r\n        });\r\n        return this.matrixList.length * count;\r\n    }\r\n    getAtomCount(structure) {\r\n        return this._getCount(structure, 'atomCount');\r\n    }\r\n    getResidueCount(structure) {\r\n        return this._getCount(structure, 'residueCount');\r\n    }\r\n    getBoundingBox(structure) {\r\n        const partBox = new Box3();\r\n        const instanceBox = new Box3();\r\n        const selection = this.getSelection();\r\n        const structureBox = structure.getBoundingBox(selection);\r\n        this.matrixList.forEach(function (matrix) {\r\n            instanceBox.copy(structureBox).applyMatrix4(matrix);\r\n            partBox.expandByPoint(instanceBox.min);\r\n            partBox.expandByPoint(instanceBox.max);\r\n        });\r\n        return partBox;\r\n    }\r\n    getSelection() {\r\n        return selectionFromChains(this.chainList);\r\n    }\r\n    getView(structure) {\r\n        const selection = this.getSelection();\r\n        if (selection) {\r\n            return structure.getView(selection);\r\n        }\r\n        else {\r\n            return structure;\r\n        }\r\n    }\r\n    getInstanceList() {\r\n        const instanceList = [];\r\n        for (let j = 0, jl = this.matrixList.length; j < jl; ++j) {\r\n            instanceList.push({\r\n                id: j + 1,\r\n                name: j,\r\n                matrix: this.matrixList[j]\r\n            });\r\n        }\r\n        return instanceList;\r\n    }\r\n}\r\nexport default Assembly;\r\n//# sourceMappingURL=assembly.js.map","/**\r\n * @file Structure Builder\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nclass StructureBuilder {\r\n    constructor(structure) {\r\n        this.structure = structure;\r\n        this.currentModelindex = null;\r\n        this.currentChainid = null;\r\n        this.currentResname = null;\r\n        this.currentResno = null;\r\n        this.currentInscode = undefined;\r\n        this.currentHetero = null;\r\n        this.previousResname = '';\r\n        this.previousHetero = null;\r\n        this.ai = -1;\r\n        this.ri = -1;\r\n        this.ci = -1;\r\n        this.mi = -1;\r\n    }\r\n    addResidueType(ri) {\r\n        const atomStore = this.structure.atomStore;\r\n        const residueStore = this.structure.residueStore;\r\n        const residueMap = this.structure.residueMap;\r\n        const count = residueStore.atomCount[ri];\r\n        const offset = residueStore.atomOffset[ri];\r\n        const atomTypeIdList = new Array(count);\r\n        for (let i = 0; i < count; ++i) {\r\n            atomTypeIdList[i] = atomStore.atomTypeId[offset + i];\r\n        }\r\n        residueStore.residueTypeId[ri] = residueMap.add(this.previousResname, atomTypeIdList, this.previousHetero // TODO\r\n        );\r\n    }\r\n    addAtom(modelindex, chainname, chainid, resname, resno, hetero, sstruc, inscode) {\r\n        const atomStore = this.structure.atomStore;\r\n        const residueStore = this.structure.residueStore;\r\n        const chainStore = this.structure.chainStore;\r\n        const modelStore = this.structure.modelStore;\r\n        let addModel = false;\r\n        let addChain = false;\r\n        let addResidue = false;\r\n        if (this.currentModelindex !== modelindex) {\r\n            addModel = true;\r\n            addChain = true;\r\n            addResidue = true;\r\n            this.mi += 1;\r\n            this.ci += 1;\r\n            this.ri += 1;\r\n        }\r\n        else if (this.currentChainid !== chainid) {\r\n            addChain = true;\r\n            addResidue = true;\r\n            this.ci += 1;\r\n            this.ri += 1;\r\n        }\r\n        else if (this.currentResno !== resno || this.currentResname !== resname || this.currentInscode !== inscode) {\r\n            addResidue = true;\r\n            this.ri += 1;\r\n        }\r\n        this.ai += 1;\r\n        if (addModel) {\r\n            modelStore.growIfFull();\r\n            modelStore.chainOffset[this.mi] = this.ci;\r\n            modelStore.chainCount[this.mi] = 0;\r\n            modelStore.count += 1;\r\n            chainStore.modelIndex[this.ci] = this.mi;\r\n        }\r\n        if (addChain) {\r\n            chainStore.growIfFull();\r\n            chainStore.setChainname(this.ci, chainname);\r\n            chainStore.setChainid(this.ci, chainid);\r\n            chainStore.residueOffset[this.ci] = this.ri;\r\n            chainStore.residueCount[this.ci] = 0;\r\n            chainStore.count += 1;\r\n            chainStore.modelIndex[this.ci] = this.mi;\r\n            modelStore.chainCount[this.mi] += 1;\r\n            residueStore.chainIndex[this.ri] = this.ci;\r\n        }\r\n        if (addResidue) {\r\n            this.previousResname = this.currentResname;\r\n            this.previousHetero = this.currentHetero;\r\n            if (this.ri > 0)\r\n                this.addResidueType(this.ri - 1);\r\n            residueStore.growIfFull();\r\n            residueStore.resno[this.ri] = resno;\r\n            if (sstruc !== undefined) {\r\n                residueStore.sstruc[this.ri] = sstruc.charCodeAt(0);\r\n            }\r\n            if (inscode !== undefined) {\r\n                residueStore.inscode[this.ri] = inscode.charCodeAt(0);\r\n            }\r\n            residueStore.atomOffset[this.ri] = this.ai;\r\n            residueStore.atomCount[this.ri] = 0;\r\n            residueStore.count += 1;\r\n            residueStore.chainIndex[this.ri] = this.ci;\r\n            chainStore.residueCount[this.ci] += 1;\r\n        }\r\n        atomStore.count += 1;\r\n        atomStore.residueIndex[this.ai] = this.ri;\r\n        residueStore.atomCount[this.ri] += 1;\r\n        this.currentModelindex = modelindex;\r\n        this.currentChainid = chainid;\r\n        this.currentResname = resname;\r\n        this.currentResno = resno;\r\n        this.currentInscode = inscode;\r\n        this.currentHetero = hetero;\r\n    }\r\n    finalize() {\r\n        this.previousResname = this.currentResname;\r\n        this.previousHetero = this.currentHetero;\r\n        if (this.ri > -1)\r\n            this.addResidueType(this.ri);\r\n    }\r\n}\r\nexport default StructureBuilder;\r\n//# sourceMappingURL=structure-builder.js.map","/**\r\n * @file Structure Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Matrix4 } from 'three';\r\nimport { Debug, Log } from '../globals';\r\nimport { binarySearchIndexOf } from '../utils';\r\nimport Helixbundle from '../geometry/helixbundle';\r\nimport Kdtree from '../geometry/kdtree';\r\nimport { getSymmetryOperations } from '../symmetry/symmetry-utils';\r\nimport Assembly from '../symmetry/assembly';\r\nimport Structure from '../structure/structure';\r\nimport StructureBuilder from '../structure/structure-builder.js';\r\nimport { UnknownBackboneType, AA3, Bases } from './structure-constants';\r\nexport function reorderAtoms(structure) {\r\n    if (Debug)\r\n        Log.time('reorderAtoms');\r\n    var ap1 = structure.getAtomProxy();\r\n    var ap2 = structure.getAtomProxy();\r\n    function compareModelChainResno(index1, index2) {\r\n        ap1.index = index1;\r\n        ap2.index = index2;\r\n        if (ap1.modelIndex < ap2.modelIndex) {\r\n            return -1;\r\n        }\r\n        else if (ap1.modelIndex > ap2.modelIndex) {\r\n            return 1;\r\n        }\r\n        else {\r\n            if (ap1.chainname < ap2.chainname) {\r\n                return -1;\r\n            }\r\n            else if (ap1.chainname > ap2.chainname) {\r\n                return 1;\r\n            }\r\n            else {\r\n                if (ap1.resno < ap2.resno) {\r\n                    return -1;\r\n                }\r\n                else if (ap1.resno > ap2.resno) {\r\n                    return 1;\r\n                }\r\n                else {\r\n                    return 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    structure.atomStore.sort(compareModelChainResno);\r\n    if (Debug)\r\n        Log.timeEnd('reorderAtoms');\r\n}\r\nexport function assignSecondaryStructure(structure, secStruct) {\r\n    if (!secStruct)\r\n        return;\r\n    if (Debug)\r\n        Log.time('assignSecondaryStructure');\r\n    const chainnames = [];\r\n    structure.eachModel(function (mp) {\r\n        mp.eachChain(function (cp) {\r\n            chainnames.push(cp.chainname);\r\n        });\r\n    });\r\n    const chainnamesSorted = chainnames.slice().sort();\r\n    const chainnamesIndex = [];\r\n    chainnamesSorted.forEach(function (c) {\r\n        chainnamesIndex.push(chainnames.indexOf(c));\r\n    });\r\n    // helix assignment\r\n    const helices = secStruct.helices.filter(function (h) {\r\n        return binarySearchIndexOf(chainnamesSorted, h[0]) >= 0;\r\n    });\r\n    helices.sort(function (h1, h2) {\r\n        const c1 = h1[0];\r\n        const c2 = h2[0];\r\n        const r1 = h1[1];\r\n        const r2 = h2[1];\r\n        if (c1 === c2) {\r\n            if (r1 === r2) {\r\n                return 0;\r\n            }\r\n            else {\r\n                return r1 < r2 ? -1 : 1;\r\n            }\r\n        }\r\n        else {\r\n            const idx1 = binarySearchIndexOf(chainnamesSorted, c1);\r\n            const idx2 = binarySearchIndexOf(chainnamesSorted, c2);\r\n            return chainnamesIndex[idx1] < chainnamesIndex[idx2] ? -1 : 1;\r\n        }\r\n    });\r\n    const residueStore = structure.residueStore;\r\n    structure.eachModel(function (mp) {\r\n        let i = 0;\r\n        const n = helices.length;\r\n        if (n === 0)\r\n            return;\r\n        let helix = helices[i];\r\n        let helixRun = false;\r\n        let done = false;\r\n        mp.eachChain(function (cp) {\r\n            let chainChange = false;\r\n            if (cp.chainname === helix[0]) {\r\n                const count = cp.residueCount;\r\n                const offset = cp.residueOffset;\r\n                const end = offset + count;\r\n                for (let j = offset; j < end; ++j) {\r\n                    if (residueStore.resno[j] === helix[1] && // resnoBeg\r\n                        residueStore.getInscode(j) === helix[2] // inscodeBeg\r\n                    ) {\r\n                        helixRun = true;\r\n                    }\r\n                    if (helixRun) {\r\n                        residueStore.sstruc[j] = helix[6];\r\n                        if (residueStore.resno[j] === helix[4] && // resnoEnd\r\n                            residueStore.getInscode(j) === helix[5] // inscodeEnd\r\n                        ) {\r\n                            helixRun = false;\r\n                            i += 1;\r\n                            if (i < n) {\r\n                                // must look at previous residues as\r\n                                // residues may not be ordered by resno\r\n                                j = offset - 1;\r\n                                helix = helices[i];\r\n                                chainChange = cp.chainname !== helix[0];\r\n                            }\r\n                            else {\r\n                                done = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (chainChange || done)\r\n                        return;\r\n                }\r\n            }\r\n        });\r\n    });\r\n    // sheet assignment\r\n    const sheets = secStruct.sheets.filter(function (s) {\r\n        return binarySearchIndexOf(chainnamesSorted, s[0]) >= 0;\r\n    });\r\n    sheets.sort(function (s1, s2) {\r\n        const c1 = s1[0];\r\n        const c2 = s2[0];\r\n        if (c1 === c2)\r\n            return 0;\r\n        const idx1 = binarySearchIndexOf(chainnamesSorted, c1);\r\n        const idx2 = binarySearchIndexOf(chainnamesSorted, c2);\r\n        return chainnamesIndex[idx1] < chainnamesIndex[idx2] ? -1 : 1;\r\n    });\r\n    const strandCharCode = 'e'.charCodeAt(0);\r\n    structure.eachModel(function (mp) {\r\n        let i = 0;\r\n        const n = sheets.length;\r\n        if (n === 0)\r\n            return;\r\n        let sheet = sheets[i];\r\n        let sheetRun = false;\r\n        let done = false;\r\n        mp.eachChain(function (cp) {\r\n            let chainChange = false;\r\n            if (cp.chainname === sheet[0]) {\r\n                const count = cp.residueCount;\r\n                const offset = cp.residueOffset;\r\n                const end = offset + count;\r\n                for (let j = offset; j < end; ++j) {\r\n                    if (residueStore.resno[j] === sheet[1] && // resnoBeg\r\n                        residueStore.getInscode(j) === sheet[2] // inscodeBeg\r\n                    ) {\r\n                        sheetRun = true;\r\n                    }\r\n                    if (sheetRun) {\r\n                        residueStore.sstruc[j] = strandCharCode;\r\n                        if (residueStore.resno[j] === sheet[4] && // resnoEnd\r\n                            residueStore.getInscode(j) === sheet[5] // inscodeEnd\r\n                        ) {\r\n                            sheetRun = false;\r\n                            i += 1;\r\n                            if (i < n) {\r\n                                // must look at previous residues as\r\n                                // residues may not be ordered by resno\r\n                                j = offset - 1;\r\n                                sheet = sheets[i];\r\n                                chainChange = cp.chainname !== sheet[0];\r\n                            }\r\n                            else {\r\n                                done = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (chainChange || done)\r\n                        return;\r\n                }\r\n            }\r\n        });\r\n    });\r\n    if (Debug)\r\n        Log.timeEnd('assignSecondaryStructure');\r\n}\r\nexport const calculateSecondaryStructure = (function () {\r\n    // Implementation for proteins based on \"pv\"\r\n    //\r\n    // assigns secondary structure information based on a simple and very fast\r\n    // algorithm published by Zhang and Skolnick in their TM-align paper.\r\n    // Reference:\r\n    //\r\n    // TM-align: a protein structure alignment algorithm based on the Tm-score\r\n    // (2005) NAR, 33(7) 2302-2309\r\n    const zhangSkolnickSS = function (polymer, i, distances, delta) {\r\n        const structure = polymer.structure;\r\n        const offset = polymer.residueIndexStart;\r\n        const rp1 = structure.getResidueProxy();\r\n        const rp2 = structure.getResidueProxy();\r\n        const ap1 = structure.getAtomProxy();\r\n        const ap2 = structure.getAtomProxy();\r\n        for (let j = Math.max(0, i - 2); j <= i; ++j) {\r\n            for (let k = 2; k < 5; ++k) {\r\n                if (j + k >= polymer.residueCount) {\r\n                    continue;\r\n                }\r\n                rp1.index = offset + j;\r\n                rp2.index = offset + j + k;\r\n                ap1.index = rp1.traceAtomIndex;\r\n                ap2.index = rp2.traceAtomIndex;\r\n                const d = ap1.distanceTo(ap2);\r\n                if (Math.abs(d - distances[k - 2]) > delta) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    const isHelical = function (polymer, i) {\r\n        const helixDistances = [5.45, 5.18, 6.37];\r\n        const helixDelta = 2.1;\r\n        return zhangSkolnickSS(polymer, i, helixDistances, helixDelta);\r\n    };\r\n    const isSheet = function (polymer, i) {\r\n        const sheetDistances = [6.1, 10.4, 13.0];\r\n        const sheetDelta = 1.42;\r\n        return zhangSkolnickSS(polymer, i, sheetDistances, sheetDelta);\r\n    };\r\n    const proteinPolymer = function (p) {\r\n        const residueStore = p.residueStore;\r\n        const offset = p.residueIndexStart;\r\n        for (let i = 0, il = p.residueCount; i < il; ++i) {\r\n            let sstruc = 'c';\r\n            if (isHelical(p, i)) {\r\n                sstruc = 'h';\r\n            }\r\n            else if (isSheet(p, i)) {\r\n                sstruc = 'e';\r\n            }\r\n            residueStore.sstruc[offset + i] = sstruc.charCodeAt(0);\r\n        }\r\n    };\r\n    const cgPolymer = function (p) {\r\n        const localAngle = 20;\r\n        const centerDist = 2.0;\r\n        const residueStore = p.residueStore;\r\n        const offset = p.residueIndexStart;\r\n        const helixbundle = new Helixbundle(p);\r\n        const pos = helixbundle.position;\r\n        const c1 = new Vector3();\r\n        const c2 = new Vector3();\r\n        for (let i = 0, il = p.residueCount; i < il; ++i) {\r\n            c1.fromArray(pos.center, i * 3); // TODO\r\n            c2.fromArray(pos.center, i * 3 + 3); // TODO\r\n            const d = c1.distanceTo(c2);\r\n            if (d < centerDist && d > 1.0 && pos.bending[i] < localAngle) {\r\n                residueStore.sstruc[offset + i] = 'h'.charCodeAt(0);\r\n                residueStore.sstruc[offset + i + 1] = 'h'.charCodeAt(0);\r\n            }\r\n        }\r\n    };\r\n    return function calculateSecondaryStructure(structure) {\r\n        if (Debug)\r\n            Log.time('calculateSecondaryStructure');\r\n        structure.eachPolymer(function (p) {\r\n            // assign secondary structure\r\n            if (p.residueCount < 4)\r\n                return;\r\n            if (p.isCg()) {\r\n                cgPolymer(p);\r\n            }\r\n            else if (p.isProtein()) {\r\n                proteinPolymer(p);\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n            // set lone secondary structure assignments to \"c\"\r\n            let prevSstruc;\r\n            let sstrucCount = 0;\r\n            p.eachResidue(function (r) {\r\n                if (r.sstruc === prevSstruc) {\r\n                    sstrucCount += 1;\r\n                }\r\n                else {\r\n                    if (sstrucCount === 1) {\r\n                        r.index -= 1;\r\n                        r.sstruc = 'c';\r\n                    }\r\n                    sstrucCount = 1;\r\n                    prevSstruc = r.sstruc;\r\n                }\r\n            });\r\n        });\r\n        if (Debug)\r\n            Log.timeEnd('calculateSecondaryStructure');\r\n    };\r\n}());\r\n// const ChainnameAlphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\" +\r\n//                           \"abcdefghijklmnopqrstuvwxyz\" +\r\n//                           \"0123456789\";\r\nconst ChainnameAlphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\nexport function getChainname(index) {\r\n    const n = ChainnameAlphabet.length;\r\n    let j = index;\r\n    let k = 0;\r\n    let chainname = ChainnameAlphabet[j % n];\r\n    while (j >= n) {\r\n        j = Math.floor(j / n);\r\n        chainname += ChainnameAlphabet[j % n];\r\n        k += 1;\r\n    }\r\n    if (k >= 5) {\r\n        Log.warn('chainname overflow');\r\n    }\r\n    return chainname;\r\n}\r\nexport function calculateChainnames(structure, useExistingBonds = false) {\r\n    if (Debug)\r\n        Log.time('calculateChainnames');\r\n    let doAutoChainName = true;\r\n    structure.eachChain(function (c) {\r\n        if (c.chainname)\r\n            doAutoChainName = false;\r\n    });\r\n    if (doAutoChainName) {\r\n        const modelStore = structure.modelStore;\r\n        const chainStore = structure.chainStore;\r\n        const residueStore = structure.residueStore;\r\n        const addChain = function (mIndex, chainname, rOffset, rCount) {\r\n            const ci = chainStore.count;\r\n            for (let i = 0; i < rCount; ++i) {\r\n                residueStore.chainIndex[rOffset + i] = ci;\r\n            }\r\n            chainStore.growIfFull();\r\n            chainStore.modelIndex[ci] = mIndex;\r\n            chainStore.setChainname(ci, chainname);\r\n            chainStore.setChainid(ci, chainname);\r\n            chainStore.residueOffset[ci] = rOffset;\r\n            chainStore.residueCount[ci] = rCount;\r\n            chainStore.count += 1;\r\n            modelStore.chainCount[mIndex] += 1;\r\n        };\r\n        const ap1 = structure.getAtomProxy();\r\n        const ap2 = structure.getAtomProxy();\r\n        let i = 0;\r\n        let mi = 0;\r\n        let rStart = 0;\r\n        let rEnd = 0;\r\n        const chainData = [];\r\n        if (residueStore.count === 1) {\r\n            chainData.push({\r\n                mIndex: 0,\r\n                chainname: 'A',\r\n                rStart: 0,\r\n                rCount: 1\r\n            });\r\n        }\r\n        else {\r\n            structure.eachResidueN(2, function (rp1, rp2) {\r\n                let newChain = false;\r\n                const bbType1 = rp1.backboneType;\r\n                const bbType2 = rp2.backboneType;\r\n                const bbTypeUnk = UnknownBackboneType;\r\n                rEnd = rp1.index;\r\n                if (rp1.modelIndex !== rp2.modelIndex) {\r\n                    newChain = true;\r\n                }\r\n                else if (rp1.moleculeType !== rp2.moleculeType) {\r\n                    newChain = true;\r\n                }\r\n                else if (bbType1 !== bbTypeUnk && bbType1 === bbType2) {\r\n                    ap1.index = rp1.backboneEndAtomIndex;\r\n                    ap2.index = rp2.backboneStartAtomIndex;\r\n                    if (useExistingBonds) {\r\n                        newChain = !ap1.hasBondTo(ap2);\r\n                    }\r\n                    else {\r\n                        newChain = !ap1.connectedTo(ap2);\r\n                    }\r\n                }\r\n                // current chain goes to end of the structure\r\n                if (!newChain && rp2.index === residueStore.count - 1) {\r\n                    newChain = true;\r\n                    rEnd = rp2.index;\r\n                }\r\n                if (newChain) {\r\n                    chainData.push({\r\n                        mIndex: mi,\r\n                        chainname: getChainname(i),\r\n                        rStart: rStart,\r\n                        rCount: rEnd - rStart + 1\r\n                    });\r\n                    i += 1;\r\n                    if (rp1.modelIndex !== rp2.modelIndex) {\r\n                        i = 0;\r\n                        mi += 1;\r\n                    }\r\n                    // new chain for the last residue of the structure\r\n                    if (rp2.index === residueStore.count - 1 && rEnd !== rp2.index) {\r\n                        chainData.push({\r\n                            mIndex: mi,\r\n                            chainname: getChainname(i),\r\n                            rStart: residueStore.count - 1,\r\n                            rCount: 1\r\n                        });\r\n                    }\r\n                    rStart = rp2.index;\r\n                    rEnd = rp2.index;\r\n                }\r\n            });\r\n        }\r\n        //\r\n        chainStore.count = 0;\r\n        chainData.forEach(function (d) {\r\n            addChain(d.mIndex, d.chainname, d.rStart, d.rCount);\r\n        });\r\n        let chainOffset = 0;\r\n        structure.eachModel(function (mp) {\r\n            modelStore.chainOffset[mp.index] = chainOffset;\r\n            modelStore.chainCount[mp.index] -= 1;\r\n            chainOffset += modelStore.chainCount[mp.index];\r\n        });\r\n    }\r\n    if (Debug)\r\n        Log.timeEnd('calculateChainnames');\r\n}\r\nexport function calculateBonds(structure) {\r\n    if (Debug)\r\n        Log.time('calculateBonds');\r\n    calculateBondsWithin(structure);\r\n    calculateBondsBetween(structure);\r\n    if (Debug)\r\n        Log.timeEnd('calculateBonds');\r\n}\r\nconst BondOrderTable = {\r\n    'HIS|CD2|CG': 2,\r\n    'HIS|CE1|ND1': 2,\r\n    'ARG|CZ|NH2': 2,\r\n    'PHE|CE1|CZ': 2,\r\n    'PHE|CD2|CE2': 2,\r\n    'PHE|CD1|CG': 2,\r\n    'TRP|CD1|CG': 2,\r\n    'TRP|CD2|CE2': 2,\r\n    'TRP|CE3|CZ3': 2,\r\n    'TRP|CH2|CZ2': 2,\r\n    'ASN|CG|OD1': 2,\r\n    'GLN|CD|OE1': 2,\r\n    'TYR|CD1|CG': 2,\r\n    'TYR|CD2|CE2': 2,\r\n    'TYR|CE1|CZ': 2,\r\n    'ASP|CG|OD1': 2,\r\n    'GLU|CD|OE1': 2,\r\n    'G|C8|N7': 2,\r\n    'G|C4|C5': 2,\r\n    'G|C2|N3': 2,\r\n    'G|C6|O6': 2,\r\n    'C|C4|N3': 2,\r\n    'C|C5|C6': 2,\r\n    'C|C2|O2': 2,\r\n    'A|C2|N3': 2,\r\n    'A|C6|N1': 2,\r\n    'A|C4|C5': 2,\r\n    'A|C8|N7': 2,\r\n    'U|C5|C6': 2,\r\n    'U|C2|O2': 2,\r\n    'U|C4|O4': 2,\r\n    'DG|C8|N7': 2,\r\n    'DG|C4|C5': 2,\r\n    'DG|C2|N3': 2,\r\n    'DG|C6|O6': 2,\r\n    'DC|C4|N3': 2,\r\n    'DC|C5|C6': 2,\r\n    'DC|C2|O2': 2,\r\n    'DA|C2|N3': 2,\r\n    'DA|C6|N1': 2,\r\n    'DA|C4|C5': 2,\r\n    'DA|C8|N7': 2,\r\n    'DT|C5|C6': 2,\r\n    'DT|C2|O2': 2,\r\n    'DT|C4|O4': 2\r\n};\r\nfunction getBondOrderFromTable(resname, atomname1, atomname2) {\r\n    [atomname1, atomname2] = atomname1 < atomname2 ? [atomname1, atomname2] : [atomname2, atomname1];\r\n    if (AA3.includes(resname) && atomname1 === 'C' && atomname2 === 'O')\r\n        return 2;\r\n    if (Bases.includes(resname) && atomname1 === 'OP1' && atomname2 === 'P')\r\n        return 2;\r\n    return BondOrderTable[`${resname}|${atomname1}|${atomname2}`] || 1;\r\n}\r\nexport function calculateResidueBonds(r) {\r\n    const structure = r.structure;\r\n    const a1 = structure.getAtomProxy();\r\n    const a2 = structure.getAtomProxy();\r\n    const count = r.atomCount;\r\n    const offset = r.atomOffset;\r\n    const end = offset + count;\r\n    const end1 = end - 1;\r\n    const atomIndices1 = [];\r\n    const atomIndices2 = [];\r\n    const bondOrders = [];\r\n    if (count > 500) {\r\n        if (Debug)\r\n            Log.warn('more than 500 atoms, skip residue for auto-bonding', r.qualifiedName());\r\n    }\r\n    else {\r\n        if (count > 50) {\r\n            const kdtree = new Kdtree(r, true);\r\n            const radius = r.isCg() ? 1.2 : 2.3;\r\n            for (let i = offset; i < end1; ++i) {\r\n                a1.index = i;\r\n                const maxd = a1.covalent + radius + 0.3;\r\n                const nearestAtoms = kdtree.nearest(a1, Infinity, maxd * maxd); // TODO\r\n                const m = nearestAtoms.length;\r\n                for (let j = 0; j < m; ++j) {\r\n                    a2.index = nearestAtoms[j].index;\r\n                    if (a1.index < a2.index) {\r\n                        if (a1.connectedTo(a2)) {\r\n                            atomIndices1.push(a1.index - offset);\r\n                            atomIndices2.push(a2.index - offset);\r\n                            bondOrders.push(getBondOrderFromTable(a1.resname, a1.atomname, a2.atomname));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = offset; i < end1; ++i) {\r\n                a1.index = i;\r\n                for (let j = i + 1; j <= end1; ++j) {\r\n                    a2.index = j;\r\n                    if (a1.connectedTo(a2)) {\r\n                        atomIndices1.push(i - offset);\r\n                        atomIndices2.push(j - offset);\r\n                        bondOrders.push(getBondOrderFromTable(a1.resname, a1.atomname, a2.atomname));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        atomIndices1: atomIndices1,\r\n        atomIndices2: atomIndices2,\r\n        bondOrders: bondOrders\r\n    };\r\n}\r\nexport function calculateAtomBondMap(structure) {\r\n    if (Debug)\r\n        Log.time('calculateAtomBondMap');\r\n    var atomBondMap = [];\r\n    structure.eachBond(function (bp) {\r\n        var ai1 = bp.atomIndex1;\r\n        var ai2 = bp.atomIndex2;\r\n        if (atomBondMap[ai1] === undefined)\r\n            atomBondMap[ai1] = [];\r\n        atomBondMap[ai1][ai2] = bp.index;\r\n    });\r\n    if (Debug)\r\n        Log.timeEnd('calculateAtomBondMap');\r\n    return atomBondMap;\r\n}\r\nexport function calculateBondsWithin(structure, onlyAddRung = false) {\r\n    if (Debug)\r\n        Log.time('calculateBondsWithin');\r\n    const bondStore = structure.bondStore;\r\n    const rungBondStore = structure.rungBondStore;\r\n    const rungAtomSet = structure.getAtomSet(false);\r\n    const a1 = structure.getAtomProxy();\r\n    const a2 = structure.getAtomProxy();\r\n    const bp = structure.getBondProxy();\r\n    const atomBondMap = onlyAddRung ? null : calculateAtomBondMap(structure);\r\n    structure.eachResidue(function (r) {\r\n        if (!onlyAddRung && atomBondMap) {\r\n            const count = r.atomCount;\r\n            const offset = r.atomOffset;\r\n            if (count > 500) {\r\n                Log.warn('more than 500 atoms, skip residue for auto-bonding', r.qualifiedName());\r\n                return;\r\n            }\r\n            const bonds = r.getBonds();\r\n            const atomIndices1 = bonds.atomIndices1;\r\n            const atomIndices2 = bonds.atomIndices2;\r\n            const bondOrders = bonds.bondOrders;\r\n            const nn = atomIndices1.length;\r\n            for (let i = 0; i < nn; ++i) {\r\n                const rai1 = atomIndices1[i];\r\n                const rai2 = atomIndices2[i];\r\n                const ai1 = rai1 + offset;\r\n                const ai2 = rai2 + offset;\r\n                const tmp = atomBondMap[ai1];\r\n                if (tmp !== undefined && tmp[ai2] !== undefined) {\r\n                    bp.index = tmp[ai2];\r\n                    const residueTypeBondIndex = r.residueType.getBondIndex(rai1, rai2); // TODO\r\n                    // overwrite residueType bondOrder with value from existing bond\r\n                    bondOrders[residueTypeBondIndex] = bp.bondOrder;\r\n                }\r\n                else {\r\n                    a1.index = ai1;\r\n                    a2.index = ai2;\r\n                    // only add bond if not already in bondStore\r\n                    bondStore.addBond(a1, a2, bondOrders[i]);\r\n                }\r\n            }\r\n        }\r\n        // get RNA/DNA rung pseudo bonds\r\n        const traceAtomIndex = r.residueType.traceAtomIndex;\r\n        const rungEndAtomIndex = r.residueType.rungEndAtomIndex;\r\n        if (traceAtomIndex !== -1 && rungEndAtomIndex !== -1) {\r\n            a1.index = r.traceAtomIndex;\r\n            a2.index = r.rungEndAtomIndex;\r\n            rungBondStore.addBond(a1, a2);\r\n            rungAtomSet.set(a1.index);\r\n            rungAtomSet.set(a2.index);\r\n        }\r\n    });\r\n    structure.atomSetDict.rung = rungAtomSet;\r\n    if (Debug)\r\n        Log.timeEnd('calculateBondsWithin');\r\n}\r\nexport function calculateBondsBetween(structure, onlyAddBackbone = false, useExistingBonds = false) {\r\n    if (Debug)\r\n        Log.time('calculateBondsBetween');\r\n    const bondStore = structure.bondStore;\r\n    const backboneBondStore = structure.backboneBondStore;\r\n    const backboneAtomSet = structure.getAtomSet(false);\r\n    const ap1 = structure.getAtomProxy();\r\n    const ap2 = structure.getAtomProxy();\r\n    if (backboneBondStore.count === 0) {\r\n        backboneBondStore.resize(structure.residueStore.count);\r\n    }\r\n    function addBondIfConnected(rp1, rp2) {\r\n        const bbType1 = rp1.backboneType;\r\n        const bbType2 = rp2.backboneType;\r\n        if (bbType1 !== UnknownBackboneType && bbType1 === bbType2) {\r\n            ap1.index = rp1.backboneEndAtomIndex;\r\n            ap2.index = rp2.backboneStartAtomIndex;\r\n            if ((useExistingBonds && ap1.hasBondTo(ap2)) || ap1.connectedTo(ap2)) {\r\n                if (!onlyAddBackbone) {\r\n                    bondStore.addBond(ap1, ap2, 1); // assume single bond\r\n                }\r\n                ap1.index = rp1.traceAtomIndex;\r\n                ap2.index = rp2.traceAtomIndex;\r\n                backboneBondStore.addBond(ap1, ap2);\r\n                backboneAtomSet.set(ap1.index);\r\n                backboneAtomSet.set(ap2.index);\r\n            }\r\n        }\r\n    }\r\n    structure.eachResidueN(2, addBondIfConnected);\r\n    const rp1 = structure.getResidueProxy();\r\n    const rp2 = structure.getResidueProxy();\r\n    // check for cyclic chains\r\n    structure.eachChain(function (cp) {\r\n        if (cp.residueCount === 0)\r\n            return;\r\n        rp1.index = cp.residueOffset;\r\n        rp2.index = cp.residueOffset + cp.residueCount - 1;\r\n        addBondIfConnected(rp2, rp1);\r\n    });\r\n    structure.atomSetDict.backbone = backboneAtomSet;\r\n    if (!onlyAddBackbone) {\r\n        if (Debug)\r\n            Log.time('calculateBondsBetween inter');\r\n        const spatialHash = structure.spatialHash;\r\n        structure.eachResidue(function (rp) {\r\n            if (rp.backboneType === UnknownBackboneType && !rp.isWater()) {\r\n                rp.eachAtom(function (ap) {\r\n                    if (ap.isMetal())\r\n                        return;\r\n                    spatialHash.eachWithin(ap.x, ap.y, ap.z, 4, function (idx) {\r\n                        ap2.index = idx;\r\n                        if (ap.modelIndex === ap2.modelIndex &&\r\n                            ap.residueIndex !== ap2.residueIndex &&\r\n                            !ap2.isMetal()) {\r\n                            bondStore.addBondIfConnected(ap, ap2, 1); // assume single bond\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        });\r\n        if (Debug)\r\n            Log.timeEnd('calculateBondsBetween inter');\r\n    }\r\n    if (Debug)\r\n        Log.timeEnd('calculateBondsBetween');\r\n}\r\nexport function buildUnitcellAssembly(structure) {\r\n    if (!structure.unitcell)\r\n        return;\r\n    if (Debug)\r\n        Log.time('buildUnitcellAssembly');\r\n    const uc = structure.unitcell;\r\n    const structureCenterFrac = structure.center.clone().applyMatrix4(uc.cartToFrac);\r\n    const centerFrac = structureCenterFrac.clone().floor();\r\n    const symopDict = getSymmetryOperations(uc.spacegroup);\r\n    const centerFracSymop = new Vector3();\r\n    const positionFracSymop = new Vector3();\r\n    function getMatrixList(shift) {\r\n        const matrixList = [];\r\n        Object.keys(symopDict).forEach(function (name) {\r\n            const m = symopDict[name].clone();\r\n            centerFracSymop.copy(structureCenterFrac).applyMatrix4(m).floor();\r\n            positionFracSymop.setFromMatrixPosition(m);\r\n            positionFracSymop.sub(centerFracSymop);\r\n            positionFracSymop.add(centerFrac);\r\n            if (shift)\r\n                positionFracSymop.add(shift);\r\n            m.setPosition(positionFracSymop);\r\n            m.multiplyMatrices(uc.fracToCart, m);\r\n            m.multiply(uc.cartToFrac);\r\n            matrixList.push(m);\r\n        });\r\n        return matrixList;\r\n    }\r\n    const unitcellAssembly = new Assembly('UNITCELL');\r\n    const unitcellMatrixList = getMatrixList();\r\n    const ncsMatrixList = [];\r\n    if (structure.biomolDict.NCS) {\r\n        ncsMatrixList.push(new Matrix4(), ...structure.biomolDict.NCS.partList[0].matrixList);\r\n        const ncsUnitcellMatrixList = [];\r\n        unitcellMatrixList.forEach(sm => {\r\n            ncsMatrixList.forEach(nm => {\r\n                ncsUnitcellMatrixList.push(sm.clone().multiply(nm));\r\n            });\r\n        });\r\n        unitcellAssembly.addPart(ncsUnitcellMatrixList);\r\n    }\r\n    else {\r\n        unitcellAssembly.addPart(unitcellMatrixList);\r\n    }\r\n    const vec = new Vector3();\r\n    const supercellAssembly = new Assembly('SUPERCELL');\r\n    const supercellMatrixList = Array.prototype.concat.call(getMatrixList(vec.set(1, 0, 0)), // 655\r\n    getMatrixList(vec.set(0, 1, 0)), // 565\r\n    getMatrixList(vec.set(0, 0, 1)), // 556\r\n    getMatrixList(vec.set(-1, 0, 0)), // 455\r\n    getMatrixList(vec.set(0, -1, 0)), // 545\r\n    getMatrixList(vec.set(0, 0, -1)), // 554\r\n    getMatrixList(vec.set(1, 1, 0)), // 665\r\n    getMatrixList(vec.set(1, 0, 1)), // 656\r\n    getMatrixList(vec.set(0, 1, 1)), // 566\r\n    getMatrixList(vec.set(-1, -1, 0)), // 445\r\n    getMatrixList(vec.set(-1, 0, -1)), // 454\r\n    getMatrixList(vec.set(0, -1, -1)), // 544\r\n    getMatrixList(vec.set(1, -1, -1)), // 644\r\n    getMatrixList(vec.set(1, 1, -1)), // 664\r\n    getMatrixList(vec.set(1, -1, 1)), // 646\r\n    getMatrixList(vec.set(-1, 1, 1)), // 466\r\n    getMatrixList(vec.set(-1, -1, 1)), // 446\r\n    getMatrixList(vec.set(-1, 1, -1)), // 464\r\n    getMatrixList(vec.set(0, 1, -1)), // 564\r\n    getMatrixList(vec.set(0, -1, 1)), // 546\r\n    getMatrixList(vec.set(1, 0, -1)), // 654\r\n    getMatrixList(vec.set(-1, 0, 1)), // 456\r\n    getMatrixList(vec.set(1, -1, 0)), // 645\r\n    getMatrixList(vec.set(-1, 1, 0)), // 465\r\n    getMatrixList(), // 555\r\n    getMatrixList(vec.set(1, 1, 1)), // 666\r\n    getMatrixList(vec.set(-1, -1, -1)) // 444\r\n    );\r\n    if (structure.biomolDict.NCS) {\r\n        const ncsSupercellMatrixList = [];\r\n        supercellMatrixList.forEach(function (sm) {\r\n            ncsMatrixList.forEach(function (nm) {\r\n                ncsSupercellMatrixList.push(sm.clone().multiply(nm));\r\n            });\r\n        });\r\n        supercellAssembly.addPart(ncsSupercellMatrixList);\r\n    }\r\n    else {\r\n        supercellAssembly.addPart(supercellMatrixList);\r\n    }\r\n    structure.biomolDict.UNITCELL = unitcellAssembly;\r\n    structure.biomolDict.SUPERCELL = supercellAssembly;\r\n    if (Debug)\r\n        Log.timeEnd('buildUnitcellAssembly');\r\n}\r\nconst elm1 = ['H', 'C', 'O', 'N', 'S', 'P'];\r\nconst elm2 = ['NA', 'CL', 'FE'];\r\nexport function guessElement(atomName) {\r\n    let at = atomName.trim().toUpperCase();\r\n    if (parseInt(at.charAt(0)))\r\n        at = at.substr(1);\r\n    // parse again to check for a second integer\r\n    if (parseInt(at.charAt(0)))\r\n        at = at.substr(1);\r\n    const n = at.length;\r\n    if (n === 0)\r\n        return '';\r\n    if (n === 1)\r\n        return at;\r\n    if (n === 2) {\r\n        if (elm2.indexOf(at) !== -1)\r\n            return at;\r\n        if (elm1.indexOf(at[0]) !== -1)\r\n            return at[0];\r\n    }\r\n    if (n >= 3) {\r\n        if (elm1.indexOf(at[0]) !== -1)\r\n            return at[0];\r\n    }\r\n    return '';\r\n}\r\n/**\r\n * Assigns ResidueType bonds.\r\n * @param {Structure} structure - the structure object\r\n * @return {undefined}\r\n */\r\nexport function assignResidueTypeBonds(structure) {\r\n    // if( Debug ) Log.time( \"assignResidueTypeBonds\" )\r\n    const bondHash = structure.bondHash; // TODO\r\n    const countArray = bondHash.countArray;\r\n    const offsetArray = bondHash.offsetArray;\r\n    const indexArray = bondHash.indexArray;\r\n    const bp = structure.getBondProxy();\r\n    structure.eachResidue(function (rp) {\r\n        const residueType = rp.residueType;\r\n        if (residueType.bonds !== undefined)\r\n            return;\r\n        var atomOffset = rp.atomOffset;\r\n        var atomIndices1 = [];\r\n        var atomIndices2 = [];\r\n        var bondOrders = [];\r\n        var bondDict = {};\r\n        const nextAtomOffset = atomOffset + rp.atomCount;\r\n        rp.eachAtom(function (ap) {\r\n            const index = ap.index;\r\n            const offset = offsetArray[index];\r\n            const count = countArray[index];\r\n            for (let i = 0, il = count; i < il; ++i) {\r\n                bp.index = indexArray[offset + i];\r\n                let idx1 = bp.atomIndex1;\r\n                if (idx1 < atomOffset || idx1 >= nextAtomOffset) {\r\n                    // Don't add bonds outside of this resiude\r\n                    continue;\r\n                }\r\n                let idx2 = bp.atomIndex2;\r\n                if (idx2 < atomOffset || idx2 >= nextAtomOffset) {\r\n                    continue;\r\n                }\r\n                if (idx1 > idx2) {\r\n                    const tmp = idx2;\r\n                    idx2 = idx1;\r\n                    idx1 = tmp;\r\n                }\r\n                const hash = idx1 + '|' + idx2;\r\n                if (bondDict[hash] === undefined) {\r\n                    bondDict[hash] = true;\r\n                    atomIndices1.push(idx1 - atomOffset);\r\n                    atomIndices2.push(idx2 - atomOffset);\r\n                    bondOrders.push(bp.bondOrder);\r\n                }\r\n            }\r\n        });\r\n        residueType.bonds = {\r\n            atomIndices1: atomIndices1,\r\n            atomIndices2: atomIndices2,\r\n            bondOrders: bondOrders\r\n        };\r\n    });\r\n    // if( Debug ) Log.timeEnd( \"assignResidueTypeBonds\" )\r\n}\r\nexport function concatStructures(name, ...structures) {\r\n    if (Debug)\r\n        Log.time(\"concatStructures\");\r\n    const s = new Structure(name, '');\r\n    const sb = new StructureBuilder(s);\r\n    const atomStore = s.atomStore;\r\n    const atomMap = s.atomMap;\r\n    atomStore.addField('formalCharge', 1, 'int8');\r\n    atomStore.addField('partialCharge', 1, 'float32');\r\n    const atomIndexDict = {};\r\n    let idx = 0;\r\n    let atomCount = 0;\r\n    let modelCount = 0;\r\n    structures.forEach(structure => {\r\n        structure.eachAtom(a => {\r\n            atomStore.growIfFull();\r\n            atomStore.atomTypeId[idx] = atomMap.add(a.atomname, a.element);\r\n            atomStore.x[idx] = a.x;\r\n            atomStore.y[idx] = a.y;\r\n            atomStore.z[idx] = a.z;\r\n            atomStore.serial[idx] = a.serial;\r\n            atomStore.formalCharge[idx] = a.formalCharge;\r\n            atomStore.partialCharge[idx] = a.partialCharge;\r\n            atomStore.altloc[idx] = a.altloc;\r\n            atomStore.occupancy[idx] = a.occupancy;\r\n            atomStore.bfactor[idx] = a.bfactor;\r\n            sb.addAtom(a.modelIndex + modelCount, a.chainname, a.chainid, a.resname, a.resno, a.hetero === 1, a.sstruc, a.inscode);\r\n            atomIndexDict[a.index + atomCount] = idx;\r\n            idx += 1;\r\n        });\r\n        atomCount += structure.atomStore.count;\r\n        modelCount += structure.modelStore.count;\r\n    });\r\n    const bondStore = s.bondStore;\r\n    const a1 = s.getAtomProxy();\r\n    const a2 = s.getAtomProxy();\r\n    atomCount = 0;\r\n    structures.forEach(structure => {\r\n        structure.eachBond(b => {\r\n            a1.index = atomIndexDict[b.atomIndex1 + atomCount];\r\n            a2.index = atomIndexDict[b.atomIndex2 + atomCount];\r\n            bondStore.addBond(a1, a2, b.bondOrder);\r\n        });\r\n        atomCount += structure.atomStore.count;\r\n    });\r\n    sb.finalize();\r\n    calculateBondsBetween(s, true); // calculate backbone bonds\r\n    calculateBondsWithin(s, true); // calculate rung bonds\r\n    s.finalizeAtoms();\r\n    s.finalizeBonds();\r\n    assignResidueTypeBonds(s);\r\n    if (Debug)\r\n        Log.timeEnd(\"concatStructures\");\r\n    return s;\r\n}\r\n//# sourceMappingURL=structure-utils.js.map","/**\r\n * @file Atom Type\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { guessElement } from '../structure/structure-utils';\r\nimport { AtomicNumbers, DefaultAtomicNumber, VdwRadii, DefaultVdwRadius, CovalentRadii, DefaultCovalentRadius, Valences, DefaultValence, OuterShellElectronCounts, DefaultOuterShellElectronCount } from '../structure/structure-constants';\r\n// Li, Na, K, Rb, Cs Fr\r\nconst AlkaliMetals = [3, 11, 19, 37, 55, 87];\r\n// Be, Mg, Ca, Sr, Ba, Ra\r\nconst AlkalineEarthMetals = [4, 12, 20, 38, 56, 88];\r\n// C, P, S, Se\r\nconst PolyatomicNonmetals = [6, 15, 16, 34,];\r\n// H, N, O, F, Cl, Br, I\r\nconst DiatomicNonmetals = [1, 7, 8, 9, 17, 35, 53];\r\n// He, Ne, Ar, Kr, Xe, Rn\r\nconst NobleGases = [2, 10, 18, 36, 54, 86];\r\n// Zn, Ga, Cd, In, Sn, Hg, Ti, Pb, Bi, Po, Cn\r\nconst PostTransitionMetals = [13, 30, 31, 48, 49, 50, 80, 81, 82, 83, 84, 85, 112];\r\n// B, Si, Ge, As, Sb, Te, At\r\nconst Metalloids = [5, 14, 32, 33, 51, 52, 85];\r\n// F, Cl, Br, I, At\r\nconst Halogens = [9, 17, 35, 53, 85];\r\n/**\r\n * Atom type\r\n */\r\nclass AtomType {\r\n    /**\r\n     * @param {Structure} structure - the structure object\r\n     * @param {String} atomname - the name of the atom\r\n     * @param {String} element - the chemical element\r\n     */\r\n    constructor(structure, atomname, element) {\r\n        this.structure = structure;\r\n        this.atomname = atomname;\r\n        element = element || guessElement(atomname);\r\n        this.element = element;\r\n        this.number = AtomicNumbers[element] || DefaultAtomicNumber;\r\n        this.vdw = VdwRadii[this.number] || DefaultVdwRadius;\r\n        this.covalent = CovalentRadii[this.number] || DefaultCovalentRadius;\r\n    }\r\n    getDefaultValence() {\r\n        const vl = Valences[this.number];\r\n        return vl ? vl[0] : DefaultValence;\r\n    }\r\n    getValenceList() {\r\n        return Valences[this.number] || [];\r\n    }\r\n    getOuterShellElectronCount() {\r\n        return OuterShellElectronCounts[this.number] || DefaultOuterShellElectronCount;\r\n    }\r\n    isMetal() {\r\n        return (this.isAlkaliMetal() ||\r\n            this.isAlkalineEarthMetal() ||\r\n            this.isLanthanide() ||\r\n            this.isActinide() ||\r\n            this.isTransitionMetal() ||\r\n            this.isPostTransitionMetal());\r\n    }\r\n    isNonmetal() {\r\n        return (this.isDiatomicNonmetal() ||\r\n            this.isPolyatomicNonmetal() ||\r\n            this.isNobleGas());\r\n    }\r\n    isMetalloid() {\r\n        return Metalloids.includes(this.number);\r\n    }\r\n    isHalogen() {\r\n        return Halogens.includes(this.number);\r\n    }\r\n    isDiatomicNonmetal() {\r\n        return DiatomicNonmetals.includes(this.number);\r\n    }\r\n    isPolyatomicNonmetal() {\r\n        return PolyatomicNonmetals.includes(this.number);\r\n    }\r\n    isAlkaliMetal() {\r\n        return AlkaliMetals.includes(this.number);\r\n    }\r\n    isAlkalineEarthMetal() {\r\n        return AlkalineEarthMetals.includes(this.number);\r\n    }\r\n    isNobleGas() {\r\n        return NobleGases.includes(this.number);\r\n    }\r\n    isTransitionMetal() {\r\n        const no = this.number;\r\n        return ((no >= 21 && no <= 29) ||\r\n            (no >= 39 && no <= 47) ||\r\n            (no >= 72 && no <= 79) ||\r\n            (no >= 104 && no <= 108));\r\n    }\r\n    isPostTransitionMetal() {\r\n        return PostTransitionMetals.includes(this.number);\r\n    }\r\n    isLanthanide() {\r\n        return this.number >= 57 && this.number <= 71;\r\n    }\r\n    isActinide() {\r\n        return this.number >= 89 && this.number <= 103;\r\n    }\r\n}\r\nexport default AtomType;\r\n//# sourceMappingURL=atom-type.js.map","/**\r\n * @file Atom Map\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport AtomType from './atom-type';\r\nimport { guessElement } from '../structure/structure-utils';\r\nfunction getHash(atomname, element) {\r\n    return atomname + '|' + element;\r\n}\r\nclass AtomMap {\r\n    constructor(structure) {\r\n        this.structure = structure;\r\n        this.dict = {};\r\n        this.list = [];\r\n        this.structure = structure;\r\n    }\r\n    add(atomname, element) {\r\n        atomname = atomname.toUpperCase();\r\n        if (!element) {\r\n            element = guessElement(atomname);\r\n        }\r\n        else {\r\n            element = element.toUpperCase();\r\n        }\r\n        const hash = getHash(atomname, element);\r\n        let id = this.dict[hash];\r\n        if (id === undefined) {\r\n            const atomType = new AtomType(this.structure, atomname, element);\r\n            id = this.list.length;\r\n            this.dict[hash] = id;\r\n            this.list.push(atomType);\r\n        }\r\n        return id;\r\n    }\r\n    get(id) {\r\n        return this.list[id];\r\n    }\r\n}\r\nexport default AtomMap;\r\n//# sourceMappingURL=atom-map.js.map","/**\r\n * @file Residue Type\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @author Fred Ludlow\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport PrincipalAxes from '../math/principal-axes';\r\nimport { Matrix } from '../math/matrix-utils';\r\nimport { calculateResidueBonds } from '../structure/structure-utils';\r\nimport { ProteinType, RnaType, DnaType, WaterType, IonType, SaccharideType, UnknownType, ProteinBackboneType, RnaBackboneType, DnaBackboneType, UnknownBackboneType, CgProteinBackboneType, CgRnaBackboneType, CgDnaBackboneType, ChemCompProtein, ChemCompRna, ChemCompDna, ChemCompSaccharide, AA3, PurinBases, RnaBases, DnaBases, Bases, IonNames, WaterNames, SaccharideNames, ProteinBackboneAtoms, NucleicBackboneAtoms, ResidueTypeAtoms } from '../structure/structure-constants';\r\n/**\r\n * Residue type\r\n */\r\nexport default class ResidueType {\r\n    /**\r\n     * @param {Structure} structure - the structure object\r\n     * @param {String} resname - name of the residue\r\n     * @param {Array} atomTypeIdList - list of IDs of {@link AtomType}s corresponding\r\n     *                                 to the atoms of the residue\r\n     * @param {Boolean} hetero - hetero flag\r\n     * @param {String} chemCompType - chemical component type\r\n     * @param {Object} [bonds] - TODO\r\n     */\r\n    constructor(structure, resname, atomTypeIdList, hetero, chemCompType, bonds) {\r\n        this.structure = structure;\r\n        // Sparse array containing the reference atom index for each bond.\r\n        this.bondReferenceAtomIndices = [];\r\n        this.resname = resname;\r\n        this.atomTypeIdList = atomTypeIdList;\r\n        this.hetero = hetero ? 1 : 0;\r\n        this.chemCompType = chemCompType;\r\n        this.bonds = bonds;\r\n        this.atomCount = atomTypeIdList.length;\r\n        this.moleculeType = this.getMoleculeType();\r\n        this.backboneType = this.getBackboneType(0);\r\n        this.backboneEndType = this.getBackboneType(-1);\r\n        this.backboneStartType = this.getBackboneType(1);\r\n        this.backboneIndexList = this.getBackboneIndexList();\r\n        const atomnames = ResidueTypeAtoms[this.backboneType];\r\n        const atomnamesStart = ResidueTypeAtoms[this.backboneStartType];\r\n        const atomnamesEnd = ResidueTypeAtoms[this.backboneEndType];\r\n        const traceIndex = this.getAtomIndexByName(atomnames.trace);\r\n        this.traceAtomIndex = defaults(traceIndex, -1);\r\n        const dir1Index = this.getAtomIndexByName(atomnames.direction1);\r\n        this.direction1AtomIndex = defaults(dir1Index, -1);\r\n        const dir2Index = this.getAtomIndexByName(atomnames.direction2);\r\n        this.direction2AtomIndex = defaults(dir2Index, -1);\r\n        const bbStartIndex = this.getAtomIndexByName(atomnamesStart.backboneStart);\r\n        this.backboneStartAtomIndex = defaults(bbStartIndex, -1);\r\n        const bbEndIndex = this.getAtomIndexByName(atomnamesEnd.backboneEnd);\r\n        this.backboneEndAtomIndex = defaults(bbEndIndex, -1);\r\n        let rungEndIndex;\r\n        if (PurinBases.includes(resname)) {\r\n            rungEndIndex = this.getAtomIndexByName('N1');\r\n        }\r\n        else {\r\n            rungEndIndex = this.getAtomIndexByName('N3');\r\n        }\r\n        this.rungEndAtomIndex = defaults(rungEndIndex, -1);\r\n    }\r\n    getBackboneIndexList() {\r\n        const backboneIndexList = [];\r\n        let atomnameList;\r\n        switch (this.moleculeType) {\r\n            case ProteinType:\r\n                atomnameList = ProteinBackboneAtoms;\r\n                break;\r\n            case RnaType:\r\n            case DnaType:\r\n                atomnameList = NucleicBackboneAtoms;\r\n                break;\r\n            default:\r\n                return backboneIndexList;\r\n        }\r\n        const atomMap = this.structure.atomMap;\r\n        const atomTypeIdList = this.atomTypeIdList;\r\n        for (let i = 0, il = this.atomCount; i < il; ++i) {\r\n            const atomType = atomMap.get(atomTypeIdList[i]);\r\n            if (atomnameList.includes(atomType.atomname)) {\r\n                backboneIndexList.push(i);\r\n            }\r\n        }\r\n        return backboneIndexList;\r\n    }\r\n    getMoleculeType() {\r\n        if (this.isProtein()) {\r\n            return ProteinType;\r\n        }\r\n        else if (this.isRna()) {\r\n            return RnaType;\r\n        }\r\n        else if (this.isDna()) {\r\n            return DnaType;\r\n        }\r\n        else if (this.isWater()) {\r\n            return WaterType;\r\n        }\r\n        else if (this.isIon()) {\r\n            return IonType;\r\n        }\r\n        else if (this.isSaccharide()) {\r\n            return SaccharideType;\r\n        }\r\n        else {\r\n            return UnknownType;\r\n        }\r\n    }\r\n    getBackboneType(position) {\r\n        if (this.hasProteinBackbone(position)) {\r\n            return ProteinBackboneType;\r\n        }\r\n        else if (this.hasRnaBackbone(position)) {\r\n            return RnaBackboneType;\r\n        }\r\n        else if (this.hasDnaBackbone(position)) {\r\n            return DnaBackboneType;\r\n        }\r\n        else if (this.hasCgProteinBackbone(position)) {\r\n            return CgProteinBackboneType;\r\n        }\r\n        else if (this.hasCgRnaBackbone(position)) {\r\n            return CgRnaBackboneType;\r\n        }\r\n        else if (this.hasCgDnaBackbone(position)) {\r\n            return CgDnaBackboneType;\r\n        }\r\n        else {\r\n            return UnknownBackboneType;\r\n        }\r\n    }\r\n    isProtein() {\r\n        if (this.chemCompType) {\r\n            return ChemCompProtein.includes(this.chemCompType);\r\n        }\r\n        else {\r\n            return (this.hasAtomWithName('CA', 'C', 'N') ||\r\n                AA3.includes(this.resname));\r\n        }\r\n    }\r\n    isCg() {\r\n        const backboneType = this.backboneType;\r\n        return (backboneType === CgProteinBackboneType ||\r\n            backboneType === CgRnaBackboneType ||\r\n            backboneType === CgDnaBackboneType);\r\n    }\r\n    isNucleic() {\r\n        return this.isRna() || this.isDna();\r\n    }\r\n    isRna() {\r\n        if (this.chemCompType) {\r\n            return ChemCompRna.includes(this.chemCompType);\r\n        }\r\n        else if (this.hetero === 1) {\r\n            return false;\r\n        }\r\n        else {\r\n            return (this.hasAtomWithName(['P', \"O3'\", 'O3*'], [\"C4'\", 'C4*'], [\"O2'\", 'O2*', \"F2'\", 'F2*']) ||\r\n                (RnaBases.includes(this.resname) &&\r\n                    (this.hasAtomWithName([\"O2'\", 'O2*', \"F2'\", 'F2*']))));\r\n        }\r\n    }\r\n    isDna() {\r\n        if (this.chemCompType) {\r\n            return ChemCompDna.includes(this.chemCompType);\r\n        }\r\n        else if (this.hetero === 1) {\r\n            return false;\r\n        }\r\n        else {\r\n            return ((this.hasAtomWithName(['P', \"O3'\", 'O3*'], [\"C3'\", 'C3*']) &&\r\n                !this.hasAtomWithName([\"O2'\", 'O2*', \"F2'\", 'F2*'])) ||\r\n                DnaBases.includes(this.resname));\r\n        }\r\n    }\r\n    isHetero() {\r\n        return this.hetero === 1;\r\n    }\r\n    isIon() {\r\n        return IonNames.includes(this.resname);\r\n    }\r\n    isWater() {\r\n        return WaterNames.includes(this.resname);\r\n    }\r\n    isSaccharide() {\r\n        if (this.chemCompType) {\r\n            return ChemCompSaccharide.includes(this.chemCompType);\r\n        }\r\n        else {\r\n            return SaccharideNames.includes(this.resname);\r\n        }\r\n    }\r\n    isStandardAminoacid() {\r\n        return AA3.includes(this.resname);\r\n    }\r\n    isStandardBase() {\r\n        return Bases.includes(this.resname);\r\n    }\r\n    hasBackboneAtoms(position, type) {\r\n        const atomnames = ResidueTypeAtoms[type];\r\n        if (position === -1) {\r\n            return this.hasAtomWithName(atomnames.trace, atomnames.backboneEnd, atomnames.direction1, atomnames.direction2);\r\n        }\r\n        else if (position === 0) {\r\n            return this.hasAtomWithName(atomnames.trace, atomnames.direction1, atomnames.direction2);\r\n        }\r\n        else if (position === 1) {\r\n            return this.hasAtomWithName(atomnames.trace, atomnames.backboneStart, atomnames.direction1, atomnames.direction2);\r\n        }\r\n        else {\r\n            return this.hasAtomWithName(atomnames.trace, atomnames.backboneStart, atomnames.backboneEnd, atomnames.direction1, atomnames.direction2);\r\n        }\r\n    }\r\n    hasProteinBackbone(position) {\r\n        return (this.isProtein() &&\r\n            this.hasBackboneAtoms(position, ProteinBackboneType));\r\n    }\r\n    hasRnaBackbone(position) {\r\n        return (this.isRna() &&\r\n            this.hasBackboneAtoms(position, RnaBackboneType));\r\n    }\r\n    hasDnaBackbone(position) {\r\n        return (this.isDna() &&\r\n            this.hasBackboneAtoms(position, DnaBackboneType));\r\n    }\r\n    hasCgProteinBackbone(position) {\r\n        return (this.atomCount < 7 &&\r\n            this.isProtein() &&\r\n            this.hasBackboneAtoms(position, CgProteinBackboneType));\r\n    }\r\n    hasCgRnaBackbone(position) {\r\n        return (this.atomCount < 11 &&\r\n            this.isRna() &&\r\n            this.hasBackboneAtoms(position, CgRnaBackboneType));\r\n    }\r\n    hasCgDnaBackbone(position) {\r\n        return (this.atomCount < 11 &&\r\n            this.isDna() &&\r\n            this.hasBackboneAtoms(position, CgDnaBackboneType));\r\n    }\r\n    hasBackbone(position) {\r\n        return (this.hasProteinBackbone(position) ||\r\n            this.hasRnaBackbone(position) ||\r\n            this.hasDnaBackbone(position) ||\r\n            this.hasCgProteinBackbone(position) ||\r\n            this.hasCgRnaBackbone(position) ||\r\n            this.hasCgDnaBackbone(position));\r\n    }\r\n    getAtomIndexByName(atomname) {\r\n        const n = this.atomCount;\r\n        const atomMap = this.structure.atomMap;\r\n        const atomTypeIdList = this.atomTypeIdList;\r\n        if (Array.isArray(atomname)) {\r\n            for (let i = 0; i < n; ++i) {\r\n                const index = atomTypeIdList[i];\r\n                if (atomname.includes(atomMap.get(index).atomname)) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < n; ++i) {\r\n                const index = atomTypeIdList[i];\r\n                if (atomname === atomMap.get(index).atomname) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    hasAtomWithName(...atomnames) {\r\n        const n = atomnames.length;\r\n        for (let i = 0; i < n; ++i) {\r\n            if (atomnames[i] === undefined)\r\n                continue;\r\n            if (this.getAtomIndexByName(atomnames[i]) === undefined) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    getBonds(r) {\r\n        if (this.bonds === undefined) {\r\n            this.bonds = calculateResidueBonds(r); // TODO\r\n        }\r\n        return this.bonds;\r\n    }\r\n    getRings() {\r\n        if (this.rings === undefined) {\r\n            this.calculateRings();\r\n        }\r\n        return this.rings;\r\n    }\r\n    getBondGraph() {\r\n        if (this.bondGraph === undefined) {\r\n            this.calculateBondGraph();\r\n        }\r\n        return this.bondGraph;\r\n    }\r\n    getAromatic(a) {\r\n        if (this.aromaticAtoms === undefined) {\r\n            this.calculateAromatic(this.structure.getResidueProxy((a).residueIndex)); // TODO\r\n        }\r\n        return this.aromaticAtoms;\r\n    }\r\n    getAromaticRings(r) {\r\n        if (this.aromaticRings === undefined) {\r\n            this.calculateAromatic(r); // TODO\r\n        }\r\n        return this.aromaticRings;\r\n    }\r\n    /**\r\n     * @return {Object} bondGraph - represents the bonding in this\r\n     *   residue: { ai1: [ ai2, ai3, ...], ...}\r\n     */\r\n    calculateBondGraph() {\r\n        const bondGraph = this.bondGraph = {};\r\n        const bonds = this.getBonds();\r\n        const nb = bonds.atomIndices1.length;\r\n        const atomIndices1 = bonds.atomIndices1;\r\n        const atomIndices2 = bonds.atomIndices2;\r\n        for (let i = 0; i < nb; ++i) {\r\n            const ai1 = atomIndices1[i];\r\n            const ai2 = atomIndices2[i];\r\n            const a1 = bondGraph[ai1] = bondGraph[ai1] || [];\r\n            a1.push(ai2);\r\n            const a2 = bondGraph[ai2] = bondGraph[ai2] || [];\r\n            a2.push(ai1);\r\n        }\r\n    }\r\n    /**\r\n     * Find all rings up to 2 * RingFinderMaxDepth\r\n     */\r\n    calculateRings() {\r\n        const bondGraph = this.getBondGraph(); // TODO\r\n        const state = RingFinderState(bondGraph, this.atomCount);\r\n        for (let i = 0; i < state.count; i++) {\r\n            if (state.visited[i] >= 0)\r\n                continue;\r\n            findRings(state, i);\r\n        }\r\n        this.rings = { atomRings: state.atomRings, rings: state.rings };\r\n    }\r\n    isAromatic(atom) {\r\n        this.aromaticAtoms = this.getAromatic(atom); // TODO\r\n        return this.aromaticAtoms[atom.index - atom.residueAtomOffset] === 1;\r\n    }\r\n    calculateAromatic(r) {\r\n        const aromaticAtoms = this.aromaticAtoms = new Uint8Array(this.atomCount);\r\n        const rings = this.getRings().rings;\r\n        const aromaticRingFlags = rings.map(ring => {\r\n            return isRingAromatic(ring.map(idx => {\r\n                return this.structure.getAtomProxy(idx + r.atomOffset);\r\n            }));\r\n        });\r\n        const aromaticRings = this.aromaticRings = [];\r\n        rings.forEach((ring, i) => {\r\n            if (aromaticRingFlags[i]) {\r\n                aromaticRings.push(ring);\r\n                ring.forEach(idx => aromaticAtoms[idx] = 1);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * For bonds with order > 1, pick a reference atom\r\n     * @return {undefined}\r\n     */\r\n    assignBondReferenceAtomIndices() {\r\n        const bondGraph = this.getBondGraph(); // TODO\r\n        const rings = this.getRings(); // TODO\r\n        const atomRings = rings.atomRings;\r\n        const ringData = rings.rings;\r\n        const bonds = this.bonds; // TODO\r\n        const atomIndices1 = bonds.atomIndices1;\r\n        const atomIndices2 = bonds.atomIndices2;\r\n        const bondOrders = bonds.bondOrders;\r\n        const bondReferenceAtomIndices = this.bondReferenceAtomIndices;\r\n        const nb = bonds.atomIndices1.length;\r\n        bondReferenceAtomIndices.length = 0; // reset array\r\n        for (let i = 0; i < nb; ++i) {\r\n            // Not required for single bonds\r\n            if (bondOrders[i] <= 1)\r\n                continue;\r\n            let refRing;\r\n            const ai1 = atomIndices1[i];\r\n            const ai2 = atomIndices2[i];\r\n            const rings1 = atomRings[ai1];\r\n            const rings2 = atomRings[ai2];\r\n            // Are both atoms in a ring?\r\n            if (rings1 && rings2) {\r\n                // Are they in the same ring? (If not, ignore ring info)\r\n                for (let ri1 = 0; ri1 < rings1.length; ri1++) {\r\n                    if (rings2.indexOf(rings1[ri1]) !== -1) {\r\n                        refRing = ringData[rings1[ri1]];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            // Find the first neighbour.\r\n            if (bondGraph[ai1].length > 1) {\r\n                for (let j = 0; j < bondGraph[ai1].length; ++j) {\r\n                    const ai3 = bondGraph[ai1][j];\r\n                    if (ai3 !== ai2) {\r\n                        if (refRing === undefined || refRing.indexOf(ai3) !== -1) {\r\n                            bondReferenceAtomIndices[i] = ai3;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (bondGraph[ai2].length > 1) {\r\n                for (let j = 0; j < bondGraph[ai2].length; ++j) {\r\n                    const ai3 = bondGraph[ai2][j];\r\n                    if (ai3 !== ai1) {\r\n                        if (refRing === undefined || refRing.indexOf(ai3) !== -1) {\r\n                            bondReferenceAtomIndices[i] = ai3;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            } // No reference atom could be found (e.g. diatomic molecule/fragment)\r\n        }\r\n    }\r\n    getBondIndex(atomIndex1, atomIndex2) {\r\n        const bonds = this.bonds; // TODO\r\n        const atomIndices1 = bonds.atomIndices1;\r\n        const atomIndices2 = bonds.atomIndices2;\r\n        let idx1 = atomIndices1.indexOf(atomIndex1);\r\n        let idx2 = atomIndices2.indexOf(atomIndex2);\r\n        const _idx2 = idx2;\r\n        while (idx1 !== -1) {\r\n            while (idx2 !== -1) {\r\n                if (idx1 === idx2)\r\n                    return idx1;\r\n                idx2 = atomIndices2.indexOf(atomIndex2, idx2 + 1);\r\n            }\r\n            idx1 = atomIndices1.indexOf(atomIndex1, idx1 + 1);\r\n            idx2 = _idx2;\r\n        }\r\n        // returns undefined when no bond is found\r\n    }\r\n    getBondReferenceAtomIndex(atomIndex1, atomIndex2) {\r\n        const bondIndex = this.getBondIndex(atomIndex1, atomIndex2);\r\n        if (bondIndex === undefined)\r\n            return undefined;\r\n        if (this.bondReferenceAtomIndices.length === 0) {\r\n            this.assignBondReferenceAtomIndices();\r\n        }\r\n        return this.bondReferenceAtomIndices[bondIndex];\r\n    }\r\n}\r\n//\r\nconst AromaticRingElements = [\r\n    5 /* B */, 6 /* C */, 7 /* N */, 8 /* O */,\r\n    14 /* SI */, 15 /* P */, 16 /* S */,\r\n    32 /* GE */, 33 /* AS */,\r\n    50 /* SN */, 51 /* SB */,\r\n    83 /* BI */\r\n];\r\nconst AromaticRingPlanarityThreshold = 0.05;\r\nfunction isRingAromatic(ring) {\r\n    if (ring.some(a => !AromaticRingElements.includes(a.number)))\r\n        return false;\r\n    let i = 0;\r\n    const coords = new Matrix(3, ring.length);\r\n    const cd = coords.data;\r\n    ring.forEach(a => {\r\n        cd[i + 0] = a.x;\r\n        cd[i + 1] = a.y;\r\n        cd[i + 2] = a.z;\r\n        i += 3;\r\n    });\r\n    const pa = new PrincipalAxes(coords);\r\n    return pa.vecC.length() < AromaticRingPlanarityThreshold;\r\n}\r\n//\r\n/**\r\n * Ring finding code below adapted from MolQL\r\n * Copyright (c) 2017 MolQL contributors, licensed under MIT\r\n * @author David Sehnal <david.sehnal@gmail.com>\r\n */\r\nfunction addRing(state, a, b) {\r\n    // only \"monotonous\" rings\r\n    if (b < a)\r\n        return;\r\n    const { pred, color, left, right } = state;\r\n    const nc = ++state.currentColor;\r\n    let current = a;\r\n    for (let t = 0; t < RingFinderMaxDepth; t++) {\r\n        color[current] = nc;\r\n        current = pred[current];\r\n        if (current < 0)\r\n            break;\r\n    }\r\n    let leftOffset = 0;\r\n    let rightOffset = 0;\r\n    let found = false;\r\n    let target = 0;\r\n    current = b;\r\n    for (let t = 0; t < RingFinderMaxDepth; t++) {\r\n        if (color[current] === nc) {\r\n            target = current;\r\n            found = true;\r\n            break;\r\n        }\r\n        right[rightOffset++] = current;\r\n        current = pred[current];\r\n        if (current < 0)\r\n            break;\r\n    }\r\n    if (!found)\r\n        return;\r\n    current = a;\r\n    for (let t = 0; t < RingFinderMaxDepth; t++) {\r\n        left[leftOffset++] = current;\r\n        if (target === current)\r\n            break;\r\n        current = pred[current];\r\n        if (current < 0)\r\n            break;\r\n    }\r\n    const rn = leftOffset + rightOffset;\r\n    const ring = new Array(rn);\r\n    let ringOffset = 0;\r\n    for (let t = 0; t < leftOffset; t++) {\r\n        ring[ringOffset++] = left[t];\r\n    }\r\n    for (let t = rightOffset - 1; t >= 0; t--) {\r\n        ring[ringOffset++] = right[t];\r\n    }\r\n    const ri = state.rings.length;\r\n    // set atomRing indices:\r\n    for (let i = 0; i < rn; ++i) {\r\n        const ai = ring[i];\r\n        if (state.atomRings[ai]) {\r\n            state.atomRings[ai].push(ri);\r\n        }\r\n        else {\r\n            state.atomRings[ai] = [ri];\r\n        }\r\n    }\r\n    state.rings.push(ring);\r\n}\r\nfunction findRings(state, from) {\r\n    const { bonds, visited, queue, pred } = state;\r\n    visited[from] = 1;\r\n    queue[0] = from;\r\n    let head = 0;\r\n    let size = 1;\r\n    while (head < size) {\r\n        const top = queue[head++];\r\n        const start = 0;\r\n        if (bonds[top] === undefined) {\r\n            continue;\r\n        }\r\n        const end = bonds[top].length;\r\n        for (let i = start; i < end; i++) {\r\n            const other = bonds[top][i];\r\n            if (visited[other] > 0) {\r\n                if (pred[other] !== top && pred[top] !== other) {\r\n                    addRing(state, top, other);\r\n                }\r\n                continue;\r\n            }\r\n            visited[other] = 1;\r\n            queue[size++] = other;\r\n            pred[other] = top;\r\n        }\r\n    }\r\n}\r\nconst RingFinderMaxDepth = 4;\r\nfunction RingFinderState(bonds, capacity) {\r\n    const state = {\r\n        count: capacity,\r\n        visited: new Int32Array(capacity),\r\n        queue: new Int32Array(capacity),\r\n        pred: new Int32Array(capacity),\r\n        left: new Int32Array(RingFinderMaxDepth),\r\n        right: new Int32Array(RingFinderMaxDepth),\r\n        color: new Int32Array(capacity),\r\n        currentColor: 0,\r\n        rings: [],\r\n        atomRings: [],\r\n        bonds\r\n    };\r\n    for (let i = 0; i < capacity; i++) {\r\n        state.visited[i] = -1;\r\n        state.pred[i] = -1;\r\n    }\r\n    return state;\r\n}\r\n//# sourceMappingURL=residue-type.js.map","/**\r\n * @file Residue Map\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport ResidueType from './residue-type';\r\nfunction getHash(resname, atomTypeIdList, hetero, chemCompType = '') {\r\n    return (resname + '|' +\r\n        atomTypeIdList.join(',') + '|' +\r\n        (hetero ? 1 : 0) + '|' +\r\n        chemCompType);\r\n}\r\nclass ResidueMap {\r\n    constructor(structure) {\r\n        this.structure = structure;\r\n        this.dict = {};\r\n        this.list = [];\r\n    }\r\n    add(resname, atomTypeIdList, hetero, chemCompType = '', bonds) {\r\n        resname = resname.toUpperCase();\r\n        const hash = getHash(resname, atomTypeIdList, hetero, chemCompType);\r\n        let id = this.dict[hash];\r\n        if (id === undefined) {\r\n            const residueType = new ResidueType(this.structure, resname, atomTypeIdList, hetero, chemCompType, bonds);\r\n            id = this.list.length;\r\n            this.dict[hash] = id;\r\n            this.list.push(residueType);\r\n        }\r\n        return id;\r\n    }\r\n    get(id) {\r\n        return this.list[id];\r\n    }\r\n}\r\nexport default ResidueMap;\r\n//# sourceMappingURL=residue-map.js.map","/**\r\n * @file Bond Proxy\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\n/**\r\n * Bond proxy\r\n */\r\nclass BondProxy {\r\n    /**\r\n     * @param {Structure} structure - the structure\r\n     * @param {Integer} index - the index\r\n     */\r\n    constructor(structure, index = 0) {\r\n        this.structure = structure;\r\n        this.index = index;\r\n        this.bondStore = structure.bondStore;\r\n        this._v12 = new Vector3();\r\n        this._v13 = new Vector3();\r\n        this._ap1 = this.structure.getAtomProxy();\r\n        this._ap2 = this.structure.getAtomProxy();\r\n        this._ap3 = this.structure.getAtomProxy();\r\n    }\r\n    /**\r\n     * @type {AtomProxy}\r\n     */\r\n    get atom1() {\r\n        return this.structure.getAtomProxy(this.atomIndex1);\r\n    }\r\n    /**\r\n     * @type {AtomProxy}\r\n     */\r\n    get atom2() {\r\n        return this.structure.getAtomProxy(this.atomIndex2);\r\n    }\r\n    /**\r\n     * @type {Integer}\r\n     */\r\n    get atomIndex1() {\r\n        return this.bondStore.atomIndex1[this.index];\r\n    }\r\n    set atomIndex1(value) {\r\n        this.bondStore.atomIndex1[this.index] = value;\r\n    }\r\n    /**\r\n     * @type {Integer}\r\n     */\r\n    get atomIndex2() {\r\n        return this.bondStore.atomIndex2[this.index];\r\n    }\r\n    set atomIndex2(value) {\r\n        this.bondStore.atomIndex2[this.index] = value;\r\n    }\r\n    /**\r\n     * @type {Integer}\r\n     */\r\n    get bondOrder() {\r\n        return this.bondStore.bondOrder[this.index];\r\n    }\r\n    set bondOrder(value) {\r\n        this.bondStore.bondOrder[this.index] = value;\r\n    }\r\n    getOtherAtomIndex(atomIndex) {\r\n        return atomIndex === this.atomIndex1 ? this.atomIndex2 : this.atomIndex1;\r\n    }\r\n    getOtherAtom(atom) {\r\n        return this.structure.getAtomProxy(this.getOtherAtomIndex(atom.index));\r\n    }\r\n    /**\r\n     * Get reference atom index for the bond\r\n     * @return {Integer|undefined} atom index, or `undefined` if unavailable\r\n     */\r\n    getReferenceAtomIndex() {\r\n        const ap1 = this._ap1;\r\n        const ap2 = this._ap2;\r\n        ap1.index = this.atomIndex1;\r\n        ap2.index = this.atomIndex2;\r\n        if (ap1.residueIndex !== ap2.residueIndex) {\r\n            return undefined; // Bond between residues, for now ignore (could detect)\r\n        }\r\n        const typeAtomIndex1 = ap1.index - ap1.residueAtomOffset;\r\n        const typeAtomIndex2 = ap2.index - ap2.residueAtomOffset;\r\n        const residueType = ap1.residueType;\r\n        const ix = residueType.getBondReferenceAtomIndex(typeAtomIndex1, typeAtomIndex2);\r\n        if (ix !== undefined) {\r\n            return ix + ap1.residueAtomOffset;\r\n        }\r\n        else {\r\n            console.warn('No reference atom found', ap1.index, ap2.index);\r\n        }\r\n    }\r\n    /**\r\n     * calculate shift direction for displaying double/triple bonds\r\n     * @param  {Vector3} [v] pre-allocated output vector\r\n     * @return {Vector3} the shift direction vector\r\n     */\r\n    calculateShiftDir(v = new Vector3()) {\r\n        const ap1 = this._ap1;\r\n        const ap2 = this._ap2;\r\n        const ap3 = this._ap3;\r\n        const v12 = this._v12;\r\n        const v13 = this._v13;\r\n        ap1.index = this.atomIndex1;\r\n        ap2.index = this.atomIndex2;\r\n        const ai3 = this.getReferenceAtomIndex();\r\n        v12.subVectors(ap1, ap2).normalize(); // TODO\r\n        if (ai3 !== undefined) {\r\n            ap3.index = ai3;\r\n            v13.subVectors(ap1, ap3); // TODO\r\n        }\r\n        else {\r\n            v13.copy(ap1); // no reference point, use origin  // TODO\r\n        }\r\n        v13.normalize();\r\n        // make sure v13 and v12 are not colinear\r\n        let dp = v12.dot(v13);\r\n        if (1 - Math.abs(dp) < 1e-5) {\r\n            v13.set(1, 0, 0);\r\n            dp = v12.dot(v13);\r\n            if (1 - Math.abs(dp) < 1e-5) {\r\n                v13.set(0, 1, 0);\r\n                dp = v12.dot(v13);\r\n            }\r\n        }\r\n        return v.copy(v13.sub(v12.multiplyScalar(dp))).normalize();\r\n    }\r\n    qualifiedName() {\r\n        return this.atomIndex1 + '=' + this.atomIndex2;\r\n    }\r\n    /**\r\n     * Clone object\r\n     * @return {BondProxy} cloned bond\r\n     */\r\n    clone() {\r\n        return new BondProxy(this.structure, this.index);\r\n    }\r\n    toObject() {\r\n        return {\r\n            atomIndex1: this.atomIndex1,\r\n            atomIndex2: this.atomIndex2,\r\n            bondOrder: this.bondOrder\r\n        };\r\n    }\r\n}\r\nexport default BondProxy;\r\n//# sourceMappingURL=bond-proxy.js.map","/**\r\n * @file Residue Proxy\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport { SecStrucHelix, SecStrucSheet, SecStrucTurn, ProteinType, RnaType, DnaType, WaterType, IonType, SaccharideType, CgProteinBackboneType, CgRnaBackboneType, CgDnaBackboneType, AA1 } from '../structure/structure-constants.js';\r\n/**\r\n * Residue proxy\r\n */\r\nclass ResidueProxy {\r\n    /**\r\n     * @param {Structure} structure - the structure\r\n     * @param {Integer} index - the index\r\n     */\r\n    constructor(structure, index = 0) {\r\n        this.structure = structure;\r\n        this.index = index;\r\n        this.chainStore = structure.chainStore;\r\n        this.residueStore = structure.residueStore;\r\n        this.atomStore = structure.atomStore;\r\n        this.residueMap = structure.residueMap;\r\n        this.atomMap = structure.atomMap;\r\n    }\r\n    /**\r\n     * Entity\r\n     * @type {Entity}\r\n     */\r\n    get entity() {\r\n        return this.structure.entityList[this.entityIndex];\r\n    }\r\n    get entityIndex() {\r\n        return this.chainStore.entityIndex[this.chainIndex];\r\n    }\r\n    /**\r\n     * Chain\r\n     * @type {ChainProxy}\r\n     */\r\n    get chain() {\r\n        return this.structure.getChainProxy(this.chainIndex);\r\n    }\r\n    get chainIndex() {\r\n        return this.residueStore.chainIndex[this.index];\r\n    }\r\n    set chainIndex(value) {\r\n        this.residueStore.chainIndex[this.index] = value;\r\n    }\r\n    get atomOffset() {\r\n        return this.residueStore.atomOffset[this.index];\r\n    }\r\n    set atomOffset(value) {\r\n        this.residueStore.atomOffset[this.index] = value;\r\n    }\r\n    /**\r\n     * Atom count\r\n     * @type {Integer}\r\n     */\r\n    get atomCount() {\r\n        return this.residueStore.atomCount[this.index];\r\n    }\r\n    set atomCount(value) {\r\n        this.residueStore.atomCount[this.index] = value;\r\n    }\r\n    get atomEnd() {\r\n        return this.atomOffset + this.atomCount - 1;\r\n    }\r\n    //\r\n    get modelIndex() {\r\n        return this.chainStore.modelIndex[this.chainIndex];\r\n    }\r\n    /**\r\n     * Chain name\r\n     * @type {String}\r\n     */\r\n    get chainname() {\r\n        return this.chainStore.getChainname(this.chainIndex);\r\n    }\r\n    /**\r\n     * Chain id\r\n     * @type {String}\r\n     */\r\n    get chainid() {\r\n        return this.chainStore.getChainid(this.chainIndex);\r\n    }\r\n    //\r\n    /**\r\n     * Residue number/label\r\n     * @type {Integer}\r\n     */\r\n    get resno() {\r\n        return this.residueStore.resno[this.index];\r\n    }\r\n    set resno(value) {\r\n        this.residueStore.resno[this.index] = value;\r\n    }\r\n    /**\r\n     * Secondary structure code\r\n     * @type {String}\r\n     */\r\n    get sstruc() {\r\n        return this.residueStore.getSstruc(this.index);\r\n    }\r\n    set sstruc(value) {\r\n        this.residueStore.setSstruc(this.index, value);\r\n    }\r\n    /**\r\n     * Insertion code\r\n     * @type {String}\r\n     */\r\n    get inscode() {\r\n        return this.residueStore.getInscode(this.index);\r\n    }\r\n    set inscode(value) {\r\n        this.residueStore.setInscode(this.index, value);\r\n    }\r\n    //\r\n    get residueType() {\r\n        return this.residueMap.get(this.residueStore.residueTypeId[this.index]);\r\n    }\r\n    /**\r\n     * Residue name\r\n     * @type {String}\r\n     */\r\n    get resname() {\r\n        return this.residueType.resname;\r\n    }\r\n    /**\r\n     * Hetero flag\r\n     * @type {Boolean}\r\n     */\r\n    get hetero() {\r\n        return this.residueType.hetero;\r\n    }\r\n    get moleculeType() {\r\n        return this.residueType.moleculeType;\r\n    }\r\n    get backboneType() {\r\n        return this.residueType.backboneType;\r\n    }\r\n    get backboneStartType() {\r\n        return this.residueType.backboneStartType;\r\n    }\r\n    get backboneEndType() {\r\n        return this.residueType.backboneEndType;\r\n    }\r\n    get traceAtomIndex() {\r\n        return this.residueType.traceAtomIndex + this.atomOffset;\r\n    }\r\n    get direction1AtomIndex() {\r\n        return this.residueType.direction1AtomIndex + this.atomOffset;\r\n    }\r\n    get direction2AtomIndex() {\r\n        return this.residueType.direction2AtomIndex + this.atomOffset;\r\n    }\r\n    get backboneStartAtomIndex() {\r\n        return this.residueType.backboneStartAtomIndex + this.atomOffset;\r\n    }\r\n    get backboneEndAtomIndex() {\r\n        return this.residueType.backboneEndAtomIndex + this.atomOffset;\r\n    }\r\n    get rungEndAtomIndex() {\r\n        return this.residueType.rungEndAtomIndex + this.atomOffset;\r\n    }\r\n    //\r\n    get x() {\r\n        let x = 0;\r\n        for (let i = this.atomOffset; i <= this.atomEnd; ++i) {\r\n            x += this.atomStore.x[i];\r\n        }\r\n        return x / this.atomCount;\r\n    }\r\n    get y() {\r\n        let y = 0;\r\n        for (let i = this.atomOffset; i <= this.atomEnd; ++i) {\r\n            y += this.atomStore.y[i];\r\n        }\r\n        return y / this.atomCount;\r\n    }\r\n    get z() {\r\n        let z = 0;\r\n        for (let i = this.atomOffset; i <= this.atomEnd; ++i) {\r\n            z += this.atomStore.z[i];\r\n        }\r\n        return z / this.atomCount;\r\n    }\r\n    //\r\n    /**\r\n     * Atom iterator\r\n     * @param  {function(atom: AtomProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachAtom(callback, selection) {\r\n        const count = this.atomCount;\r\n        const offset = this.atomOffset;\r\n        const ap = this.structure._ap;\r\n        const end = offset + count;\r\n        if (selection && selection.atomOnlyTest) {\r\n            const atomOnlyTest = selection.atomOnlyTest;\r\n            for (let i = offset; i < end; ++i) {\r\n                ap.index = i;\r\n                if (atomOnlyTest(ap))\r\n                    callback(ap);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = offset; i < end; ++i) {\r\n                ap.index = i;\r\n                callback(ap);\r\n            }\r\n        }\r\n    }\r\n    //\r\n    /**\r\n     * Write residue center position to array\r\n     * @param  {Array|TypedArray} [array] - target array\r\n     * @param  {Integer} [offset] - the offset\r\n     * @return {Array|TypedArray} target array\r\n     */\r\n    positionToArray(array = [], offset = 0) {\r\n        array[offset + 0] = this.x;\r\n        array[offset + 1] = this.y;\r\n        array[offset + 2] = this.z;\r\n        return array;\r\n    }\r\n    //\r\n    /**\r\n     * If residue is from a protein\r\n     * @return {Boolean} flag\r\n     */\r\n    isProtein() {\r\n        return this.residueType.moleculeType === ProteinType;\r\n    }\r\n    /**\r\n     * If residue is nucleic\r\n     * @return {Boolean} flag\r\n     */\r\n    isNucleic() {\r\n        const moleculeType = this.residueType.moleculeType;\r\n        return moleculeType === RnaType || moleculeType === DnaType;\r\n    }\r\n    /**\r\n     * If residue is rna\r\n     * @return {Boolean} flag\r\n     */\r\n    isRna() {\r\n        return this.residueType.moleculeType === RnaType;\r\n    }\r\n    /**\r\n     * If residue is dna\r\n     * @return {Boolean} flag\r\n     */\r\n    isDna() {\r\n        return this.residueType.moleculeType === DnaType;\r\n    }\r\n    /**\r\n     * If residue is coarse-grain\r\n     * @return {Boolean} flag\r\n     */\r\n    isCg() {\r\n        const backboneType = this.residueType.backboneType;\r\n        return (backboneType === CgProteinBackboneType ||\r\n            backboneType === CgRnaBackboneType ||\r\n            backboneType === CgDnaBackboneType);\r\n    }\r\n    /**\r\n     * If residue is from a polymer\r\n     * @return {Boolean} flag\r\n     */\r\n    isPolymer() {\r\n        if (this.structure.entityList.length > 0) {\r\n            return this.entity.isPolymer();\r\n        }\r\n        else {\r\n            const moleculeType = this.residueType.moleculeType;\r\n            return (moleculeType === ProteinType ||\r\n                moleculeType === RnaType ||\r\n                moleculeType === DnaType);\r\n        }\r\n    }\r\n    /**\r\n     * If residue is hetero\r\n     * @return {Boolean} flag\r\n     */\r\n    isHetero() {\r\n        return this.residueType.hetero === 1;\r\n    }\r\n    /**\r\n     * If residue is a water molecule\r\n     * @return {Boolean} flag\r\n     */\r\n    isWater() {\r\n        return this.residueType.moleculeType === WaterType;\r\n    }\r\n    /**\r\n     * If residue is an ion\r\n     * @return {Boolean} flag\r\n     */\r\n    isIon() {\r\n        return this.residueType.moleculeType === IonType;\r\n    }\r\n    /**\r\n     * If residue is a saccharide\r\n     * @return {Boolean} flag\r\n     */\r\n    isSaccharide() {\r\n        return this.residueType.moleculeType === SaccharideType;\r\n    }\r\n    isStandardAminoacid() {\r\n        return this.residueType.isStandardAminoacid();\r\n    }\r\n    isStandardBase() {\r\n        return this.residueType.isStandardBase();\r\n    }\r\n    /**\r\n     * If residue is part of a helix\r\n     * @return {Boolean} flag\r\n     */\r\n    isHelix() {\r\n        return SecStrucHelix.includes(this.sstruc);\r\n    }\r\n    /**\r\n     * If residue is part of a sheet\r\n     * @return {Boolean} flag\r\n     */\r\n    isSheet() {\r\n        return SecStrucSheet.includes(this.sstruc);\r\n    }\r\n    /**\r\n     * If residue is part of a turn\r\n     * @return {Boolean} flag\r\n     */\r\n    isTurn() {\r\n        return SecStrucTurn.includes(this.sstruc) && this.isProtein();\r\n    }\r\n    getAtomType(index) {\r\n        return this.atomMap.get(this.atomStore.atomTypeId[index]);\r\n    }\r\n    getResname1() {\r\n        // FIXME nucleic support\r\n        return AA1[this.resname.toUpperCase()] || 'X';\r\n    }\r\n    getBackboneType(position) {\r\n        switch (position) {\r\n            case -1:\r\n                return this.residueType.backboneStartType;\r\n            case 1:\r\n                return this.residueType.backboneEndType;\r\n            default:\r\n                return this.residueType.backboneType;\r\n        }\r\n    }\r\n    getAtomIndexByName(atomname) {\r\n        let index = this.residueType.getAtomIndexByName(atomname);\r\n        if (index !== undefined) {\r\n            index += this.atomOffset;\r\n        }\r\n        return index;\r\n    }\r\n    hasAtomWithName(atomname) {\r\n        return this.residueType.hasAtomWithName(atomname);\r\n    }\r\n    getAtomnameList() {\r\n        console.warn('getAtomnameList - might be expensive');\r\n        const n = this.atomCount;\r\n        const offset = this.atomOffset;\r\n        const list = new Array(n);\r\n        for (let i = 0; i < n; ++i) {\r\n            list[i] = this.getAtomType(offset + i).atomname;\r\n        }\r\n        return list;\r\n    }\r\n    /**\r\n     * If residue is connected to another\r\n     * @param  {ResidueProxy} rNext - the other residue\r\n     * @return {Boolean} - flag\r\n     */\r\n    connectedTo(rNext) {\r\n        const bbAtomEnd = this.structure.getAtomProxy(this.backboneEndAtomIndex);\r\n        const bbAtomStart = this.structure.getAtomProxy(rNext.backboneStartAtomIndex);\r\n        if (bbAtomEnd && bbAtomStart) {\r\n            return bbAtomEnd.connectedTo(bbAtomStart);\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    getNextConnectedResidue() {\r\n        const rOffset = this.chainStore.residueOffset[this.chainIndex];\r\n        const rCount = this.chainStore.residueCount[this.chainIndex];\r\n        const nextIndex = this.index + 1;\r\n        if (nextIndex < rOffset + rCount) {\r\n            const rpNext = this.structure.getResidueProxy(nextIndex);\r\n            if (this.connectedTo(rpNext)) {\r\n                return rpNext;\r\n            }\r\n        }\r\n        else if (nextIndex === rOffset + rCount) { // cyclic\r\n            const rpFirst = this.structure.getResidueProxy(rOffset);\r\n            if (this.connectedTo(rpFirst)) {\r\n                return rpFirst;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    getPreviousConnectedResidue(residueProxy) {\r\n        const rOffset = this.chainStore.residueOffset[this.chainIndex];\r\n        const prevIndex = this.index - 1;\r\n        if (prevIndex >= rOffset) {\r\n            const rpPrev = defaults(residueProxy, this.structure.getResidueProxy());\r\n            rpPrev.index = prevIndex;\r\n            if (rpPrev.connectedTo(this)) {\r\n                return rpPrev;\r\n            }\r\n        }\r\n        else if (prevIndex === rOffset - 1) { // cyclic\r\n            const rCount = this.chainStore.residueCount[this.chainIndex];\r\n            const rpLast = defaults(residueProxy, this.structure.getResidueProxy());\r\n            rpLast.index = rOffset + rCount - 1;\r\n            if (rpLast.connectedTo(this)) {\r\n                return rpLast;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    getBonds() {\r\n        return this.residueType.getBonds(this);\r\n    }\r\n    getRings() {\r\n        return this.residueType.getRings();\r\n    }\r\n    getAromaticRings() {\r\n        return this.residueType.getAromaticRings(this);\r\n    }\r\n    qualifiedName(noResname = false) {\r\n        let name = '';\r\n        if (this.resname && !noResname)\r\n            name += '[' + this.resname + ']';\r\n        if (this.resno !== undefined)\r\n            name += this.resno;\r\n        if (this.inscode)\r\n            name += '^' + this.inscode;\r\n        if (this.chain)\r\n            name += ':' + this.chainname;\r\n        name += '/' + this.modelIndex;\r\n        return name;\r\n    }\r\n    /**\r\n     * Clone object\r\n     * @return {ResidueProxy} cloned residue\r\n     */\r\n    clone() {\r\n        return new ResidueProxy(this.structure, this.index);\r\n    }\r\n    toObject() {\r\n        return {\r\n            index: this.index,\r\n            chainIndex: this.chainIndex,\r\n            atomOffset: this.atomOffset,\r\n            atomCount: this.atomCount,\r\n            resno: this.resno,\r\n            resname: this.resname,\r\n            sstruc: this.sstruc\r\n        };\r\n    }\r\n}\r\nexport default ResidueProxy;\r\n//# sourceMappingURL=residue-proxy.js.map","/**\r\n * @file Polymer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n/**\r\n * Polymer\r\n */\r\nclass Polymer {\r\n    /**\r\n     * @param {Structure} structure - the structure\r\n     * @param {Integer} residueIndexStart - the index of the first residue\r\n     * @param {Integer} residueIndexEnd - the index of the last residue\r\n     */\r\n    constructor(structure, residueIndexStart, residueIndexEnd) {\r\n        this.structure = structure;\r\n        this.residueIndexStart = residueIndexStart;\r\n        this.residueIndexEnd = residueIndexEnd;\r\n        this.chainStore = structure.chainStore;\r\n        this.residueStore = structure.residueStore;\r\n        this.atomStore = structure.atomStore;\r\n        /**\r\n         * @type {Integer}\r\n         */\r\n        this.residueCount = residueIndexEnd - residueIndexStart + 1;\r\n        const rpStart = this.structure.getResidueProxy(this.residueIndexStart);\r\n        const rpEnd = this.structure.getResidueProxy(this.residueIndexEnd);\r\n        this.isPrevConnected = rpStart.getPreviousConnectedResidue() !== undefined;\r\n        const rpNext = rpEnd.getNextConnectedResidue();\r\n        this.isNextConnected = rpNext !== undefined;\r\n        this.isNextNextConnected = rpNext !== undefined && rpNext.getNextConnectedResidue() !== undefined;\r\n        this.isCyclic = rpEnd.connectedTo(rpStart);\r\n        this.__residueProxy = this.structure.getResidueProxy();\r\n        // console.log( this.qualifiedName(), this );\r\n    }\r\n    get chainIndex() {\r\n        return this.residueStore.chainIndex[this.residueIndexStart];\r\n    }\r\n    get modelIndex() {\r\n        return this.chainStore.modelIndex[this.chainIndex];\r\n    }\r\n    /**\r\n     * @type {String}\r\n     */\r\n    get chainname() {\r\n        return this.chainStore.getChainname(this.chainIndex);\r\n    }\r\n    //\r\n    /**\r\n     * If first residue is from aprotein\r\n     * @return {Boolean} flag\r\n     */\r\n    isProtein() {\r\n        this.__residueProxy.index = this.residueIndexStart;\r\n        return this.__residueProxy.isProtein();\r\n    }\r\n    /**\r\n     * If atom is part of a coarse-grain group\r\n     * @return {Boolean} flag\r\n     */\r\n    isCg() {\r\n        this.__residueProxy.index = this.residueIndexStart;\r\n        return this.__residueProxy.isCg();\r\n    }\r\n    /**\r\n     * If atom is part of a nucleic molecule\r\n     * @return {Boolean} flag\r\n     */\r\n    isNucleic() {\r\n        this.__residueProxy.index = this.residueIndexStart;\r\n        return this.__residueProxy.isNucleic();\r\n    }\r\n    getMoleculeType() {\r\n        this.__residueProxy.index = this.residueIndexStart;\r\n        return this.__residueProxy.moleculeType;\r\n    }\r\n    getBackboneType(position) {\r\n        this.__residueProxy.index = this.residueIndexStart;\r\n        return this.__residueProxy.getBackboneType(position);\r\n    }\r\n    getAtomIndexByType(index, type) {\r\n        // TODO pre-calculate, add to residueStore???\r\n        if (this.isCyclic) {\r\n            if (index === -1) {\r\n                index = this.residueCount - 1;\r\n            }\r\n            else if (index === this.residueCount) {\r\n                index = 0;\r\n            }\r\n        }\r\n        else {\r\n            if (index === -1 && !this.isPrevConnected)\r\n                index += 1;\r\n            if (index === this.residueCount && !this.isNextNextConnected)\r\n                index -= 1;\r\n            // if( index === this.residueCount - 1 && !this.isNextConnected ) index -= 1;\r\n        }\r\n        const rp = this.__residueProxy;\r\n        rp.index = this.residueIndexStart + index;\r\n        let aIndex;\r\n        switch (type) {\r\n            case 'trace':\r\n                aIndex = rp.traceAtomIndex;\r\n                break;\r\n            case 'direction1':\r\n                aIndex = rp.direction1AtomIndex;\r\n                break;\r\n            case 'direction2':\r\n                aIndex = rp.direction2AtomIndex;\r\n                break;\r\n            default:\r\n                aIndex = rp.getAtomIndexByName(type);\r\n        }\r\n        // if (!ap){\r\n        //   console.log(this, type, rp.residueType)\r\n        //   // console.log(rp.qualifiedName(), rp.index, index, this.residueCount - 1)\r\n        //   // rp.index = this.residueIndexStart;\r\n        //   // console.log(rp.qualifiedName(), this.residueIndexStart)\r\n        //   // rp.index = this.residueIndexEnd;\r\n        //   // console.log(rp.qualifiedName(), this.residueIndexEnd)\r\n        // }\r\n        return aIndex;\r\n    }\r\n    /**\r\n     * Atom iterator\r\n     * @param  {function(atom: AtomProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachAtom(callback, selection) {\r\n        this.eachResidue(function (rp) {\r\n            rp.eachAtom(callback, selection);\r\n        });\r\n    }\r\n    eachAtomN(n, callback, type) {\r\n        const m = this.residueCount;\r\n        const array = new Array(n);\r\n        for (let i = 0; i < n; ++i) {\r\n            array[i] = this.structure.getAtomProxy(this.getAtomIndexByType(i, type));\r\n        }\r\n        callback.apply(this, array);\r\n        for (var j = n; j < m; ++j) {\r\n            for (let i = 1; i < n; ++i) {\r\n                array[i - 1].index = array[i].index;\r\n            }\r\n            array[n - 1].index = this.getAtomIndexByType(j, type); // TODO\r\n            callback.apply(this, array);\r\n        }\r\n    }\r\n    /**\r\n     * Residue iterator\r\n     * @param  {function(residue: ResidueProxy)} callback - the callback\r\n     * @return {undefined}\r\n     */\r\n    eachResidue(callback) {\r\n        const rp = this.structure.getResidueProxy();\r\n        const n = this.residueCount;\r\n        const rStartIndex = this.residueIndexStart;\r\n        for (let i = 0; i < n; ++i) {\r\n            rp.index = rStartIndex + i;\r\n            callback(rp);\r\n        }\r\n    }\r\n    qualifiedName() {\r\n        const rpStart = this.structure.getResidueProxy(this.residueIndexStart);\r\n        const rpEnd = this.structure.getResidueProxy(this.residueIndexEnd);\r\n        return rpStart.qualifiedName() + ' - ' + rpEnd.qualifiedName();\r\n    }\r\n}\r\nexport default Polymer;\r\n//# sourceMappingURL=polymer.js.map","/**\r\n * @file Chain Proxy\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { UnknownBackboneType } from '../structure/structure-constants';\r\nimport Polymer from '../proxy/polymer';\r\n/**\r\n * Chain proxy\r\n */\r\nclass ChainProxy {\r\n    /**\r\n     * @param {Structure} structure - the structure\r\n     * @param {Integer} index - the index\r\n     */\r\n    constructor(structure, index = 0) {\r\n        this.structure = structure;\r\n        this.index = index;\r\n        this.chainStore = structure.chainStore;\r\n        this.residueStore = structure.residueStore;\r\n    }\r\n    /**\r\n     * Entity\r\n     * @type {Entity}\r\n     */\r\n    get entity() {\r\n        return this.structure.entityList[this.entityIndex];\r\n    }\r\n    /**\r\n     * Model\r\n     * @type {ModelProxy}\r\n     */\r\n    get model() {\r\n        return this.structure.getModelProxy(this.modelIndex);\r\n    }\r\n    get entityIndex() {\r\n        return this.chainStore.entityIndex[this.index];\r\n    }\r\n    set entityIndex(value) {\r\n        this.chainStore.entityIndex[this.index] = value;\r\n    }\r\n    get modelIndex() {\r\n        return this.chainStore.modelIndex[this.index];\r\n    }\r\n    set modelIndex(value) {\r\n        this.chainStore.modelIndex[this.index] = value;\r\n    }\r\n    get residueOffset() {\r\n        return this.chainStore.residueOffset[this.index];\r\n    }\r\n    set residueOffset(value) {\r\n        this.chainStore.residueOffset[this.index] = value;\r\n    }\r\n    /**\r\n     * Residue count\r\n     * @type {Integer}\r\n     */\r\n    get residueCount() {\r\n        return this.chainStore.residueCount[this.index];\r\n    }\r\n    set residueCount(value) {\r\n        this.chainStore.residueCount[this.index] = value;\r\n    }\r\n    get residueEnd() {\r\n        return this.residueOffset + this.residueCount - 1;\r\n    }\r\n    get atomOffset() {\r\n        return this.residueStore.atomOffset[this.residueOffset];\r\n    }\r\n    get atomEnd() {\r\n        return (this.residueStore.atomOffset[this.residueEnd] +\r\n            this.residueStore.atomCount[this.residueEnd] - 1);\r\n    }\r\n    /**\r\n     * Atom count\r\n     * @type {Integer}\r\n     */\r\n    get atomCount() {\r\n        if (this.residueCount === 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return this.atomEnd - this.atomOffset + 1;\r\n        }\r\n    }\r\n    //\r\n    /**\r\n     * Chain name\r\n     * @type {String}\r\n     */\r\n    get chainname() {\r\n        return this.chainStore.getChainname(this.index);\r\n    }\r\n    set chainname(value) {\r\n        this.chainStore.setChainname(this.index, value);\r\n    }\r\n    /**\r\n     * Chain id\r\n     * @type {String}\r\n     */\r\n    get chainid() {\r\n        return this.chainStore.getChainid(this.index);\r\n    }\r\n    set chainid(value) {\r\n        this.chainStore.setChainid(this.index, value);\r\n    }\r\n    //\r\n    /**\r\n     * Atom iterator\r\n     * @param  {function(atom: AtomProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachAtom(callback, selection) {\r\n        this.eachResidue(function (rp) {\r\n            rp.eachAtom(callback, selection);\r\n        }, selection);\r\n    }\r\n    /**\r\n     * Residue iterator\r\n     * @param  {function(residue: ResidueProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachResidue(callback, selection) {\r\n        const count = this.residueCount;\r\n        const offset = this.residueOffset;\r\n        const rp = this.structure._rp;\r\n        const end = offset + count;\r\n        if (selection && selection.test) {\r\n            const residueOnlyTest = selection.residueOnlyTest;\r\n            if (residueOnlyTest) {\r\n                for (let i = offset; i < end; ++i) {\r\n                    rp.index = i;\r\n                    if (residueOnlyTest(rp)) {\r\n                        callback(rp);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (let i = offset; i < end; ++i) {\r\n                    rp.index = i;\r\n                    callback(rp);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = offset; i < end; ++i) {\r\n                rp.index = i;\r\n                callback(rp);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Multi-residue iterator\r\n     * @param {Integer} n - window size\r\n     * @param  {function(residueList: ResidueProxy[])} callback - the callback\r\n     * @return {undefined}\r\n     */\r\n    eachResidueN(n, callback) {\r\n        const count = this.residueCount;\r\n        const offset = this.residueOffset;\r\n        const end = offset + count;\r\n        if (count < n)\r\n            return;\r\n        const array = new Array(n);\r\n        for (let i = 0; i < n; ++i) {\r\n            array[i] = this.structure.getResidueProxy(offset + i);\r\n        }\r\n        callback.apply(this, array);\r\n        for (let j = offset + n; j < end; ++j) {\r\n            for (let i = 0; i < n; ++i) {\r\n                array[i].index += 1;\r\n            }\r\n            callback.apply(this, array);\r\n        }\r\n    }\r\n    /**\r\n     * Polymer iterator\r\n     * @param  {function(polymer: Polymer)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachPolymer(callback, selection) {\r\n        let rStartIndex = 0;\r\n        let rNextIndex = 0;\r\n        const test = selection ? selection.residueOnlyTest : undefined;\r\n        const structure = this.model.structure;\r\n        const count = this.residueCount;\r\n        const offset = this.residueOffset;\r\n        const end = offset + count;\r\n        const rp1 = this.structure.getResidueProxy();\r\n        const rp2 = this.structure.getResidueProxy(offset);\r\n        const ap1 = this.structure.getAtomProxy();\r\n        const ap2 = this.structure.getAtomProxy();\r\n        let first = true;\r\n        for (let i = offset + 1; i < end; ++i) {\r\n            rp1.index = rp2.index;\r\n            rp2.index = i;\r\n            const bbType1 = first ? rp1.backboneEndType : rp1.backboneType;\r\n            const bbType2 = rp2.backboneType;\r\n            if (first) {\r\n                rStartIndex = rp1.index;\r\n                first = false;\r\n            }\r\n            rNextIndex = rp2.index;\r\n            if (bbType1 !== UnknownBackboneType && bbType1 === bbType2) {\r\n                ap1.index = rp1.backboneEndAtomIndex;\r\n                ap2.index = rp2.backboneStartAtomIndex;\r\n            }\r\n            else {\r\n                if (bbType1 !== UnknownBackboneType) {\r\n                    if (rp1.index - rStartIndex > 1) {\r\n                        // console.log(\"FOO1\",rStartIndex, rp1.index)\r\n                        callback(new Polymer(structure, rStartIndex, rp1.index));\r\n                    }\r\n                }\r\n                rStartIndex = rNextIndex;\r\n                continue;\r\n            }\r\n            if (!ap1 || !ap2 || !ap1.connectedTo(ap2) ||\r\n                (test && (!test(rp1) || !test(rp2)))) {\r\n                if (rp1.index - rStartIndex > 1) {\r\n                    // console.log(\"FOO2\",rStartIndex, rp1.index)\r\n                    callback(new Polymer(structure, rStartIndex, rp1.index));\r\n                }\r\n                rStartIndex = rNextIndex;\r\n            }\r\n        }\r\n        if (rNextIndex - rStartIndex > 1) {\r\n            if (this.structure.getResidueProxy(rStartIndex).backboneEndType) {\r\n                // console.log(\"FOO3\",rStartIndex, rNextIndex)\r\n                callback(new Polymer(structure, rStartIndex, rNextIndex));\r\n            }\r\n        }\r\n    }\r\n    //\r\n    qualifiedName() {\r\n        var name = ':' + this.chainname + '/' + this.modelIndex;\r\n        return name;\r\n    }\r\n    /**\r\n     * Clone object\r\n     * @return {ChainProxy} cloned chain\r\n     */\r\n    clone() {\r\n        return new ChainProxy(this.structure, this.index);\r\n    }\r\n    toObject() {\r\n        return {\r\n            index: this.index,\r\n            residueOffset: this.residueOffset,\r\n            residueCount: this.residueCount,\r\n            chainname: this.chainname\r\n        };\r\n    }\r\n}\r\nexport default ChainProxy;\r\n//# sourceMappingURL=chain-proxy.js.map","/**\r\n * @file Model Proxy\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n/**\r\n * Model proxy\r\n */\r\nclass ModelProxy {\r\n    /**\r\n     * @param {Structure} structure - the structure\r\n     * @param {Integer} index - the index\r\n     */\r\n    constructor(structure, index = 0) {\r\n        this.structure = structure;\r\n        this.index = index;\r\n        this.modelStore = structure.modelStore;\r\n        this.chainStore = structure.chainStore;\r\n        this.residueStore = structure.residueStore;\r\n    }\r\n    get chainOffset() {\r\n        return this.modelStore.chainOffset[this.index];\r\n    }\r\n    set chainOffset(value) {\r\n        this.modelStore.chainOffset[this.index] = value;\r\n    }\r\n    get chainCount() {\r\n        return this.modelStore.chainCount[this.index];\r\n    }\r\n    set chainCount(value) {\r\n        this.modelStore.chainCount[this.index] = value;\r\n    }\r\n    get residueOffset() {\r\n        return this.chainStore.residueOffset[this.chainOffset];\r\n    }\r\n    get atomOffset() {\r\n        return this.residueStore.atomOffset[this.residueOffset];\r\n    }\r\n    get chainEnd() {\r\n        return this.chainOffset + this.chainCount - 1;\r\n    }\r\n    get residueEnd() {\r\n        return (this.chainStore.residueOffset[this.chainEnd] +\r\n            this.chainStore.residueCount[this.chainEnd] - 1);\r\n    }\r\n    get atomEnd() {\r\n        return (this.residueStore.atomOffset[this.residueEnd] +\r\n            this.residueStore.atomCount[this.residueEnd] - 1);\r\n    }\r\n    /**\r\n     * Residue count\r\n     * @type {Integer}\r\n     */\r\n    get residueCount() {\r\n        if (this.chainCount === 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return this.residueEnd - this.residueOffset + 1;\r\n        }\r\n    }\r\n    /**\r\n     * Atom count\r\n     * @type {Integer}\r\n     */\r\n    get atomCount() {\r\n        if (this.residueCount === 0) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return this.atomEnd - this.atomOffset + 1;\r\n        }\r\n    }\r\n    //\r\n    /**\r\n     * Atom iterator\r\n     * @param  {function(atom: AtomProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachAtom(callback, selection) {\r\n        this.eachChain(function (cp) {\r\n            cp.eachAtom(callback, selection);\r\n        }, selection);\r\n    }\r\n    /**\r\n     * Residue iterator\r\n     * @param  {function(residue: ResidueProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachResidue(callback, selection) {\r\n        this.eachChain(function (cp) {\r\n            cp.eachResidue(callback, selection);\r\n        }, selection);\r\n    }\r\n    /**\r\n     * Polymer iterator\r\n     * @param  {function(polymer: Polymer)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachPolymer(callback, selection) {\r\n        if (selection && selection.chainOnlyTest) {\r\n            const chainOnlyTest = selection.chainOnlyTest;\r\n            this.eachChain(function (cp) {\r\n                if (chainOnlyTest(cp)) {\r\n                    cp.eachPolymer(callback, selection);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.eachChain(function (cp) {\r\n                cp.eachPolymer(callback, selection);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Chain iterator\r\n     * @param  {function(chain: ChainProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachChain(callback, selection) {\r\n        const count = this.chainCount;\r\n        const offset = this.chainOffset;\r\n        const cp = this.structure._cp;\r\n        const end = offset + count;\r\n        if (selection && selection.test) {\r\n            const chainOnlyTest = selection.chainOnlyTest;\r\n            if (chainOnlyTest) {\r\n                for (let i = offset; i < end; ++i) {\r\n                    cp.index = i;\r\n                    if (chainOnlyTest(cp)) {\r\n                        callback(cp);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (let i = offset; i < end; ++i) {\r\n                    cp.index = i;\r\n                    callback(cp);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = offset; i < end; ++i) {\r\n                cp.index = i;\r\n                callback(cp);\r\n            }\r\n        }\r\n    }\r\n    //\r\n    qualifiedName() {\r\n        const name = '/' + this.index;\r\n        return name;\r\n    }\r\n    /**\r\n     * Clone object\r\n     * @return {ModelProxy} cloned model\r\n     */\r\n    clone() {\r\n        return new ModelProxy(this.structure, this.index);\r\n    }\r\n    toObject() {\r\n        return {\r\n            index: this.index,\r\n            chainOffset: this.chainOffset,\r\n            chainCount: this.chainCount\r\n        };\r\n    }\r\n}\r\nexport default ModelProxy;\r\n//# sourceMappingURL=model-proxy.js.map","/**\r\n * @file Structure\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Box3 } from 'three';\r\nimport { Signal } from 'signals';\r\nimport { Debug, Log, ColormakerRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { AtomPicker, BondPicker } from '../utils/picker';\r\nimport { copyWithin, arrayMin, arrayMax } from '../math/array-utils';\r\nimport BitArray from '../utils/bitarray';\r\nimport RadiusFactory from '../utils/radius-factory';\r\nimport { Matrix } from '../math/matrix-utils';\r\nimport PrincipalAxes from '../math/principal-axes';\r\nimport SpatialHash from '../geometry/spatial-hash';\r\nimport FilteredVolume from '../surface/filtered-volume';\r\nimport { createData } from './data';\r\nimport BondHash from '../store/bond-hash';\r\nimport BondStore from '../store/bond-store';\r\nimport AtomStore from '../store/atom-store';\r\nimport ResidueStore from '../store/residue-store';\r\nimport ChainStore from '../store/chain-store';\r\nimport ModelStore from '../store/model-store';\r\nimport AtomMap from '../store/atom-map';\r\nimport ResidueMap from '../store/residue-map';\r\nimport BondProxy from '../proxy/bond-proxy';\r\nimport AtomProxy from '../proxy/atom-proxy';\r\nimport ResidueProxy from '../proxy/residue-proxy';\r\nimport ChainProxy from '../proxy/chain-proxy';\r\nimport ModelProxy from '../proxy/model-proxy';\r\n/**\r\n * Structure\r\n */\r\nclass Structure {\r\n    /**\r\n     * @param {String} name - structure name\r\n     * @param {String} path - source path\r\n     */\r\n    constructor(name = '', path = '') {\r\n        this.signals = {\r\n            refreshed: new Signal()\r\n        };\r\n        this.init(name, path);\r\n    }\r\n    init(name, path) {\r\n        this.name = name;\r\n        this.path = path;\r\n        this.title = '';\r\n        this.id = '';\r\n        this.data = createData(this);\r\n        this.header = {};\r\n        this.extraData = {};\r\n        this.atomSetCache = {};\r\n        this.atomSetDict = {};\r\n        this.biomolDict = {};\r\n        this.entityList = [];\r\n        this.unitcell = undefined;\r\n        this.frames = [];\r\n        this.boxes = [];\r\n        this.validation = undefined;\r\n        this.bondStore = new BondStore(0);\r\n        this.backboneBondStore = new BondStore(0);\r\n        this.rungBondStore = new BondStore(0);\r\n        this.atomStore = new AtomStore(0);\r\n        this.residueStore = new ResidueStore(0);\r\n        this.chainStore = new ChainStore(0);\r\n        this.modelStore = new ModelStore(0);\r\n        this.atomMap = new AtomMap(this);\r\n        this.residueMap = new ResidueMap(this);\r\n        this.bondHash = undefined;\r\n        this.spatialHash = undefined;\r\n        this.atomSet = undefined;\r\n        this.bondSet = undefined;\r\n        this.center = new Vector3();\r\n        this.boundingBox = new Box3();\r\n        this._bp = this.getBondProxy();\r\n        this._ap = this.getAtomProxy();\r\n        this._rp = this.getResidueProxy();\r\n        this._cp = this.getChainProxy();\r\n    }\r\n    get type() { return 'Structure'; }\r\n    finalizeAtoms() {\r\n        this.atomSet = this.getAtomSet();\r\n        this.atomCount = this.atomStore.count;\r\n        this.boundingBox = this.getBoundingBox(undefined, this.boundingBox);\r\n        this.center = this.boundingBox.getCenter(new Vector3());\r\n        this.spatialHash = new SpatialHash(this.atomStore, this.boundingBox);\r\n    }\r\n    finalizeBonds() {\r\n        this.bondSet = this.getBondSet();\r\n        this.bondCount = this.bondStore.count;\r\n        this.bondHash = new BondHash(this.bondStore, this.atomStore.count);\r\n        this.atomSetCache = {};\r\n        if (!this.atomSetDict.rung) {\r\n            this.atomSetDict.rung = this.getAtomSet(false);\r\n        }\r\n        for (let name in this.atomSetDict) {\r\n            this.atomSetCache['__' + name] = this.atomSetDict[name].clone();\r\n        }\r\n    }\r\n    //\r\n    getBondProxy(index) {\r\n        return new BondProxy(this, index);\r\n    }\r\n    getAtomProxy(index) {\r\n        return new AtomProxy(this, index);\r\n    }\r\n    getResidueProxy(index) {\r\n        return new ResidueProxy(this, index);\r\n    }\r\n    getChainProxy(index) {\r\n        return new ChainProxy(this, index);\r\n    }\r\n    getModelProxy(index) {\r\n        return new ModelProxy(this, index);\r\n    }\r\n    //\r\n    getBondSet( /* selection */) {\r\n        // TODO implement selection parameter\r\n        const n = this.bondStore.count;\r\n        const bondSet = new BitArray(n);\r\n        const atomSet = this.atomSet;\r\n        if (atomSet) {\r\n            if (atomSet.isAllSet()) {\r\n                bondSet.setAll();\r\n            }\r\n            else if (atomSet.isAllClear()) {\r\n                bondSet.clearAll();\r\n            }\r\n            else {\r\n                const bp = this.getBondProxy();\r\n                for (let i = 0; i < n; ++i) {\r\n                    bp.index = i;\r\n                    if (atomSet.isSet(bp.atomIndex1, bp.atomIndex2)) {\r\n                        bondSet.set(bp.index);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            bondSet.setAll();\r\n        }\r\n        return bondSet;\r\n    }\r\n    getBackboneBondSet( /* selection */) {\r\n        // TODO implement selection parameter\r\n        const n = this.backboneBondStore.count;\r\n        const backboneBondSet = new BitArray(n);\r\n        const backboneAtomSet = this.atomSetCache.__backbone;\r\n        if (backboneAtomSet) {\r\n            const bp = this.getBondProxy();\r\n            bp.bondStore = this.backboneBondStore;\r\n            for (let i = 0; i < n; ++i) {\r\n                bp.index = i;\r\n                if (backboneAtomSet.isSet(bp.atomIndex1, bp.atomIndex2)) {\r\n                    backboneBondSet.set(bp.index);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            backboneBondSet.setAll();\r\n        }\r\n        return backboneBondSet;\r\n    }\r\n    getRungBondSet( /* selection */) {\r\n        // TODO implement selection parameter\r\n        const n = this.rungBondStore.count;\r\n        const rungBondSet = new BitArray(n);\r\n        const rungAtomSet = this.atomSetCache.__rung;\r\n        if (rungAtomSet) {\r\n            const bp = this.getBondProxy();\r\n            bp.bondStore = this.rungBondStore;\r\n            for (let i = 0; i < n; ++i) {\r\n                bp.index = i;\r\n                if (rungAtomSet.isSet(bp.atomIndex1, bp.atomIndex2)) {\r\n                    rungBondSet.set(bp.index);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            rungBondSet.setAll();\r\n        }\r\n        return rungBondSet;\r\n    }\r\n    /**\r\n     * Get a set of atoms\r\n     * @param  {Boolean|Selection|BitArray} selection - object defining how to\r\n     *                                      initialize the atom set.\r\n     *                                      Boolean: init with value;\r\n     *                                      Selection: init with selection;\r\n     *                                      BitArray: return bit array\r\n     * @return {BitArray} set of atoms\r\n     */\r\n    getAtomSet(selection) {\r\n        const n = this.atomStore.count;\r\n        if (selection === undefined) {\r\n            return new BitArray(n, true);\r\n        }\r\n        else if (selection instanceof BitArray) {\r\n            return selection;\r\n        }\r\n        else if (selection === true) {\r\n            return new BitArray(n, true);\r\n        }\r\n        else if (selection && selection.test) {\r\n            const seleString = selection.string;\r\n            if (seleString in this.atomSetCache) {\r\n                return this.atomSetCache[seleString];\r\n            }\r\n            else {\r\n                if (seleString === '') {\r\n                    return new BitArray(n, true);\r\n                }\r\n                else {\r\n                    const atomSet = new BitArray(n);\r\n                    this.eachAtom(function (ap) {\r\n                        atomSet.set(ap.index);\r\n                    }, selection);\r\n                    this.atomSetCache[seleString] = atomSet;\r\n                    return atomSet;\r\n                }\r\n            }\r\n        }\r\n        else if (selection === false) {\r\n            return new BitArray(n);\r\n        }\r\n        return new BitArray(n, true);\r\n    }\r\n    /**\r\n     * Get set of atoms around a set of atoms from a selection\r\n     * @param  {Selection} selection - the selection object\r\n     * @param  {Number} radius - radius to select within\r\n     * @return {BitArray} set of atoms\r\n     */\r\n    getAtomSetWithinSelection(selection, radius) {\r\n        const spatialHash = this.spatialHash;\r\n        const atomSet = this.getAtomSet(false);\r\n        const ap = this.getAtomProxy();\r\n        if (!spatialHash)\r\n            return atomSet;\r\n        this.getAtomSet(selection).forEach(function (idx) {\r\n            ap.index = idx;\r\n            spatialHash.within(ap.x, ap.y, ap.z, radius).forEach(function (idx2) {\r\n                atomSet.set(idx2);\r\n            });\r\n        });\r\n        return atomSet;\r\n    }\r\n    /**\r\n     * Get set of atoms around a point\r\n     * @param  {Vector3|AtomProxy} point - the point\r\n     * @param  {Number} radius - radius to select within\r\n     * @return {BitArray} set of atoms\r\n     */\r\n    getAtomSetWithinPoint(point, radius) {\r\n        const p = point;\r\n        const atomSet = this.getAtomSet(false);\r\n        if (!this.spatialHash)\r\n            return atomSet;\r\n        this.spatialHash.within(p.x, p.y, p.z, radius).forEach(function (idx) {\r\n            atomSet.set(idx);\r\n        });\r\n        return atomSet;\r\n    }\r\n    /**\r\n     * Get set of atoms within a volume\r\n     * @param  {Volume} volume - the volume\r\n     * @param  {Number} radius - radius to select within\r\n     * @param  {[type]} minValue - minimum value to be considered as within the volume\r\n     * @param  {[type]} maxValue - maximum value to be considered as within the volume\r\n     * @param  {[type]} outside - use only values falling outside of the min/max values\r\n     * @return {BitArray} set of atoms\r\n     */\r\n    getAtomSetWithinVolume(volume, radius, minValue, maxValue, outside) {\r\n        const fv = new FilteredVolume(volume, minValue, maxValue, outside); // TODO\r\n        const dp = fv.getDataPosition();\r\n        const n = dp.length;\r\n        const r = fv.matrix.getMaxScaleOnAxis();\r\n        const atomSet = this.getAtomSet(false);\r\n        if (!this.spatialHash)\r\n            return atomSet;\r\n        for (let i = 0; i < n; i += 3) {\r\n            this.spatialHash.within(dp[i], dp[i + 1], dp[i + 2], r).forEach(function (idx) {\r\n                atomSet.set(idx);\r\n            });\r\n        }\r\n        return atomSet;\r\n    }\r\n    /**\r\n     * Get set of all atoms within the groups of a selection\r\n     * @param  {Selection} selection - the selection object\r\n     * @return {BitArray} set of atoms\r\n     */\r\n    getAtomSetWithinGroup(selection) {\r\n        const atomResidueIndex = this.atomStore.residueIndex;\r\n        const atomSet = this.getAtomSet(false);\r\n        const rp = this.getResidueProxy();\r\n        this.getAtomSet(selection).forEach(function (idx) {\r\n            rp.index = atomResidueIndex[idx];\r\n            for (let idx2 = rp.atomOffset; idx2 <= rp.atomEnd; ++idx2) {\r\n                atomSet.set(idx2);\r\n            }\r\n        });\r\n        return atomSet;\r\n    }\r\n    //\r\n    getSelection() {\r\n        return false;\r\n    }\r\n    getStructure() {\r\n        return this;\r\n    }\r\n    /**\r\n     * Entity iterator\r\n     * @param  {function(entity: Entity)} callback - the callback\r\n     * @param  {EntityType} type - entity type\r\n     * @return {undefined}\r\n     */\r\n    eachEntity(callback, type) {\r\n        this.entityList.forEach(function (entity) {\r\n            if (type === undefined || entity.getEntityType() === type) {\r\n                callback(entity);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Bond iterator\r\n     * @param  {function(bond: BondProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachBond(callback, selection) {\r\n        const bp = this.getBondProxy();\r\n        let bondSet;\r\n        if (selection && selection.test) {\r\n            bondSet = this.getBondSet( /*selection*/);\r\n            if (this.bondSet) {\r\n                bondSet.intersection(this.bondSet);\r\n            }\r\n        }\r\n        if (bondSet) {\r\n            bondSet.forEach(function (index) {\r\n                bp.index = index;\r\n                callback(bp);\r\n            });\r\n        }\r\n        else {\r\n            const n = this.bondStore.count;\r\n            for (let i = 0; i < n; ++i) {\r\n                bp.index = i;\r\n                callback(bp);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Atom iterator\r\n     * @param  {function(atom: AtomProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachAtom(callback, selection) {\r\n        if (selection && selection.test) {\r\n            this.eachModel(function (mp) {\r\n                mp.eachAtom(callback, selection);\r\n            }, selection);\r\n        }\r\n        else {\r\n            const an = this.atomStore.count;\r\n            const ap = this.getAtomProxy();\r\n            for (let i = 0; i < an; ++i) {\r\n                ap.index = i;\r\n                callback(ap);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Residue iterator\r\n     * @param  {function(residue: ResidueProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachResidue(callback, selection) {\r\n        if (selection && selection.test) {\r\n            const mn = this.modelStore.count;\r\n            const mp = this.getModelProxy();\r\n            const modelOnlyTest = selection.modelOnlyTest;\r\n            if (modelOnlyTest) {\r\n                for (let i = 0; i < mn; ++i) {\r\n                    mp.index = i;\r\n                    if (modelOnlyTest(mp)) {\r\n                        mp.eachResidue(callback, selection);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < mn; ++i) {\r\n                    mp.index = i;\r\n                    mp.eachResidue(callback, selection);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            const rn = this.residueStore.count;\r\n            const rp = this.getResidueProxy();\r\n            for (let i = 0; i < rn; ++i) {\r\n                rp.index = i;\r\n                callback(rp);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Multi-residue iterator\r\n     * @param {Integer} n - window size\r\n     * @param  {function(residueList: ResidueProxy[])} callback - the callback\r\n     * @return {undefined}\r\n     */\r\n    eachResidueN(n, callback) {\r\n        const rn = this.residueStore.count;\r\n        if (rn < n)\r\n            return;\r\n        const array = new Array(n);\r\n        for (let i = 0; i < n; ++i) {\r\n            array[i] = this.getResidueProxy(i);\r\n        }\r\n        callback.apply(this, array);\r\n        for (let j = n; j < rn; ++j) {\r\n            for (let i = 0; i < n; ++i) {\r\n                array[i].index += 1;\r\n            }\r\n            callback.apply(this, array);\r\n        }\r\n    }\r\n    /**\r\n     * Polymer iterator\r\n     * @param  {function(polymer: Polymer)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachPolymer(callback, selection) {\r\n        if (selection && selection.modelOnlyTest) {\r\n            const modelOnlyTest = selection.modelOnlyTest;\r\n            this.eachModel(function (mp) {\r\n                if (modelOnlyTest(mp)) {\r\n                    mp.eachPolymer(callback, selection);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.eachModel(function (mp) {\r\n                mp.eachPolymer(callback, selection);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Chain iterator\r\n     * @param  {function(chain: ChainProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachChain(callback, selection) {\r\n        if (selection && selection.test) {\r\n            this.eachModel(function (mp) {\r\n                mp.eachChain(callback, selection);\r\n            });\r\n        }\r\n        else {\r\n            const cn = this.chainStore.count;\r\n            const cp = this.getChainProxy();\r\n            for (let i = 0; i < cn; ++i) {\r\n                cp.index = i;\r\n                callback(cp);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Model iterator\r\n     * @param  {function(model: ModelProxy)} callback - the callback\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {undefined}\r\n     */\r\n    eachModel(callback, selection) {\r\n        const n = this.modelStore.count;\r\n        const mp = this.getModelProxy();\r\n        if (selection && selection.test) {\r\n            const modelOnlyTest = selection.modelOnlyTest;\r\n            if (modelOnlyTest) {\r\n                for (let i = 0; i < n; ++i) {\r\n                    mp.index = i;\r\n                    if (modelOnlyTest(mp)) {\r\n                        callback(mp);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < n; ++i) {\r\n                    mp.index = i;\r\n                    callback(mp);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < n; ++i) {\r\n                mp.index = i;\r\n                callback(mp);\r\n            }\r\n        }\r\n    }\r\n    //\r\n    getAtomData(params) {\r\n        const p = Object.assign({}, params);\r\n        if (p.colorParams)\r\n            p.colorParams.structure = this.getStructure();\r\n        const what = p.what;\r\n        const atomSet = defaults(p.atomSet, this.atomSet);\r\n        let radiusFactory; // TODO\r\n        let colormaker; // TODO\r\n        const atomData = {};\r\n        const ap = this.getAtomProxy();\r\n        const atomCount = atomSet.getSize();\r\n        if (!what || what.position) {\r\n            atomData.position = new Float32Array(atomCount * 3);\r\n        }\r\n        if ((!what || what.color) && p.colorParams) {\r\n            atomData.color = new Float32Array(atomCount * 3);\r\n            colormaker = ColormakerRegistry.getScheme(p.colorParams);\r\n        }\r\n        if (!what || what.picking) {\r\n            atomData.picking = new AtomPicker(new Float32Array(atomCount), this.getStructure());\r\n        }\r\n        if (!what || what.radius) {\r\n            atomData.radius = new Float32Array(atomCount);\r\n            radiusFactory = new RadiusFactory(p.radiusParams);\r\n        }\r\n        if (!what || what.index) {\r\n            atomData.index = new Uint32Array(atomCount);\r\n        }\r\n        const { position, color, picking, radius, index } = atomData;\r\n        atomSet.forEach((idx, i) => {\r\n            const i3 = i * 3;\r\n            ap.index = idx;\r\n            if (position) {\r\n                ap.positionToArray(position, i3);\r\n            }\r\n            if (color) {\r\n                colormaker.atomColorToArray(ap, color, i3);\r\n            }\r\n            if (picking) {\r\n                picking.array[i] = idx;\r\n            }\r\n            if (radius) {\r\n                radius[i] = radiusFactory.atomRadius(ap);\r\n            }\r\n            if (index) {\r\n                index[i] = idx;\r\n            }\r\n        });\r\n        return atomData;\r\n    }\r\n    getBondData(params) {\r\n        const p = Object.assign({}, params);\r\n        if (p.colorParams)\r\n            p.colorParams.structure = this.getStructure();\r\n        const what = p.what;\r\n        const bondSet = defaults(p.bondSet, this.bondSet);\r\n        const multipleBond = defaults(p.multipleBond, 'off');\r\n        const isMulti = multipleBond !== 'off';\r\n        const isOffset = multipleBond === 'offset';\r\n        const bondScale = defaults(p.bondScale, 0.4);\r\n        const bondSpacing = defaults(p.bondSpacing, 1.0);\r\n        let radiusFactory; // TODO\r\n        let colormaker; // TODO\r\n        const bondData = {};\r\n        const bp = this.getBondProxy();\r\n        if (p.bondStore)\r\n            bp.bondStore = p.bondStore;\r\n        const ap1 = this.getAtomProxy();\r\n        const ap2 = this.getAtomProxy();\r\n        let bondCount;\r\n        if (isMulti) {\r\n            const storeBondOrder = bp.bondStore.bondOrder;\r\n            bondCount = 0;\r\n            bondSet.forEach(function (index) {\r\n                bondCount += storeBondOrder[index];\r\n            });\r\n        }\r\n        else {\r\n            bondCount = bondSet.getSize();\r\n        }\r\n        if (!what || what.position) {\r\n            bondData.position1 = new Float32Array(bondCount * 3);\r\n            bondData.position2 = new Float32Array(bondCount * 3);\r\n        }\r\n        if ((!what || what.color) && p.colorParams) {\r\n            bondData.color = new Float32Array(bondCount * 3);\r\n            bondData.color2 = new Float32Array(bondCount * 3);\r\n            colormaker = ColormakerRegistry.getScheme(p.colorParams);\r\n        }\r\n        if (!what || what.picking) {\r\n            bondData.picking = new BondPicker(new Float32Array(bondCount), this.getStructure(), p.bondStore);\r\n        }\r\n        if (!what || what.radius || (isMulti && what.position)) {\r\n            radiusFactory = new RadiusFactory(p.radiusParams);\r\n        }\r\n        if (!what || what.radius) {\r\n            bondData.radius = new Float32Array(bondCount);\r\n            if (p.radius2) {\r\n                bondData.radius2 = new Float32Array(bondCount);\r\n            }\r\n        }\r\n        const { position1, position2, color, color2, picking, radius, radius2 } = bondData;\r\n        let i = 0;\r\n        let j, i3, k, bondOrder, absOffset;\r\n        let multiRadius;\r\n        const vt = new Vector3();\r\n        const vShortening = new Vector3();\r\n        const vShift = new Vector3();\r\n        bondSet.forEach((index) => {\r\n            i3 = i * 3;\r\n            bp.index = index;\r\n            ap1.index = bp.atomIndex1;\r\n            ap2.index = bp.atomIndex2;\r\n            bondOrder = bp.bondOrder;\r\n            if (position1) {\r\n                if (isMulti && bondOrder > 1) {\r\n                    const atomRadius = radiusFactory.atomRadius(ap1);\r\n                    multiRadius = atomRadius * bondScale / (0.5 * bondOrder);\r\n                    bp.calculateShiftDir(vShift);\r\n                    if (isOffset) {\r\n                        absOffset = 2 * bondSpacing * atomRadius;\r\n                        vShift.multiplyScalar(absOffset);\r\n                        vShift.negate();\r\n                        // Shortening is calculated so that neighbouring double\r\n                        // bonds on tetrahedral geometry (e.g. sulphonamide)\r\n                        // are not quite touching (arccos(1.9 / 2) ~ 109deg)\r\n                        // but don't shorten beyond 10% each end or it looks odd\r\n                        vShortening.subVectors(ap2, ap1).multiplyScalar(// TODO\r\n                        Math.max(0.1, absOffset / 1.88));\r\n                        ap1.positionToArray(position1, i3);\r\n                        ap2.positionToArray(position2, i3);\r\n                        if (bondOrder >= 2) {\r\n                            vt.addVectors(ap1, vShift).add(vShortening).toArray(position1, i3 + 3); // TODO\r\n                            vt.addVectors(ap2, vShift).sub(vShortening).toArray(position2, i3 + 3); // TODO\r\n                            if (bondOrder >= 3) {\r\n                                vt.subVectors(ap1, vShift).add(vShortening).toArray(position1, i3 + 6); // TODO\r\n                                vt.subVectors(ap2, vShift).sub(vShortening).toArray(position2, i3 + 6); // TODO\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        absOffset = (bondSpacing - bondScale) * atomRadius;\r\n                        vShift.multiplyScalar(absOffset);\r\n                        if (bondOrder === 2) {\r\n                            vt.addVectors(ap1, vShift).toArray(position1, i3); // TODO\r\n                            vt.subVectors(ap1, vShift).toArray(position1, i3 + 3); // TODO\r\n                            vt.addVectors(ap2, vShift).toArray(position2, i3); // TODO\r\n                            vt.subVectors(ap2, vShift).toArray(position2, i3 + 3); // TODO\r\n                        }\r\n                        else if (bondOrder === 3) {\r\n                            ap1.positionToArray(position1, i3);\r\n                            vt.addVectors(ap1, vShift).toArray(position1, i3 + 3); // TODO\r\n                            vt.subVectors(ap1, vShift).toArray(position1, i3 + 6); // TODO\r\n                            ap2.positionToArray(position2, i3);\r\n                            vt.addVectors(ap2, vShift).toArray(position2, i3 + 3); // TODO\r\n                            vt.subVectors(ap2, vShift).toArray(position2, i3 + 6); // TODO\r\n                        }\r\n                        else {\r\n                            // todo, better fallback\r\n                            ap1.positionToArray(position1, i3);\r\n                            ap2.positionToArray(position2, i3);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    ap1.positionToArray(position1, i3);\r\n                    ap2.positionToArray(position2, i3);\r\n                }\r\n            }\r\n            if (color && color2) {\r\n                colormaker.bondColorToArray(bp, 1, color, i3);\r\n                colormaker.bondColorToArray(bp, 0, color2, i3);\r\n                if (isMulti && bondOrder > 1) {\r\n                    for (j = 1; j < bondOrder; ++j) {\r\n                        k = j * 3 + i3;\r\n                        copyWithin(color, i3, k, 3);\r\n                        copyWithin(color2, i3, k, 3);\r\n                    }\r\n                }\r\n            }\r\n            if (picking && picking.array) {\r\n                picking.array[i] = index;\r\n                if (isMulti && bondOrder > 1) {\r\n                    for (j = 1; j < bondOrder; ++j) {\r\n                        picking.array[i + j] = index;\r\n                    }\r\n                }\r\n            }\r\n            if (radius) {\r\n                radius[i] = radiusFactory.atomRadius(ap1);\r\n                if (isMulti && bondOrder > 1) {\r\n                    multiRadius = radius[i] * bondScale / (isOffset ? 1 : (0.5 * bondOrder));\r\n                    for (j = isOffset ? 1 : 0; j < bondOrder; ++j) {\r\n                        radius[i + j] = multiRadius;\r\n                    }\r\n                }\r\n            }\r\n            if (radius2) {\r\n                radius2[i] = radiusFactory.atomRadius(ap2);\r\n                if (isMulti && bondOrder > 1) {\r\n                    multiRadius = radius2[i] * bondScale / (isOffset ? 1 : (0.5 * bondOrder));\r\n                    for (j = isOffset ? 1 : 0; j < bondOrder; ++j) {\r\n                        radius2[i + j] = multiRadius;\r\n                    }\r\n                }\r\n            }\r\n            i += isMulti ? bondOrder : 1;\r\n        });\r\n        return bondData;\r\n    }\r\n    getBackboneAtomData(params) {\r\n        params = Object.assign({\r\n            atomSet: this.atomSetCache.__backbone\r\n        }, params);\r\n        return this.getAtomData(params);\r\n    }\r\n    getBackboneBondData(params) {\r\n        params = Object.assign({\r\n            bondSet: this.getBackboneBondSet(),\r\n            bondStore: this.backboneBondStore\r\n        }, params);\r\n        return this.getBondData(params);\r\n    }\r\n    getRungAtomData(params) {\r\n        params = Object.assign({\r\n            atomSet: this.atomSetCache.__rung\r\n        }, params);\r\n        return this.getAtomData(params);\r\n    }\r\n    getRungBondData(params) {\r\n        params = Object.assign({\r\n            bondSet: this.getRungBondSet(),\r\n            bondStore: this.rungBondStore\r\n        }, params);\r\n        return this.getBondData(params);\r\n    }\r\n    //\r\n    /**\r\n     * Gets the bounding box of the (selected) structure atoms\r\n     * @param  {Selection} [selection] - the selection\r\n     * @param  {Box3} [box] - optional target\r\n     * @return {Vector3} the box\r\n     */\r\n    getBoundingBox(selection, box) {\r\n        if (Debug)\r\n            Log.time('getBoundingBox');\r\n        box = box || new Box3();\r\n        let minX = +Infinity;\r\n        let minY = +Infinity;\r\n        let minZ = +Infinity;\r\n        let maxX = -Infinity;\r\n        let maxY = -Infinity;\r\n        let maxZ = -Infinity;\r\n        this.eachAtom(ap => {\r\n            const x = ap.x;\r\n            const y = ap.y;\r\n            const z = ap.z;\r\n            if (x < minX)\r\n                minX = x;\r\n            if (y < minY)\r\n                minY = y;\r\n            if (z < minZ)\r\n                minZ = z;\r\n            if (x > maxX)\r\n                maxX = x;\r\n            if (y > maxY)\r\n                maxY = y;\r\n            if (z > maxZ)\r\n                maxZ = z;\r\n        }, selection);\r\n        box.min.set(minX, minY, minZ);\r\n        box.max.set(maxX, maxY, maxZ);\r\n        if (Debug)\r\n            Log.timeEnd('getBoundingBox');\r\n        return box;\r\n    }\r\n    /**\r\n     * Gets the principal axes of the (selected) structure atoms\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {PrincipalAxes} the principal axes\r\n     */\r\n    getPrincipalAxes(selection) {\r\n        if (Debug)\r\n            Log.time('getPrincipalAxes');\r\n        let i = 0;\r\n        const coords = new Matrix(3, this.atomCount);\r\n        const cd = coords.data;\r\n        this.eachAtom(a => {\r\n            cd[i + 0] = a.x;\r\n            cd[i + 1] = a.y;\r\n            cd[i + 2] = a.z;\r\n            i += 3;\r\n        }, selection);\r\n        if (Debug)\r\n            Log.timeEnd('getPrincipalAxes');\r\n        return new PrincipalAxes(coords);\r\n    }\r\n    /**\r\n     * Gets the center of the (selected) structure atoms\r\n     * @param  {Selection} [selection] - the selection\r\n     * @return {Vector3} the center\r\n     */\r\n    atomCenter(selection) {\r\n        if (selection) {\r\n            return this.getBoundingBox(selection).getCenter(new Vector3());\r\n        }\r\n        else {\r\n            return this.center.clone();\r\n        }\r\n    }\r\n    hasCoords() {\r\n        if (this._hasCoords === undefined) {\r\n            const atomStore = this.atomStore;\r\n            this._hasCoords = (arrayMin(atomStore.x) !== 0 || arrayMax(atomStore.x) !== 0 ||\r\n                arrayMin(atomStore.y) !== 0 || arrayMax(atomStore.y) !== 0 ||\r\n                arrayMin(atomStore.z) !== 0 || arrayMax(atomStore.z) !== 0) || (\r\n            // allow models with a single atom at the origin\r\n            atomStore.count / this.modelStore.count === 1);\r\n        }\r\n        return this._hasCoords;\r\n    }\r\n    getSequence(selection) {\r\n        const seq = [];\r\n        const rp = this.getResidueProxy();\r\n        this.eachAtom(function (ap) {\r\n            rp.index = ap.residueIndex;\r\n            if (ap.index === rp.traceAtomIndex) {\r\n                seq.push(rp.getResname1());\r\n            }\r\n        }, selection);\r\n        return seq;\r\n    }\r\n    getAtomIndices(selection) {\r\n        if (selection && selection.string) {\r\n            const indices = [];\r\n            this.eachAtom(function (ap) {\r\n                indices.push(ap.index);\r\n            }, selection);\r\n            return new Uint32Array(indices);\r\n        }\r\n        else {\r\n            const p = { what: { index: true } };\r\n            return this.getAtomData(p).index;\r\n        }\r\n    }\r\n    /**\r\n     * Get number of unique chainnames\r\n     * @param  {Selection} selection - limit count to selection\r\n     * @return {Integer} count\r\n     */\r\n    getChainnameCount(selection) {\r\n        const chainnames = new Set();\r\n        this.eachChain(function (cp) {\r\n            if (cp.residueCount) {\r\n                chainnames.add(cp.chainname);\r\n            }\r\n        }, selection);\r\n        return chainnames.size;\r\n    }\r\n    //\r\n    updatePosition(position) {\r\n        let i = 0;\r\n        this.eachAtom(function (ap) {\r\n            ap.positionFromArray(position, i);\r\n            i += 3;\r\n        }, undefined);\r\n        this._hasCoords = undefined; // to trigger recalculation\r\n    }\r\n    refreshPosition() {\r\n        this.getBoundingBox(undefined, this.boundingBox);\r\n        this.boundingBox.getCenter(this.center);\r\n        this.spatialHash = new SpatialHash(this.atomStore, this.boundingBox);\r\n    }\r\n    /**\r\n     * Calls dispose() method of property objects.\r\n     * Unsets properties to help garbage collection.\r\n     * @return {undefined}\r\n     */\r\n    dispose() {\r\n        if (this.frames)\r\n            this.frames.length = 0;\r\n        if (this.boxes)\r\n            this.boxes.length = 0;\r\n        this.bondStore.dispose();\r\n        this.backboneBondStore.dispose();\r\n        this.rungBondStore.dispose();\r\n        this.atomStore.dispose();\r\n        this.residueStore.dispose();\r\n        this.chainStore.dispose();\r\n        this.modelStore.dispose();\r\n        delete this.bondStore;\r\n        delete this.atomStore;\r\n        delete this.residueStore;\r\n        delete this.chainStore;\r\n        delete this.modelStore;\r\n        delete this.frames;\r\n        delete this.boxes;\r\n        delete this.bondSet;\r\n        delete this.atomSet;\r\n    }\r\n}\r\nexport default Structure;\r\n//# sourceMappingURL=structure.js.map","/**\r\n * @file Shape\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Matrix4 required for declaration only\r\nimport { Box3, Vector3 } from 'three';\r\nimport { createParams, ensureFloat32Array, getUintArray } from '../utils';\r\nimport { ArrowPrimitive, BoxPrimitive, ConePrimitive, CylinderPrimitive, EllipsoidPrimitive, OctahedronPrimitive, SpherePrimitive, TetrahedronPrimitive, TextPrimitive, TorusPrimitive, PointPrimitive, WidelinePrimitive } from './primitive';\r\nimport { MeshPicker } from '../utils/picker';\r\nimport MeshBuffer from '../buffer/mesh-buffer';\r\nconst tmpBox = new Box3();\r\nconst Primitives = [\r\n    ArrowPrimitive, BoxPrimitive, ConePrimitive, CylinderPrimitive,\r\n    EllipsoidPrimitive, OctahedronPrimitive, SpherePrimitive, TetrahedronPrimitive,\r\n    TextPrimitive, TorusPrimitive, PointPrimitive, WidelinePrimitive\r\n];\r\nexport const ShapeDefaultParameters = {\r\n    aspectRatio: 1.5,\r\n    sphereDetail: 2,\r\n    radialSegments: 50,\r\n    disableImpostor: false,\r\n    openEnded: false,\r\n    dashedCylinder: false,\r\n    labelParams: {},\r\n    pointSize: 2,\r\n    sizeAttenuation: false,\r\n    useTexture: true,\r\n    linewidth: 2\r\n};\r\n/**\r\n * Class for building custom shapes.\r\n *\r\n * @example\r\n * var shape = new NGL.Shape('shape', { disableImpostor: true });\r\n * shape.addSphere([ 0, 0, 9 ], [ 1, 0, 0 ], 1.5 );\r\n * shape.addEllipsoid([ 6, 0, 0 ], [ 1, 0, 0 ], 1.5, [ 3, 0, 0 ], [ 0, 2, 0 ]);\r\n * shape.addCylinder([ 0, 2, 7 ], [ 0, 0, 9 ], [ 1, 1, 0 ], 0.5);\r\n * shape.addCone([ 0, 2, 7 ], [ 0, 3, 3 ], [ 1, 1, 0 ], 1.5);\r\n * shape.addArrow([ 1, 2, 7 ], [ 30, 3, 3 ], [ 1, 0, 1 ], 1.0);\r\n * shape.addBox([ 0, 3, 0 ], [ 1, 0, 1 ], 2, [ 0, 1, 1 ], [ 1, 0, 1 ]);\r\n * var shapeComp = stage.addComponentFromObject(shape);\r\n * geoComp.addRepresentation('buffer');\r\n */\r\nclass Shape {\r\n    /**\r\n     * @param {String} name - name\r\n     * @param {Object} params - parameter object\r\n     * @param {Integer} params.aspectRatio - arrow aspect ratio, used for cylinder radius and cone length\r\n     * @param {Integer} params.sphereDetail - sphere quality (icosahedron subdivisions)\r\n     * @param {Integer} params.radialSegments - cylinder quality (number of segments)\r\n     * @param {Boolean} params.disableImpostor - disable use of raycasted impostors for rendering\r\n     * @param {Boolean} params.openEnded - capped or not\r\n     * @param {TextBufferParameters} params.labelParams - label parameters\r\n     */\r\n    constructor(name = 'shape', params = {}) {\r\n        this.boundingBox = new Box3();\r\n        this.bufferList = [];\r\n        this.meshCount = 0;\r\n        this._primitiveData = {};\r\n        this.name = name;\r\n        this.parameters = createParams(params, ShapeDefaultParameters);\r\n        Primitives.forEach(P => {\r\n            Object.keys(P.fields).forEach(name => {\r\n                this._primitiveData[P.getShapeKey(name)] = [];\r\n            });\r\n            this._primitiveData[P.getShapeKey('name')] = [];\r\n        });\r\n    }\r\n    /**\r\n     * Add a buffer\r\n     * @param {Buffer} buffer - buffer object\r\n     * @return {Shape} this object\r\n     */\r\n    addBuffer(buffer) {\r\n        this.bufferList.push(buffer);\r\n        const geometry = buffer.geometry; // TODO\r\n        if (!geometry.boundingBox) {\r\n            geometry.computeBoundingBox();\r\n        }\r\n        this.boundingBox.union(geometry.boundingBox);\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a mesh\r\n     * @example\r\n     * shape.addMesh(\r\n     *   [ 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1 ],\r\n     *   [ 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0 ]\r\n     * );\r\n     *\r\n     * @param {Float32Array|Array} position - positions\r\n     * @param {Float32Array|Array} color - colors\r\n     * @param {Uint32Array|Uint16Array|Array} [index] - indices\r\n     * @param {Float32Array|Array} [normal] - normals\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addMesh(position, color, index, normal, name) {\r\n        position = ensureFloat32Array(position);\r\n        color = ensureFloat32Array(color);\r\n        if (Array.isArray(index)) {\r\n            index = getUintArray(index, position.length);\r\n        }\r\n        if (normal) {\r\n            normal = ensureFloat32Array(normal);\r\n        }\r\n        let data;\r\n        if (normal === undefined || normal.length == 0) {\r\n            data = { position, color, index };\r\n        }\r\n        else {\r\n            data = { position, color, index, normal };\r\n        }\r\n        //const data = { position, color, index, normal }\r\n        const picking = new MeshPicker(this, Object.assign({ serial: this.meshCount, name }, data));\r\n        const meshBuffer = new MeshBuffer(Object.assign({ picking }, data));\r\n        this.bufferList.push(meshBuffer);\r\n        tmpBox.setFromArray(position);\r\n        this.boundingBox.union(tmpBox);\r\n        this.meshCount += 1;\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a sphere\r\n     * @example\r\n     * shape.addSphere([ 0, 0, 9 ], [ 1, 0, 0 ], 1.5);\r\n     *\r\n     * @param {Vector3|Array} position - position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} radius - radius value\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addSphere(position, color, radius, name) {\r\n        SpherePrimitive.objectToShape(this, { position, color, radius, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add an ellipsoid\r\n     * @example\r\n     * shape.addEllipsoid([ 6, 0, 0 ], [ 1, 0, 0 ], 1.5, [ 3, 0, 0 ], [ 0, 2, 0 ]);\r\n     *\r\n     * @param {Vector3|Array} position - position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} radius - radius value\r\n     * @param {Vector3|Array} majorAxis - major axis vector or array\r\n     * @param {Vector3|Array} minorAxis - minor axis vector or array\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addEllipsoid(position, color, radius, majorAxis, minorAxis, name) {\r\n        EllipsoidPrimitive.objectToShape(this, { position, color, radius, majorAxis, minorAxis, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a torus\r\n     * @example\r\n     * shape.addTorus([ 6, 0, 0 ], [ 1, 0, 0 ], 1.5, [ 3, 0, 0 ], [ 0, 2, 0 ]);\r\n     *\r\n     * @param {Vector3|Array} position - position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} radius - radius value\r\n     * @param {Vector3|Array} majorAxis - major axis vector or array\r\n     * @param {Vector3|Array} minorAxis - minor axis vector or array\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addTorus(position, color, radius, majorAxis, minorAxis, name) {\r\n        TorusPrimitive.objectToShape(this, { position, color, radius, majorAxis, minorAxis, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a cylinder\r\n     * @example\r\n     * shape.addCylinder([ 0, 2, 7 ], [ 0, 0, 9 ], [ 1, 1, 0 ], 0.5);\r\n     *\r\n     * @param {Vector3|Array} position1 - from position vector or array\r\n     * @param {Vector3|Array} position2 - to position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} radius - radius value\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addCylinder(position1, position2, color, radius, name) {\r\n        CylinderPrimitive.objectToShape(this, { position1, position2, color, radius, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a cone\r\n     * @example\r\n     * shape.addCone([ 0, 2, 7 ], [ 0, 3, 3 ], [ 1, 1, 0 ], 1.5);\r\n     *\r\n     * @param {Vector3|Array} position1 - from position vector or array\r\n     * @param {Vector3|Array} position2 - to position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} radius - radius value\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addCone(position1, position2, color, radius, name) {\r\n        ConePrimitive.objectToShape(this, { position1, position2, color, radius, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add an arrow\r\n     * @example\r\n     * shape.addArrow([ 0, 2, 7 ], [ 0, 0, 9 ], [ 1, 1, 0 ], 0.5);\r\n     *\r\n     * @param {Vector3|Array} position1 - from position vector or array\r\n     * @param {Vector3|Array} position2 - to position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} radius - radius value\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addArrow(position1, position2, color, radius, name) {\r\n        ArrowPrimitive.objectToShape(this, { position1, position2, color, radius, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a box\r\n     * @example\r\n     * shape.addBox([ 0, 3, 0 ], [ 1, 0, 1 ], 2, [ 0, 1, 1 ], [ 1, 0, 1 ]);\r\n     *\r\n     * @param {Vector3|Array} position - position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} size - size value\r\n     * @param {Vector3|Array} heightAxis - height axis vector or array\r\n     * @param {Vector3|Array} depthAxis - depth axis vector or array\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addBox(position, color, size, heightAxis, depthAxis, name) {\r\n        BoxPrimitive.objectToShape(this, { position, color, size, heightAxis, depthAxis, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add an octahedron\r\n     * @example\r\n     * shape.addOctahedron([ 0, 3, 0 ], [ 1, 0, 1 ], 2, [ 0, 1, 1 ], [ 1, 0, 1 ]);\r\n     *\r\n     * @param {Vector3|Array} position - position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} size - size value\r\n     * @param {Vector3|Array} heightAxis - height axis vector or array\r\n     * @param {Vector3|Array} depthAxis - depth axis vector or array\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addOctahedron(position, color, size, heightAxis, depthAxis, name) {\r\n        OctahedronPrimitive.objectToShape(this, { position, color, size, heightAxis, depthAxis, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a tetrahedron\r\n     * @example\r\n     * shape.addTetrahedron([ 0, 3, 0 ], [ 1, 0, 1 ], 2, [ 0, 1, 1 ], [ 1, 0, 1 ]);\r\n     *\r\n     * @param {Vector3|Array} position - position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} size - size value\r\n     * @param {Vector3|Array} heightAxis - height axis vector or array\r\n     * @param {Vector3|Array} depthAxis - depth axis vector or array\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addTetrahedron(position, color, size, heightAxis, depthAxis, name) {\r\n        TetrahedronPrimitive.objectToShape(this, { position, color, size, heightAxis, depthAxis, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add text\r\n     * @example\r\n     * shape.addText([ 10, -2, 4 ], [ 0.2, 0.5, 0.8 ], 0.5, \"Hello\");\r\n     *\r\n     * @param {Vector3|Array} position - position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {Float} size - size value\r\n     * @param {String} text - text value\r\n     * @return {Shape} this object\r\n     */\r\n    addText(position, color, size, text) {\r\n        TextPrimitive.objectToShape(this, { position, color, size, text });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add point\r\n     * @example\r\n     * shape.addPoint([ 10, -2, 4 ], [ 0.2, 0.5, 0.8 ]);\r\n     *\r\n     * @param {Vector3|Array} position - position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addPoint(position, color, name) {\r\n        PointPrimitive.objectToShape(this, { position, color, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a wideline\r\n     * @example\r\n     * shape.addWideline([ 0, 2, 7 ], [ 0, 0, 9 ], [ 1, 1, 0 ]);\r\n     *\r\n     * @param {Vector3|Array} position1 - from position vector or array\r\n     * @param {Vector3|Array} position2 - to position vector or array\r\n     * @param {Color|Array} color - color object or array\r\n     * @param {String} [name] - text\r\n     * @return {Shape} this object\r\n     */\r\n    addWideline(position1, position2, color, linewidth, name) {\r\n        this.parameters.linewidth = linewidth;\r\n        WidelinePrimitive.objectToShape(this, { position1, position2, color, name });\r\n        return this;\r\n    }\r\n    /**\r\n     * Deprecated, use `.addText`\r\n     */\r\n    addLabel(position, color, size, text) {\r\n        console.warn('Shape.addLabel is deprecated, use .addText instead');\r\n        return this.addText(position, color, size, text);\r\n    }\r\n    getBufferList() {\r\n        const buffers = [];\r\n        Primitives.forEach(P => {\r\n            if (this._primitiveData[P.getShapeKey('color')].length) {\r\n                buffers.push(P.bufferFromShape(this, this.parameters));\r\n            }\r\n        });\r\n        return this.bufferList.concat(buffers);\r\n    }\r\n    dispose() {\r\n        this.bufferList.forEach(function (buffer) {\r\n            buffer.dispose();\r\n        });\r\n        this.bufferList.length = 0;\r\n        Primitives.forEach(P => {\r\n            Object.keys(P.fields).forEach(name => {\r\n                this._primitiveData[P.getShapeKey(name)].length = 0;\r\n            });\r\n            this._primitiveData[P.getShapeKey('name')].length = 0;\r\n        });\r\n    }\r\n    get center() {\r\n        if (!this._center) {\r\n            this._center = this.boundingBox.getCenter(new Vector3());\r\n        }\r\n        return this._center;\r\n    }\r\n    get type() { return 'Shape'; }\r\n}\r\nexport default Shape;\r\n//# sourceMappingURL=shape.js.map","/**\r\n * @file Buffer Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Representation from './representation.js';\r\n/**\r\n * Representation for showing buffer objects. Good for efficiently showing\r\n * large amounts of geometric primitives e.g. spheres via {@link SphereBuffer}.\r\n * Smaller numbers of geometric primitives are more easily shown with help\r\n * from the {@link Shape} class.\r\n *\r\n * __Name:__ _buffer_\r\n *\r\n * @example\r\n * // add a single red sphere from a buffer to a shape instance\r\n * var shape = new NGL.Shape( \"shape\" );\r\n * var sphereBuffer = new NGL.SphereBuffer( {\r\n *     position: new Float32Array( [ 0, 0, 0 ] ),\r\n *     color: new Float32Array( [ 1, 0, 0 ] ),\r\n *     radius: new Float32Array( [ 1 ] )\r\n * } );\r\n * shape.addBuffer( sphereBuffer );\r\n * var shapeComp = stage.addComponentFromObject( shape );\r\n * shapeComp.addRepresentation( \"buffer\" );\r\n *\r\n * @example\r\n * // add a single red sphere from a buffer to a structure component instance\r\n * stage.loadFile( \"rcsb://1crn\" ).then( function( o ){\r\n *     var sphereBuffer = new NGL.SphereBuffer( {\r\n *         position: new Float32Array( [ 0, 0, 0 ] ),\r\n *         color: new Float32Array( [ 1, 0, 0 ] ),\r\n *         radius: new Float32Array( [ 1 ] )\r\n *     } );\r\n *     o.addBufferRepresentation( sphereBuffer, { opacity: 0.5 } );\r\n * } );\r\n */\r\nclass BufferRepresentation extends Representation {\r\n    /**\r\n     * Create Buffer representation\r\n     * @param {Buffer} buffer - a buffer object\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {RepresentationParameters} params - representation parameters\r\n     */\r\n    constructor(buffer, viewer, params) {\r\n        if (!Array.isArray(buffer)) {\r\n            buffer = [buffer];\r\n        }\r\n        super(buffer, viewer, params);\r\n        this.type = 'buffer';\r\n        this.parameters = Object.assign({}, this.parameters, {\r\n            colorScheme: null,\r\n            colorScale: null,\r\n            colorValue: null,\r\n            colorDomain: null,\r\n            colorMode: null\r\n        });\r\n        this.buffer = buffer;\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        super.init(params);\r\n        this.build();\r\n    }\r\n    create() {\r\n        this.bufferList.push.apply(this.bufferList, this.buffer);\r\n    }\r\n    attach(callback) {\r\n        this.bufferList.forEach(buffer => {\r\n            this.viewer.add(buffer);\r\n            buffer.setParameters(this.getBufferParams());\r\n        });\r\n        this.setVisibility(this.visible);\r\n        callback();\r\n    }\r\n}\r\nexport default BufferRepresentation;\r\n//# sourceMappingURL=buffer-representation.js.map","/**\r\n * @file Geometry Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3 required for declaration only\r\nimport { Matrix4, Matrix3 } from 'three';\r\nimport { getUintArray } from '../utils';\r\nimport { serialBlockArray } from '../math/array-utils.js';\r\nimport { applyMatrix3toVector3array, applyMatrix4toVector3array } from '../math/vector-utils.js';\r\nimport MeshBuffer from './mesh-buffer.js';\r\nimport { Log } from \"../globals\";\r\nconst matrix = new Matrix4();\r\nconst normalMatrix = new Matrix3();\r\nfunction getData(data, geo) {\r\n    const geoPosition = geo.attributes.position.array;\r\n    const geoIndex = geo.index ? geo.index.array : undefined;\r\n    const n = data.position.length / 3;\r\n    const m = geoPosition.length / 3;\r\n    const size = n * m;\r\n    const meshPosition = new Float32Array(size * 3);\r\n    const meshNormal = new Float32Array(size * 3);\r\n    const meshColor = new Float32Array(size * 3);\r\n    let meshIndex;\r\n    if (geoIndex) {\r\n        meshIndex = getUintArray(n * geoIndex.length, size);\r\n    }\r\n    return {\r\n        position: meshPosition,\r\n        color: meshColor,\r\n        index: meshIndex,\r\n        normal: meshNormal,\r\n        primitiveId: data.primitiveId || serialBlockArray(n, m),\r\n        picking: data.picking\r\n    };\r\n}\r\n/**\r\n * Geometry buffer. Base class for geometry-based buffers. Used to draw\r\n * geometry primitives given a mesh.\r\n * @interface\r\n */\r\nclass GeometryBuffer extends MeshBuffer {\r\n    /**\r\n     * @param {Object} data - buffer data\r\n     * @param {Float32Array} data.position - positions\r\n     * @param {Float32Array} data.color - colors\r\n     * @param {Float32Array} data.radius - radii\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param {BufferParameters} [params] - parameters object\r\n     * @param {BufferGeometry} geo - geometry object\r\n     */\r\n    constructor(data, params = {}, geo) {\r\n        super(getData(data, geo), params);\r\n        this.updateNormals = false;\r\n        const geoPosition = geo.attributes.position.array;\r\n        const geoNormal = geo.attributes.normal.array;\r\n        const geoIndex = geo.index ? geo.index.array : undefined;\r\n        this.geoPosition = geoPosition;\r\n        this.geoNormal = geoNormal;\r\n        this.geoIndex = geoIndex;\r\n        this.positionCount = data.position.length / 3;\r\n        this.geoPositionCount = geoPosition.length / 3;\r\n        this.transformedGeoPosition = new Float32Array(this.geoPositionCount * 3);\r\n        this.transformedGeoNormal = new Float32Array(this.geoPositionCount * 3);\r\n        const attributes = this.geometry.attributes; // TODO\r\n        this.meshPosition = attributes.position.array;\r\n        this.meshColor = attributes.color.array;\r\n        this.meshNormal = attributes.normal.array;\r\n        this.setAttributes(data);\r\n        if (geoIndex) {\r\n            const index = this.geometry.getIndex();\r\n            if (!index) {\r\n                Log.error('Index is null');\r\n                return;\r\n            }\r\n            this.meshIndex = index.array;\r\n            this.makeIndex();\r\n        }\r\n    }\r\n    setAttributes(data = {}, initNormals = false) {\r\n        const attributes = this.geometry.attributes; // TODO\r\n        let position, color;\r\n        let geoPosition, geoNormal;\r\n        let transformedGeoPosition, transformedGeoNormal;\r\n        let meshPosition, meshColor, meshNormal;\r\n        const updateNormals = this.updateNormals;\r\n        if (data.position) {\r\n            position = data.position;\r\n            geoPosition = this.geoPosition;\r\n            meshPosition = this.meshPosition;\r\n            transformedGeoPosition = this.transformedGeoPosition;\r\n            attributes.position.needsUpdate = true;\r\n            if (updateNormals || initNormals) {\r\n                geoNormal = this.geoNormal;\r\n                meshNormal = this.meshNormal;\r\n                transformedGeoNormal = this.transformedGeoNormal;\r\n                attributes.normal.needsUpdate = true;\r\n            }\r\n        }\r\n        if (data.color) {\r\n            color = data.color;\r\n            meshColor = this.meshColor;\r\n            attributes.color.needsUpdate = true;\r\n        }\r\n        const n = this.positionCount;\r\n        const m = this.geoPositionCount;\r\n        for (let i = 0; i < n; ++i) {\r\n            let j, l;\r\n            const k = i * m * 3;\r\n            const i3 = i * 3;\r\n            if (position && transformedGeoPosition && meshPosition && meshNormal && geoPosition && geoNormal) {\r\n                transformedGeoPosition.set(geoPosition);\r\n                matrix.makeTranslation(position[i3], position[i3 + 1], position[i3 + 2]);\r\n                this.applyPositionTransform(matrix, i, i3);\r\n                applyMatrix4toVector3array(matrix.elements, transformedGeoPosition);\r\n                meshPosition.set(transformedGeoPosition, k);\r\n                if (updateNormals && transformedGeoNormal) {\r\n                    transformedGeoNormal.set(geoNormal);\r\n                    normalMatrix.getNormalMatrix(matrix);\r\n                    applyMatrix3toVector3array(normalMatrix.elements, transformedGeoNormal);\r\n                    meshNormal.set(transformedGeoNormal, k);\r\n                }\r\n                else if (initNormals) {\r\n                    meshNormal.set(geoNormal, k);\r\n                }\r\n            }\r\n            if (color && meshColor) {\r\n                for (j = 0; j < m; ++j) {\r\n                    l = k + 3 * j;\r\n                    meshColor[l] = color[i3];\r\n                    meshColor[l + 1] = color[i3 + 1];\r\n                    meshColor[l + 2] = color[i3 + 2];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    makeIndex() {\r\n        const geoIndex = this.geoIndex;\r\n        const meshIndex = this.meshIndex;\r\n        if (!geoIndex)\r\n            return;\r\n        const n = this.positionCount;\r\n        const m = this.geoPositionCount;\r\n        const o = geoIndex.length / 3;\r\n        const o3 = o * 3;\r\n        for (let i = 0; i < n; ++i) {\r\n            const j = i * o3;\r\n            const q = j + o3;\r\n            meshIndex.set(geoIndex, j);\r\n            for (let p = j; p < q; ++p)\r\n                meshIndex[p] += i * m;\r\n        }\r\n    }\r\n}\r\nexport default GeometryBuffer;\r\n//# sourceMappingURL=geometry-buffer.js.map","/**\r\n * @file Sphere Geometry Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { IcosahedronBufferGeometry, Vector3 } from 'three';\r\nimport { defaults } from '../utils';\r\nimport GeometryBuffer from './geometry-buffer';\r\nimport { BufferDefaultParameters } from './buffer';\r\nconst scale = new Vector3();\r\nexport const SphereGeometryBufferDefaultParameters = Object.assign({\r\n    sphereDetail: 1\r\n}, BufferDefaultParameters);\r\n/**\r\n * Sphere geometry buffer.\r\n *\r\n * @example\r\n * var sphereGeometryBuffer = new SphereGeometryBuffer({\r\n *   position: new Float32Array([ 0, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   radius: new Float32Array([ 1 ])\r\n * });\r\n */\r\nclass SphereGeometryBuffer extends GeometryBuffer {\r\n    /**\r\n     * @param {Object} data - attribute object\r\n     * @param {Float32Array} data.position - positions\r\n     * @param {Float32Array} data.color - colors\r\n     * @param {Float32Array} data.radius - radii\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super(data, params, new IcosahedronBufferGeometry(1, defaults(params.sphereDetail, 1)));\r\n        this.setAttributes(data, true);\r\n    }\r\n    get defaultParameters() { return SphereGeometryBufferDefaultParameters; }\r\n    applyPositionTransform(matrix, i) {\r\n        const r = this._radius[i];\r\n        scale.set(r, r, r);\r\n        matrix.scale(scale);\r\n    }\r\n    setAttributes(data = {}, initNormals) {\r\n        if (data.radius)\r\n            this._radius = data.radius;\r\n        super.setAttributes(data, initNormals);\r\n    }\r\n}\r\nexport default SphereGeometryBuffer;\r\n//# sourceMappingURL=spheregeometry-buffer.js.map","/**\r\n * @file Mapped Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { getUintArray } from '../utils';\r\nimport { calculateCenterArray, serialArray } from '../math/array-utils';\r\nimport Buffer from './buffer';\r\n/**\r\n * Mapped buffer. Sends mapping attribute to the GPU and repeats data in\r\n * others attributes. Used to render imposters.\r\n * @interface\r\n */\r\nclass MappedBuffer extends Buffer {\r\n    constructor(mappingType, data, params = {}) {\r\n        super(data, params);\r\n        this.index = getUintArray(this.indexSize, this.attributeSize);\r\n        this.makeIndex();\r\n        this.initIndex(this.index);\r\n        this.addAttributes({\r\n            'mapping': { type: mappingType, value: null }\r\n        });\r\n        this.setAttributes({ primitiveId: serialArray(this.size) });\r\n    }\r\n    get attributeSize() {\r\n        return this.size * this.mappingSize;\r\n    }\r\n    get indexSize() {\r\n        return this.size * this.mappingIndicesSize;\r\n    }\r\n    addAttributes(attributes) {\r\n        const nullValueAttributes = {};\r\n        for (const name in attributes) {\r\n            const a = attributes[name];\r\n            nullValueAttributes[name] = {\r\n                type: a.type,\r\n                value: null\r\n            };\r\n        }\r\n        super.addAttributes(nullValueAttributes);\r\n    }\r\n    getAttributeIndex(dataIndex) {\r\n        return dataIndex * 3 * this.mappingSize;\r\n    }\r\n    setAttributes(data) {\r\n        if (data && !data.position && data.position1 && data.position2) {\r\n            data.position = calculateCenterArray(data.position1, data.position2);\r\n        }\r\n        const size = this.size;\r\n        const mappingSize = this.mappingSize;\r\n        const attributes = this.geometry.attributes; // TODO\r\n        let a, d, itemSize, array, n, i, j;\r\n        for (const name in data) {\r\n            if (name === 'index' || name === 'picking')\r\n                continue;\r\n            d = data[name];\r\n            a = attributes[name];\r\n            itemSize = a.itemSize;\r\n            array = a.array;\r\n            for (let k = 0; k < size; ++k) {\r\n                n = k * itemSize;\r\n                i = n * mappingSize;\r\n                for (let l = 0; l < mappingSize; ++l) {\r\n                    j = i + (itemSize * l);\r\n                    for (let m = 0; m < itemSize; ++m) {\r\n                        array[j + m] = d[n + m];\r\n                    }\r\n                }\r\n            }\r\n            a.needsUpdate = true;\r\n        }\r\n    }\r\n    makeMapping() {\r\n        const size = this.size;\r\n        const mapping = this.mapping;\r\n        const mappingSize = this.mappingSize;\r\n        const mappingItemSize = this.mappingItemSize;\r\n        const attributes = this.geometry.attributes; // TODO\r\n        const aMapping = attributes.mapping.array;\r\n        for (let v = 0; v < size; v++) {\r\n            aMapping.set(mapping, v * mappingItemSize * mappingSize);\r\n        }\r\n    }\r\n    makeIndex() {\r\n        const size = this.size;\r\n        const mappingSize = this.mappingSize;\r\n        const mappingIndices = this.mappingIndices;\r\n        const mappingIndicesSize = this.mappingIndicesSize;\r\n        const index = this.index;\r\n        for (let v = 0; v < size; v++) {\r\n            const ix = v * mappingIndicesSize;\r\n            const it = v * mappingSize;\r\n            index.set(mappingIndices, ix);\r\n            for (let s = 0; s < mappingIndicesSize; ++s) {\r\n                index[ix + s] += it;\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default MappedBuffer;\r\n//# sourceMappingURL=mapped-buffer.js.map","/**\r\n * @file Mapped Quad Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport MappedBuffer from './mapped-buffer';\r\nconst mapping = new Float32Array([\r\n    -1.0, 1.0,\r\n    -1.0, -1.0,\r\n    1.0, 1.0,\r\n    1.0, -1.0\r\n]);\r\nconst mappingIndices = new Uint16Array([\r\n    0, 1, 2,\r\n    1, 3, 2\r\n]);\r\n/**\r\n * Mapped Quad buffer. Draws screen-aligned quads. Used to render impostors.\r\n * @interface\r\n */\r\nclass MappedQuadBuffer extends MappedBuffer {\r\n    constructor(data, params = {}) {\r\n        super('v2', data, params);\r\n    }\r\n    get mapping() { return mapping; }\r\n    get mappingIndices() { return mappingIndices; }\r\n    get mappingIndicesSize() { return 6; }\r\n    get mappingSize() { return 4; }\r\n    get mappingItemSize() { return 2; }\r\n}\r\nexport default MappedQuadBuffer;\r\n//# sourceMappingURL=mappedquad-buffer.js.map","/**\r\n * @file Sphere Impostor Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport '../shader/SphereImpostor.vert';\r\nimport '../shader/SphereImpostor.frag';\r\nimport MappedQuadBuffer from './mappedquad-buffer';\r\n/**\r\n * Sphere impostor buffer.\r\n *\r\n * @example\r\n * var sphereImpostorBuffer = new SphereImpostorBuffer({\r\n *   position: new Float32Array([ 0, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   radius: new Float32Array([ 1 ])\r\n * });\r\n */\r\nclass SphereImpostorBuffer extends MappedQuadBuffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position - positions\r\n     * @param  {Float32Array} data.color - colors\r\n     * @param  {Float32Array} data.radius - radii\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super(data, params);\r\n        this.isImpostor = true;\r\n        this.vertexShader = 'SphereImpostor.vert';\r\n        this.fragmentShader = 'SphereImpostor.frag';\r\n        this.addUniforms({\r\n            'projectionMatrixInverse': { value: new Matrix4() },\r\n            'ortho': { value: 0.0 }\r\n        });\r\n        this.addAttributes({\r\n            'radius': { type: 'f', value: null }\r\n        });\r\n        this.setAttributes(data);\r\n        this.makeMapping();\r\n    }\r\n}\r\nexport default SphereImpostorBuffer;\r\n//# sourceMappingURL=sphereimpostor-buffer.js.map","/**\r\n * @file Sphere Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { BufferRegistry, ExtensionFragDepth } from '../globals';\r\nimport SphereGeometryBuffer, { SphereGeometryBufferDefaultParameters } from './spheregeometry-buffer';\r\nimport SphereImpostorBuffer from './sphereimpostor-buffer';\r\nexport const SphereBufferDefaultParameters = Object.assign({\r\n    disableImpostor: false\r\n}, SphereGeometryBufferDefaultParameters);\r\n/**\r\n * Sphere buffer. Depending on the value {@link ExtensionFragDepth} and\r\n * `params.disableImpostor` the constructor returns either a\r\n * {@link SphereGeometryBuffer} or a {@link SphereImpostorBuffer}\r\n * @implements {Buffer}\r\n *\r\n * @example\r\n * var sphereBuffer = new SphereBuffer( {\r\n *     position: new Float32Array( [ 0, 0, 0 ] ),\r\n *     color: new Float32Array( [ 1, 0, 0 ] ),\r\n *     radius: new Float32Array( [ 1 ] )\r\n * } );\r\n */\r\nclass SphereBuffer {\r\n    /**\r\n     * @param {Object} data - buffer data\r\n     * @param {Float32Array} data.position - positions\r\n     * @param {Float32Array} data.color - colors\r\n     * @param {Float32Array} data.radius - radii\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param {BufferParameters} params - parameters object\r\n     * @return {SphereGeometryBuffer|SphereImpostorBuffer} the buffer object\r\n     */\r\n    constructor(data, params) {\r\n        if (!ExtensionFragDepth || (params && params.disableImpostor)) {\r\n            return new SphereGeometryBuffer(data, params);\r\n        }\r\n        else {\r\n            return new SphereImpostorBuffer(data, params);\r\n        }\r\n    }\r\n}\r\nBufferRegistry.add('sphere', SphereBuffer);\r\nexport default SphereBuffer;\r\n//# sourceMappingURL=sphere-buffer.js.map","/**\r\n * @file Point Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3, Matrix4 required for declaration only\r\nimport { DataTexture } from 'three';\r\nimport '../shader/Point.vert';\r\nimport '../shader/Point.frag';\r\nimport { BufferRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { smoothstep } from '../math/math-utils';\r\nimport Buffer, { BufferDefaultParameters, BufferParameterTypes } from './buffer';\r\nfunction distance(x0, y0, x1, y1) {\r\n    const dx = x1 - x0;\r\n    const dy = y1 - y0;\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\nfunction makePointTexture(params) {\r\n    const p = params || {};\r\n    const width = defaults(p.width, 256);\r\n    const height = defaults(p.height, 256);\r\n    const center = [width / 2, height / 2];\r\n    const radius = Math.min(width / 2, height / 2);\r\n    const delta = defaults(p.delta, 1 / (radius + 1)) * radius;\r\n    let x = 0;\r\n    let y = 0;\r\n    const data = new Uint8Array(width * height * 4);\r\n    for (let i = 0, il = data.length; i < il; i += 4) {\r\n        const dist = distance(x, y, center[0], center[1]);\r\n        const value = 1 - smoothstep(radius - delta, radius, dist);\r\n        data[i] = value * 255;\r\n        data[i + 1] = value * 255;\r\n        data[i + 2] = value * 255;\r\n        data[i + 3] = value * 255;\r\n        if (++x === width) {\r\n            x = 0;\r\n            y++;\r\n        }\r\n    }\r\n    const tex = new DataTexture(data, width, height);\r\n    tex.needsUpdate = true;\r\n    return tex;\r\n}\r\nexport const PointBufferDefaultParameters = Object.assign({\r\n    pointSize: 1,\r\n    sizeAttenuation: true,\r\n    sortParticles: false,\r\n    alphaTest: 0.5,\r\n    useTexture: false,\r\n    forceTransparent: false,\r\n    edgeBleach: 0.0\r\n}, BufferDefaultParameters);\r\nconst PointBufferParameterTypes = Object.assign({\r\n    pointSize: { uniform: 'size' },\r\n    sizeAttenuation: { updateShader: true },\r\n    sortParticles: {},\r\n    alphaTest: { updateShader: true },\r\n    useTexture: { updateShader: true },\r\n    forceTransparent: {},\r\n    edgeBleach: { uniform: true }\r\n}, BufferParameterTypes);\r\n/**\r\n * Point buffer. Draws points. Optionally textured.\r\n *\r\n * @example\r\n * var pointBuffer = new PointBuffer( {\r\n *     position: new Float32Array( [ 0, 0, 0 ] ),\r\n *     color: new Float32Array( [ 1, 0, 0 ] )\r\n * } );\r\n */\r\nclass PointBuffer extends Buffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position - positions\r\n     * @param  {Float32Array} data.color - colors\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super(data, params);\r\n        this.parameterTypes = PointBufferParameterTypes;\r\n        this.vertexShader = 'Point.vert';\r\n        this.fragmentShader = 'Point.frag';\r\n        this.isPoint = true;\r\n        this.addUniforms({\r\n            'size': { value: this.parameters.pointSize },\r\n            'canvasHeight': { value: 1.0 },\r\n            'pixelRatio': { value: 1.0 },\r\n            'map': { value: null }\r\n        });\r\n    }\r\n    get defaultParameters() { return PointBufferDefaultParameters; }\r\n    makeMaterial() {\r\n        super.makeMaterial();\r\n        this.makeTexture();\r\n        const m = this.material;\r\n        const wm = this.wireframeMaterial;\r\n        const pm = this.pickingMaterial;\r\n        m.uniforms.map.value = this.tex;\r\n        m.needsUpdate = true;\r\n        wm.uniforms.map.value = this.tex;\r\n        wm.needsUpdate = true;\r\n        pm.uniforms.map.value = this.tex;\r\n        pm.needsUpdate = true;\r\n    }\r\n    makeTexture() {\r\n        if (this.tex)\r\n            this.tex.dispose();\r\n        this.tex = makePointTexture({ delta: this.parameters.edgeBleach });\r\n    }\r\n    getDefines(type) {\r\n        const defines = super.getDefines(type);\r\n        if (this.parameters.sizeAttenuation) {\r\n            defines.USE_SIZEATTENUATION = 1;\r\n        }\r\n        if (this.parameters.useTexture) {\r\n            defines.USE_MAP = 1;\r\n        }\r\n        if (this.parameters.alphaTest > 0 && this.parameters.alphaTest <= 1) {\r\n            defines.ALPHATEST = this.parameters.alphaTest.toPrecision(2);\r\n        }\r\n        return defines;\r\n    }\r\n    setUniforms(data) {\r\n        if (data && data.edgeBleach !== undefined) {\r\n            this.makeTexture();\r\n            data.map = this.tex;\r\n        }\r\n        super.setUniforms(data);\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        if (this.tex)\r\n            this.tex.dispose();\r\n    }\r\n}\r\nBufferRegistry.add('point', PointBuffer);\r\nexport default PointBuffer;\r\n//# sourceMappingURL=point-buffer.js.map","/**\r\n * @file Dot Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ExtensionFragDepth } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Representation from './representation.js';\r\nimport Volume from '../surface/volume.js';\r\nimport FilteredVolume from '../surface/filtered-volume.js';\r\nimport SphereBuffer from '../buffer/sphere-buffer.js';\r\nimport PointBuffer from '../buffer/point-buffer.js';\r\n/**\r\n * Dot representation\r\n */\r\nclass DotRepresentation extends Representation {\r\n    /**\r\n     * Create Dot representation object\r\n     * @param {Surface|Volume} surface - the surface or volume to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {DotRepresentationParameters} params - dot representation parameters\r\n     */\r\n    constructor(surface, viewer, params) {\r\n        super(surface, viewer, params);\r\n        this.type = 'dot';\r\n        this.parameters = Object.assign({\r\n            thresholdType: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    'value': 'value', 'sigma': 'sigma'\r\n                }\r\n            },\r\n            thresholdMin: {\r\n                type: 'number', precision: 3, max: Infinity, min: -Infinity, rebuild: true\r\n            },\r\n            thresholdMax: {\r\n                type: 'number', precision: 3, max: Infinity, min: -Infinity, rebuild: true\r\n            },\r\n            thresholdOut: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            dotType: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    '': '',\r\n                    'sphere': 'sphere',\r\n                    'point': 'point'\r\n                }\r\n            },\r\n            radiusType: {\r\n                type: 'select',\r\n                options: {\r\n                    '': '',\r\n                    'value': 'value',\r\n                    'abs-value': 'abs-value',\r\n                    'value-min': 'value-min',\r\n                    'deviation': 'deviation',\r\n                    'size': 'size'\r\n                }\r\n            },\r\n            radius: {\r\n                type: 'number', precision: 3, max: 10.0, min: 0.001, property: 'size'\r\n            },\r\n            scale: {\r\n                type: 'number', precision: 3, max: 10.0, min: 0.001\r\n            },\r\n            sphereDetail: true,\r\n            disableImpostor: true,\r\n            pointSize: {\r\n                type: 'number', precision: 1, max: 100, min: 0, buffer: true\r\n            },\r\n            sizeAttenuation: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            sortParticles: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            useTexture: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            alphaTest: {\r\n                type: 'range', step: 0.001, max: 1, min: 0, buffer: true\r\n            },\r\n            forceTransparent: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            edgeBleach: {\r\n                type: 'range', step: 0.001, max: 1, min: 0, buffer: true\r\n            }\r\n        }, this.parameters, {\r\n            colorScheme: {\r\n                type: 'select',\r\n                update: 'color',\r\n                options: {\r\n                    '': '',\r\n                    'value': 'value',\r\n                    'uniform': 'uniform',\r\n                    'random': 'random'\r\n                }\r\n            }\r\n        });\r\n        if (surface instanceof Volume) {\r\n            this.surface = undefined;\r\n            this.volume = new FilteredVolume(surface);\r\n        }\r\n        else {\r\n            this.surface = surface;\r\n            this.volume = undefined;\r\n        }\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'uniform');\r\n        p.colorValue = defaults(p.colorValue, 0xDDDDDD);\r\n        this.thresholdType = defaults(p.thresholdType, 'sigma');\r\n        this.thresholdMin = defaults(p.thresholdMin, 2.0);\r\n        this.thresholdMax = defaults(p.thresholdMax, Infinity);\r\n        this.thresholdOut = defaults(p.thresholdOut, false);\r\n        this.dotType = defaults(p.dotType, 'point');\r\n        this.radius = defaults(p.radius, 0.1);\r\n        this.scale = defaults(p.scale, 1.0);\r\n        this.pointSize = defaults(p.pointSize, 1);\r\n        this.sizeAttenuation = defaults(p.sizeAttenuation, true);\r\n        this.sortParticles = defaults(p.sortParticles, false);\r\n        this.useTexture = defaults(p.useTexture, false);\r\n        this.alphaTest = defaults(p.alphaTest, 0.5);\r\n        this.forceTransparent = defaults(p.forceTransparent, false);\r\n        this.edgeBleach = defaults(p.edgeBleach, 0.0);\r\n        super.init(p);\r\n        this.build();\r\n    }\r\n    attach(callback) {\r\n        this.bufferList.forEach(buffer => {\r\n            this.viewer.add(buffer);\r\n        });\r\n        this.setVisibility(this.visible);\r\n        callback();\r\n    }\r\n    create() {\r\n        var dotData = {};\r\n        if (this.volume) {\r\n            var volume = this.volume;\r\n            var thresholdMin, thresholdMax;\r\n            if (this.thresholdType === 'sigma') {\r\n                thresholdMin = volume.getValueForSigma(this.thresholdMin);\r\n                thresholdMax = volume.getValueForSigma(this.thresholdMax);\r\n            }\r\n            else {\r\n                thresholdMin = this.thresholdMin;\r\n                thresholdMax = this.thresholdMax;\r\n            }\r\n            volume.setFilter(thresholdMin, thresholdMax, this.thresholdOut);\r\n            Object.assign(dotData, {\r\n                position: volume.getDataPosition(),\r\n                color: volume.getDataColor(this.getColorParams())\r\n            });\r\n            if (this.dotType === 'sphere') {\r\n                Object.assign(dotData, {\r\n                    radius: volume.getDataSize(this.radius, this.scale),\r\n                    picking: volume.getDataPicking()\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            var surface = this.surface;\r\n            Object.assign(dotData, {\r\n                position: surface.getPosition(),\r\n                color: surface.getColor(this.getColorParams())\r\n            });\r\n            if (this.dotType === 'sphere') {\r\n                Object.assign(dotData, {\r\n                    radius: surface.getSize(this.radius, this.scale),\r\n                    picking: surface.getPicking()\r\n                });\r\n            }\r\n        }\r\n        if (this.dotType === 'sphere') {\r\n            this.dotBuffer = new SphereBuffer(dotData, this.getBufferParams({\r\n                sphereDetail: this.sphereDetail,\r\n                disableImpostor: this.disableImpostor,\r\n                dullInterior: false\r\n            }));\r\n        }\r\n        else {\r\n            this.dotBuffer = new PointBuffer(dotData, this.getBufferParams({\r\n                pointSize: this.pointSize,\r\n                sizeAttenuation: this.sizeAttenuation,\r\n                sortParticles: this.sortParticles,\r\n                useTexture: this.useTexture,\r\n                alphaTest: this.alphaTest,\r\n                forceTransparent: this.forceTransparent,\r\n                edgeBleach: this.edgeBleach\r\n            }));\r\n        }\r\n        this.bufferList.push(this.dotBuffer);\r\n    }\r\n    update(what = {}) {\r\n        if (this.bufferList.length === 0)\r\n            return;\r\n        const dotData = {};\r\n        if (what.color) {\r\n            if (this.volume) {\r\n                Object.assign(dotData, {\r\n                    color: this.volume.getDataColor(this.getColorParams())\r\n                });\r\n            }\r\n            else {\r\n                Object.assign(dotData, {\r\n                    color: this.surface.getColor(this.getColorParams())\r\n                });\r\n            }\r\n        }\r\n        if (this.dotType === 'sphere' && (what.radius || what.scale)) {\r\n            if (this.volume) {\r\n                Object.assign(dotData, {\r\n                    radius: this.volume.getDataSize(this.radius, this.scale)\r\n                });\r\n            }\r\n            else {\r\n                Object.assign(dotData, {\r\n                    radius: this.surface.getSize(this.radius, this.scale)\r\n                });\r\n            }\r\n        }\r\n        this.dotBuffer.setAttributes(dotData);\r\n    }\r\n    setParameters(params, what = {}, rebuild) {\r\n        if (params && params.thresholdType !== undefined &&\r\n            this.volume instanceof Volume) {\r\n            if (this.thresholdType === 'value' &&\r\n                params.thresholdType === 'sigma') {\r\n                this.thresholdMin = this.volume.getSigmaForValue(this.thresholdMin);\r\n                this.thresholdMax = this.volume.getSigmaForValue(this.thresholdMax);\r\n            }\r\n            else if (this.thresholdType === 'sigma' &&\r\n                params.thresholdType === 'value') {\r\n                this.thresholdMin = this.volume.getValueForSigma(this.thresholdMin);\r\n                this.thresholdMax = this.volume.getValueForSigma(this.thresholdMax);\r\n            }\r\n            this.thresholdType = params.thresholdType;\r\n        }\r\n        if (params && params.radiusType !== undefined) {\r\n            if (params.radiusType === 'radius') {\r\n                this.radius = 0.1;\r\n            }\r\n            else {\r\n                this.radius = parseFloat(params.radiusType);\r\n            }\r\n            what.radius = true;\r\n            if (this.dotType === 'sphere' &&\r\n                (!ExtensionFragDepth || this.disableImpostor)) {\r\n                rebuild = true;\r\n            }\r\n        }\r\n        if (params && params.radius !== undefined) {\r\n            what.radius = true;\r\n            if (this.dotType === 'sphere' &&\r\n                (!ExtensionFragDepth || this.disableImpostor)) {\r\n                rebuild = true;\r\n            }\r\n        }\r\n        if (params && params.scale !== undefined) {\r\n            what.scale = true;\r\n            if (this.dotType === 'sphere' &&\r\n                (!ExtensionFragDepth || this.disableImpostor)) {\r\n                rebuild = true;\r\n            }\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        return this;\r\n    }\r\n}\r\nexport default DotRepresentation;\r\n//# sourceMappingURL=dot-representation.js.map","/**\r\n * @file Image Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { \r\n// @ts-ignore: unused import Vector3, Matrix4 required for declaration only\r\nVector2, BufferAttribute, DataTexture, NormalBlending, NearestFilter, LinearFilter } from 'three';\r\nimport '../shader/Image.vert';\r\nimport '../shader/Image.frag';\r\nimport Buffer, { BufferDefaultParameters, BufferParameterTypes } from './buffer';\r\nconst quadIndices = new Uint16Array([\r\n    0, 1, 2,\r\n    1, 3, 2\r\n]);\r\nconst quadUvs = new Float32Array([\r\n    0, 1,\r\n    0, 0,\r\n    1, 1,\r\n    1, 0\r\n]);\r\nexport const ImageBufferDefaultParameters = Object.assign({\r\n    filter: 'nearest',\r\n    forceTransparent: true\r\n}, BufferDefaultParameters);\r\nexport const ImageBufferParameterTypes = Object.assign({\r\n    filter: { updateShader: true, uniform: true }\r\n}, BufferParameterTypes);\r\n/**\r\n * Image buffer. Draw a single image. Optionally interpolate.\r\n */\r\nclass ImageBuffer extends Buffer {\r\n    /**\r\n     * @param {Object} data - buffer data\r\n     * @param {Float32Array} data.position - image position\r\n     * @param {Float32Array} data.imageData - image data, rgba channels\r\n     * @param {Float32Array} data.width - image width\r\n     * @param {Float32Array} data.height - image height\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param {BufferParameters} [params] - parameters object\r\n     */\r\n    constructor(data, params) {\r\n        super({\r\n            position: data.position,\r\n            index: quadIndices,\r\n            picking: data.picking\r\n        }, params);\r\n        this.parameterTypes = ImageBufferParameterTypes;\r\n        this.alwaysTransparent = true;\r\n        this.hasWireframe = false;\r\n        this.vertexShader = 'Image.vert';\r\n        this.fragmentShader = 'Image.frag';\r\n        const { imageData, width, height } = data;\r\n        const tex = new DataTexture(imageData, width, height);\r\n        tex.flipY = true;\r\n        this.tex = tex;\r\n        const n = imageData.length;\r\n        const pickingData = new Uint8Array(n);\r\n        for (let i = 0; i < n; i += 4) {\r\n            const j = i / 4;\r\n            pickingData[i] = j >> 16 & 255;\r\n            pickingData[i + 1] = j >> 8 & 255;\r\n            pickingData[i + 2] = j & 255;\r\n        }\r\n        const pickingTex = new DataTexture(pickingData, width, height);\r\n        pickingTex.flipY = true;\r\n        pickingTex.minFilter = NearestFilter;\r\n        pickingTex.magFilter = NearestFilter;\r\n        this.pickingTex = pickingTex;\r\n        this.addUniforms({\r\n            'map': { value: tex },\r\n            'pickingMap': { value: pickingTex },\r\n            'mapSize': { value: new Vector2(width, height) }\r\n        });\r\n        this.geometry.setAttribute('uv', new BufferAttribute(quadUvs, 2));\r\n    }\r\n    get defaultParameters() { return ImageBufferDefaultParameters; }\r\n    getDefines(type) {\r\n        const defines = super.getDefines(type);\r\n        const filter = this.parameters.filter;\r\n        if (filter.startsWith('cubic')) {\r\n            defines.CUBIC_INTERPOLATION = 1;\r\n            if (filter.endsWith('bspline')) {\r\n                defines.BSPLINE_FILTER = 1;\r\n            }\r\n            else if (filter.endsWith('catmulrom')) {\r\n                defines.CATMULROM_FILTER = 1;\r\n            }\r\n            else if (filter.endsWith('mitchell')) {\r\n                defines.MITCHELL_FILTER = 1;\r\n            }\r\n        }\r\n        return defines;\r\n    }\r\n    updateTexture() {\r\n        const tex = this.tex;\r\n        const filter = this.parameters.filter;\r\n        if (filter.startsWith('cubic')) {\r\n            tex.minFilter = NearestFilter;\r\n            tex.magFilter = NearestFilter;\r\n        }\r\n        else if (filter === 'linear') {\r\n            tex.minFilter = LinearFilter;\r\n            tex.magFilter = LinearFilter;\r\n        }\r\n        else { // filter === \"nearest\"\r\n            tex.minFilter = NearestFilter;\r\n            tex.magFilter = NearestFilter;\r\n        }\r\n        tex.needsUpdate = true;\r\n        this.pickingTex.needsUpdate = true;\r\n    }\r\n    makeMaterial() {\r\n        super.makeMaterial();\r\n        this.updateTexture();\r\n        const m = this.material;\r\n        m.uniforms.map.value = this.tex;\r\n        m.blending = NormalBlending;\r\n        m.needsUpdate = true;\r\n        const wm = this.wireframeMaterial;\r\n        wm.uniforms.map.value = this.tex;\r\n        wm.blending = NormalBlending;\r\n        wm.needsUpdate = true;\r\n        const pm = this.pickingMaterial;\r\n        pm.uniforms.map.value = this.tex;\r\n        pm.uniforms.pickingMap.value = this.pickingTex;\r\n        pm.blending = NormalBlending;\r\n        pm.needsUpdate = true;\r\n    }\r\n    setUniforms(data) {\r\n        if (data && data.filter !== undefined) {\r\n            this.updateTexture();\r\n            data.map = this.tex;\r\n        }\r\n        super.setUniforms(data);\r\n    }\r\n}\r\nexport default ImageBuffer;\r\n//# sourceMappingURL=image-buffer.js.map","/**\r\n * @file Volume Slice\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { ColormakerRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { SlicePicker } from '../utils/picker.js';\r\nclass VolumeSlice {\r\n    constructor(volume, params) {\r\n        const p = params || {};\r\n        this.dimension = defaults(p.dimension, 'x');\r\n        this.positionType = defaults(p.positionType, 'percent');\r\n        this.position = defaults(p.position, 30);\r\n        this.thresholdType = defaults(p.thresholdType, 'sigma');\r\n        this.thresholdMin = defaults(p.thresholdMin, -Infinity);\r\n        this.thresholdMax = defaults(p.thresholdMax, Infinity);\r\n        this.normalize = defaults(p.normalize, false);\r\n        this.volume = volume;\r\n    }\r\n    getPositionFromCoordinate(coord) {\r\n        const dim = this.dimension;\r\n        const v = this.volume;\r\n        const m = v.matrix;\r\n        const mp = new Vector3().setFromMatrixPosition(m)[dim];\r\n        const ms = new Vector3().setFromMatrixScale(m)[dim];\r\n        let vn;\r\n        if (dim === 'x') {\r\n            vn = v.nx;\r\n        }\r\n        else if (dim === 'y') {\r\n            vn = v.ny;\r\n        }\r\n        else {\r\n            vn = v.nz;\r\n        }\r\n        return Math.round((((coord - mp) / (vn / 100)) + 1) / ms);\r\n    }\r\n    getData(params) {\r\n        params = params || {};\r\n        const v = this.volume;\r\n        const d = v.data;\r\n        const m = v.matrix;\r\n        let p;\r\n        if (this.positionType === 'coordinate') {\r\n            p = this.getPositionFromCoordinate(this.position);\r\n        }\r\n        else {\r\n            p = this.position;\r\n        }\r\n        function pos(dimLen) {\r\n            return Math.round((dimLen / 100) * (p - 1));\r\n        }\r\n        function index(x, y, z, i) {\r\n            return (z * v.ny * v.nx + y * v.nx + x) * 3 + i;\r\n        }\r\n        const position = new Float32Array(4 * 3);\r\n        const vec = new Vector3();\r\n        let width, height;\r\n        let x;\r\n        let y;\r\n        let z;\r\n        let x0 = 0;\r\n        let y0 = 0;\r\n        let z0 = 0;\r\n        let nx = v.nx;\r\n        let ny = v.ny;\r\n        let nz = v.nz;\r\n        function setVec(x, y, z, offset) {\r\n            vec.set(x, y, z).applyMatrix4(m).toArray(position, offset);\r\n        }\r\n        if (this.dimension === 'x') {\r\n            x = pos(v.nx);\r\n            y = v.ny - 1;\r\n            z = v.nz - 1;\r\n            width = v.nz;\r\n            height = v.ny;\r\n            x0 = x;\r\n            nx = x0 + 1;\r\n            setVec(x, 0, 0, 0);\r\n            setVec(x, y, 0, 3);\r\n            setVec(x, 0, z, 6);\r\n            setVec(x, y, z, 9);\r\n        }\r\n        else if (this.dimension === 'y') {\r\n            x = v.nx - 1;\r\n            y = pos(v.ny);\r\n            z = v.nz - 1;\r\n            width = v.nz;\r\n            height = v.nx;\r\n            y0 = y;\r\n            ny = y0 + 1;\r\n            setVec(0, y, 0, 0);\r\n            setVec(x, y, 0, 3);\r\n            setVec(0, y, z, 6);\r\n            setVec(x, y, z, 9);\r\n        }\r\n        else if (this.dimension === 'z') {\r\n            x = v.nx - 1;\r\n            y = v.ny - 1;\r\n            z = pos(v.nz);\r\n            width = v.nx;\r\n            height = v.ny;\r\n            z0 = z;\r\n            nz = z0 + 1;\r\n            setVec(0, 0, z, 0);\r\n            setVec(0, y, z, 3);\r\n            setVec(x, 0, z, 6);\r\n            setVec(x, y, z, 9);\r\n        }\r\n        let i = 0;\r\n        let j = 0;\r\n        const imageData = new Uint8Array(width * height * 4);\r\n        const pickingArray = new Float32Array(width * height);\r\n        let tMin, tMax;\r\n        if (this.thresholdType === 'sigma') {\r\n            tMin = v.getValueForSigma(this.thresholdMin);\r\n            tMax = v.getValueForSigma(this.thresholdMax);\r\n        }\r\n        else {\r\n            tMin = this.thresholdMin;\r\n            tMax = this.thresholdMax;\r\n        }\r\n        const cp = Object.assign({}, params.colorParams, { volume: v });\r\n        if (this.normalize) {\r\n            cp.domain = [0, 1];\r\n        }\r\n        const colormaker = ColormakerRegistry.getScheme(cp);\r\n        const tmp = new Float32Array(3);\r\n        const scale = colormaker.getScale();\r\n        let min = 0, max, diff = 0;\r\n        if (this.normalize) {\r\n            min = +Infinity;\r\n            max = -Infinity;\r\n            for (let iy = y0; iy < ny; ++iy) {\r\n                for (let ix = x0; ix < nx; ++ix) {\r\n                    for (let iz = z0; iz < nz; ++iz) {\r\n                        const idx = index(ix, iy, iz, 0) / 3;\r\n                        const val = d[idx];\r\n                        if (val < min)\r\n                            min = val;\r\n                        if (val > max)\r\n                            max = val;\r\n                    }\r\n                }\r\n            }\r\n            diff = max - min;\r\n        }\r\n        for (let iy = y0; iy < ny; ++iy) {\r\n            for (let ix = x0; ix < nx; ++ix) {\r\n                for (let iz = z0; iz < nz; ++iz) {\r\n                    const idx = index(ix, iy, iz, 0) / 3;\r\n                    let val = d[idx];\r\n                    if (this.normalize) {\r\n                        val = (val - min) / diff;\r\n                    }\r\n                    colormaker.colorToArray(scale(val), tmp);\r\n                    imageData[i] = Math.round(tmp[0] * 255);\r\n                    imageData[i + 1] = Math.round(tmp[1] * 255);\r\n                    imageData[i + 2] = Math.round(tmp[2] * 255);\r\n                    imageData[i + 3] = (val > tMin && val < tMax) ? 255 : 0;\r\n                    pickingArray[j] = idx;\r\n                    ++j;\r\n                    i += 4;\r\n                }\r\n            }\r\n        }\r\n        const picking = new SlicePicker(pickingArray, v);\r\n        return { position, imageData, width, height, picking };\r\n    }\r\n}\r\nexport default VolumeSlice;\r\n//# sourceMappingURL=volume-slice.js.map","/**\r\n * @file Slice Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport Representation from './representation.js';\r\nimport ImageBuffer from '../buffer/image-buffer.js';\r\nimport VolumeSlice from '../surface/volume-slice.js';\r\n/**\r\n * Slice representation\r\n */\r\nclass SliceRepresentation extends Representation {\r\n    /**\r\n     * Create Slice representation object\r\n     * @param {Volume} surface - the volume to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {SliceRepresentationParameters} params - slice representation parameters\r\n     */\r\n    constructor(volume, viewer, params) {\r\n        super(volume, viewer, params);\r\n        this.type = 'slice';\r\n        this.parameters = Object.assign({\r\n            filter: {\r\n                type: 'select',\r\n                buffer: true,\r\n                options: {\r\n                    'nearest': 'nearest',\r\n                    'linear': 'linear',\r\n                    'cubic-bspline': 'cubic-bspline',\r\n                    'cubic-catmulrom': 'cubic-catmulrom',\r\n                    'cubic-mitchell': 'cubic-mitchell'\r\n                }\r\n            },\r\n            positionType: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    'percent': 'percent', 'coordinate': 'coordinate'\r\n                }\r\n            },\r\n            position: {\r\n                type: 'range',\r\n                step: 0.1,\r\n                max: 100,\r\n                min: 1,\r\n                rebuild: true\r\n            },\r\n            dimension: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    'x': 'x', 'y': 'y', 'z': 'z'\r\n                }\r\n            },\r\n            thresholdType: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    'value': 'value', 'sigma': 'sigma'\r\n                }\r\n            },\r\n            thresholdMin: {\r\n                type: 'number', precision: 3, max: Infinity, min: -Infinity, rebuild: true\r\n            },\r\n            thresholdMax: {\r\n                type: 'number', precision: 3, max: Infinity, min: -Infinity, rebuild: true\r\n            },\r\n            normalize: {\r\n                type: 'boolean', rebuild: true\r\n            }\r\n        }, this.parameters, {\r\n            flatShaded: null,\r\n            side: null,\r\n            wireframe: null,\r\n            linewidth: null,\r\n            colorScheme: null,\r\n            roughness: null,\r\n            metalness: null,\r\n            diffuse: null\r\n        });\r\n        this.volume = volume;\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const v = this.volume;\r\n        const p = params || {};\r\n        p.colorDomain = defaults(p.colorDomain, [v.min, v.max]);\r\n        p.colorScheme = defaults(p.colorScheme, 'value');\r\n        p.colorScale = defaults(p.colorScale, 'Spectral');\r\n        this.colorScheme = 'value';\r\n        this.dimension = defaults(p.dimension, 'x');\r\n        this.filter = defaults(p.filter, 'cubic-bspline');\r\n        this.positionType = defaults(p.positionType, 'percent');\r\n        this.position = defaults(p.position, 30);\r\n        this.thresholdType = defaults(p.thresholdType, 'sigma');\r\n        this.thresholdMin = defaults(p.thresholdMin, -Infinity);\r\n        this.thresholdMax = defaults(p.thresholdMax, Infinity);\r\n        this.normalize = defaults(p.normalize, false);\r\n        super.init(p);\r\n        this.build();\r\n    }\r\n    attach(callback) {\r\n        this.bufferList.forEach(buffer => {\r\n            this.viewer.add(buffer);\r\n        });\r\n        this.setVisibility(this.visible);\r\n        callback();\r\n    }\r\n    create() {\r\n        const volumeSlice = new VolumeSlice(this.volume, {\r\n            positionType: this.positionType,\r\n            position: this.position,\r\n            dimension: this.dimension,\r\n            thresholdType: this.thresholdType,\r\n            thresholdMin: this.thresholdMin,\r\n            thresholdMax: this.thresholdMax,\r\n            normalize: this.normalize\r\n        });\r\n        const sliceBuffer = new ImageBuffer(volumeSlice.getData({ colorParams: this.getColorParams() }), this.getBufferParams({\r\n            filter: this.filter\r\n        }));\r\n        this.bufferList.push(sliceBuffer);\r\n    }\r\n}\r\nexport default SliceRepresentation;\r\n//# sourceMappingURL=slice-representation.js.map","/**\r\n * @file Representation Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, RepresentationRegistry } from '../globals';\r\nimport Structure from '../structure/structure';\r\nimport Surface from '../surface/surface';\r\nimport Volume from '../surface/volume';\r\nimport Shape from '../geometry/shape';\r\nimport BufferRepresentation from './buffer-representation';\r\nimport SurfaceRepresentation from './surface-representation';\r\nimport DotRepresentation from './dot-representation';\r\nimport SliceRepresentation from './slice-representation';\r\nfunction logReprUnknown(type) {\r\n    Log.error(`makeRepresentation: representation type ${type} unknown`);\r\n}\r\nexport function makeRepresentation(type, object, viewer, params) {\r\n    if (Debug)\r\n        Log.time('makeRepresentation ' + type);\r\n    var ReprClass;\r\n    if (object instanceof Structure) {\r\n        ReprClass = RepresentationRegistry.get(type);\r\n        if (!ReprClass) {\r\n            logReprUnknown(type);\r\n            return;\r\n        }\r\n    }\r\n    else if (object instanceof Surface) {\r\n        if (type === 'surface') {\r\n            ReprClass = SurfaceRepresentation;\r\n        }\r\n        else if (type === 'dot') {\r\n            ReprClass = DotRepresentation;\r\n        }\r\n        else {\r\n            logReprUnknown(type);\r\n            return;\r\n        }\r\n    }\r\n    else if (object instanceof Volume) {\r\n        if (type === 'surface') {\r\n            ReprClass = SurfaceRepresentation;\r\n        }\r\n        else if (type === 'dot') {\r\n            ReprClass = DotRepresentation;\r\n        }\r\n        else if (type === 'slice') {\r\n            ReprClass = SliceRepresentation;\r\n        }\r\n        else {\r\n            logReprUnknown(type);\r\n            return;\r\n        }\r\n    }\r\n    else if (object instanceof Shape) {\r\n        ReprClass = BufferRepresentation;\r\n        object = object.getBufferList();\r\n    }\r\n    else if (type === 'buffer') {\r\n        ReprClass = BufferRepresentation;\r\n    }\r\n    else {\r\n        Log.error('makeRepresentation: object ' + object + ' unknown');\r\n        return;\r\n    }\r\n    const repr = new ReprClass(object, viewer, params);\r\n    if (Debug)\r\n        Log.timeEnd('makeRepresentation ' + type);\r\n    return repr;\r\n}\r\n//# sourceMappingURL=representation-utils.js.map","/**\r\n * @file Element\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport { createParams } from '../utils';\r\nimport { generateUUID } from '../math/math-utils';\r\nexport const ElementDefaultParameters = {\r\n    name: 'some element',\r\n    status: ''\r\n};\r\n/**\r\n * Element base class\r\n */\r\nclass Element {\r\n    /**\r\n     * @param {Stage} stage - stage object the component belongs to\r\n     * @param {ElementParameters} params - component parameters\r\n     */\r\n    constructor(stage, params = {}) {\r\n        this.stage = stage;\r\n        /**\r\n         * Events emitted by the element\r\n         */\r\n        this.signals = {\r\n            statusChanged: new Signal(),\r\n            nameChanged: new Signal(),\r\n            disposed: new Signal()\r\n        };\r\n        this.parameters = createParams(params, this.defaultParameters);\r\n        this.uuid = generateUUID();\r\n    }\r\n    get defaultParameters() { return ElementDefaultParameters; }\r\n    get name() { return this.parameters.name; }\r\n    setStatus(value) {\r\n        this.parameters.status = value;\r\n        this.signals.statusChanged.dispatch(value);\r\n        return this;\r\n    }\r\n    setName(value) {\r\n        this.parameters.name = value;\r\n        this.signals.nameChanged.dispatch(value);\r\n        return this;\r\n    }\r\n    dispose() {\r\n        this.signals.disposed.dispatch();\r\n    }\r\n}\r\nexport default Element;\r\n//# sourceMappingURL=element.js.map","/**\r\n * @file Representation Element\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport Element, { ElementDefaultParameters } from './element';\r\nexport const RepresentationElementDefaultParameters = Object.assign({\r\n    visible: true\r\n}, ElementDefaultParameters);\r\n/**\r\n * Element wrapping a {@link Representation} object\r\n */\r\nclass RepresentationElement extends Element {\r\n    /**\r\n     * Create representation component\r\n     * @param {Stage} stage - stage object the component belongs to\r\n     * @param {Representation} repr - representation object to wrap\r\n     * @param {RepresentationParameters} [params] - component parameters\r\n     * @param {Component} [parent] - parent component\r\n     */\r\n    constructor(stage, repr, params = {}, parent) {\r\n        super(stage, Object.assign({ name: repr.type }, params));\r\n        this.parent = parent;\r\n        this.signals = Object.assign({\r\n            visibilityChanged: new Signal(),\r\n            parametersChanged: new Signal()\r\n        }, this.signals);\r\n        this.setRepresentation(repr);\r\n    }\r\n    get defaultParameters() { return RepresentationElementDefaultParameters; }\r\n    get visible() { return this.parameters.visible; }\r\n    /**\r\n     * Component type\r\n     * @type {String}\r\n     */\r\n    get type() { return 'representation'; }\r\n    getType() {\r\n        return this.repr.type;\r\n    }\r\n    setRepresentation(repr) {\r\n        this._disposeRepresentation();\r\n        this.repr = repr;\r\n        // this.name = repr.type;\r\n        this.stage.tasks.listen(this.repr.tasks);\r\n        this.updateVisibility();\r\n    }\r\n    _disposeRepresentation() {\r\n        if (this.repr) {\r\n            this.stage.tasks.unlisten(this.repr.tasks);\r\n            this.repr.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this.parent && this.parent.hasRepresentation(this)) {\r\n            this.parent.removeRepresentation(this);\r\n        }\r\n        else {\r\n            this._disposeRepresentation();\r\n            this.signals.disposed.dispatch();\r\n        }\r\n    }\r\n    /**\r\n     * Set the visibility of the component, takes parent visibility into account\r\n     * @param {Boolean} value - visibility flag\r\n     * @return {RepresentationElement} this object\r\n     */\r\n    setVisibility(value) {\r\n        this.parameters.visible = value;\r\n        this.updateVisibility();\r\n        this.signals.visibilityChanged.dispatch(this.parameters.visible);\r\n        return this;\r\n    }\r\n    getVisibility() {\r\n        if (this.parent) {\r\n            return this.parent.parameters.visible && this.parameters.visible;\r\n        }\r\n        else {\r\n            return this.parameters.visible;\r\n        }\r\n    }\r\n    /**\r\n     * Toggle visibility of the component, takes parent visibility into account\r\n     * @return {RepresentationElement} this object\r\n     */\r\n    toggleVisibility() {\r\n        return this.setVisibility(!this.parameters.visible);\r\n    }\r\n    updateVisibility() {\r\n        this.repr.setVisibility(this.getVisibility());\r\n    }\r\n    /**\r\n     * Set selection\r\n     * @param {Object} what - flags indicating what attributes to update\r\n     * @param {Boolean} what.position - update position attribute\r\n     * @param {Boolean} what.color - update color attribute\r\n     * @param {Boolean} what.radius - update radius attribute\r\n     * @return {RepresentationElement} this object\r\n     */\r\n    update(what) {\r\n        this.repr.update(what); // TODO\r\n        return this;\r\n    }\r\n    build(params) {\r\n        this.repr.build(params);\r\n        return this;\r\n    }\r\n    /**\r\n     * Set selection\r\n     * @param {String} string - selection string\r\n     * @return {RepresentationElement} this object\r\n     */\r\n    setSelection(string) {\r\n        const repr = this.repr; // TODO\r\n        if (repr.setSelection) {\r\n            repr.setSelection(string);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Set representation parameters\r\n     * @param {RepresentationParameters} params - parameter object\r\n     * @return {RepresentationElement} this object\r\n     */\r\n    setParameters(params) {\r\n        this.repr.setParameters(params);\r\n        this.signals.parametersChanged.dispatch(this.repr.getParameters());\r\n        return this;\r\n    }\r\n    /**\r\n     * Get representation parameters\r\n     * @return {RepresentationParameters} parameter object\r\n     */\r\n    getParameters() {\r\n        return this.repr.getParameters();\r\n    }\r\n    /**\r\n     * Set color\r\n     * @param {String|Color|Hex} value - color value\r\n     * @return {RepresentationElement} this object\r\n     */\r\n    setColor(value) {\r\n        this.repr.setColor(value);\r\n        return this;\r\n    }\r\n}\r\nexport default RepresentationElement;\r\n//# sourceMappingURL=representation-element.js.map","/**\r\n * @file Component\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Quaternion, Matrix4, Euler, Box3 } from 'three';\r\nimport { Signal } from 'signals';\r\nimport { defaults, createParams } from '../utils';\r\nimport { generateUUID } from '../math/math-utils';\r\nimport Annotation from '../component/annotation';\r\nimport ComponentControls from '../controls/component-controls';\r\nimport { makeRepresentation } from '../representation/representation-utils';\r\nimport RepresentationElement from './representation-element';\r\nconst _m = new Matrix4();\r\nconst _v = new Vector3();\r\nexport const ComponentDefaultParameters = {\r\n    name: '',\r\n    status: '',\r\n    visible: true\r\n};\r\n/**\r\n * Base class for components\r\n */\r\nclass Component {\r\n    /**\r\n     * @param {Stage} stage - stage object the component belongs to\r\n     * @param {ComponentParameters} params - parameter object\r\n     */\r\n    constructor(stage, object, params = {}) {\r\n        this.stage = stage;\r\n        this.object = object;\r\n        /**\r\n         * Events emitted by the component\r\n         */\r\n        this.signals = {\r\n            representationAdded: new Signal(),\r\n            representationRemoved: new Signal(),\r\n            visibilityChanged: new Signal(),\r\n            matrixChanged: new Signal(),\r\n            statusChanged: new Signal(),\r\n            nameChanged: new Signal(),\r\n            disposed: new Signal()\r\n        };\r\n        this.reprList = [];\r\n        this.annotationList = [];\r\n        this.matrix = new Matrix4();\r\n        this.position = new Vector3();\r\n        this.quaternion = new Quaternion();\r\n        this.scale = new Vector3(1, 1, 1);\r\n        this.transform = new Matrix4();\r\n        this.parameters = createParams(params, this.defaultParameters);\r\n        this.uuid = generateUUID();\r\n        this.viewer = stage.viewer;\r\n        this.controls = new ComponentControls(this);\r\n    }\r\n    get defaultParameters() { return ComponentDefaultParameters; }\r\n    get name() { return this.parameters.name; }\r\n    get status() { return this.parameters.status; }\r\n    get visible() { return this.parameters.visible; }\r\n    /**\r\n     * Set position transform\r\n     *\r\n     * @example\r\n     * // translate by 25 angstrom along x axis\r\n     * component.setPosition([ 25, 0, 0 ]);\r\n     *\r\n     * @param {Vector3|Array} p - the coordinates\r\n     * @return {Component} this object\r\n     */\r\n    setPosition(p) {\r\n        if (Array.isArray(p)) {\r\n            this.position.fromArray(p);\r\n        }\r\n        else {\r\n            this.position.copy(p);\r\n        }\r\n        this.updateMatrix();\r\n        return this;\r\n    }\r\n    /**\r\n     * Set local rotation transform\r\n     * (for global rotation use setTransform)\r\n     *\r\n     * @example\r\n     * // rotate by 2 degree radians on x axis\r\n     * component.setRotation( [ 2, 0, 0 ] );\r\n     *\r\n     * @param {Quaternion|Euler|Array} r - the rotation\r\n     * @return {Component} this object\r\n     */\r\n    setRotation(r) {\r\n        if (Array.isArray(r)) {\r\n            if (r.length === 3) {\r\n                const e = new Euler().fromArray(r);\r\n                this.quaternion.setFromEuler(e);\r\n            }\r\n            else {\r\n                this.quaternion.fromArray(r);\r\n            }\r\n        }\r\n        else if (r instanceof Euler) {\r\n            this.quaternion.setFromEuler(r);\r\n        }\r\n        else {\r\n            this.quaternion.copy(r);\r\n        }\r\n        this.updateMatrix();\r\n        return this;\r\n    }\r\n    /**\r\n     * Set scale transform\r\n     *\r\n     * @example\r\n     * // scale by factor of two\r\n     * component.setScale( 2 );\r\n     *\r\n     * @param {Number} s - the scale\r\n     * @return {Component} this object\r\n     */\r\n    setScale(s) {\r\n        this.scale.set(s, s, s);\r\n        this.updateMatrix();\r\n        return this;\r\n    }\r\n    /**\r\n     * Set general transform. Is applied before and in addition\r\n     * to the position, rotation and scale transformations\r\n     *\r\n     * @example\r\n     * component.setTransform( matrix );\r\n     *\r\n     * @param {Matrix4} m - the matrix\r\n     * @return {Component} this object\r\n     */\r\n    setTransform(m) {\r\n        this.transform.copy(m);\r\n        this.updateMatrix();\r\n        return this;\r\n    }\r\n    updateMatrix() {\r\n        const c = this.getCenterUntransformed(_v);\r\n        this.matrix.makeTranslation(-c.x, -c.y, -c.z);\r\n        _m.makeRotationFromQuaternion(this.quaternion);\r\n        this.matrix.premultiply(_m);\r\n        _m.makeScale(this.scale.x, this.scale.y, this.scale.z);\r\n        this.matrix.premultiply(_m);\r\n        const p = this.position;\r\n        _m.makeTranslation(p.x + c.x, p.y + c.y, p.z + c.z);\r\n        this.matrix.premultiply(_m);\r\n        this.matrix.premultiply(this.transform);\r\n        this.updateRepresentationMatrices();\r\n        this.stage.viewer.updateBoundingBox();\r\n        this.signals.matrixChanged.dispatch(this.matrix);\r\n    }\r\n    /**\r\n     * Propogates our matrix to each representation\r\n     */\r\n    updateRepresentationMatrices() {\r\n        this.reprList.forEach(repr => {\r\n            repr.setParameters({ matrix: this.matrix });\r\n        });\r\n    }\r\n    /**\r\n     * Add an anotation object\r\n     * @param {Vector3} position - the 3d position\r\n     * @param {String|Element} content - the HTML content\r\n     * @param {Object} [params] - parameters\r\n     * @param {Integer} params.offsetX - 2d offset in x direction\r\n     * @param {Integer} params.offsetY - 2d offset in y direction\r\n     * @return {Annotation} the added annotation object\r\n     */\r\n    addAnnotation(position, content, params) {\r\n        const annotation = new Annotation(this, position, content, params);\r\n        this.annotationList.push(annotation);\r\n        return annotation;\r\n    }\r\n    /**\r\n     * Iterator over each annotation and executing the callback\r\n     * @param  {Function} callback - function to execute\r\n     * @return {undefined}\r\n     */\r\n    eachAnnotation(callback) {\r\n        this.annotationList.slice().forEach(callback);\r\n    }\r\n    /**\r\n     * Remove the give annotation from the component\r\n     * @param {Annotation} annotation - the annotation to remove\r\n     * @return {undefined}\r\n     */\r\n    removeAnnotation(annotation) {\r\n        const idx = this.annotationList.indexOf(annotation);\r\n        if (idx !== -1) {\r\n            this.annotationList.splice(idx, 1);\r\n            annotation.dispose();\r\n        }\r\n    }\r\n    /**\r\n     * Remove all annotations from the component\r\n     * @return {undefined}\r\n     */\r\n    removeAllAnnotations() {\r\n        this.eachAnnotation(annotation => annotation.dispose());\r\n        this.annotationList.length = 0;\r\n    }\r\n    /**\r\n     * Add a new representation to the component\r\n     * @param {String} type - the name of the representation\r\n     * @param {Object} object - the object on which the representation should be based\r\n     * @param {RepresentationParameters} [params] - representation parameters\r\n     * @return {RepresentationElement} the created representation wrapped into\r\n     *                                   a representation element object\r\n     */\r\n    _addRepresentation(type, object, params, hidden = false) {\r\n        const p = params || {};\r\n        const sp = this.stage.getParameters(); // TODO\r\n        p.matrix = this.matrix.clone();\r\n        p.quality = p.quality || sp.quality;\r\n        p.disableImpostor = defaults(p.disableImpostor, !sp.impostor);\r\n        p.useWorker = defaults(p.useWorker, sp.workerDefault);\r\n        p.visible = defaults(p.visible, true);\r\n        const p2 = Object.assign({}, p, { visible: this.parameters.visible && p.visible });\r\n        const repr = makeRepresentation(type, object, this.viewer, p2);\r\n        const reprElem = new RepresentationElement(this.stage, repr, p, this);\r\n        if (!hidden) {\r\n            this.reprList.push(reprElem);\r\n            this.signals.representationAdded.dispatch(reprElem);\r\n        }\r\n        return reprElem;\r\n    }\r\n    addBufferRepresentation(buffer, params) {\r\n        return this._addRepresentation.call(this, 'buffer', buffer, params);\r\n    }\r\n    hasRepresentation(repr) {\r\n        return this.reprList.indexOf(repr) !== -1;\r\n    }\r\n    /**\r\n     * Iterator over each representation and executing the callback\r\n     * @param  {Function} callback - function to execute\r\n     * @return {undefined}\r\n     */\r\n    eachRepresentation(callback) {\r\n        this.reprList.slice().forEach(callback);\r\n    }\r\n    /**\r\n     * Removes a representation component\r\n     * @param {RepresentationElement} repr - the representation element\r\n     * @return {undefined}\r\n     */\r\n    removeRepresentation(repr) {\r\n        const idx = this.reprList.indexOf(repr);\r\n        if (idx !== -1) {\r\n            this.reprList.splice(idx, 1);\r\n            repr.dispose();\r\n            this.signals.representationRemoved.dispatch(repr);\r\n        }\r\n    }\r\n    updateRepresentations(what) {\r\n        this.reprList.forEach(repr => repr.update(what));\r\n        this.stage.viewer.requestRender();\r\n    }\r\n    /**\r\n     * Removes all representation components\r\n     * @return {undefined}\r\n     */\r\n    removeAllRepresentations() {\r\n        this.eachRepresentation(repr => repr.dispose());\r\n    }\r\n    dispose() {\r\n        this.removeAllAnnotations();\r\n        this.removeAllRepresentations();\r\n        delete this.annotationList;\r\n        delete this.reprList;\r\n        this.signals.disposed.dispatch();\r\n    }\r\n    /**\r\n     * Set the visibility of the component, including added representations\r\n     * @param {Boolean} value - visibility flag\r\n     * @return {Component} this object\r\n     */\r\n    setVisibility(value) {\r\n        this.parameters.visible = value;\r\n        this.eachRepresentation((repr) => repr.updateVisibility());\r\n        this.eachAnnotation((annotation) => annotation.updateVisibility());\r\n        this.signals.visibilityChanged.dispatch(value);\r\n        return this;\r\n    }\r\n    setStatus(value) {\r\n        this.parameters.status = value;\r\n        this.signals.statusChanged.dispatch(value);\r\n        return this;\r\n    }\r\n    setName(value) {\r\n        this.parameters.name = value;\r\n        this.signals.nameChanged.dispatch(value);\r\n        return this;\r\n    }\r\n    /**\r\n     * @return {Box3} the component's bounding box\r\n     */\r\n    getBox(...args) {\r\n        return this.getBoxUntransformed(...args)\r\n            .clone().applyMatrix4(this.matrix);\r\n    }\r\n    /**\r\n     * @return {Vector3} the component's center position\r\n     */\r\n    getCenter(...args) {\r\n        return this.getCenterUntransformed(...args)\r\n            .clone().applyMatrix4(this.matrix);\r\n    }\r\n    getZoom(...args) {\r\n        return this.stage.getZoomForBox(this.getBox(...args));\r\n    }\r\n    /**\r\n     * @abstract\r\n     * @return {Box3} the untransformed component's bounding box\r\n     */\r\n    getBoxUntransformed(...args) {\r\n        return new Box3();\r\n    }\r\n    getCenterUntransformed(...args) {\r\n        return this.getBoxUntransformed().getCenter(new Vector3());\r\n    }\r\n    /**\r\n     * Automatically center and zoom the component\r\n     * @param  {Integer} [duration] - duration of the animation, defaults to 0\r\n     * @return {undefined}\r\n     */\r\n    autoView(duration) {\r\n        this.stage.animationControls.zoomMove(this.getCenter(), this.getZoom(), defaults(duration, 0));\r\n    }\r\n}\r\nexport default Component;\r\n//# sourceMappingURL=component.js.map","/**\r\n * @file Collection\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nclass Collection {\r\n    constructor(list = []) {\r\n        this.list = list;\r\n        // remove elements from list when they get disposed\r\n        const n = list.length;\r\n        for (let i = 0; i < n; ++i) {\r\n            const elm = list[i];\r\n            elm.signals.disposed.add(this._remove, this);\r\n        }\r\n    }\r\n    _remove(elm) {\r\n        const idx = this.list.indexOf(elm);\r\n        if (idx !== -1) {\r\n            this.list.splice(idx, 1);\r\n        }\r\n    }\r\n    get first() {\r\n        return this.list.length > 0 ? this.list[0] : undefined;\r\n    }\r\n    forEach(fn) {\r\n        this.list.forEach(fn);\r\n        return this;\r\n    }\r\n    dispose() {\r\n        return this.forEach((elm) => elm.dispose());\r\n    }\r\n}\r\nexport default Collection;\r\n//# sourceMappingURL=collection.js.map","/**\r\n * @file Component Collection\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Collection from './collection.js';\r\nclass RepresentationCollection extends Collection {\r\n    setParameters(params) {\r\n        return this.forEach((repr) => repr.setParameters(params));\r\n    }\r\n    setVisibility(value) {\r\n        return this.forEach((repr) => repr.setVisibility(value));\r\n    }\r\n    setSelection(string) {\r\n        return this.forEach((repr) => repr.setSelection(string));\r\n    }\r\n    setColor(color) {\r\n        return this.forEach((repr) => repr.setColor(color));\r\n    }\r\n    update(what) {\r\n        return this.forEach((repr) => repr.update(what));\r\n    }\r\n    build(params) {\r\n        return this.forEach((repr) => repr.build(params));\r\n    }\r\n    dispose(params) {\r\n        return this.forEach((repr) => repr.dispose());\r\n    }\r\n}\r\nexport default RepresentationCollection;\r\n//# sourceMappingURL=representation-collection.js.map","/**\r\n * @file Trajectory Component\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport Element, { ElementDefaultParameters } from './element';\r\n/**\r\n * Trajectory component parameter object.\r\n * @typedef {Object} TrajectoryComponentParameters - component parameters\r\n *\r\n * @property {String} name - component name\r\n * @property {Integer} initialFrame - initial frame the trajectory is set to\r\n * @property {Integer} defaultStep - default step size to be used by trajectory players\r\n * @property {Integer} defaultTimeout - default timeout to be used by trajectory players\r\n * @property {String} defaultInterpolateType - one of \"\" (empty string), \"linear\" or \"spline\"\r\n * @property {Integer} defaultInterpolateStep - window size used for interpolation\r\n * @property {String} defaultMode - either \"loop\" or \"once\"\r\n * @property {String} defaultDirection - either \"forward\" or \"backward\"\r\n */\r\nexport const TrajectoryElementDefaultParameters = Object.assign({\r\n    defaultStep: 1,\r\n    defaultTimeout: 50,\r\n    defaultInterpolateType: '',\r\n    defaultInterpolateStep: 5,\r\n    defaultMode: 'loop',\r\n    defaultDirection: 'forward',\r\n    initialFrame: 0\r\n}, ElementDefaultParameters);\r\n/**\r\n * Component wrapping a {@link Trajectory} object\r\n */\r\nclass TrajectoryElement extends Element {\r\n    /**\r\n     * @param {Stage} stage - stage object the component belongs to\r\n     * @param {Trajectory} trajectory - the trajectory object\r\n     * @param {TrajectoryComponentParameters} params - component parameters\r\n     * @param {StructureComponent} parent - the parent structure\r\n     */\r\n    constructor(stage, trajectory, params = {}) {\r\n        super(stage, Object.assign({ name: trajectory.name }, params));\r\n        this.trajectory = trajectory;\r\n        this.signals = Object.assign(this.signals, {\r\n            frameChanged: new Signal(),\r\n            playerChanged: new Signal(),\r\n            countChanged: new Signal(),\r\n            parametersChanged: new Signal()\r\n        });\r\n        // signals\r\n        trajectory.signals.frameChanged.add((i) => {\r\n            this.signals.frameChanged.dispatch(i);\r\n        });\r\n        trajectory.signals.playerChanged.add((player) => {\r\n            this.signals.playerChanged.dispatch(player);\r\n        });\r\n        trajectory.signals.countChanged.add((n) => {\r\n            this.signals.countChanged.dispatch(n);\r\n        });\r\n        //\r\n        if (params.initialFrame !== undefined) {\r\n            this.setFrame(params.initialFrame);\r\n        }\r\n    }\r\n    get defaultParameters() { return TrajectoryElementDefaultParameters; }\r\n    /**\r\n     * Component type\r\n     * @type {String}\r\n     */\r\n    get type() { return 'trajectory'; }\r\n    /**\r\n     * Set the frame of the trajectory\r\n     * @param {Integer} i - frame number\r\n     * @return {undefined}\r\n     */\r\n    setFrame(i) {\r\n        this.trajectory.setFrame(i);\r\n    }\r\n    /**\r\n     * Set trajectory parameters\r\n     * @param {TrajectoryParameters} params - trajectory parameters\r\n     * @return {undefined}\r\n     */\r\n    setParameters(params = {}) {\r\n        this.trajectory.setParameters(params);\r\n        this.signals.parametersChanged.dispatch(params);\r\n    }\r\n    dispose() {\r\n        this.trajectory.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nexport default TrajectoryElement;\r\n//# sourceMappingURL=trajectory-element.js.map","/**\r\n * @file Frames\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nexport default class Frames {\r\n    constructor(name, path) {\r\n        this.name = name;\r\n        this.path = path;\r\n        this.coordinates = [];\r\n        this.boxes = [];\r\n        this.times = [];\r\n        this.timeOffset = 0;\r\n        this.deltaTime = 1;\r\n    }\r\n    get type() { return 'Frames'; }\r\n}\r\n//# sourceMappingURL=frames.js.map","/**\r\n * @file Superposition\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport { Debug, Log } from '../globals';\r\nimport { Matrix, svd, meanRows, subRows, transpose, multiplyABt, invert3x3, multiply3x3, mat3x3determinant, multiply } from '../math/matrix-utils.js';\r\nimport Structure from '../structure/structure';\r\nclass Superposition {\r\n    constructor(atoms1, atoms2) {\r\n        // allocate & init data structures\r\n        this.A = new Matrix(3, 3);\r\n        this.W = new Matrix(1, 3);\r\n        this.U = new Matrix(3, 3);\r\n        this.V = new Matrix(3, 3);\r\n        this.VH = new Matrix(3, 3);\r\n        this.R = new Matrix(3, 3);\r\n        this.tmp = new Matrix(3, 3);\r\n        this.c = new Matrix(3, 3);\r\n        let n1;\r\n        if (atoms1 instanceof Structure) {\r\n            n1 = atoms1.atomCount;\r\n        }\r\n        else if (atoms1 instanceof Float32Array) {\r\n            n1 = atoms1.length / 3;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        let n2;\r\n        if (atoms2 instanceof Structure) {\r\n            n2 = atoms2.atomCount;\r\n        }\r\n        else if (atoms2 instanceof Float32Array) {\r\n            n2 = atoms2.length / 3;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        const n = Math.min(n1, n2);\r\n        const coords1 = new Matrix(3, n);\r\n        const coords2 = new Matrix(3, n);\r\n        this.coords1t = new Matrix(n, 3);\r\n        this.coords2t = new Matrix(n, 3);\r\n        this.transformationMatrix = new Matrix4();\r\n        this.c.data.set([1, 0, 0, 0, 1, 0, 0, 0, -1]);\r\n        // prep coords\r\n        this.prepCoords(atoms1, coords1, n, false);\r\n        this.prepCoords(atoms2, coords2, n, false);\r\n        // superpose\r\n        this._superpose(coords1, coords2);\r\n    }\r\n    _superpose(coords1, coords2) {\r\n        this.mean1 = meanRows(coords1);\r\n        this.mean2 = meanRows(coords2);\r\n        subRows(coords1, this.mean1);\r\n        subRows(coords2, this.mean2);\r\n        transpose(this.coords1t, coords1);\r\n        transpose(this.coords2t, coords2);\r\n        multiplyABt(this.A, this.coords2t, this.coords1t);\r\n        svd(this.A, this.W, this.U, this.V);\r\n        invert3x3(this.V, this.VH);\r\n        multiply3x3(this.R, this.U, this.VH);\r\n        if (mat3x3determinant(this.R) < 0.0) {\r\n            if (Debug)\r\n                Log.log('R not a right handed system');\r\n            multiply3x3(this.tmp, this.c, this.VH);\r\n            multiply3x3(this.R, this.U, this.tmp);\r\n        }\r\n        //get the transformation matrix\r\n        const transformMat_ = new Matrix(4, 4);\r\n        const tmp_1 = new Matrix(4, 4);\r\n        const tmp_2 = new Matrix(4, 4);\r\n        const sub = new Matrix(4, 4);\r\n        const mult = new Matrix(4, 4);\r\n        const add = new Matrix(4, 4);\r\n        const R = this.R.data;\r\n        const M1 = this.mean1;\r\n        const M2 = this.mean2;\r\n        sub.data.set([1, 0, 0, -M1[0],\r\n            0, 1, 0, -M1[1],\r\n            0, 0, 1, -M1[2],\r\n            0, 0, 0, 1]);\r\n        mult.data.set([R[0], R[1], R[2], 0,\r\n            R[3], R[4], R[5], 0,\r\n            R[6], R[7], R[8], 0,\r\n            0, 0, 0, 1]);\r\n        add.data.set([1, 0, 0, M2[0],\r\n            0, 1, 0, M2[1],\r\n            0, 0, 1, M2[2],\r\n            0, 0, 0, 1]);\r\n        transpose(tmp_1, sub);\r\n        multiplyABt(transformMat_, mult, tmp_1);\r\n        transpose(tmp_2, transformMat_);\r\n        multiplyABt(tmp_1, add, tmp_2);\r\n        transpose(transformMat_, tmp_1);\r\n        this.transformationMatrix.elements = transformMat_.data;\r\n    }\r\n    prepCoords(atoms, coords, n, is4X4) {\r\n        let i = 0;\r\n        const cd = coords.data;\r\n        let c = 3;\r\n        let d = n * 3;\r\n        if (is4X4) {\r\n            d = n * 4;\r\n            c = 4;\r\n        }\r\n        if (atoms instanceof Structure) {\r\n            atoms.eachAtom(function (a) {\r\n                if (i < d) {\r\n                    cd[i + 0] = a.x;\r\n                    cd[i + 1] = a.y;\r\n                    cd[i + 2] = a.z;\r\n                    if (is4X4)\r\n                        cd[i + 3] = 1;\r\n                    i += c;\r\n                }\r\n            });\r\n        }\r\n        else if (atoms instanceof Float32Array) {\r\n            for (; i < d; i += c) {\r\n                if (i < d) {\r\n                    cd[i] = atoms[i];\r\n                    cd[i + 1] = atoms[i + 1];\r\n                    cd[i + 2] = atoms[i + 2];\r\n                    if (is4X4)\r\n                        cd[i + 3] = 1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            Log.warn('prepCoords: input type unknown');\r\n        }\r\n    }\r\n    transform(atoms) {\r\n        // allocate data structures\r\n        let n;\r\n        if (atoms instanceof Structure) {\r\n            n = atoms.atomCount;\r\n        }\r\n        else if (atoms instanceof Float32Array) {\r\n            n = atoms.length / 3;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        const coords = new Matrix(4, n);\r\n        const tCoords = new Matrix(n, 4);\r\n        // prep coords\r\n        this.prepCoords(atoms, coords, n, true);\r\n        // check for transformation matrix correctness\r\n        const transform = this.transformationMatrix;\r\n        const det = transform.determinant();\r\n        if (!det) {\r\n            return det;\r\n        }\r\n        // do transform\r\n        const mult = new Matrix(4, 4);\r\n        mult.data = transform.elements;\r\n        multiply(tCoords, coords, mult);\r\n        let i = 0;\r\n        const cd = tCoords.data;\r\n        if (atoms instanceof Structure) {\r\n            atoms.eachAtom(function (a) {\r\n                a.x = cd[i];\r\n                a.y = cd[i + 1];\r\n                a.z = cd[i + 2];\r\n                i += 4;\r\n            });\r\n            //update transformation matrices for each assembly\r\n            const invertTrasform = new Matrix4();\r\n            invertTrasform.getInverse(transform);\r\n            const biomolDict = atoms.biomolDict;\r\n            for (let key in biomolDict) {\r\n                if (biomolDict.hasOwnProperty(key)) {\r\n                    let assembly = biomolDict[key];\r\n                    assembly.partList.forEach(function (part) {\r\n                        part.matrixList.forEach(function (mat) {\r\n                            mat.premultiply(transform);\r\n                            mat.multiply(invertTrasform);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        else if (atoms instanceof Float32Array) {\r\n            const n4 = n * 4;\r\n            for (; i < n4; i += 4) {\r\n                atoms[i] = cd[i];\r\n                atoms[i + 1] = cd[i + 1];\r\n                atoms[i + 2] = cd[i + 2];\r\n            }\r\n        }\r\n        else {\r\n            Log.warn('transform: input type unknown');\r\n        }\r\n        return this.transformationMatrix;\r\n    }\r\n}\r\nexport default Superposition;\r\n//# sourceMappingURL=superposition.js.map","/**\r\n * @file Trajectory Player\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport { defaults, createParams, updateParams } from '../utils';\r\nexport const TrajectoryPlayerDefaultParameters = {\r\n    step: 1,\r\n    timeout: 50,\r\n    start: 0,\r\n    end: 0,\r\n    interpolateType: '',\r\n    interpolateStep: 5,\r\n    mode: 'loop',\r\n    direction: 'forward'\r\n};\r\n/**\r\n * Trajectory player for animating coordinate frames\r\n * @example\r\n * var player = new TrajectoryPlayer(trajectory, {step: 1, timeout: 50});\r\n * player.play();\r\n */\r\nclass TrajectoryPlayer {\r\n    /**\r\n     * make trajectory player\r\n     * @param {Trajectory} traj - the trajectory\r\n     * @param {TrajectoryPlayerParameters} [params] - parameter object\r\n     */\r\n    constructor(traj, params = {}) {\r\n        this.signals = {\r\n            startedRunning: new Signal(),\r\n            haltedRunning: new Signal()\r\n        };\r\n        this._run = false;\r\n        this._previousTime = 0;\r\n        this._currentTime = 0;\r\n        this._currentStep = 1;\r\n        traj.signals.playerChanged.add((player) => {\r\n            if (player !== this) {\r\n                this.pause();\r\n            }\r\n        }, this);\r\n        const n = defaults(traj.frameCount, 1);\r\n        this.traj = traj;\r\n        this.parameters = createParams(params, TrajectoryPlayerDefaultParameters);\r\n        this.parameters.end = Math.min(defaults(params.end, n - 1), n - 1);\r\n        this.parameters.step = defaults(params.step, Math.ceil((n + 1) / 100));\r\n        this._currentFrame = this.parameters.start;\r\n        this._direction = this.parameters.direction === 'bounce' ? 'forward' : this.parameters.direction;\r\n        traj.signals.countChanged.add((n) => {\r\n            this.parameters.end = Math.min(defaults(this.parameters.end, n - 1), n - 1);\r\n        }, this);\r\n        this._animate = this._animate.bind(this);\r\n    }\r\n    get isRunning() { return this._run; }\r\n    /**\r\n     * set player parameters\r\n     * @param {TrajectoryPlayerParameters} [params] - parameter object\r\n     */\r\n    setParameters(params = {}) {\r\n        updateParams(this.parameters, params);\r\n        if (params.direction !== undefined && this.parameters.direction !== 'bounce') {\r\n            this._direction = this.parameters.direction;\r\n        }\r\n    }\r\n    _animate() {\r\n        if (!this._run)\r\n            return;\r\n        this._currentTime = window.performance.now();\r\n        const dt = this._currentTime - this._previousTime;\r\n        const step = this.parameters.interpolateType ? this.parameters.interpolateStep : 1;\r\n        const timeout = this.parameters.timeout / step;\r\n        const traj = this.traj;\r\n        if (traj && traj.frameCount && !traj.inProgress && dt >= timeout) {\r\n            if (this.parameters.interpolateType) {\r\n                if (this._currentStep > this.parameters.interpolateStep) {\r\n                    this._currentStep = 1;\r\n                }\r\n                if (this._currentStep === 1) {\r\n                    this._currentFrame = this._nextInterpolated();\r\n                }\r\n                if (traj.hasFrame(this._currentFrame)) {\r\n                    this._currentStep += 1;\r\n                    const t = this._currentStep / (this.parameters.interpolateStep + 1);\r\n                    const [i, ip, ipp, ippp] = this._currentFrame;\r\n                    traj.setFrameInterpolated(i, ip, ipp, ippp, t, this.parameters.interpolateType);\r\n                    this._previousTime = this._currentTime;\r\n                }\r\n                else {\r\n                    traj.loadFrame(this._currentFrame);\r\n                }\r\n            }\r\n            else {\r\n                const i = this._next();\r\n                if (traj.hasFrame(i)) {\r\n                    traj.setFrame(i);\r\n                    this._previousTime = this._currentTime;\r\n                }\r\n                else {\r\n                    traj.loadFrame(i);\r\n                }\r\n            }\r\n        }\r\n        window.requestAnimationFrame(this._animate);\r\n    }\r\n    _next() {\r\n        const p = this.parameters;\r\n        let i;\r\n        if (this._direction === 'forward') {\r\n            i = this.traj.currentFrame + p.step;\r\n        }\r\n        else {\r\n            i = this.traj.currentFrame - p.step;\r\n        }\r\n        if (i > p.end || i < p.start) {\r\n            if (p.direction === 'bounce') {\r\n                if (this._direction === 'forward') {\r\n                    this._direction = 'backward';\r\n                }\r\n                else {\r\n                    this._direction = 'forward';\r\n                }\r\n            }\r\n            if (p.mode === 'once') {\r\n                this.pause();\r\n                if (p.direction === 'forward') {\r\n                    i = p.end;\r\n                }\r\n                else if (p.direction === 'backward') {\r\n                    i = p.start;\r\n                }\r\n                else {\r\n                    if (this._direction === 'forward') {\r\n                        i = p.start;\r\n                    }\r\n                    else {\r\n                        i = p.end;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (this._direction === 'forward') {\r\n                    i = p.start;\r\n                    if (p.interpolateType) {\r\n                        i = Math.min(p.end, i + p.step);\r\n                    }\r\n                }\r\n                else {\r\n                    i = p.end;\r\n                    if (p.interpolateType) {\r\n                        i = Math.max(p.start, i - p.step);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return i;\r\n    }\r\n    _nextInterpolated() {\r\n        const p = this.parameters;\r\n        const i = this._next();\r\n        let ip, ipp, ippp;\r\n        if (this._direction === 'forward') {\r\n            ip = Math.max(p.start, i - p.step);\r\n            ipp = Math.max(p.start, i - 2 * p.step);\r\n            ippp = Math.max(p.start, i - 3 * p.step);\r\n        }\r\n        else {\r\n            ip = Math.min(p.end, i + p.step);\r\n            ipp = Math.min(p.end, i + 2 * p.step);\r\n            ippp = Math.min(p.end, i + 3 * p.step);\r\n        }\r\n        return [i, ip, ipp, ippp];\r\n    }\r\n    /**\r\n     * toggle between playing and pausing the animation\r\n     * @return {undefined}\r\n     */\r\n    toggle() {\r\n        if (this._run) {\r\n            this.pause();\r\n        }\r\n        else {\r\n            this.play();\r\n        }\r\n    }\r\n    /**\r\n     * start the animation\r\n     * @return {undefined}\r\n     */\r\n    play() {\r\n        if (!this._run) {\r\n            if (this.traj.player !== this) {\r\n                this.traj.setPlayer(this);\r\n            }\r\n            this._currentStep = 1;\r\n            const p = this.parameters;\r\n            const frame = this.traj.currentFrame;\r\n            // snap to the grid implied by this.step division and multiplication\r\n            // thus minimizing cache misses\r\n            let i = Math.ceil(frame / p.step) * p.step;\r\n            // wrap when restarting from the limit (i.e. end or start)\r\n            if (p.direction === 'forward' && frame >= p.end) {\r\n                i = p.start;\r\n            }\r\n            else if (p.direction === 'backward' && frame <= p.start) {\r\n                i = p.end;\r\n            }\r\n            this.traj.setFrame(i);\r\n            this._run = true;\r\n            this._animate();\r\n            this.signals.startedRunning.dispatch();\r\n        }\r\n    }\r\n    /**\r\n     * pause the animation\r\n     * @return {undefined}\r\n     */\r\n    pause() {\r\n        this._run = false;\r\n        this.signals.haltedRunning.dispatch();\r\n    }\r\n    /**\r\n     * stop the animation (pause and go to start-frame)\r\n     * @return {undefined}\r\n     */\r\n    stop() {\r\n        this.pause();\r\n        this.traj.setFrame(this.parameters.start);\r\n    }\r\n}\r\nexport default TrajectoryPlayer;\r\n//# sourceMappingURL=trajectory-player.js.map","/**\r\n * @file Trajectory\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport { Log } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { circularMean, arrayMean } from '../math/array-utils';\r\nimport { lerp, spline } from '../math/math-utils';\r\nimport Selection from '../selection/selection';\r\nimport Superposition from '../align/superposition';\r\nimport TrajectoryPlayer from './trajectory-player';\r\nfunction centerPbc(coords, mean, box) {\r\n    if (box[0] === 0 || box[8] === 0 || box[4] === 0) {\r\n        return;\r\n    }\r\n    const n = coords.length;\r\n    const bx = box[0];\r\n    const by = box[1];\r\n    const bz = box[2];\r\n    const mx = mean[0];\r\n    const my = mean[1];\r\n    const mz = mean[2];\r\n    const fx = -mx + bx + bx / 2;\r\n    const fy = -my + by + by / 2;\r\n    const fz = -mz + bz + bz / 2;\r\n    for (let i = 0; i < n; i += 3) {\r\n        coords[i + 0] = (coords[i + 0] + fx) % bx;\r\n        coords[i + 1] = (coords[i + 1] + fy) % by;\r\n        coords[i + 2] = (coords[i + 2] + fz) % bz;\r\n    }\r\n}\r\nfunction removePbc(x, box) {\r\n    if (box[0] === 0 || box[8] === 0 || box[4] === 0) {\r\n        return;\r\n    }\r\n    // ported from GROMACS src/gmxlib/rmpbc.c:rm_gropbc()\r\n    // in-place\r\n    const n = x.length;\r\n    for (let i = 3; i < n; i += 3) {\r\n        for (let j = 0; j < 3; ++j) {\r\n            const dist = x[i + j] - x[i - 3 + j];\r\n            if (Math.abs(dist) > 0.9 * box[j * 3 + j]) {\r\n                if (dist > 0) {\r\n                    for (let d = 0; d < 3; ++d) {\r\n                        x[i + d] -= box[j * 3 + d];\r\n                    }\r\n                }\r\n                else {\r\n                    for (let d = 0; d < 3; ++d) {\r\n                        x[i + d] += box[j * 3 + d];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return x;\r\n}\r\nfunction removePeriodicity(x, box, mean) {\r\n    if (box[0] === 0 || box[8] === 0 || box[4] === 0) {\r\n        return;\r\n    }\r\n    const n = x.length;\r\n    for (let i = 3; i < n; i += 3) {\r\n        for (let j = 0; j < 3; ++j) {\r\n            const f = (x[i + j] - mean[j]) / box[j * 3 + j];\r\n            if (Math.abs(f) > 0.5) {\r\n                x[i + j] -= box[j * 3 + j] * Math.round(f);\r\n            }\r\n        }\r\n    }\r\n    return x;\r\n}\r\nfunction circularMean3(indices, coords, box) {\r\n    return [\r\n        circularMean(coords, box[0], 3, 0, indices),\r\n        circularMean(coords, box[1], 3, 1, indices),\r\n        circularMean(coords, box[2], 3, 2, indices)\r\n    ];\r\n}\r\nfunction arrayMean3(coords) {\r\n    return [\r\n        arrayMean(coords, 3, 0),\r\n        arrayMean(coords, 3, 1),\r\n        arrayMean(coords, 3, 2)\r\n    ];\r\n}\r\nfunction interpolateSpline(c, cp, cpp, cppp, t) {\r\n    const m = c.length;\r\n    const coords = new Float32Array(m);\r\n    for (let j0 = 0; j0 < m; j0 += 3) {\r\n        const j1 = j0 + 1;\r\n        const j2 = j0 + 2;\r\n        coords[j0] = spline(cppp[j0], cpp[j0], cp[j0], c[j0], t, 1);\r\n        coords[j1] = spline(cppp[j1], cpp[j1], cp[j1], c[j1], t, 1);\r\n        coords[j2] = spline(cppp[j2], cpp[j2], cp[j2], c[j2], t, 1);\r\n    }\r\n    return coords;\r\n}\r\nfunction interpolateLerp(c, cp, t) {\r\n    const m = c.length;\r\n    const coords = new Float32Array(m);\r\n    for (let j0 = 0; j0 < m; j0 += 3) {\r\n        const j1 = j0 + 1;\r\n        const j2 = j0 + 2;\r\n        coords[j0] = lerp(cp[j0], c[j0], t);\r\n        coords[j1] = lerp(cp[j1], c[j1], t);\r\n        coords[j2] = lerp(cp[j2], c[j2], t);\r\n    }\r\n    return coords;\r\n}\r\n/**\r\n * Base class for trajectories, tying structures and coordinates together\r\n * @interface\r\n */\r\nclass Trajectory {\r\n    /**\r\n     * @param {String} trajPath - trajectory source\r\n     * @param {Structure} structure - the structure object\r\n     * @param {TrajectoryParameters} params - trajectory parameters\r\n     */\r\n    constructor(trajPath, structure, params = {}) {\r\n        this.signals = {\r\n            countChanged: new Signal(),\r\n            frameChanged: new Signal(),\r\n            playerChanged: new Signal()\r\n        };\r\n        this.frameCache = {};\r\n        this.loadQueue = {};\r\n        this.boxCache = {};\r\n        this.pathCache = {};\r\n        this.frameCacheSize = 0;\r\n        this._frameCount = 0;\r\n        this._currentFrame = -1;\r\n        this._disposed = false;\r\n        this.deltaTime = defaults(params.deltaTime, 0);\r\n        this.timeOffset = defaults(params.timeOffset, 0);\r\n        this.centerPbc = defaults(params.centerPbc, false);\r\n        this.removePbc = defaults(params.removePbc, false);\r\n        this.removePeriodicity = defaults(params.removePeriodicity, false);\r\n        this.superpose = defaults(params.superpose, false);\r\n        this.name = trajPath.replace(/^.*[\\\\/]/, '');\r\n        this.trajPath = trajPath;\r\n        this.selection = new Selection(defaults(params.sele, 'backbone and not hydrogen'));\r\n        this.selection.signals.stringChanged.add(() => {\r\n            this.selectionIndices = this.structure.getAtomIndices(this.selection);\r\n            this._resetCache();\r\n            this._saveInitialCoords();\r\n            this.setFrame(this._currentFrame);\r\n        });\r\n    }\r\n    /**\r\n     * Number of frames in the trajectory\r\n     */\r\n    get frameCount() {\r\n        return this._frameCount;\r\n    }\r\n    /**\r\n     * Currently set frame of the trajectory\r\n     */\r\n    get currentFrame() {\r\n        return this._currentFrame;\r\n    }\r\n    _init(structure) {\r\n        this.setStructure(structure);\r\n        this._loadFrameCount();\r\n        this.setPlayer(new TrajectoryPlayer(this));\r\n    }\r\n    _loadFrameCount() { }\r\n    setStructure(structure) {\r\n        this.structure = structure;\r\n        this.atomCount = structure.atomCount;\r\n        this.backboneIndices = this._getIndices(new Selection('backbone and not hydrogen'));\r\n        this._makeAtomIndices();\r\n        this._saveStructureCoords();\r\n        this.selectionIndices = this._getIndices(this.selection);\r\n        this._resetCache();\r\n        this._saveInitialCoords();\r\n        this.setFrame(this._currentFrame);\r\n    }\r\n    _saveInitialCoords() {\r\n        if (this.structure.hasCoords()) {\r\n            this.initialCoords = new Float32Array(this.structureCoords);\r\n            this._makeSuperposeCoords();\r\n        }\r\n        else if (this.frameCache[0]) {\r\n            this.initialCoords = new Float32Array(this.frameCache[0]);\r\n            this._makeSuperposeCoords();\r\n        }\r\n        else {\r\n            this.loadFrame(0, () => this._saveInitialCoords());\r\n        }\r\n    }\r\n    _saveStructureCoords() {\r\n        const p = { what: { position: true } };\r\n        this.structureCoords = this.structure.getAtomData(p).position;\r\n    }\r\n    setSelection(string) {\r\n        this.selection.setString(string);\r\n        return this;\r\n    }\r\n    _getIndices(selection) {\r\n        let i = 0;\r\n        const test = selection.test;\r\n        const indices = [];\r\n        if (test) {\r\n            this.structure.eachAtom((ap) => {\r\n                if (test(ap))\r\n                    indices.push(i);\r\n                i += 1;\r\n            });\r\n        }\r\n        return indices;\r\n    }\r\n    _makeSuperposeCoords() {\r\n        const n = this.selectionIndices.length * 3;\r\n        this.coords1 = new Float32Array(n);\r\n        this.coords2 = new Float32Array(n);\r\n        const y = this.initialCoords;\r\n        const coords2 = this.coords2;\r\n        for (let i = 0; i < n; i += 3) {\r\n            const j = this.selectionIndices[i / 3] * 3;\r\n            coords2[i + 0] = y[j + 0];\r\n            coords2[i + 1] = y[j + 1];\r\n            coords2[i + 2] = y[j + 2];\r\n        }\r\n    }\r\n    _makeAtomIndices() {\r\n        Log.error('Trajectory._makeAtomIndices not implemented');\r\n    }\r\n    _resetCache() {\r\n        this.frameCache = {};\r\n        this.loadQueue = {};\r\n        this.boxCache = {};\r\n        this.pathCache = {};\r\n        this.frameCacheSize = 0;\r\n        this.initialCoords = new Float32Array(0);\r\n    }\r\n    setParameters(params = {}) {\r\n        let resetCache = false;\r\n        if (params.centerPbc !== undefined && params.centerPbc !== this.centerPbc) {\r\n            this.centerPbc = params.centerPbc;\r\n            resetCache = true;\r\n        }\r\n        if (params.removePeriodicity !== undefined && params.removePeriodicity !== this.removePeriodicity) {\r\n            this.removePeriodicity = params.removePeriodicity;\r\n            resetCache = true;\r\n        }\r\n        if (params.removePbc !== undefined && params.removePbc !== this.removePbc) {\r\n            this.removePbc = params.removePbc;\r\n            resetCache = true;\r\n        }\r\n        if (params.superpose !== undefined && params.superpose !== this.superpose) {\r\n            this.superpose = params.superpose;\r\n            resetCache = true;\r\n        }\r\n        this.deltaTime = defaults(params.deltaTime, this.deltaTime);\r\n        this.timeOffset = defaults(params.timeOffset, this.timeOffset);\r\n        if (resetCache) {\r\n            this._resetCache();\r\n            this.setFrame(this._currentFrame);\r\n        }\r\n    }\r\n    /**\r\n     * Check if a frame is available\r\n     * @param  {Integer|Integer[]} i - the frame index\r\n     * @return {Boolean} frame availability\r\n     */\r\n    hasFrame(i) {\r\n        if (Array.isArray(i)) {\r\n            return i.every(j => !!this.frameCache[j]);\r\n        }\r\n        else {\r\n            return !!this.frameCache[i];\r\n        }\r\n    }\r\n    /**\r\n     * Set trajectory to a frame index\r\n     * @param {Integer} i - the frame index\r\n     * @param {Function} [callback] - fired when the frame has been set\r\n     */\r\n    setFrame(i, callback) {\r\n        if (i === undefined)\r\n            return this;\r\n        this.inProgress = true;\r\n        // i = parseInt(i)  // TODO\r\n        if (i === -1 || this.frameCache[i]) {\r\n            this._updateStructure(i);\r\n            if (callback)\r\n                callback();\r\n        }\r\n        else {\r\n            this.loadFrame(i, () => {\r\n                this._updateStructure(i);\r\n                if (callback)\r\n                    callback();\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n    _interpolate(i, ip, ipp, ippp, t, type) {\r\n        const fc = this.frameCache;\r\n        let coords;\r\n        if (type === 'spline') {\r\n            coords = interpolateSpline(fc[i], fc[ip], fc[ipp], fc[ippp], t);\r\n        }\r\n        else {\r\n            coords = interpolateLerp(fc[i], fc[ip], t);\r\n        }\r\n        this.structure.updatePosition(coords);\r\n        this._currentFrame = i;\r\n        this.signals.frameChanged.dispatch(i);\r\n    }\r\n    /**\r\n     * Interpolated and set trajectory to frame indices\r\n     * @param {Integer} i - the frame index\r\n     * @param {Integer} ip - one before frame index\r\n     * @param {Integer} ipp - two before frame index\r\n     * @param {Integer} ippp - three before frame index\r\n     * @param {Number} t - interpolation step [0,1]\r\n     * @param {String} type - interpolation type, '', 'spline' or 'linear'\r\n     * @param {Function} callback - fired when the frame has been set\r\n     */\r\n    setFrameInterpolated(i, ip, ipp, ippp, t, type, callback) {\r\n        if (i === undefined)\r\n            return this;\r\n        const fc = this.frameCache;\r\n        const iList = [];\r\n        if (!fc[ippp])\r\n            iList.push(ippp);\r\n        if (!fc[ipp])\r\n            iList.push(ipp);\r\n        if (!fc[ip])\r\n            iList.push(ip);\r\n        if (!fc[i])\r\n            iList.push(i);\r\n        if (iList.length) {\r\n            this.loadFrame(iList, () => {\r\n                this._interpolate(i, ip, ipp, ippp, t, type);\r\n                if (callback)\r\n                    callback();\r\n            });\r\n        }\r\n        else {\r\n            this._interpolate(i, ip, ipp, ippp, t, type);\r\n            if (callback)\r\n                callback();\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Load frame index\r\n     * @param {Integer|Integer[]} i - the frame index\r\n     * @param {Function} callback - fired when the frame has been loaded\r\n     */\r\n    loadFrame(i, callback) {\r\n        if (Array.isArray(i)) {\r\n            i.forEach(j => {\r\n                if (!this.loadQueue[j] && !this.frameCache[j]) {\r\n                    this.loadQueue[j] = true;\r\n                    this._loadFrame(j, () => {\r\n                        delete this.loadQueue[j];\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            if (!this.loadQueue[i] && !this.frameCache[i]) {\r\n                this.loadQueue[i] = true;\r\n                this._loadFrame(i, () => {\r\n                    delete this.loadQueue[i];\r\n                    if (callback)\r\n                        callback();\r\n                });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Load frame index\r\n     * @abstract\r\n     * @param {Integer} i - the frame index\r\n     * @param {Function} callback - fired when the frame has been loaded\r\n     */\r\n    _loadFrame(i, callback) {\r\n        Log.error('Trajectory._loadFrame not implemented', i, callback);\r\n    }\r\n    _updateStructure(i) {\r\n        if (this._disposed) {\r\n            console.error('updateStructure: traj disposed');\r\n            return;\r\n        }\r\n        if (i === -1) {\r\n            if (this.structureCoords) {\r\n                this.structure.updatePosition(this.structureCoords);\r\n            }\r\n        }\r\n        else {\r\n            this.structure.updatePosition(this.frameCache[i]);\r\n        }\r\n        this.structure.trajectory = {\r\n            name: this.trajPath,\r\n            frame: i\r\n        };\r\n        this._currentFrame = i;\r\n        this.inProgress = false;\r\n        this.signals.frameChanged.dispatch(i);\r\n    }\r\n    _doSuperpose(x) {\r\n        const n = this.selectionIndices.length * 3;\r\n        const coords1 = this.coords1;\r\n        const coords2 = this.coords2;\r\n        for (let i = 0; i < n; i += 3) {\r\n            const j = this.selectionIndices[i / 3] * 3;\r\n            coords1[i + 0] = x[j + 0];\r\n            coords1[i + 1] = x[j + 1];\r\n            coords1[i + 2] = x[j + 2];\r\n        }\r\n        // TODO re-use superposition object\r\n        const sp = new Superposition(coords1, coords2);\r\n        sp.transform(x);\r\n    }\r\n    _process(i, box, coords, frameCount) {\r\n        this._setFrameCount(frameCount);\r\n        if (box) {\r\n            if (this.backboneIndices.length > 0 && this.centerPbc) {\r\n                const box2 = [box[0], box[4], box[8]];\r\n                const circMean = circularMean3(this.backboneIndices, coords, box2);\r\n                centerPbc(coords, circMean, box2);\r\n            }\r\n            if (this.removePeriodicity) {\r\n                const mean = arrayMean3(coords);\r\n                removePeriodicity(coords, box, mean);\r\n            }\r\n            if (this.removePbc) {\r\n                removePbc(coords, box);\r\n            }\r\n        }\r\n        if (this.selectionIndices.length > 0 && this.coords1 && this.superpose) {\r\n            this._doSuperpose(coords);\r\n        }\r\n        this.frameCache[i] = coords;\r\n        this.boxCache[i] = box;\r\n        this.frameCacheSize += 1;\r\n    }\r\n    _setFrameCount(n) {\r\n        if (n !== this._frameCount) {\r\n            this._frameCount = n;\r\n            this.signals.countChanged.dispatch(n);\r\n        }\r\n    }\r\n    /**\r\n     * Dispose of the trajectory object\r\n     * @return {undefined}\r\n     */\r\n    dispose() {\r\n        this._resetCache(); // aid GC\r\n        this._disposed = true;\r\n        if (this.player)\r\n            this.player.stop();\r\n    }\r\n    /**\r\n     * Set player for this trajectory\r\n     * @param {TrajectoryPlayer} player - the player\r\n     */\r\n    setPlayer(player) {\r\n        this.player = player;\r\n        this.signals.playerChanged.dispatch(player);\r\n    }\r\n    /**\r\n     * Get time for frame\r\n     * @param  {Integer} i - frame index\r\n     * @return {Number} time in picoseconds\r\n     */\r\n    getFrameTime(i) {\r\n        return this.timeOffset + i * this.deltaTime;\r\n    }\r\n}\r\nexport default Trajectory;\r\n//# sourceMappingURL=trajectory.js.map","/**\r\n * @file Frames Trajectory\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport Trajectory from './trajectory';\r\n/**\r\n * Frames trajectory class. Gets data from a frames object.\r\n */\r\nclass FramesTrajectory extends Trajectory {\r\n    constructor(frames, structure, params) {\r\n        const p = params || {};\r\n        p.timeOffset = defaults(p.timeOffset, frames.timeOffset);\r\n        p.deltaTime = defaults(p.deltaTime, frames.deltaTime);\r\n        super('', structure, p);\r\n        this.name = frames.name;\r\n        this.path = frames.path;\r\n        this.frames = frames.coordinates;\r\n        this.boxes = frames.boxes;\r\n        this._init(structure);\r\n    }\r\n    get type() { return 'frames'; }\r\n    _makeAtomIndices() {\r\n        if (this.structure.type === 'StructureView') {\r\n            this.atomIndices = this.structure.getAtomIndices();\r\n        }\r\n        else {\r\n            this.atomIndices = undefined;\r\n        }\r\n    }\r\n    _loadFrame(i, callback) {\r\n        let coords;\r\n        const frame = this.frames[i];\r\n        if (this.atomIndices) {\r\n            const indices = this.atomIndices;\r\n            const m = indices.length;\r\n            coords = new Float32Array(m * 3);\r\n            for (let j = 0; j < m; ++j) {\r\n                const j3 = j * 3;\r\n                const idx3 = indices[j] * 3;\r\n                coords[j3 + 0] = frame[idx3 + 0];\r\n                coords[j3 + 1] = frame[idx3 + 1];\r\n                coords[j3 + 2] = frame[idx3 + 2];\r\n            }\r\n        }\r\n        else {\r\n            coords = new Float32Array(frame);\r\n        }\r\n        const box = this.boxes[i];\r\n        const frameCount = this.frames.length;\r\n        this._process(i, box, coords, frameCount);\r\n        if (typeof callback === 'function') {\r\n            callback();\r\n        }\r\n    }\r\n    _loadFrameCount() {\r\n        if (this.frames) {\r\n            this._setFrameCount(this.frames.length);\r\n        }\r\n    }\r\n}\r\nexport default FramesTrajectory;\r\n//# sourceMappingURL=frames-trajectory.js.map","/**\r\n * @file Structure Trajectory\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Trajectory from './trajectory';\r\n/**\r\n * Structure trajectory class. Gets data from a structure object.\r\n */\r\nclass StructureTrajectory extends Trajectory {\r\n    constructor(trajPath, structure, params) {\r\n        super('', structure, params);\r\n        this._init(structure);\r\n    }\r\n    get type() { return 'structure'; }\r\n    _makeAtomIndices() {\r\n        if (this.structure.atomSet && this.structure.atomSet.getSize() < this.structure.atomStore.count) {\r\n            this.atomIndices = this.structure.getAtomIndices();\r\n        }\r\n        else {\r\n            this.atomIndices = undefined;\r\n        }\r\n    }\r\n    _loadFrame(i, callback) {\r\n        let coords;\r\n        const structure = this.structure;\r\n        const frame = structure.frames[i];\r\n        if (this.atomIndices) {\r\n            const indices = this.atomIndices;\r\n            const m = indices.length;\r\n            coords = new Float32Array(m * 3);\r\n            for (let j = 0; j < m; ++j) {\r\n                const j3 = j * 3;\r\n                const idx3 = indices[j] * 3;\r\n                coords[j3 + 0] = frame[idx3 + 0];\r\n                coords[j3 + 1] = frame[idx3 + 1];\r\n                coords[j3 + 2] = frame[idx3 + 2];\r\n            }\r\n        }\r\n        else {\r\n            coords = new Float32Array(frame);\r\n        }\r\n        const box = structure.boxes[i];\r\n        const frameCount = structure.frames.length;\r\n        this._process(i, box, coords, frameCount);\r\n        if (typeof callback === 'function') {\r\n            callback();\r\n        }\r\n    }\r\n    _loadFrameCount() {\r\n        this._setFrameCount(this.structure.frames.length);\r\n    }\r\n}\r\nexport default StructureTrajectory;\r\n//# sourceMappingURL=structure-trajectory.js.map","/**\r\n * @file Remote Trajectory\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Log, TrajectoryDatasource } from '../globals';\r\nimport Trajectory from './trajectory';\r\n/**\r\n * Remote trajectory class. Gets data from an MDsrv instance.\r\n */\r\nclass RemoteTrajectory extends Trajectory {\r\n    constructor(trajPath, structure, params) {\r\n        super(trajPath, structure, params);\r\n        this._init(structure);\r\n    }\r\n    get type() { return 'remote'; }\r\n    _makeAtomIndices() {\r\n        const atomIndices = [];\r\n        if (this.structure.type === 'StructureView') {\r\n            const indices = this.structure.getAtomIndices(); // TODO\r\n            const n = indices.length;\r\n            let p = indices[0];\r\n            let q = indices[0];\r\n            for (let i = 1; i < n; ++i) {\r\n                const r = indices[i];\r\n                if (q + 1 < r) {\r\n                    atomIndices.push([p, q + 1]);\r\n                    p = r;\r\n                }\r\n                q = r;\r\n            }\r\n            atomIndices.push([p, q + 1]);\r\n        }\r\n        else {\r\n            atomIndices.push([0, this.atomCount]);\r\n        }\r\n        this.atomIndices = atomIndices;\r\n    }\r\n    _loadFrame(i, callback) {\r\n        // TODO implement max frameCache size, re-use arrays\r\n        const request = new XMLHttpRequest();\r\n        const url = TrajectoryDatasource.getFrameUrl(this.trajPath, i);\r\n        const params = TrajectoryDatasource.getFrameParams(this.trajPath, this.atomIndices);\r\n        request.open('POST', url, true);\r\n        request.responseType = 'arraybuffer';\r\n        request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\r\n        request.addEventListener('load', () => {\r\n            const arrayBuffer = request.response;\r\n            if (!arrayBuffer) {\r\n                Log.error(`empty arrayBuffer for '${url}'`);\r\n                return;\r\n            }\r\n            const frameCount = new Int32Array(arrayBuffer, 0, 1)[0];\r\n            // const time = new Float32Array( arrayBuffer, 1 * 4, 1 )[ 0 ];\r\n            const box = new Float32Array(arrayBuffer, 2 * 4, 9);\r\n            const coords = new Float32Array(arrayBuffer, 11 * 4);\r\n            this._process(i, box, coords, frameCount);\r\n            if (typeof callback === 'function') {\r\n                callback();\r\n            }\r\n        }, false);\r\n        request.send(params);\r\n    }\r\n    _loadFrameCount() {\r\n        const request = new XMLHttpRequest();\r\n        const url = TrajectoryDatasource.getCountUrl(this.trajPath);\r\n        request.open('GET', url, true);\r\n        request.addEventListener('load', () => {\r\n            this._setFrameCount(parseInt(request.response));\r\n        }, false);\r\n        request.send();\r\n    }\r\n}\r\nexport default RemoteTrajectory;\r\n//# sourceMappingURL=remote-trajectory.js.map","/**\r\n * @file Trajectory Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Frames from './frames';\r\nimport FramesTrajectory from './frames-trajectory';\r\nimport StructureTrajectory from './structure-trajectory';\r\nimport RemoteTrajectory from './remote-trajectory';\r\nexport function makeTrajectory(trajSrc, structure, params) {\r\n    let traj;\r\n    if (trajSrc && trajSrc instanceof Frames) {\r\n        traj = new FramesTrajectory(trajSrc, structure, params);\r\n    }\r\n    else if (!trajSrc && structure.frames) {\r\n        traj = new StructureTrajectory(trajSrc, structure, params);\r\n    }\r\n    else {\r\n        traj = new RemoteTrajectory(trajSrc, structure, params);\r\n    }\r\n    return traj;\r\n}\r\n//# sourceMappingURL=trajectory-utils.js.map","/**\r\n * @file Structure View\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Box3 } from 'three';\r\nimport { Debug, Log } from '../globals';\r\nimport Structure from './structure';\r\nimport Selection from '../selection/selection';\r\nimport BitArray from '../utils/bitarray';\r\n/**\r\n * Get view on structure restricted to the selection\r\n * @param  {Selection} selection - the selection\r\n * @return {StructureView} the view on the structure\r\n */\r\nStructure.prototype.getView = function (selection) {\r\n    // added here to avoid cyclic import dependency\r\n    return new StructureView(this, selection);\r\n};\r\n/**\r\n * View on the structure, restricted to the selection\r\n */\r\nclass StructureView extends Structure {\r\n    /**\r\n     * @param {Structure} structure - the structure\r\n     * @param {Selection} selection - the selection\r\n     */\r\n    constructor(structure, selection) {\r\n        super();\r\n        this.structure = structure;\r\n        this.selection = selection;\r\n        this.center = new Vector3();\r\n        this.boundingBox = new Box3();\r\n        this._bp = this.getBondProxy();\r\n        this._ap = this.getAtomProxy();\r\n        this._rp = this.getResidueProxy();\r\n        this._cp = this.getChainProxy();\r\n        if (this.selection) {\r\n            this.selection.signals.stringChanged.add(this.refresh, this);\r\n        }\r\n        this.structure.signals.refreshed.add(this.refresh, this);\r\n        this.refresh();\r\n    }\r\n    init() { }\r\n    get type() { return 'StructureView'; }\r\n    get name() { return this.structure.name; }\r\n    get path() { return this.structure.path; }\r\n    get title() { return this.structure.title; }\r\n    get id() { return this.structure.id; }\r\n    get data() { return this.structure.data; }\r\n    get atomSetDict() { return this.structure.atomSetDict; }\r\n    get biomolDict() { return this.structure.biomolDict; }\r\n    get entityList() { return this.structure.entityList; }\r\n    get unitcell() { return this.structure.unitcell; }\r\n    get frames() { return this.structure.frames; }\r\n    get boxes() { return this.structure.boxes; }\r\n    get validation() { return this.structure.validation; }\r\n    get bondStore() { return this.structure.bondStore; }\r\n    get backboneBondStore() { return this.structure.backboneBondStore; }\r\n    get rungBondStore() { return this.structure.rungBondStore; }\r\n    get atomStore() { return this.structure.atomStore; }\r\n    get residueStore() { return this.structure.residueStore; }\r\n    get chainStore() { return this.structure.chainStore; }\r\n    get modelStore() { return this.structure.modelStore; }\r\n    get atomMap() { return this.structure.atomMap; }\r\n    get residueMap() { return this.structure.residueMap; }\r\n    get bondHash() { return this.structure.bondHash; }\r\n    get spatialHash() { return this.structure.spatialHash; }\r\n    get _hasCoords() { return this.structure._hasCoords; }\r\n    set _hasCoords(value) { this.structure._hasCoords = value; }\r\n    /**\r\n     * Updates atomSet, bondSet, atomSetCache, atomCount, bondCount, boundingBox, center.\r\n     * @emits {Structure.signals.refreshed} when refreshed\r\n     * @return {undefined}\r\n     */\r\n    refresh() {\r\n        if (Debug)\r\n            Log.time('StructureView.refresh');\r\n        this.atomSetCache = {};\r\n        const structure = this.structure;\r\n        if (this.selection.isAllSelection() &&\r\n            structure !== this && structure.atomSet && structure.bondSet) {\r\n            this.atomSet = structure.atomSet.clone();\r\n            this.bondSet = structure.bondSet.clone();\r\n            for (let name in this.atomSetDict) {\r\n                const atomSet = this.atomSetDict[name];\r\n                this.atomSetCache['__' + name] = atomSet.clone();\r\n            }\r\n            this.atomCount = structure.atomCount;\r\n            this.bondCount = structure.bondCount;\r\n            this.boundingBox.copy(structure.boundingBox);\r\n            this.center.copy(structure.center);\r\n        }\r\n        else if (this.selection.isNoneSelection() &&\r\n            structure !== this && structure.atomSet && structure.bondSet) {\r\n            this.atomSet = new BitArray(structure.atomCount);\r\n            this.bondSet = new BitArray(structure.bondCount);\r\n            for (let name in this.atomSetDict) {\r\n                this.atomSetCache['__' + name] = new BitArray(structure.atomCount);\r\n            }\r\n            this.atomCount = 0;\r\n            this.bondCount = 0;\r\n            this.boundingBox.makeEmpty();\r\n            this.center.set(0, 0, 0);\r\n        }\r\n        else {\r\n            this.atomSet = this.getAtomSet(this.selection, true);\r\n            if (structure.atomSet) {\r\n                this.atomSet = this.atomSet.intersection(structure.atomSet);\r\n            }\r\n            this.bondSet = this.getBondSet();\r\n            for (let name in this.atomSetDict) {\r\n                const atomSet = this.atomSetDict[name];\r\n                this.atomSetCache['__' + name] = atomSet.makeIntersection(this.atomSet);\r\n            }\r\n            this.atomCount = this.atomSet.getSize();\r\n            this.bondCount = this.bondSet.getSize();\r\n            this.boundingBox = this.getBoundingBox();\r\n            this.center = this.boundingBox.getCenter(new Vector3());\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('StructureView.refresh');\r\n        this.signals.refreshed.dispatch();\r\n    }\r\n    //\r\n    setSelection(selection) {\r\n        this.selection = selection;\r\n        this.refresh();\r\n    }\r\n    getSelection(selection) {\r\n        const seleList = [];\r\n        if (selection && selection.string) {\r\n            seleList.push(selection.string);\r\n        }\r\n        const parentSelection = this.structure.getSelection();\r\n        if (parentSelection && parentSelection.string) {\r\n            seleList.push(parentSelection.string);\r\n        }\r\n        if (this.selection && this.selection.string) {\r\n            seleList.push(this.selection.string);\r\n        }\r\n        let sele = '';\r\n        if (seleList.length > 0) {\r\n            sele = `( ${seleList.join(' ) AND ( ')} )`;\r\n        }\r\n        return new Selection(sele);\r\n    }\r\n    getStructure() {\r\n        return this.structure.getStructure();\r\n    }\r\n    //\r\n    eachBond(callback, selection) {\r\n        this.structure.eachBond(callback, this.getSelection(selection));\r\n    }\r\n    eachAtom(callback, selection) {\r\n        const ap = this.getAtomProxy();\r\n        const atomSet = this.getAtomSet(selection);\r\n        const n = this.atomStore.count;\r\n        if (atomSet.getSize() < n) {\r\n            atomSet.forEach(function (index) {\r\n                ap.index = index;\r\n                callback(ap);\r\n            });\r\n        }\r\n        else {\r\n            for (let i = 0; i < n; ++i) {\r\n                ap.index = i;\r\n                callback(ap);\r\n            }\r\n        }\r\n    }\r\n    eachResidue(callback, selection) {\r\n        this.structure.eachResidue(callback, this.getSelection(selection));\r\n    }\r\n    /**\r\n     * Not implemented\r\n     * @alias StructureView#eachResidueN\r\n     * @return {undefined}\r\n     */\r\n    eachResidueN(n, callback) {\r\n        console.error('StructureView.eachResidueN() not implemented');\r\n    }\r\n    eachChain(callback, selection) {\r\n        this.structure.eachChain(callback, this.getSelection(selection));\r\n    }\r\n    eachModel(callback, selection) {\r\n        this.structure.eachModel(callback, this.getSelection(selection));\r\n    }\r\n    //\r\n    getAtomSet(selection, ignoreView = false) {\r\n        let atomSet = this.structure.getAtomSet(selection);\r\n        if (!ignoreView && this.atomSet) {\r\n            atomSet = atomSet.makeIntersection(this.atomSet);\r\n        }\r\n        return atomSet;\r\n    }\r\n    //\r\n    getAtomIndices(selection) {\r\n        return this.structure.getAtomIndices(this.getSelection(selection));\r\n    }\r\n    refreshPosition() {\r\n        return this.structure.refreshPosition();\r\n    }\r\n    //\r\n    dispose() {\r\n        if (this.selection) {\r\n            this.selection.signals.stringChanged.remove(this.refresh, this);\r\n        }\r\n        this.structure.signals.refreshed.remove(this.refresh, this);\r\n        delete this.structure;\r\n        delete this.atomSet;\r\n        delete this.bondSet;\r\n        delete this.atomCount;\r\n        delete this.bondCount;\r\n    }\r\n}\r\nexport default StructureView;\r\n//# sourceMappingURL=structure-view.js.map","/**\r\n * @file Alignment\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log } from '../globals';\r\n// const nucleotides = 'ACTG';\r\nconst aminoacidsX = 'ACDEFGHIKLMNPQRSTVWY';\r\nconst aminoacids = 'ARNDCQEGHILKMFPSTWYVBZ?';\r\nconst blosum62x = [\r\n    [4, 0, -2, -1, -2, 0, -2, -1, -1, -1, -1, -2, -1, -1, -1, 1, 0, 0, -3, -2],\r\n    [0, 9, -3, -4, -2, -3, -3, -1, -3, -1, -1, -3, -3, -3, -3, -1, -1, -1, -2, -2],\r\n    [-2, -3, 6, 2, -3, -1, -1, -3, -1, -4, -3, 1, -1, 0, -2, 0, -1, -3, -4, -3],\r\n    [-1, -4, 2, 5, -3, -2, 0, -3, 1, -3, -2, 0, -1, 2, 0, 0, -1, -2, -3, -2],\r\n    [-2, -2, -3, -3, 6, -3, -1, 0, -3, 0, 0, -3, -4, -3, -3, -2, -2, -1, 1, 3],\r\n    [0, -3, -1, -2, -3, 6, -2, -4, -2, -4, -3, 0, -2, -2, -2, 0, -2, -3, -2, -3],\r\n    [-2, -3, -1, 0, -1, -2, 8, -3, -1, -3, -2, 1, -2, 0, 0, -1, -2, -3, -2, 2],\r\n    [-1, -1, -3, -3, 0, -4, -3, 4, -3, 2, 1, -3, -3, -3, -3, -2, -1, 3, -3, -1],\r\n    [-1, -3, -1, 1, -3, -2, -1, -3, 5, -2, -1, 0, -1, 1, 2, 0, -1, -2, -3, -2],\r\n    [-1, -1, -4, -3, 0, -4, -3, 2, -2, 4, 2, -3, -3, -2, -2, -2, -1, 1, -2, -1],\r\n    [-1, -1, -3, -2, 0, -3, -2, 1, -1, 2, 5, -2, -2, 0, -1, -1, -1, 1, -1, -1],\r\n    [-2, -3, 1, 0, -3, 0, 1, -3, 0, -3, -2, 6, -2, 0, 0, 1, 0, -3, -4, -2],\r\n    [-1, -3, -1, -1, -4, -2, -2, -3, -1, -3, -2, -2, 7, -1, -2, -1, -1, -2, -4, -3],\r\n    [-1, -3, 0, 2, -3, -2, 0, -3, 1, -2, 0, 0, -1, 5, 1, 0, -1, -2, -2, -1],\r\n    [-1, -3, -2, 0, -3, -2, 0, -3, 2, -2, -1, 0, -2, 1, 5, -1, -1, -3, -3, -2],\r\n    [1, -1, 0, 0, -2, 0, -1, -2, 0, -2, -1, 1, -1, 0, -1, 4, 1, -2, -3, -2],\r\n    [0, -1, -1, -1, -2, -2, -2, -1, -1, -1, -1, 0, -1, -1, -1, 1, 5, 0, -2, -2],\r\n    [0, -1, -3, -2, -1, -3, -3, 3, -2, 1, 1, -3, -2, -2, -3, -2, 0, 4, -3, -1],\r\n    [-3, -2, -4, -3, 1, -2, -2, -3, -3, -2, -1, -4, -4, -2, -3, -3, -2, -3, 11, 2],\r\n    [-2, -2, -3, -2, 3, -3, 2, -1, -2, -1, -1, -2, -3, -1, -2, -2, -2, -1, 2, 7] // Y\r\n];\r\nconst blosum62 = [\r\n    // A  R  N  D  C  Q  E  G  H  I  L  K  M  F  P  S  T  W  Y  V  B  Z  X\r\n    [4, -1, -2, -2, 0, -1, -1, 0, -2, -1, -1, -1, -1, -2, -1, 1, 0, -3, -2, 0, -2, -1, 0],\r\n    [-1, 5, 0, -2, -3, 1, 0, -2, 0, -3, -2, 2, -1, -3, -2, -1, -1, -3, -2, -3, -1, 0, -1],\r\n    [-2, 0, 6, 1, -3, 0, 0, 0, 1, -3, -3, 0, -2, -3, -2, 1, 0, -4, -2, -3, 3, 0, -1],\r\n    [-2, -2, 1, 6, -3, 0, 2, -1, -1, -3, -4, -1, -3, -3, -1, 0, -1, -4, -3, -3, 4, 1, -1],\r\n    [0, -3, -3, -3, 9, -3, -4, -3, -3, -1, -1, -3, -1, -2, -3, -1, -1, -2, -2, -1, -3, -3, -2],\r\n    [-1, 1, 0, 0, -3, 5, 2, -2, 0, -3, -2, 1, 0, -3, -1, 0, -1, -2, -1, -2, 0, 3, -1],\r\n    [-1, 0, 0, 2, -4, 2, 5, -2, 0, -3, -3, 1, -2, -3, -1, 0, -1, -3, -2, -2, 1, 4, -1],\r\n    [0, -2, 0, -1, -3, -2, -2, 6, -2, -4, -4, -2, -3, -3, -2, 0, -2, -2, -3, -3, -1, -2, -1],\r\n    [-2, 0, 1, -1, -3, 0, 0, -2, 8, -3, -3, -1, -2, -1, -2, -1, -2, -2, 2, -3, 0, 0, -1],\r\n    [-1, -3, -3, -3, -1, -3, -3, -4, -3, 4, 2, -3, 1, 0, -3, -2, -1, -3, -1, 3, -3, -3, -1],\r\n    [-1, -2, -3, -4, -1, -2, -3, -4, -3, 2, 4, -2, 2, 0, -3, -2, -1, -2, -1, 1, -4, -3, -1],\r\n    [-1, 2, 0, -1, -3, 1, 1, -2, -1, -3, -2, 5, -1, -3, -1, 0, -1, -3, -2, -2, 0, 1, -1],\r\n    [-1, -1, -2, -3, -1, 0, -2, -3, -2, 1, 2, -1, 5, 0, -2, -1, -1, -1, -1, 1, -3, -1, -1],\r\n    [-2, -3, -3, -3, -2, -3, -3, -3, -1, 0, 0, -3, 0, 6, -4, -2, -2, 1, 3, -1, -3, -3, -1],\r\n    [-1, -2, -2, -1, -3, -1, -1, -2, -2, -3, -3, -1, -2, -4, 7, -1, -1, -4, -3, -2, -2, -1, -2],\r\n    [1, -1, 1, 0, -1, 0, 0, 0, -1, -2, -2, 0, -1, -2, -1, 4, 1, -3, -2, -2, 0, 0, 0],\r\n    [0, -1, 0, -1, -1, -1, -1, -2, -2, -1, -1, -1, -1, -2, -1, 1, 5, -2, -2, 0, -1, -1, 0],\r\n    [-3, -3, -4, -4, -2, -2, -3, -2, -2, -3, -2, -3, -1, 1, -4, -3, -2, 11, 2, -3, -4, -3, -2],\r\n    [-2, -2, -2, -3, -2, -1, -2, -3, 2, -1, -1, -2, -1, 3, -3, -2, -2, 2, 7, -1, -3, -2, -1],\r\n    [0, -3, -3, -3, -1, -2, -2, -3, -3, 3, 1, -2, 1, -1, -2, -2, 0, -3, -1, 4, -3, -2, -1],\r\n    [-2, -1, 3, 4, -3, 0, 1, -1, 0, -3, -4, 0, -3, -3, -2, 0, -1, -4, -3, -3, 4, 1, -1],\r\n    [-1, 0, 0, 1, -3, 3, 4, -2, 0, -3, -3, 1, -1, -3, -1, 0, -1, -3, -2, -2, 1, 4, -1],\r\n    [0, -1, -1, -1, -2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -2, 0, 0, -2, -1, -1, -1, -1, -1] // X\r\n];\r\nfunction prepareMatrix(cellNames, mat) {\r\n    let j;\r\n    let i = 0;\r\n    const matDict = {};\r\n    mat.forEach(function (row) {\r\n        j = 0;\r\n        const rowDict = {};\r\n        row.forEach(function (elm) {\r\n            rowDict[cellNames[j++]] = elm;\r\n        });\r\n        matDict[cellNames[i++]] = rowDict;\r\n    });\r\n    return matDict;\r\n}\r\nconst SubstitutionMatrices = (function () {\r\n    return {\r\n        blosum62: prepareMatrix(aminoacids, blosum62),\r\n        blosum62x: prepareMatrix(aminoacidsX, blosum62x)\r\n    };\r\n}());\r\nclass Alignment {\r\n    constructor(seq1, seq2, gapPenalty = -10, gapExtensionPenalty = -1, substMatrix = 'blosum62') {\r\n        // TODO try encoding seqs as integers and use array subst matrix, maybe faster\r\n        this.seq1 = seq1;\r\n        this.seq2 = seq2;\r\n        this.gapPenalty = gapPenalty;\r\n        this.gapExtensionPenalty = gapExtensionPenalty;\r\n        if (substMatrix) {\r\n            this.substMatrix = SubstitutionMatrices[substMatrix];\r\n        }\r\n    }\r\n    initMatrices() {\r\n        this.n = this.seq1.length;\r\n        this.m = this.seq2.length;\r\n        // Log.log(this.n, this.m);\r\n        this.score = undefined;\r\n        this.ali = '';\r\n        this.S = [];\r\n        this.V = [];\r\n        this.H = [];\r\n        for (let i = 0; i <= this.n; ++i) {\r\n            this.S[i] = [];\r\n            this.V[i] = [];\r\n            this.H[i] = [];\r\n            for (let j = 0; j <= this.m; ++j) {\r\n                this.S[i][j] = 0;\r\n                this.V[i][j] = 0;\r\n                this.H[i][j] = 0;\r\n            }\r\n        }\r\n        for (let i = 0; i <= this.n; ++i) {\r\n            this.S[i][0] = this.gap(0);\r\n            this.H[i][0] = -Infinity;\r\n        }\r\n        for (let j = 0; j <= this.m; ++j) {\r\n            this.S[0][j] = this.gap(0);\r\n            this.V[0][j] = -Infinity;\r\n        }\r\n        this.S[0][0] = 0;\r\n        // Log.log(this.S, this.V, this.H);\r\n    }\r\n    gap(len) {\r\n        return this.gapPenalty + len * this.gapExtensionPenalty;\r\n    }\r\n    makeScoreFn() {\r\n        const seq1 = this.seq1;\r\n        const seq2 = this.seq2;\r\n        const substMatrix = this.substMatrix;\r\n        if (substMatrix) {\r\n            return function score(i, j) {\r\n                const c1 = seq1[i];\r\n                const c2 = seq2[j];\r\n                try {\r\n                    return substMatrix[c1][c2];\r\n                }\r\n                catch (e) {\r\n                    return -4;\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            Log.warn('Alignment: no subst matrix');\r\n            return function scoreNoSubstMat(i, j) {\r\n                const c1 = seq1[i];\r\n                const c2 = seq2[j];\r\n                return c1 === c2 ? 5 : -3;\r\n            };\r\n        }\r\n    }\r\n    calc() {\r\n        if (Debug)\r\n            Log.time('Alignment.calc');\r\n        this.initMatrices();\r\n        const gap0 = this.gap(0);\r\n        const scoreFn = this.makeScoreFn();\r\n        const gapExtensionPenalty = this.gapExtensionPenalty;\r\n        const V = this.V;\r\n        const H = this.H;\r\n        const S = this.S;\r\n        const n = this.n;\r\n        const m = this.m;\r\n        let Vi1, Si1, Vi, Hi, Si;\r\n        for (let i = 1; i <= n; ++i) {\r\n            Si1 = S[i - 1];\r\n            Vi1 = V[i - 1];\r\n            Vi = V[i];\r\n            Hi = H[i];\r\n            Si = S[i];\r\n            for (let j = 1; j <= m; ++j) {\r\n                Vi[j] = Math.max(Si1[j] + gap0, Vi1[j] + gapExtensionPenalty);\r\n                Hi[j] = Math.max(Si[j - 1] + gap0, Hi[j - 1] + gapExtensionPenalty);\r\n                Si[j] = Math.max(Si1[j - 1] + scoreFn(i - 1, j - 1), // match\r\n                Vi[j], // del\r\n                Hi[j] // ins\r\n                );\r\n            }\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('Alignment.calc');\r\n        if (Debug)\r\n            Log.log(this.S, this.V, this.H);\r\n    }\r\n    trace() {\r\n        if (Debug)\r\n            Log.time('Alignment.trace');\r\n        this.ali1 = '';\r\n        this.ali2 = '';\r\n        const scoreFn = this.makeScoreFn();\r\n        let i = this.n;\r\n        let j = this.m;\r\n        let mat;\r\n        if (this.S[i][j] >= this.V[i][j]) {\r\n            mat = 'S';\r\n            this.score = this.S[i][j];\r\n        }\r\n        else if (this.V[i][j] >= this.H[i][j]) {\r\n            mat = 'V';\r\n            this.score = this.V[i][j];\r\n        }\r\n        else {\r\n            mat = 'H';\r\n            this.score = this.H[i][j];\r\n        }\r\n        if (Debug)\r\n            Log.log('Alignment: SCORE', this.score);\r\n        if (Debug)\r\n            Log.log('Alignment: S, V, H', this.S[i][j], this.V[i][j], this.H[i][j]);\r\n        while (i > 0 && j > 0) {\r\n            if (mat === 'S') {\r\n                if (this.S[i][j] === this.S[i - 1][j - 1] + scoreFn(i - 1, j - 1)) {\r\n                    this.ali1 = this.seq1[i - 1] + this.ali1;\r\n                    this.ali2 = this.seq2[j - 1] + this.ali2;\r\n                    --i;\r\n                    --j;\r\n                    mat = 'S';\r\n                }\r\n                else if (this.S[i][j] === this.V[i][j]) {\r\n                    mat = 'V';\r\n                }\r\n                else if (this.S[i][j] === this.H[i][j]) {\r\n                    mat = 'H';\r\n                }\r\n                else {\r\n                    // Log.debug('Alignment: S');\r\n                    --i;\r\n                    --j;\r\n                }\r\n            }\r\n            else if (mat === 'V') {\r\n                if (this.V[i][j] === this.V[i - 1][j] + this.gapExtensionPenalty) {\r\n                    this.ali1 = this.seq1[i - 1] + this.ali1;\r\n                    this.ali2 = '-' + this.ali2;\r\n                    --i;\r\n                    mat = 'V';\r\n                }\r\n                else if (this.V[i][j] === this.S[i - 1][j] + this.gap(0)) {\r\n                    this.ali1 = this.seq1[i - 1] + this.ali1;\r\n                    this.ali2 = '-' + this.ali2;\r\n                    --i;\r\n                    mat = 'S';\r\n                }\r\n                else {\r\n                    // Log.debug('Alignment: V');\r\n                    --i;\r\n                }\r\n            }\r\n            else if (mat === 'H') {\r\n                if (this.H[i][j] === this.H[i][j - 1] + this.gapExtensionPenalty) {\r\n                    this.ali1 = '-' + this.ali1;\r\n                    this.ali2 = this.seq2[j - 1] + this.ali2;\r\n                    --j;\r\n                    mat = 'H';\r\n                }\r\n                else if (this.H[i][j] === this.S[i][j - 1] + this.gap(0)) {\r\n                    this.ali1 = '-' + this.ali1;\r\n                    this.ali2 = this.seq2[j - 1] + this.ali2;\r\n                    --j;\r\n                    mat = 'S';\r\n                }\r\n                else {\r\n                    // Log.debug('Alignment: H');\r\n                    --j;\r\n                }\r\n            }\r\n            else {\r\n                Log.error('Alignment: no matrix');\r\n            }\r\n        }\r\n        while (i > 0) {\r\n            this.ali1 = this.seq1[i - 1] + this.ali1;\r\n            this.ali2 = '-' + this.ali2;\r\n            --i;\r\n        }\r\n        while (j > 0) {\r\n            this.ali1 = '-' + this.ali1;\r\n            this.ali2 = this.seq2[j - 1] + this.ali2;\r\n            --j;\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('Alignment.trace');\r\n        if (Debug)\r\n            Log.log([this.ali1, this.ali2]);\r\n    }\r\n}\r\nexport default Alignment;\r\n//# sourceMappingURL=alignment.js.map","/**\r\n * @file Align Utils\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Selection from '../selection/selection';\r\nimport Alignment from './alignment';\r\nimport Superposition from './superposition';\r\n/**\r\n * Perform structural superposition of two structures,\r\n * optionally guided by a sequence alignment\r\n * @param  {Structure|StructureView} s1 - structure 1 which is superposed onto structure 2\r\n * @param  {Structure|StructureView} s2 - structure 2 onto which structure 1 is superposed\r\n * @param  {Boolean} [align] - guide the superposition by a sequence alignment\r\n * @param  {String} [sele1] - selection string for structure 1\r\n * @param  {String} [sele2] - selection string for structure 2\r\n * @return {undefined}\r\n */\r\nfunction superpose(s1, s2, align = false, sele1 = '', sele2 = '') {\r\n    let i;\r\n    let j;\r\n    let n;\r\n    let atoms1;\r\n    let atoms2;\r\n    if (align) {\r\n        let _s1 = s1;\r\n        let _s2 = s2;\r\n        if (sele1 && sele2) {\r\n            _s1 = s1.getView(new Selection(sele1));\r\n            _s2 = s2.getView(new Selection(sele2));\r\n        }\r\n        const seq1 = _s1.getSequence();\r\n        const seq2 = _s2.getSequence();\r\n        // Log.log( seq1.join(\"\") );\r\n        // Log.log( seq2.join(\"\") );\r\n        const ali = new Alignment(seq1.join(''), seq2.join(''));\r\n        ali.calc();\r\n        ali.trace();\r\n        // Log.log( \"superpose alignment score\", ali.score );\r\n        // Log.log( ali.ali1 );\r\n        // Log.log( ali.ali2 );\r\n        let _i, _j;\r\n        i = 0;\r\n        j = 0;\r\n        n = ali.ali1.length;\r\n        const aliIdx1 = [];\r\n        const aliIdx2 = [];\r\n        for (let l = 0; l < n; ++l) {\r\n            const x = ali.ali1[l];\r\n            const y = ali.ali2[l];\r\n            _i = 0;\r\n            _j = 0;\r\n            if (x === '-') {\r\n                aliIdx2[j] = false;\r\n            }\r\n            else {\r\n                aliIdx2[j] = true;\r\n                _i = 1;\r\n            }\r\n            if (y === '-') {\r\n                aliIdx1[i] = false;\r\n            }\r\n            else {\r\n                aliIdx1[i] = true;\r\n                _j = 1;\r\n            }\r\n            i += _i;\r\n            j += _j;\r\n        }\r\n        // Log.log( i, j );\r\n        // Log.log( aliIdx1 );\r\n        // Log.log( aliIdx2 );\r\n        const _atoms1 = [];\r\n        const _atoms2 = [];\r\n        const ap1 = _s1.getAtomProxy();\r\n        const ap2 = _s2.getAtomProxy();\r\n        i = 0;\r\n        _s1.eachResidue(function (r) {\r\n            if (r.traceAtomIndex === undefined ||\r\n                r.traceAtomIndex !== r.getAtomIndexByName('CA'))\r\n                return;\r\n            if (aliIdx1[i]) {\r\n                ap1.index = r.getAtomIndexByName('CA'); // TODO\r\n                _atoms1.push(ap1.x, ap1.y, ap1.z);\r\n            }\r\n            i += 1;\r\n        });\r\n        i = 0;\r\n        _s2.eachResidue(function (r) {\r\n            if (r.traceAtomIndex === undefined ||\r\n                r.traceAtomIndex !== r.getAtomIndexByName('CA'))\r\n                return;\r\n            if (aliIdx2[i]) {\r\n                ap2.index = r.getAtomIndexByName('CA'); // TODO\r\n                _atoms2.push(ap2.x, ap2.y, ap2.z);\r\n            }\r\n            i += 1;\r\n        });\r\n        atoms1 = new Float32Array(_atoms1);\r\n        atoms2 = new Float32Array(_atoms2);\r\n    }\r\n    else {\r\n        const sviewCa1 = s1.getView(new Selection(`${sele1} and .CA`));\r\n        const sviewCa2 = s2.getView(new Selection(`${sele2} and .CA`));\r\n        atoms1 = sviewCa1;\r\n        atoms2 = sviewCa2;\r\n    }\r\n    const superpose = new Superposition(atoms1, atoms2);\r\n    const result = superpose.transform(s1);\r\n    s1.refreshPosition();\r\n    return result;\r\n}\r\nexport { superpose };\r\n//# sourceMappingURL=align-utils.js.map","/**\r\n * @file Sturucture Component\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Signal } from 'signals';\r\nimport { ComponentRegistry, MeasurementDefaultParams } from '../globals';\r\nimport { defaults, /*deepEqual, */ createRingBuffer, createSimpleDict } from '../utils';\r\nimport { smoothstep } from '../math/math-utils';\r\nimport Component, { ComponentDefaultParameters } from './component';\r\nimport RepresentationCollection from './representation-collection';\r\nimport TrajectoryElement from './trajectory-element';\r\nimport { makeTrajectory } from '../trajectory/trajectory-utils';\r\nimport Selection from '../selection/selection';\r\nimport StructureView from '../structure/structure-view';\r\nimport { superpose } from '../align/align-utils';\r\nexport const StructureComponentDefaultParameters = Object.assign({\r\n    sele: '',\r\n    defaultAssembly: ''\r\n}, ComponentDefaultParameters);\r\n/**\r\n * Component wrapping a {@link Structure} object\r\n *\r\n * @example\r\n * // get a structure component by loading a structure file into the stage\r\n * stage.loadFile( \"rcsb://4opj\" ).then( function( structureComponent ){\r\n *     structureComponent.addRepresentation( \"cartoon\" );\r\n *     structureComponent.autoView();\r\n * } );\r\n */\r\nclass StructureComponent extends Component {\r\n    constructor(stage, structure, params = {}) {\r\n        super(stage, structure, Object.assign({ name: structure.name }, params));\r\n        this.structure = structure;\r\n        this.trajList = [];\r\n        this.signals = Object.assign(this.signals, {\r\n            trajectoryAdded: new Signal(),\r\n            trajectoryRemoved: new Signal(),\r\n            defaultAssemblyChanged: new Signal()\r\n        });\r\n        this.initSelection(this.parameters.sele);\r\n        //\r\n        this.pickBuffer = createRingBuffer(4);\r\n        this.pickDict = createSimpleDict();\r\n        this.spacefillRepresentation = this.addRepresentation('spacefill', {\r\n            sele: 'none',\r\n            opacity: MeasurementDefaultParams.opacity,\r\n            color: MeasurementDefaultParams.color,\r\n            disablePicking: true,\r\n            radiusType: 'data'\r\n        }, true);\r\n        this.distanceRepresentation = this.addRepresentation('distance', MeasurementDefaultParams, true);\r\n        this.angleRepresentation = this.addRepresentation('angle', MeasurementDefaultParams, true);\r\n        this.dihedralRepresentation = this.addRepresentation('dihedral', MeasurementDefaultParams, true);\r\n        this.measureRepresentations = new RepresentationCollection([\r\n            this.spacefillRepresentation,\r\n            this.distanceRepresentation,\r\n            this.angleRepresentation,\r\n            this.dihedralRepresentation\r\n        ]);\r\n        //\r\n        this.setDefaultAssembly(this.parameters.defaultAssembly);\r\n    }\r\n    get defaultParameters() { return StructureComponentDefaultParameters; }\r\n    /**\r\n     * Component type\r\n     * @type {String}\r\n     */\r\n    get type() { return 'structure'; }\r\n    /**\r\n     * Initialize selection\r\n     * @private\r\n     * @param {String} sele - selection string\r\n     * @return {undefined}\r\n     */\r\n    initSelection(sele) {\r\n        /**\r\n         * Selection for {@link StructureComponent#structureView}\r\n         * @private\r\n         * @type {Selection}\r\n         */\r\n        this.selection = new Selection(sele);\r\n        /**\r\n         * View on {@link StructureComponent#structure}.\r\n         * Change its selection via {@link StructureComponent#setSelection}.\r\n         * @type {StructureView}\r\n         */\r\n        this.structureView = new StructureView(this.structure, this.selection);\r\n        this.selection.signals.stringChanged.add(() => {\r\n            this.structureView.setSelection(this.selection);\r\n            this.rebuildRepresentations();\r\n            this.rebuildTrajectories();\r\n        });\r\n    }\r\n    /**\r\n     * Set selection of {@link StructureComponent#structureView}\r\n     * @param {String} string - selection string\r\n     * @return {StructureComponent} this object\r\n     */\r\n    setSelection(string) {\r\n        this.parameters.sele = string;\r\n        this.selection.setString(string);\r\n        return this;\r\n    }\r\n    /**\r\n     * Set the default assembly\r\n     * @param {String} value - assembly name\r\n     * @return {undefined}\r\n     */\r\n    setDefaultAssembly(value) {\r\n        // filter out non-exsisting assemblies\r\n        if (this.structure.biomolDict[value] === undefined)\r\n            value = '';\r\n        // only set default assembly when changed\r\n        if (this.parameters.defaultAssembly !== value) {\r\n            const reprParams = { defaultAssembly: value };\r\n            this.reprList.forEach(repr => repr.setParameters(reprParams));\r\n            this.measureRepresentations.setParameters(reprParams);\r\n            this.parameters.defaultAssembly = value;\r\n            this.signals.defaultAssemblyChanged.dispatch(value);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Rebuild all representations\r\n     * @return {undefined}\r\n     */\r\n    rebuildRepresentations() {\r\n        this.reprList.forEach((repr) => {\r\n            repr.build();\r\n        });\r\n        this.measureRepresentations.build();\r\n    }\r\n    /**\r\n     * Rebuild all trajectories\r\n     * @return {undefined}\r\n     */\r\n    rebuildTrajectories() {\r\n        this.trajList.forEach(trajComp => {\r\n            trajComp.trajectory.setStructure(this.structureView);\r\n        });\r\n    }\r\n    updateRepresentations(what) {\r\n        super.updateRepresentations(what);\r\n        this.measureRepresentations.update(what);\r\n    }\r\n    /**\r\n     * Overrides {@link Component.updateRepresentationMatrices}\r\n     * to also update matrix for measureRepresentations\r\n     */\r\n    updateRepresentationMatrices() {\r\n        super.updateRepresentationMatrices();\r\n        this.measureRepresentations.setParameters({ matrix: this.matrix });\r\n    }\r\n    addRepresentation(type, params = {}, hidden = false) {\r\n        params.defaultAssembly = this.parameters.defaultAssembly;\r\n        const reprComp = this._addRepresentation(type, this.structureView, params, hidden);\r\n        if (!hidden) {\r\n            reprComp.signals.parametersChanged.add(() => this.measureUpdate());\r\n        }\r\n        return reprComp;\r\n    }\r\n    /**\r\n     * Add a new trajectory component to the structure\r\n     */\r\n    addTrajectory(trajPath = '', params = {}) {\r\n        const traj = makeTrajectory(trajPath, this.structureView, params);\r\n        traj.signals.frameChanged.add(() => {\r\n            this.updateRepresentations({ 'position': true });\r\n        });\r\n        const trajComp = new TrajectoryElement(this.stage, traj, params);\r\n        this.trajList.push(trajComp);\r\n        this.signals.trajectoryAdded.dispatch(trajComp);\r\n        return trajComp;\r\n    }\r\n    removeTrajectory(traj) {\r\n        const idx = this.trajList.indexOf(traj);\r\n        if (idx !== -1) {\r\n            this.trajList.splice(idx, 1);\r\n        }\r\n        traj.dispose();\r\n        this.signals.trajectoryRemoved.dispatch(traj);\r\n    }\r\n    dispose() {\r\n        // copy via .slice because side effects may change trajList\r\n        this.trajList.slice().forEach(traj => traj.dispose());\r\n        this.trajList.length = 0;\r\n        this.structure.dispose();\r\n        this.measureRepresentations.dispose();\r\n        super.dispose();\r\n    }\r\n    autoView(sele, duration) {\r\n        if (typeof sele === 'number') {\r\n            duration = sele;\r\n            sele = '';\r\n        }\r\n        this.stage.animationControls.zoomMove(this.getCenter(sele), this.getZoom(sele), defaults(duration, 0));\r\n    }\r\n    getBoxUntransformed(sele) {\r\n        let bb;\r\n        if (sele) {\r\n            bb = this.structureView.getBoundingBox(new Selection(sele));\r\n        }\r\n        else {\r\n            bb = this.structureView.boundingBox;\r\n        }\r\n        return bb;\r\n    }\r\n    getCenterUntransformed(sele) {\r\n        if (sele && typeof sele === 'string') {\r\n            return this.structure.atomCenter(new Selection(sele));\r\n        }\r\n        else {\r\n            return this.structure.center;\r\n        }\r\n    }\r\n    superpose(component, align, sele1, sele2) {\r\n        superpose(this.structureView, component.structureView, align, sele1, sele2);\r\n        this.updateRepresentations({ 'position': true });\r\n        return this;\r\n    }\r\n    getMaxRepresentationRadius(atomIndex) {\r\n        let maxRadius = 0;\r\n        const atom = this.structure.getAtomProxy(atomIndex);\r\n        this.eachRepresentation(reprElem => {\r\n            if (reprElem.getVisibility()) {\r\n                const repr = reprElem.repr; // TODO\r\n                maxRadius = Math.max(repr.getAtomRadius(atom), maxRadius);\r\n            }\r\n        });\r\n        return maxRadius;\r\n    }\r\n    measurePick(atom) {\r\n        const pickCount = this.pickBuffer.count;\r\n        if (this.lastPick === atom.index && pickCount >= 1) {\r\n            if (pickCount > 1) {\r\n                const atomList = this.pickBuffer.data;\r\n                const atomListSorted = this.pickBuffer.data.sort();\r\n                if (this.pickDict.has(atomListSorted)) {\r\n                    this.pickDict.del(atomListSorted);\r\n                }\r\n                else {\r\n                    this.pickDict.add(atomListSorted, atomList);\r\n                }\r\n                if (pickCount === 2) {\r\n                    this.distanceRepresentation.setParameters({\r\n                        atomPair: this.pickDict.values.filter(l => l.length === 2)\r\n                    });\r\n                }\r\n                else if (pickCount === 3) {\r\n                    this.angleRepresentation.setParameters({\r\n                        atomTriple: this.pickDict.values.filter(l => l.length === 3)\r\n                    });\r\n                }\r\n                else if (pickCount === 4) {\r\n                    this.dihedralRepresentation.setParameters({\r\n                        atomQuad: this.pickDict.values.filter(l => l.length === 4)\r\n                    });\r\n                }\r\n            }\r\n            this.pickBuffer.clear();\r\n            this.lastPick = undefined;\r\n        }\r\n        else {\r\n            if (!this.pickBuffer.has(atom.index)) {\r\n                this.pickBuffer.push(atom.index);\r\n            }\r\n            this.lastPick = atom.index;\r\n        }\r\n        this.measureUpdate();\r\n    }\r\n    measureClear() {\r\n        this.pickBuffer.clear();\r\n        this.lastPick = undefined;\r\n        this.spacefillRepresentation.setSelection('none');\r\n    }\r\n    measureBuild() {\r\n        const md = this.measureData();\r\n        this.distanceRepresentation.setParameters({ atomPair: md.distance });\r\n        this.angleRepresentation.setParameters({ atomTriple: md.angle });\r\n        this.dihedralRepresentation.setParameters({ atomQuad: md.dihedral });\r\n    }\r\n    measureUpdate() {\r\n        const pickData = this.pickBuffer.data;\r\n        const radiusData = {};\r\n        pickData.forEach(ai => {\r\n            const r = Math.max(0.1, this.getMaxRepresentationRadius(ai));\r\n            radiusData[ai] = r * (2.3 - smoothstep(0.1, 2, r));\r\n        });\r\n        this.spacefillRepresentation.setSelection(pickData.length ? ('@' + pickData.join(',')) : 'none');\r\n        if (pickData.length)\r\n            this.spacefillRepresentation.setParameters({ radiusData });\r\n    }\r\n    measureData() {\r\n        const pv = this.pickDict.values;\r\n        return {\r\n            distance: pv.filter(l => l.length === 2),\r\n            angle: pv.filter(l => l.length === 3),\r\n            dihedral: pv.filter(l => l.length === 4)\r\n        };\r\n    }\r\n    /**\r\n     * Remove all measurements, optionally limit to distance, angle or dihedral\r\n     */\r\n    removeAllMeasurements(type) {\r\n        const pd = this.pickDict;\r\n        const pv = pd.values;\r\n        const remove = function (len) {\r\n            pv.filter(l => l.length === len).forEach(l => pd.del(l.slice().sort()));\r\n        };\r\n        if (!type || type & 1 /* Distance */)\r\n            remove(2);\r\n        if (!type || type & 2 /* Angle */)\r\n            remove(3);\r\n        if (!type || type & 4 /* Dihedral */)\r\n            remove(4);\r\n        this.measureBuild();\r\n    }\r\n    /**\r\n     * Remove a measurement given as a pair, triple, quad of atom indices\r\n     */\r\n    removeMeasurement(atomList) {\r\n        this.pickDict.del(atomList.slice().sort());\r\n        this.measureBuild();\r\n    }\r\n    /**\r\n     * Add a measurement given as a pair, triple, quad of atom indices\r\n     */\r\n    addMeasurement(atomList) {\r\n        if (atomList.length < 2 || atomList.length > 4)\r\n            return;\r\n        const atomListSorted = atomList.slice().sort();\r\n        if (!this.pickDict.has(atomListSorted)) {\r\n            this.pickDict.add(atomListSorted, atomList);\r\n        }\r\n        this.measureBuild();\r\n    }\r\n}\r\nComponentRegistry.add('structure', StructureComponent);\r\nComponentRegistry.add('structureview', StructureComponent);\r\nexport default StructureComponent;\r\n//# sourceMappingURL=structure-component.js.map","/**\r\n * @file Spline\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { ColormakerRegistry } from '../globals';\r\nimport { AtomPicker } from '../utils/picker.js';\r\nimport RadiusFactory from '../utils/radius-factory.js';\r\nimport { copyArray } from '../math/array-utils.js';\r\nimport { spline } from '../math/math-utils';\r\nexport class Interpolator {\r\n    constructor(m, tension) {\r\n        this.m = m;\r\n        this.tension = tension;\r\n        this.dt = 1.0 / this.m;\r\n        this.delta = 0.0001;\r\n        this.vec1 = new Vector3();\r\n        this.vec2 = new Vector3();\r\n        this.vDir = new Vector3();\r\n        this.vTan = new Vector3();\r\n        this.vNorm = new Vector3();\r\n        this.vBin = new Vector3();\r\n        this.m2 = Math.ceil(this.m / 2);\r\n    }\r\n    interpolateToArr(v0, v1, v2, v3, t, arr, offset) {\r\n        arr[offset + 0] = spline(v0.x, v1.x, v2.x, v3.x, t, this.tension);\r\n        arr[offset + 1] = spline(v0.y, v1.y, v2.y, v3.y, t, this.tension);\r\n        arr[offset + 2] = spline(v0.z, v1.z, v2.z, v3.z, t, this.tension);\r\n    }\r\n    interpolateToVec(v0, v1, v2, v3, t, vec) {\r\n        vec.x = spline(v0.x, v1.x, v2.x, v3.x, t, this.tension);\r\n        vec.y = spline(v0.y, v1.y, v2.y, v3.y, t, this.tension);\r\n        vec.z = spline(v0.z, v1.z, v2.z, v3.z, t, this.tension);\r\n    }\r\n    interpolatePosition(v0, v1, v2, v3, pos, offset) {\r\n        for (var j = 0; j < this.m; ++j) {\r\n            var l = offset + j * 3;\r\n            var d = this.dt * j;\r\n            this.interpolateToArr(v0, v1, v2, v3, d, pos, l);\r\n        }\r\n    }\r\n    interpolateTangent(v0, v1, v2, v3, tan, offset) {\r\n        for (var j = 0; j < this.m; ++j) {\r\n            var d = this.dt * j;\r\n            var d1 = d - this.delta;\r\n            var d2 = d + this.delta;\r\n            var l = offset + j * 3;\r\n            // capping as a precaution\r\n            if (d1 < 0)\r\n                d1 = 0;\r\n            if (d2 > 1)\r\n                d2 = 1;\r\n            //\r\n            this.interpolateToVec(v0, v1, v2, v3, d1, this.vec1);\r\n            this.interpolateToVec(v0, v1, v2, v3, d2, this.vec2);\r\n            //\r\n            this.vec2.sub(this.vec1).normalize();\r\n            this.vec2.toArray(tan, l);\r\n        }\r\n    }\r\n    vectorSubdivide(interpolationFn, iterator, array, offset, isCyclic) {\r\n        let v0;\r\n        let v1 = iterator.next();\r\n        let v2 = iterator.next();\r\n        let v3 = iterator.next();\r\n        //\r\n        const n = iterator.size;\r\n        const n1 = n - 1;\r\n        let k = offset || 0;\r\n        for (let i = 0; i < n1; ++i) {\r\n            v0 = v1;\r\n            v1 = v2;\r\n            v2 = v3;\r\n            v3 = iterator.next();\r\n            interpolationFn.apply(this, [v0, v1, v2, v3, array, k]);\r\n            k += 3 * this.m;\r\n        }\r\n        if (isCyclic) {\r\n            v0 = iterator.get(n - 2);\r\n            v1 = iterator.get(n - 1);\r\n            v2 = iterator.get(0);\r\n            v3 = iterator.get(1);\r\n            interpolationFn.apply(this, [v0, v1, v2, v3, array, k]);\r\n            k += 3 * this.m;\r\n        }\r\n    }\r\n    //\r\n    getPosition(iterator, array, offset, isCyclic) {\r\n        iterator.reset();\r\n        this.vectorSubdivide(this.interpolatePosition, iterator, array, offset, isCyclic);\r\n        var n1 = iterator.size - 1;\r\n        var k = n1 * this.m * 3;\r\n        if (isCyclic)\r\n            k += this.m * 3;\r\n        var v = iterator.get(isCyclic ? 0 : n1);\r\n        array[k] = v.x;\r\n        array[k + 1] = v.y;\r\n        array[k + 2] = v.z;\r\n    }\r\n    getTangent(iterator, array, offset, isCyclic) {\r\n        iterator.reset();\r\n        this.vectorSubdivide(this.interpolateTangent, iterator, array, offset, isCyclic);\r\n        const n1 = iterator.size - 1;\r\n        let k = n1 * this.m * 3;\r\n        if (isCyclic)\r\n            k += this.m * 3;\r\n        copyArray(array, array, k - 3, k, 3);\r\n    }\r\n    interpolateNormalDir(u0, u1, u2, u3, v0, v1, v2, v3, tan, norm, bin, offset, shift) {\r\n        for (let j = 0; j < this.m; ++j) {\r\n            let l = offset + j * 3;\r\n            if (shift)\r\n                l += this.m2 * 3;\r\n            const d = this.dt * j;\r\n            this.interpolateToVec(u0, u1, u2, u3, d, this.vec1);\r\n            this.interpolateToVec(v0, v1, v2, v3, d, this.vec2);\r\n            this.vDir.subVectors(this.vec2, this.vec1).normalize();\r\n            this.vTan.fromArray(tan, l);\r\n            this.vBin.crossVectors(this.vDir, this.vTan).normalize();\r\n            this.vBin.toArray(bin, l);\r\n            this.vNorm.crossVectors(this.vTan, this.vBin).normalize();\r\n            this.vNorm.toArray(norm, l);\r\n        }\r\n    }\r\n    interpolateNormal(vDir, tan, norm, bin, offset) {\r\n        for (var j = 0; j < this.m; ++j) {\r\n            var l = offset + j * 3;\r\n            vDir.copy(this.vNorm);\r\n            this.vTan.fromArray(tan, l);\r\n            this.vBin.crossVectors(vDir, this.vTan).normalize();\r\n            this.vBin.toArray(bin, l);\r\n            this.vNorm.crossVectors(this.vTan, this.vBin).normalize();\r\n            this.vNorm.toArray(norm, l);\r\n        }\r\n    }\r\n    getNormal(size, tan, norm, bin, offset, isCyclic) {\r\n        this.vNorm.set(0, 0, 1);\r\n        const n = size;\r\n        const n1 = n - 1;\r\n        let k = offset || 0;\r\n        for (var i = 0; i < n1; ++i) {\r\n            this.interpolateNormal(this.vDir, tan, norm, bin, k);\r\n            k += 3 * this.m;\r\n        }\r\n        if (isCyclic) {\r\n            this.interpolateNormal(this.vDir, tan, norm, bin, k);\r\n            k += 3 * this.m;\r\n        }\r\n        this.vBin.toArray(bin, k);\r\n        this.vNorm.toArray(norm, k);\r\n    }\r\n    getNormalDir(iterDir1, iterDir2, tan, norm, bin, offset, isCyclic, shift) {\r\n        iterDir1.reset();\r\n        iterDir2.reset();\r\n        //\r\n        const vSub1 = new Vector3();\r\n        const vSub2 = new Vector3();\r\n        const vSub3 = new Vector3();\r\n        const vSub4 = new Vector3();\r\n        //\r\n        const d1v1 = new Vector3();\r\n        const d1v2 = new Vector3().copy(iterDir1.next());\r\n        const d1v3 = new Vector3().copy(iterDir1.next());\r\n        const d1v4 = new Vector3().copy(iterDir1.next());\r\n        const d2v1 = new Vector3();\r\n        const d2v2 = new Vector3().copy(iterDir2.next());\r\n        const d2v3 = new Vector3().copy(iterDir2.next());\r\n        const d2v4 = new Vector3().copy(iterDir2.next());\r\n        //\r\n        this.vNorm.set(0, 0, 1);\r\n        let n = iterDir1.size;\r\n        let n1 = n - 1;\r\n        let k = offset || 0;\r\n        for (var i = 0; i < n1; ++i) {\r\n            d1v1.copy(d1v2);\r\n            d1v2.copy(d1v3);\r\n            d1v3.copy(d1v4);\r\n            d1v4.copy(iterDir1.next());\r\n            d2v1.copy(d2v2);\r\n            d2v2.copy(d2v3);\r\n            d2v3.copy(d2v4);\r\n            d2v4.copy(iterDir2.next());\r\n            //\r\n            if (i === 0) {\r\n                vSub1.subVectors(d2v1, d1v1);\r\n                vSub2.subVectors(d2v2, d1v2);\r\n                if (vSub1.dot(vSub2) < 0) {\r\n                    vSub2.multiplyScalar(-1);\r\n                    d2v2.addVectors(d1v2, vSub2);\r\n                }\r\n                vSub3.subVectors(d2v3, d1v3);\r\n                if (vSub2.dot(vSub3) < 0) {\r\n                    vSub3.multiplyScalar(-1);\r\n                    d2v3.addVectors(d1v3, vSub3);\r\n                }\r\n            }\r\n            else {\r\n                vSub3.copy(vSub4);\r\n            }\r\n            vSub4.subVectors(d2v4, d1v4);\r\n            if (vSub3.dot(vSub4) < 0) {\r\n                vSub4.multiplyScalar(-1);\r\n                d2v4.addVectors(d1v4, vSub4);\r\n            }\r\n            this.interpolateNormalDir(d1v1, d1v2, d1v3, d1v4, d2v1, d2v2, d2v3, d2v4, tan, norm, bin, k, shift);\r\n            k += 3 * this.m;\r\n        }\r\n        if (isCyclic) {\r\n            d1v1.copy(iterDir1.get(n - 2));\r\n            d1v2.copy(iterDir1.get(n - 1));\r\n            d1v3.copy(iterDir1.get(0));\r\n            d1v4.copy(iterDir1.get(1));\r\n            d2v1.copy(iterDir2.get(n - 2));\r\n            d2v2.copy(iterDir2.get(n - 1));\r\n            d2v3.copy(iterDir2.get(0));\r\n            d2v4.copy(iterDir2.get(1));\r\n            //\r\n            vSub3.copy(vSub4);\r\n            vSub4.subVectors(d2v4, d1v4);\r\n            if (vSub3.dot(vSub4) < 0) {\r\n                vSub4.multiplyScalar(-1);\r\n                d2v4.addVectors(d1v4, vSub4);\r\n            }\r\n            this.interpolateNormalDir(d1v1, d1v2, d1v3, d1v4, d2v1, d2v2, d2v3, d2v4, tan, norm, bin, k, shift);\r\n            k += 3 * this.m;\r\n        }\r\n        if (shift) {\r\n            // FIXME shift requires data from one this.more preceeding residue\r\n            this.vBin.fromArray(bin, this.m2 * 3);\r\n            this.vNorm.fromArray(norm, this.m2 * 3);\r\n            for (var j = 0; j < this.m2; ++j) {\r\n                this.vBin.toArray(bin, j * 3);\r\n                this.vNorm.toArray(norm, j * 3);\r\n            }\r\n        }\r\n        else {\r\n            this.vBin.toArray(bin, k);\r\n            this.vNorm.toArray(norm, k);\r\n        }\r\n    }\r\n    //\r\n    interpolateColor(item1, item2, colFn, col, offset) {\r\n        var j, l;\r\n        for (j = 0; j < this.m2; ++j) {\r\n            l = offset + j * 3;\r\n            colFn.apply(this, [item1, col, l]); // itemColorToArray\r\n        }\r\n        for (j = this.m2; j < this.m; ++j) {\r\n            l = offset + j * 3;\r\n            colFn.apply(this, [item2, col, l]); // itemColorToArray\r\n        }\r\n    }\r\n    getColor(iterator, colFn, col, offset, isCyclic) {\r\n        iterator.reset();\r\n        iterator.next(); // first element not needed\r\n        let i0;\r\n        let i1 = iterator.next();\r\n        //\r\n        var n = iterator.size;\r\n        var n1 = n - 1;\r\n        var k = offset || 0;\r\n        for (var i = 0; i < n1; ++i) {\r\n            i0 = i1;\r\n            i1 = iterator.next();\r\n            this.interpolateColor(i0, i1, colFn, col, k);\r\n            k += 3 * this.m;\r\n        }\r\n        if (isCyclic) {\r\n            i0 = iterator.get(n - 1);\r\n            i1 = iterator.get(0);\r\n            this.interpolateColor(i0, i1, colFn, col, k);\r\n            k += 3 * this.m;\r\n        }\r\n        //\r\n        col[k] = col[k - 3];\r\n        col[k + 1] = col[k - 2];\r\n        col[k + 2] = col[k - 1];\r\n    }\r\n    //\r\n    interpolatePicking(item1, item2, pickFn, pick, offset) {\r\n        var j;\r\n        for (j = 0; j < this.m2; ++j) {\r\n            pick[offset + j] = pickFn.apply(this, [item1]);\r\n        }\r\n        for (j = this.m2; j < this.m; ++j) {\r\n            pick[offset + j] = pickFn.apply(this, [item2]);\r\n        }\r\n    }\r\n    getPicking(iterator, pickFn, pick, offset, isCyclic) {\r\n        iterator.reset();\r\n        iterator.next(); // first element not needed\r\n        let i0;\r\n        let i1 = iterator.next();\r\n        //\r\n        const n = iterator.size;\r\n        const n1 = n - 1;\r\n        let k = offset || 0;\r\n        for (var i = 0; i < n1; ++i) {\r\n            i0 = i1;\r\n            i1 = iterator.next();\r\n            this.interpolatePicking(i0, i1, pickFn, pick, k);\r\n            k += this.m;\r\n        }\r\n        if (isCyclic) {\r\n            i0 = iterator.get(n - 1);\r\n            i1 = iterator.get(0);\r\n            this.interpolatePicking(i0, i1, pickFn, pick, k);\r\n            k += this.m;\r\n        }\r\n        //\r\n        pick[k] = pick[k - 1];\r\n    }\r\n    //\r\n    interpolateSize(item1, item2, sizeFn, size, offset) {\r\n        const s1 = sizeFn.apply(this, [item1]);\r\n        const s2 = sizeFn.apply(this, [item2]);\r\n        for (let j = 0; j < this.m; ++j) {\r\n            // linear interpolation\r\n            let t = j / this.m;\r\n            size[offset + j] = (1 - t) * s1 + t * s2;\r\n        }\r\n    }\r\n    getSize(iterator, sizeFn, size, offset, isCyclic) {\r\n        iterator.reset();\r\n        iterator.next(); // first element not needed\r\n        let i0;\r\n        let i1 = iterator.next();\r\n        //\r\n        const n = iterator.size;\r\n        const n1 = n - 1;\r\n        let k = offset || 0;\r\n        for (var i = 0; i < n1; ++i) {\r\n            i0 = i1;\r\n            i1 = iterator.next();\r\n            this.interpolateSize(i0, i1, sizeFn, size, k);\r\n            k += this.m;\r\n        }\r\n        if (isCyclic) {\r\n            i0 = iterator.get(n - 1);\r\n            i1 = iterator.get(0);\r\n            this.interpolateSize(i0, i1, sizeFn, size, k);\r\n            k += this.m;\r\n        }\r\n        //\r\n        size[k] = size[k - 1];\r\n    }\r\n}\r\nclass Spline {\r\n    constructor(polymer, params) {\r\n        this.polymer = polymer;\r\n        this.size = polymer.residueCount;\r\n        var p = params || {};\r\n        this.directional = p.directional || false;\r\n        this.positionIterator = p.positionIterator || false;\r\n        this.subdiv = p.subdiv || 1;\r\n        this.smoothSheet = p.smoothSheet || false;\r\n        if (!p.tension) {\r\n            this.tension = this.polymer.isNucleic() ? 0.5 : 0.9;\r\n        }\r\n        else {\r\n            this.tension = p.tension;\r\n        }\r\n        this.interpolator = new Interpolator(this.subdiv, this.tension);\r\n    }\r\n    getAtomIterator(type, smooth) {\r\n        const polymer = this.polymer;\r\n        const structure = polymer.structure;\r\n        const n = polymer.residueCount;\r\n        let i = 0;\r\n        let j = -1;\r\n        const cache = [\r\n            structure.getAtomProxy(),\r\n            structure.getAtomProxy(),\r\n            structure.getAtomProxy(),\r\n            structure.getAtomProxy()\r\n        ];\r\n        const cache2 = [\r\n            new Vector3(),\r\n            new Vector3(),\r\n            new Vector3(),\r\n            new Vector3()\r\n        ];\r\n        function next() {\r\n            var atomProxy = get(j);\r\n            j += 1;\r\n            return atomProxy;\r\n        }\r\n        var apPrev = structure.getAtomProxy();\r\n        var apNext = structure.getAtomProxy();\r\n        function get(idx) {\r\n            var atomProxy = cache[i % 4];\r\n            atomProxy.index = polymer.getAtomIndexByType(idx, type);\r\n            if (smooth && idx > 0 && idx < n && atomProxy.sstruc === 'e') {\r\n                var vec = cache2[i % 4];\r\n                apPrev.index = polymer.getAtomIndexByType(idx + 1, type);\r\n                apNext.index = polymer.getAtomIndexByType(idx - 1, type);\r\n                vec.addVectors(apPrev, apNext)\r\n                    .add(atomProxy).add(atomProxy)\r\n                    .multiplyScalar(0.25);\r\n                i += 1;\r\n                return vec;\r\n            }\r\n            i += 1;\r\n            return atomProxy;\r\n        }\r\n        function reset() {\r\n            i = 0;\r\n            j = -1;\r\n        }\r\n        return {\r\n            size: n,\r\n            next: next,\r\n            get: get,\r\n            reset: reset\r\n        };\r\n    }\r\n    getSubdividedColor(params) {\r\n        var m = this.subdiv;\r\n        var polymer = this.polymer;\r\n        var n = polymer.residueCount;\r\n        var n1 = n - 1;\r\n        var nCol = n1 * m * 3 + 3;\r\n        if (polymer.isCyclic)\r\n            nCol += m * 3;\r\n        var col = new Float32Array(nCol);\r\n        var iterator = this.getAtomIterator('trace');\r\n        var p = params || {};\r\n        p.structure = polymer.structure;\r\n        var colormaker = ColormakerRegistry.getScheme(p);\r\n        function colFn(item, array, offset) {\r\n            colormaker.atomColorToArray(item, array, offset);\r\n        }\r\n        this.interpolator.getColor(iterator, colFn, col, 0, polymer.isCyclic);\r\n        return {\r\n            'color': col\r\n        };\r\n    }\r\n    getSubdividedPicking() {\r\n        var m = this.subdiv;\r\n        var polymer = this.polymer;\r\n        var n = polymer.residueCount;\r\n        var n1 = n - 1;\r\n        var nCol = n1 * m + 1;\r\n        if (polymer.isCyclic)\r\n            nCol += m;\r\n        var structure = polymer.structure;\r\n        var iterator = this.getAtomIterator('trace');\r\n        var pick = new Float32Array(nCol);\r\n        function pickFn(item) {\r\n            return item.index;\r\n        }\r\n        this.interpolator.getPicking(iterator, pickFn, pick, 0, polymer.isCyclic);\r\n        return {\r\n            'picking': new AtomPicker(pick, structure)\r\n        };\r\n    }\r\n    getSubdividedPosition() {\r\n        var pos = this.getPosition();\r\n        return {\r\n            'position': pos\r\n        };\r\n    }\r\n    getSubdividedOrientation() {\r\n        const tan = this.getTangent();\r\n        const normals = this.getNormals(tan);\r\n        return {\r\n            'tangent': tan,\r\n            'normal': normals.normal,\r\n            'binormal': normals.binormal\r\n        };\r\n    }\r\n    getSubdividedSize(params) {\r\n        var m = this.subdiv;\r\n        var polymer = this.polymer;\r\n        var n = polymer.residueCount;\r\n        var n1 = n - 1;\r\n        var nSize = n1 * m + 1;\r\n        if (polymer.isCyclic)\r\n            nSize += m;\r\n        var size = new Float32Array(nSize);\r\n        var iterator = this.getAtomIterator('trace');\r\n        var radiusFactory = new RadiusFactory(params);\r\n        function sizeFn(item) {\r\n            return radiusFactory.atomRadius(item);\r\n        }\r\n        this.interpolator.getSize(iterator, sizeFn, size, 0, polymer.isCyclic);\r\n        return {\r\n            'size': size\r\n        };\r\n    }\r\n    getPosition() {\r\n        const m = this.subdiv;\r\n        const polymer = this.polymer;\r\n        const n = polymer.residueCount;\r\n        const n1 = n - 1;\r\n        let nPos = n1 * m * 3 + 3;\r\n        if (polymer.isCyclic)\r\n            nPos += m * 3;\r\n        const pos = new Float32Array(nPos);\r\n        const iterator = this.positionIterator || this.getAtomIterator('trace', this.smoothSheet);\r\n        this.interpolator.getPosition(iterator, pos, 0, polymer.isCyclic);\r\n        return pos;\r\n    }\r\n    getTangent() {\r\n        const m = this.subdiv;\r\n        const polymer = this.polymer;\r\n        const n = this.size;\r\n        const n1 = n - 1;\r\n        let nTan = n1 * m * 3 + 3;\r\n        if (polymer.isCyclic)\r\n            nTan += m * 3;\r\n        const tan = new Float32Array(nTan);\r\n        const iterator = this.positionIterator || this.getAtomIterator('trace', this.smoothSheet);\r\n        this.interpolator.getTangent(iterator, tan, 0, polymer.isCyclic);\r\n        return tan;\r\n    }\r\n    getNormals(tan) {\r\n        const m = this.subdiv;\r\n        const polymer = this.polymer;\r\n        const isProtein = polymer.isProtein();\r\n        const n = this.size;\r\n        const n1 = n - 1;\r\n        let nNorm = n1 * m * 3 + 3;\r\n        if (polymer.isCyclic)\r\n            nNorm += m * 3;\r\n        const norm = new Float32Array(nNorm);\r\n        const bin = new Float32Array(nNorm);\r\n        if (this.directional && !this.polymer.isCg()) {\r\n            const iterDir1 = this.getAtomIterator('direction1');\r\n            const iterDir2 = this.getAtomIterator('direction2');\r\n            this.interpolator.getNormalDir(iterDir1, iterDir2, tan, norm, bin, 0, polymer.isCyclic, isProtein);\r\n        }\r\n        else {\r\n            this.interpolator.getNormal(n, tan, norm, bin, 0, polymer.isCyclic);\r\n        }\r\n        return {\r\n            'normal': norm,\r\n            'binormal': bin\r\n        };\r\n    }\r\n}\r\nexport default Spline;\r\n//# sourceMappingURL=spline.js.map","/**\r\n * @file Structure Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ExtensionFragDepth, Mobile } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { default as Representation } from './representation.js';\r\nimport Selection from '../selection/selection.js';\r\nimport RadiusFactory, { RadiusFactoryTypes } from '../utils/radius-factory.js';\r\n/**\r\n * Structure representation\r\n * @interface\r\n */\r\nclass StructureRepresentation extends Representation {\r\n    /**\r\n     * Create Structure representation object\r\n     * @param {Structure} structure - the structure to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {StructureRepresentationParameters} params - structure representation parameters\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        const p = params || {};\r\n        super(structure, viewer, p);\r\n        this.type = 'structure';\r\n        this.parameters = Object.assign({\r\n            radiusType: {\r\n                type: 'select', options: RadiusFactory.types\r\n            },\r\n            radiusData: {\r\n                type: 'hidden'\r\n            },\r\n            radiusSize: {\r\n                type: 'number', precision: 3, max: 10.0, min: 0.001\r\n            },\r\n            radiusScale: {\r\n                type: 'number', precision: 3, max: 10.0, min: 0.001\r\n            },\r\n            assembly: null,\r\n            defaultAssembly: {\r\n                type: 'hidden'\r\n            }\r\n        }, this.parameters);\r\n        /**\r\n         * @type {Selection}\r\n         * @private\r\n         */\r\n        this.selection = new Selection(p.sele);\r\n        /**\r\n         * @type {Array}\r\n         * @private\r\n         */\r\n        this.dataList = [];\r\n        /**\r\n         * @type {Structure}\r\n         */\r\n        this.structure = structure;\r\n        /**\r\n         * @type {StructureView}\r\n         */\r\n        this.structureView = this.structure.getView(this.selection);\r\n        if (structure.biomolDict) {\r\n            const biomolOptions = {\r\n                'default': 'default',\r\n                '': (structure.unitcell ? 'AU' : 'FULL')\r\n            };\r\n            Object.keys(structure.biomolDict).forEach(function (k) {\r\n                biomolOptions[k] = k;\r\n            });\r\n            this.parameters.assembly = {\r\n                type: 'select',\r\n                options: biomolOptions,\r\n                rebuild: true\r\n            };\r\n        }\r\n        else {\r\n            this.parameters.assembly = null;\r\n        }\r\n    }\r\n    get defaultScale() {\r\n        return {\r\n            'vdw': 1.0,\r\n            'covalent': 1.0,\r\n            'bfactor': 0.01,\r\n            'sstruc': 1.0\r\n        };\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'element');\r\n        this.setRadius(p.radius, p);\r\n        this.radiusType = defaults(p.radiusType, 'vdw');\r\n        this.radiusData = defaults(p.radiusData, {});\r\n        this.radiusSize = defaults(p.radiusSize, 1.0);\r\n        this.radiusScale = defaults(p.radiusScale, 1.0);\r\n        this.assembly = defaults(p.assembly, 'default');\r\n        this.defaultAssembly = defaults(p.defaultAssembly, '');\r\n        if (p.quality === 'auto') {\r\n            p.quality = this.getQuality();\r\n        }\r\n        super.init(p);\r\n        this.selection.signals.stringChanged.add(( /* sele */) => {\r\n            this.build();\r\n        });\r\n        this.build();\r\n    }\r\n    setRadius(value, p) {\r\n        const types = Object.keys(RadiusFactoryTypes);\r\n        if (typeof value === 'string' && types.includes(value.toLowerCase())) {\r\n            p.radiusType = value;\r\n        }\r\n        else if (value !== undefined) {\r\n            p.radiusType = 'size';\r\n            p.radiusSize = value;\r\n        }\r\n        return this;\r\n    }\r\n    getAssembly() {\r\n        const name = this.assembly === 'default' ? this.defaultAssembly : this.assembly;\r\n        return this.structure.biomolDict[name];\r\n    }\r\n    getQuality() {\r\n        let atomCount;\r\n        const s = this.structureView;\r\n        const assembly = this.getAssembly();\r\n        if (assembly) {\r\n            atomCount = assembly.getAtomCount(s);\r\n        }\r\n        else {\r\n            atomCount = s.atomCount;\r\n        }\r\n        if (Mobile) {\r\n            atomCount *= 4;\r\n        }\r\n        const backboneOnly = s.atomStore.count / s.residueStore.count < 2;\r\n        if (backboneOnly) {\r\n            atomCount *= 10;\r\n        }\r\n        if (atomCount < 15000) {\r\n            return 'high';\r\n        }\r\n        else if (atomCount < 80000) {\r\n            return 'medium';\r\n        }\r\n        else {\r\n            return 'low';\r\n        }\r\n    }\r\n    create() {\r\n        if (this.structureView.atomCount === 0)\r\n            return;\r\n        if (!this.structureView.hasCoords()) {\r\n            this.needsBuild = true;\r\n            return;\r\n        }\r\n        else {\r\n            this.needsBuild = false;\r\n        }\r\n        const assembly = this.getAssembly();\r\n        if (assembly) {\r\n            assembly.partList.forEach((part, i) => {\r\n                const sview = part.getView(this.structureView);\r\n                if (sview.atomCount === 0)\r\n                    return;\r\n                const data = this.createData(sview, i);\r\n                if (data) {\r\n                    data.sview = sview;\r\n                    data.instanceList = part.getInstanceList();\r\n                    this.dataList.push(data);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            const data = this.createData(this.structureView, 0);\r\n            if (data) {\r\n                data.sview = this.structureView;\r\n                this.dataList.push(data);\r\n            }\r\n        }\r\n    }\r\n    update(what) {\r\n        if (this.lazy && !this.visible) {\r\n            Object.assign(this.lazyProps.what, what);\r\n            return;\r\n        }\r\n        if (this.needsBuild) {\r\n            this.build();\r\n            return;\r\n        }\r\n        this.dataList.forEach((data) => {\r\n            if (data.bufferList.length > 0) {\r\n                this.updateData(what, data);\r\n            }\r\n        }, this);\r\n    }\r\n    updateData(what, data) {\r\n        this.build();\r\n    }\r\n    getColorParams() {\r\n        return Object.assign(Object.assign({}, super.getColorParams()), { structure: this.structure });\r\n    }\r\n    getRadiusParams(param) {\r\n        return {\r\n            type: this.radiusType,\r\n            scale: this.radiusScale,\r\n            size: this.radiusSize,\r\n            data: this.radiusData\r\n        };\r\n    }\r\n    getAtomParams(what, params) {\r\n        return Object.assign({\r\n            what: what,\r\n            colorParams: this.getColorParams(),\r\n            radiusParams: this.getRadiusParams()\r\n        }, params);\r\n    }\r\n    getBondParams(what, params) {\r\n        return Object.assign({\r\n            what: what,\r\n            colorParams: this.getColorParams(),\r\n            radiusParams: this.getRadiusParams()\r\n        }, params);\r\n    }\r\n    getAtomRadius(atom) {\r\n        if (this.structureView.atomSet.isSet(atom.index)) {\r\n            const radiusFactory = new RadiusFactory(this.getRadiusParams());\r\n            return radiusFactory.atomRadius(atom);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Set representation parameters\r\n     * @alias StructureRepresentation#setSelection\r\n     * @param {String} string - selection string, see {@tutorial selection-language}\r\n     * @param {Boolean} [silent] - don't trigger a change event in the selection\r\n     * @return {StructureRepresentation} this object\r\n     */\r\n    setSelection(string, silent) {\r\n        this.selection.setString(string, silent);\r\n        return this;\r\n    }\r\n    /**\r\n     * Set representation parameters\r\n     * @alias StructureRepresentation#setParameters\r\n     * @param {StructureRepresentationParameters} params - structure parameter object\r\n     * @param {Object} [what] - buffer data attributes to be updated,\r\n     *                        note that this needs to be implemented in the\r\n     *                        derived classes. Generally it allows more\r\n     *                        fine-grained control over updating than\r\n     *                        forcing a rebuild.\r\n     * @param {Boolean} what.position - update position data\r\n     * @param {Boolean} what.color - update color data\r\n     * @param {Boolean} [rebuild] - whether or not to rebuild the representation\r\n     * @return {StructureRepresentation} this object\r\n     */\r\n    setParameters(params, what = {}, rebuild = false) {\r\n        const p = params || {};\r\n        this.setRadius(p.radius, p);\r\n        if (p.radiusType !== undefined || p.radiusData !== undefined || p.radiusSize !== undefined || p.radiusScale !== undefined) {\r\n            what.radius = true;\r\n            if (!ExtensionFragDepth || this.disableImpostor) {\r\n                rebuild = true;\r\n            }\r\n        }\r\n        if (p.defaultAssembly !== undefined &&\r\n            p.defaultAssembly !== this.defaultAssembly &&\r\n            ((this.assembly === 'default' && p.assembly === undefined) ||\r\n                p.assembly === 'default')) {\r\n            rebuild = true;\r\n        }\r\n        super.setParameters(p, what, rebuild);\r\n        return this;\r\n    }\r\n    getParameters() {\r\n        const params = Object.assign(super.getParameters(), {\r\n            sele: this.selection ? this.selection.string : undefined,\r\n            defaultAssembly: this.defaultAssembly\r\n        });\r\n        return params;\r\n    }\r\n    attach(callback) {\r\n        const viewer = this.viewer;\r\n        const bufferList = this.bufferList;\r\n        this.dataList.forEach(function (data) {\r\n            data.bufferList.forEach(function (buffer) {\r\n                bufferList.push(buffer);\r\n                viewer.add(buffer, data.instanceList);\r\n            });\r\n        });\r\n        this.setVisibility(this.visible);\r\n        callback();\r\n    }\r\n    clear() {\r\n        this.dataList.length = 0;\r\n        super.clear();\r\n    }\r\n    dispose() {\r\n        this.structureView.dispose();\r\n        delete this.structure;\r\n        delete this.structureView;\r\n        super.dispose();\r\n    }\r\n}\r\nexport default StructureRepresentation;\r\n//# sourceMappingURL=structure-representation.js.map","/**\r\n * @file Tube Mesh Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Matrix4 required for declaration only\r\nimport { Vector3 } from 'three';\r\nimport { defaults, getUintArray } from '../utils';\r\nimport { serialArray } from '../math/array-utils';\r\nimport MeshBuffer from './mesh-buffer';\r\nimport { BufferDefaultParameters } from './buffer';\r\nimport { Log } from \"../globals\";\r\nconst vTangent = new Vector3();\r\nconst vMeshNormal = new Vector3();\r\nexport const TubeMeshBufferDefaultParameters = Object.assign({\r\n    radialSegments: 4,\r\n    capped: false,\r\n    aspectRatio: 1.0\r\n}, BufferDefaultParameters);\r\nfunction getData(data, params = {}) {\r\n    const radialSegments = defaults(params.radialSegments, 4);\r\n    const capped = defaults(params.capped, false);\r\n    const capVertices = capped ? radialSegments : 0;\r\n    const capTriangles = capped ? radialSegments - 2 : 0;\r\n    const n = data.position.length / 3;\r\n    const n1 = n - 1;\r\n    const x = n * radialSegments * 3 + 2 * capVertices * 3;\r\n    const xi = n1 * 2 * radialSegments * 3 + 2 * capTriangles * 3;\r\n    return {\r\n        position: new Float32Array(x),\r\n        color: new Float32Array(x),\r\n        index: getUintArray(xi, x / 3),\r\n        normal: new Float32Array(x),\r\n        picking: data.picking\r\n    };\r\n}\r\n/**\r\n * Tube mesh buffer. Draws a tube.\r\n */\r\nclass TubeMeshBuffer extends MeshBuffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position - positions\r\n     * @param  {Float32Array} data.normal - normals\r\n     * @param  {Float32Array} data.binormal - binormals\r\n     * @param  {Float32Array} data.tangent - tangents\r\n     * @param  {Float32Array} data.color - colors\r\n     * @param  {Float32Array} data.size - sizes\r\n     * @param  {Picker} data.picking - picking ids\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super(getData(data, params), params);\r\n        this.capVertices = this.parameters.capped ? this.parameters.radialSegments : 0;\r\n        this.capTriangles = this.parameters.capped ? this.parameters.radialSegments - 2 : 0;\r\n        this.size2 = data.position.length / 3;\r\n        data.primitiveId = serialArray(this.size2);\r\n        this.setAttributes(data);\r\n        this.makeIndex();\r\n    }\r\n    get defaultParameters() { return TubeMeshBufferDefaultParameters; }\r\n    setAttributes(data = {}) {\r\n        const aspectRatio = this.parameters.aspectRatio;\r\n        const n = this.size2;\r\n        const n1 = n - 1;\r\n        const radialSegments = this.parameters.radialSegments;\r\n        const attributes = this.geometry.attributes;\r\n        let position, normal, binormal, tangent, color, size, primitiveId;\r\n        let meshPosition, meshColor, meshNormal, meshPrimitiveId;\r\n        if (data.position) {\r\n            position = data.position;\r\n            normal = data.normal;\r\n            binormal = data.binormal;\r\n            tangent = data.tangent;\r\n            size = data.size;\r\n            meshPosition = attributes.position.array;\r\n            meshNormal = attributes.normal.array;\r\n            attributes.position.needsUpdate = true;\r\n            attributes.normal.needsUpdate = true;\r\n        }\r\n        if (data.color) {\r\n            color = data.color;\r\n            meshColor = attributes.color.array;\r\n            attributes.color.needsUpdate = true;\r\n        }\r\n        if (data.primitiveId) {\r\n            primitiveId = data.primitiveId;\r\n            meshPrimitiveId = attributes.primitiveId.array;\r\n            attributes.primitiveId.needsUpdate = true;\r\n        }\r\n        let k, l;\r\n        let radius = 0;\r\n        let normX = 0;\r\n        let normY = 0;\r\n        let normZ = 0;\r\n        let biX = 0;\r\n        let biY = 0;\r\n        let biZ = 0;\r\n        let posX = 0;\r\n        let posY = 0;\r\n        let posZ = 0;\r\n        const cxArr = [];\r\n        const cyArr = [];\r\n        const cx1Arr = [];\r\n        const cy1Arr = [];\r\n        const cx2Arr = [];\r\n        const cy2Arr = [];\r\n        if (position) {\r\n            for (let j = 0; j < radialSegments; ++j) {\r\n                const v = (j / radialSegments) * 2 * Math.PI;\r\n                cxArr[j] = aspectRatio * Math.cos(v);\r\n                cyArr[j] = Math.sin(v);\r\n                cx1Arr[j] = aspectRatio * Math.cos(v - 0.01);\r\n                cy1Arr[j] = Math.sin(v - 0.01);\r\n                cx2Arr[j] = aspectRatio * Math.cos(v + 0.01);\r\n                cy2Arr[j] = Math.sin(v + 0.01);\r\n            }\r\n        }\r\n        for (let i = 0; i < n; ++i) {\r\n            k = i * 3;\r\n            l = k * radialSegments;\r\n            if (position && tangent && normal && binormal && size) {\r\n                vTangent.set(tangent[k], tangent[k + 1], tangent[k + 2]);\r\n                normX = normal[k];\r\n                normY = normal[k + 1];\r\n                normZ = normal[k + 2];\r\n                biX = binormal[k];\r\n                biY = binormal[k + 1];\r\n                biZ = binormal[k + 2];\r\n                posX = position[k];\r\n                posY = position[k + 1];\r\n                posZ = position[k + 2];\r\n                radius = size[i];\r\n            }\r\n            for (let j = 0; j < radialSegments; ++j) {\r\n                const s = l + j * 3;\r\n                if (position) {\r\n                    const cx = -radius * cxArr[j]; // TODO: Hack: Negating it so it faces outside.\r\n                    const cy = radius * cyArr[j];\r\n                    const cx1 = -radius * cx1Arr[j];\r\n                    const cy1 = radius * cy1Arr[j];\r\n                    const cx2 = -radius * cx2Arr[j];\r\n                    const cy2 = radius * cy2Arr[j];\r\n                    meshPosition[s] = posX + cx * normX + cy * biX;\r\n                    meshPosition[s + 1] = posY + cx * normY + cy * biY;\r\n                    meshPosition[s + 2] = posZ + cx * normZ + cy * biZ;\r\n                    // TODO half of these are symmetric\r\n                    vMeshNormal.set(\r\n                    // ellipse tangent approximated as vector from/to adjacent points\r\n                    (cx2 * normX + cy2 * biX) - (cx1 * normX + cy1 * biX), (cx2 * normY + cy2 * biY) - (cx1 * normY + cy1 * biY), (cx2 * normZ + cy2 * biZ) - (cx1 * normZ + cy1 * biZ)).cross(vTangent);\r\n                    meshNormal[s] = vMeshNormal.x;\r\n                    meshNormal[s + 1] = vMeshNormal.y;\r\n                    meshNormal[s + 2] = vMeshNormal.z;\r\n                }\r\n                if (color) {\r\n                    meshColor[s] = color[k];\r\n                    meshColor[s + 1] = color[k + 1];\r\n                    meshColor[s + 2] = color[k + 2];\r\n                }\r\n                if (primitiveId) {\r\n                    meshPrimitiveId[i * radialSegments + j] = primitiveId[i];\r\n                }\r\n            }\r\n        }\r\n        // front cap\r\n        k = 0;\r\n        l = n * 3 * radialSegments;\r\n        for (let j = 0; j < radialSegments; ++j) {\r\n            const s = k + j * 3;\r\n            const t = l + j * 3;\r\n            if (position && tangent) {\r\n                meshPosition[t] = meshPosition[s];\r\n                meshPosition[t + 1] = meshPosition[s + 1];\r\n                meshPosition[t + 2] = meshPosition[s + 2];\r\n                meshNormal[t] = tangent[k];\r\n                meshNormal[t + 1] = tangent[k + 1];\r\n                meshNormal[t + 2] = tangent[k + 2];\r\n            }\r\n            if (color) {\r\n                meshColor[t] = meshColor[s];\r\n                meshColor[t + 1] = meshColor[s + 1];\r\n                meshColor[t + 2] = meshColor[s + 2];\r\n            }\r\n            if (primitiveId) {\r\n                meshPrimitiveId[n * radialSegments + j] = meshPrimitiveId[0 + j];\r\n            }\r\n        }\r\n        // back cap\r\n        k = (n - 1) * 3 * radialSegments;\r\n        l = (n + 1) * 3 * radialSegments;\r\n        for (let j = 0; j < radialSegments; ++j) {\r\n            const s = k + j * 3;\r\n            const t = l + j * 3;\r\n            if (position && tangent) {\r\n                meshPosition[t] = meshPosition[s];\r\n                meshPosition[t + 1] = meshPosition[s + 1];\r\n                meshPosition[t + 2] = meshPosition[s + 2];\r\n                meshNormal[t] = tangent[n1 * 3];\r\n                meshNormal[t + 1] = tangent[n1 * 3 + 1];\r\n                meshNormal[t + 2] = tangent[n1 * 3 + 2];\r\n            }\r\n            if (color) {\r\n                meshColor[t] = meshColor[s];\r\n                meshColor[t + 1] = meshColor[s + 1];\r\n                meshColor[t + 2] = meshColor[s + 2];\r\n            }\r\n            if (primitiveId) {\r\n                meshPrimitiveId[(n + 1) * radialSegments + j] = meshPrimitiveId[(n - 1) * radialSegments + j];\r\n            }\r\n        }\r\n    }\r\n    makeIndex() {\r\n        const index = this.geometry.getIndex();\r\n        if (!index) {\r\n            Log.error('Index is null');\r\n            return;\r\n        }\r\n        const meshIndex = index.array;\r\n        const n = this.size2;\r\n        const n1 = n - 1;\r\n        const capTriangles = this.capTriangles;\r\n        const radialSegments = this.parameters.radialSegments;\r\n        const radialSegments1 = this.parameters.radialSegments + 1;\r\n        let k, l;\r\n        for (let i = 0; i < n1; ++i) {\r\n            const k = i * radialSegments * 3 * 2;\r\n            const irs = i * radialSegments;\r\n            const irs1 = (i + 1) * radialSegments;\r\n            for (let j = 0; j < radialSegments; ++j) {\r\n                l = k + j * 3 * 2;\r\n                // meshIndex[ l + 0 ] = irs + ( ( j + 0 ) % radialSegments );\r\n                meshIndex[l] = irs + j;\r\n                meshIndex[l + 1] = irs + ((j + 1) % radialSegments);\r\n                // meshIndex[ l + 2 ] = irs1 + ( ( j + 0 ) % radialSegments );\r\n                meshIndex[l + 2] = irs1 + j;\r\n                // meshIndex[ l + 3 ] = irs1 + ( ( j + 0 ) % radialSegments );\r\n                meshIndex[l + 3] = irs1 + j;\r\n                meshIndex[l + 4] = irs + ((j + 1) % radialSegments);\r\n                meshIndex[l + 5] = irs1 + ((j + 1) % radialSegments);\r\n            }\r\n        }\r\n        // capping\r\n        const strip = [0];\r\n        for (let j = 1; j < radialSegments1 / 2; ++j) {\r\n            strip.push(j);\r\n            if (radialSegments - j !== j) {\r\n                strip.push(radialSegments - j);\r\n            }\r\n        }\r\n        // front cap\r\n        l = n1 * radialSegments * 3 * 2;\r\n        k = n * radialSegments;\r\n        for (let j = 0; j < strip.length - 2; ++j) {\r\n            if (j % 2 === 0) {\r\n                meshIndex[l + j * 3 + 0] = k + strip[j + 0];\r\n                meshIndex[l + j * 3 + 1] = k + strip[j + 1];\r\n                meshIndex[l + j * 3 + 2] = k + strip[j + 2];\r\n            }\r\n            else {\r\n                meshIndex[l + j * 3 + 0] = k + strip[j + 2];\r\n                meshIndex[l + j * 3 + 1] = k + strip[j + 1];\r\n                meshIndex[l + j * 3 + 2] = k + strip[j + 0];\r\n            }\r\n        }\r\n        // back cap\r\n        l = n1 * radialSegments * 3 * 2 + 3 * capTriangles;\r\n        k = n * radialSegments + radialSegments;\r\n        for (let j = 0; j < strip.length - 2; ++j) {\r\n            if (j % 2 === 0) {\r\n                meshIndex[l + j * 3 + 0] = k + strip[j + 0];\r\n                meshIndex[l + j * 3 + 1] = k + strip[j + 1];\r\n                meshIndex[l + j * 3 + 2] = k + strip[j + 2];\r\n            }\r\n            else {\r\n                meshIndex[l + j * 3 + 0] = k + strip[j + 2];\r\n                meshIndex[l + j * 3 + 1] = k + strip[j + 1];\r\n                meshIndex[l + j * 3 + 2] = k + strip[j + 0];\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default TubeMeshBuffer;\r\n//# sourceMappingURL=tubemesh-buffer.js.map","/**\r\n * @file Cartoon Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport { Debug, Log, RepresentationRegistry } from '../globals';\r\nimport Spline from '../geometry/spline';\r\nimport StructureRepresentation from './structure-representation';\r\nimport TubeMeshBuffer from '../buffer/tubemesh-buffer';\r\n/**\r\n * Cartoon representation. Show a thick ribbon that\r\n * smoothly connecting backbone atoms in polymers.\r\n *\r\n * __Name:__ _cartoon_\r\n *\r\n * @example\r\n * stage.loadFile( \"rcsb://1crn\" ).then( function( o ){\r\n *     o.addRepresentation( \"cartoon\" );\r\n *     o.autoView();\r\n * } );\r\n */\r\nclass CartoonRepresentation extends StructureRepresentation {\r\n    /**\r\n     * Create Cartoon representation object\r\n     * @param {Structure} structure - the structure to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {StructureRepresentationParameters} params - representation parameters\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'cartoon';\r\n        this.parameters = Object.assign({\r\n            aspectRatio: {\r\n                type: 'number', precision: 1, max: 10.0, min: 1.0, rebuild: true\r\n            },\r\n            subdiv: {\r\n                type: 'integer', max: 50, min: 1, rebuild: true\r\n            },\r\n            radialSegments: {\r\n                type: 'integer', max: 50, min: 1, rebuild: true\r\n            },\r\n            tension: {\r\n                type: 'number', precision: 1, max: 1.0, min: 0.1\r\n            },\r\n            capped: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            smoothSheet: {\r\n                type: 'boolean', rebuild: true\r\n            }\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'chainname');\r\n        p.colorScale = defaults(p.colorScale, 'RdYlBu');\r\n        p.radiusType = defaults(p.radiusType, 'sstruc');\r\n        p.radiusScale = defaults(p.radiusScale, 0.7);\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        this.aspectRatio = defaults(p.aspectRatio, 5.0);\r\n        this.tension = defaults(p.tension, NaN);\r\n        this.capped = defaults(p.capped, true);\r\n        this.smoothSheet = defaults(p.smoothSheet, false);\r\n        if (p.quality === 'low') {\r\n            this.subdiv = 3;\r\n            this.radialSegments = 6;\r\n        }\r\n        else if (p.quality === 'medium') {\r\n            this.subdiv = 6;\r\n        }\r\n        else if (p.quality === 'high') {\r\n            this.subdiv = 12;\r\n        }\r\n        else {\r\n            this.subdiv = defaults(p.subdiv, 6);\r\n        }\r\n        super.init(p);\r\n    }\r\n    getSplineParams(params) {\r\n        return Object.assign({\r\n            subdiv: this.subdiv,\r\n            tension: this.tension,\r\n            directional: this.aspectRatio !== 1.0,\r\n            smoothSheet: this.smoothSheet\r\n        }, params);\r\n    }\r\n    getSpline(polymer) {\r\n        return new Spline(polymer, this.getSplineParams());\r\n    }\r\n    getAspectRatio(polymer) {\r\n        return polymer.isCg() ? 1.0 : this.aspectRatio;\r\n    }\r\n    getAtomRadius(atom) {\r\n        return atom.isTrace() ? super.getAtomRadius(atom) : 0;\r\n    }\r\n    createData(sview) {\r\n        let bufferList = [];\r\n        let polymerList = [];\r\n        this.structure.eachPolymer(polymer => {\r\n            if (polymer.residueCount < 4)\r\n                return;\r\n            polymerList.push(polymer);\r\n            const spline = this.getSpline(polymer);\r\n            const aspectRatio = this.getAspectRatio(polymer);\r\n            const subPos = spline.getSubdividedPosition();\r\n            const subOri = spline.getSubdividedOrientation();\r\n            const subCol = spline.getSubdividedColor(this.getColorParams());\r\n            const subPick = spline.getSubdividedPicking();\r\n            const subSize = spline.getSubdividedSize(this.getRadiusParams());\r\n            bufferList.push(new TubeMeshBuffer(Object.assign({}, subPos, subOri, subCol, subPick, subSize), this.getBufferParams({\r\n                radialSegments: this.radialSegments,\r\n                aspectRatio: aspectRatio,\r\n                capped: this.capped\r\n            })));\r\n        }, sview.getSelection());\r\n        return {\r\n            bufferList: bufferList,\r\n            polymerList: polymerList\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        if (Debug)\r\n            Log.time(this.type + ' repr update');\r\n        what = what || {};\r\n        for (var i = 0, il = data.polymerList.length; i < il; ++i) {\r\n            var bufferData = {};\r\n            var polymer = data.polymerList[i];\r\n            var spline = this.getSpline(polymer);\r\n            var aspectRatio = this.getAspectRatio(polymer);\r\n            Object.assign(data.bufferList[i], { aspectRatio: aspectRatio });\r\n            if (what.position || what.radius) {\r\n                var subPos = spline.getSubdividedPosition();\r\n                var subOri = spline.getSubdividedOrientation();\r\n                var subSize = spline.getSubdividedSize(this.getRadiusParams(aspectRatio));\r\n                bufferData.position = subPos.position;\r\n                bufferData.normal = subOri.normal;\r\n                bufferData.binormal = subOri.binormal;\r\n                bufferData.tangent = subOri.tangent;\r\n                bufferData.size = subSize.size;\r\n            }\r\n            if (what.color) {\r\n                var subCol = spline.getSubdividedColor(this.getColorParams());\r\n                bufferData.color = subCol.color;\r\n            }\r\n            if (what.picking) {\r\n                var subPick = spline.getSubdividedPicking();\r\n                bufferData.picking = subPick.picking;\r\n            }\r\n            data.bufferList[i].setAttributes(bufferData);\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd(this.type + ' repr update');\r\n    }\r\n    setParameters(params) {\r\n        const rebuild = false;\r\n        var what = {};\r\n        if (params && params.aspectRatio) {\r\n            what.radius = true;\r\n        }\r\n        if (params && params.tension) {\r\n            what.position = true;\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        return this;\r\n    }\r\n}\r\nRepresentationRegistry.add('cartoon', CartoonRepresentation);\r\nexport default CartoonRepresentation;\r\n//# sourceMappingURL=cartoon-representation.js.map","/**\r\n * @file Cylinder Geometry Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4, Vector3, CylinderBufferGeometry } from 'three';\r\nimport { defaults } from '../utils';\r\nimport { calculateCenterArray, serialBlockArray } from '../math/array-utils.js';\r\nimport GeometryBuffer from './geometry-buffer.js';\r\nimport { BufferDefaultParameters } from './buffer';\r\nconst scale = new Vector3();\r\nconst eye = new Vector3();\r\nconst target = new Vector3();\r\nconst up = new Vector3(0, 1, 0);\r\nexport const CylinderGeometryBufferDefaultParameters = Object.assign({\r\n    radialSegments: 1,\r\n    openEnded: true\r\n}, BufferDefaultParameters);\r\nfunction getData(data, params = {}) {\r\n    const geo = getGeo(params);\r\n    const n = data.position1.length;\r\n    const geoLength = geo.attributes.position.array.length / 3;\r\n    const count = n / 3;\r\n    const primitiveId = new Float32Array(count * 2 * geoLength);\r\n    serialBlockArray(count, geoLength, 0, primitiveId);\r\n    serialBlockArray(count, geoLength, count * geoLength, primitiveId);\r\n    const position = new Float32Array(n * 2);\r\n    const color = new Float32Array(n * 2);\r\n    return {\r\n        position, color, primitiveId, picking: data.picking\r\n    };\r\n}\r\nfunction getGeo(params = {}) {\r\n    const radialSegments = defaults(params.radialSegments, 10);\r\n    const openEnded = defaults(params.openEnded, true);\r\n    const matrix = new Matrix4().makeRotationX(Math.PI / 2);\r\n    const geo = new CylinderBufferGeometry(1, // radiusTop,\r\n    1, // radiusBottom,\r\n    1, // height,\r\n    radialSegments, // radialSegments,\r\n    1, // heightSegments,\r\n    openEnded // openEnded\r\n    );\r\n    geo.applyMatrix4(matrix);\r\n    return geo;\r\n}\r\n/**\r\n * Cylinder geometry buffer.\r\n *\r\n * @example\r\n * var cylinderGeometryBuffer = new CylinderGeometryBuffer({\r\n *   position1: new Float32Array([ 0, 0, 0 ]),\r\n *   position2: new Float32Array([ 1, 1, 1 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   color2: new Float32Array([ 0, 1, 0 ]),\r\n *   radius: new Float32Array([ 1 ])\r\n * });\r\n */\r\nclass CylinderGeometryBuffer extends GeometryBuffer {\r\n    /**\r\n     * @param {Object} data - buffer data\r\n     * @param {Float32Array} data.position1 - from positions\r\n     * @param {Float32Array} data.position2 - to positions\r\n     * @param {Float32Array} data.color - from colors\r\n     * @param {Float32Array} data.color2 - to colors\r\n     * @param {Float32Array} data.radius - radii\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param {BufferParameters} [params] - parameters object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super(getData(data, params), params, getGeo(params));\r\n        this.updateNormals = true;\r\n        const n = data.position1.length;\r\n        const m = data.radius.length;\r\n        this.__center = new Float32Array(n);\r\n        this._position = new Float32Array(n * 2);\r\n        this._color = new Float32Array(n * 2);\r\n        this._from = new Float32Array(n * 2);\r\n        this._to = new Float32Array(n * 2);\r\n        this._radius = new Float32Array(m * 2);\r\n        this.setAttributes(data, true);\r\n    }\r\n    get defaultParameters() { return CylinderGeometryBufferDefaultParameters; }\r\n    applyPositionTransform(matrix, i, i3) {\r\n        eye.fromArray(this._from, i3);\r\n        target.fromArray(this._to, i3);\r\n        matrix.lookAt(eye, target, up);\r\n        const r = this._radius[i];\r\n        scale.set(r, r, eye.distanceTo(target));\r\n        matrix.scale(scale);\r\n    }\r\n    setAttributes(data = {}, initNormals) {\r\n        const meshData = {};\r\n        if (data.position1 && data.position2) {\r\n            calculateCenterArray(data.position1, data.position2, this.__center);\r\n            calculateCenterArray(data.position1, this.__center, this._position);\r\n            calculateCenterArray(this.__center, data.position2, this._position, data.position1.length);\r\n            this._from.set(data.position1);\r\n            this._from.set(this.__center, data.position1.length);\r\n            this._to.set(this.__center);\r\n            this._to.set(data.position2, this.__center.length);\r\n            meshData.position = this._position;\r\n        }\r\n        if (data.color && data.color2) {\r\n            this._color.set(data.color);\r\n            this._color.set(data.color2, data.color.length);\r\n            meshData.color = this._color;\r\n        }\r\n        if (data.radius) {\r\n            this._radius.set(data.radius);\r\n            this._radius.set(data.radius, data.radius.length);\r\n            meshData.radius = this._radius;\r\n        }\r\n        super.setAttributes(meshData, initNormals);\r\n    }\r\n}\r\nexport default CylinderGeometryBuffer;\r\n//# sourceMappingURL=cylindergeometry-buffer.js.map","/**\r\n * @file Mapped Aligned Box Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport MappedBuffer from './mapped-buffer';\r\nconst mapping = new Float32Array([\r\n    -1.0, 1.0, -1.0,\r\n    -1.0, -1.0, -1.0,\r\n    1.0, 1.0, -1.0,\r\n    1.0, 1.0, 1.0,\r\n    1.0, -1.0, -1.0,\r\n    1.0, -1.0, 1.0\r\n]);\r\nconst mappingIndices = new Uint16Array([\r\n    0, 1, 2,\r\n    1, 4, 2,\r\n    2, 4, 3,\r\n    4, 5, 3\r\n]);\r\n/**\r\n * Mapped Aligned box buffer. Draws boxes where one side is always screen-space aligned.\r\n * Used to render cylinder imposters.\r\n * @interface\r\n */\r\nclass MappedAlignedBoxBuffer extends MappedBuffer {\r\n    constructor(data, params = {}) {\r\n        super('v3', data, params);\r\n    }\r\n    get mapping() { return mapping; }\r\n    get mappingIndices() { return mappingIndices; }\r\n    get mappingIndicesSize() { return 12; }\r\n    get mappingSize() { return 6; }\r\n    get mappingItemSize() { return 3; }\r\n}\r\nexport default MappedAlignedBoxBuffer;\r\n//# sourceMappingURL=mappedalignedbox-buffer.js.map","/**\r\n * @file Cylinder Impostor Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3 required for declaration only\r\nimport { Matrix4 } from 'three';\r\nimport '../shader/CylinderImpostor.vert';\r\nimport '../shader/CylinderImpostor.frag';\r\nimport MappedAlignedBoxBuffer from './mappedalignedbox-buffer.js';\r\nimport { BufferDefaultParameters, BufferParameterTypes } from './buffer';\r\nexport const CylinderImpostorBufferDefaultParameters = Object.assign({\r\n    openEnded: false\r\n}, BufferDefaultParameters);\r\nconst CylinderImpostorBufferParameterTypes = Object.assign({\r\n    openEnded: { updateShader: true }\r\n}, BufferParameterTypes);\r\n/**\r\n * Cylinder impostor buffer.\r\n *\r\n * @example\r\n * var cylinderimpostorBuffer = new CylinderImpostorBuffer({\r\n *     position1: new Float32Array([ 0, 0, 0 ]),\r\n *     position2: new Float32Array([ 1, 1, 1 ]),\r\n *     color: new Float32Array([ 1, 0, 0 ]),\r\n *     color2: new Float32Array([ 0, 1, 0 ]),\r\n *     radius: new Float32Array([ 1 ])\r\n * });\r\n */\r\nclass CylinderImpostorBuffer extends MappedAlignedBoxBuffer {\r\n    /**\r\n     * make cylinder impostor buffer\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position1 - from positions\r\n     * @param  {Float32Array} data.position2 - to positions\r\n     * @param  {Float32Array} data.color - from colors\r\n     * @param  {Float32Array} data.color2 - to colors\r\n     * @param  {Float32Array} data.radius - radii\r\n     * @param  {Picker} data.picking - picking ids\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super(data, params);\r\n        this.parameterTypes = CylinderImpostorBufferParameterTypes;\r\n        this.isImpostor = true;\r\n        this.vertexShader = 'CylinderImpostor.vert';\r\n        this.fragmentShader = 'CylinderImpostor.frag';\r\n        this.addUniforms({\r\n            'modelViewMatrixInverse': { value: new Matrix4() },\r\n            'ortho': { value: 0.0 }\r\n        });\r\n        this.addAttributes({\r\n            'position1': { type: 'v3', value: null },\r\n            'position2': { type: 'v3', value: null },\r\n            'color2': { type: 'c', value: null },\r\n            'radius': { type: 'f', value: null }\r\n        });\r\n        this.setAttributes(data);\r\n        this.makeMapping();\r\n    }\r\n    get defaultParameters() { return CylinderImpostorBufferDefaultParameters; }\r\n    getDefines(type) {\r\n        const defines = MappedAlignedBoxBuffer.prototype.getDefines.call(this, type);\r\n        if (!this.parameters.openEnded) {\r\n            defines.CAP = 1;\r\n        }\r\n        return defines;\r\n    }\r\n}\r\nexport default CylinderImpostorBuffer;\r\n//# sourceMappingURL=cylinderimpostor-buffer.js.map","/**\r\n * @file Cylinder Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { BufferRegistry, ExtensionFragDepth } from '../globals';\r\nimport CylinderGeometryBuffer, { CylinderGeometryBufferDefaultParameters } from './cylindergeometry-buffer';\r\nimport CylinderImpostorBuffer, { CylinderImpostorBufferDefaultParameters } from './cylinderimpostor-buffer';\r\nexport const CylinderBufferDefaultParameters = Object.assign({\r\n    disableImpostor: false\r\n}, CylinderGeometryBufferDefaultParameters, CylinderImpostorBufferDefaultParameters);\r\n/**\r\n * Cylinder buffer. Depending on the value {@link ExtensionFragDepth} and\r\n * `params.disableImpostor` the constructor returns either a\r\n * {@link CylinderGeometryBuffer} or a {@link CylinderImpostorBuffer}\r\n * @implements {Buffer}\r\n *\r\n * @example\r\n * var cylinderBuffer = new CylinderBuffer({\r\n *   position1: new Float32Array([ 0, 0, 0 ]),\r\n *   position2: new Float32Array([ 1, 1, 1 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   color2: new Float32Array([ 0, 1, 0 ]),\r\n *   radius: new Float32Array([ 1 ])\r\n * });\r\n */\r\nclass CylinderBuffer {\r\n    constructor(data, params = {}) {\r\n        if (!data.color2 && data.color)\r\n            data.color2 = data.color;\r\n        if (!ExtensionFragDepth || (params && params.disableImpostor)) {\r\n            return new CylinderGeometryBuffer(data, params);\r\n        }\r\n        else {\r\n            return new CylinderImpostorBuffer(data, params);\r\n        }\r\n    }\r\n}\r\nBufferRegistry.add('cylinder', CylinderBuffer);\r\nexport default CylinderBuffer;\r\n//# sourceMappingURL=cylinder-buffer.js.map","/**\r\n * @file Wide Line Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3 required for declaration only\r\nimport { Vector2, Matrix4 } from 'three';\r\nimport '../shader/WideLine.vert';\r\nimport '../shader/WideLine.frag';\r\nimport { BufferRegistry } from '../globals';\r\nimport MappedQuadBuffer from './mappedquad-buffer';\r\nimport { BufferDefaultParameters, BufferParameterTypes } from './buffer';\r\nexport const WideLineBufferDefaultParameters = Object.assign({\r\n    linewidth: 2\r\n}, BufferDefaultParameters);\r\nconst WideLineBufferParameterTypes = Object.assign({\r\n    linewidth: { uniform: true }\r\n}, BufferParameterTypes);\r\n/**\r\n * Wide Line buffer. Draws lines with a fixed width in pixels.\r\n *\r\n * @example\r\n * var lineBuffer = new WideLineBuffer({\r\n *   position1: new Float32Array([ 0, 0, 0 ]),\r\n *   position2: new Float32Array([ 1, 1, 1 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   color2: new Float32Array([ 0, 1, 0 ])\r\n * });\r\n */\r\nclass WideLineBuffer extends MappedQuadBuffer {\r\n    constructor(data, params = {}) {\r\n        super(data, params);\r\n        this.parameterTypes = WideLineBufferParameterTypes;\r\n        this.vertexShader = 'WideLine.vert';\r\n        this.fragmentShader = 'WideLine.frag';\r\n        if (!data.color2 && data.color)\r\n            data.color2 = data.color;\r\n        this.addUniforms({\r\n            'linewidth': { value: this.parameters.linewidth },\r\n            'resolution': { value: new Vector2() },\r\n            'projectionMatrixInverse': { value: new Matrix4() }\r\n        });\r\n        this.addAttributes({\r\n            'position1': { type: 'v3', value: null },\r\n            'position2': { type: 'v3', value: null },\r\n            'color2': { type: 'c', value: null }\r\n        });\r\n        this.setAttributes(data);\r\n        this.makeMapping();\r\n    }\r\n    get defaultParameters() { return WideLineBufferDefaultParameters; }\r\n    setParameters(params) {\r\n        super.setParameters(params);\r\n    }\r\n}\r\nBufferRegistry.add('wideline', WideLineBuffer);\r\nexport default WideLineBuffer;\r\n//# sourceMappingURL=wideline-buffer.js.map","/**\r\n * @file Ball And Stick Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport { ExtensionFragDepth, RepresentationRegistry } from '../globals';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport SphereBuffer from '../buffer/sphere-buffer.js';\r\nimport CylinderBuffer from '../buffer/cylinder-buffer.js';\r\nimport WideLineBuffer from '../buffer/wideline-buffer.js';\r\n/**\r\n * Ball And Stick representation parameter object. Extends {@link RepresentationParameters} and\r\n * {@link StructureRepresentationParameters}.\r\n *\r\n * @typedef {Object} BallAndStickRepresentationParameters - ball and stick representation parameters\r\n *\r\n * @property {Integer} sphereDetail - sphere quality (icosahedron subdivisions)\r\n * @property {Integer} radialSegments - cylinder quality (number of segments)\r\n * @property {Boolean} openEnded - capped or not\r\n * @property {Boolean} disableImpostor - disable use of raycasted impostors for rendering\r\n * @property {Float} aspectRatio - size difference between atom and bond radii\r\n * @property {Boolean} lineOnly - render only bonds, and only as lines\r\n * @property {Integer} linewidth - width of lines\r\n * @property {Boolean} cylinderOnly - render only bonds (no atoms)\r\n * @property {String} multipleBond - one off \"off\", \"symmetric\", \"offset\"\r\n * @property {Float} bondSpacing - spacing for multiple bond rendering\r\n * @property {Float} bondScale - scale/radius for multiple bond rendering\r\n */\r\n/**\r\n * Ball And Stick representation. Show atoms as spheres and bonds as cylinders.\r\n *\r\n * __Name:__ _ball+stick_\r\n *\r\n * @example\r\n * stage.loadFile( \"rcsb://1crn\" ).then( function( o ){\r\n *     o.addRepresentation( \"ball+stick\" );\r\n *     o.autoView();\r\n * } );\r\n */\r\nclass BallAndStickRepresentation extends StructureRepresentation {\r\n    /**\r\n     * Create Ball And Stick representation object\r\n     * @param {Structure} structure - the structure to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {BallAndStickRepresentationParameters} params - ball and stick representation parameters\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'ball+stick';\r\n        this.parameters = Object.assign({\r\n            sphereDetail: true,\r\n            radialSegments: true,\r\n            openEnded: true,\r\n            disableImpostor: true,\r\n            aspectRatio: {\r\n                type: 'number', precision: 1, max: 10.0, min: 1.0\r\n            },\r\n            lineOnly: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            cylinderOnly: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            multipleBond: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    'off': 'off',\r\n                    'symmetric': 'symmetric',\r\n                    'offset': 'offset'\r\n                }\r\n            },\r\n            bondScale: {\r\n                type: 'number', precision: 2, max: 1.0, min: 0.01\r\n            },\r\n            bondSpacing: {\r\n                type: 'number', precision: 2, max: 2.0, min: 0.5\r\n            },\r\n            linewidth: {\r\n                type: 'integer', max: 50, min: 1, buffer: true\r\n            }\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.radiusType = defaults(p.radiusType, 'size');\r\n        p.radiusSize = defaults(p.radiusSize, 0.15);\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        this.aspectRatio = defaults(p.aspectRatio, 2.0);\r\n        this.lineOnly = defaults(p.lineOnly, false);\r\n        this.cylinderOnly = defaults(p.cylinderOnly, false);\r\n        this.multipleBond = defaults(p.multipleBond, 'off');\r\n        this.bondSpacing = defaults(p.bondSpacing, 1.0);\r\n        this.bondScale = defaults(p.bondScale, 0.4);\r\n        this.linewidth = defaults(p.linewidth, 2);\r\n        super.init(p);\r\n    }\r\n    getAtomRadius(atom) {\r\n        return this.aspectRatio * super.getAtomRadius(atom);\r\n    }\r\n    getAtomParams(what, params) {\r\n        var p = super.getAtomParams(what, params);\r\n        p.radiusParams.scale *= this.aspectRatio;\r\n        return p;\r\n    }\r\n    getAtomData(sview, what, params) {\r\n        return sview.getAtomData(this.getAtomParams(what, params));\r\n    }\r\n    getBondParams(what, params) {\r\n        params = Object.assign({\r\n            multipleBond: this.multipleBond,\r\n            bondSpacing: this.bondSpacing,\r\n            bondScale: this.bondScale\r\n        }, params);\r\n        return super.getBondParams(what, params);\r\n    }\r\n    getBondData(sview, what, params) {\r\n        return sview.getBondData(this.getBondParams(what, params));\r\n    }\r\n    createData(sview) {\r\n        const bufferList = [];\r\n        if (this.lineOnly) {\r\n            this.lineBuffer = new WideLineBuffer(this.getBondData(sview, { position: true, color: true, picking: true }), this.getBufferParams({ linewidth: this.linewidth }));\r\n            bufferList.push(this.lineBuffer);\r\n        }\r\n        else {\r\n            const cylinderBuffer = new CylinderBuffer(this.getBondData(sview), this.getBufferParams({\r\n                openEnded: this.openEnded,\r\n                radialSegments: this.radialSegments,\r\n                disableImpostor: this.disableImpostor,\r\n                dullInterior: true\r\n            }));\r\n            bufferList.push(cylinderBuffer);\r\n            if (!this.cylinderOnly) {\r\n                const sphereBuffer = new SphereBuffer(this.getAtomData(sview), this.getBufferParams({\r\n                    sphereDetail: this.sphereDetail,\r\n                    disableImpostor: this.disableImpostor,\r\n                    dullInterior: true\r\n                }));\r\n                bufferList.push(sphereBuffer);\r\n            }\r\n        }\r\n        return {\r\n            bufferList: bufferList\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        if (this.multipleBond !== 'off' && what && what.radius) {\r\n            what.position = true;\r\n        }\r\n        const bondData = this.getBondData(data.sview, what);\r\n        if (this.lineOnly) {\r\n            const lineData = {};\r\n            if (!what || what.position) {\r\n                Object.assign(lineData, {\r\n                    position1: bondData.position1,\r\n                    position2: bondData.position2\r\n                });\r\n            }\r\n            if (!what || what.color) {\r\n                Object.assign(lineData, {\r\n                    color: bondData.color,\r\n                    color2: bondData.color2\r\n                });\r\n            }\r\n            data.bufferList[0].setAttributes(lineData);\r\n        }\r\n        else {\r\n            var cylinderData = {};\r\n            if (!what || what.position) {\r\n                Object.assign(cylinderData, {\r\n                    position1: bondData.position1,\r\n                    position2: bondData.position2\r\n                });\r\n            }\r\n            if (!what || what.color) {\r\n                Object.assign(cylinderData, {\r\n                    color: bondData.color,\r\n                    color2: bondData.color2\r\n                });\r\n            }\r\n            if (!what || what.radius) {\r\n                Object.assign(cylinderData, {\r\n                    radius: bondData.radius\r\n                });\r\n            }\r\n            data.bufferList[0].setAttributes(cylinderData);\r\n            if (!this.cylinderOnly) {\r\n                var atomData = this.getAtomData(data.sview, what);\r\n                var sphereData = {};\r\n                if (!what || what.position) {\r\n                    Object.assign(sphereData, {\r\n                        position: atomData.position\r\n                    });\r\n                }\r\n                if (!what || what.color) {\r\n                    Object.assign(sphereData, {\r\n                        color: atomData.color\r\n                    });\r\n                }\r\n                if (!what || what.radius) {\r\n                    Object.assign(sphereData, {\r\n                        radius: atomData.radius\r\n                    });\r\n                }\r\n                data.bufferList[1].setAttributes(sphereData);\r\n            }\r\n        }\r\n    }\r\n    setParameters(params = {}) {\r\n        let rebuild = false;\r\n        const what = {};\r\n        if (params.aspectRatio || params.bondSpacing || params.bondScale) {\r\n            Object.assign(what, { radius: true });\r\n            if (!ExtensionFragDepth || this.disableImpostor) {\r\n                rebuild = true;\r\n            }\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        return this;\r\n    }\r\n}\r\nRepresentationRegistry.add('ball+stick', BallAndStickRepresentation);\r\nexport default BallAndStickRepresentation;\r\n//# sourceMappingURL=ballandstick-representation.js.map","/**\r\n *\r\n */\r\nimport StructureComponent from \"../component/structure-component\";\r\nimport CartoonRepresentation from \"../representation/cartoon-representation\";\r\nimport BallAndStickRepresentation from \"../representation/ballandstick-representation\";\r\nclass TestModification {\r\n    // Initialize member variables\r\n    constructor( /* Maybe have some input*/) {\r\n        // Maybe do some stuff...\r\n    }\r\n    hover(stage, pickingProxy) {\r\n        if (pickingProxy) {\r\n            //console.log(\"Hovered over some structure!\");\r\n        }\r\n    }\r\n    clickPick_left(stage, pickingProxy) {\r\n        if (pickingProxy) {\r\n            let text = \"You've picked\";\r\n            if (pickingProxy.atom) {\r\n                text += \" an atom\";\r\n            }\r\n            else if (pickingProxy.bond) {\r\n                text += \" a bond\";\r\n            }\r\n            else {\r\n                text += \"... something\";\r\n            }\r\n            text += \"! Here's its component and also the stage:\";\r\n            console.log(text);\r\n            console.log(pickingProxy.component);\r\n            console.log(stage);\r\n            if (pickingProxy.component instanceof StructureComponent) {\r\n                let component = pickingProxy.component;\r\n                let structure = component.object;\r\n                let atomStore = structure.atomStore; // Atom data is stored here!\r\n                let bondStore = structure.bondStore; // Bond data is stored here!\r\n                console.log(\"And now the AtomStore and BondStore:\");\r\n                console.log(atomStore);\r\n                console.log(bondStore);\r\n                console.assert(stage === component.stage);\r\n                console.assert(stage.viewer === component.viewer);\r\n                console.log(\"And now some representations of this component\");\r\n                component.reprList.forEach((value) => {\r\n                    let reprName = value.parameters.name;\r\n                    let repr = value.repr;\r\n                    if (reprName === 'cartoon') {\r\n                        console.assert(repr instanceof CartoonRepresentation);\r\n                        console.log(repr);\r\n                    }\r\n                    else if (reprName === 'ball+stick') {\r\n                        console.assert(repr instanceof BallAndStickRepresentation);\r\n                        console.log(repr);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default TestModification;\r\n//# sourceMappingURL=TEST.js.map","/**\r\n * @file Mouse Actions\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { almostIdentity } from '../math/math-utils';\r\nimport SurfaceRepresentation from '../representation/surface-representation';\r\n// Added by Lucas Melo\r\nimport TestModification from './TEST';\r\nexport let testModification = new TestModification();\r\n/**\r\n * Mouse actions provided as static methods\r\n */\r\nclass MouseActions {\r\n    /**\r\n     * Zoom scene based on scroll-delta\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} delta - amount to zoom\r\n     * @return {undefined}\r\n     */\r\n    static zoomScroll(stage, delta) {\r\n        stage.trackballControls.zoom(delta);\r\n    }\r\n    /**\r\n     * Move near clipping plane based on scroll-delta\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} delta - amount to move clipping plane\r\n     * @return {undefined}\r\n     */\r\n    static clipNearScroll(stage, delta) {\r\n        const sp = stage.getParameters();\r\n        stage.setParameters({ clipNear: sp.clipNear + delta / 10 });\r\n    }\r\n    /**\r\n     * Move clipping planes based on scroll-delta.\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} delta - direction to move planes\r\n     * @return {undefined}\r\n     */\r\n    static focusScroll(stage, delta) {\r\n        const focus = stage.getFocus();\r\n        const sign = Math.sign(delta);\r\n        const step = sign * almostIdentity((100 - focus) / 10, 5, 0.2);\r\n        stage.setFocus(focus + step);\r\n    }\r\n    /**\r\n     * Zoom scene based on scroll-delta and\r\n     * move focus planes based on camera position (zoom)\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} delta - amount to move focus planes and zoom\r\n     * @return {undefined}\r\n     */\r\n    static zoomFocusScroll(stage, delta) {\r\n        stage.trackballControls.zoom(delta);\r\n        const z = stage.viewer.camera.position.z;\r\n        stage.setFocus(100 - Math.abs(z / 8));\r\n    }\r\n    /**\r\n     * Change isolevel of volume surfaces based on scroll-delta\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} delta - amount to change isolevel\r\n     * @return {undefined}\r\n     */\r\n    static isolevelScroll(stage, delta) {\r\n        const d = Math.sign(delta) / 10;\r\n        stage.eachRepresentation((reprElem, comp) => {\r\n            if (reprElem.repr instanceof SurfaceRepresentation) {\r\n                const p = reprElem.getParameters(); // TODO\r\n                if (p.isolevelScroll) {\r\n                    reprElem.setParameters({ isolevel: p.isolevel + d });\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Pan scene based on mouse coordinate changes\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} dx - amount to pan in x direction\r\n     * @param {Number} dy - amount to pan in y direction\r\n     * @return {undefined}\r\n     */\r\n    static panDrag(stage, dx, dy) {\r\n        stage.trackballControls.pan(dx, dy);\r\n    }\r\n    /**\r\n     * Rotate scene based on mouse coordinate changes\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} dx - amount to rotate in x direction\r\n     * @param {Number} dy - amount to rotate in y direction\r\n     * @return {undefined}\r\n     */\r\n    static rotateDrag(stage, dx, dy) {\r\n        stage.trackballControls.rotate(dx, dy);\r\n    }\r\n    /**\r\n     * Rotate scene around z axis based on mouse coordinate changes\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} dx - amount to rotate in x direction\r\n     * @param {Number} dy - amount to rotate in y direction\r\n     * @return {undefined}\r\n     */\r\n    static zRotateDrag(stage, dx, dy) {\r\n        stage.trackballControls.zRotate(dx, dy);\r\n    }\r\n    /**\r\n     * Zoom scene based on mouse coordinate changes\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} dx - amount to zoom\r\n     * @param {Number} dy - amount to zoom\r\n     * @return {undefined}\r\n     */\r\n    static zoomDrag(stage, dx, dy) {\r\n        stage.trackballControls.zoom((dx + dy) / -2);\r\n    }\r\n    /**\r\n     * Zoom scene based on mouse coordinate changes and\r\n     * move focus planes based on camera position (zoom)\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} dx - amount to zoom and focus\r\n     * @param {Number} dy - amount to zoom and focus\r\n     * @return {undefined}\r\n     */\r\n    static zoomFocusDrag(stage, dx, dy) {\r\n        stage.trackballControls.zoom((dx + dy) / -2);\r\n        const z = stage.viewer.camera.position.z;\r\n        stage.setFocus(100 - Math.abs(z / 8));\r\n    }\r\n    /**\r\n     * Pan picked component based on mouse coordinate changes\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} dx - amount to pan in x direction\r\n     * @param {Number} dy - amount to pan in y direction\r\n     * @return {undefined}\r\n     */\r\n    static panComponentDrag(stage, dx, dy) {\r\n        stage.trackballControls.panComponent(dx, dy);\r\n    }\r\n    /**\r\n     * Pan picked atom based on mouse coordinate changes\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} dx - amount to pan in x direction\r\n     * @param {Number} dy - amount to pan in y direction\r\n     * @return {undefined}\r\n     */\r\n    static panAtomDrag(stage, dx, dy) {\r\n        stage.trackballControls.panAtom(dx, dy);\r\n    }\r\n    /**\r\n     * Rotate picked component based on mouse coordinate changes\r\n     * @param {Stage} stage - the stage\r\n     * @param {Number} dx - amount to rotate in x direction\r\n     * @param {Number} dy - amount to rotate in y direction\r\n     * @return {undefined}\r\n     */\r\n    static rotateComponentDrag(stage, dx, dy) {\r\n        stage.trackballControls.rotateComponent(dx, dy);\r\n    }\r\n    /**\r\n     * Move picked element to the center of the screen\r\n     * @param {Stage} stage - the stage\r\n     * @param {PickingProxy} pickingProxy - the picking data object\r\n     * @return {undefined}\r\n     */\r\n    static movePick(stage, pickingProxy) {\r\n        if (pickingProxy) {\r\n            stage.animationControls.move(pickingProxy.position.clone());\r\n        }\r\n    }\r\n    /**\r\n     * Show tooltip with information of picked element\r\n     * @param {Stage} stage - the stage\r\n     * @param {PickingProxy} pickingProxy - the picking data object\r\n     * @return {undefined}\r\n     */\r\n    static tooltipPick(stage, pickingProxy) {\r\n        const tt = stage.tooltip;\r\n        const sp = stage.getParameters();\r\n        if (sp.tooltip && pickingProxy) {\r\n            const mp = pickingProxy.mouse.position;\r\n            tt.innerText = pickingProxy.getLabel();\r\n            tt.style.bottom = (window.innerHeight - mp.y + 3) + 'px';\r\n            tt.style.left = (mp.x + 3) + 'px';\r\n            tt.style.display = 'block';\r\n        }\r\n        else {\r\n            tt.style.display = 'none';\r\n        }\r\n    }\r\n    static measurePick(stage, pickingProxy) {\r\n        if (pickingProxy && (pickingProxy.atom || pickingProxy.bond)) {\r\n            const atom = pickingProxy.atom || pickingProxy.closestBondAtom;\r\n            const sc = pickingProxy.component;\r\n            sc.measurePick(atom);\r\n        }\r\n        else {\r\n            stage.measureClear();\r\n        }\r\n    }\r\n}\r\nexport const MouseActionPresets = {\r\n    default: [\r\n        ['scroll', MouseActions.zoomScroll],\r\n        ['scroll-shift', MouseActions.focusScroll],\r\n        ['scroll-ctrl', MouseActions.isolevelScroll],\r\n        ['scroll-shift-ctrl', MouseActions.zoomFocusScroll],\r\n        ['drag-left', MouseActions.rotateDrag],\r\n        ['drag-right', MouseActions.panDrag],\r\n        ['drag-ctrl-left', MouseActions.panDrag],\r\n        ['drag-ctrl-right', MouseActions.zRotateDrag],\r\n        ['drag-shift-left', MouseActions.zoomDrag],\r\n        ['drag-middle', MouseActions.zoomFocusDrag],\r\n        ['drag-ctrl-shift-right', MouseActions.panComponentDrag],\r\n        ['drag-ctrl-shift-left', MouseActions.rotateComponentDrag],\r\n        ['clickPick-right', MouseActions.measurePick],\r\n        ['clickPick-ctrl-left', MouseActions.measurePick],\r\n        ['clickPick-middle', MouseActions.movePick],\r\n        //[ 'clickPick-left', MouseActions.movePick ],\r\n        ['clickPick-left', testModification.clickPick_left],\r\n        ['hoverPick', MouseActions.tooltipPick],\r\n        ['hoverPick', testModification.hover]\r\n    ],\r\n    pymol: [\r\n        ['drag-left', MouseActions.rotateDrag],\r\n        ['drag-middle', MouseActions.panDrag],\r\n        ['drag-right', MouseActions.zoomDrag],\r\n        ['drag-shift-right', MouseActions.focusScroll],\r\n        ['clickPick-ctrl+shift-middle', MouseActions.movePick],\r\n        ['hoverPick', MouseActions.tooltipPick]\r\n    ],\r\n    coot: [\r\n        ['scroll', MouseActions.isolevelScroll],\r\n        ['drag-left', MouseActions.rotateDrag],\r\n        ['drag-middle', MouseActions.panDrag],\r\n        ['drag-ctrl-left', MouseActions.panDrag],\r\n        ['drag-right', MouseActions.zoomFocusDrag],\r\n        ['drag-ctrl-right', MouseActions.focusScroll],\r\n        ['clickPick-middle', MouseActions.movePick],\r\n        ['hoverPick', MouseActions.tooltipPick]\r\n    ],\r\n    astexviewer: [\r\n        ['drag-left', MouseActions.rotateDrag],\r\n        ['drag-ctrl-left', MouseActions.panDrag],\r\n        ['drag-shift-left', MouseActions.zoomDrag],\r\n        ['scroll', MouseActions.focusScroll],\r\n        ['clickPick-middle', MouseActions.movePick],\r\n        ['hoverPick', MouseActions.tooltipPick]\r\n    ]\r\n};\r\nexport default MouseActions;\r\n//# sourceMappingURL=mouse-actions.js.map","/**\r\n * @file Mouse Controls\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { MouseActionPresets } from './mouse-actions.js';\r\n/**\r\n * Strings to describe mouse events (including optional keyboard modifiers).\r\n * Must contain an event type: \"scroll\", \"drag\", \"click\", \"doubleClick\",\r\n * \"hover\", \"clickPick\" or \"hoverPick\". Optionally contain one or more\r\n * (seperated by plus signs) keyboard modifiers: \"alt\", \"ctrl\", \"meta\" or\r\n * \"shift\". Can contain the mouse button performing the event: \"left\",\r\n * \"middle\" or \"right\". The type, key and button parts must be seperated by\r\n * dashes.\r\n *\r\n * @example\r\n * // triggered on scroll event (no key or button)\r\n * \"scroll\"\r\n *\r\n * @example\r\n * // triggered on scroll event while shift key is pressed\r\n * \"scroll-shift\"\r\n *\r\n * @example\r\n * // triggered on drag event with left mouse button\r\n * \"drag-left\"\r\n *\r\n * @example\r\n * // triggered on drag event with right mouse button\r\n * // while ctrl and shift keys are pressed\r\n * \"drag-right-ctrl+shift\"\r\n *\r\n * @typedef {String} TriggerString\r\n */\r\n/**\r\n * Get event type, key and button\r\n * @param  {TriggerString} str - input trigger string\r\n * @return {Array} event type, key and button\r\n */\r\nfunction triggerFromString(str) {\r\n    const tokens = str.split(/[-+]/);\r\n    let type = '';\r\n    if (tokens.includes('scroll'))\r\n        type = 'scroll';\r\n    if (tokens.includes('drag'))\r\n        type = 'drag';\r\n    if (tokens.includes('click'))\r\n        type = 'click';\r\n    if (tokens.includes('doubleClick'))\r\n        type = 'doubleClick';\r\n    if (tokens.includes('hover'))\r\n        type = 'hover';\r\n    if (tokens.includes('clickPick'))\r\n        type = 'clickPick';\r\n    if (tokens.includes('hoverPick'))\r\n        type = 'hoverPick';\r\n    let key = 0;\r\n    if (tokens.includes('alt'))\r\n        key += 1;\r\n    if (tokens.includes('ctrl'))\r\n        key += 2;\r\n    if (tokens.includes('meta'))\r\n        key += 4;\r\n    if (tokens.includes('shift'))\r\n        key += 8;\r\n    let button = 0;\r\n    if (tokens.includes('left'))\r\n        button += 1;\r\n    if (tokens.includes('right'))\r\n        button += 2;\r\n    if (tokens.includes('middle'))\r\n        button += 4;\r\n    return [type, key, button];\r\n}\r\n/**\r\n * Mouse controls\r\n */\r\nclass MouseControls {\r\n    /**\r\n     * @param {Stage} stage - the stage object\r\n     * @param {Object} [params] - the parameters\r\n     * @param {String} params.preset - one of \"default\", \"pymol\", \"coot\"\r\n     * @param {String} params.disabled - flag to disable all actions\r\n     */\r\n    constructor(stage, params = {}) {\r\n        this.stage = stage;\r\n        this.actionList = [];\r\n        this.mouse = stage.mouseObserver;\r\n        this.disabled = params.disabled || false;\r\n        this.preset(params.preset || 'default');\r\n    }\r\n    run(type, ...args) {\r\n        if (this.disabled)\r\n            return;\r\n        const key = this.mouse.key || 0;\r\n        const button = this.mouse.buttons || 0;\r\n        this.actionList.forEach(a => {\r\n            if (a.type === type && a.key === key && a.button === button) {\r\n                a.callback(this.stage, ...args); // TODO\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Add a new mouse action triggered by an event, key and button combination.\r\n     * The {@link MouseActions} class provides a number of static methods for\r\n     * use as callback functions.\r\n     *\r\n     * @example\r\n     * // change ambient light intensity on mouse scroll\r\n     * // while the ctrl and shift keys are pressed\r\n     * stage.mouseControls.add( \"scroll-ctrl+shift\", function( stage, delta ){\r\n     *     var ai = stage.getParameters().ambientIntensity;\r\n     *     stage.setParameters( { ambientIntensity: Math.max( 0, ai + delta / 50 ) } );\r\n     * } );\r\n     *\r\n     * @example\r\n     * // Call the MouseActions.zoomDrag method on mouse drag events\r\n     * // with left and right mouse buttons simultaneous\r\n     * stage.mouseControls.add( \"drag-left+right\", MouseActions.zoomDrag );\r\n     *\r\n     * @param {TriggerString} triggerStr - the trigger for the action\r\n     * @param {function(stage: Stage, ...args: Any)} callback - the callback function for the action\r\n     * @return {undefined}\r\n     */\r\n    add(triggerStr, callback) {\r\n        const [type, key, button] = triggerFromString(triggerStr);\r\n        this.actionList.push({ type, key, button, callback });\r\n    }\r\n    /**\r\n     * Remove a mouse action. The trigger string can contain an asterix (*)\r\n     * as a wildcard for any key or mouse button. When the callback function\r\n     * is given, only actions that call that function are removed.\r\n     *\r\n     * @example\r\n     * // remove actions triggered solely by a scroll event\r\n     * stage.mouseControls.remove( \"scroll\" );\r\n     *\r\n     * @example\r\n     * // remove actions triggered by a scroll event, including\r\n     * // those requiring a key pressed or mouse button used\r\n     * stage.mouseControls.remove( \"scroll-*\" );\r\n     *\r\n     * @example\r\n     * // remove actions triggered by a scroll event\r\n     * // while the shift key is pressed\r\n     * stage.mouseControls.remove( \"scroll-shift\" );\r\n     *\r\n     * @param {TriggerString} triggerStr - the trigger for the action\r\n     * @param {Function} [callback] - the callback function for the action\r\n     * @return {undefined}\r\n     */\r\n    remove(triggerStr, callback) {\r\n        const wildcard = triggerStr.includes('*');\r\n        const [type, key, button] = triggerFromString(triggerStr);\r\n        const actionList = this.actionList.filter(function (a) {\r\n            return !((a.type === type || (wildcard && type === '')) &&\r\n                (a.key === key || (wildcard && key === 0)) &&\r\n                (a.button === button || (wildcard && button === 0)) &&\r\n                (a.callback === callback || callback === undefined));\r\n        });\r\n        this.actionList = actionList;\r\n    }\r\n    /**\r\n     * Set mouse action preset\r\n     * @param  {String} name - one of \"default\", \"pymol\", \"coot\"\r\n     * @return {undefined}\r\n     */\r\n    preset(name) {\r\n        this.clear();\r\n        const list = MouseActionPresets[name] || [];\r\n        list.forEach(action => this.add(action[0], action[1]));\r\n    }\r\n    /**\r\n     * Remove all mouse actions\r\n     * @return {undefined}\r\n     */\r\n    clear() {\r\n        this.actionList.length = 0;\r\n    }\r\n}\r\nexport default MouseControls;\r\n//# sourceMappingURL=mouse-controls.js.map","/**\r\n * @file Key Actions\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n/**\r\n * Key actions provided as static methods\r\n */\r\nclass KeyActions {\r\n    /**\r\n     * Stage auto view\r\n     */\r\n    static autoView(stage) {\r\n        stage.autoView(1000);\r\n    }\r\n    /**\r\n     * Toggle stage animations\r\n     */\r\n    static toggleAnimations(stage) {\r\n        stage.animationControls.toggle();\r\n    }\r\n    /**\r\n     * Toggle stage rocking\r\n     */\r\n    static toggleRock(stage) {\r\n        stage.toggleRock();\r\n    }\r\n    /**\r\n     * Toggle stage spinning\r\n     */\r\n    static toggleSpin(stage) {\r\n        stage.toggleSpin();\r\n    }\r\n    /**\r\n     * Toggle anti-aliasing\r\n     */\r\n    static toggleAntialiasing(stage) {\r\n        const p = stage.getParameters();\r\n        stage.setParameters({ sampleLevel: p.sampleLevel === -1 ? 0 : -1 });\r\n    }\r\n}\r\nexport const KeyActionPresets = {\r\n    default: [\r\n        ['i', KeyActions.toggleSpin],\r\n        ['k', KeyActions.toggleRock],\r\n        ['p', KeyActions.toggleAnimations],\r\n        ['a', KeyActions.toggleAntialiasing],\r\n        ['r', KeyActions.autoView]\r\n    ]\r\n};\r\nexport default KeyActions;\r\n//# sourceMappingURL=key-actions.js.map","/**\r\n * @file Key Controls\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { KeyActionPresets } from './key-actions';\r\n/**\r\n * Mouse controls\r\n */\r\nclass KeyControls {\r\n    /**\r\n     * @param {Stage} stage - the stage object\r\n     * @param {Object} [params] - the parameters\r\n     * @param {String} params.preset - one of \"default\"\r\n     * @param {String} params.disabled - flag to disable all actions\r\n     */\r\n    constructor(stage, params = {}) {\r\n        this.stage = stage;\r\n        this.actionList = [];\r\n        this.disabled = params.disabled || false;\r\n        this.preset(params.preset || 'default');\r\n    }\r\n    run(key) {\r\n        if (this.disabled)\r\n            return;\r\n        this.actionList.forEach(a => {\r\n            if (a.key === key) {\r\n                a.callback(this.stage);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Add a key action triggered by pressing the given character.\r\n     * The {@link KeyActions} class provides a number of static methods for\r\n     * use as callback functions.\r\n     *\r\n     * @example\r\n     * // call KeyActions.toggleRock when \"k\" is pressed\r\n     * stage.keyControls.remove( \"k\", KeyActions.toggleRock );\r\n     *\r\n     * @param {Char} char - the key/character\r\n     * @param {Function} callback - the callback function for the action\r\n     * @return {undefined}\r\n     */\r\n    add(char, callback) {\r\n        this.actionList.push({ key: char, callback });\r\n    }\r\n    /**\r\n     * Remove a key action. When the callback function\r\n     * is given, only actions that call that function are removed.\r\n     *\r\n     * @example\r\n     * // remove all actions triggered by pressing \"k\"\r\n     * stage.keyControls.remove( \"k\" );\r\n     *\r\n     * @example\r\n     * // remove action `toggleRock` triggered by pressing \"k\"\r\n     * stage.keyControls.remove( \"k\", toggleRock );\r\n     *\r\n     * @param {Char} char - the key/character\r\n     * @param {Function} [callback] - the callback function for the action\r\n     * @return {undefined}\r\n     */\r\n    remove(char, callback) {\r\n        const actionList = this.actionList.filter(function (a) {\r\n            return !((a.key === char) &&\r\n                (a.callback === callback || callback === undefined));\r\n        });\r\n        this.actionList = actionList;\r\n    }\r\n    /**\r\n     * Set key action preset\r\n     * @param  {String} name - one of \"default\"\r\n     * @return {undefined}\r\n     */\r\n    preset(name) {\r\n        this.clear();\r\n        const list = KeyActionPresets[name] || [];\r\n        list.forEach(action => this.add(action[0], action[1]));\r\n    }\r\n    /**\r\n     * Remove all key actions\r\n     * @return {undefined}\r\n     */\r\n    clear() {\r\n        this.actionList.length = 0;\r\n    }\r\n}\r\nexport default KeyControls;\r\n//# sourceMappingURL=key-controls.js.map","/**\r\n * @file Picking Behavior\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nclass PickingBehavior {\r\n    constructor(stage) {\r\n        this.stage = stage;\r\n        this.stage = stage;\r\n        this.mouse = stage.mouseObserver;\r\n        this.controls = stage.mouseControls;\r\n        this.mouse.signals.clicked.add(this._onClick, this);\r\n        this.mouse.signals.hovered.add(this._onHover, this);\r\n    }\r\n    _onClick(x, y) {\r\n        const pickingProxy = this.stage.pickingControls.pick(x, y);\r\n        this.stage.signals.clicked.dispatch(pickingProxy);\r\n        this.controls.run('clickPick', pickingProxy);\r\n    }\r\n    _onHover(x, y) {\r\n        const pickingProxy = this.stage.pickingControls.pick(x, y);\r\n        if (pickingProxy && this.mouse.down.equals(this.mouse.position)) {\r\n            this.stage.transformComponent = pickingProxy.component;\r\n            this.stage.transformAtom = pickingProxy.atom;\r\n        }\r\n        this.stage.signals.hovered.dispatch(pickingProxy);\r\n        this.controls.run('hoverPick', pickingProxy);\r\n    }\r\n    dispose() {\r\n        this.mouse.signals.clicked.remove(this._onClick, this);\r\n        this.mouse.signals.hovered.remove(this._onHover, this);\r\n    }\r\n}\r\nexport default PickingBehavior;\r\n//# sourceMappingURL=picking-behavior.js.map","/**\r\n * @file Mouse Behavior\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nclass MouseBehavior {\r\n    constructor(stage) {\r\n        this.stage = stage;\r\n        this.stage = stage;\r\n        this.mouse = stage.mouseObserver;\r\n        this.controls = stage.mouseControls;\r\n        this.mouse.signals.moved.add(this._onMove, this);\r\n        this.mouse.signals.scrolled.add(this._onScroll, this);\r\n        this.mouse.signals.dragged.add(this._onDrag, this);\r\n        this.mouse.signals.clicked.add(this._onClick, this);\r\n        this.mouse.signals.hovered.add(this._onHover, this);\r\n        this.mouse.signals.doubleClicked.add(this._onDblclick, this);\r\n    }\r\n    _onMove( /* x, y */) {\r\n        this.stage.tooltip.style.display = 'none';\r\n    }\r\n    _onScroll(delta) {\r\n        this.controls.run('scroll', delta);\r\n    }\r\n    _onDrag(dx, dy) {\r\n        this.controls.run('drag', dx, dy);\r\n    }\r\n    _onClick(x, y) {\r\n        this.controls.run('click', x, y);\r\n    }\r\n    _onDblclick(x, y) {\r\n        this.controls.run('doubleClick', x, y);\r\n    }\r\n    _onHover(x, y) {\r\n        this.controls.run('hover', x, y);\r\n    }\r\n    dispose() {\r\n        this.mouse.signals.moved.remove(this._onMove, this);\r\n        this.mouse.signals.scrolled.remove(this._onScroll, this);\r\n        this.mouse.signals.dragged.remove(this._onDrag, this);\r\n        this.mouse.signals.clicked.remove(this._onClick, this);\r\n        this.mouse.signals.hovered.remove(this._onHover, this);\r\n    }\r\n}\r\nexport default MouseBehavior;\r\n//# sourceMappingURL=mouse-behavior.js.map","/**\r\n * @file Animation Behavior\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nclass AnimationBehavior {\r\n    constructor(stage) {\r\n        this.stage = stage;\r\n        this.viewer = stage.viewer;\r\n        this.animationControls = stage.animationControls;\r\n        this.viewer.signals.ticked.add(this._onTick, this);\r\n    }\r\n    _onTick(stats) {\r\n        this.animationControls.run(stats);\r\n    }\r\n    dispose() {\r\n        this.viewer.signals.ticked.remove(this._onTick, this);\r\n    }\r\n}\r\nexport default AnimationBehavior;\r\n//# sourceMappingURL=animation-behavior.js.map","/**\r\n * @file Key Behavior\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { SupportsPassiveEventHandler } from '../globals';\r\nconst passive = SupportsPassiveEventHandler ? { passive: true } : false;\r\nclass KeyBehavior {\r\n    /**\r\n     * @param {Stage} stage - the stage object\r\n     */\r\n    constructor(stage) {\r\n        this.stage = stage;\r\n        this.stage = stage;\r\n        this.controls = stage.keyControls;\r\n        this.domElement = stage.viewer.renderer.domElement;\r\n        // ensure the domElement is focusable\r\n        this.domElement.setAttribute('tabIndex', '-1');\r\n        this.domElement.style.outline = 'none';\r\n        this._focusDomElement = this._focusDomElement.bind(this);\r\n        this._onKeydown = this._onKeydown.bind(this);\r\n        this._onKeyup = this._onKeyup.bind(this);\r\n        this._onKeypress = this._onKeypress.bind(this);\r\n        this.domElement.addEventListener('mousedown', this._focusDomElement);\r\n        this.domElement.addEventListener('touchstart', this._focusDomElement, passive); // TODO\r\n        this.domElement.addEventListener('keydown', this._onKeydown);\r\n        this.domElement.addEventListener('keyup', this._onKeyup);\r\n        this.domElement.addEventListener('keypress', this._onKeypress);\r\n    }\r\n    /**\r\n     * handle key down\r\n     * @param  {Event} event - key event\r\n     * @return {undefined}\r\n     */\r\n    _onKeydown( /* event */) {\r\n        // console.log( \"down\", event.keyCode, String.fromCharCode( event.keyCode ) );\r\n    }\r\n    /**\r\n     * handle key up\r\n     * @param  {Event} event - key event\r\n     * @return {undefined}\r\n     */\r\n    _onKeyup( /* event */) {\r\n        // console.log( \"up\", event.keyCode, String.fromCharCode( event.keyCode ) );\r\n    }\r\n    /**\r\n     * handle key press\r\n     * @param  {Event} event - key event\r\n     * @return {undefined}\r\n     */\r\n    _onKeypress(event) {\r\n        // console.log( \"press\", event.keyCode, String.fromCharCode( event.keyCode ) );\r\n        let pressedKey;\r\n        if (\"key\" in KeyboardEvent.prototype) {\r\n            pressedKey = event.key;\r\n            // some mobile browsers don't support this attribute\r\n        }\r\n        else {\r\n            pressedKey = String.fromCharCode(event.which || event.keyCode);\r\n        }\r\n        this.controls.run(pressedKey);\r\n    }\r\n    _focusDomElement() {\r\n        this.domElement.focus();\r\n    }\r\n    dispose() {\r\n        this.domElement.removeEventListener('mousedown', this._focusDomElement);\r\n        this.domElement.removeEventListener('touchstart', this._focusDomElement, passive); // TODO\r\n        this.domElement.removeEventListener('keydown', this._onKeypress);\r\n        this.domElement.removeEventListener('keyup', this._onKeypress);\r\n        this.domElement.removeEventListener('keypress', this._onKeypress);\r\n    }\r\n}\r\nexport default KeyBehavior;\r\n//# sourceMappingURL=key-behavior.js.map","/**\r\n * @file Surface Component\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ComponentRegistry } from '../globals';\r\nimport Component from './component';\r\n/**\r\n * Component wrapping a {@link Surface} object\r\n *\r\n * @example\r\n * // get a surface component by loading a surface file into the stage\r\n * stage.loadFile( \"url/for/surface\" ).then( function( surfaceComponent ){\r\n *     surfaceComponent.addRepresentation( \"surface\" );\r\n *     surfaceComponent.autoView();\r\n * } );\r\n */\r\nclass SurfaceComponent extends Component {\r\n    /**\r\n     * @param {Stage} stage - stage object the component belongs to\r\n     * @param {Surface} surface - surface object to wrap\r\n     * @param {ComponentParameters} params - component parameters\r\n     */\r\n    constructor(stage, surface, params = {}) {\r\n        super(stage, surface, Object.assign({ name: surface.name }, params));\r\n        this.surface = surface;\r\n    }\r\n    /**\r\n     * Component type\r\n     * @type {String}\r\n     */\r\n    get type() { return 'surface'; }\r\n    /**\r\n     * Add a new surface representation to the component\r\n     * @param {String} type - the name of the representation, one of:\r\n     *                        surface, dot.\r\n     * @param {SurfaceRepresentationParameters} params - representation parameters\r\n     * @return {RepresentationComponent} the created representation wrapped into\r\n     *                                   a representation component object\r\n     */\r\n    addRepresentation(type, params = {}) {\r\n        return this._addRepresentation(type, this.surface, params);\r\n    }\r\n    getBoxUntransformed() {\r\n        return this.surface.boundingBox;\r\n    }\r\n    getCenterUntransformed() {\r\n        return this.surface.center;\r\n    }\r\n    dispose() {\r\n        this.surface.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nComponentRegistry.add('surface', SurfaceComponent);\r\nexport default SurfaceComponent;\r\n//# sourceMappingURL=surface-component.js.map","/**\r\n * @file Volume Component\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ComponentRegistry } from '../globals';\r\nimport Component from './component';\r\n/**\r\n * Component wrapping a {@link Volume} object\r\n *\r\n * @example\r\n * // get a volume component by loading a volume file into the stage\r\n * stage.loadFile( \"url/for/volume\" ).then(function(volumeComponent){\r\n *   volumeComponent.addRepresentation('surface');\r\n *   volumeComponent.autoView();\r\n * });\r\n */\r\nclass VolumeComponent extends Component {\r\n    /**\r\n     * @param {Stage} stage - stage object the component belongs to\r\n     * @param {Volume} volume - volume object to wrap\r\n     * @param {ComponentParameters} params - component parameters\r\n     */\r\n    constructor(stage, volume, params = {}) {\r\n        super(stage, volume, Object.assign({ name: volume.name }, params));\r\n        this.volume = volume;\r\n    }\r\n    /**\r\n     * Component type\r\n     * @type {String}\r\n     */\r\n    get type() { return 'volume'; }\r\n    /**\r\n     * Add a new volume representation to the component\r\n     */\r\n    addRepresentation(type, params = {}) {\r\n        return this._addRepresentation(type, this.volume, params);\r\n    }\r\n    getBoxUntransformed() {\r\n        return this.volume.boundingBox;\r\n    }\r\n    getCenterUntransformed() {\r\n        return this.volume.center;\r\n    }\r\n    dispose() {\r\n        this.volume.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nComponentRegistry.add('volume', VolumeComponent);\r\nexport default VolumeComponent;\r\n//# sourceMappingURL=volume-component.js.map","/**\r\n * @file Component Collection\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Collection from './collection';\r\nclass ComponentCollection extends Collection {\r\n    addRepresentation(name, params) {\r\n        return this.forEach((comp) => comp.addRepresentation(name, params));\r\n    }\r\n    autoView(duration) {\r\n        return this.forEach((comp) => comp.autoView(duration));\r\n    }\r\n}\r\nexport default ComponentCollection;\r\n//# sourceMappingURL=component-collection.js.map","/**\r\n * @file Stage\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { Signal } from 'signals';\r\nimport { Debug, Log, Mobile, ComponentRegistry, ParserRegistry } from '../globals';\r\nimport { defaults, createParams, updateParams } from '../utils';\r\nimport { degToRad, clamp, pclamp } from '../math/math-utils';\r\nimport Counter from '../utils/counter';\r\nimport Viewer from '../viewer/viewer';\r\nimport MouseObserver from './mouse-observer';\r\nimport TrackballControls from '../controls/trackball-controls';\r\nimport PickingControls from '../controls/picking-controls';\r\nimport ViewerControls from '../controls/viewer-controls';\r\nimport AnimationControls from '../controls/animation-controls';\r\nimport MouseControls from '../controls/mouse-controls';\r\nimport KeyControls from '../controls/key-controls';\r\nimport PickingBehavior from './picking-behavior';\r\nimport MouseBehavior from './mouse-behavior';\r\nimport AnimationBehavior from './animation-behavior';\r\nimport KeyBehavior from './key-behavior';\r\nimport StructureComponent from '../component/structure-component';\r\nimport SurfaceComponent from '../component/surface-component';\r\nimport VolumeComponent from '../component/volume-component';\r\nimport ComponentCollection from '../component/component-collection';\r\nimport RepresentationCollection from '../component/representation-collection';\r\nimport { autoLoad, getFileInfo } from '../loader/loader-utils';\r\nimport Selection from '../selection/selection';\r\nfunction matchName(name, object) {\r\n    if (name instanceof RegExp) {\r\n        return object.name.match(name) !== null;\r\n    }\r\n    else {\r\n        return object.name === name;\r\n    }\r\n}\r\nconst tmpZoomVector = new Vector3();\r\nexport const StageDefaultParameters = {\r\n    impostor: true,\r\n    quality: 'medium',\r\n    workerDefault: true,\r\n    sampleLevel: 0,\r\n    backgroundColor: 'black',\r\n    rotateSpeed: 2.0,\r\n    zoomSpeed: 1.2,\r\n    panSpeed: 1.0,\r\n    clipNear: 0,\r\n    clipFar: 100,\r\n    clipDist: 10,\r\n    clipMode: 'scene',\r\n    clipScale: 'relative',\r\n    fogNear: 50,\r\n    fogFar: 100,\r\n    cameraFov: 40,\r\n    cameraEyeSep: 0.3,\r\n    cameraType: 'perspective',\r\n    lightColor: 0xdddddd,\r\n    lightIntensity: 1.0,\r\n    ambientColor: 0xdddddd,\r\n    ambientIntensity: 0.2,\r\n    hoverTimeout: 0,\r\n    tooltip: true,\r\n    mousePreset: 'default'\r\n};\r\n/**\r\n * Stage class, central for creating molecular scenes with NGL.\r\n *\r\n * @example\r\n * var stage = new Stage( \"elementId\", { backgroundColor: \"white\" } );\r\n */\r\nclass Stage {\r\n    constructor(idOrElement, params = {}) {\r\n        this.signals = {\r\n            parametersChanged: new Signal(),\r\n            fullscreenChanged: new Signal(),\r\n            componentAdded: new Signal(),\r\n            componentRemoved: new Signal(),\r\n            clicked: new Signal(),\r\n            hovered: new Signal()\r\n        };\r\n        /**\r\n         * Counter that keeps track of various potentially long-running tasks,\r\n         * including file loading and surface calculation.\r\n         */\r\n        this.tasks = new Counter();\r\n        this.compList = [];\r\n        this.defaultFileParams = {};\r\n        this.logList = [];\r\n        this.viewer = new Viewer(idOrElement);\r\n        if (!this.viewer.renderer)\r\n            return;\r\n        this.tooltip = document.createElement('div');\r\n        Object.assign(this.tooltip.style, {\r\n            display: 'none',\r\n            position: 'fixed',\r\n            zIndex: '1000000',\r\n            pointerEvents: 'none',\r\n            backgroundColor: 'rgba( 0, 0, 0, 0.6 )',\r\n            color: 'lightgrey',\r\n            padding: '8px',\r\n            fontFamily: 'sans-serif'\r\n        });\r\n        this.viewer.container.appendChild(this.tooltip);\r\n        this.mouseObserver = new MouseObserver(this.viewer.renderer.domElement, this);\r\n        this.viewerControls = new ViewerControls(this);\r\n        this.trackballControls = new TrackballControls(this);\r\n        this.pickingControls = new PickingControls(this);\r\n        this.animationControls = new AnimationControls(this);\r\n        this.mouseControls = new MouseControls(this);\r\n        this.keyControls = new KeyControls(this);\r\n        this.pickingBehavior = new PickingBehavior(this);\r\n        this.mouseBehavior = new MouseBehavior(this);\r\n        this.animationBehavior = new AnimationBehavior(this);\r\n        this.keyBehavior = new KeyBehavior(this);\r\n        this.spinAnimation = this.animationControls.spin([0, 1, 0], 0.005);\r\n        this.spinAnimation.pause(true);\r\n        this.rockAnimation = this.animationControls.rock([0, 1, 0], 0.005);\r\n        this.rockAnimation.pause(true);\r\n        // must come after the viewer has been instantiated\r\n        this.parameters = createParams(params, StageDefaultParameters);\r\n        this.setParameters(this.parameters);\r\n        this.viewer.animate();\r\n    }\r\n    /**\r\n     * Set stage parameters\r\n     */\r\n    setParameters(params = {}) {\r\n        updateParams(this.parameters, params);\r\n        const p = params;\r\n        const tp = this.parameters;\r\n        const viewer = this.viewer;\r\n        const controls = this.trackballControls;\r\n        // apply parameters\r\n        if (p.quality !== undefined)\r\n            this.setQuality(tp.quality);\r\n        if (p.impostor !== undefined)\r\n            this.setImpostor(tp.impostor);\r\n        if (p.rotateSpeed !== undefined)\r\n            controls.rotateSpeed = tp.rotateSpeed;\r\n        if (p.zoomSpeed !== undefined)\r\n            controls.zoomSpeed = tp.zoomSpeed;\r\n        if (p.panSpeed !== undefined)\r\n            controls.panSpeed = tp.panSpeed;\r\n        if (p.mousePreset !== undefined)\r\n            this.mouseControls.preset(tp.mousePreset);\r\n        this.mouseObserver.setParameters({ hoverTimeout: tp.hoverTimeout });\r\n        viewer.setClip(tp.clipNear, tp.clipFar, tp.clipDist, tp.clipMode, tp.clipScale);\r\n        viewer.setFog(undefined, tp.fogNear, tp.fogFar);\r\n        viewer.setCamera(tp.cameraType, tp.cameraFov, tp.cameraEyeSep);\r\n        viewer.setSampling(tp.sampleLevel);\r\n        viewer.setBackground(tp.backgroundColor);\r\n        viewer.setLight(tp.lightColor, tp.lightIntensity, tp.ambientColor, tp.ambientIntensity);\r\n        this.signals.parametersChanged.dispatch(this.getParameters());\r\n        return this;\r\n    }\r\n    log(msg) {\r\n        console.log('STAGE LOG', msg);\r\n        this.logList.push(msg);\r\n    }\r\n    /**\r\n     * Get stage parameters\r\n     */\r\n    getParameters() {\r\n        return Object.assign({}, this.parameters);\r\n    }\r\n    /**\r\n     * Create default representations for the given component\r\n     * @param  {StructureComponent|SurfaceComponent} object - component to create the representations for\r\n     * @return {undefined}\r\n     */\r\n    defaultFileRepresentation(component) {\r\n        if (component instanceof StructureComponent) {\r\n            component.setSelection('/0');\r\n            let atomCount, residueCount, instanceCount;\r\n            const structure = component.structure;\r\n            if (structure.biomolDict.BU1) {\r\n                const assembly = structure.biomolDict.BU1;\r\n                atomCount = assembly.getAtomCount(structure);\r\n                residueCount = assembly.getResidueCount(structure);\r\n                instanceCount = assembly.getInstanceCount();\r\n                component.setDefaultAssembly('BU1');\r\n            }\r\n            else {\r\n                atomCount = structure.getModelProxy(0).atomCount;\r\n                residueCount = structure.getModelProxy(0).residueCount;\r\n                instanceCount = 1;\r\n            }\r\n            let sizeScore = atomCount;\r\n            if (Mobile) {\r\n                sizeScore *= 4;\r\n            }\r\n            const backboneOnly = structure.atomStore.count / structure.residueStore.count < 2;\r\n            if (backboneOnly) {\r\n                sizeScore *= 10;\r\n            }\r\n            let colorScheme = 'chainname';\r\n            let colorScale = 'RdYlBu';\r\n            let colorReverse = false;\r\n            if (structure.getChainnameCount(new Selection('polymer and /0')) === 1) {\r\n                colorScheme = 'residueindex';\r\n                colorScale = 'spectral';\r\n                colorReverse = true;\r\n            }\r\n            if (Debug)\r\n                console.log(sizeScore, atomCount, instanceCount, backboneOnly);\r\n            if (residueCount / instanceCount < 4) {\r\n                component.addRepresentation('ball+stick', {\r\n                    colorScheme: 'element',\r\n                    radiusScale: 2.0,\r\n                    aspectRatio: 1.5,\r\n                    bondScale: 0.3,\r\n                    bondSpacing: 0.75,\r\n                    quality: 'auto'\r\n                });\r\n            }\r\n            else if ((instanceCount > 5 && sizeScore > 15000) || sizeScore > 700000) {\r\n                let scaleFactor = (Math.min(1.5, Math.max(0.1, 2000 / (sizeScore / instanceCount))));\r\n                if (backboneOnly)\r\n                    scaleFactor = Math.min(scaleFactor, 0.15);\r\n                component.addRepresentation('surface', {\r\n                    colorScheme, colorScale, colorReverse,\r\n                    sele: 'polymer',\r\n                    surfaceType: 'sas',\r\n                    probeRadius: 1.4,\r\n                    scaleFactor: scaleFactor,\r\n                    useWorker: false\r\n                });\r\n            }\r\n            else if (sizeScore > 250000) {\r\n                component.addRepresentation('backbone', {\r\n                    colorScheme, colorScale, colorReverse,\r\n                    lineOnly: true\r\n                });\r\n            }\r\n            else if (sizeScore > 100000) {\r\n                component.addRepresentation('backbone', {\r\n                    colorScheme, colorScale, colorReverse,\r\n                    quality: 'low',\r\n                    disableImpostor: true,\r\n                    radiusScale: 2.0\r\n                });\r\n            }\r\n            else if (sizeScore > 80000) {\r\n                component.addRepresentation('backbone', {\r\n                    colorScheme, colorScale, colorReverse,\r\n                    radiusScale: 2.0\r\n                });\r\n            }\r\n            else {\r\n                component.addRepresentation('cartoon', {\r\n                    colorScheme, colorScale, colorReverse,\r\n                    radiusScale: 0.7,\r\n                    aspectRatio: 5,\r\n                    quality: 'auto'\r\n                });\r\n                if (sizeScore < 50000) {\r\n                    component.addRepresentation('base', {\r\n                        colorScheme, colorScale, colorReverse,\r\n                        quality: 'auto'\r\n                    });\r\n                }\r\n                component.addRepresentation('ball+stick', {\r\n                    sele: 'ligand',\r\n                    colorScheme: 'element',\r\n                    radiusScale: 2.0,\r\n                    aspectRatio: 1.5,\r\n                    bondScale: 0.3,\r\n                    bondSpacing: 0.75,\r\n                    quality: 'auto'\r\n                });\r\n            }\r\n            // add frames as trajectory\r\n            if (component.structure.frames.length) {\r\n                component.addTrajectory();\r\n            }\r\n        }\r\n        else if (component instanceof SurfaceComponent) {\r\n            component.addRepresentation('surface');\r\n        }\r\n        else if (component instanceof VolumeComponent) {\r\n            component.addRepresentation('surface');\r\n        }\r\n        this.tasks.onZeroOnce(this.autoView, this);\r\n    }\r\n    /**\r\n     * Load a file onto the stage\r\n     *\r\n     * @example\r\n     * // load from URL\r\n     * stage.loadFile( \"http://files.rcsb.org/download/5IOS.cif\" );\r\n     *\r\n     * @example\r\n     * // load binary data in CCP4 format via a Blob\r\n     * var binaryBlob = new Blob( [ ccp4Data ], { type: 'application/octet-binary'} );\r\n     * stage.loadFile( binaryBlob, { ext: \"ccp4\" } );\r\n     *\r\n     * @example\r\n     * // load string data in PDB format via a Blob\r\n     * var stringBlob = new Blob( [ pdbData ], { type: 'text/plain'} );\r\n     * stage.loadFile( stringBlob, { ext: \"pdb\" } );\r\n     *\r\n     * @example\r\n     * // load a File object\r\n     * stage.loadFile( file );\r\n     *\r\n     * @example\r\n     * // load from URL and add a 'ball+stick' representation with double/triple bonds\r\n     * stage.loadFile( \"http://files.rcsb.org/download/1crn.cif\" ).then( function( comp ){\r\n     *     comp.addRepresentation( \"ball+stick\", { multipleBond: true } );\r\n     * } );\r\n     *\r\n     * @param  {String|File|Blob} path - either a URL or an object containing the file data\r\n     * @param  {LoaderParameters} params - loading parameters\r\n     * @param  {Boolean} params.asTrajectory - load multi-model structures as a trajectory\r\n     * @return {Promise} A Promise object that resolves to a {@link StructureComponent},\r\n     *                   a {@link SurfaceComponent} or a {@link ScriptComponent} object,\r\n     *                   depending on the type of the loaded file.\r\n     */\r\n    loadFile(path, params = {}) {\r\n        const p = Object.assign({}, this.defaultFileParams, params);\r\n        const name = getFileInfo(path).name;\r\n        this.tasks.increment();\r\n        this.log(`loading file '${name}'`);\r\n        const onLoadFn = (object) => {\r\n            this.log(`loaded '${name}'`);\r\n            const component = this.addComponentFromObject(object, p);\r\n            if (p.defaultRepresentation) {\r\n                this.defaultFileRepresentation(component);\r\n            }\r\n            this.tasks.decrement();\r\n            return component;\r\n        };\r\n        const onErrorFn = (e) => {\r\n            this.tasks.decrement();\r\n            const errorMsg = `error loading file: '${e}'`;\r\n            this.log(errorMsg);\r\n            throw errorMsg; // throw so it can be catched\r\n        };\r\n        const ext = defaults(p.ext, getFileInfo(path).ext);\r\n        let promise;\r\n        if (ParserRegistry.isTrajectory(ext)) {\r\n            promise = Promise.reject(new Error(`loadFile: ext '${ext}' is a trajectory and must be loaded into a structure component`));\r\n        }\r\n        else {\r\n            promise = autoLoad(path, p);\r\n        }\r\n        return promise.then(onLoadFn, onErrorFn);\r\n    }\r\n    loadScript(path) {\r\n        const name = getFileInfo(path).name;\r\n        this.log(`loading script '${name}'`);\r\n        return autoLoad(path).then((script) => {\r\n            this.tasks.increment();\r\n            this.log(`running script '${name}'`);\r\n            script.run(this).then(() => {\r\n                this.tasks.decrement();\r\n                this.log(`finished script '${name}'`);\r\n            });\r\n            this.log(`called script '${name}'`);\r\n        }, (error) => {\r\n            this.tasks.decrement();\r\n            const errorMsg = `errored script '${name}' \"${error}\"`;\r\n            this.log(errorMsg);\r\n            throw errorMsg; // throw so it can be catched\r\n        });\r\n    }\r\n    /**\r\n     * Add the given component to the stage\r\n     * @param {Component} component - the component to add\r\n     * @return {undefined}\r\n     */\r\n    addComponent(component) {\r\n        if (!component) {\r\n            Log.warn('Stage.addComponent: no component given');\r\n            return;\r\n        }\r\n        this.compList.push(component);\r\n        this.signals.componentAdded.dispatch(component);\r\n    }\r\n    /**\r\n     * Create a component from the given object and add to the stage\r\n     */\r\n    addComponentFromObject(object, params = {}) {\r\n        const CompClass = ComponentRegistry.get(object.type);\r\n        if (CompClass) {\r\n            const component = new CompClass(this, object, params);\r\n            this.addComponent(component);\r\n            return component;\r\n        }\r\n        Log.warn('no component for object type', object.type);\r\n    }\r\n    /**\r\n     * Remove the given component\r\n     * @param  {Component} component - the component to remove\r\n     * @return {undefined}\r\n     */\r\n    removeComponent(component) {\r\n        const idx = this.compList.indexOf(component);\r\n        if (idx !== -1) {\r\n            this.compList.splice(idx, 1);\r\n            component.dispose();\r\n            this.signals.componentRemoved.dispatch(component);\r\n        }\r\n    }\r\n    /**\r\n     * Remove all components from the stage\r\n     */\r\n    removeAllComponents() {\r\n        this.compList.slice().forEach(o => this.removeComponent(o));\r\n    }\r\n    /**\r\n     * Handle any size-changes of the container element\r\n     * @return {undefined}\r\n     */\r\n    handleResize() {\r\n        this.viewer.handleResize();\r\n    }\r\n    /**\r\n     * Set width and height\r\n     * @param {String} width - CSS width value\r\n     * @param {String} height - CSS height value\r\n     * @return {undefined}\r\n     */\r\n    setSize(width, height) {\r\n        const container = this.viewer.container;\r\n        if (container !== document.body) {\r\n            if (width !== undefined)\r\n                container.style.width = width;\r\n            if (height !== undefined)\r\n                container.style.height = height;\r\n            this.handleResize();\r\n        }\r\n    }\r\n    /**\r\n     * Toggle fullscreen\r\n     * @param  {Element} [element] - document element to put into fullscreen,\r\n     *                               defaults to the viewer container\r\n     * @return {undefined}\r\n     */\r\n    toggleFullscreen(element) {\r\n        if (!document.fullscreenEnabled && !document.mozFullScreenEnabled &&\r\n            !document.webkitFullscreenEnabled && !document.msFullscreenEnabled) {\r\n            Log.log('fullscreen mode (currently) not possible');\r\n            return;\r\n        }\r\n        const self = this;\r\n        element = element || this.viewer.container;\r\n        this.lastFullscreenElement = element;\r\n        //\r\n        function getFullscreenElement() {\r\n            return document.fullscreenElement || document.mozFullScreenElement ||\r\n                document.webkitFullscreenElement || document.msFullscreenElement;\r\n        }\r\n        function resizeElement() {\r\n            if (!getFullscreenElement() && self.lastFullscreenElement) {\r\n                const element = self.lastFullscreenElement;\r\n                element.style.width = element.dataset.normalWidth || '';\r\n                element.style.height = element.dataset.normalHeight || '';\r\n                document.removeEventListener('fullscreenchange', resizeElement);\r\n                document.removeEventListener('mozfullscreenchange', resizeElement);\r\n                document.removeEventListener('webkitfullscreenchange', resizeElement);\r\n                document.removeEventListener('MSFullscreenChange', resizeElement);\r\n                self.handleResize();\r\n                self.signals.fullscreenChanged.dispatch(false);\r\n            }\r\n        }\r\n        //\r\n        if (!getFullscreenElement()) {\r\n            element.dataset.normalWidth = element.style.width || '';\r\n            element.dataset.normalHeight = element.style.height || '';\r\n            element.style.width = window.screen.width + 'px';\r\n            element.style.height = window.screen.height + 'px';\r\n            if (element.requestFullscreen) {\r\n                element.requestFullscreen();\r\n            }\r\n            else if (element.msRequestFullscreen) {\r\n                element.msRequestFullscreen();\r\n            }\r\n            else if (element.mozRequestFullScreen) {\r\n                element.mozRequestFullScreen();\r\n            }\r\n            else if (element.webkitRequestFullscreen) {\r\n                element.webkitRequestFullscreen();\r\n            }\r\n            document.addEventListener('fullscreenchange', resizeElement);\r\n            document.addEventListener('mozfullscreenchange', resizeElement);\r\n            document.addEventListener('webkitfullscreenchange', resizeElement);\r\n            document.addEventListener('MSFullscreenChange', resizeElement);\r\n            this.handleResize();\r\n            this.signals.fullscreenChanged.dispatch(true);\r\n            // workaround for Safari\r\n            setTimeout(function () { self.handleResize(); }, 100);\r\n        }\r\n        else {\r\n            if (document.exitFullscreen) {\r\n                document.exitFullscreen();\r\n            }\r\n            else if (document.msExitFullscreen) {\r\n                document.msExitFullscreen();\r\n            }\r\n            else if (document.mozCancelFullScreen) {\r\n                document.mozCancelFullScreen();\r\n            }\r\n            else if (document.webkitExitFullscreen) {\r\n                document.webkitExitFullscreen();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Set spin\r\n     * @param {Boolean} flag - if true start rocking and stop spinning\r\n     * @return {undefined}\r\n     */\r\n    setSpin(flag) {\r\n        if (flag) {\r\n            this.spinAnimation.resume(true);\r\n            this.rockAnimation.pause(true);\r\n        }\r\n        else {\r\n            this.spinAnimation.pause(true);\r\n        }\r\n    }\r\n    /**\r\n     * Set rock\r\n     * @param {Boolean} flag - if true start rocking and stop spinning\r\n     * @return {undefined}\r\n     */\r\n    setRock(flag) {\r\n        if (flag) {\r\n            this.rockAnimation.resume(true);\r\n            this.spinAnimation.pause(true);\r\n        }\r\n        else {\r\n            this.rockAnimation.pause(true);\r\n        }\r\n    }\r\n    /**\r\n     * Toggle spin\r\n     * @return {undefined}\r\n     */\r\n    toggleSpin() {\r\n        this.setSpin(this.spinAnimation.paused);\r\n    }\r\n    /**\r\n     * Toggle rock\r\n     * @return {undefined}\r\n     */\r\n    toggleRock() {\r\n        this.setRock(this.rockAnimation.paused);\r\n    }\r\n    /**\r\n     * Get the current focus from the current clipNear value expressed\r\n     * as 0 (full view) to 100 (completely clipped)\r\n     * Negative values may be returned in some cases.\r\n     *\r\n     * In 'camera' clipMode focus isn't applicable, this method returns 0.0\r\n     *\r\n     * @return {number} focus\r\n     */\r\n    getFocus() {\r\n        const p = this.parameters;\r\n        if (p.clipMode !== 'scene')\r\n            return 0.0;\r\n        let clipNear = p.clipNear;\r\n        if (p.clipScale === 'absolute') {\r\n            clipNear = this.viewer.absoluteToRelative(clipNear);\r\n        }\r\n        return clipNear * 2;\r\n    }\r\n    /**\r\n     * Set the focus, a value of 0 sets clipping planes to show full scene,\r\n     * while a value of 100 will compltely clip the scene.\r\n     *\r\n     * @param {number} value focus\r\n     */\r\n    setFocus(value) {\r\n        if (this.parameters.clipMode !== 'scene')\r\n            return;\r\n        let clipNear;\r\n        let clipFar;\r\n        let fogNear;\r\n        let fogFar;\r\n        if (this.parameters.clipScale === 'relative') {\r\n            clipNear = clamp(value / 2.0, 0.0, 49.9);\r\n            clipFar = 100 - clipNear;\r\n            fogNear = 50;\r\n            fogFar = pclamp(2 * clipFar - 50);\r\n        }\r\n        else {\r\n            clipNear = this.viewer.relativeToAbsolute(value / 2.0);\r\n            clipFar = clipNear;\r\n            fogNear = 0;\r\n            fogFar = 2 * clipFar;\r\n        }\r\n        this.setParameters({ clipNear, clipFar, fogNear, fogFar });\r\n    }\r\n    getZoomForBox(boundingBox) {\r\n        const bbSize = boundingBox.getSize(tmpZoomVector);\r\n        const maxSize = Math.max(bbSize.x, bbSize.y, bbSize.z);\r\n        const minSize = Math.min(bbSize.x, bbSize.y, bbSize.z);\r\n        let distance = maxSize + Math.sqrt(minSize);\r\n        const fov = degToRad(this.viewer.perspectiveCamera.fov);\r\n        const width = this.viewer.width;\r\n        const height = this.viewer.height;\r\n        const aspect = width / height;\r\n        const aspectFactor = (height < width ? 1 : aspect);\r\n        distance = Math.abs(((distance * 0.5) / aspectFactor) / Math.sin(fov / 2));\r\n        distance += this.parameters.clipDist;\r\n        return -distance;\r\n    }\r\n    getBox() {\r\n        return this.viewer.boundingBox;\r\n    }\r\n    getZoom() {\r\n        return this.getZoomForBox(this.getBox());\r\n    }\r\n    getCenter(optionalTarget) {\r\n        return this.getBox().getCenter(optionalTarget || new Vector3());\r\n    }\r\n    /**\r\n     * Add a zoom and a move animation with automatic targets\r\n     * @param  {Integer} duration - animation time in milliseconds\r\n     * @return {undefined}\r\n     */\r\n    autoView(duration) {\r\n        this.animationControls.zoomMove(this.getCenter(), this.getZoom(), defaults(duration, 0));\r\n    }\r\n    /**\r\n     * Make image from what is shown in a viewer canvas\r\n     */\r\n    makeImage(params = {}) {\r\n        return new Promise((resolve, reject) => {\r\n            this.tasks.onZeroOnce(() => {\r\n                this.tasks.increment();\r\n                this.viewer.makeImage(params).then(blob => {\r\n                    this.tasks.decrement();\r\n                    resolve(blob);\r\n                }).catch(e => {\r\n                    this.tasks.decrement();\r\n                    reject(e);\r\n                });\r\n            });\r\n        });\r\n    }\r\n    setImpostor(value) {\r\n        this.parameters.impostor = value;\r\n        const types = [\r\n            'spacefill', 'ball+stick', 'licorice', 'hyperball',\r\n            'backbone', 'rocket', 'helixorient', 'contact', 'distance',\r\n            'dot'\r\n        ];\r\n        this.eachRepresentation(function (reprElem) {\r\n            if (!types.includes(reprElem.getType()))\r\n                return;\r\n            const p = reprElem.getParameters(); // TODO\r\n            p.disableImpostor = !value;\r\n            reprElem.build(p);\r\n        });\r\n    }\r\n    setQuality(value) {\r\n        this.parameters.quality = value;\r\n        const types = [\r\n            'tube', 'cartoon', 'ribbon', 'trace', 'rope'\r\n        ];\r\n        const impostorTypes = [\r\n            'spacefill', 'ball+stick', 'licorice', 'hyperball',\r\n            'backbone', 'rocket', 'helixorient', 'contact', 'distance',\r\n            'dot'\r\n        ];\r\n        this.eachRepresentation(function (repr) {\r\n            const p = repr.getParameters(); // TODO\r\n            if (!types.includes(repr.getType())) {\r\n                if (!impostorTypes.includes(repr.getType()))\r\n                    return;\r\n                if (!p.disableImpostor) {\r\n                    repr.repr.quality = value; // TODO\r\n                    return;\r\n                }\r\n            }\r\n            p.quality = value;\r\n            repr.build(p);\r\n        });\r\n    }\r\n    /**\r\n     * Iterator over each component and executing the callback\r\n     */\r\n    eachComponent(callback, type) {\r\n        this.compList.slice().forEach(comp => {\r\n            if (type === undefined || type === comp.type)\r\n                callback(comp);\r\n        });\r\n    }\r\n    /**\r\n     * Iterator over each representation and executing the callback\r\n     */\r\n    eachRepresentation(callback, type) {\r\n        this.eachComponent(comp => {\r\n            comp.reprList.slice().forEach(reprElem => {\r\n                if (type === undefined || type === reprElem.getType())\r\n                    callback(reprElem, comp);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Get collection of components by name\r\n     */\r\n    getComponentsByName(name) {\r\n        const compList = [];\r\n        this.eachComponent(comp => {\r\n            if (name === undefined || matchName(name, comp))\r\n                compList.push(comp);\r\n        });\r\n        return new ComponentCollection(compList);\r\n    }\r\n    /**\r\n     * Get collection of components by object\r\n     */\r\n    getComponentsByObject(object) {\r\n        const compList = [];\r\n        this.eachComponent(comp => {\r\n            if (comp.object === object)\r\n                compList.push(comp);\r\n        });\r\n        return new ComponentCollection(compList);\r\n    }\r\n    /**\r\n     * Get collection of representations by name\r\n     */\r\n    getRepresentationsByName(name) {\r\n        const reprList = [];\r\n        this.eachRepresentation((repr, comp) => {\r\n            if (name === undefined || matchName(name, repr))\r\n                reprList.push(repr);\r\n        });\r\n        return new RepresentationCollection(reprList);\r\n    }\r\n    measureClear() {\r\n        this.eachComponent((sc) => sc.measureClear(), 'structure');\r\n    }\r\n    measureUpdate() {\r\n        this.eachComponent((sc) => sc.measureUpdate(), 'structure');\r\n    }\r\n    /**\r\n     * Cleanup when disposing of a stage object\r\n     */\r\n    dispose() {\r\n        this.tasks.dispose();\r\n        this.viewer.dispose();\r\n    }\r\n}\r\nexport default Stage;\r\n//# sourceMappingURL=stage.js.map","/**\r\n * @file Shape Component\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ComponentRegistry } from '../globals';\r\nimport Component from './component';\r\n/**\r\n * Component wrapping a {@link Shape} object\r\n *\r\n * @example\r\n * // get a shape component by adding a shape object to the stage\r\n * var shape = new NGL.Shape( \"shape\" );\r\n * shape.addSphere( [ 0, 0, 0 ], [ 1, 0, 0 ], 1.5 );\r\n * var shapeComponent = stage.addComponentFromObject( shape );\r\n * shapeComponent.addRepresentation( \"buffer\" );\r\n */\r\nclass ShapeComponent extends Component {\r\n    constructor(stage, shape, params = {}) {\r\n        super(stage, shape, Object.assign({ name: shape.name }, params));\r\n        this.shape = shape;\r\n    }\r\n    /**\r\n     * Component type\r\n     * @type {String}\r\n     */\r\n    get type() { return 'shape'; }\r\n    /**\r\n     * Add a new shape representation to the component\r\n     * @param {String} type - the name of the representation, one of:\r\n     *                        buffer.\r\n     * @param {BufferRepresentationParameters} params - representation parameters\r\n     * @return {RepresentationComponent} the created representation wrapped into\r\n     *                                   a representation component object\r\n     */\r\n    addRepresentation(type, params = {}) {\r\n        return this._addRepresentation(type, this.shape, params);\r\n    }\r\n    getBoxUntransformed() {\r\n        return this.shape.boundingBox;\r\n    }\r\n    getCenterUntransformed() {\r\n        return this.shape.center;\r\n    }\r\n    dispose() {\r\n        this.shape.dispose();\r\n        super.dispose();\r\n    }\r\n}\r\nComponentRegistry.add('shape', ShapeComponent);\r\nexport default ShapeComponent;\r\n//# sourceMappingURL=shape-component.js.map","/**\r\n * @file Atomindex Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by atom index. The {@link AtomProxy.index} property is used for coloring.\r\n * Each {@link ModelProxy} of a {@link Structure} is colored seperately. The\r\n * `params.domain` parameter is ignored.\r\n *\r\n * __Name:__ _atomindex_\r\n *\r\n * @example\r\n * stage.loadFile( \"rcsb://1crn\" ).then( function( o ){\r\n *     o.addRepresentation( \"ball+stick\", { colorScheme: \"atomindex\" } );\r\n *     o.autoView();\r\n * } );\r\n */\r\nclass AtomindexColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'rainbow';\r\n            this.parameters.reverse = defaults(params.reverse, true);\r\n        }\r\n        this.scalePerModel = {};\r\n        params.structure.eachModel((mp) => {\r\n            this.parameters.domain = [mp.atomOffset, mp.atomEnd];\r\n            this.scalePerModel[mp.index] = this.getScale(); // TODO\r\n        });\r\n    }\r\n    /**\r\n     * get color for an atom\r\n     * @param  {AtomProxy} atom - atom to get color for\r\n     * @return {Integer} hex atom color\r\n     */\r\n    atomColor(atom) {\r\n        return this.scalePerModel[atom.modelIndex](atom.index);\r\n    }\r\n}\r\nColormakerRegistry.add('atomindex', AtomindexColormaker); // TODO\r\nexport default AtomindexColormaker;\r\n//# sourceMappingURL=atomindex-colormaker.js.map","/**\r\n * @file Bfactor Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\nimport Selection from '../selection/selection';\r\n/**\r\n * Color by b-factor. The {@link AtomProxy.bfactor} property is used for coloring.\r\n * By default the min and max b-factor values are used for the scale`s domain.\r\n *\r\n * __Name:__ _bfactor_\r\n *\r\n * @example\r\n * stage.loadFile( \"rcsb://1crn\" ).then( function( o ){\r\n *     o.addRepresentation( \"ball+stick\", { colorScheme: \"bfactor\" } );\r\n *     o.autoView();\r\n * } );\r\n */\r\nclass BfactorColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'OrRd';\r\n        }\r\n        if (!params.domain) {\r\n            let selection;\r\n            let min = Infinity;\r\n            let max = -Infinity;\r\n            if (params.sele) {\r\n                selection = new Selection(params.sele);\r\n            }\r\n            params.structure.eachAtom(function (a) {\r\n                const bfactor = a.bfactor;\r\n                min = Math.min(min, bfactor);\r\n                max = Math.max(max, bfactor);\r\n            }, selection);\r\n            this.parameters.domain = [min, max];\r\n        }\r\n        this.bfactorScale = this.getScale();\r\n    }\r\n    atomColor(a) {\r\n        return this.bfactorScale(a.bfactor);\r\n    }\r\n}\r\nColormakerRegistry.add('bfactor', BfactorColormaker);\r\nexport default BfactorColormaker;\r\n//# sourceMappingURL=bfactor-colormaker.js.map","/**\r\n * @file Chainid Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by chain id\r\n */\r\nclass ChainidColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.chainidDictPerModel = {};\r\n        this.scalePerModel = {};\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'Spectral';\r\n        }\r\n        params.structure.eachModel((mp) => {\r\n            let i = 0;\r\n            const chainidDict = {};\r\n            mp.eachChain(function (cp) {\r\n                if (chainidDict[cp.chainid] === undefined) {\r\n                    chainidDict[cp.chainid] = i;\r\n                    i += 1;\r\n                }\r\n            });\r\n            this.parameters.domain = [0, i - 1];\r\n            this.chainidDictPerModel[mp.index] = chainidDict;\r\n            this.scalePerModel[mp.index] = this.getScale();\r\n        });\r\n    }\r\n    atomColor(a) {\r\n        const chainidDict = this.chainidDictPerModel[a.modelIndex];\r\n        return this.scalePerModel[a.modelIndex](chainidDict[a.chainid]);\r\n    }\r\n}\r\nColormakerRegistry.add('chainid', ChainidColormaker);\r\nexport default ChainidColormaker;\r\n//# sourceMappingURL=chainid-colormaker.js.map","/**\r\n * @file Chainindex Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by chain index\r\n */\r\nclass ChainindexColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.scalePerModel = {};\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'Spectral';\r\n        }\r\n        params.structure.eachModel((mp) => {\r\n            this.parameters.domain = [mp.chainOffset, mp.chainEnd];\r\n            this.scalePerModel[mp.index] = this.getScale();\r\n        });\r\n    }\r\n    atomColor(a) {\r\n        return this.scalePerModel[a.modelIndex](a.chainIndex);\r\n    }\r\n}\r\nColormakerRegistry.add('chainindex', ChainindexColormaker);\r\nexport default ChainindexColormaker;\r\n//# sourceMappingURL=chainindex-colormaker.js.map","/**\r\n * @file Chainname Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by chain name\r\n */\r\nclass ChainnameColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.chainnameDictPerModel = {};\r\n        this.scalePerModel = {};\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'Spectral';\r\n        }\r\n        params.structure.eachModel((mp) => {\r\n            let i = 0;\r\n            const chainnameDict = {};\r\n            mp.eachChain(function (cp) {\r\n                if (chainnameDict[cp.chainname] === undefined) {\r\n                    chainnameDict[cp.chainname] = i;\r\n                    i += 1;\r\n                }\r\n            });\r\n            this.parameters.domain = [0, i - 1];\r\n            this.chainnameDictPerModel[mp.index] = chainnameDict;\r\n            this.scalePerModel[mp.index] = this.getScale();\r\n        });\r\n    }\r\n    atomColor(a) {\r\n        const chainnameDict = this.chainnameDictPerModel[a.modelIndex];\r\n        return this.scalePerModel[a.modelIndex](chainnameDict[a.chainname]);\r\n    }\r\n}\r\nColormakerRegistry.add('chainname', ChainnameColormaker);\r\nexport default ChainnameColormaker;\r\n//# sourceMappingURL=chainname-colormaker.js.map","/**\r\n * @file Densityfit Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by validation density fit\r\n */\r\nclass DensityfitColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.rsrzDict = {};\r\n        this.rsccDict = {};\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'RdYlBu';\r\n        }\r\n        this.rsrzScale = this.getScale({ domain: [2, 0] });\r\n        this.rsccScale = this.getScale({ domain: [0.678, 1.0] });\r\n        const val = params.structure.validation;\r\n        if (val) {\r\n            this.rsrzDict = val.rsrzDict;\r\n            this.rsccDict = val.rsccDict;\r\n        }\r\n    }\r\n    atomColor(atom) {\r\n        let sele = atom.resno + '';\r\n        if (atom.inscode)\r\n            sele += '^' + atom.inscode;\r\n        if (atom.chainname)\r\n            sele += ':' + atom.chainname;\r\n        sele += '/' + atom.modelIndex;\r\n        const rsrz = this.rsrzDict[sele];\r\n        if (rsrz !== undefined) {\r\n            return this.rsrzScale(rsrz);\r\n        }\r\n        const rscc = this.rsccDict[sele];\r\n        if (rscc !== undefined) {\r\n            return this.rsccScale(rscc);\r\n        }\r\n        return 0x909090;\r\n    }\r\n}\r\nColormakerRegistry.add('densityfit', DensityfitColormaker);\r\nexport default DensityfitColormaker;\r\n//# sourceMappingURL=densityfit-colormaker.js.map","/**\r\n * @file Atomindex Colormaker\r\n * @author Fred Ludlow <Fred.Ludlow@astx.com>\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\nimport SpatialHash from '../geometry/spatial-hash';\r\n// from CHARMM\r\nconst partialCharges = {\r\n    'ARG': {\r\n        'CD': 0.1,\r\n        'CZ': 0.5,\r\n        'NE': -0.1\r\n    },\r\n    'ASN': {\r\n        'CG': 0.55,\r\n        'OD1': -0.55\r\n    },\r\n    'ASP': {\r\n        'CB': -0.16,\r\n        'CG': 0.36,\r\n        'OD1': -0.6,\r\n        'OD2': -0.6\r\n    },\r\n    'CYS': {\r\n        'CB': 0.19,\r\n        'SG': -0.19\r\n    },\r\n    'GLN': {\r\n        'CD': 0.55,\r\n        'OE1': -0.55\r\n    },\r\n    'GLU': {\r\n        'CD': 0.36,\r\n        'CG': -0.16,\r\n        'OE1': -0.6,\r\n        'OE2': -0.6\r\n    },\r\n    'HIS': {\r\n        'CB': 0.1,\r\n        'CD2': 0.2,\r\n        'CE1': 0.45,\r\n        'CG': 0.15,\r\n        'ND1': 0.05,\r\n        'NE2': 0.05\r\n    },\r\n    'LYS': {\r\n        'CE': 0.25,\r\n        'NZ': 0.75\r\n    },\r\n    'MET': {\r\n        'CE': 0.06,\r\n        'CG': 0.06,\r\n        'SD': -0.12\r\n    },\r\n    'PTR': {\r\n        'C': 0.55,\r\n        'CA': 0.1,\r\n        'CZ': 0.25,\r\n        'N': -0.35,\r\n        'O': -0.55,\r\n        'O1P': -0.85,\r\n        'O2P': -0.85,\r\n        'O3P': -0.85,\r\n        'OG1': -1.1,\r\n        'P': 1.4\r\n    },\r\n    'SEP': {\r\n        'C': 0.55,\r\n        'CA': 0.1,\r\n        'CB': 0.25,\r\n        'N': -0.35,\r\n        'O': -0.55,\r\n        'O1P': -0.85,\r\n        'O2P': -0.85,\r\n        'O3P': -0.85,\r\n        'OG1': -1.1,\r\n        'P': 1.4\r\n    },\r\n    'SER': {\r\n        'CB': 0.25,\r\n        'OG': -0.25\r\n    },\r\n    'THR': {\r\n        'CB': 0.25,\r\n        'OG1': -0.25\r\n    },\r\n    'TPO': {\r\n        'C': 0.55,\r\n        'CA': 0.1,\r\n        'CB': 0.25,\r\n        'N': -0.35,\r\n        'O': -0.55,\r\n        'OG1': -1.1,\r\n        'O1P': -0.85,\r\n        'O2P': -0.85,\r\n        'O3P': -0.85,\r\n        'P': 1.4\r\n    },\r\n    'TRP': {\r\n        'CD1': 0.06,\r\n        'CD2': 0.1,\r\n        'CE2': -0.04,\r\n        'CE3': -0.03,\r\n        'CG': -0.03,\r\n        'NE1': -0.06\r\n    },\r\n    'TYR': {\r\n        'CZ': 0.25,\r\n        'OH': -0.25\r\n    },\r\n    'backbone': {\r\n        'C': 0.55,\r\n        'O': -0.55,\r\n        'N': -0.35,\r\n        'CA': 0.1\r\n    }\r\n};\r\nconst maxRadius = 12.0;\r\nconst nHBondDistance = 1.04;\r\nconst nHCharge = 0.25;\r\n/**\r\n * Populates position vector with location of implicit or explicit H\r\n * Returns position or undefined if not able to locate H\r\n *\r\n * @param {AtomProxy} ap - the nitrogen atom\r\n * @param {Vector3} [position] - optional target\r\n * @return {Vectors|undefined} the hydrogen atom position\r\n */\r\nfunction backboneNHPosition(ap, position = new Vector3()) {\r\n    let h = false;\r\n    let ca = false;\r\n    let c = false;\r\n    position.set(2 * ap.x, 2 * ap.y, 2 * ap.z);\r\n    ap.eachBondedAtom(function (a2) {\r\n        // Any time we detect H, reset position and skip\r\n        // future tests\r\n        if (h)\r\n            return;\r\n        if (a2.atomname === 'H') {\r\n            position.set(a2.x, a2.y, a2.z);\r\n            h = true;\r\n            return;\r\n        }\r\n        if (!ca && a2.atomname === 'CA') {\r\n            position.sub(a2); // TODO\r\n            ca = true;\r\n        }\r\n        else if (!c && a2.atomname === 'C') {\r\n            c = true;\r\n            position.sub(a2); // TODO\r\n        }\r\n    });\r\n    if (h) {\r\n        return position;\r\n    }\r\n    if (ca && c) {\r\n        position.normalize();\r\n        position.multiplyScalar(nHBondDistance);\r\n        position.add(ap);\r\n        return position;\r\n    }\r\n}\r\n/**\r\n * Takes an array of Vector3 objects and\r\n * converts to an object that looks like an AtomStore\r\n *\r\n * @param {Vector3[]} positions - array of positions\r\n * @return {Object} AtomStore-like object\r\n */\r\nfunction buildStoreLike(positions) {\r\n    const n = positions.length;\r\n    const x = new Float32Array(n);\r\n    const y = new Float32Array(n);\r\n    const z = new Float32Array(n);\r\n    for (let i = 0; i < positions.length; i++) {\r\n        const v = positions[i];\r\n        x[i] = v.x;\r\n        y[i] = v.y;\r\n        z[i] = v.z;\r\n    }\r\n    return { x: x, y: y, z: z, count: n };\r\n}\r\nfunction chargeForAtom(a) {\r\n    if (a.partialCharge !== null)\r\n        return a.partialCharge;\r\n    if (!a.isProtein()) {\r\n        return 0.0;\r\n    }\r\n    return ((partialCharges[a.resname] &&\r\n        partialCharges[a.resname][a.atomname]) ||\r\n        partialCharges['backbone'][a.atomname] || 0.0);\r\n}\r\n/**\r\n * Color a surface by electrostatic charge. This is a highly approximate\r\n * calculation! The partial charges are CHARMM with hydrogens added to heavy\r\n * atoms and hydrogen positions generated for amides.\r\n *\r\n * __Name:__ _electrostatic_\r\n *\r\n * @example\r\n * stage.loadFile( \"rcsb://3dqb\" ).then( function( o ){\r\n *     o.addRepresentation( \"surface\", { colorScheme: \"electrostatic\" } );\r\n *     o.autoView();\r\n * } );\r\n */\r\nclass ElectrostaticColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.delta = new Vector3();\r\n        this.hCharges = [];\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'rwb';\r\n        }\r\n        if (!params.domain) {\r\n            this.parameters.domain = [-50, 50];\r\n        }\r\n        this.scale = this.getScale();\r\n        this.charges = new Float32Array(params.structure.atomCount);\r\n        const hPositions = [];\r\n        params.structure.eachAtom((ap) => {\r\n            this.charges[ap.index] = chargeForAtom(ap) * ap.occupancy;\r\n            if (ap.atomname === 'N') {\r\n                // In the specific case where N forms two bonds to\r\n                // CA and C, try and place a dummy hydrogen\r\n                if (ap.bondCount >= 3)\r\n                    return; // Skip if 3 bonds already (e.g. PRO)\r\n                if (ap.bondToElementCount(1))\r\n                    return; // Skip if any H specificed\r\n                const hPos = backboneNHPosition(ap);\r\n                if (hPos !== undefined) {\r\n                    hPositions.push(hPos);\r\n                    this.hCharges.push(nHCharge * ap.occupancy);\r\n                }\r\n            }\r\n        });\r\n        const bbox = params.structure.getBoundingBox();\r\n        bbox.expandByScalar(nHBondDistance); // Worst case\r\n        // SpatialHash requires x,y,z and count\r\n        this.hStore = buildStoreLike(hPositions);\r\n        this.hHash = new SpatialHash(this.hStore, bbox); // TODO\r\n        this.hash = new SpatialHash(params.structure.atomStore, bbox);\r\n    }\r\n    positionColor(v) {\r\n        const charges = this.charges;\r\n        const hCharges = this.hCharges;\r\n        let p = 0.0;\r\n        this.hash.eachWithin(v.x, v.y, v.z, maxRadius, (atomIndex, dSq) => {\r\n            const charge = charges[atomIndex];\r\n            if (charge === 0.0)\r\n                return;\r\n            p += charge / dSq;\r\n        });\r\n        this.hHash.eachWithin(v.x, v.y, v.z, maxRadius, (atomIndex, dSq) => {\r\n            const charge = hCharges[atomIndex];\r\n            if (charge === 0.0)\r\n                return;\r\n            p += charge / dSq;\r\n        });\r\n        return this.scale(p * 332); // 332 to convert to kcal/mol\r\n    }\r\n}\r\nColormakerRegistry.add('electrostatic', ElectrostaticColormaker);\r\nexport default ElectrostaticColormaker;\r\n//# sourceMappingURL=electrostatic-colormaker.js.map","/**\r\n * @file Element Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Colormaker from './colormaker';\r\n// from Jmol http://jmol.sourceforge.net/jscolors/ (or 0xFFFFFF)\r\nconst ElementColors = {\r\n    'H': 0xFFFFFF,\r\n    'HE': 0xD9FFFF,\r\n    'LI': 0xCC80FF,\r\n    'BE': 0xC2FF00,\r\n    'B': 0xFFB5B5,\r\n    'C': 0x909090,\r\n    'N': 0x3050F8,\r\n    'O': 0xFF0D0D,\r\n    'F': 0x90E050,\r\n    'NE': 0xB3E3F5,\r\n    'NA': 0xAB5CF2,\r\n    'MG': 0x8AFF00,\r\n    'AL': 0xBFA6A6,\r\n    'SI': 0xF0C8A0,\r\n    'P': 0xFF8000,\r\n    'S': 0xFFFF30,\r\n    'CL': 0x1FF01F,\r\n    'AR': 0x80D1E3,\r\n    'K': 0x8F40D4,\r\n    'CA': 0x3DFF00,\r\n    'SC': 0xE6E6E6,\r\n    'TI': 0xBFC2C7,\r\n    'V': 0xA6A6AB,\r\n    'CR': 0x8A99C7,\r\n    'MN': 0x9C7AC7,\r\n    'FE': 0xE06633,\r\n    'CO': 0xF090A0,\r\n    'NI': 0x50D050,\r\n    'CU': 0xC88033,\r\n    'ZN': 0x7D80B0,\r\n    'GA': 0xC28F8F,\r\n    'GE': 0x668F8F,\r\n    'AS': 0xBD80E3,\r\n    'SE': 0xFFA100,\r\n    'BR': 0xA62929,\r\n    'KR': 0x5CB8D1,\r\n    'RB': 0x702EB0,\r\n    'SR': 0x00FF00,\r\n    'Y': 0x94FFFF,\r\n    'ZR': 0x94E0E0,\r\n    'NB': 0x73C2C9,\r\n    'MO': 0x54B5B5,\r\n    'TC': 0x3B9E9E,\r\n    'RU': 0x248F8F,\r\n    'RH': 0x0A7D8C,\r\n    'PD': 0x006985,\r\n    'AG': 0xC0C0C0,\r\n    'CD': 0xFFD98F,\r\n    'IN': 0xA67573,\r\n    'SN': 0x668080,\r\n    'SB': 0x9E63B5,\r\n    'TE': 0xD47A00,\r\n    'I': 0x940094,\r\n    'XE': 0x940094,\r\n    'CS': 0x57178F,\r\n    'BA': 0x00C900,\r\n    'LA': 0x70D4FF,\r\n    'CE': 0xFFFFC7,\r\n    'PR': 0xD9FFC7,\r\n    'ND': 0xC7FFC7,\r\n    'PM': 0xA3FFC7,\r\n    'SM': 0x8FFFC7,\r\n    'EU': 0x61FFC7,\r\n    'GD': 0x45FFC7,\r\n    'TB': 0x30FFC7,\r\n    'DY': 0x1FFFC7,\r\n    'HO': 0x00FF9C,\r\n    'ER': 0x00E675,\r\n    'TM': 0x00D452,\r\n    'YB': 0x00BF38,\r\n    'LU': 0x00AB24,\r\n    'HF': 0x4DC2FF,\r\n    'TA': 0x4DA6FF,\r\n    'W': 0x2194D6,\r\n    'RE': 0x267DAB,\r\n    'OS': 0x266696,\r\n    'IR': 0x175487,\r\n    'PT': 0xD0D0E0,\r\n    'AU': 0xFFD123,\r\n    'HG': 0xB8B8D0,\r\n    'TL': 0xA6544D,\r\n    'PB': 0x575961,\r\n    'BI': 0x9E4FB5,\r\n    'PO': 0xAB5C00,\r\n    'AT': 0x754F45,\r\n    'RN': 0x428296,\r\n    'FR': 0x420066,\r\n    'RA': 0x007D00,\r\n    'AC': 0x70ABFA,\r\n    'TH': 0x00BAFF,\r\n    'PA': 0x00A1FF,\r\n    'U': 0x008FFF,\r\n    'NP': 0x0080FF,\r\n    'PU': 0x006BFF,\r\n    'AM': 0x545CF2,\r\n    'CM': 0x785CE3,\r\n    'BK': 0x8A4FE3,\r\n    'CF': 0xA136D4,\r\n    'ES': 0xB31FD4,\r\n    'FM': 0xB31FBA,\r\n    'MD': 0xB30DA6,\r\n    'NO': 0xBD0D87,\r\n    'LR': 0xC70066,\r\n    'RF': 0xCC0059,\r\n    'DB': 0xD1004F,\r\n    'SG': 0xD90045,\r\n    'BH': 0xE00038,\r\n    'HS': 0xE6002E,\r\n    'MT': 0xEB0026,\r\n    'DS': 0xFFFFFF,\r\n    'RG': 0xFFFFFF,\r\n    'CN': 0xFFFFFF,\r\n    'UUT': 0xFFFFFF,\r\n    'FL': 0xFFFFFF,\r\n    'UUP': 0xFFFFFF,\r\n    'LV': 0xFFFFFF,\r\n    'UUH': 0xFFFFFF,\r\n    'D': 0xFFFFC0,\r\n    'T': 0xFFFFA0\r\n};\r\nconst DefaultElementColor = 0xFFFFFF;\r\n/**\r\n * Color by element\r\n */\r\nclass ElementColormaker extends Colormaker {\r\n    constructor(params) {\r\n        params.value = defaults(params.value, ElementColors.C);\r\n        super(params);\r\n    }\r\n    atomColor(a) {\r\n        const element = a.element;\r\n        if (element === 'C') {\r\n            return this.parameters.value;\r\n        }\r\n        else {\r\n            return ElementColors[element] || DefaultElementColor;\r\n        }\r\n    }\r\n}\r\nColormakerRegistry.add('element', ElementColormaker);\r\nexport default ElementColormaker;\r\n//# sourceMappingURL=element-colormaker.js.map","/**\r\n * @file Entityindex Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by entity index\r\n */\r\nclass EntityindexColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'Spectral';\r\n        }\r\n        if (!params.domain) {\r\n            this.parameters.domain = [0, params.structure.entityList.length - 1];\r\n        }\r\n        this.entityindexScale = this.getScale();\r\n    }\r\n    atomColor(a) {\r\n        return this.entityindexScale(a.entityIndex);\r\n    }\r\n}\r\nColormakerRegistry.add('entityindex', EntityindexColormaker);\r\nexport default EntityindexColormaker;\r\n//# sourceMappingURL=entityindex-colormaker.js.map","/**\r\n * @file Entitytype Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\nimport { PolymerEntity, NonPolymerEntity, MacrolideEntity, WaterEntity } from '../structure/structure-constants';\r\n/**\r\n * Color by entity type\r\n */\r\nclass EntitytypeColormaker extends Colormaker {\r\n    atomColor(a) {\r\n        const e = a.entity;\r\n        const et = e ? e.entityType : undefined;\r\n        switch (et) {\r\n            case PolymerEntity:\r\n                return 0x7fc97f;\r\n            case NonPolymerEntity:\r\n                return 0xfdc086;\r\n            case MacrolideEntity:\r\n                return 0xbeaed4;\r\n            case WaterEntity:\r\n                return 0x386cb0;\r\n            default:\r\n                return 0xffff99;\r\n        }\r\n    }\r\n}\r\nColormakerRegistry.add('entitytype', EntitytypeColormaker);\r\nexport default EntitytypeColormaker;\r\n//# sourceMappingURL=entitytype-colormaker.js.map","/**\r\n * @file Geoquality Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\nimport { countSetBits } from '../math/math-utils';\r\n/**\r\n * Color by validation gometry quality\r\n */\r\nclass GeoqualityColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.geoAtomDict = {};\r\n        this.geoDict = {};\r\n        const val = params.structure.validation;\r\n        if (val) {\r\n            this.geoAtomDict = val.geoAtomDict;\r\n            this.geoDict = val.geoDict;\r\n        }\r\n    }\r\n    atomColor(atom) {\r\n        let sele = atom.resno + '';\r\n        if (atom.inscode)\r\n            sele += '^' + atom.inscode;\r\n        if (atom.chainname)\r\n            sele += ':' + atom.chainname;\r\n        sele += '/' + atom.modelIndex;\r\n        let geoProblemCount;\r\n        const geoAtom = this.geoAtomDict[sele];\r\n        if (geoAtom !== undefined) {\r\n            const atomProblems = geoAtom[atom.atomname] || 0;\r\n            geoProblemCount = countSetBits(atomProblems);\r\n        }\r\n        else {\r\n            geoProblemCount = this.geoDict[sele] || 0;\r\n        }\r\n        if (geoProblemCount === 0) {\r\n            return 0x2166ac;\r\n        }\r\n        else if (geoProblemCount === 1) {\r\n            return 0xfee08b;\r\n        }\r\n        else if (geoProblemCount === 2) {\r\n            return 0xf46d43;\r\n        }\r\n        else if (geoProblemCount >= 3) {\r\n            return 0xa50026;\r\n        }\r\n        return 0x909090;\r\n    }\r\n}\r\nColormakerRegistry.add('geoquality', GeoqualityColormaker);\r\nexport default GeoqualityColormaker;\r\n//# sourceMappingURL=geoquality-colormaker.js.map","/**\r\n * @file Hydrophobicity Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\nimport { ResidueHydrophobicity, DefaultResidueHydrophobicity } from '../structure/structure-constants';\r\n/**\r\n * Color by hydrophobicity\r\n */\r\nclass HydrophobicityColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.resHF = {};\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'RdYlGn';\r\n        }\r\n        const idx = 0; // 0: DGwif, 1: DGwoct, 2: Oct-IF\r\n        for (const name in ResidueHydrophobicity) {\r\n            this.resHF[name] = ResidueHydrophobicity[name][idx];\r\n        }\r\n        this.defaultResidueHydrophobicity = DefaultResidueHydrophobicity[idx];\r\n        if (!params.domain) {\r\n            let min = Infinity;\r\n            let max = -Infinity;\r\n            for (const name in this.resHF) {\r\n                const val = this.resHF[name];\r\n                min = Math.min(min, val);\r\n                max = Math.max(max, val);\r\n            }\r\n            this.parameters.domain = [min, 0, max];\r\n        }\r\n        this.hfScale = this.getScale();\r\n    }\r\n    atomColor(a) {\r\n        return this.hfScale(this.resHF[a.resname] || this.defaultResidueHydrophobicity);\r\n    }\r\n}\r\nColormakerRegistry.add('hydrophobicity', HydrophobicityColormaker);\r\nexport default HydrophobicityColormaker;\r\n//# sourceMappingURL=hydrophobicity-colormaker.js.map","/**\r\n * @file Modelindex Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by model index\r\n */\r\nclass ModelindexColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'rainbow';\r\n        }\r\n        if (!params.domain) {\r\n            this.parameters.domain = [0, params.structure.modelStore.count];\r\n        }\r\n        this.modelindexScale = this.getScale();\r\n    }\r\n    atomColor(a) {\r\n        return this.modelindexScale(a.modelIndex);\r\n    }\r\n}\r\nColormakerRegistry.add('modelindex', ModelindexColormaker);\r\nexport default ModelindexColormaker;\r\n//# sourceMappingURL=modelindex-colormaker.js.map","/**\r\n * @file Moleculetype Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\nimport { WaterType, IonType, ProteinType, RnaType, DnaType, SaccharideType } from '../structure/structure-constants';\r\n/**\r\n * Color by molecule type\r\n */\r\nclass MoleculetypeColormaker extends Colormaker {\r\n    atomColor(a) {\r\n        switch (a.residueType.moleculeType) {\r\n            case WaterType:\r\n                return 0x386cb0;\r\n            case IonType:\r\n                return 0xf0027f;\r\n            case ProteinType:\r\n                return 0xbeaed4;\r\n            case RnaType:\r\n                return 0xfdc086;\r\n            case DnaType:\r\n                return 0xbf5b17;\r\n            case SaccharideType:\r\n                return 0x7fc97f;\r\n            default:\r\n                return 0xffff99;\r\n        }\r\n    }\r\n}\r\nColormakerRegistry.add('moleculetype', MoleculetypeColormaker);\r\nexport default MoleculetypeColormaker;\r\n//# sourceMappingURL=moleculetype-colormaker.js.map","/**\r\n * @file Occupancy Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by occupancy\r\n */\r\nclass OccupancyColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'PuBu';\r\n        }\r\n        if (!params.domain) {\r\n            this.parameters.domain = [0.0, 1.0];\r\n        }\r\n        this.occupancyScale = this.getScale();\r\n    }\r\n    atomColor(a) {\r\n        return this.occupancyScale(a.occupancy);\r\n    }\r\n}\r\nColormakerRegistry.add('occupancy', OccupancyColormaker);\r\nexport default OccupancyColormaker;\r\n//# sourceMappingURL=occupancy-colormaker.js.map","/**\r\n * @file Partialcharge Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by partial charge. The {@link AtomProxy.partialCharge} property is used for coloring.\r\n * The default domain is [-1, 1].\r\n *\r\n * __Name:__ _partialCharge_\r\n *\r\n * @example\r\n * stage.loadFile(\"rcsb://1crn\").then(function (o) {\r\n *   o.addRepresentation(\"ball+stick\", {colorScheme: \"partialCharge\"});\r\n *   o.autoView();\r\n * });\r\n */\r\nclass PartialchargeColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'rwb';\r\n        }\r\n        if (!params.domain) {\r\n            this.parameters.domain = [-1, 1];\r\n        }\r\n        this.partialchargeScale = this.getScale();\r\n    }\r\n    atomColor(a) {\r\n        return this.partialchargeScale(a.partialCharge || 0);\r\n    }\r\n}\r\nColormakerRegistry.add('partialcharge', PartialchargeColormaker);\r\nexport default PartialchargeColormaker;\r\n//# sourceMappingURL=partialcharge-colormaker.js.map","/**\r\n * @file Random Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\nfunction randomColor() {\r\n    return Math.random() * 0xFFFFFF;\r\n}\r\n/**\r\n * Class by random color\r\n */\r\nclass RandomColormaker extends Colormaker {\r\n    /**\r\n     * get color for an atom\r\n     * @return {Integer} random hex color\r\n     */\r\n    atomColor() {\r\n        return randomColor();\r\n    }\r\n    /**\r\n     * get color for volume cell\r\n     * @return {Integer} random hex color\r\n     */\r\n    volumeColor() {\r\n        return randomColor();\r\n    }\r\n    /**\r\n     * get color for coordinates in space\r\n     * @return {Integer} random hex color\r\n     */\r\n    positionColor() {\r\n        return randomColor();\r\n    }\r\n}\r\nColormakerRegistry.add('random', RandomColormaker);\r\nexport default RandomColormaker;\r\n//# sourceMappingURL=random-colormaker.js.map","/**\r\n * @file Randomcoilindex Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by random coil index\r\n */\r\nclass RandomcoilindexColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.rciDict = {};\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'RdYlBu';\r\n        }\r\n        this.rciScale = this.getScale({ domain: [0.6, 0] });\r\n        const val = params.structure.validation;\r\n        if (val)\r\n            this.rciDict = val.rciDict;\r\n    }\r\n    atomColor(atom) {\r\n        let sele = `[${atom.resname}]${atom.resno}`;\r\n        if (atom.chainname)\r\n            sele += ':' + atom.chainname;\r\n        const rci = this.rciDict[sele];\r\n        return rci !== undefined ? this.rciScale(rci) : 0x909090;\r\n    }\r\n}\r\nColormakerRegistry.add('randomcoilindex', RandomcoilindexColormaker);\r\nexport default RandomcoilindexColormaker;\r\n//# sourceMappingURL=randomcoilindex-colormaker.js.map","/**\r\n * @file Residueindex Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by residue index\r\n */\r\nclass ResidueindexColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.scalePerChain = {};\r\n        if (!params.scale) {\r\n            this.parameters.scale = 'rainbow';\r\n            this.parameters.reverse = defaults(params.reverse, true);\r\n        }\r\n        params.structure.eachChain((cp) => {\r\n            this.parameters.domain = [cp.residueOffset, cp.residueEnd];\r\n            this.scalePerChain[cp.index] = this.getScale();\r\n        });\r\n    }\r\n    atomColor(a) {\r\n        return this.scalePerChain[a.chainIndex](a.residueIndex);\r\n    }\r\n}\r\nColormakerRegistry.add('residueindex', ResidueindexColormaker);\r\nexport default ResidueindexColormaker;\r\n//# sourceMappingURL=residueindex-colormaker.js.map","/**\r\n * @file Resname Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n// protein colors from Jmol http://jmol.sourceforge.net/jscolors/\r\nconst ResidueColors = {\r\n    'ALA': 0x8CFF8C,\r\n    'ARG': 0x00007C,\r\n    'ASN': 0xFF7C70,\r\n    'ASP': 0xA00042,\r\n    'CYS': 0xFFFF70,\r\n    'GLN': 0xFF4C4C,\r\n    'GLU': 0x660000,\r\n    'GLY': 0xFFFFFF,\r\n    'HIS': 0x7070FF,\r\n    'ILE': 0x004C00,\r\n    'LEU': 0x455E45,\r\n    'LYS': 0x4747B8,\r\n    'MET': 0xB8A042,\r\n    'PHE': 0x534C52,\r\n    'PRO': 0x525252,\r\n    'SER': 0xFF7042,\r\n    'THR': 0xB84C00,\r\n    'TRP': 0x4F4600,\r\n    'TYR': 0x8C704C,\r\n    'VAL': 0xFF8CFF,\r\n    'ASX': 0xFF00FF,\r\n    'GLX': 0xFF00FF,\r\n    'ASH': 0xFF00FF,\r\n    'GLH': 0xFF00FF,\r\n    'A': 0xDC143C,\r\n    'G': 0x32CD32,\r\n    'I': 0x9ACD32,\r\n    'X': 0x7CFC00,\r\n    'C': 0xFFD700,\r\n    'T': 0x4169E1,\r\n    'U': 0x40E0D0,\r\n    'D': 0x008B8B,\r\n    'DA': 0xDC143C,\r\n    'DG': 0x32CD32,\r\n    'DI': 0x9ACD32,\r\n    'DX': 0x7CFC00,\r\n    'DC': 0xFFD700,\r\n    'DT': 0x4169E1,\r\n    'DU': 0x40E0D0,\r\n    'DD': 0x008B8B\r\n};\r\nconst DefaultResidueColor = 0xFF00FF;\r\n/**\r\n * Color by residue name\r\n */\r\nclass ResnameColormaker extends Colormaker {\r\n    atomColor(a) {\r\n        return ResidueColors[a.resname] || DefaultResidueColor;\r\n    }\r\n}\r\nColormakerRegistry.add('resname', ResnameColormaker);\r\nexport default ResnameColormaker;\r\n//# sourceMappingURL=resname-colormaker.js.map","/**\r\n * @file Sstruc Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n// from Jmol http://jmol.sourceforge.net/jscolors/ (shapely)\r\nconst StructureColors = {\r\n    'alphaHelix': 0xFF0080,\r\n    'threeTenHelix': 0xA00080,\r\n    'piHelix': 0x600080,\r\n    'betaStrand': 0xFFC800,\r\n    'betaTurn': 0x6080FF,\r\n    'coil': 0xFFFFFF,\r\n    'dna': 0xAE00FE,\r\n    'rna': 0xFD0162,\r\n    'carbohydrate': 0xA6A6FA\r\n};\r\nconst DefaultStructureColor = 0x808080;\r\n/**\r\n * Color by secondary structure\r\n */\r\nclass SstrucColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.residueProxy = params.structure.getResidueProxy();\r\n    }\r\n    atomColor(ap) {\r\n        const sstruc = ap.sstruc;\r\n        const rp = this.residueProxy;\r\n        if (sstruc === 'h') {\r\n            return StructureColors.alphaHelix;\r\n        }\r\n        else if (sstruc === 'g') {\r\n            return StructureColors.threeTenHelix;\r\n        }\r\n        else if (sstruc === 'i') {\r\n            return StructureColors.piHelix;\r\n        }\r\n        else if (sstruc === 'e' || sstruc === 'b') {\r\n            return StructureColors.betaStrand;\r\n        }\r\n        else if (sstruc === 't') {\r\n            return StructureColors.betaTurn;\r\n        }\r\n        else {\r\n            rp.index = ap.residueIndex;\r\n            if (rp.isDna()) {\r\n                return StructureColors.dna;\r\n            }\r\n            else if (rp.isRna()) {\r\n                return StructureColors.rna;\r\n            }\r\n            else if (rp.isSaccharide()) {\r\n                return StructureColors.carbohydrate;\r\n            }\r\n            else if (rp.isProtein() || sstruc === 's' || sstruc === 'l') {\r\n                return StructureColors.coil;\r\n            }\r\n            else {\r\n                return DefaultStructureColor;\r\n            }\r\n        }\r\n    }\r\n}\r\nColormakerRegistry.add('sstruc', SstrucColormaker);\r\nexport default SstrucColormaker;\r\n//# sourceMappingURL=sstruc-colormaker.js.map","/**\r\n * @file Uniform Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by uniform color\r\n */\r\nclass UniformColormaker extends Colormaker {\r\n    atomColor() {\r\n        return this.parameters.value;\r\n    }\r\n    bondColor() {\r\n        return this.parameters.value;\r\n    }\r\n    valueColor() {\r\n        return this.parameters.value;\r\n    }\r\n    volumeColor() {\r\n        return this.parameters.value;\r\n    }\r\n}\r\nColormakerRegistry.add('uniform', UniformColormaker);\r\nexport default UniformColormaker;\r\n//# sourceMappingURL=uniform-colormaker.js.map","/**\r\n * @file Value Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by volume value\r\n */\r\nclass ValueColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.valueScale = this.getScale();\r\n    }\r\n    /**\r\n     * return the color for a volume cell\r\n     * @param  {Integer} index - volume cell index\r\n     * @return {Integer} hex cell color\r\n     */\r\n    volumeColor(index) {\r\n        return this.valueScale(this.parameters.volume.data[index]); // TODO\r\n    }\r\n}\r\nColormakerRegistry.add('value', ValueColormaker);\r\nexport default ValueColormaker;\r\n//# sourceMappingURL=value-colormaker.js.map","/**\r\n * @file Volume Colormaker\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3 } from 'three';\r\nimport { lerp } from '../math/math-utils';\r\nimport { ColormakerRegistry } from '../globals';\r\nimport Colormaker from './colormaker';\r\n/**\r\n * Color by volume position\r\n */\r\nclass VolumeColormaker extends Colormaker {\r\n    constructor(params) {\r\n        super(params);\r\n        this.vec = new Vector3();\r\n        this.valueScale = this.getScale();\r\n    }\r\n    /**\r\n     * return the color for coordinates in space\r\n     * @param  {Vector3} coords - xyz coordinates\r\n     * @return {Integer} hex coords color\r\n     */\r\n    positionColor(coords) {\r\n        const volume = this.parameters.volume; // TODO\r\n        if (!volume || !volume.inverseMatrix) {\r\n            return this.parameters.value;\r\n        }\r\n        const vec = this.vec;\r\n        const data = volume.data;\r\n        const nx = volume.nx;\r\n        const ny = volume.ny;\r\n        const nxy = nx * ny;\r\n        vec.copy(coords);\r\n        vec.applyMatrix4(volume.inverseMatrix);\r\n        // position of grid cell\r\n        const x0 = Math.floor(vec.x);\r\n        const y0 = Math.floor(vec.y);\r\n        const z0 = Math.floor(vec.z);\r\n        // Indices\r\n        const i = ((((z0 * ny) + y0) * nx) + x0);\r\n        const i1 = i + 1;\r\n        const iy = i + nx;\r\n        const iz = i + nxy;\r\n        const i1y = iy + 1;\r\n        const i1z = iz + 1;\r\n        const iyz = iy + nxy;\r\n        const i1yz = iyz + 1;\r\n        // Values\r\n        const v = data[i];\r\n        const v1 = data[i1];\r\n        const vy = data[iy];\r\n        const vz = data[iz];\r\n        const v1y = data[i1y];\r\n        const v1z = data[i1z];\r\n        const vyz = data[iyz];\r\n        const v1yz = data[i1yz];\r\n        // Position of point in fraction of grid\r\n        const xd = vec.x - x0;\r\n        const yd = vec.y - y0;\r\n        const zd = vec.z - z0;\r\n        // 1st Dimension\r\n        const c00 = lerp(v, v1, xd);\r\n        const c01 = lerp(vz, v1z, xd);\r\n        const c10 = lerp(vy, v1y, xd);\r\n        const c11 = lerp(vyz, v1yz, xd);\r\n        // 2nd Dimension\r\n        const c0 = lerp(c00, c10, yd);\r\n        const c1 = lerp(c01, c11, yd);\r\n        // 3rd Dimension\r\n        const c = lerp(c0, c1, zd);\r\n        return this.valueScale(c);\r\n    }\r\n}\r\nColormakerRegistry.add('volume', VolumeColormaker);\r\nexport default VolumeColormaker;\r\n//# sourceMappingURL=volume-colormaker.js.map","/**\r\n * @file Measurement Representation\r\n * @author Fred Ludlow <fred.ludlow@gmail.com>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3, Matrix4 required for declaration only\r\nimport { Color } from 'three';\r\nimport Selection from '../selection/selection';\r\nimport { Browser } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport StructureRepresentation from './structure-representation';\r\nimport { uniformArray, uniformArray3 } from '../math/array-utils';\r\n/**\r\n * Measurement representation\r\n * @interface\r\n */\r\nclass MeasurementRepresentation extends StructureRepresentation {\r\n    /**\r\n     * Handles common label settings and position logic for\r\n     * distance, angle and dihedral representations\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.n = 0; // Subclass create sets value\r\n        this.parameters = Object.assign({\r\n            labelVisible: {\r\n                type: 'boolean'\r\n            },\r\n            labelSize: {\r\n                type: 'number', precision: 3, max: 10.0, min: 0.001\r\n            },\r\n            labelColor: {\r\n                type: 'color'\r\n            },\r\n            labelFontFamily: {\r\n                type: 'select',\r\n                options: {\r\n                    'sans-serif': 'sans-serif',\r\n                    'monospace': 'monospace',\r\n                    'serif': 'serif'\r\n                },\r\n                buffer: 'fontFamily'\r\n            },\r\n            labelFontStyle: {\r\n                type: 'select',\r\n                options: {\r\n                    'normal': 'normal',\r\n                    'italic': 'italic'\r\n                },\r\n                buffer: 'fontStyle'\r\n            },\r\n            labelFontWeight: {\r\n                type: 'select',\r\n                options: {\r\n                    'normal': 'normal',\r\n                    'bold': 'bold'\r\n                },\r\n                buffer: 'fontWeight'\r\n            },\r\n            labelsdf: {\r\n                type: 'boolean', buffer: 'sdf'\r\n            },\r\n            labelXOffset: {\r\n                type: 'number', precision: 1, max: 20, min: -20, buffer: 'xOffset'\r\n            },\r\n            labelYOffset: {\r\n                type: 'number', precision: 1, max: 20, min: -20, buffer: 'yOffset'\r\n            },\r\n            labelZOffset: {\r\n                type: 'number', precision: 1, max: 20, min: -20, buffer: 'zOffset'\r\n            },\r\n            labelAttachment: {\r\n                type: 'select',\r\n                options: {\r\n                    'bottom-left': 'bottom-left',\r\n                    'bottom-center': 'bottom-center',\r\n                    'bottom-right': 'bottom-right',\r\n                    'middle-left': 'middle-left',\r\n                    'middle-center': 'middle-center',\r\n                    'middle-right': 'middle-right',\r\n                    'top-left': 'top-left',\r\n                    'top-center': 'top-center',\r\n                    'top-right': 'top-right'\r\n                },\r\n                rebuild: true\r\n            },\r\n            labelBorder: {\r\n                type: 'boolean', buffer: 'showBorder'\r\n            },\r\n            labelBorderColor: {\r\n                type: 'color', buffer: 'borderColor'\r\n            },\r\n            labelBorderWidth: {\r\n                type: 'number', precision: 2, max: 0.3, min: 0, buffer: 'borderWidth'\r\n            },\r\n            labelBackground: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            labelBackgroundColor: {\r\n                type: 'color', buffer: 'backgroundColor'\r\n            },\r\n            labelBackgroundMargin: {\r\n                type: 'number', precision: 2, max: 2, min: 0, rebuild: true\r\n            },\r\n            labelBackgroundOpacity: {\r\n                type: 'range', step: 0.01, max: 1, min: 0, buffer: 'backgroundOpacity'\r\n            },\r\n            labelFixedSize: {\r\n                type: 'boolean', buffer: 'fixedSize'\r\n            },\r\n            lineOpacity: {\r\n                type: 'range', min: 0.0, max: 1.0, step: 0.01\r\n            },\r\n            linewidth: {\r\n                type: 'integer', max: 50, min: 1, buffer: true\r\n            }\r\n        }, this.parameters, {\r\n            flatShaded: null\r\n        });\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        this.labelVisible = defaults(p.labelVisible, true);\r\n        this.labelSize = defaults(p.labelSize, 2.0);\r\n        this.labelColor = defaults(p.labelColor, 0xFFFFFF);\r\n        this.labelFontFamily = defaults(p.labelFontFamily, 'sans-serif');\r\n        this.labelFontStyle = defaults(p.labelFontstyle, 'normal');\r\n        this.labelFontWeight = defaults(p.labelFontWeight, 'bold');\r\n        this.labelsdf = defaults(p.labelsdf, Browser === 'Chrome');\r\n        this.labelXOffset = defaults(p.labelXOffset, 0.0);\r\n        this.labelYOffset = defaults(p.labelYOffset, 0.0);\r\n        this.labelZOffset = defaults(p.labelZOffset, 0.5);\r\n        this.labelAttachment = defaults(p.labelAttachment, 'bottom-left');\r\n        this.labelBorder = defaults(p.labelBorder, false);\r\n        this.labelBorderColor = defaults(p.labelBorderColor, 'lightgrey');\r\n        this.labelBorderWidth = defaults(p.labelBorderWidth, 0.15);\r\n        this.labelBackground = defaults(p.labelBackground, false);\r\n        this.labelBackgroundColor = defaults(p.labelBackgroundColor, 'lightgrey');\r\n        this.labelBackgroundMargin = defaults(p.labelBackgroundMargin, 0.5);\r\n        this.labelBackgroundOpacity = defaults(p.labelBackgroundOpacity, 1.0);\r\n        this.labelFixedSize = defaults(p.labelFixedSize, false);\r\n        this.lineOpacity = defaults(p.lineOpacity, 1.0);\r\n        this.linewidth = defaults(p.linewidth, 2);\r\n        super.init(p);\r\n    }\r\n    // All measurements need to rebuild on position change\r\n    update(what) {\r\n        if (what.position) {\r\n            this.build();\r\n        }\r\n        else {\r\n            super.update(what);\r\n        }\r\n    }\r\n    updateData(what, data) {\r\n        const textData = {};\r\n        if (!what || what.labelSize) {\r\n            Object.assign(textData, { size: uniformArray(this.n, this.labelSize) });\r\n        }\r\n        if (!what || what.labelColor) {\r\n            const c = new Color(this.labelColor);\r\n            Object.assign(textData, { color: uniformArray3(this.n, c.r, c.g, c.b) });\r\n        }\r\n        this.textBuffer.setAttributes(textData);\r\n    }\r\n    setParameters(params, what = {}, rebuild = false) {\r\n        if (params && params.labelSize) {\r\n            what.labelSize = true;\r\n        }\r\n        if (params && (params.labelColor || params.labelColor === 0x000000)) {\r\n            what.labelColor = true;\r\n            rebuild = true;\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        if (params && params.opacity !== undefined) {\r\n            this.textBuffer.setParameters({ opacity: 1.0 }); // only opaque labels\r\n        }\r\n        if (params && params.labelVisible !== undefined) {\r\n            this.setVisibility(this.visible);\r\n        }\r\n        return this;\r\n    }\r\n    setVisibility(value, noRenderRequest) {\r\n        super.setVisibility(value, true);\r\n        if (this.textBuffer) {\r\n            this.textBuffer.setVisibility(this.labelVisible && this.visible);\r\n        }\r\n        if (!noRenderRequest)\r\n            this.viewer.requestRender();\r\n        return this;\r\n    }\r\n    getLabelBufferParams(params = {}) {\r\n        return super.getBufferParams(Object.assign({\r\n            fontFamily: this.labelFontFamily,\r\n            fontStyle: this.labelFontStyle,\r\n            fontWeight: this.labelFontWeight,\r\n            sdf: this.labelsdf,\r\n            xOffset: this.labelXOffset,\r\n            yOffset: this.labelYOffset,\r\n            zOffset: this.labelZOffset,\r\n            attachment: this.labelAttachment,\r\n            showBorder: this.labelBorder,\r\n            borderColor: this.labelBorderColor,\r\n            borderWidth: this.labelBorderWidth,\r\n            showBackground: this.labelBackground,\r\n            backgroundColor: this.labelBackgroundColor,\r\n            backgroundMargin: this.labelBackgroundMargin,\r\n            backgroundOpacity: this.labelBackgroundOpacity,\r\n            fixedSize: this.labelFixedSize,\r\n            disablePicking: true,\r\n            visible: this.labelVisible\r\n        }, params, {\r\n            opacity: 1.0 // only opaque labels\r\n        }));\r\n    }\r\n    getAtomRadius() {\r\n        return 0;\r\n    }\r\n}\r\n/**\r\n * MeasurementRepresentations take atom[Pair|Triple|Quad] parameters.\r\n *\r\n * Parses nested array of either integer atom indices or selection\r\n * expressions into a flat array of coordinates.\r\n *\r\n * @param  {Structure} sview The structure to which the atoms refer\r\n * @param  {Array} atoms Nested array of atom pairs|triples|quads as\r\n *   Integer indices or selection expressions\r\n * @return {Float32Array} Flattened array of position coordinates\r\n */\r\nfunction parseNestedAtoms(sview, atoms) {\r\n    const ap = sview.getAtomProxy();\r\n    const sele = new Selection();\r\n    const nSets = atoms.length;\r\n    if (nSets === 0)\r\n        return new Float32Array(0);\r\n    // Peek-ahead at first item to determine order and parse mode\r\n    const order = atoms[0].length;\r\n    const selected = sview.getAtomSet();\r\n    const a = new Float32Array(nSets * order * 3);\r\n    let p = 0;\r\n    atoms.forEach(function (group) {\r\n        let _break = false;\r\n        for (let j = 0; j < order; j++) {\r\n            const value = group[j];\r\n            if (typeof (value) === 'number' && Number.isInteger(value)) {\r\n                if (selected.get(value)) {\r\n                    ap.index = value;\r\n                }\r\n                else {\r\n                    _break = true;\r\n                    break;\r\n                }\r\n            }\r\n            else {\r\n                sele.setString(value);\r\n                const atomIndices = sview.getAtomIndices(sele);\r\n                if (atomIndices.length) {\r\n                    ap.index = atomIndices[0];\r\n                }\r\n                else {\r\n                    _break = true;\r\n                    break;\r\n                }\r\n            }\r\n            let offset = p + j * 3;\r\n            a[offset++] = ap.x;\r\n            a[offset++] = ap.y;\r\n            a[offset++] = ap.z;\r\n        }\r\n        if (!_break)\r\n            p += 3 * order;\r\n    });\r\n    return a.subarray(0, p);\r\n}\r\n/* out = v1 * cos(angle) + v2 * sin(angle) */\r\nfunction calcArcPoint(out, center, v1, v2, angle) {\r\n    const x = Math.cos(angle);\r\n    const y = Math.sin(angle);\r\n    out[0] = center[0] + v1[0] * x + v2[0] * y;\r\n    out[1] = center[1] + v1[1] * x + v2[1] * y;\r\n    out[2] = center[2] + v1[2] * x + v2[2] * y;\r\n}\r\nexport { MeasurementRepresentation as default, calcArcPoint, parseNestedAtoms };\r\n//# sourceMappingURL=measurement-representation.js.map","/**\r\n * @file Edt\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// 2D Euclidean distance transform by Felzenszwalb & Huttenlocher https://cs.brown.edu/~pff/papers/dt-final.pdf\r\nexport function edt(data, width, height, f, d, v, z) {\r\n    for (let x = 0; x < width; x++) {\r\n        for (let y = 0; y < height; y++) {\r\n            f[y] = data[y * width + x];\r\n        }\r\n        edt1d(f, d, v, z, height);\r\n        for (let y = 0; y < height; y++) {\r\n            data[y * width + x] = d[y];\r\n        }\r\n    }\r\n    for (let y = 0; y < height; y++) {\r\n        for (let x = 0; x < width; x++) {\r\n            f[x] = data[y * width + x];\r\n        }\r\n        edt1d(f, d, v, z, width);\r\n        for (let x = 0; x < width; x++) {\r\n            data[y * width + x] = Math.sqrt(d[x]);\r\n        }\r\n    }\r\n}\r\n// 1D squared distance transform\r\nfunction edt1d(f, d, v, z, n) {\r\n    v[0] = 0;\r\n    z[0] = Number.MIN_SAFE_INTEGER;\r\n    z[1] = Number.MAX_SAFE_INTEGER;\r\n    for (let q = 1, k = 0; q < n; q++) {\r\n        let s = ((f[q] + q * q) - (f[v[k]] + v[k] * v[k])) / (2 * q - 2 * v[k]);\r\n        while (s <= z[k]) {\r\n            k--;\r\n            s = ((f[q] + q * q) - (f[v[k]] + v[k] * v[k])) / (2 * q - 2 * v[k]);\r\n        }\r\n        k++;\r\n        v[k] = q;\r\n        z[k] = s;\r\n        z[k + 1] = Number.MAX_SAFE_INTEGER;\r\n    }\r\n    for (let q = 0, k = 0; q < n; q++) {\r\n        while (z[k + 1] < q)\r\n            k++;\r\n        d[q] = (q - v[k]) * (q - v[k]) + f[v[k]];\r\n    }\r\n}\r\n//# sourceMappingURL=edt.js.map","/**\r\n * @file Text Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3, Matrix4 required for declaration only\r\nimport { Color, CanvasTexture } from 'three';\r\nimport '../shader/SDFFont.vert';\r\nimport '../shader/SDFFont.frag';\r\nimport { BufferRegistry } from '../globals';\r\nimport { createParams } from '../utils';\r\nimport MappedQuadBuffer from './mappedquad-buffer';\r\nimport { IgnorePicker } from '../utils/picker';\r\nimport { edt } from '../utils/edt';\r\nimport { BufferDefaultParameters, BufferParameterTypes } from './buffer';\r\nconst TextAtlasCache = {};\r\nfunction getTextAtlas(params) {\r\n    const hash = JSON.stringify(params);\r\n    if (TextAtlasCache[hash] === undefined) {\r\n        TextAtlasCache[hash] = new TextAtlas(params);\r\n    }\r\n    return TextAtlasCache[hash];\r\n}\r\nexport const TextAtlasDefaultParams = {\r\n    font: 'sans-serif',\r\n    size: 36,\r\n    style: 'normal',\r\n    variant: 'normal',\r\n    weight: 'normal',\r\n    outline: 3,\r\n    width: 1024,\r\n    height: 1024\r\n};\r\nexport class TextAtlas {\r\n    constructor(params = {}) {\r\n        this.gamma = 1;\r\n        this.mapped = {};\r\n        this.scratchW = 0;\r\n        this.scratchH = 0;\r\n        this.currentX = 0;\r\n        this.currentY = 0;\r\n        this.cutoff = 0.25;\r\n        this.parameters = createParams(params, TextAtlasDefaultParams);\r\n        const p = this.parameters;\r\n        this.radius = p.size / 8;\r\n        this.padding = p.size / 3;\r\n        // Prepare line-height with room for outline and descenders/ascenders\r\n        const lineHeight = this.lineHeight = p.size + 2 * p.outline + Math.round(p.size / 4);\r\n        const maxWidth = this.maxWidth = p.width / 4;\r\n        // Prepare scratch canvas\r\n        const canvas = this.canvas = document.createElement('canvas');\r\n        canvas.width = maxWidth;\r\n        canvas.height = lineHeight;\r\n        const ctx = this.context = this.canvas.getContext('2d');\r\n        ctx.font = `${p.style} ${p.variant} ${p.weight} ${p.size}px ${p.font}`;\r\n        ctx.fillStyle = 'black';\r\n        ctx.textAlign = 'left';\r\n        ctx.textBaseline = 'bottom';\r\n        ctx.lineJoin = 'round';\r\n        // temporary arrays for the distance transform\r\n        this.gridOuter = new Float64Array(lineHeight * maxWidth);\r\n        this.gridInner = new Float64Array(lineHeight * maxWidth);\r\n        this.f = new Float64Array(Math.max(lineHeight, maxWidth));\r\n        this.d = new Float64Array(Math.max(lineHeight, maxWidth));\r\n        this.z = new Float64Array(Math.max(lineHeight, maxWidth) + 1);\r\n        this.v = new Int16Array(Math.max(lineHeight, maxWidth));\r\n        //\r\n        this.data = new Uint8Array(p.width * p.height * 4);\r\n        this.canvas2 = document.createElement('canvas');\r\n        this.canvas2.width = p.width;\r\n        this.canvas2.height = p.height;\r\n        this.context2 = this.canvas2.getContext('2d');\r\n        // Replacement Character\r\n        this.placeholder = this.map(String.fromCharCode(0xFFFD));\r\n        // Basic Latin (subset)\r\n        for (let i = 0x0020; i <= 0x007E; ++i) {\r\n            this.map(String.fromCharCode(i));\r\n        }\r\n        // TODO: to slow to always prepare them\r\n        // // Latin-1 Supplement (subset)\r\n        // for (let i = 0x00A1; i <= 0x00FF; ++i) {\r\n        //   this.map(String.fromCharCode(i))\r\n        // }\r\n        // Degree sign\r\n        this.map(String.fromCharCode(0x00B0));\r\n        // // Greek and Coptic (subset)\r\n        // for (let i = 0x0391; i <= 0x03C9; ++i) {\r\n        //   this.map(String.fromCharCode(i))\r\n        // }\r\n        // // Cyrillic (subset)\r\n        // for (let i = 0x0400; i <= 0x044F; ++i) {\r\n        //   this.map(String.fromCharCode(i))\r\n        // }\r\n        // Angstrom Sign\r\n        this.map(String.fromCharCode(0x212B));\r\n        this.texture = new CanvasTexture(this.canvas2);\r\n        this.texture.flipY = false;\r\n        this.texture.needsUpdate = true;\r\n    }\r\n    map(text) {\r\n        const p = this.parameters;\r\n        if (this.mapped[text] === undefined) {\r\n            this.draw(text);\r\n            if (this.currentX + this.scratchW > p.width) {\r\n                this.currentX = 0;\r\n                this.currentY += this.scratchH;\r\n            }\r\n            if (this.currentY + this.scratchH > p.height) {\r\n                console.warn('canvas to small');\r\n            }\r\n            this.mapped[text] = {\r\n                x: this.currentX,\r\n                y: this.currentY,\r\n                w: this.scratchW,\r\n                h: this.scratchH\r\n            };\r\n            this.context2.drawImage(this.canvas, 0, 0, this.scratchW, this.scratchH, this.currentX, this.currentY, this.scratchW, this.scratchH);\r\n            this.currentX += this.scratchW;\r\n        }\r\n        return this.mapped[text];\r\n    }\r\n    get(text) {\r\n        return this.mapped[text] || this.placeholder;\r\n    }\r\n    draw(text) {\r\n        const p = this.parameters;\r\n        const h = this.lineHeight;\r\n        const o = p.outline;\r\n        const ctx = this.context;\r\n        // const dst = this.scratch\r\n        const max = this.maxWidth;\r\n        // const colors = this.colors\r\n        // Bottom aligned, take outline into account\r\n        const x = o;\r\n        const y = h - p.outline;\r\n        // Measure text\r\n        const m = ctx.measureText(text);\r\n        const w = Math.min(max, Math.ceil(m.width + 2 * x + 1));\r\n        const n = w * h;\r\n        // Clear scratch area\r\n        ctx.clearRect(0, 0, w, h);\r\n        // Draw text\r\n        ctx.fillText(text, x, y);\r\n        const imageData = ctx.getImageData(0, 0, w, h);\r\n        const data = imageData.data;\r\n        for (let i = 0; i < n; i++) {\r\n            const a = imageData.data[i * 4 + 3] / 255; // alpha value\r\n            this.gridOuter[i] = a === 1 ? 0 : a === 0 ? Number.MAX_SAFE_INTEGER : Math.pow(Math.max(0, 0.5 - a), 2);\r\n            this.gridInner[i] = a === 1 ? Number.MAX_SAFE_INTEGER : a === 0 ? 0 : Math.pow(Math.max(0, a - 0.5), 2);\r\n        }\r\n        edt(this.gridOuter, w, h, this.f, this.d, this.v, this.z);\r\n        edt(this.gridInner, w, h, this.f, this.d, this.v, this.z);\r\n        for (let i = 0; i < n; i++) {\r\n            const d = this.gridOuter[i] - this.gridInner[i];\r\n            data[i * 4 + 3] = Math.max(0, Math.min(255, Math.round(255 - 255 * (d / this.radius + this.cutoff))));\r\n        }\r\n        ctx.putImageData(imageData, 0, 0);\r\n        this.scratchW = w;\r\n        this.scratchH = h;\r\n    }\r\n}\r\nexport const TextBufferDefaultParameters = Object.assign({\r\n    fontFamily: 'sans-serif',\r\n    fontStyle: 'normal',\r\n    fontWeight: 'bold',\r\n    fontSize: 36,\r\n    xOffset: 0.0,\r\n    yOffset: 0.0,\r\n    zOffset: 0.5,\r\n    attachment: 'bottom-left',\r\n    showBorder: false,\r\n    borderColor: 'lightgrey',\r\n    borderWidth: 0.15,\r\n    showBackground: false,\r\n    backgroundColor: 'lightgrey',\r\n    backgroundMargin: 0.5,\r\n    backgroundOpacity: 1.0,\r\n    forceTransparent: true,\r\n    fixedSize: false\r\n}, BufferDefaultParameters);\r\nconst TextBufferParameterTypes = Object.assign({\r\n    fontFamily: { uniform: true },\r\n    fontStyle: { uniform: true },\r\n    fontWeight: { uniform: true },\r\n    fontSize: { uniform: true },\r\n    xOffset: { uniform: true },\r\n    yOffset: { uniform: true },\r\n    zOffset: { uniform: true },\r\n    showBorder: { uniform: true },\r\n    borderColor: { uniform: true },\r\n    borderWidth: { uniform: true },\r\n    backgroundColor: { uniform: true },\r\n    backgroundOpacity: { uniform: true },\r\n    fixedSize: { updateShader: true }\r\n}, BufferParameterTypes);\r\nfunction getCharCount(data, params) {\r\n    const n = data.position.length / 3;\r\n    let charCount = 0;\r\n    for (let i = 0; i < n; ++i) {\r\n        charCount += data.text[i].length;\r\n    }\r\n    if (params.showBackground)\r\n        charCount += n;\r\n    return charCount;\r\n}\r\n/**\r\n * Text buffer. Renders screen-aligned text strings.\r\n *\r\n * @example\r\n * var textBuffer = new TextBuffer({\r\n *   position: new Float32Array([ 0, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   size: new Float32Array([ 2 ]),\r\n *   text: [ \"Hello\" ]\r\n * });\r\n */\r\nclass TextBuffer extends MappedQuadBuffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position - positions\r\n     * @param  {Float32Array} data.color - colors\r\n     * @param  {Float32Array} data.size - sizes\r\n     * @param  {String[]} data.text - text strings\r\n     * @param  {TextBufferParameters} params - parameters object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super({\r\n            position: new Float32Array(getCharCount(data, params) * 3),\r\n            color: new Float32Array(getCharCount(data, params) * 3),\r\n            picking: new IgnorePicker()\r\n        }, params);\r\n        this.parameterTypes = TextBufferParameterTypes;\r\n        this.alwaysTransparent = true;\r\n        this.hasWireframe = false;\r\n        this.isText = true;\r\n        this.vertexShader = 'SDFFont.vert';\r\n        this.fragmentShader = 'SDFFont.frag';\r\n        this.text = data.text;\r\n        this.positionCount = data.position.length / 3;\r\n        this.addUniforms({\r\n            'fontTexture': { value: null },\r\n            'xOffset': { value: this.parameters.xOffset },\r\n            'yOffset': { value: this.parameters.yOffset },\r\n            'zOffset': { value: this.parameters.zOffset },\r\n            'ortho': { value: false },\r\n            'showBorder': { value: this.parameters.showBorder },\r\n            'borderColor': { value: new Color(this.parameters.borderColor) },\r\n            'borderWidth': { value: this.parameters.borderWidth },\r\n            'backgroundColor': { value: new Color(this.parameters.backgroundColor) },\r\n            'backgroundOpacity': { value: this.parameters.backgroundOpacity },\r\n            'canvasHeight': { value: 1.0 },\r\n            'pixelRatio': { value: 1.0 }\r\n        });\r\n        this.addAttributes({\r\n            'inputTexCoord': { type: 'v2', value: null },\r\n            'inputSize': { type: 'f', value: null }\r\n        });\r\n        this.setAttributes(data);\r\n        this.makeTexture();\r\n        this.makeMapping();\r\n    }\r\n    get defaultParameters() { return TextBufferDefaultParameters; }\r\n    makeMaterial() {\r\n        super.makeMaterial();\r\n        const tex = this.texture;\r\n        const m = this.material;\r\n        m.transparent = true;\r\n        m.extensions.derivatives = true;\r\n        m.lights = false;\r\n        m.uniforms.fontTexture.value = tex;\r\n        m.needsUpdate = true;\r\n        const wm = this.wireframeMaterial;\r\n        wm.transparent = true;\r\n        wm.extensions.derivatives = true;\r\n        wm.lights = false;\r\n        wm.uniforms.fontTexture.value = tex;\r\n        wm.needsUpdate = true;\r\n        const pm = this.pickingMaterial;\r\n        pm.extensions.derivatives = true;\r\n        pm.lights = false;\r\n        pm.uniforms.fontTexture.value = tex;\r\n        pm.needsUpdate = true;\r\n    }\r\n    setAttributes(data = {}) {\r\n        let position, size, color;\r\n        let aPosition, inputSize, aColor;\r\n        const text = this.text;\r\n        const attributes = this.geometry.attributes; // TODO\r\n        if (data.position) {\r\n            position = data.position;\r\n            aPosition = attributes.position.array;\r\n            attributes.position.needsUpdate = true;\r\n        }\r\n        if (data.size) {\r\n            size = data.size;\r\n            inputSize = attributes.inputSize.array;\r\n            attributes.inputSize.needsUpdate = true;\r\n        }\r\n        if (data.color) {\r\n            color = data.color;\r\n            aColor = attributes.color.array;\r\n            attributes.color.needsUpdate = true;\r\n        }\r\n        const n = this.positionCount;\r\n        let j, o;\r\n        let iCharAll = 0;\r\n        let txt, iChar, nChar;\r\n        for (let v = 0; v < n; ++v) {\r\n            o = 3 * v;\r\n            txt = text[v];\r\n            nChar = txt.length;\r\n            if (this.parameters.showBackground)\r\n                nChar += 1;\r\n            for (iChar = 0; iChar < nChar; ++iChar, ++iCharAll) {\r\n                for (let m = 0; m < 4; m++) {\r\n                    j = iCharAll * 4 * 3 + (3 * m);\r\n                    if (position) {\r\n                        aPosition[j] = position[o];\r\n                        aPosition[j + 1] = position[o + 1];\r\n                        aPosition[j + 2] = position[o + 2];\r\n                    }\r\n                    if (size) {\r\n                        inputSize[(iCharAll * 4) + m] = size[v];\r\n                    }\r\n                    if (color) {\r\n                        aColor[j] = color[o];\r\n                        aColor[j + 1] = color[o + 1];\r\n                        aColor[j + 2] = color[o + 2];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    makeTexture() {\r\n        this.textAtlas = getTextAtlas({\r\n            font: this.parameters.fontFamily,\r\n            style: this.parameters.fontStyle,\r\n            weight: this.parameters.fontWeight,\r\n            size: this.parameters.fontSize\r\n        });\r\n        this.texture = this.textAtlas.texture;\r\n    }\r\n    makeMapping() {\r\n        const ta = this.textAtlas;\r\n        const text = this.text;\r\n        const attachment = this.parameters.attachment;\r\n        const margin = (ta.lineHeight * this.parameters.backgroundMargin * 0.1) - 10;\r\n        const attribs = this.geometry.attributes; // TODO\r\n        const inputTexCoord = attribs.inputTexCoord.array;\r\n        const inputMapping = attribs.mapping.array;\r\n        const n = this.positionCount;\r\n        let iCharAll = 0;\r\n        let c, i, txt, xadvance, iChar, nChar, xShift, yShift;\r\n        for (let v = 0; v < n; ++v) {\r\n            txt = text[v];\r\n            xadvance = 0;\r\n            nChar = txt.length;\r\n            // calculate width\r\n            for (iChar = 0; iChar < nChar; ++iChar) {\r\n                c = ta.get(txt[iChar]);\r\n                xadvance += c.w - 2 * ta.parameters.outline;\r\n            }\r\n            // attachment\r\n            if (attachment.startsWith('top')) {\r\n                yShift = ta.lineHeight / 1.25;\r\n            }\r\n            else if (attachment.startsWith('middle')) {\r\n                yShift = ta.lineHeight / 2.5;\r\n            }\r\n            else {\r\n                yShift = 0; // \"bottom\"\r\n            }\r\n            if (attachment.endsWith('right')) {\r\n                xShift = xadvance;\r\n            }\r\n            else if (attachment.endsWith('center')) {\r\n                xShift = xadvance / 2;\r\n            }\r\n            else {\r\n                xShift = 0; // \"left\"\r\n            }\r\n            xShift += ta.parameters.outline;\r\n            yShift += ta.parameters.outline;\r\n            // background\r\n            if (this.parameters.showBackground) {\r\n                i = iCharAll * 2 * 4;\r\n                inputMapping[i + 0] = -ta.lineHeight / 6 - xShift - margin; // top left\r\n                inputMapping[i + 1] = ta.lineHeight - yShift + margin;\r\n                inputMapping[i + 2] = -ta.lineHeight / 6 - xShift - margin; // bottom left\r\n                inputMapping[i + 3] = 0 - yShift - margin;\r\n                inputMapping[i + 4] = xadvance + ta.lineHeight / 6 - xShift + 2 * ta.parameters.outline + margin; // top right\r\n                inputMapping[i + 5] = ta.lineHeight - yShift + margin;\r\n                inputMapping[i + 6] = xadvance + ta.lineHeight / 6 - xShift + 2 * ta.parameters.outline + margin; // bottom right\r\n                inputMapping[i + 7] = 0 - yShift - margin;\r\n                inputTexCoord[i + 0] = 10;\r\n                inputTexCoord[i + 2] = 10;\r\n                inputTexCoord[i + 4] = 10;\r\n                inputTexCoord[i + 6] = 10;\r\n                iCharAll += 1;\r\n            }\r\n            xadvance = 0;\r\n            for (iChar = 0; iChar < nChar; ++iChar, ++iCharAll) {\r\n                c = ta.get(txt[iChar]);\r\n                i = iCharAll * 2 * 4;\r\n                inputMapping[i + 0] = xadvance - xShift; // top left\r\n                inputMapping[i + 1] = c.h - yShift;\r\n                inputMapping[i + 2] = xadvance - xShift; // bottom left\r\n                inputMapping[i + 3] = 0 - yShift;\r\n                inputMapping[i + 4] = xadvance + c.w - xShift; // top right\r\n                inputMapping[i + 5] = c.h - yShift;\r\n                inputMapping[i + 6] = xadvance + c.w - xShift; // bottom right\r\n                inputMapping[i + 7] = 0 - yShift;\r\n                const texWidth = ta.parameters.width;\r\n                const texHeight = ta.parameters.height;\r\n                const texCoords = [\r\n                    c.x / texWidth, c.y / texHeight,\r\n                    c.x / texWidth, (c.y + c.h) / texHeight,\r\n                    (c.x + c.w) / texWidth, c.y / texHeight,\r\n                    (c.x + c.w) / texWidth, (c.y + c.h) / texHeight // bottom right\r\n                ];\r\n                inputTexCoord.set(texCoords, i);\r\n                xadvance += c.w - 2 * ta.parameters.outline;\r\n            }\r\n        }\r\n        attribs.inputTexCoord.needsUpdate = true;\r\n        attribs.mapping.needsUpdate = true;\r\n    }\r\n    getDefines(type) {\r\n        const defines = super.getDefines(type);\r\n        if (this.parameters.fixedSize) {\r\n            defines.FIXED_SIZE = 1;\r\n        }\r\n        return defines;\r\n    }\r\n    setUniforms(data) {\r\n        if (data && (data.fontFamily !== undefined ||\r\n            data.fontStyle !== undefined ||\r\n            data.fontWeight !== undefined ||\r\n            data.fontSize !== undefined)) {\r\n            this.makeTexture();\r\n            this.makeMapping();\r\n            this.texture.needsUpdate = true;\r\n            data.fontTexture = this.texture;\r\n        }\r\n        super.setUniforms(data);\r\n    }\r\n}\r\nBufferRegistry.add('text', TextBuffer);\r\nexport default TextBuffer;\r\n//# sourceMappingURL=text-buffer.js.map","/**\r\n * @file Angle Representation\r\n * @author Fred Ludlow <fred.ludlow@gmail.com>\r\n * @private\r\n */\r\nimport { Color } from 'three';\r\nimport { RepresentationRegistry } from '../globals';\r\nimport MeasurementRepresentation, { parseNestedAtoms, calcArcPoint } from './measurement-representation';\r\nimport { defaults } from '../utils';\r\nimport MeshBuffer from '../buffer/mesh-buffer';\r\nimport TextBuffer from '../buffer/text-buffer';\r\nimport WideLineBuffer from '../buffer/wideline-buffer';\r\nimport { v3add, v3cross, v3dot, v3fromArray, v3length, v3new, v3normalize, v3sub, v3toArray } from '../math/vector-utils';\r\nimport { copyArray, uniformArray, uniformArray3 } from '../math/array-utils';\r\nimport { RAD2DEG } from '../math/math-constants';\r\nimport { getFixedLengthWrappedDashData } from '../geometry/dash';\r\n/**\r\n * Angle representation object\r\n *\r\n * Reperesentation consists of four parts, visibility can be set for each\r\n * label - the text label with the angle size\r\n * vectors - lines joining the three points\r\n * sector - triangles representing the angle\r\n * arc - line bordering the sector\r\n *\r\n * @param {Structure} structure - the structure to measure angles in\r\n * @param {Viewer} viewer - a viewer object\r\n * @param {AngleRepresentationParameters} params - angle representation parameters\r\n */\r\nclass AngleRepresentation extends MeasurementRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'angle';\r\n        this.parameters = Object.assign({\r\n            atomTriple: {\r\n                type: 'hidden', rebuild: true\r\n            },\r\n            vectorVisible: {\r\n                type: 'boolean', default: true\r\n            },\r\n            arcVisible: {\r\n                type: 'boolean', default: true\r\n            },\r\n            sectorVisible: {\r\n                type: 'boolean', default: true\r\n            }\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.side = defaults(p.side, 'double');\r\n        p.opacity = defaults(p.opacity, 0.5);\r\n        this.atomTriple = defaults(p.atomTriple, []);\r\n        this.arcVisible = defaults(p.arcVisible, true);\r\n        this.sectorVisible = defaults(p.sectorVisible, true);\r\n        this.vectorVisible = defaults(p.vectorVisible, true);\r\n        super.init(p);\r\n    }\r\n    createData(sview) {\r\n        if (!sview.atomCount || !this.atomTriple.length)\r\n            return;\r\n        const atomPosition = atomTriplePositions(sview, this.atomTriple);\r\n        const angleData = getAngleData(atomPosition);\r\n        const n = this.n = angleData.labelPosition.length / 3;\r\n        const labelColor = new Color(this.labelColor);\r\n        // Create buffers\r\n        this.textBuffer = new TextBuffer({\r\n            position: angleData.labelPosition,\r\n            size: uniformArray(n, this.labelSize),\r\n            color: uniformArray3(n, labelColor.r, labelColor.g, labelColor.b),\r\n            text: angleData.labelText\r\n        }, this.getLabelBufferParams());\r\n        const c = new Color(this.colorValue);\r\n        this.vectorBuffer = new WideLineBuffer(getFixedLengthWrappedDashData({\r\n            position1: angleData.vectorPosition1,\r\n            position2: angleData.vectorPosition2,\r\n            color: uniformArray3(2 * n, c.r, c.g, c.b),\r\n            color2: uniformArray3(2 * n, c.r, c.g, c.b)\r\n        }), this.getBufferParams({\r\n            linewidth: this.linewidth,\r\n            visible: this.vectorVisible,\r\n            opacity: this.lineOpacity\r\n        }));\r\n        this.arcLength = angleData.arcPosition1.length / 3;\r\n        this.arcBuffer = new WideLineBuffer(getFixedLengthWrappedDashData({\r\n            position1: angleData.arcPosition1,\r\n            position2: angleData.arcPosition2,\r\n            color: uniformArray3(this.arcLength, c.r, c.g, c.b),\r\n            color2: uniformArray3(this.arcLength, c.r, c.g, c.b)\r\n        }), this.getBufferParams({\r\n            linewidth: this.linewidth,\r\n            visible: this.arcVisible,\r\n            opacity: this.lineOpacity\r\n        }));\r\n        this.sectorLength = angleData.sectorPosition.length / 3;\r\n        this.sectorBuffer = new MeshBuffer({\r\n            position: angleData.sectorPosition,\r\n            color: uniformArray3(this.sectorLength, c.r, c.g, c.b)\r\n        }, this.getBufferParams({\r\n            visible: this.sectorVisible\r\n        }));\r\n        return {\r\n            bufferList: [\r\n                this.textBuffer,\r\n                this.vectorBuffer,\r\n                this.arcBuffer,\r\n                this.sectorBuffer\r\n            ]\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        super.updateData(what, data);\r\n        const vectorData = {};\r\n        const arcData = {};\r\n        const sectorData = {};\r\n        if (what.color) {\r\n            const c = new Color(this.colorValue);\r\n            Object.assign(vectorData, {\r\n                color: uniformArray3(this.n * 2, c.r, c.g, c.b),\r\n                color2: uniformArray3(this.n * 2, c.r, c.g, c.b)\r\n            });\r\n            Object.assign(arcData, {\r\n                color: uniformArray3(this.arcLength, c.r, c.g, c.b),\r\n                color2: uniformArray3(this.arcLength, c.r, c.g, c.b)\r\n            });\r\n            Object.assign(sectorData, {\r\n                color: uniformArray3(this.sectorLength, c.r, c.g, c.b)\r\n            });\r\n        }\r\n        // if (what.sectorOpacity) {\r\n        //   this.sectorBuffer.opacity = what.sectorOpacity\r\n        // }\r\n        this.vectorBuffer.setAttributes(vectorData);\r\n        this.arcBuffer.setAttributes(arcData);\r\n        this.sectorBuffer.setAttributes(sectorData);\r\n    }\r\n    setParameters(params) {\r\n        var rebuild = false;\r\n        var what = {};\r\n        super.setParameters(params, what, rebuild);\r\n        if (params && (params.vectorVisible !== undefined ||\r\n            params.arcVisible !== undefined ||\r\n            params.sectorVisible !== undefined)) {\r\n            this.setVisibility(this.visible);\r\n        }\r\n        if (params && params.lineOpacity) {\r\n            this.vectorBuffer.setParameters({ opacity: params.lineOpacity });\r\n            this.arcBuffer.setParameters({ opacity: params.lineOpacity });\r\n        }\r\n        if (params && params.opacity !== undefined) {\r\n            this.vectorBuffer.setParameters({ opacity: this.lineOpacity });\r\n            this.arcBuffer.setParameters({ opacity: this.lineOpacity });\r\n        }\r\n        if (params && params.linewidth) {\r\n            this.vectorBuffer.setParameters({ linewidth: params.linewidth });\r\n            this.arcBuffer.setParameters({ linewidth: params.linewidth });\r\n        }\r\n        return this;\r\n    }\r\n    setVisibility(value, noRenderRequest) {\r\n        super.setVisibility(value, true);\r\n        if (this.vectorBuffer) {\r\n            this.vectorBuffer.setVisibility(this.vectorVisible && this.visible);\r\n        }\r\n        if (this.arcBuffer) {\r\n            this.arcBuffer.setVisibility(this.arcVisible && this.visible);\r\n        }\r\n        if (this.sectorBuffer) {\r\n            this.sectorBuffer.setVisibility(this.sectorVisible && this.visible);\r\n        }\r\n        if (!noRenderRequest)\r\n            this.viewer.requestRender();\r\n        return this;\r\n    }\r\n}\r\n/**\r\n * Ensure mid point does not coincide with first or second\r\n * @param  {Float32Array} position 9*nAngle array of coordinates\r\n * @return {Float32Array}          Filtered position array, may be shorter\r\n */\r\nfunction validatePositions(position) {\r\n    const include = [];\r\n    const n = position.length / 9;\r\n    for (let i = 0; i < n; i++) {\r\n        // Check that first point not same as second and that second not same as third\r\n        let okay = true;\r\n        for (let j = i; j < i + 3; j += 3) {\r\n            if (position[j] === position[j + 3] &&\r\n                position[j + 1] === position[j + 4] &&\r\n                position[j + 2] === position[j + 5]) {\r\n                okay = false;\r\n            }\r\n        }\r\n        if (okay)\r\n            include.push(i);\r\n    }\r\n    const outPosition = new Float32Array(include.length * 9);\r\n    let outIdx = 0;\r\n    include.forEach(function (i) {\r\n        copyArray(position, outPosition, i * 9, outIdx * 9, 9);\r\n        outIdx++;\r\n    });\r\n    return outPosition;\r\n}\r\nfunction atomTriplePositions(sview, atomTriple) {\r\n    return validatePositions(parseNestedAtoms(sview, atomTriple));\r\n}\r\n/**\r\n * Converts triple positions into data required to build various buffers.\r\n */\r\nfunction getAngleData(position, params = {}) {\r\n    const angleStep = defaults(params.angleStep, Math.PI / 90);\r\n    const n = position.length / 9;\r\n    const angles = new Float32Array(n);\r\n    const labelPosition = new Float32Array(n * 3);\r\n    const labelText = new Array(n);\r\n    const vectorPosition1 = new Float32Array(n * 6); // Two lines per angle\r\n    const vectorPosition2 = new Float32Array(n * 6);\r\n    const arcPositionTmp1 = new Array(n); // Start points for arc lines\r\n    const arcPositionTmp2 = new Array(n); // End points for arc lines\r\n    const sectorPositionTmp = new Array(n); // Triangle points\r\n    let totalSegments = 0;\r\n    // Re-used vectors etc\r\n    const p1 = v3new(); // Positions of points for each angel\r\n    const p2 = v3new();\r\n    const p3 = v3new();\r\n    const v21 = v3new(); // Vectors\r\n    const v23 = v3new();\r\n    const cross = v3new(); // Cross product v21xv23\r\n    const cross2 = v3new(); // In-plane cross product v21 x (v21 x v23)\r\n    const labelTmp = v3new();\r\n    const arcPoint = v3new();\r\n    for (var i = 0; i < n; i++) {\r\n        let p = 9 * i;\r\n        v3fromArray(p1, position, p);\r\n        v3fromArray(p2, position, p + 3);\r\n        v3fromArray(p3, position, p + 6);\r\n        let v = 6 * i;\r\n        v3toArray(p1, vectorPosition1, v);\r\n        v3toArray(p2, vectorPosition2, v);\r\n        v3toArray(p2, vectorPosition1, v + 3);\r\n        v3toArray(p3, vectorPosition2, v + 3);\r\n        v3sub(v21, p1, p2);\r\n        v3sub(v23, p3, p2);\r\n        v3normalize(v21, v21); // validatePositions ensures valid\r\n        v3normalize(v23, v23);\r\n        v3cross(cross, v21, v23);\r\n        const crossLength = v3length(cross);\r\n        const dot = v3dot(v21, v23);\r\n        const angle = angles[i] = Math.atan2(crossLength, dot);\r\n        labelText[i] = (RAD2DEG * angle).toFixed(1) + String.fromCharCode(0x00B0);\r\n        if (v3length(cross) === 0.0) {\r\n            // Angle exactly 0/180, pick an arbitrary direction\r\n            cross[0] = 1.0;\r\n            cross[1] = 0.0;\r\n            cross[2] = 0.0;\r\n        }\r\n        v3cross(cross2, cross, v21);\r\n        v3normalize(cross2, cross2);\r\n        calcArcPoint(labelTmp, p2, v21, cross2, angle / 2.0);\r\n        // TODO: Scale label position?\r\n        v3toArray(labelTmp, labelPosition, 3 * i);\r\n        // Build the arc and sector\r\n        const nSegments = Math.ceil(angle / angleStep);\r\n        const sectorVertices = new Float32Array(nSegments * 9);\r\n        sectorPositionTmp[i] = sectorVertices;\r\n        const arcVertices1 = new Float32Array(nSegments * 3);\r\n        const arcVertices2 = new Float32Array(nSegments * 3);\r\n        arcPositionTmp1[i] = arcVertices1;\r\n        arcPositionTmp2[i] = arcVertices2;\r\n        v3add(arcPoint, p2, v21); // Our initial arc point\r\n        const appendArcSection = function (a, j) {\r\n            const si = j * 9;\r\n            const ai = j * 3;\r\n            v3toArray(p2, sectorVertices, si);\r\n            v3toArray(arcPoint, sectorVertices, si + 3);\r\n            v3toArray(arcPoint, arcVertices1, ai);\r\n            calcArcPoint(arcPoint, p2, v21, cross2, a);\r\n            v3toArray(arcPoint, sectorVertices, si + 6);\r\n            v3toArray(arcPoint, arcVertices2, ai);\r\n        };\r\n        let j = 0;\r\n        for (let a = angleStep; a < angle; a += angleStep) {\r\n            appendArcSection(a, j);\r\n            j++;\r\n        }\r\n        appendArcSection(angle, j);\r\n        totalSegments += nSegments;\r\n    }\r\n    // Flatten nested arrays of arc/segment points\r\n    const arcSize = totalSegments * 3;\r\n    const sectorSize = totalSegments * 9;\r\n    const arcPosition1 = new Float32Array(arcSize);\r\n    const arcPosition2 = new Float32Array(arcSize);\r\n    const sectorPosition = new Float32Array(sectorSize);\r\n    let sectorOffset = 0;\r\n    let arcOffset = 0;\r\n    for (let i = 0; i < n; i++) {\r\n        const ap1 = arcPositionTmp1[i];\r\n        const ap2 = arcPositionTmp2[i];\r\n        copyArray(ap1, arcPosition1, 0, arcOffset, ap1.length);\r\n        copyArray(ap2, arcPosition2, 0, arcOffset, ap2.length);\r\n        arcOffset += ap1.length; // === ap2.length\r\n        const sp = sectorPositionTmp[i];\r\n        copyArray(sp, sectorPosition, 0, sectorOffset, sp.length);\r\n        sectorOffset += sp.length;\r\n    }\r\n    return {\r\n        labelPosition,\r\n        labelText,\r\n        vectorPosition1,\r\n        vectorPosition2,\r\n        arcPosition1,\r\n        arcPosition2,\r\n        sectorPosition\r\n    };\r\n}\r\nRepresentationRegistry.add('angle', AngleRepresentation);\r\nexport default AngleRepresentation;\r\n//# sourceMappingURL=angle-representation.js.map","/**\r\n * @file Axes Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Color, Vector3 } from 'three';\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { AxesPicker } from '../utils/picker.js';\r\nimport { uniformArray, uniformArray3 } from '../math/array-utils.js';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport SphereBuffer from '../buffer/sphere-buffer.js';\r\nimport CylinderBuffer from '../buffer/cylinder-buffer.js';\r\n/**\r\n * Axes representation. Show principal axes and/or a box aligned with them\r\n * that fits the structure or selection.\r\n *\r\n * __Name:__ _axes_\r\n *\r\n * @example\r\n * stage.loadFile( \"rcsb://3pqr\", {\r\n *     assembly: \"BU1\"\r\n * } ).then( function( o ){\r\n *     o.addRepresentation( \"cartoon\" );\r\n *     o.addRepresentation( \"axes\", {\r\n *         sele: \"RET\", showAxes: false, showBox: true, radius: 0.2\r\n *     } );\r\n *     o.addRepresentation( \"ball+stick\", { sele: \"RET\" } );\r\n *     o.addRepresentation( \"axes\", {\r\n *         sele: \":B and backbone\", showAxes: false, showBox: true, radius: 0.2\r\n *     } );\r\n *     stage.autoView();\r\n *     var pa = o.structure.getPrincipalAxes();\r\n *     stage.animationControls.rotate( pa.getRotationQuaternion(), 1500 );\r\n * } );\r\n */\r\nclass AxesRepresentation extends StructureRepresentation {\r\n    /**\r\n     * @param  {Structure} structure - the structure object\r\n     * @param  {Viewer} viewer - the viewer object\r\n     * @param  {StructureRepresentationParameters} params - parameters object\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'axes';\r\n        this.parameters = Object.assign({\r\n            radiusSize: {\r\n                type: 'number', precision: 3, max: 10.0, min: 0.001\r\n            },\r\n            sphereDetail: true,\r\n            radialSegments: true,\r\n            disableImpostor: true,\r\n            showAxes: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            showBox: {\r\n                type: 'boolean', rebuild: true\r\n            }\r\n        }, this.parameters, {\r\n            assembly: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.radiusSize = defaults(p.radiusSize, 0.5);\r\n        p.colorValue = defaults(p.colorValue, 'lightgreen');\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        this.showAxes = defaults(p.showAxes, true);\r\n        this.showBox = defaults(p.showBox, false);\r\n        super.init(p);\r\n    }\r\n    getPrincipalAxes() {\r\n        let selection;\r\n        const assembly = this.getAssembly();\r\n        if (assembly) {\r\n            selection = assembly.partList[0].getSelection();\r\n        }\r\n        return this.structureView.getPrincipalAxes(selection);\r\n    }\r\n    getAxesData(sview) {\r\n        const pa = this.getPrincipalAxes();\r\n        const c = new Color(this.colorValue);\r\n        let vn = 0;\r\n        let en = 0;\r\n        if (this.showAxes) {\r\n            vn += 6;\r\n            en += 3;\r\n        }\r\n        if (this.showBox) {\r\n            vn += 8;\r\n            en += 12;\r\n        }\r\n        const vertexPosition = new Float32Array(3 * vn);\r\n        const vertexColor = uniformArray3(vn, c.r, c.g, c.b);\r\n        const vertexRadius = uniformArray(vn, this.radiusSize);\r\n        const edgePosition1 = new Float32Array(3 * en);\r\n        const edgePosition2 = new Float32Array(3 * en);\r\n        const edgeColor = uniformArray3(en, c.r, c.g, c.b);\r\n        const edgeRadius = uniformArray(en, this.radiusSize);\r\n        let offset = 0;\r\n        if (this.showAxes) {\r\n            const addAxis = function (v1, v2) {\r\n                v1.toArray(vertexPosition, offset * 2);\r\n                v2.toArray(vertexPosition, offset * 2 + 3);\r\n                v1.toArray(edgePosition1, offset);\r\n                v2.toArray(edgePosition2, offset);\r\n                offset += 3;\r\n            };\r\n            addAxis(pa.begA, pa.endA);\r\n            addAxis(pa.begB, pa.endB);\r\n            addAxis(pa.begC, pa.endC);\r\n        }\r\n        if (this.showBox) {\r\n            const v = new Vector3();\r\n            const { d1a, d2a, d3a, d1b, d2b, d3b } = pa.getProjectedScaleForAtoms(sview);\r\n            // console.log(d1a, d2a, d3a, d1b, d2b, d3b)\r\n            let offset2 = offset * 2;\r\n            const addCorner = function (d1, d2, d3) {\r\n                v.copy(pa.center)\r\n                    .addScaledVector(pa.normVecA, d1)\r\n                    .addScaledVector(pa.normVecB, d2)\r\n                    .addScaledVector(pa.normVecC, d3);\r\n                v.toArray(vertexPosition, offset2);\r\n                offset2 += 3;\r\n            };\r\n            addCorner(d1a, d2a, d3a);\r\n            addCorner(d1a, d2a, d3b);\r\n            addCorner(d1a, d2b, d3b);\r\n            addCorner(d1a, d2b, d3a);\r\n            addCorner(d1b, d2b, d3b);\r\n            addCorner(d1b, d2b, d3a);\r\n            addCorner(d1b, d2a, d3a);\r\n            addCorner(d1b, d2a, d3b);\r\n            let edgeOffset = offset;\r\n            const addEdge = function (a, b) {\r\n                v.fromArray(vertexPosition, offset * 2 + a * 3)\r\n                    .toArray(edgePosition1, edgeOffset);\r\n                v.fromArray(vertexPosition, offset * 2 + b * 3)\r\n                    .toArray(edgePosition2, edgeOffset);\r\n                edgeOffset += 3;\r\n            };\r\n            addEdge(0, 1);\r\n            addEdge(0, 3);\r\n            addEdge(0, 6);\r\n            addEdge(1, 2);\r\n            addEdge(1, 7);\r\n            addEdge(2, 3);\r\n            addEdge(2, 4);\r\n            addEdge(3, 5);\r\n            addEdge(4, 5);\r\n            addEdge(4, 7);\r\n            addEdge(5, 6);\r\n            addEdge(6, 7);\r\n        }\r\n        const picker = new AxesPicker(pa);\r\n        return {\r\n            vertex: {\r\n                position: vertexPosition,\r\n                color: vertexColor,\r\n                radius: vertexRadius,\r\n                picking: picker\r\n            },\r\n            edge: {\r\n                position1: edgePosition1,\r\n                position2: edgePosition2,\r\n                color: edgeColor,\r\n                color2: edgeColor,\r\n                radius: edgeRadius,\r\n                picking: picker\r\n            }\r\n        };\r\n    }\r\n    create() {\r\n        const axesData = this.getAxesData(this.structureView);\r\n        this.sphereBuffer = new SphereBuffer(axesData.vertex, this.getBufferParams({\r\n            sphereDetail: this.sphereDetail,\r\n            disableImpostor: this.disableImpostor,\r\n            dullInterior: true\r\n        }));\r\n        this.cylinderBuffer = new CylinderBuffer(axesData.edge, this.getBufferParams({\r\n            openEnded: true,\r\n            radialSegments: this.radialSegments,\r\n            disableImpostor: this.disableImpostor,\r\n            dullInterior: true\r\n        }));\r\n        this.dataList.push({\r\n            sview: this.structureView,\r\n            bufferList: [this.sphereBuffer, this.cylinderBuffer]\r\n        });\r\n    }\r\n    createData(sview) {\r\n        return;\r\n    }\r\n    updateData(what, data) {\r\n        const axesData = this.getAxesData(data.sview);\r\n        const sphereData = {};\r\n        const cylinderData = {};\r\n        if (!what || what.position) {\r\n            Object.assign(sphereData, {\r\n                position: axesData.vertex.position\r\n            });\r\n            Object.assign(cylinderData, {\r\n                position1: axesData.edge.position1,\r\n                position2: axesData.edge.position2\r\n            });\r\n        }\r\n        if (!what || what.color) {\r\n            Object.assign(sphereData, {\r\n                color: axesData.vertex.color\r\n            });\r\n            Object.assign(cylinderData, {\r\n                color: axesData.edge.color,\r\n                color2: axesData.edge.color\r\n            });\r\n        }\r\n        if (!what || what.radius) {\r\n            Object.assign(sphereData, {\r\n                radius: axesData.vertex.radius\r\n            });\r\n            Object.assign(cylinderData, {\r\n                radius: axesData.edge.radius\r\n            });\r\n        }\r\n        this.sphereBuffer.setAttributes(sphereData);\r\n        this.cylinderBuffer.setAttributes(cylinderData);\r\n    }\r\n}\r\nRepresentationRegistry.add('axes', AxesRepresentation);\r\nexport default AxesRepresentation;\r\n//# sourceMappingURL=axes-representation.js.map","/**\r\n * @file Backbone Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport BallAndStickRepresentation from './ballandstick-representation.js';\r\n/**\r\n * Backbone representation. Show cylinders (or lines) connecting .CA (protein)\r\n * or .C4'/.C3' (RNA/DNA) of polymers.\r\n *\r\n * __Name:__ _backbone_\r\n *\r\n * @example\r\n * stage.loadFile( \"rcsb://1sfi\" ).then( function( o ){\r\n *     o.addRepresentation( \"backbone\" );\r\n *     o.autoView();\r\n * } );\r\n */\r\nclass BackboneRepresentation extends BallAndStickRepresentation {\r\n    /**\r\n     * @param  {Structure} structure - the structure object\r\n     * @param  {Viewer} viewer - the viewer object\r\n     * @param  {BallAndStickRepresentationParameters} params - parameters object\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'backbone';\r\n        this.parameters = Object.assign({}, this.parameters, {\r\n            multipleBond: null,\r\n            bondSpacing: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.aspectRatio = defaults(p.aspectRatio, 1.0);\r\n        p.radiusSize = defaults(p.radiusSize, 0.25);\r\n        super.init(p);\r\n    }\r\n    getAtomRadius(atom) {\r\n        return atom.isTrace() ? super.getAtomRadius(atom) : 0;\r\n    }\r\n    getAtomData(sview, what, params) {\r\n        return sview.getBackboneAtomData(this.getAtomParams(what, params));\r\n    }\r\n    getBondData(sview, what, params) {\r\n        return sview.getBackboneBondData(this.getBondParams(what, params));\r\n    }\r\n}\r\nRepresentationRegistry.add('backbone', BackboneRepresentation);\r\nexport default BackboneRepresentation;\r\n//# sourceMappingURL=backbone-representation.js.map","/**\r\n * @file Base Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport BallAndStickRepresentation from './ballandstick-representation.js';\r\n/**\r\n * Base representation. Show cylinders for RNA/DNA ladders.\r\n *\r\n * __Name:__ _base_\r\n *\r\n * @example\r\n * stage.loadFile( \"rcsb://1d66\" ).then( function( o ){\r\n *     o.addRepresentation( \"cartoon\", { sele: \"nucleic\" } );\r\n *     o.addRepresentation( \"base\", { color: \"resname\" } );\r\n *     o.autoView( \"nucleic\" );\r\n * } );\r\n */\r\nclass BaseRepresentation extends BallAndStickRepresentation {\r\n    /**\r\n     * @param  {Structure} structure - the structure object\r\n     * @param  {Viewer} viewer - the viewer object\r\n     * @param  {BallAndStickRepresentationParameters} params - parameters object\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'base';\r\n        this.parameters = Object.assign({}, this.parameters, {\r\n            multipleBond: null,\r\n            bondSpacing: null\r\n        });\r\n    }\r\n    init(params) {\r\n        let p = params || {};\r\n        p.aspectRatio = defaults(p.aspectRatio, 1.0);\r\n        p.radiusSize = defaults(p.radiusSize, 0.3);\r\n        super.init(p);\r\n    }\r\n    getAtomData(sview, what, params) {\r\n        return sview.getRungAtomData(this.getAtomParams(what, params));\r\n    }\r\n    getBondData(sview, what, params) {\r\n        let p = this.getBondParams(what, params);\r\n        Object.assign(p.colorParams, { rung: true });\r\n        return sview.getRungBondData(p);\r\n    }\r\n}\r\nRepresentationRegistry.add('base', BaseRepresentation);\r\nexport default BaseRepresentation;\r\n//# sourceMappingURL=base-representation.js.map","/**\r\n * @file Contact Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport { RepresentationRegistry } from '../globals';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport { calculateContacts, getContactData, getLabelData } from '../chemistry/interactions/contact';\r\nimport CylinderBuffer from '../buffer/cylinder-buffer.js';\r\nimport TextBuffer from '../buffer/text-buffer.js';\r\nimport { getFixedCountDashData } from '../geometry/dash';\r\n/**\r\n * Contact representation.\r\n */\r\nclass ContactRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'contact';\r\n        this.parameters = Object.assign({\r\n            hydrogenBond: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            weakHydrogenBond: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            waterHydrogenBond: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            backboneHydrogenBond: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            hydrophobic: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            halogenBond: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            ionicInteraction: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            metalCoordination: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            cationPi: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            piStacking: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            filterSele: {\r\n                type: 'text', rebuild: true\r\n            },\r\n            labelVisible: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            labelFixedSize: {\r\n                type: 'boolean', buffer: 'fixedSize'\r\n            },\r\n            labelSize: {\r\n                type: 'number', precision: 3, max: 10.0, min: 0.001, rebuild: true\r\n            },\r\n            labelUnit: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: { '': '', angstrom: 'angstrom', nm: 'nm' }\r\n            },\r\n            maxHydrophobicDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxHbondDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxHbondSulfurDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxHbondAccAngle: {\r\n                type: 'integer', max: 180, min: 0, rebuild: true\r\n            },\r\n            maxHbondDonAngle: {\r\n                type: 'integer', max: 180, min: 0, rebuild: true\r\n            },\r\n            maxHbondAccPlaneAngle: {\r\n                type: 'integer', max: 90, min: 0, rebuild: true\r\n            },\r\n            maxHbondDonPlaneAngle: {\r\n                type: 'integer', max: 90, min: 0, rebuild: true\r\n            },\r\n            maxPiStackingDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxPiStackingOffset: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxPiStackingAngle: {\r\n                type: 'integer', max: 180, min: 0, rebuild: true\r\n            },\r\n            maxCationPiDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxCationPiOffset: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxIonicDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxHalogenBondDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            maxHalogenBondAngle: {\r\n                type: 'integer', max: 180, min: 0, rebuild: true\r\n            },\r\n            maxMetalDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0.1, rebuild: true\r\n            },\r\n            refineSaltBridges: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            masterModelIndex: {\r\n                type: 'integer', max: 1000, min: -1, rebuild: true\r\n            },\r\n            lineOfSightDistFactor: {\r\n                type: 'number', precision: 1, max: 10, min: 0.0, rebuild: true\r\n            },\r\n            radialSegments: true,\r\n            disableImpostor: true\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.radiusSize = defaults(p.radiusSize, 0.05);\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        this.hydrogenBond = defaults(p.hydrogenBond, true);\r\n        this.weakHydrogenBond = defaults(p.weakHydrogenBond, false);\r\n        this.waterHydrogenBond = defaults(p.waterHydrogenBond, false);\r\n        this.backboneHydrogenBond = defaults(p.backboneHydrogenBond, false);\r\n        this.hydrophobic = defaults(p.hydrophobic, false);\r\n        this.halogenBond = defaults(p.halogenBond, true);\r\n        this.ionicInteraction = defaults(p.ionicInteraction, true);\r\n        this.metalCoordination = defaults(p.metalCoordination, true);\r\n        this.cationPi = defaults(p.cationPi, true);\r\n        this.piStacking = defaults(p.piStacking, true);\r\n        this.filterSele = defaults(p.filterSele, '');\r\n        this.labelVisible = defaults(p.labelVisible, false);\r\n        this.labelFixedSize = defaults(p.labelFixedSize, false);\r\n        this.labelSize = defaults(p.labelSize, 2.0);\r\n        this.labelUnit = defaults(p.labelUnit, '');\r\n        this.maxHydrophobicDist = defaults(p.maxHydrophobicDist, 4.0);\r\n        this.maxHbondDist = defaults(p.maxHbondDist, 3.5);\r\n        this.maxHbondSulfurDist = defaults(p.maxHbondSulfurDist, 4.1);\r\n        this.maxHbondAccAngle = defaults(p.maxHbondAccAngle, 45);\r\n        this.maxHbondDonAngle = defaults(p.maxHbondDonAngle, 45);\r\n        this.maxHbondAccPlaneAngle = defaults(p.maxHbondAccPlaneAngle, 90);\r\n        this.maxHbondDonPlaneAngle = defaults(p.maxHbondDonPlaneAngle, 30);\r\n        this.maxPiStackingDist = defaults(p.maxPiStackingDist, 5.5);\r\n        this.maxPiStackingOffset = defaults(p.maxPiStackingOffset, 2.0);\r\n        this.maxPiStackingAngle = defaults(p.maxPiStackingAngle, 30);\r\n        this.maxCationPiDist = defaults(p.maxCationPiDist, 6.0);\r\n        this.maxCationPiOffset = defaults(p.maxCationPiOffset, 2.0);\r\n        this.maxIonicDist = defaults(p.maxIonicDist, 5.0);\r\n        this.maxHalogenBondDist = defaults(p.maxHalogenBondDist, 3.5);\r\n        this.maxHalogenBondAngle = defaults(p.maxHalogenBondAngle, 30);\r\n        this.maxMetalDist = defaults(p.maxMetalDist, 3.0);\r\n        this.refineSaltBridges = defaults(p.refineSaltBridges, true);\r\n        this.masterModelIndex = defaults(p.masterModelIndex, -1);\r\n        this.lineOfSightDistFactor = defaults(p.lineOfSightDistFactor, 1.0);\r\n        super.init(p);\r\n    }\r\n    getAtomRadius() {\r\n        return 0;\r\n    }\r\n    getContactData(sview) {\r\n        const params = {\r\n            maxHydrophobicDist: this.maxHydrophobicDist,\r\n            maxHbondDist: this.maxHbondDist,\r\n            maxHbondSulfurDist: this.maxHbondSulfurDist,\r\n            maxHbondAccAngle: this.maxHbondAccAngle,\r\n            maxHbondDonAngle: this.maxHbondDonAngle,\r\n            maxHbondAccPlaneAngle: this.maxHbondAccPlaneAngle,\r\n            maxHbondDonPlaneAngle: this.maxHbondDonPlaneAngle,\r\n            maxPiStackingDist: this.maxPiStackingDist,\r\n            maxPiStackingOffset: this.maxPiStackingOffset,\r\n            maxPiStackingAngle: this.maxPiStackingAngle,\r\n            maxCationPiDist: this.maxCationPiDist,\r\n            maxCationPiOffset: this.maxCationPiOffset,\r\n            maxIonicDist: this.maxIonicDist,\r\n            maxHalogenBondDist: this.maxHalogenBondDist,\r\n            maxHalogenBondAngle: this.maxHalogenBondAngle,\r\n            maxMetalDist: this.maxMetalDist,\r\n            refineSaltBridges: this.refineSaltBridges,\r\n            masterModelIndex: this.masterModelIndex,\r\n            lineOfSightDistFactor: this.lineOfSightDistFactor\r\n        };\r\n        const dataParams = {\r\n            hydrogenBond: this.hydrogenBond,\r\n            weakHydrogenBond: this.weakHydrogenBond,\r\n            waterHydrogenBond: this.waterHydrogenBond,\r\n            backboneHydrogenBond: this.backboneHydrogenBond,\r\n            hydrophobic: this.hydrophobic,\r\n            halogenBond: this.halogenBond,\r\n            ionicInteraction: this.ionicInteraction,\r\n            metalCoordination: this.metalCoordination,\r\n            cationPi: this.cationPi,\r\n            piStacking: this.piStacking,\r\n            radius: this.radiusSize * this.radiusScale,\r\n            filterSele: this.filterSele\r\n        };\r\n        const contacts = calculateContacts(sview, params);\r\n        return getContactData(contacts, sview, dataParams);\r\n    }\r\n    createData(sview) {\r\n        const contactData = this.getContactData(sview);\r\n        const bufferList = [\r\n            new CylinderBuffer(getFixedCountDashData(contactData), this.getBufferParams({\r\n                sphereDetail: 1,\r\n                dullInterior: true,\r\n                disableImpostor: this.disableImpostor\r\n            }))\r\n        ];\r\n        if (this.labelVisible) {\r\n            const labelParams = {\r\n                size: this.labelSize,\r\n                unit: this.labelUnit\r\n            };\r\n            bufferList.push(new TextBuffer(getLabelData(contactData, labelParams), this.getBufferParams({ fixedSize: this.labelFixedSize })));\r\n        }\r\n        return { bufferList };\r\n    }\r\n}\r\nRepresentationRegistry.add('contact', ContactRepresentation);\r\nexport default ContactRepresentation;\r\n//# sourceMappingURL=contact-representation.js.map","/**\r\n * @file Dihedral Representation\r\n * @author Fred Ludlow <fred.ludlow@gmail.com>\r\n * @private\r\n */\r\nimport { Color } from 'three';\r\nimport { RepresentationRegistry } from '../globals';\r\nimport MeasurementRepresentation, { calcArcPoint, parseNestedAtoms } from './measurement-representation';\r\nimport { defaults } from '../utils';\r\nimport MeshBuffer from '../buffer/mesh-buffer';\r\nimport TextBuffer from '../buffer/text-buffer';\r\nimport WideLineBuffer from '../buffer/wideline-buffer';\r\nimport { copyArray, uniformArray, uniformArray3 } from '../math/array-utils';\r\nimport { v3add, v3cross, v3dot, v3multiplyScalar, v3fromArray, v3length, v3negate, v3new, v3normalize, v3sub, v3toArray } from '../math/vector-utils';\r\nimport { RAD2DEG } from '../math/math-constants';\r\nimport { getFixedLengthWrappedDashData } from '../geometry/dash';\r\n/**\r\n * Dihedral representation object\r\n *\r\n * Reperesentation consists of three parts, visibility can be set for each\r\n * label - text label indicating dihedral angle\r\n * line - line indicating four positions that define the dihedral\r\n * sector - filled arc section\r\n *\r\n * @param {Structure} structure - the structure to measure angles in\r\n * @param {Viewer} viewer - a viewer object\r\n * @param {AngleRepresentationParameters} params - angle representation parameters\r\n */\r\nclass DihedralRepresentation extends MeasurementRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'dihedral';\r\n        this.parameters = Object.assign({\r\n            atomQuad: {\r\n                type: 'hidden', rebuild: true\r\n            },\r\n            extendLine: {\r\n                type: 'boolean', rebuild: true, default: true\r\n            },\r\n            lineVisible: {\r\n                type: 'boolean', default: true\r\n            },\r\n            planeVisible: {\r\n                type: 'boolean', default: true\r\n            },\r\n            sectorVisible: {\r\n                type: 'boolean', default: true\r\n            }\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.side = defaults(p.side, 'double');\r\n        p.opacity = defaults(p.opacity, 0.5);\r\n        this.atomQuad = defaults(p.atomQuad, []);\r\n        this.extendLine = defaults(p.extendLine, true);\r\n        this.lineVisible = defaults(p.lineVisible, true);\r\n        this.planeVisible = defaults(p.planeVisible, true);\r\n        this.sectorVisible = defaults(p.sectorVisible, true);\r\n        super.init(p);\r\n    }\r\n    createData(sview) {\r\n        if (!sview.atomCount || !this.atomQuad.length)\r\n            return;\r\n        const atomPosition = parseNestedAtoms(sview, this.atomQuad);\r\n        const dihedralData = getDihedralData(atomPosition, {\r\n            extendLine: this.extendLine\r\n        });\r\n        const n = this.n = dihedralData.labelText.length;\r\n        const labelColor = new Color(this.labelColor);\r\n        this.textBuffer = new TextBuffer({\r\n            position: dihedralData.labelPosition,\r\n            size: uniformArray(n, this.labelSize),\r\n            color: uniformArray3(n, labelColor.r, labelColor.g, labelColor.b),\r\n            text: dihedralData.labelText\r\n        }, this.getLabelBufferParams());\r\n        const c = new Color(this.colorValue);\r\n        this.lineLength = dihedralData.linePosition1.length / 3;\r\n        const lineColor = uniformArray3(this.lineLength, c.r, c.g, c.b);\r\n        this.lineBuffer = new WideLineBuffer(getFixedLengthWrappedDashData({\r\n            position1: dihedralData.linePosition1,\r\n            position2: dihedralData.linePosition2,\r\n            color: lineColor,\r\n            color2: lineColor\r\n        }), this.getBufferParams({\r\n            linewidth: this.linewidth,\r\n            visible: this.lineVisible,\r\n            opacity: this.lineOpacity\r\n        }));\r\n        this.planeLength = dihedralData.planePosition.length / 3;\r\n        this.planeBuffer = new MeshBuffer({\r\n            position: dihedralData.planePosition,\r\n            color: uniformArray3(this.planeLength, c.r, c.g, c.b)\r\n        }, this.getBufferParams({\r\n            visible: this.planeVisible\r\n        }));\r\n        this.sectorLength = dihedralData.sectorPosition.length / 3;\r\n        this.sectorBuffer = new MeshBuffer({\r\n            position: dihedralData.sectorPosition,\r\n            color: uniformArray3(this.sectorLength, c.r, c.g, c.b)\r\n        }, this.getBufferParams({\r\n            visible: this.sectorVisible\r\n        }));\r\n        return {\r\n            bufferList: [\r\n                this.textBuffer,\r\n                this.lineBuffer,\r\n                this.planeBuffer,\r\n                this.sectorBuffer\r\n            ]\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        super.updateData(what, data);\r\n        const lineData = {};\r\n        const planeData = {};\r\n        const sectorData = {};\r\n        if (what.color) {\r\n            const c = new Color(this.colorValue);\r\n            Object.assign(lineData, {\r\n                color: uniformArray3(this.lineLength, c.r, c.g, c.b),\r\n                color2: uniformArray3(this.lineLength, c.r, c.g, c.b)\r\n            });\r\n            Object.assign(planeData, {\r\n                color: uniformArray3(this.planeLength, c.r, c.g, c.b)\r\n            });\r\n            Object.assign(sectorData, {\r\n                color: uniformArray3(this.sectorLength, c.r, c.g, c.b)\r\n            });\r\n        }\r\n        this.lineBuffer.setAttributes(lineData);\r\n        this.planeBuffer.setAttributes(planeData);\r\n        this.sectorBuffer.setAttributes(sectorData);\r\n    }\r\n    setParameters(params) {\r\n        var rebuild = false;\r\n        var what = {};\r\n        super.setParameters(params, what, rebuild);\r\n        if (params && (params.lineVisible !== undefined ||\r\n            params.sectorVisible !== undefined ||\r\n            params.planeVisible !== undefined)) {\r\n            this.setVisibility(this.visible);\r\n        }\r\n        if (params && params.lineOpacity) {\r\n            this.lineBuffer.setParameters({ opacity: params.lineOpacity });\r\n        }\r\n        if (params && params.opacity !== undefined) {\r\n            this.lineBuffer.setParameters({ opacity: this.lineOpacity });\r\n        }\r\n        if (params && params.linewidth) {\r\n            this.lineBuffer.setParameters({ linewidth: params.linewidth });\r\n        }\r\n        return this;\r\n    }\r\n    setVisibility(value, noRenderRequest) {\r\n        super.setVisibility(value, true);\r\n        if (this.lineBuffer) {\r\n            this.lineBuffer.setVisibility(this.lineVisible && this.visible);\r\n        }\r\n        if (this.planeBuffer) {\r\n            this.planeBuffer.setVisibility(this.planeVisible && this.visible);\r\n        }\r\n        if (this.sectorBuffer) {\r\n            this.sectorBuffer.setVisibility(this.sectorVisible && this.visible);\r\n        }\r\n        if (!noRenderRequest)\r\n            this.viewer.requestRender();\r\n        return this;\r\n    }\r\n}\r\n/**\r\n * Build the data required to create {Buffer} objects, given positions\r\n * @param  {Float32Array} atomPosition 3*4*nDihedral array of coordinates\r\n * @return {Object}              Arrays for building buffers\r\n */\r\nfunction getDihedralData(position, params = {}) {\r\n    const angleStep = defaults(params.angleStep, Math.PI / 90);\r\n    const nPos = position.length;\r\n    const n = position.length / 12;\r\n    const angles = new Float32Array(n);\r\n    const labelPosition = new Float32Array(n * 3);\r\n    const labelText = new Array(n);\r\n    // Temporary arrays as don't know output length yet\r\n    const lineTmp1 = new Array(n);\r\n    const lineTmp2 = new Array(n);\r\n    const sectorTmp = new Array(n);\r\n    const planeTmp = new Array(n);\r\n    // Eventual sizes of output arrays\r\n    let totalLines = 0;\r\n    let totalSegments = 0;\r\n    let totalPlanes = 0;\r\n    const p1 = v3new();\r\n    const p2 = v3new();\r\n    const p3 = v3new();\r\n    const p4 = v3new();\r\n    const v21 = v3new();\r\n    const v23 = v3new();\r\n    const v34 = v3new();\r\n    const tmp = v3new();\r\n    const mid = v3new();\r\n    const inPlane1 = v3new();\r\n    const inPlane2 = v3new();\r\n    const start = v3new();\r\n    const end = v3new();\r\n    const cross = v3new();\r\n    const arcPoint = v3new();\r\n    let i = 0; // Actual output index (after skipping inappropriate)\r\n    for (var p = 0; p < nPos; p += 12) {\r\n        // Set Positions\r\n        v3fromArray(p1, position, p);\r\n        v3fromArray(p2, position, p + 3);\r\n        v3fromArray(p3, position, p + 6);\r\n        v3fromArray(p4, position, p + 9);\r\n        // Vectors between points\r\n        v3sub(v21, p1, p2);\r\n        v3sub(v23, p3, p2);\r\n        if (v3length(v23) === 0.0) {\r\n            continue; // Can't define axis\r\n        }\r\n        v3sub(v34, p4, p3);\r\n        v3multiplyScalar(tmp, v23, 0.5);\r\n        v3add(mid, p2, tmp);\r\n        v3normalize(v21, v21);\r\n        v3normalize(v23, v23);\r\n        v3normalize(v34, v34);\r\n        // Which side of plane are p1, p4 (are we measuring something that\r\n        // looks more like an improper? e.g. C, CA, CB, N)\r\n        v3sub(tmp, p1, mid);\r\n        const improperStart = v3dot(tmp, v23) > 0.0;\r\n        v3sub(tmp, p4, mid);\r\n        const improperEnd = v3dot(tmp, v23) < 0.0;\r\n        // Calculate vectors perp to v23 (lying in plane (1,2,3) and (2,3,4))\r\n        v3multiplyScalar(tmp, v23, v3dot(v23, v21));\r\n        v3sub(inPlane1, v21, tmp);\r\n        v3multiplyScalar(tmp, v23, v3dot(v23, v34));\r\n        v3sub(inPlane2, v34, tmp);\r\n        if (v3length(inPlane1) === 0.0 || v3length(inPlane2) === 0.0) {\r\n            continue; // Indeterminate angle\r\n        }\r\n        v3normalize(inPlane1, inPlane1);\r\n        v3normalize(inPlane2, inPlane2);\r\n        // Can use acos as normalized and non-zero\r\n        const angle = angles[i] = Math.acos(v3dot(inPlane1, inPlane2));\r\n        labelText[i] = (RAD2DEG * angle).toFixed(1) + String.fromCharCode(0x00B0);\r\n        v3cross(cross, inPlane1, v23);\r\n        v3normalize(cross, cross);\r\n        if (v3dot(cross, inPlane2) < 0.0) {\r\n            v3negate(cross, cross); // Ensure cp faces correct way\r\n        }\r\n        calcArcPoint(tmp, mid, inPlane1, cross, angle / 2.0);\r\n        v3toArray(tmp, labelPosition, 3 * i);\r\n        const nSegments = Math.ceil(angle / angleStep);\r\n        // For extended display mode, 4 straight lines plus arc/segment edge\r\n        // For non-extended, 2 straight lines plus segment edge\r\n        const nLines = nSegments + ((params.extendLine) ? 4 : 2);\r\n        // Don't draw planes if not extending lines\r\n        const nPlanes = params.extendLine ? 36 : 0;\r\n        const line1 = new Float32Array(nLines * 3);\r\n        const line2 = new Float32Array(nLines * 3);\r\n        const sector = new Float32Array(nSegments * 9);\r\n        // 2 planes, 2 triangles each per dihedral (2*2*9)\r\n        const plane = new Float32Array(nPlanes);\r\n        lineTmp1[i] = line1;\r\n        lineTmp2[i] = line2;\r\n        sectorTmp[i] = sector;\r\n        planeTmp[i] = plane;\r\n        // Start points for lines/planes, only required\r\n        // if extending lines\r\n        if (params.extendLine) {\r\n            if (improperStart) { // We'll start on the v3->1 line (tmp)\r\n                v3sub(tmp, p1, p3);\r\n                v3normalize(tmp, tmp);\r\n                v3multiplyScalar(start, tmp, 1.0 / v3dot(inPlane1, tmp));\r\n                v3add(start, start, p3);\r\n            }\r\n            else { // start on the 2->1 line\r\n                v3multiplyScalar(start, v21, 1.0 / v3dot(inPlane1, v21));\r\n                v3add(start, start, p2);\r\n            }\r\n            if (improperEnd) { // Finish on 2->4 line\r\n                v3sub(tmp, p4, p2);\r\n                v3normalize(tmp, tmp);\r\n                v3multiplyScalar(end, tmp, 1.0 / v3dot(inPlane2, tmp));\r\n                v3add(end, end, p2);\r\n            }\r\n            else { // end on the 3->4 line\r\n                v3multiplyScalar(end, v34, 1.0 / v3dot(inPlane2, v34));\r\n                v3add(end, end, p3);\r\n            }\r\n        }\r\n        v3add(arcPoint, mid, inPlane1);\r\n        // index into line1, line2\r\n        let li = 0;\r\n        // If extending lines, there's a bit of stuff to do here\r\n        // figuring out start and end positions\r\n        if (params.extendLine) {\r\n            v3toArray(p1, line1, li);\r\n            v3toArray(start, line2, li);\r\n            li += 3;\r\n            v3toArray(start, line1, li);\r\n            v3toArray(arcPoint, line2, li);\r\n            li += 3;\r\n            // Construct plane at start, if not extening lines\r\n            // this is skipped\r\n            v3toArray(start, plane, 0);\r\n            v3toArray(arcPoint, plane, 3);\r\n            v3toArray(improperStart ? p3 : p2, plane, 6);\r\n            v3toArray(improperStart ? p3 : p2, plane, 9);\r\n            v3toArray(arcPoint, plane, 12);\r\n            v3toArray(mid, plane, 15);\r\n        }\r\n        else {\r\n            // Not extending lines\r\n            v3toArray(mid, line1, li);\r\n            v3toArray(arcPoint, line2, li);\r\n            li += 3;\r\n        }\r\n        const appendArcSection = function (a, j) {\r\n            const si = j * 9;\r\n            v3toArray(mid, sector, si);\r\n            v3toArray(arcPoint, sector, si + 3);\r\n            v3toArray(arcPoint, line1, li);\r\n            calcArcPoint(arcPoint, mid, inPlane1, cross, a);\r\n            v3toArray(arcPoint, sector, si + 6);\r\n            v3toArray(arcPoint, line2, li);\r\n            li += 3;\r\n        };\r\n        let j = 0;\r\n        for (let a = angleStep; a < angle; a += angleStep) {\r\n            appendArcSection(a, j++);\r\n        }\r\n        appendArcSection(angle, j++);\r\n        if (params.extendLine) {\r\n            v3toArray(arcPoint, line1, (nLines - 2) * 3);\r\n            v3toArray(end, line2, (nLines - 2) * 3);\r\n            v3toArray(end, line1, (nLines - 1) * 3);\r\n            v3toArray(p4, line2, (nLines - 1) * 3);\r\n            // Construct plane at end\r\n            v3toArray(end, plane, 18);\r\n            v3toArray(arcPoint, plane, 21);\r\n            v3toArray(improperEnd ? p2 : p3, plane, 24);\r\n            v3toArray(improperEnd ? p2 : p3, plane, 27);\r\n            v3toArray(arcPoint, plane, 30);\r\n            v3toArray(mid, plane, 33);\r\n        }\r\n        else {\r\n            v3toArray(arcPoint, line1, li);\r\n            v3toArray(mid, line2, li);\r\n            li += 3;\r\n        }\r\n        totalLines += nLines * 3;\r\n        totalSegments += nSegments * 9;\r\n        totalPlanes += nPlanes;\r\n        i += 1;\r\n    }\r\n    const nSuccess = i;\r\n    const linePosition1 = new Float32Array(totalLines);\r\n    const linePosition2 = new Float32Array(totalLines);\r\n    const sectorPosition = new Float32Array(totalSegments);\r\n    const planePosition = new Float32Array(totalPlanes);\r\n    let lineOffset = 0;\r\n    let sectorOffset = 0;\r\n    let planeOffset = 0;\r\n    for (let i = 0; i < nSuccess; i++) {\r\n        const lp1 = lineTmp1[i];\r\n        const lp2 = lineTmp2[i];\r\n        const sp = sectorTmp[i];\r\n        const pp = planeTmp[i];\r\n        copyArray(lp1, linePosition1, 0, lineOffset, lp1.length);\r\n        copyArray(lp2, linePosition2, 0, lineOffset, lp2.length);\r\n        copyArray(sp, sectorPosition, 0, sectorOffset, sp.length);\r\n        copyArray(pp, planePosition, 0, planeOffset, pp.length);\r\n        lineOffset += lp1.length;\r\n        sectorOffset += sp.length;\r\n        planeOffset += pp.length;\r\n    }\r\n    return {\r\n        labelPosition: labelPosition.subarray(0, nSuccess * 3),\r\n        labelText: labelText.slice(0, nSuccess),\r\n        linePosition1,\r\n        linePosition2,\r\n        planePosition,\r\n        sectorPosition\r\n    };\r\n}\r\nRepresentationRegistry.add('dihedral', DihedralRepresentation);\r\nexport default DihedralRepresentation;\r\n//# sourceMappingURL=dihedral-representation.js.map","/**\r\n * @file Dihedral Histogram Representation\r\n * @author Rudolfs Petrovs <rudolfs.petrovs@astx.com>\r\n * @private\r\n */\r\nimport { Color } from 'three';\r\nimport { calcArcPoint, parseNestedAtoms } from './measurement-representation';\r\nimport StructureRepresentation from './structure-representation';\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport MeshBuffer from '../buffer/mesh-buffer';\r\nimport WideLineBuffer from '../buffer/wideline-buffer';\r\nimport { copyArray, uniformArray3, arraySum } from '../math/array-utils';\r\nimport { v3add, v3cross, v3dot, v3multiplyScalar, v3fromArray, v3negate, v3new, v3normalize, v3sub, v3toArray, v3length } from '../math/vector-utils';\r\nconst pointLength = 3; // One Point Length (number of coordinates of one point in 3D)\r\nconst pointsInTriangle = 3;\r\nfunction createUpdatedObject(o, updateSource) {\r\n    function hasKey(obj, key) {\r\n        return key in obj;\r\n    }\r\n    const result = Object.assign({}, o); // Shallow copy\r\n    for (const key in result) {\r\n        if (hasKey(result, key) && hasKey(updateSource, key)) {\r\n            result[key] = defaults(updateSource[key], result[key]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction createColorArray(color, arrayLength) {\r\n    const colorValue = new Color(color);\r\n    const targetArray = new Float32Array(arrayLength * 3);\r\n    uniformArray3(arrayLength, colorValue.r, colorValue.g, colorValue.b, targetArray);\r\n    return targetArray;\r\n}\r\n/**\r\n * Dihedral Histogram representation object\r\n *\r\n * Reperesentation consists of several parts:\r\n * opaqueMiddleDisc - opaque disc in the middle of the dihedral between front and back histograms\r\n * frontHistogram - circular histogram from the adjacent bond viewpoint\r\n * backHistogram - circular histogram from the distant bond viewpoint\r\n * histogramBinBorder - lines, which separate histogram bins\r\n * bondArrows - lines, which show the actual angle on the histogram disc\r\n *\r\n * @param {Structure} structure - the structure to measure angles in\r\n * @param {Viewer} viewer - a viewer object\r\n * @param {DihedralHistogramRepresentationParameters} params - Dihedral histogram representation parameters\r\n */\r\nclass DihedralHistogramRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'dihedral-histogram';\r\n        this.parameters = Object.assign({\r\n            histogramsData: {\r\n                type: 'hidden', rebuild: true\r\n            },\r\n            histogramBinBorderVisible: {\r\n                type: 'boolean', default: true\r\n            },\r\n            scaleBinToSectorArea: {\r\n                type: 'boolean',\r\n                rebuild: true,\r\n                default: false\r\n            }\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        const defaultColorData = {\r\n            histogramBinBorderColor: 'grey',\r\n            adjacentBondArrowColor: 'black',\r\n            distantBondArrowColor: 'magenta',\r\n            frontHistogramColor: 'green',\r\n            backHistogramColor: 'blue',\r\n            opaqueMiddleDiscColor: 'white'\r\n        };\r\n        const colorData = createUpdatedObject(defaultColorData, p);\r\n        Object.assign(this, colorData);\r\n        const defaultParameters = {\r\n            histogramsData: [],\r\n            histogramOpacity: 1.0,\r\n            opaqueMiddleDiscVisible: true,\r\n            opaqueMiddleDiscOpacity: 1.0,\r\n            histogramBinBorderVisible: true,\r\n            histogramBinBorderWidth: 1,\r\n            histogramBinBorderOpacity: 0.5,\r\n            bondArrowVisible: true,\r\n            bondArrowWidth: 2,\r\n            bondArrowOpacity: 1.0,\r\n            scaleBinToSectorArea: false,\r\n        };\r\n        const parameters = createUpdatedObject(defaultParameters, p);\r\n        Object.assign(this, parameters);\r\n        this.histogramsData.forEach(x => {\r\n            const specificColorData = createUpdatedObject(colorData, x);\r\n            Object.assign(x, specificColorData);\r\n        });\r\n        p.side = defaults(p.side, 'double');\r\n        p.opacity = defaults(p.opacity, 0.5);\r\n        p.radiusType = defaults(p.radiusType, 'size');\r\n        p.radiusSize = defaults(p.radiusSize, 0.15);\r\n        super.init(p);\r\n    }\r\n    getHistogramBinBorderBufferParameters() {\r\n        return this.getBufferParams({\r\n            linewidth: this.histogramBinBorderWidth,\r\n            visible: this.histogramBinBorderVisible,\r\n            opacity: this.histogramBinBorderOpacity,\r\n        });\r\n    }\r\n    getBondArrowsBufferParameters() {\r\n        return this.getBufferParams({\r\n            linewidth: this.bondArrowWidth,\r\n            visible: this.bondArrowVisible,\r\n            opacity: this.bondArrowOpacity,\r\n        });\r\n    }\r\n    getOpaqueMiddleDiscBufferParameters() {\r\n        return this.getBufferParams({\r\n            visible: this.opaqueMiddleDiscVisible,\r\n            opacity: this.opaqueMiddleDiscOpacity\r\n        });\r\n    }\r\n    getHistogramBufferParameters() {\r\n        return this.getBufferParams({\r\n            visible: true,\r\n            opacity: this.histogramOpacity,\r\n            side: \"double\"\r\n        });\r\n    }\r\n    createData(sview) {\r\n        if (!sview.atomCount || !this.histogramsData.length)\r\n            return;\r\n        this.histogramsData.forEach(x => x.atomPositions = parseNestedAtoms(sview, [x.atomQuad]));\r\n        const scaleData = this.scaleBinToSectorArea ? function (y) { return Math.sqrt(y); } : function (y) { return y; };\r\n        this.histogramsData.forEach(x => x.histogram360Scaled = x.histogram360.map(scaleData));\r\n        function Float32Concat(arrays) {\r\n            const lengths = arrays.map(x => x.length);\r\n            const result = new Float32Array(arraySum(lengths));\r\n            let accumulatedOffset = 0;\r\n            for (let i = 0; i < arrays.length; i++) {\r\n                result.set(arrays[i], accumulatedOffset);\r\n                accumulatedOffset += arrays[i].length;\r\n            }\r\n            return result;\r\n        }\r\n        function createWideLineBuffer(linesList, params) {\r\n            return new WideLineBuffer({\r\n                position1: Float32Concat(linesList.map(x => x.startPoints)),\r\n                position2: Float32Concat(linesList.map(x => x.endPoints)),\r\n                color: Float32Concat(linesList.map(x => x.startColors)),\r\n                color2: Float32Concat(linesList.map(x => x.endColors)),\r\n            }, params);\r\n        }\r\n        function createMeshBuffer(mesh, params) {\r\n            return new MeshBuffer({\r\n                position: Float32Concat(mesh.map(x => x.triangles)),\r\n                color: Float32Concat(mesh.map(x => x.triangleColors))\r\n            }, params);\r\n        }\r\n        const dihedralDataArray = [];\r\n        for (let i = 0; i < this.histogramsData.length; i++) {\r\n            let dihedralData = undefined;\r\n            let currentHistogramData = this.histogramsData[i];\r\n            let currentHistogram360 = currentHistogramData.histogram360;\r\n            if (currentHistogram360.length >= 3) {\r\n                dihedralData = calculateDihedralHistogram(currentHistogramData);\r\n            }\r\n            if (typeof dihedralData === \"undefined\")\r\n                continue;\r\n            dihedralDataArray.push(dihedralData);\r\n        }\r\n        this.frontHistogramBinBordersBuffer = createWideLineBuffer(dihedralDataArray.map(x => x.frontHistogramBinBorders), this.getHistogramBinBorderBufferParameters());\r\n        this.backHistogramBinBordersBuffer = createWideLineBuffer(dihedralDataArray.map(x => x.backHistogramBinBorders), this.getHistogramBinBorderBufferParameters());\r\n        this.adjacentBondArrowsBuffer = createWideLineBuffer(dihedralDataArray.map(x => x.adjacentBondArrows), this.getBondArrowsBufferParameters());\r\n        this.distantBondArrowsBuffer = createWideLineBuffer(dihedralDataArray.map(x => x.distantBondArrows), this.getBondArrowsBufferParameters());\r\n        this.opaqueMiddleDiscBuffer = createMeshBuffer(dihedralDataArray.map(x => x.opaqueMiddleDisc), this.getOpaqueMiddleDiscBufferParameters());\r\n        this.frontHistogramBuffer = createMeshBuffer(dihedralDataArray.map(x => x.frontHistogram), this.getHistogramBufferParameters());\r\n        this.backHistogramBuffer = createMeshBuffer(dihedralDataArray.map(x => x.backHistogram), this.getHistogramBufferParameters());\r\n        return {\r\n            bufferList: [].concat(this.frontHistogramBinBordersBuffer, this.backHistogramBinBordersBuffer, this.adjacentBondArrowsBuffer, this.distantBondArrowsBuffer, this.opaqueMiddleDiscBuffer, this.frontHistogramBuffer, this.backHistogramBuffer)\r\n        };\r\n    }\r\n    setParameters(params) {\r\n        const rebuild = false;\r\n        const what = {};\r\n        super.setParameters(params, what, rebuild);\r\n        if (params && (params.histogramBinBorderVisible !== undefined)) {\r\n            this.setVisibility(this.visible);\r\n        }\r\n        return this;\r\n    }\r\n    setVisibility(value, noRenderRequest) {\r\n        super.setVisibility(value, true);\r\n        if (this.frontHistogramBinBordersBuffer) {\r\n            this.frontHistogramBinBordersBuffer.setVisibility(this.histogramBinBorderVisible);\r\n        }\r\n        if (this.backHistogramBinBordersBuffer) {\r\n            this.backHistogramBinBordersBuffer.setVisibility(this.histogramBinBorderVisible);\r\n        }\r\n        if (!noRenderRequest)\r\n            this.viewer.requestRender();\r\n        return this;\r\n    }\r\n}\r\n/**\r\n * Calculates the data required to create {Buffer} objects for one histogram, given positions\r\n * @param  Float32Array positionOfDihedralAtoms 3*4 array of coordinates\r\n * @param  NumberArray histogram array of coordinates\r\n * @return Arrays for building buffers\r\n */\r\nfunction calculateDihedralHistogram(histogramData) {\r\n    const positionOfDihedralAtoms = histogramData.atomPositions;\r\n    const histogram = histogramData.histogram360Scaled;\r\n    const totalSectorTrianglesInOpaqueMiddleDisc = histogram.length <= 180 ? 360 : histogram.length * 2;\r\n    const frontAndBack = 2;\r\n    const opaqueMiddleDisc = {\r\n        triangles: new Float32Array(totalSectorTrianglesInOpaqueMiddleDisc * pointsInTriangle * pointLength),\r\n        triangleColors: createColorArray(histogramData.opaqueMiddleDiscColor, totalSectorTrianglesInOpaqueMiddleDisc * pointsInTriangle)\r\n    };\r\n    const frontHistogram = {\r\n        triangles: new Float32Array(histogram.length * pointsInTriangle * pointLength),\r\n        triangleColors: createColorArray(histogramData.frontHistogramColor, histogram.length * pointsInTriangle)\r\n    };\r\n    const backHistogram = {\r\n        triangles: new Float32Array(histogram.length * pointsInTriangle * pointLength),\r\n        triangleColors: createColorArray(histogramData.backHistogramColor, histogram.length * pointsInTriangle)\r\n    };\r\n    const frontHistogramBinBorders = {\r\n        startPoints: new Float32Array(histogram.length * pointLength),\r\n        endPoints: new Float32Array(histogram.length * pointLength),\r\n        startColors: createColorArray(histogramData.histogramBinBorderColor, histogram.length),\r\n        endColors: createColorArray(histogramData.histogramBinBorderColor, histogram.length)\r\n    };\r\n    const backHistogramBinBorders = {\r\n        startPoints: new Float32Array(histogram.length * pointLength),\r\n        endPoints: new Float32Array(histogram.length * pointLength),\r\n        startColors: createColorArray(histogramData.histogramBinBorderColor, histogram.length),\r\n        endColors: createColorArray(histogramData.histogramBinBorderColor, histogram.length)\r\n    };\r\n    const adjacentBondArrows = {\r\n        startPoints: new Float32Array(frontAndBack * pointLength),\r\n        endPoints: new Float32Array(frontAndBack * pointLength),\r\n        startColors: createColorArray(histogramData.adjacentBondArrowColor, histogram.length),\r\n        endColors: createColorArray(histogramData.adjacentBondArrowColor, histogram.length)\r\n    };\r\n    const distantBondArrows = {\r\n        startPoints: new Float32Array(frontAndBack * pointLength),\r\n        endPoints: new Float32Array(frontAndBack * pointLength),\r\n        startColors: createColorArray(histogramData.distantBondArrowColor, histogram.length),\r\n        endColors: createColorArray(histogramData.distantBondArrowColor, histogram.length)\r\n    };\r\n    const p1 = v3new();\r\n    const p2 = v3new();\r\n    const p3 = v3new();\r\n    const p4 = v3new();\r\n    const v21 = v3new();\r\n    const v23 = v3new();\r\n    const v32 = v3new();\r\n    const v34 = v3new();\r\n    const mid = v3new();\r\n    const inPlane1 = v3new();\r\n    const inPlane2 = v3new();\r\n    const cross1 = v3new();\r\n    const cross2 = v3new();\r\n    const arcPoint = v3new();\r\n    const tmp = v3new();\r\n    const tmp2 = v3new();\r\n    // Set Atom Coordinates\r\n    const dihedralAtomVectors = [p1, p2, p3, p4];\r\n    for (let i = 0; i < dihedralAtomVectors.length; i++) {\r\n        v3fromArray(dihedralAtomVectors[i], positionOfDihedralAtoms, i * pointLength);\r\n    }\r\n    // Vectors between points\r\n    v3sub(v21, p1, p2);\r\n    v3sub(v23, p3, p2);\r\n    v3sub(v34, p4, p3);\r\n    if (v3length(v23) === 0.0) {\r\n        return; // Can't define axis\r\n    }\r\n    v3multiplyScalar(tmp, v23, 0.5);\r\n    v3add(mid, p2, tmp);\r\n    v3normalize(v21, v21);\r\n    v3normalize(v23, v23);\r\n    v3normalize(v34, v34);\r\n    v3negate(v32, v23);\r\n    // Calculate vectors perp to v23 (lying in plane (1,2,3) and (2,3,4))\r\n    v3multiplyScalar(tmp, v32, v3dot(v32, v21));\r\n    v3sub(inPlane1, v21, tmp);\r\n    v3multiplyScalar(tmp, v23, v3dot(v23, v34));\r\n    v3sub(inPlane2, v34, tmp);\r\n    if (v3length(inPlane1) === 0.0 || v3length(inPlane2) === 0.0) {\r\n        return; // Indeterminate angle\r\n    }\r\n    v3normalize(inPlane1, inPlane1);\r\n    v3normalize(inPlane2, inPlane2);\r\n    // Can use acos as normalized and non-zero\r\n    const absAngle = Math.acos(v3dot(inPlane1, inPlane2));\r\n    v3cross(cross1, v32, inPlane1);\r\n    v3cross(cross2, v23, inPlane2);\r\n    v3normalize(cross1, cross1);\r\n    v3normalize(cross2, cross2);\r\n    let angle = absAngle;\r\n    if (v3dot(cross1, inPlane2) < 0.0) {\r\n        angle = -absAngle;\r\n    }\r\n    v3add(arcPoint, mid, inPlane1);\r\n    // Calculate necessary constants\r\n    const maxHist = Math.max.apply(null, histogram);\r\n    const histBinAngleStep = (Math.PI * 2) / histogram.length;\r\n    function setHistogramBinCoordinates(out, ind, zeroDegreeVector, crossVector, histBinAngleStep) {\r\n        const startOffset = ind * pointsInTriangle * pointLength;\r\n        v3toArray(mid, out, startOffset);\r\n        const scalingFactor = Number(histogram[ind]) / maxHist;\r\n        v3multiplyScalar(tmp, zeroDegreeVector, scalingFactor);\r\n        v3multiplyScalar(tmp2, crossVector, scalingFactor);\r\n        calcArcPoint(arcPoint, mid, tmp, tmp2, ind * histBinAngleStep);\r\n        v3toArray(arcPoint, out, startOffset + 1 * pointLength);\r\n        calcArcPoint(arcPoint, mid, tmp, tmp2, (ind + 1) * histBinAngleStep);\r\n        v3toArray(arcPoint, out, startOffset + 2 * pointLength);\r\n    }\r\n    function setOneSideHistogram(discHistogram, binBorders, ind, zeroDegreeVector, crossVector) {\r\n        // Set Bond Arrows\r\n        copyArray(mid, adjacentBondArrows.startPoints, 0, ind * pointLength, mid.length);\r\n        calcArcPoint(tmp, mid, zeroDegreeVector, crossVector, 0 + histBinAngleStep * 0);\r\n        copyArray(tmp, adjacentBondArrows.endPoints, 0, ind * pointLength, mid.length);\r\n        copyArray(mid, distantBondArrows.startPoints, 0, ind * pointLength, mid.length);\r\n        calcArcPoint(tmp, mid, zeroDegreeVector, crossVector, angle);\r\n        copyArray(tmp, distantBondArrows.endPoints, 0, ind * pointLength, mid.length);\r\n        // Set Histogram Bin Borders\r\n        for (let i = 0; i < histogram.length; i++) {\r\n            copyArray(mid, binBorders.startPoints, 0, i * 3, mid.length);\r\n            calcArcPoint(tmp, mid, zeroDegreeVector, crossVector, 0 + histBinAngleStep * i);\r\n            copyArray(tmp, binBorders.endPoints, 0, i * 3, tmp.length);\r\n        }\r\n        // Set Histogram Bins\r\n        for (let sectionIndex = 0; sectionIndex < histogram.length; sectionIndex++) {\r\n            setHistogramBinCoordinates(discHistogram.triangles, sectionIndex, zeroDegreeVector, crossVector, histBinAngleStep);\r\n        }\r\n    }\r\n    // Opaque disc\r\n    const opaqueCircleSectorAngleStep = Math.PI * 2 / totalSectorTrianglesInOpaqueMiddleDisc;\r\n    for (let sectionIndex = 0; sectionIndex < totalSectorTrianglesInOpaqueMiddleDisc; sectionIndex++) {\r\n        const startOffset = sectionIndex * pointsInTriangle * pointLength;\r\n        v3toArray(mid, opaqueMiddleDisc.triangles, startOffset);\r\n        calcArcPoint(arcPoint, mid, inPlane1, cross1, sectionIndex * opaqueCircleSectorAngleStep);\r\n        v3toArray(arcPoint, opaqueMiddleDisc.triangles, startOffset + 1 * pointLength);\r\n        calcArcPoint(arcPoint, mid, inPlane1, cross1, (sectionIndex + 1) * opaqueCircleSectorAngleStep);\r\n        v3toArray(arcPoint, opaqueMiddleDisc.triangles, startOffset + 2 * pointLength);\r\n    }\r\n    // Front Histogram\r\n    const distanceToOpaqueDisc = 0.01;\r\n    v3multiplyScalar(tmp, v23, -distanceToOpaqueDisc); // Get a vector to move \"mid\" just a bit from opaque disc\r\n    v3add(mid, mid, tmp);\r\n    setOneSideHistogram(frontHistogram, frontHistogramBinBorders, 0, inPlane1, cross1);\r\n    // Back Histogram\r\n    v3multiplyScalar(tmp, v23, 2 * distanceToOpaqueDisc); // Get a vector to move \"mid\" back and plus just a bit from opaque disc the other way\r\n    v3add(mid, mid, tmp);\r\n    setOneSideHistogram(backHistogram, backHistogramBinBorders, 1, inPlane2, cross2);\r\n    return {\r\n        opaqueMiddleDisc,\r\n        frontHistogram,\r\n        backHistogram,\r\n        frontHistogramBinBorders,\r\n        backHistogramBinBorders,\r\n        adjacentBondArrows,\r\n        distantBondArrows\r\n    };\r\n}\r\nRepresentationRegistry.add('dihedral-histogram', DihedralHistogramRepresentation);\r\nexport default DihedralHistogramRepresentation;\r\n//# sourceMappingURL=dihedral-histogram-representation.js.map","/**\r\n * @file Distance Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @author Fred Ludlow <fred.ludlow@gmail.com>\r\n * @private\r\n */\r\nimport { Color } from 'three';\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { DistancePicker } from '../utils/picker';\r\nimport { uniformArray, uniformArray3 } from '../math/array-utils';\r\nimport BitArray from '../utils/bitarray';\r\nimport MeasurementRepresentation from './measurement-representation';\r\nimport Selection from '../selection/selection';\r\nimport BondStore from '../store/bond-store';\r\nimport TextBuffer from '../buffer/text-buffer';\r\nimport WideLineBuffer from '../buffer/wideline-buffer';\r\nimport CylinderBuffer from '../buffer/cylinder-buffer';\r\nimport { getFixedLengthDashData } from '../geometry/dash';\r\n/**\r\n * Distance representation\r\n */\r\nclass DistanceRepresentation extends MeasurementRepresentation {\r\n    /**\r\n     * Create Distance representation object\r\n     * @example\r\n     * stage.loadFile( \"rcsb://1crn\" ).then( function( o ){\r\n     *     o.addRepresentation( \"cartoon\" );\r\n     *     // either give selections (uses first selected atom) ...\r\n     *     var atomPair = [ [ \"1.CA\", \"4.CA\" ], [ \"7.CA\", \"13.CA\" ] ];\r\n     *     // or atom indices\r\n     *     var atomPair = [ [ 8, 28 ], [ 173, 121 ] ];\r\n     *     o.addRepresentation( \"distance\", { atomPair: atomPair } );\r\n     *     stage.autoView();\r\n     * } );\r\n     * @param {Structure} structure - the structure to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {DistanceRepresentationParameters} params - distance representation parameters\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'distance';\r\n        this.parameters = Object.assign({\r\n            radialSegments: true,\r\n            openEnded: true,\r\n            disableImpostor: true,\r\n            labelUnit: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: { '': '', angstrom: 'angstrom', nm: 'nm' }\r\n            },\r\n            useCylinder: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            atomPair: {\r\n                type: 'hidden', rebuild: true\r\n            }\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.linewidth = defaults(p.linewidth, 5.0);\r\n        p.radiusType = defaults(p.radiusType, 'size');\r\n        p.radiusSize = defaults(p.radiusSize, 0.2);\r\n        this.labelUnit = defaults(p.labelUnit, '');\r\n        this.useCylinder = defaults(p.useCylinder, false);\r\n        this.atomPair = defaults(p.atomPair, []);\r\n        super.init(p);\r\n    }\r\n    getDistanceData(sview, atomPair) {\r\n        let n = atomPair.length;\r\n        const text = new Array(n);\r\n        let position = new Float32Array(n * 3);\r\n        const sele1 = new Selection();\r\n        const sele2 = new Selection();\r\n        const bondStore = new BondStore();\r\n        const ap1 = sview.getAtomProxy();\r\n        const ap2 = sview.getAtomProxy();\r\n        let j = 0; // Skipped pairs\r\n        const selected = sview.getAtomSet();\r\n        atomPair.forEach((pair, i) => {\r\n            let v1 = pair[0];\r\n            let v2 = pair[1];\r\n            if (typeof (v1) === 'number' && Number.isInteger(v1) && typeof (v2) === 'number' && Number.isInteger(v2)) {\r\n                if (selected.get(v1) && selected.get(v2)) {\r\n                    ap1.index = v1;\r\n                    ap2.index = v2;\r\n                }\r\n                else {\r\n                    j += 1;\r\n                    return;\r\n                }\r\n            }\r\n            else {\r\n                sele1.setString(v1);\r\n                sele2.setString(v2);\r\n                var atomIndices1 = sview.getAtomIndices(sele1);\r\n                var atomIndices2 = sview.getAtomIndices(sele2);\r\n                if (atomIndices1.length && atomIndices2.length) {\r\n                    ap1.index = atomIndices1[0];\r\n                    ap2.index = atomIndices2[0];\r\n                }\r\n                else {\r\n                    j += 1;\r\n                    return;\r\n                }\r\n            }\r\n            bondStore.addBond(ap1, ap2, 1);\r\n            i -= j;\r\n            var d = ap1.distanceTo(ap2);\r\n            switch (this.labelUnit) {\r\n                case 'angstrom':\r\n                    text[i] = d.toFixed(2) + ' ' + String.fromCharCode(0x212B);\r\n                    break;\r\n                case 'nm':\r\n                    text[i] = (d / 10).toFixed(2) + ' nm';\r\n                    break;\r\n                default:\r\n                    text[i] = d.toFixed(2);\r\n                    break;\r\n            }\r\n            var i3 = i * 3;\r\n            position[i3 + 0] = (ap1.x + ap2.x) / 2;\r\n            position[i3 + 1] = (ap1.y + ap2.y) / 2;\r\n            position[i3 + 2] = (ap1.z + ap2.z) / 2;\r\n        });\r\n        if (j > 0) {\r\n            n -= j;\r\n            position = position.subarray(0, n * 3);\r\n        }\r\n        var bondSet = new BitArray(bondStore.count, true);\r\n        return {\r\n            text: text,\r\n            position: position,\r\n            bondSet: bondSet,\r\n            bondStore: bondStore\r\n        };\r\n    }\r\n    getBondData(sview, what, params) {\r\n        const bondData = sview.getBondData(this.getBondParams(what, params));\r\n        if (bondData.picking) {\r\n            bondData.picking = new DistancePicker(bondData.picking.array, bondData.picking.structure, params.bondStore);\r\n        }\r\n        return bondData;\r\n    }\r\n    createData(sview) {\r\n        if (!sview.atomCount || !this.atomPair.length)\r\n            return;\r\n        const n = this.atomPair.length;\r\n        const c = new Color(this.labelColor);\r\n        const distanceData = this.getDistanceData(sview, this.atomPair);\r\n        this.textBuffer = new TextBuffer({\r\n            position: distanceData.position,\r\n            size: uniformArray(n, this.labelSize),\r\n            color: uniformArray3(n, c.r, c.g, c.b),\r\n            text: distanceData.text\r\n        }, this.getLabelBufferParams());\r\n        const bondParams = {\r\n            bondSet: distanceData.bondSet,\r\n            bondStore: distanceData.bondStore\r\n        };\r\n        const bondData = this.getBondData(sview, { position: true, color: true, picking: true, radius: this.useCylinder }, bondParams);\r\n        if (this.useCylinder) {\r\n            this.distanceBuffer = new CylinderBuffer(bondData, this.getBufferParams({\r\n                openEnded: this.openEnded,\r\n                radialSegments: this.radialSegments,\r\n                disableImpostor: this.disableImpostor,\r\n                dullInterior: true\r\n            }));\r\n        }\r\n        else {\r\n            this.distanceBuffer = new WideLineBuffer(getFixedLengthDashData(bondData), this.getBufferParams({\r\n                linewidth: this.linewidth,\r\n                visible: this.lineVisible,\r\n                opacity: this.lineOpacity\r\n            }));\r\n        }\r\n        return {\r\n            bondSet: distanceData.bondSet,\r\n            bondStore: distanceData.bondStore,\r\n            position: distanceData.position,\r\n            bufferList: [this.textBuffer, this.distanceBuffer]\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        super.updateData(what, data);\r\n        const bondParams = {\r\n            bondSet: data.bondSet,\r\n            bondStore: data.bondStore\r\n        };\r\n        const bondData = this.getBondData(data.sview, what, bondParams);\r\n        const distanceData = {};\r\n        if (!what || what.color) {\r\n            Object.assign(distanceData, {\r\n                color: bondData.color,\r\n                color2: bondData.color2\r\n            });\r\n        }\r\n        if (!what || what.radius) {\r\n            Object.assign(distanceData, { radius: bondData.radius });\r\n        }\r\n        this.distanceBuffer.setAttributes(distanceData);\r\n    }\r\n    setParameters(params) {\r\n        let rebuild = false;\r\n        const what = {};\r\n        super.setParameters(params, what, rebuild);\r\n        if (!this.useCylinder) {\r\n            if (params && params.lineOpacity) {\r\n                this.distanceBuffer.setParameters({ opacity: params.lineOpacity });\r\n            }\r\n            if (params && params.opacity !== undefined) {\r\n                this.distanceBuffer.setParameters({ opacity: this.lineOpacity });\r\n            }\r\n            if (params && params.linewidth) {\r\n                this.distanceBuffer.setParameters({ linewidth: params.linewidth });\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\nRepresentationRegistry.add('distance', DistanceRepresentation);\r\nexport default DistanceRepresentation;\r\n//# sourceMappingURL=distance-representation.js.map","/**\r\n * @file Vector Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3, Matrix4 required for declaration only\r\nimport { Color } from 'three';\r\nimport '../shader/Line.vert';\r\nimport '../shader/Line.frag';\r\nimport { uniformArray3 } from '../math/array-utils';\r\nimport Buffer, { BufferDefaultParameters } from './buffer';\r\nfunction getSize(data) {\r\n    const n = data.position.length / 3;\r\n    return n * 2 * 3;\r\n}\r\nexport const VectorBufferDefaultParameters = Object.assign({\r\n    scale: 1,\r\n    color: 'grey'\r\n}, BufferDefaultParameters);\r\n/**\r\n * Vector buffer. Draws vectors as lines.\r\n */\r\nclass VectorBuffer extends Buffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position - positions\r\n     * @param  {Float32Array} data.vector - vectors\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super({\r\n            position: new Float32Array(getSize(data)),\r\n            color: new Float32Array(getSize(data))\r\n        }, params);\r\n        this.isLine = true;\r\n        this.vertexShader = 'Line.vert';\r\n        this.fragmentShader = 'Line.frag';\r\n        const color = new Color(this.parameters.color);\r\n        const attributes = this.geometry.attributes; // TODO\r\n        uniformArray3(getSize(data) / 3, color.r, color.g, color.b, attributes.color.array);\r\n        this.setAttributes(data);\r\n    }\r\n    get defaultParameters() { return VectorBufferDefaultParameters; }\r\n    setAttributes(data = {}) {\r\n        const attributes = this.geometry.attributes; // TODO\r\n        let position, vector;\r\n        let aPosition;\r\n        if (data.position && data.vector) {\r\n            position = data.position;\r\n            vector = data.vector;\r\n            aPosition = attributes.position.array;\r\n            attributes.position.needsUpdate = true;\r\n        }\r\n        const n = this.size / 2;\r\n        const scale = this.parameters.scale;\r\n        if (position && vector) {\r\n            for (let v = 0; v < n; v++) {\r\n                const i = v * 2 * 3;\r\n                const j = v * 3;\r\n                aPosition[i + 0] = position[j + 0];\r\n                aPosition[i + 1] = position[j + 1];\r\n                aPosition[i + 2] = position[j + 2];\r\n                aPosition[i + 3] = position[j + 0] + vector[j + 0] * scale;\r\n                aPosition[i + 4] = position[j + 1] + vector[j + 1] * scale;\r\n                aPosition[i + 5] = position[j + 2] + vector[j + 2] * scale;\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default VectorBuffer;\r\n//# sourceMappingURL=vector-buffer.js.map","/**\r\n * @file Helixorient Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Helixorient from '../geometry/helixorient.js';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport SphereBuffer from '../buffer/sphere-buffer.js';\r\nimport VectorBuffer from '../buffer/vector-buffer.js';\r\n/**\r\n * Helixorient Representation\r\n */\r\nclass HelixorientRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'helixorient';\r\n        this.parameters = Object.assign({\r\n            sphereDetail: true,\r\n            disableImpostor: true\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'sstruc');\r\n        p.radiusType = defaults(p.radiusType, 'size');\r\n        p.radiusSize = defaults(p.radiusSize, 0.15);\r\n        p.radiusScale = defaults(p.radiusScale, 1.0);\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        super.init(p);\r\n    }\r\n    createData(sview) {\r\n        const bufferList = [];\r\n        const polymerList = [];\r\n        this.structure.eachPolymer(polymer => {\r\n            if (polymer.residueCount < 4)\r\n                return;\r\n            polymerList.push(polymer);\r\n            const helixorient = new Helixorient(polymer);\r\n            const position = helixorient.getPosition();\r\n            const color = helixorient.getColor(this.getColorParams());\r\n            const size = helixorient.getSize(this.getRadiusParams());\r\n            const picking = helixorient.getPicking();\r\n            bufferList.push(new SphereBuffer({\r\n                position: position.center,\r\n                color: color.color,\r\n                radius: size.size,\r\n                picking: picking.picking\r\n            }, this.getBufferParams({\r\n                sphereDetail: this.sphereDetail,\r\n                disableImpostor: this.disableImpostor,\r\n                dullInterior: true\r\n            })), new VectorBuffer({\r\n                position: position.center,\r\n                vector: position.axis\r\n            }, this.getBufferParams({\r\n                color: 'skyblue',\r\n                scale: 1\r\n            })), new VectorBuffer({\r\n                position: position.center,\r\n                vector: position.resdir\r\n            }, this.getBufferParams({\r\n                color: 'lightgreen',\r\n                scale: 1\r\n            })));\r\n        }, sview.getSelection());\r\n        return {\r\n            bufferList: bufferList,\r\n            polymerList: polymerList\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        if (Debug)\r\n            Log.time(this.type + ' repr update');\r\n        what = what || {};\r\n        for (let i = 0, il = data.polymerList.length; i < il; ++i) {\r\n            const j = i * 3;\r\n            const bufferData = {};\r\n            const polymer = data.polymerList[i];\r\n            const helixorient = new Helixorient(polymer);\r\n            if (what.position) {\r\n                const position = helixorient.getPosition();\r\n                Object.assign(bufferData, { position: position.center });\r\n                data.bufferList[j + 1].setAttributes({\r\n                    'position': position.center,\r\n                    'vector': position.axis\r\n                });\r\n                data.bufferList[j + 2].setAttributes({\r\n                    'position': position.center,\r\n                    'vector': position.resdir\r\n                });\r\n            }\r\n            data.bufferList[j].setAttributes(bufferData);\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd(this.type + ' repr update');\r\n    }\r\n}\r\nRepresentationRegistry.add('helixorient', HelixorientRepresentation);\r\nexport default HelixorientRepresentation;\r\n//# sourceMappingURL=helixorient-representation.js.map","/**\r\n * @file Licorice Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport BallAndStickRepresentation from './ballandstick-representation.js';\r\n/**\r\n * Licorice representation object ({@link BallAndStickRepresentation} with `aspectRatio` fixed at 1.0)\r\n */\r\nclass LicoriceRepresentation extends BallAndStickRepresentation {\r\n    /**\r\n     * Create Licorice representation object\r\n     * @param {Structure} structure - the structure to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {BallAndStickRepresentationParameters} params - ball and stick representation parameters\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'licorice';\r\n        this.parameters = Object.assign({}, this.parameters, { aspectRatio: null });\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.aspectRatio = 1.0;\r\n        super.init(p);\r\n    }\r\n}\r\nRepresentationRegistry.add('licorice', LicoriceRepresentation);\r\nexport default LicoriceRepresentation;\r\n//# sourceMappingURL=licorice-representation.js.map","/**\r\n * @file Mapped Box Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport MappedBuffer from './mapped-buffer';\r\nconst mapping = new Float32Array([\r\n    -1.0, -1.0, -1.0,\r\n    1.0, -1.0, -1.0,\r\n    1.0, -1.0, 1.0,\r\n    -1.0, -1.0, 1.0,\r\n    -1.0, 1.0, -1.0,\r\n    1.0, 1.0, -1.0,\r\n    1.0, 1.0, 1.0,\r\n    -1.0, 1.0, 1.0\r\n]);\r\nconst mappingIndices = new Uint16Array([\r\n    0, 1, 2,\r\n    0, 2, 3,\r\n    1, 5, 6,\r\n    1, 6, 2,\r\n    4, 6, 5,\r\n    4, 7, 6,\r\n    0, 7, 4,\r\n    0, 3, 7,\r\n    0, 5, 1,\r\n    0, 4, 5,\r\n    3, 2, 6,\r\n    3, 6, 7\r\n]);\r\n/**\r\n * Mapped Box buffer. Draws boxes. Used to render general imposters.\r\n * @interface\r\n */\r\nclass MappedBoxBuffer extends MappedBuffer {\r\n    constructor(data, params = {}) {\r\n        super('v3', data, params);\r\n    }\r\n    get mapping() { return mapping; }\r\n    get mappingIndices() { return mappingIndices; }\r\n    get mappingIndicesSize() { return 36; }\r\n    get mappingSize() { return 8; }\r\n    get mappingItemSize() { return 3; }\r\n}\r\nexport default MappedBoxBuffer;\r\n//# sourceMappingURL=mappedbox-buffer.js.map","/**\r\n * @file Hyperball Stick Impostor Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n// @ts-ignore: unused import Vector3 required for declaration only\r\nimport { Matrix4 } from 'three';\r\nimport '../shader/HyperballStickImpostor.vert';\r\nimport '../shader/HyperballStickImpostor.frag';\r\nimport MappedBoxBuffer from './mappedbox-buffer';\r\nimport { BufferDefaultParameters, BufferParameterTypes } from './buffer';\r\nexport const HyperballStickImpostorBufferDefaultParameters = Object.assign({\r\n    shrink: 0.14\r\n}, BufferDefaultParameters);\r\nconst HyperballStickImpostorBufferParameterTypes = Object.assign({\r\n    shrink: { uniform: true }\r\n}, BufferParameterTypes);\r\n/**\r\n * Hyperball stick impostor buffer.\r\n *\r\n * @example\r\n * var hyperballStickImpostorBuffer = new HyperballStickImpostorBuffer({\r\n *   position1: new Float32Array([ 0, 0, 0 ]),\r\n *   position2: new Float32Array([ 2, 2, 2 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   color2: new Float32Array([ 0, 1, 0 ]),\r\n *   radius: new Float32Array([ 1 ]),\r\n *   radius2: new Float32Array([ 2 ])\r\n * });\r\n */\r\nclass HyperballStickImpostorBuffer extends MappedBoxBuffer {\r\n    constructor(data, params = {}) {\r\n        super(data, params);\r\n        this.parameterTypes = HyperballStickImpostorBufferParameterTypes;\r\n        this.isImpostor = true;\r\n        this.vertexShader = 'HyperballStickImpostor.vert';\r\n        this.fragmentShader = 'HyperballStickImpostor.frag';\r\n        this.addUniforms({\r\n            'modelViewProjectionMatrix': { value: new Matrix4() },\r\n            'modelViewProjectionMatrixInverse': { value: new Matrix4() },\r\n            'modelViewMatrixInverseTranspose': { value: new Matrix4() },\r\n            'shrink': { value: this.parameters.shrink }\r\n        });\r\n        this.addAttributes({\r\n            'position1': { type: 'v3', value: null },\r\n            'position2': { type: 'v3', value: null },\r\n            'color2': { type: 'c', value: null },\r\n            'radius': { type: 'f', value: null },\r\n            'radius2': { type: 'f', value: null }\r\n        });\r\n        this.setAttributes(data);\r\n        this.makeMapping();\r\n    }\r\n    get defaultParameters() { return HyperballStickImpostorBufferDefaultParameters; }\r\n}\r\nexport default HyperballStickImpostorBuffer;\r\n//# sourceMappingURL=hyperballstickimpostor-buffer.js.map","/**\r\n * @file Hyperball Stick Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ExtensionFragDepth } from '../globals';\r\nimport { calculateMinArray } from '../math/array-utils';\r\nimport CylinderGeometryBuffer, { CylinderGeometryBufferDefaultParameters } from './cylindergeometry-buffer';\r\nimport HyperballStickImpostorBuffer, { HyperballStickImpostorBufferDefaultParameters } from './hyperballstickimpostor-buffer';\r\nexport const HyperballStickBufferDefaultParameters = Object.assign({\r\n    disableImpostor: false\r\n}, CylinderGeometryBufferDefaultParameters, HyperballStickImpostorBufferDefaultParameters);\r\n/**\r\n * Hyperball stick buffer. Depending on the value {@link ExtensionFragDepth} and\r\n * `params.disableImpostor` the constructor returns either a\r\n * {@link CylinderGeometryBuffer} or a {@link HyperballStickImpostorBuffer}\r\n * @implements {Buffer}\r\n *\r\n * @example\r\n * var hyperballStickBuffer = new HyperballStickBuffer({\r\n *   position1: new Float32Array([ 0, 0, 0 ]),\r\n *   position2: new Float32Array([ 2, 2, 2 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   color2: new Float32Array([ 0, 1, 0 ]),\r\n *   radius: new Float32Array([ 1 ]),\r\n *   radius2: new Float32Array([ 2 ])\r\n * });\r\n */\r\nclass HyperballStickBuffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position1 - from positions\r\n     * @param  {Float32Array} data.position2 - to positions\r\n     * @param  {Float32Array} data.color - from colors\r\n     * @param  {Float32Array} data.color2 - to colors\r\n     * @param  {Float32Array} data.radius - from radii\r\n     * @param  {Float32Array} data.radius2 - to radii\r\n     * @param  {Float32Array} data.picking - picking ids\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        if (!ExtensionFragDepth || (params && params.disableImpostor)) {\r\n            data.radius = calculateMinArray(data.radius, data.radius2);\r\n            return new CylinderGeometryBuffer(data, params);\r\n        }\r\n        else {\r\n            return new HyperballStickImpostorBuffer(data, params);\r\n        }\r\n    }\r\n}\r\nexport default HyperballStickBuffer;\r\n//# sourceMappingURL=hyperballstick-buffer.js.map","/**\r\n * @file Hyperball Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { calculateCenterArray } from '../math/array-utils.js';\r\nimport LicoriceRepresentation from './licorice-representation.js';\r\nimport SphereBuffer from '../buffer/sphere-buffer.js';\r\nimport HyperballStickBuffer from '../buffer/hyperballstick-buffer.js';\r\n/**\r\n * Hyperball Representation\r\n */\r\nclass HyperballRepresentation extends LicoriceRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'hyperball';\r\n        this.parameters = Object.assign({\r\n            shrink: {\r\n                type: 'number', precision: 3, max: 1.0, min: 0.001, buffer: true\r\n            }\r\n        }, this.parameters, {\r\n            multipleBond: null,\r\n            bondSpacing: null\r\n        });\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.radiusScale = defaults(p.radiusScale, 0.2);\r\n        p.radiusType = defaults(p.radiusType, 'vdw');\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        this.shrink = defaults(p.shrink, 0.12);\r\n        super.init(p);\r\n    }\r\n    getBondParams(what, params) {\r\n        if (!what || what.radius) {\r\n            params = Object.assign({ radius2: true }, params);\r\n        }\r\n        return super.getBondParams(what, params);\r\n    }\r\n    createData(sview) {\r\n        var sphereBuffer = new SphereBuffer(sview.getAtomData(this.getAtomParams()), this.getBufferParams({\r\n            sphereDetail: this.sphereDetail,\r\n            disableImpostor: this.disableImpostor,\r\n            dullInterior: true\r\n        }));\r\n        this.__center = new Float32Array(sview.bondCount * 3);\r\n        var stickBuffer = new HyperballStickBuffer(sview.getBondData(this.getBondParams()), this.getBufferParams({\r\n            shrink: this.shrink,\r\n            radialSegments: this.radialSegments,\r\n            disableImpostor: this.disableImpostor,\r\n            dullInterior: true\r\n        }));\r\n        return {\r\n            bufferList: [sphereBuffer, stickBuffer]\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        var atomData = data.sview.getAtomData(this.getAtomParams());\r\n        var bondData = data.sview.getBondData(this.getBondParams());\r\n        var sphereData = {};\r\n        var stickData = {};\r\n        if (!what || what.position) {\r\n            Object.assign(sphereData, { position: atomData.position });\r\n            var from = bondData.position1;\r\n            var to = bondData.position2;\r\n            Object.assign(stickData, {\r\n                position: calculateCenterArray(from, to, this.__center),\r\n                position1: from,\r\n                position2: to\r\n            });\r\n        }\r\n        if (!what || what.color) {\r\n            Object.assign(sphereData, { color: atomData.color });\r\n            Object.assign(stickData, {\r\n                color: bondData.color,\r\n                color2: bondData.color2\r\n            });\r\n        }\r\n        if (!what || what.radius) {\r\n            Object.assign(sphereData, { radius: atomData.radius });\r\n            Object.assign(stickData, {\r\n                radius: bondData.radius,\r\n                radius2: bondData.radius2\r\n            });\r\n        }\r\n        data.bufferList[0].setAttributes(sphereData);\r\n        data.bufferList[1].setAttributes(stickData);\r\n    }\r\n}\r\nRepresentationRegistry.add('hyperball', HyperballRepresentation);\r\nexport default HyperballRepresentation;\r\n//# sourceMappingURL=hyperball-representation.js.map","/**\r\n * @file Label Factory\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { AA1 } from '../structure/structure-constants';\r\nimport { sprintf } from 'sprintf-js';\r\nexport const LabelFactoryTypes = {\r\n    '': '',\r\n    'atomname': 'atom name',\r\n    'atomindex': 'atom index',\r\n    'occupancy': 'occupancy',\r\n    'bfactor': 'b-factor',\r\n    'serial': 'serial',\r\n    'element': 'element',\r\n    'atom': 'atom name + index',\r\n    'resname': 'residue name',\r\n    'resno': 'residue no',\r\n    'res': 'one letter code + no',\r\n    'residue': '[residue name] + no + inscode',\r\n    'text': 'text',\r\n    'format': 'format',\r\n    'qualified': 'qualified name'\r\n};\r\nclass LabelFactory {\r\n    constructor(type, text = {}, format = '') {\r\n        this.type = type;\r\n        this.text = text;\r\n        this.format = format;\r\n    }\r\n    atomLabel(a) {\r\n        const type = this.type;\r\n        let l;\r\n        switch (type) {\r\n            case 'atomname':\r\n                l = a.atomname;\r\n                break;\r\n            case 'atomindex':\r\n                l = `${a.index}`;\r\n                break;\r\n            case 'occupancy':\r\n                l = a.occupancy.toFixed(2);\r\n                break;\r\n            case 'bfactor':\r\n                l = a.bfactor.toFixed(2);\r\n                break;\r\n            case 'serial':\r\n                l = `${a.serial}`;\r\n                break;\r\n            case 'element':\r\n                l = a.element;\r\n                break;\r\n            case 'atom':\r\n                l = `${a.atomname}|${a.index}`;\r\n                break;\r\n            case 'resname':\r\n                l = a.resname;\r\n                break;\r\n            case 'resno':\r\n                l = `${a.resno}`;\r\n                break;\r\n            case 'res':\r\n                l = `${(AA1[a.resname.toUpperCase()] || a.resname)}${a.resno}`;\r\n                break;\r\n            case 'residue':\r\n                const aa1 = AA1[a.resname.toUpperCase()];\r\n                if (aa1 && !a.inscode) {\r\n                    l = `${aa1}${a.resno}`;\r\n                }\r\n                else {\r\n                    l = `[${a.resname}]${a.resno}${a.inscode}`;\r\n                }\r\n                break;\r\n            case 'text':\r\n                l = this.text[a.index];\r\n                break;\r\n            case 'format':\r\n                l = sprintf(this.format, a);\r\n                break;\r\n            // case \"qualified\":\r\n            default:\r\n                l = a.qualifiedName();\r\n                break;\r\n        }\r\n        return l === undefined ? '' : l;\r\n    }\r\n}\r\nLabelFactory.types = LabelFactoryTypes;\r\nexport default LabelFactory;\r\n//# sourceMappingURL=label-factory.js.map","/**\r\n * @file Label Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry, ColormakerRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport LabelFactory from '../utils/label-factory';\r\nimport RadiusFactory from '../utils/radius-factory';\r\nimport StructureRepresentation from './structure-representation';\r\nimport TextBuffer from '../buffer/text-buffer';\r\n/**\r\n * Label representation\r\n */\r\nclass LabelRepresentation extends StructureRepresentation {\r\n    /**\r\n     * Create Label representation object\r\n     * @param {Structure} structure - the structure to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {LabelRepresentationParameters} params - label representation parameters\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'label';\r\n        this.parameters = Object.assign({\r\n            labelType: {\r\n                type: 'select', options: LabelFactory.types, rebuild: true\r\n            },\r\n            labelText: {\r\n                type: 'hidden', rebuild: true\r\n            },\r\n            labelFormat: {\r\n                type: 'text', rebuild: true\r\n            },\r\n            labelGrouping: {\r\n                type: 'select',\r\n                options: {\r\n                    'atom': 'atom',\r\n                    'residue': 'residue'\r\n                },\r\n                rebuild: true\r\n            },\r\n            fontFamily: {\r\n                type: 'select',\r\n                options: {\r\n                    'sans-serif': 'sans-serif',\r\n                    'monospace': 'monospace',\r\n                    'serif': 'serif'\r\n                },\r\n                buffer: true\r\n            },\r\n            fontStyle: {\r\n                type: 'select',\r\n                options: {\r\n                    'normal': 'normal',\r\n                    'italic': 'italic'\r\n                },\r\n                buffer: true\r\n            },\r\n            fontWeight: {\r\n                type: 'select',\r\n                options: {\r\n                    'normal': 'normal',\r\n                    'bold': 'bold'\r\n                },\r\n                buffer: true\r\n            },\r\n            xOffset: {\r\n                type: 'number', precision: 1, max: 20, min: -20, buffer: true\r\n            },\r\n            yOffset: {\r\n                type: 'number', precision: 1, max: 20, min: -20, buffer: true\r\n            },\r\n            zOffset: {\r\n                type: 'number', precision: 1, max: 20, min: -20, buffer: true\r\n            },\r\n            attachment: {\r\n                type: 'select',\r\n                options: {\r\n                    'bottom-left': 'bottom-left',\r\n                    'bottom-center': 'bottom-center',\r\n                    'bottom-right': 'bottom-right',\r\n                    'middle-left': 'middle-left',\r\n                    'middle-center': 'middle-center',\r\n                    'middle-right': 'middle-right',\r\n                    'top-left': 'top-left',\r\n                    'top-center': 'top-center',\r\n                    'top-right': 'top-right'\r\n                },\r\n                rebuild: true\r\n            },\r\n            showBorder: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            borderColor: {\r\n                type: 'color', buffer: true\r\n            },\r\n            borderWidth: {\r\n                type: 'number', precision: 2, max: 0.3, min: 0, buffer: true\r\n            },\r\n            showBackground: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            backgroundColor: {\r\n                type: 'color', buffer: true\r\n            },\r\n            backgroundMargin: {\r\n                type: 'number', precision: 2, max: 2, min: 0, rebuild: true\r\n            },\r\n            backgroundOpacity: {\r\n                type: 'range', step: 0.01, max: 1, min: 0, buffer: true\r\n            },\r\n            fixedSize: {\r\n                type: 'boolean', buffer: true\r\n            }\r\n        }, this.parameters, {\r\n            side: null,\r\n            flatShaded: null,\r\n            wireframe: null,\r\n            linewidth: null,\r\n            roughness: null,\r\n            metalness: null,\r\n            diffuse: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        this.labelType = defaults(p.labelType, 'res');\r\n        this.labelText = defaults(p.labelText, {});\r\n        this.labelFormat = defaults(p.labelFormat, '');\r\n        this.labelGrouping = defaults(p.labelGrouping, 'atom');\r\n        this.fontFamily = defaults(p.fontFamily, 'sans-serif');\r\n        this.fontStyle = defaults(p.fontStyle, 'normal');\r\n        this.fontWeight = defaults(p.fontWeight, 'bold');\r\n        this.xOffset = defaults(p.xOffset, 0.0);\r\n        this.yOffset = defaults(p.yOffset, 0.0);\r\n        this.zOffset = defaults(p.zOffset, 0.5);\r\n        this.attachment = defaults(p.attachment, 'bottom-left');\r\n        this.showBorder = defaults(p.showBorder, false);\r\n        this.borderColor = defaults(p.borderColor, 'lightgrey');\r\n        this.borderWidth = defaults(p.borderWidth, 0.15);\r\n        this.showBackground = defaults(p.showBackground, false);\r\n        this.backgroundColor = defaults(p.backgroundColor, 'lightgrey');\r\n        this.backgroundMargin = defaults(p.backgroundMargin, 0.5);\r\n        this.backgroundOpacity = defaults(p.backgroundOpacity, 1.0);\r\n        this.fixedSize = defaults(p.fixedSize, false);\r\n        super.init(p);\r\n    }\r\n    getTextData(sview, what) {\r\n        const p = this.getAtomParams(what);\r\n        const labelFactory = new LabelFactory(this.labelType, this.labelText, this.labelFormat);\r\n        let position, size, color, text, positionN, sizeN, colorN;\r\n        if (this.labelGrouping === 'atom') {\r\n            const atomData = sview.getAtomData(p);\r\n            position = atomData.position;\r\n            size = atomData.radius;\r\n            color = atomData.color;\r\n            if (!what || what.text) {\r\n                text = [];\r\n                sview.eachAtom(ap => text.push(labelFactory.atomLabel(ap)));\r\n            }\r\n        }\r\n        else if (this.labelGrouping === 'residue') {\r\n            if (!what || what.position)\r\n                positionN = [];\r\n            if (!what || what.color)\r\n                colorN = [];\r\n            if (!what || what.radius)\r\n                sizeN = [];\r\n            if (!what || what.text)\r\n                text = [];\r\n            if (p.colorParams)\r\n                p.colorParams.structure = sview.getStructure();\r\n            const colormaker = ColormakerRegistry.getScheme(p.colorParams);\r\n            const radiusFactory = new RadiusFactory(p.radiusParams);\r\n            const ap1 = sview.getAtomProxy();\r\n            let i = 0;\r\n            sview.eachResidue(rp => {\r\n                const i3 = i * 3;\r\n                if (rp.isProtein() || rp.isNucleic()) {\r\n                    ap1.index = rp.traceAtomIndex;\r\n                    if (!what || what.position) {\r\n                        ap1.positionToArray(positionN, i3);\r\n                    }\r\n                }\r\n                else {\r\n                    ap1.index = rp.atomOffset;\r\n                    if (!what || what.position) {\r\n                        rp.positionToArray(positionN, i3);\r\n                    }\r\n                }\r\n                if (!what || what.color) {\r\n                    colormaker.atomColorToArray(ap1, colorN, i3);\r\n                }\r\n                if (!what || what.radius) {\r\n                    sizeN[i] = radiusFactory.atomRadius(ap1);\r\n                }\r\n                if (!what || what.text) {\r\n                    text.push(labelFactory.atomLabel(ap1));\r\n                }\r\n                ++i;\r\n            });\r\n            if (!what || what.position)\r\n                position = new Float32Array(positionN);\r\n            if (!what || what.color)\r\n                color = new Float32Array(colorN);\r\n            if (!what || what.radius)\r\n                size = new Float32Array(sizeN);\r\n        }\r\n        return { position: position, size: size, color: color, text: text };\r\n    }\r\n    createData(sview) {\r\n        const what = { position: true, color: true, radius: true, text: true };\r\n        const textBuffer = new TextBuffer(this.getTextData(sview, what), this.getBufferParams({\r\n            fontFamily: this.fontFamily,\r\n            fontStyle: this.fontStyle,\r\n            fontWeight: this.fontWeight,\r\n            xOffset: this.xOffset,\r\n            yOffset: this.yOffset,\r\n            zOffset: this.zOffset,\r\n            attachment: this.attachment,\r\n            showBorder: this.showBorder,\r\n            borderColor: this.borderColor,\r\n            borderWidth: this.borderWidth,\r\n            showBackground: this.showBackground,\r\n            backgroundColor: this.backgroundColor,\r\n            backgroundMargin: this.backgroundMargin,\r\n            backgroundOpacity: this.backgroundOpacity,\r\n            fixedSize: this.fixedSize\r\n        }));\r\n        return { bufferList: [textBuffer] };\r\n    }\r\n    updateData(what, data) {\r\n        data.bufferList[0].setAttributes(this.getTextData(data.sview, what));\r\n    }\r\n    getAtomRadius() {\r\n        return 0;\r\n    }\r\n}\r\nRepresentationRegistry.add('label', LabelRepresentation);\r\nexport default LabelRepresentation;\r\n//# sourceMappingURL=label-representation.js.map","/**\r\n * @file Line Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport { RepresentationRegistry } from '../globals';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport WideLineBuffer from '../buffer/wideline-buffer.js';\r\nimport { AtomPicker } from '../utils/picker.js';\r\n/**\r\n * Determine which atoms in  a Structure[View] form no bonds to any other atoms\r\n * in that Structure.\r\n *\r\n * This differs from setting the selection to \"nonbonded\" as it finds atoms\r\n * that have no bonds within the current selection.\r\n * @param  {Structure} structure - The Structure or StructureView object\r\n * @return {AtomSet} AtomSet of lone atoms\r\n */\r\nfunction getLoneAtomSet(structure) {\r\n    const atomSet = structure.getAtomSet();\r\n    const bondSet = structure.getBondSet();\r\n    const bp = structure.getBondProxy();\r\n    bondSet.forEach(function (idx) {\r\n        bp.index = idx;\r\n        atomSet.clear(bp.atomIndex1);\r\n        atomSet.clear(bp.atomIndex2);\r\n    });\r\n    return atomSet;\r\n}\r\n/**\r\n * Line representation\r\n */\r\nclass LineRepresentation extends StructureRepresentation {\r\n    /**\r\n     * Create Line representation object\r\n     * @param {Structure} structure - the structure to be represented\r\n     * @param {Viewer} viewer - a viewer object\r\n     * @param {RepresentationParameters} params - representation parameters, plus the properties listed below\r\n     * @property {String} multipleBond - one off \"off\", \"symmetric\", \"offset\"\r\n     * @param {Float} params.bondSpacing - spacing for multiple bond rendering\r\n     * @param {Integer} params.linewidth - width of lines\r\n     * @param {Boolean} params.lines - render bonds as lines\r\n     * @param {String} params.crosses - render atoms as crosses: \"off\", \"all\" or \"lone\" (default)\r\n     * @param {Float} params.crossSize - size of cross\r\n     * @param {null} params.flatShaded - not available\r\n     * @param {null} params.side - not available\r\n     * @param {null} params.wireframe - not available\r\n     * @param {null} params.roughness - not available\r\n     * @param {null} params.metalness - not available\r\n     * @param {null} params.diffuse - not available\r\n     */\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'line';\r\n        this.parameters = Object.assign({\r\n            multipleBond: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    'off': 'off',\r\n                    'symmetric': 'symmetric',\r\n                    'offset': 'offset'\r\n                }\r\n            },\r\n            bondSpacing: {\r\n                type: 'number', precision: 2, max: 2.0, min: 0.5\r\n            },\r\n            linewidth: {\r\n                type: 'integer', max: 50, min: 1, buffer: true\r\n            },\r\n            lines: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            crosses: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    'off': 'off',\r\n                    'lone': 'lone',\r\n                    'all': 'all'\r\n                }\r\n            },\r\n            crossSize: {\r\n                type: 'number', precision: 2, max: 2.0, min: 0.1\r\n            }\r\n        }, this.parameters, {\r\n            flatShaded: null,\r\n            side: null,\r\n            wireframe: null,\r\n            roughness: null,\r\n            metalness: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        this.multipleBond = defaults(p.multipleBond, 'off');\r\n        this.bondSpacing = defaults(p.bondSpacing, 1.0);\r\n        this.linewidth = defaults(p.linewidth, 2);\r\n        this.lines = defaults(p.lines, true);\r\n        this.crosses = defaults(p.crosses, 'lone');\r\n        this.crossSize = defaults(p.crossSize, 0.4);\r\n        super.init(p);\r\n    }\r\n    getAtomRadius(atom) {\r\n        return 0.1;\r\n    }\r\n    getBondParams(what, params) {\r\n        params = Object.assign({\r\n            multipleBond: this.multipleBond,\r\n            bondSpacing: this.bondSpacing,\r\n            radiusParams: { 'type': 'size', 'size': 0.1, 'scale': 1 }\r\n        }, params);\r\n        return super.getBondParams(what, params);\r\n    }\r\n    _crossData(what, sview) {\r\n        if (what) {\r\n            if (!what.position && !what.color)\r\n                return;\r\n        }\r\n        const p = {};\r\n        if (this.crosses === 'lone') {\r\n            Object.assign(p, { atomSet: getLoneAtomSet(sview) });\r\n        }\r\n        const atomData = sview.getAtomData(this.getAtomParams(what, p));\r\n        const crossData = {};\r\n        const position = atomData.position;\r\n        const color = atomData.color;\r\n        const picking = atomData.picking;\r\n        const size = (position || color).length;\r\n        const attrSize = size * 3;\r\n        let cPosition1 = new Float32Array(0);\r\n        let cPosition2 = new Float32Array(0);\r\n        let cColor = new Float32Array(0);\r\n        let cColor2 = new Float32Array(0);\r\n        let cOffset = 0;\r\n        let pickingArray = new Float32Array(0);\r\n        if (!what || what.position) {\r\n            cPosition1 = crossData.position1 = new Float32Array(attrSize);\r\n            cPosition2 = crossData.position2 = new Float32Array(attrSize);\r\n            cOffset = this.crossSize / 2;\r\n        }\r\n        if (!what || what.color) {\r\n            cColor = crossData.color = new Float32Array(attrSize);\r\n            cColor2 = crossData.color2 = new Float32Array(attrSize);\r\n        }\r\n        if (!what || what.picking) {\r\n            pickingArray = new Float32Array(atomData.picking.array.length * 3); // Needs padding??\r\n        }\r\n        for (let v = 0; v < size; v++) {\r\n            const j = v * 3;\r\n            const i = j * 3;\r\n            if (!what || what.position) {\r\n                const x = position[j];\r\n                const y = position[j + 1];\r\n                const z = position[j + 2];\r\n                cPosition1[i] = x - cOffset;\r\n                cPosition1[i + 1] = y;\r\n                cPosition1[i + 2] = z;\r\n                cPosition2[i] = x + cOffset;\r\n                cPosition2[i + 1] = y;\r\n                cPosition2[i + 2] = z;\r\n                cPosition1[i + 3] = x;\r\n                cPosition1[i + 4] = y - cOffset;\r\n                cPosition1[i + 5] = z;\r\n                cPosition2[i + 3] = x;\r\n                cPosition2[i + 4] = y + cOffset;\r\n                cPosition2[i + 5] = z;\r\n                cPosition1[i + 6] = x;\r\n                cPosition1[i + 7] = y;\r\n                cPosition1[i + 8] = z - cOffset;\r\n                cPosition2[i + 6] = x;\r\n                cPosition2[i + 7] = y;\r\n                cPosition2[i + 8] = z + cOffset;\r\n            }\r\n            if (!what || what.color) {\r\n                const cimax = i + 9;\r\n                for (let ci = i; ci < cimax; ci += 3) {\r\n                    cColor[ci] = cColor2[ci] = color[j];\r\n                    cColor[ci + 1] = cColor2[ci + 1] = color[j + 1];\r\n                    cColor[ci + 2] = cColor2[ci + 2] = color[j + 2];\r\n                }\r\n            }\r\n            if (!what || what.picking) {\r\n                pickingArray[j] =\r\n                    pickingArray[j + 1] =\r\n                        pickingArray[j + 2] = picking.array[v];\r\n            }\r\n        }\r\n        if (!what || what.picking) {\r\n            crossData.picking = new AtomPicker(pickingArray, picking.structure);\r\n        }\r\n        return crossData;\r\n    }\r\n    createData(sview) {\r\n        const what = { position: true, color: true, picking: true };\r\n        const bufferList = [];\r\n        if (this.lines) {\r\n            const bondData = sview.getBondData(this.getBondParams(what));\r\n            const lineBuffer = new WideLineBuffer(bondData, this.getBufferParams({ linewidth: this.linewidth }));\r\n            bufferList.push(lineBuffer);\r\n        }\r\n        if (this.crosses !== 'off') {\r\n            const crossBuffer = new WideLineBuffer(this._crossData(what, sview), this.getBufferParams({ linewidth: this.linewidth }));\r\n            bufferList.push(crossBuffer);\r\n        }\r\n        return {\r\n            bufferList: bufferList\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        let bufferIdx = 0;\r\n        if (this.lines) {\r\n            const bondData = data.sview.getBondData(this.getBondParams(what));\r\n            const lineAttributes = {};\r\n            if (!what || what.position) {\r\n                Object.assign(lineAttributes, {\r\n                    position1: bondData.position1,\r\n                    position2: bondData.position2\r\n                });\r\n            }\r\n            if (!what || what.color) {\r\n                Object.assign(lineAttributes, {\r\n                    color: bondData.color,\r\n                    color2: bondData.color2\r\n                });\r\n            }\r\n            data.bufferList[bufferIdx++].setAttributes(lineAttributes);\r\n        }\r\n        if (this.crosses !== 'off') {\r\n            const crossData = this._crossData(what, data.sview);\r\n            const crossAttributes = {};\r\n            if (!what || what.position) {\r\n                Object.assign(crossAttributes, {\r\n                    position1: crossData.position1,\r\n                    position2: crossData.position2\r\n                });\r\n            }\r\n            if (!what || what.color) {\r\n                Object.assign(crossAttributes, {\r\n                    color: crossData.color,\r\n                    color2: crossData.color2\r\n                });\r\n            }\r\n            data.bufferList[bufferIdx++].setAttributes(crossAttributes);\r\n        }\r\n    }\r\n    setParameters(params) {\r\n        var rebuild = false;\r\n        var what = {};\r\n        if (params && (params.bondSpacing || params.crossSize)) {\r\n            Object.assign(what, { position: true });\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        return this;\r\n    }\r\n}\r\nRepresentationRegistry.add('line', LineRepresentation);\r\nexport default LineRepresentation;\r\n//# sourceMappingURL=line-representation.js.map","function makeGrid(length, width, height, DataCtor, elemSize) {\r\n    DataCtor = DataCtor || Int32Array;\r\n    elemSize = elemSize || 1;\r\n    const data = new DataCtor(length * width * height * elemSize);\r\n    function index(x, y, z) {\r\n        return ((((x * width) + y) * height) + z) * elemSize;\r\n    }\r\n    function set(x, y, z, ...args) {\r\n        const i = index(x, y, z);\r\n        for (let j = 0; j < elemSize; ++j) {\r\n            data[i + j] = args[j];\r\n        }\r\n    }\r\n    function toArray(x, y, z, array = [], offset = 0) {\r\n        const i = index(x, y, z);\r\n        for (let j = 0; j < elemSize; ++j) {\r\n            array[offset + j] = data[i + j];\r\n        }\r\n    }\r\n    function fromArray(x, y, z, array, offset = 0) {\r\n        const i = index(x, y, z);\r\n        for (let j = 0; j < elemSize; ++j) {\r\n            data[i + j] = array[offset + j];\r\n        }\r\n    }\r\n    function copy(grid) {\r\n        data.set(grid.data);\r\n    }\r\n    // function clone() {\r\n    //   return makeGrid(\r\n    //     length, width, height, DataCtor, elemSize\r\n    //   ).copy(this)\r\n    // }\r\n    return { data, index, set, toArray, fromArray, copy };\r\n}\r\nexport { makeGrid };\r\n//# sourceMappingURL=grid.js.map","/**\r\n * @file EDT Surface\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { VolumeSurface } from './volume.js';\r\nimport { makeGrid } from '../geometry/grid';\r\nimport { computeBoundingBox } from '../math/vector-utils.js';\r\nimport { getRadiusDict, getSurfaceGrid } from './surface-utils.js';\r\nfunction EDTSurface(coordList, radiusList, indexList) {\r\n    // based on D. Xu, Y. Zhang (2009) Generating Triangulated Macromolecular\r\n    // Surfaces by Euclidean Distance Transform. PLoS ONE 4(12): e8140.\r\n    //\r\n    // Permission to use, copy, modify, and distribute this program for\r\n    // any purpose, with or without fee, is hereby granted, provided that\r\n    // the notices on the head, the reference information, and this\r\n    // copyright notice appear in all copies or substantial portions of\r\n    // the Software. It is provided \"as is\" without express or implied\r\n    // warranty.\r\n    //\r\n    // ported to JavaScript by biochem_fan (http://webglmol.sourceforge.jp/)\r\n    // refactored by dkoes (https://github.com/dkoes)\r\n    //\r\n    // adapted to NGL by Alexander Rose\r\n    var radiusDict = getRadiusDict(radiusList);\r\n    var bbox = computeBoundingBox(coordList);\r\n    if (coordList.length === 0) {\r\n        bbox[0].set([0, 0, 0]);\r\n        bbox[1].set([0, 0, 0]);\r\n    }\r\n    var min = bbox[0];\r\n    var max = bbox[1];\r\n    var probeRadius, scaleFactor, cutoff;\r\n    var pLength, pWidth, pHeight;\r\n    var matrix, ptran;\r\n    var depty, widxz;\r\n    var cutRadius;\r\n    var setAtomID;\r\n    var vpBits, vpDistance, vpAtomID;\r\n    function init(btype, _probeRadius, _scaleFactor, _cutoff, _setAtomID) {\r\n        probeRadius = _probeRadius || 1.4;\r\n        scaleFactor = _scaleFactor || 2.0;\r\n        setAtomID = _setAtomID || true;\r\n        var maxRadius = 0;\r\n        for (var radius in radiusDict) {\r\n            maxRadius = Math.max(maxRadius, radius);\r\n        }\r\n        var grid = getSurfaceGrid(min, max, maxRadius, scaleFactor, btype ? probeRadius : 0);\r\n        pLength = grid.dim[0];\r\n        pWidth = grid.dim[1];\r\n        pHeight = grid.dim[2];\r\n        matrix = grid.matrix;\r\n        ptran = grid.tran;\r\n        scaleFactor = grid.scaleFactor;\r\n        // boundingatom caches\r\n        depty = {};\r\n        widxz = {};\r\n        boundingatom(btype);\r\n        cutRadius = probeRadius * scaleFactor;\r\n        if (_cutoff) {\r\n            cutoff = _cutoff;\r\n        }\r\n        else {\r\n            // cutoff = Math.max( 0.1, -1.2 + scaleFactor * probeRadius );\r\n            cutoff = probeRadius / scaleFactor;\r\n        }\r\n        vpBits = new Uint8Array(pLength * pWidth * pHeight);\r\n        if (btype) {\r\n            vpDistance = new Float64Array(pLength * pWidth * pHeight);\r\n        }\r\n        if (setAtomID) {\r\n            vpAtomID = new Int32Array(pLength * pWidth * pHeight);\r\n        }\r\n    }\r\n    // constants for vpBits bitmasks\r\n    var INOUT = 1;\r\n    var ISDONE = 2;\r\n    var ISBOUND = 4;\r\n    var nb = [\r\n        new Int32Array([1, 0, 0]), new Int32Array([-1, 0, 0]),\r\n        new Int32Array([0, 1, 0]), new Int32Array([0, -1, 0]),\r\n        new Int32Array([0, 0, 1]), new Int32Array([0, 0, -1]),\r\n        new Int32Array([1, 1, 0]), new Int32Array([1, -1, 0]),\r\n        new Int32Array([-1, 1, 0]), new Int32Array([-1, -1, 0]),\r\n        new Int32Array([1, 0, 1]), new Int32Array([1, 0, -1]),\r\n        new Int32Array([-1, 0, 1]), new Int32Array([-1, 0, -1]),\r\n        new Int32Array([0, 1, 1]), new Int32Array([0, 1, -1]),\r\n        new Int32Array([0, -1, 1]), new Int32Array([0, -1, -1]),\r\n        new Int32Array([1, 1, 1]), new Int32Array([1, 1, -1]),\r\n        new Int32Array([1, -1, 1]), new Int32Array([-1, 1, 1]),\r\n        new Int32Array([1, -1, -1]), new Int32Array([-1, -1, 1]),\r\n        new Int32Array([-1, 1, -1]), new Int32Array([-1, -1, -1])\r\n    ];\r\n    //\r\n    this.getVolume = function (type, probeRadius, scaleFactor, cutoff, setAtomID) {\r\n        console.time('EDTSurface.getVolume');\r\n        var btype = type !== 'vws';\r\n        init(btype, probeRadius, scaleFactor, cutoff, setAtomID);\r\n        fillvoxels(btype);\r\n        buildboundary();\r\n        if (type === 'ms' || type === 'ses') {\r\n            fastdistancemap();\r\n        }\r\n        if (type === 'ses') {\r\n            boundingatom(false);\r\n            fillvoxelswaals();\r\n        }\r\n        marchingcubeinit(type);\r\n        // set atomindex in the volume data\r\n        for (var i = 0, il = vpAtomID.length; i < il; ++i) {\r\n            vpAtomID[i] = indexList[vpAtomID[i]];\r\n        }\r\n        console.timeEnd('EDTSurface.getVolume');\r\n        return {\r\n            data: vpBits,\r\n            nx: pHeight,\r\n            ny: pWidth,\r\n            nz: pLength,\r\n            atomindex: vpAtomID\r\n        };\r\n    };\r\n    this.getSurface = function (type, probeRadius, scaleFactor, cutoff, setAtomID, smooth, contour) {\r\n        var vd = this.getVolume(type, probeRadius, scaleFactor, cutoff, setAtomID);\r\n        var volsurf = new VolumeSurface(vd.data, vd.nx, vd.ny, vd.nz, vd.atomindex);\r\n        return volsurf.getSurface(1, smooth, undefined, matrix, contour);\r\n    };\r\n    function boundingatom(btype) {\r\n        var r;\r\n        var j;\r\n        var k;\r\n        var txz;\r\n        var tdept;\r\n        var sradius;\r\n        var tradius;\r\n        var widxzR;\r\n        var deptyName;\r\n        var indx;\r\n        for (var name in radiusDict) {\r\n            r = parseFloat(name);\r\n            if (depty[name])\r\n                continue;\r\n            if (!btype) {\r\n                tradius = r * scaleFactor + 0.5;\r\n            }\r\n            else {\r\n                tradius = (r + probeRadius) * scaleFactor + 0.5;\r\n            }\r\n            sradius = tradius * tradius;\r\n            widxzR = Math.floor(tradius) + 1;\r\n            deptyName = new Int32Array(widxzR * widxzR);\r\n            indx = 0;\r\n            for (j = 0; j < widxzR; ++j) {\r\n                for (k = 0; k < widxzR; ++k) {\r\n                    txz = j * j + k * k;\r\n                    if (txz > sradius) {\r\n                        deptyName[indx] = -1;\r\n                    }\r\n                    else {\r\n                        tdept = Math.sqrt(sradius - txz);\r\n                        deptyName[indx] = Math.floor(tdept);\r\n                    }\r\n                    ++indx;\r\n                }\r\n            }\r\n            widxz[name] = widxzR;\r\n            depty[name] = deptyName;\r\n        }\r\n    }\r\n    function fillatom(idx) {\r\n        var ci = idx * 3;\r\n        var ri = idx;\r\n        var cx, cy, cz, ox, oy, oz, mi, mj, mk, i, j, k, si, sj, sk;\r\n        var ii, jj, kk;\r\n        cx = Math.floor(0.5 + scaleFactor * (coordList[ci] + ptran[0]));\r\n        cy = Math.floor(0.5 + scaleFactor * (coordList[ci + 1] + ptran[1]));\r\n        cz = Math.floor(0.5 + scaleFactor * (coordList[ci + 2] + ptran[2]));\r\n        var at = radiusList[ri];\r\n        var deptyAt = depty[at];\r\n        var nind = 0;\r\n        var pWH = pWidth * pHeight;\r\n        var n = widxz[at];\r\n        var deptyAtNind;\r\n        for (i = 0; i < n; ++i) {\r\n            for (j = 0; j < n; ++j) {\r\n                deptyAtNind = deptyAt[nind];\r\n                if (deptyAtNind !== -1) {\r\n                    for (ii = -1; ii < 2; ++ii) {\r\n                        for (jj = -1; jj < 2; ++jj) {\r\n                            for (kk = -1; kk < 2; ++kk) {\r\n                                if (ii !== 0 && jj !== 0 && kk !== 0) {\r\n                                    mi = ii * i;\r\n                                    mk = kk * j;\r\n                                    for (k = 0; k <= deptyAtNind; ++k) {\r\n                                        mj = k * jj;\r\n                                        si = cx + mi;\r\n                                        sj = cy + mj;\r\n                                        sk = cz + mk;\r\n                                        if (si < 0 || sj < 0 || sk < 0 ||\r\n                                            si >= pLength || sj >= pWidth || sk >= pHeight) {\r\n                                            continue;\r\n                                        }\r\n                                        var index = si * pWH + sj * pHeight + sk;\r\n                                        if (!setAtomID) {\r\n                                            vpBits[index] |= INOUT;\r\n                                        }\r\n                                        else {\r\n                                            if (!(vpBits[index] & INOUT)) {\r\n                                                vpBits[index] |= INOUT;\r\n                                                vpAtomID[index] = idx;\r\n                                            }\r\n                                            else if (vpBits[index] & INOUT) {\r\n                                                var ci2 = vpAtomID[index];\r\n                                                if (ci2 !== ci) {\r\n                                                    ox = cx + mi - Math.floor(0.5 + scaleFactor * (coordList[ci2] + ptran[0]));\r\n                                                    oy = cy + mj - Math.floor(0.5 + scaleFactor * (coordList[ci2 + 1] + ptran[1]));\r\n                                                    oz = cz + mk - Math.floor(0.5 + scaleFactor * (coordList[ci2 + 2] + ptran[2]));\r\n                                                    if (mi * mi + mj * mj + mk * mk < ox * ox + oy * oy + oz * oz) {\r\n                                                        vpAtomID[index] = idx;\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    } // k\r\n                                } // if\r\n                            } // kk\r\n                        } // jj\r\n                    } // ii\r\n                } // if\r\n                nind++;\r\n            } // j\r\n        } // i\r\n    }\r\n    function fillvoxels(btype) {\r\n        console.time('EDTSurface fillvoxels');\r\n        var i, il;\r\n        for (i = 0, il = vpBits.length; i < il; ++i) {\r\n            vpBits[i] = 0;\r\n            if (btype)\r\n                vpDistance[i] = -1.0;\r\n            if (setAtomID)\r\n                vpAtomID[i] = -1;\r\n        }\r\n        for (i = 0, il = coordList.length / 3; i < il; ++i) {\r\n            fillatom(i);\r\n        }\r\n        for (i = 0, il = vpBits.length; i < il; ++i) {\r\n            if (vpBits[i] & INOUT) {\r\n                vpBits[i] |= ISDONE;\r\n            }\r\n        }\r\n        console.timeEnd('EDTSurface fillvoxels');\r\n    }\r\n    function fillAtomWaals(idx) {\r\n        var ci = idx * 3;\r\n        var ri = idx;\r\n        var cx;\r\n        var cy;\r\n        var cz;\r\n        var ox;\r\n        var oy;\r\n        var oz;\r\n        var nind = 0;\r\n        var mi;\r\n        var mj;\r\n        var mk;\r\n        var si;\r\n        var sj;\r\n        var sk;\r\n        var i;\r\n        var j;\r\n        var k;\r\n        var ii;\r\n        var jj;\r\n        var kk;\r\n        var n;\r\n        cx = Math.floor(0.5 + scaleFactor * (coordList[ci] + ptran[0]));\r\n        cy = Math.floor(0.5 + scaleFactor * (coordList[ci + 1] + ptran[1]));\r\n        cz = Math.floor(0.5 + scaleFactor * (coordList[ci + 2] + ptran[2]));\r\n        var at = radiusList[ri];\r\n        var pWH = pWidth * pHeight;\r\n        for (i = 0, n = widxz[at]; i < n; ++i) {\r\n            for (j = 0; j < n; ++j) {\r\n                if (depty[at][nind] !== -1) {\r\n                    for (ii = -1; ii < 2; ++ii) {\r\n                        for (jj = -1; jj < 2; ++jj) {\r\n                            for (kk = -1; kk < 2; ++kk) {\r\n                                if (ii !== 0 && jj !== 0 && kk !== 0) {\r\n                                    mi = ii * i;\r\n                                    mk = kk * j;\r\n                                    for (k = 0; k <= depty[at][nind]; ++k) {\r\n                                        mj = k * jj;\r\n                                        si = cx + mi;\r\n                                        sj = cy + mj;\r\n                                        sk = cz + mk;\r\n                                        if (si < 0 || sj < 0 || sk < 0 ||\r\n                                            si >= pLength || sj >= pWidth || sk >= pHeight) {\r\n                                            continue;\r\n                                        }\r\n                                        var index = si * pWH + sj * pHeight + sk;\r\n                                        if (!(vpBits[index] & ISDONE)) {\r\n                                            vpBits[index] |= ISDONE;\r\n                                            if (setAtomID)\r\n                                                vpAtomID[index] = idx;\r\n                                        }\r\n                                        else if (setAtomID) {\r\n                                            var ci2 = vpAtomID[index];\r\n                                            ox = Math.floor(0.5 + scaleFactor * (coordList[ci2] + ptran[0]));\r\n                                            oy = Math.floor(0.5 + scaleFactor * (coordList[ci2 + 1] + ptran[1]));\r\n                                            oz = Math.floor(0.5 + scaleFactor * (coordList[ci2 + 2] + ptran[2]));\r\n                                            if (mi * mi + mj * mj + mk * mk < ox * ox + oy * oy + oz * oz) {\r\n                                                vpAtomID[index] = idx;\r\n                                            }\r\n                                        }\r\n                                    } // k\r\n                                } // if\r\n                            } // kk\r\n                        } // jj\r\n                    } // ii\r\n                } // if\r\n                nind++;\r\n            } // j\r\n        } // i\r\n    }\r\n    function fillvoxelswaals() {\r\n        var i, il;\r\n        for (i = 0, il = vpBits.length; i < il; ++i) {\r\n            vpBits[i] &= ~ISDONE; // not isdone\r\n        }\r\n        for (i = 0, il = coordList.length / 3; i < il; ++i) {\r\n            fillAtomWaals(i);\r\n        }\r\n    }\r\n    function buildboundary() {\r\n        var i, j, k;\r\n        var pWH = pWidth * pHeight;\r\n        for (i = 0; i < pLength; ++i) {\r\n            for (j = 0; j < pHeight; ++j) {\r\n                for (k = 0; k < pWidth; ++k) {\r\n                    var index = i * pWH + k * pHeight + j;\r\n                    if (vpBits[index] & INOUT) {\r\n                        // var flagbound = false;\r\n                        var ii = 0;\r\n                        // while( !flagbound && ii < 26 ){\r\n                        while (ii < 26) {\r\n                            var ti = i + nb[ii][0];\r\n                            var tj = j + nb[ii][2];\r\n                            var tk = k + nb[ii][1];\r\n                            if (ti > -1 && ti < pLength &&\r\n                                tk > -1 && tk < pWidth &&\r\n                                tj > -1 && tj < pHeight &&\r\n                                !(vpBits[ti * pWH + tk * pHeight + tj] & INOUT)) {\r\n                                vpBits[index] |= ISBOUND;\r\n                                // flagbound = true;\r\n                                break;\r\n                            }\r\n                            else {\r\n                                ii++;\r\n                            }\r\n                        }\r\n                    }\r\n                } // k\r\n            } // j\r\n        } // i\r\n    }\r\n    function fastdistancemap() {\r\n        console.time('EDTSurface fastdistancemap');\r\n        var i, j, k, n;\r\n        var boundPoint = makeGrid(pLength, pWidth, pHeight, Uint16Array, 3);\r\n        var pWH = pWidth * pHeight;\r\n        var cutRSq = cutRadius * cutRadius;\r\n        var totalsurfacevox = 0;\r\n        // var totalinnervox = 0;\r\n        var index;\r\n        for (i = 0; i < pLength; ++i) {\r\n            for (j = 0; j < pWidth; ++j) {\r\n                for (k = 0; k < pHeight; ++k) {\r\n                    index = i * pWH + j * pHeight + k;\r\n                    vpBits[index] &= ~ISDONE;\r\n                    if (vpBits[index] & INOUT) {\r\n                        if (vpBits[index] & ISBOUND) {\r\n                            boundPoint.set(i, j, k, i, j, k);\r\n                            vpDistance[index] = 0;\r\n                            vpBits[index] |= ISDONE;\r\n                            totalsurfacevox += 1;\r\n                        } /* else{\r\n                            totalinnervox += 1;\r\n                        } */\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var inarray = new Int32Array(3 * totalsurfacevox);\r\n        var positin = 0;\r\n        var outarray = new Int32Array(3 * totalsurfacevox);\r\n        var positout = 0;\r\n        for (i = 0; i < pLength; ++i) {\r\n            for (j = 0; j < pWidth; ++j) {\r\n                for (k = 0; k < pHeight; ++k) {\r\n                    index = i * pWH + j * pHeight + k;\r\n                    if (vpBits[index] & ISBOUND) {\r\n                        inarray[positin] = i;\r\n                        inarray[positin + 1] = j;\r\n                        inarray[positin + 2] = k;\r\n                        positin += 3;\r\n                        vpBits[index] &= ~ISBOUND;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        do {\r\n            positout = fastoneshell(inarray, boundPoint, positin, outarray);\r\n            positin = 0;\r\n            for (i = 0, n = positout; i < n; i += 3) {\r\n                index = pWH * outarray[i] + pHeight * outarray[i + 1] + outarray[i + 2];\r\n                vpBits[index] &= ~ISBOUND;\r\n                if (vpDistance[index] <= 1.0404 * cutRSq) {\r\n                    // if( vpDistance[ index ] <= 1.02 * cutRadius ){\r\n                    inarray[positin] = outarray[i];\r\n                    inarray[positin + 1] = outarray[i + 1];\r\n                    inarray[positin + 2] = outarray[i + 2];\r\n                    positin += 3;\r\n                }\r\n            }\r\n        } while (positin > 0);\r\n        // var cutsf = Math.max( 0, scaleFactor - 0.5 );\r\n        // cutoff = cutRadius - 0.5 / ( 0.1 + cutsf );\r\n        var cutoffSq = cutoff * cutoff;\r\n        var index2;\r\n        var bp = new Uint16Array(3);\r\n        for (i = 0; i < pLength; ++i) {\r\n            for (j = 0; j < pWidth; ++j) {\r\n                for (k = 0; k < pHeight; ++k) {\r\n                    index = i * pWH + j * pHeight + k;\r\n                    vpBits[index] &= ~ISBOUND;\r\n                    // ses solid\r\n                    if (vpBits[index] & INOUT) {\r\n                        if (!(vpBits[index] & ISDONE) ||\r\n                            ((vpBits[index] & ISDONE) && vpDistance[index] >= cutoffSq)) {\r\n                            vpBits[index] |= ISBOUND;\r\n                            if (setAtomID && (vpBits[index] & ISDONE)) {\r\n                                boundPoint.toArray(i, j, k, bp);\r\n                                index2 = bp[0] * pWH + bp[1] * pHeight + bp[2];\r\n                                vpAtomID[index] = vpAtomID[index2];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        console.timeEnd('EDTSurface fastdistancemap');\r\n    }\r\n    function fastoneshell(inarray, boundPoint, positin, outarray) {\r\n        // *allocout,voxel2\r\n        // ***boundPoint, int*\r\n        // outnum, int *elimi)\r\n        var tx, ty, tz;\r\n        var dx, dy, dz;\r\n        var i, j, n;\r\n        var square;\r\n        var index;\r\n        var nbj;\r\n        var bp = new Uint16Array(3);\r\n        var positout = 0;\r\n        if (positin === 0) {\r\n            return positout;\r\n        }\r\n        var tnvix = -1;\r\n        var tnviy = -1;\r\n        var tnviz = -1;\r\n        var pWH = pWidth * pHeight;\r\n        for (i = 0, n = positin; i < n; i += 3) {\r\n            tx = inarray[i];\r\n            ty = inarray[i + 1];\r\n            tz = inarray[i + 2];\r\n            boundPoint.toArray(tx, ty, tz, bp);\r\n            for (j = 0; j < 6; ++j) {\r\n                nbj = nb[j];\r\n                tnvix = tx + nbj[0];\r\n                tnviy = ty + nbj[1];\r\n                tnviz = tz + nbj[2];\r\n                if (tnvix < pLength && tnvix > -1 &&\r\n                    tnviy < pWidth && tnviy > -1 &&\r\n                    tnviz < pHeight && tnviz > -1) {\r\n                    index = tnvix * pWH + pHeight * tnviy + tnviz;\r\n                    if ((vpBits[index] & INOUT) && !(vpBits[index] & ISDONE)) {\r\n                        boundPoint.fromArray(tnvix, tnviy, tnviz, bp);\r\n                        dx = tnvix - bp[0];\r\n                        dy = tnviy - bp[1];\r\n                        dz = tnviz - bp[2];\r\n                        square = dx * dx + dy * dy + dz * dz;\r\n                        // square = Math.sqrt( square );\r\n                        vpDistance[index] = square;\r\n                        vpBits[index] |= ISDONE;\r\n                        vpBits[index] |= ISBOUND;\r\n                        outarray[positout] = tnvix;\r\n                        outarray[positout + 1] = tnviy;\r\n                        outarray[positout + 2] = tnviz;\r\n                        positout += 3;\r\n                    }\r\n                    else if ((vpBits[index] & INOUT) && (vpBits[index] & ISDONE)) {\r\n                        dx = tnvix - bp[0];\r\n                        dy = tnviy - bp[1];\r\n                        dz = tnviz - bp[2];\r\n                        square = dx * dx + dy * dy + dz * dz;\r\n                        // square = Math.sqrt( square );\r\n                        if (square < vpDistance[index]) {\r\n                            boundPoint.fromArray(tnvix, tnviy, tnviz, bp);\r\n                            vpDistance[index] = square;\r\n                            if (!(vpBits[index] & ISBOUND)) {\r\n                                vpBits[index] |= ISBOUND;\r\n                                outarray[positout] = tnvix;\r\n                                outarray[positout + 1] = tnviy;\r\n                                outarray[positout + 2] = tnviz;\r\n                                positout += 3;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (i = 0, n = positin; i < n; i += 3) {\r\n            tx = inarray[i];\r\n            ty = inarray[i + 1];\r\n            tz = inarray[i + 2];\r\n            boundPoint.toArray(tx, ty, tz, bp);\r\n            for (j = 6; j < 18; j++) {\r\n                nbj = nb[j];\r\n                tnvix = tx + nbj[0];\r\n                tnviy = ty + nbj[1];\r\n                tnviz = tz + nbj[2];\r\n                if (tnvix < pLength && tnvix > -1 &&\r\n                    tnviy < pWidth && tnviy > -1 &&\r\n                    tnviz < pHeight && tnviz > -1) {\r\n                    index = tnvix * pWH + pHeight * tnviy + tnviz;\r\n                    if ((vpBits[index] & INOUT) && !(vpBits[index] & ISDONE)) {\r\n                        boundPoint.fromArray(tnvix, tnviy, tnviz, bp);\r\n                        dx = tnvix - bp[0];\r\n                        dy = tnviy - bp[1];\r\n                        dz = tnviz - bp[2];\r\n                        square = dx * dx + dy * dy + dz * dz;\r\n                        // square = Math.sqrt( square );\r\n                        vpDistance[index] = square;\r\n                        vpBits[index] |= ISDONE;\r\n                        vpBits[index] |= ISBOUND;\r\n                        outarray[positout] = tnvix;\r\n                        outarray[positout + 1] = tnviy;\r\n                        outarray[positout + 2] = tnviz;\r\n                        positout += 3;\r\n                    }\r\n                    else if ((vpBits[index] & INOUT) && (vpBits[index] & ISDONE)) {\r\n                        dx = tnvix - bp[0];\r\n                        dy = tnviy - bp[1];\r\n                        dz = tnviz - bp[2];\r\n                        square = dx * dx + dy * dy + dz * dz;\r\n                        // square = Math.sqrt( square );\r\n                        if (square < vpDistance[index]) {\r\n                            boundPoint.fromArray(tnvix, tnviy, tnviz, bp);\r\n                            vpDistance[index] = square;\r\n                            if (!(vpBits[index] & ISBOUND)) {\r\n                                vpBits[index] |= ISBOUND;\r\n                                outarray[positout] = tnvix;\r\n                                outarray[positout + 1] = tnviy;\r\n                                outarray[positout + 2] = tnviz;\r\n                                positout += 3;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (i = 0, n = positin; i < n; i += 3) {\r\n            tx = inarray[i];\r\n            ty = inarray[i + 1];\r\n            tz = inarray[i + 2];\r\n            boundPoint.toArray(tx, ty, tz, bp);\r\n            for (j = 18; j < 26; j++) {\r\n                nbj = nb[j];\r\n                tnvix = tx + nbj[0];\r\n                tnviy = ty + nbj[1];\r\n                tnviz = tz + nbj[2];\r\n                if (tnvix < pLength && tnvix > -1 &&\r\n                    tnviy < pWidth && tnviy > -1 &&\r\n                    tnviz < pHeight && tnviz > -1) {\r\n                    index = tnvix * pWH + pHeight * tnviy + tnviz;\r\n                    if ((vpBits[index] & INOUT) && !(vpBits[index] & ISDONE)) {\r\n                        boundPoint.fromArray(tnvix, tnviy, tnviz, bp);\r\n                        dx = tnvix - bp[0];\r\n                        dy = tnviy - bp[1];\r\n                        dz = tnviz - bp[2];\r\n                        square = dx * dx + dy * dy + dz * dz;\r\n                        // square = Math.sqrt( square );\r\n                        vpDistance[index] = square;\r\n                        vpBits[index] |= ISDONE;\r\n                        vpBits[index] |= ISBOUND;\r\n                        outarray[positout] = tnvix;\r\n                        outarray[positout + 1] = tnviy;\r\n                        outarray[positout + 2] = tnviz;\r\n                        positout += 3;\r\n                    }\r\n                    else if ((vpBits[index] & INOUT) && (vpBits[index] & ISDONE)) {\r\n                        dx = tnvix - bp[0];\r\n                        dy = tnviy - bp[1];\r\n                        dz = tnviz - bp[2];\r\n                        square = dx * dx + dy * dy + dz * dz;\r\n                        // square = Math.sqrt( square );\r\n                        if (square < vpDistance[index]) {\r\n                            boundPoint.fromArray(tnvix, tnviy, tnviz, bp);\r\n                            vpDistance[index] = square;\r\n                            if (!(vpBits[index] & ISBOUND)) {\r\n                                vpBits[index] |= ISBOUND;\r\n                                outarray[positout] = tnvix;\r\n                                outarray[positout + 1] = tnviy;\r\n                                outarray[positout + 2] = tnviz;\r\n                                positout += 3;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return positout;\r\n    }\r\n    function marchingcubeinit(stype) {\r\n        var i;\r\n        var n = vpBits.length;\r\n        if (stype === 'vws') {\r\n            for (i = 0; i < n; ++i) {\r\n                vpBits[i] &= ~ISBOUND;\r\n                vpBits[i] = (vpBits[i] & ISDONE) ? 1 : 0;\r\n            }\r\n        }\r\n        else if (stype === 'ms') { // ses without vdw => ms\r\n            for (i = 0; i < n; ++i) {\r\n                vpBits[i] &= ~ISDONE;\r\n                if (vpBits[i] & ISBOUND) {\r\n                    vpBits[i] |= ISDONE;\r\n                }\r\n                vpBits[i] &= ~ISBOUND;\r\n                vpBits[i] = (vpBits[i] & ISDONE) ? 1 : 0;\r\n            }\r\n        }\r\n        else if (stype === 'ses') {\r\n            for (i = 0; i < n; ++i) {\r\n                if ((vpBits[i] & ISBOUND) && (vpBits[i] & ISDONE)) {\r\n                    vpBits[i] &= ~ISBOUND;\r\n                }\r\n                else if ((vpBits[i] & ISBOUND) && !(vpBits[i] & ISDONE)) {\r\n                    vpBits[i] |= ISDONE;\r\n                }\r\n                vpBits[i] = (vpBits[i] & ISDONE) ? 1 : 0;\r\n            }\r\n        }\r\n        else if (stype === 'sas') {\r\n            for (i = 0; i < n; ++i) {\r\n                vpBits[i] &= ~ISBOUND;\r\n                vpBits[i] = (vpBits[i] & ISDONE) ? 1 : 0;\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.assign(EDTSurface, { __deps: [\r\n        getSurfaceGrid, getRadiusDict, VolumeSurface, computeBoundingBox, makeGrid\r\n    ] });\r\nexport default EDTSurface;\r\n//# sourceMappingURL=edt-surface.js.map","/**\r\n * @file AV Surface\r\n * @author Fred Ludlow <fred.ludlow@gmail.com>\r\n * @private\r\n */\r\nimport { getSurfaceGrid } from './surface-utils.js';\r\nimport { VolumeSurface } from './volume.js';\r\nimport { uniformArray } from '../math/array-utils.js';\r\nimport { computeBoundingBox, v3multiplyScalar, v3cross, v3normalize } from '../math/vector-utils.js';\r\nimport { defaults } from '../utils';\r\nfunction makeAVHash(atomsX, atomsY, atomsZ, atomsR, min, max, maxDistance) {\r\n    maxDistance = Math.max(0.1, maxDistance); // Avoid maxDistance of zero, see #802\r\n    var nAtoms = atomsX.length;\r\n    var minX = min[0];\r\n    var minY = min[1];\r\n    var minZ = min[2];\r\n    var maxX = max[0];\r\n    var maxY = max[1];\r\n    var maxZ = max[2];\r\n    function hashFunc(w, minW) {\r\n        return Math.floor((w - minW) / maxDistance);\r\n    }\r\n    var iDim = hashFunc(maxX, minX) + 1;\r\n    var jDim = hashFunc(maxY, minY) + 1;\r\n    var kDim = hashFunc(maxZ, minZ) + 1;\r\n    var nCells = iDim * jDim * kDim;\r\n    var jkDim = jDim * kDim;\r\n    /* Get cellID for cartesian x,y,z */\r\n    var cellID = function (x, y, z) {\r\n        return (((hashFunc(x, minX) * jDim) + hashFunc(y, minY)) * kDim) + hashFunc(z, minZ);\r\n    };\r\n    /* Initial building, could probably be optimized further */\r\n    var preHash = []; // preHash[ cellID ] = [ atomId1, atomId2 ];\r\n    for (var i = 0; i < nAtoms; i++) {\r\n        var cid = cellID(atomsX[i], atomsY[i], atomsZ[i]);\r\n        if (preHash[cid] === undefined) {\r\n            preHash[cid] = [i];\r\n        }\r\n        else {\r\n            preHash[cid].push(i);\r\n        }\r\n    }\r\n    var cellOffsets = new Uint32Array(nCells);\r\n    var cellLengths = new Uint16Array(nCells);\r\n    var data = new Uint32Array(nAtoms);\r\n    var offset = 0;\r\n    var maxCellLength = 0;\r\n    for (i = 0; i < nCells; i++) {\r\n        var start = cellOffsets[i] = offset;\r\n        var subArray = preHash[i];\r\n        if (subArray !== undefined) {\r\n            for (var j = 0; j < subArray.length; j++) {\r\n                data[offset] = subArray[j];\r\n                offset++;\r\n            }\r\n        }\r\n        var cellLength = offset - start;\r\n        cellLengths[i] = cellLength;\r\n        if (cellLength > maxCellLength) {\r\n            maxCellLength = cellLength;\r\n        }\r\n    }\r\n    // Maximum number of neighbours we could ever produce (27 adjacent cells of equal population)\r\n    const neighbourListLength = (27 * maxCellLength) + 1;\r\n    /**\r\n     * Populate the supplied out array with atom indices that are within rAtom + rExtra\r\n     * of x,y,z\r\n     *\r\n     * -1 in out array indicates the end of the list\r\n     *\r\n     * @param  {Float} x - x coordinate\r\n     * @param  {Float} y - y coordinate\r\n     * @param  {Float} z - z coordinate\r\n     * @param  {Float} rExtra - additional radius\r\n     * @param  {Float32Array} out - pre-allocated output array\r\n     * @return {undefined}\r\n     */\r\n    const withinRadii = function (x, y, z, rExtra, out) {\r\n        var outIdx = 0;\r\n        var nearI = hashFunc(x, minX);\r\n        var nearJ = hashFunc(y, minY);\r\n        var nearK = hashFunc(z, minZ);\r\n        var loI = Math.max(0, nearI - 1);\r\n        var loJ = Math.max(0, nearJ - 1);\r\n        var loK = Math.max(0, nearK - 1);\r\n        var hiI = Math.min(iDim, nearI + 2);\r\n        var hiJ = Math.min(jDim, nearJ + 2);\r\n        var hiK = Math.min(kDim, nearK + 2);\r\n        for (var i = loI; i < hiI; ++i) {\r\n            var iOffset = i * jkDim;\r\n            for (var j = loJ; j < hiJ; ++j) {\r\n                var jOffset = j * kDim;\r\n                for (var k = loK; k < hiK; ++k) {\r\n                    var cid = iOffset + jOffset + k;\r\n                    var cellStart = cellOffsets[cid];\r\n                    var cellEnd = cellStart + cellLengths[cid];\r\n                    for (var dataIndex = cellStart; dataIndex < cellEnd; dataIndex++) {\r\n                        var atomIndex = data[dataIndex];\r\n                        var dx = atomsX[atomIndex] - x;\r\n                        var dy = atomsY[atomIndex] - y;\r\n                        var dz = atomsZ[atomIndex] - z;\r\n                        var rSum = atomsR[atomIndex] + rExtra;\r\n                        if ((dx * dx + dy * dy + dz * dz) <= (rSum * rSum)) {\r\n                            out[outIdx++] = data[dataIndex];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Add terminator\r\n        out[outIdx] = -1;\r\n    };\r\n    return {\r\n        neighbourListLength: neighbourListLength,\r\n        withinRadii: withinRadii\r\n    };\r\n}\r\nfunction AVSurface(coordList, radiusList, indexList) {\r\n    // Field generation method adapted from AstexViewer (Mike Hartshorn)\r\n    // by Fred Ludlow.\r\n    // Other parts based heavily on NGL (Alexander Rose) EDT Surface class\r\n    //\r\n    // Should work as a drop-in alternative to EDTSurface (though some of\r\n    // the EDT paramters are not relevant in this method).\r\n    const nAtoms = radiusList.length;\r\n    const x = new Float32Array(nAtoms);\r\n    const y = new Float32Array(nAtoms);\r\n    const z = new Float32Array(nAtoms);\r\n    for (let i = 0; i < nAtoms; i++) {\r\n        const ci = 3 * i;\r\n        x[i] = coordList[ci];\r\n        y[i] = coordList[ci + 1];\r\n        z[i] = coordList[ci + 2];\r\n    }\r\n    let bbox = computeBoundingBox(coordList);\r\n    if (coordList.length === 0) {\r\n        bbox[0].set([0, 0, 0]);\r\n        bbox[1].set([0, 0, 0]);\r\n    }\r\n    const min = bbox[0];\r\n    const max = bbox[1];\r\n    let r, r2; // Atom positions, expanded radii (squared)\r\n    let maxRadius;\r\n    // Parameters\r\n    let probeRadius, scaleFactor, setAtomID, probePositions;\r\n    // Cache last value for obscured test\r\n    let lastClip = -1;\r\n    // Grid params\r\n    let dim, matrix, grid, atomIndex;\r\n    // grid indices -> xyz coords\r\n    let gridx, gridy, gridz;\r\n    // Lookup tables:\r\n    let sinTable, cosTable;\r\n    // Spatial Hash\r\n    let hash;\r\n    // Neighbour array to be filled by hash\r\n    let neighbours;\r\n    // Vectors for Torus Projection\r\n    const atob = new Float32Array([0.0, 0.0, 0.0]);\r\n    const mid = new Float32Array([0.0, 0.0, 0.0]);\r\n    const n1 = new Float32Array([0.0, 0.0, 0.0]);\r\n    const n2 = new Float32Array([0.0, 0.0, 0.0]);\r\n    let ngTorus;\r\n    function init(_probeRadius, _scaleFactor, _setAtomID, _probePositions) {\r\n        probeRadius = defaults(_probeRadius, 1.4);\r\n        scaleFactor = defaults(_scaleFactor, 2.0);\r\n        setAtomID = defaults(_setAtomID, true);\r\n        probePositions = defaults(_probePositions, 30);\r\n        r = new Float32Array(nAtoms);\r\n        r2 = new Float32Array(nAtoms);\r\n        for (let i = 0; i < r.length; ++i) {\r\n            var rExt = radiusList[i] + probeRadius;\r\n            r[i] = rExt;\r\n            r2[i] = rExt * rExt;\r\n        }\r\n        maxRadius = 0;\r\n        for (let j = 0; j < r.length; ++j) {\r\n            if (r[j] > maxRadius)\r\n                maxRadius = r[j];\r\n        }\r\n        initializeGrid();\r\n        initializeAngleTables();\r\n        initializeHash();\r\n        lastClip = -1;\r\n    }\r\n    function fillGridDim(a, start, step) {\r\n        for (let i = 0; i < a.length; i++) {\r\n            a[i] = start + (step * i);\r\n        }\r\n    }\r\n    function initializeGrid() {\r\n        const surfGrid = getSurfaceGrid(min, max, maxRadius, scaleFactor, 0.0);\r\n        scaleFactor = surfGrid.scaleFactor;\r\n        dim = surfGrid.dim;\r\n        matrix = surfGrid.matrix;\r\n        ngTorus = Math.max(5, 2 + Math.floor(probeRadius * scaleFactor));\r\n        grid = uniformArray(dim[0] * dim[1] * dim[2], -1001.0);\r\n        atomIndex = new Int32Array(grid.length);\r\n        gridx = new Float32Array(dim[0]);\r\n        gridy = new Float32Array(dim[1]);\r\n        gridz = new Float32Array(dim[2]);\r\n        fillGridDim(gridx, min[0], 1 / scaleFactor);\r\n        fillGridDim(gridy, min[1], 1 / scaleFactor);\r\n        fillGridDim(gridz, min[2], 1 / scaleFactor);\r\n    }\r\n    function initializeAngleTables() {\r\n        var theta = 0.0;\r\n        var step = 2 * Math.PI / probePositions;\r\n        cosTable = new Float32Array(probePositions);\r\n        sinTable = new Float32Array(probePositions);\r\n        for (var i = 0; i < probePositions; i++) {\r\n            cosTable[i] = Math.cos(theta);\r\n            sinTable[i] = Math.sin(theta);\r\n            theta += step;\r\n        }\r\n    }\r\n    function initializeHash() {\r\n        hash = makeAVHash(x, y, z, r, min, max, 2.01 * maxRadius);\r\n        neighbours = new Int32Array(hash.neighbourListLength);\r\n    }\r\n    function obscured(x, y, z, a, b) {\r\n        // Is the point at x,y,z obscured by any of the atoms\r\n        // specifeid by indices in neighbours. Ignore indices\r\n        // a and b (these are the relevant atoms in projectPoints/Torii)\r\n        // Cache the last clipped atom (as very often the same one in\r\n        // subsequent calls)\r\n        let ai;\r\n        if (lastClip !== -1) {\r\n            ai = lastClip;\r\n            if (ai !== a && ai !== b && singleAtomObscures(ai, x, y, z)) {\r\n                return ai;\r\n            }\r\n            else {\r\n                lastClip = -1;\r\n            }\r\n        }\r\n        var ni = 0;\r\n        ai = neighbours[ni];\r\n        while (ai >= 0) {\r\n            if (ai !== a && ai !== b && singleAtomObscures(ai, x, y, z)) {\r\n                lastClip = ai;\r\n                return ai;\r\n            }\r\n            ai = neighbours[++ni];\r\n        }\r\n        lastClip = -1;\r\n        return -1;\r\n    }\r\n    function singleAtomObscures(ai, x, y, z) {\r\n        var ci = 3 * ai;\r\n        var ra2 = r2[ai];\r\n        var dx = coordList[ci] - x;\r\n        var dy = coordList[ci + 1] - y;\r\n        var dz = coordList[ci + 2] - z;\r\n        var d2 = dx * dx + dy * dy + dz * dz;\r\n        return d2 < ra2;\r\n    }\r\n    function projectPoints() {\r\n        // For each atom:\r\n        //     Iterate over a subsection of the grid, for each point:\r\n        //         If current value < 0.0, unvisited, set positive\r\n        //\r\n        //         In any case: Project this point onto surface of the atomic sphere\r\n        //         If this projected point is not obscured by any other atom\r\n        //             Calcualte delta distance and set grid value to minimum of\r\n        //             itself and delta\r\n        // Should we alias frequently accessed closure variables??\r\n        // Assume JS engine capable of optimizing this\r\n        // anyway...\r\n        for (var i = 0; i < nAtoms; i++) {\r\n            var ax = x[i];\r\n            var ay = y[i];\r\n            var az = z[i];\r\n            var ar = r[i];\r\n            var ar2 = r2[i];\r\n            hash.withinRadii(ax, ay, az, ar, neighbours);\r\n            // Number of grid points, round this up...\r\n            var ng = Math.ceil(ar * scaleFactor);\r\n            // Center of the atom, mapped to grid points (take floor)\r\n            var iax = Math.floor(scaleFactor * (ax - min[0]));\r\n            var iay = Math.floor(scaleFactor * (ay - min[1]));\r\n            var iaz = Math.floor(scaleFactor * (az - min[2]));\r\n            // Extents of grid to consider for this atom\r\n            var minx = Math.max(0, iax - ng);\r\n            var miny = Math.max(0, iay - ng);\r\n            var minz = Math.max(0, iaz - ng);\r\n            // Add two to these points:\r\n            // - iax are floor'd values so this ensures coverage\r\n            // - these are loop limits (exclusive)\r\n            var maxx = Math.min(dim[0], iax + ng + 2);\r\n            var maxy = Math.min(dim[1], iay + ng + 2);\r\n            var maxz = Math.min(dim[2], iaz + ng + 2);\r\n            for (var ix = minx; ix < maxx; ix++) {\r\n                var dx = gridx[ix] - ax;\r\n                var xoffset = dim[1] * dim[2] * ix;\r\n                for (var iy = miny; iy < maxy; iy++) {\r\n                    var dy = gridy[iy] - ay;\r\n                    var dxy2 = dx * dx + dy * dy;\r\n                    var xyoffset = xoffset + dim[2] * iy;\r\n                    for (var iz = minz; iz < maxz; iz++) {\r\n                        var dz = gridz[iz] - az;\r\n                        var d2 = dxy2 + dz * dz;\r\n                        if (d2 < ar2) {\r\n                            var idx = iz + xyoffset;\r\n                            if (grid[idx] < 0.0) {\r\n                                // Unvisited, make positive\r\n                                grid[idx] = -grid[idx];\r\n                            }\r\n                            // Project on to the surface of the sphere\r\n                            // sp is the projected point ( dx, dy, dz ) * ( ra / d )\r\n                            var d = Math.sqrt(d2);\r\n                            var ap = ar / d;\r\n                            var spx = dx * ap;\r\n                            var spy = dy * ap;\r\n                            var spz = dz * ap;\r\n                            spx += ax;\r\n                            spy += ay;\r\n                            spz += az;\r\n                            if (obscured(spx, spy, spz, i, -1) === -1) {\r\n                                var dd = ar - d;\r\n                                if (dd < grid[idx]) {\r\n                                    grid[idx] = dd;\r\n                                    if (setAtomID)\r\n                                        atomIndex[idx] = i;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function projectTorii() {\r\n        for (var i = 0; i < nAtoms; i++) {\r\n            hash.withinRadii(x[i], y[i], z[i], r[i], neighbours);\r\n            var ia = 0;\r\n            var ni = neighbours[ia];\r\n            while (ni >= 0) {\r\n                if (i < ni) {\r\n                    projectTorus(i, ni);\r\n                }\r\n                ni = neighbours[++ia];\r\n            }\r\n        }\r\n    }\r\n    function projectTorus(a, b) {\r\n        var r1 = r[a];\r\n        var r2 = r[b];\r\n        var dx = atob[0] = x[b] - x[a];\r\n        var dy = atob[1] = y[b] - y[a];\r\n        var dz = atob[2] = z[b] - z[a];\r\n        var d2 = dx * dx + dy * dy + dz * dz;\r\n        // This check now redundant as already done in AVHash.withinRadii\r\n        // if( d2 > (( r1 + r2 ) * ( r1 + r2 )) ){ return; }\r\n        var d = Math.sqrt(d2);\r\n        // Find angle between a->b vector and the circle\r\n        // of their intersection by cosine rule\r\n        var cosA = (r1 * r1 + d * d - r2 * r2) / (2.0 * r1 * d);\r\n        // distance along a->b at intersection\r\n        var dmp = r1 * cosA;\r\n        v3normalize(atob, atob);\r\n        // Create normal to line\r\n        normalToLine(n1, atob);\r\n        v3normalize(n1, n1);\r\n        // Cross together for second normal vector\r\n        v3cross(n2, atob, n1);\r\n        v3normalize(n2, n2);\r\n        // r is radius of circle of intersection\r\n        var rInt = Math.sqrt(r1 * r1 - dmp * dmp);\r\n        v3multiplyScalar(n1, n1, rInt);\r\n        v3multiplyScalar(n2, n2, rInt);\r\n        v3multiplyScalar(atob, atob, dmp);\r\n        mid[0] = atob[0] + x[a];\r\n        mid[1] = atob[1] + y[a];\r\n        mid[2] = atob[2] + z[a];\r\n        lastClip = -1;\r\n        var ng = ngTorus;\r\n        for (var i = 0; i < probePositions; i++) {\r\n            var cost = cosTable[i];\r\n            var sint = sinTable[i];\r\n            var px = mid[0] + cost * n1[0] + sint * n2[0];\r\n            var py = mid[1] + cost * n1[1] + sint * n2[1];\r\n            var pz = mid[2] + cost * n1[2] + sint * n2[2];\r\n            if (obscured(px, py, pz, a, b) === -1) {\r\n                // As above, iterate over our grid...\r\n                // px, py, pz in grid coords\r\n                var iax = Math.floor(scaleFactor * (px - min[0]));\r\n                var iay = Math.floor(scaleFactor * (py - min[1]));\r\n                var iaz = Math.floor(scaleFactor * (pz - min[2]));\r\n                var minx = Math.max(0, iax - ng);\r\n                var miny = Math.max(0, iay - ng);\r\n                var minz = Math.max(0, iaz - ng);\r\n                var maxx = Math.min(dim[0], iax + ng + 2);\r\n                var maxy = Math.min(dim[1], iay + ng + 2);\r\n                var maxz = Math.min(dim[2], iaz + ng + 2);\r\n                for (var ix = minx; ix < maxx; ix++) {\r\n                    dx = px - gridx[ix];\r\n                    var xoffset = dim[1] * dim[2] * ix;\r\n                    for (var iy = miny; iy < maxy; iy++) {\r\n                        dy = py - gridy[iy];\r\n                        var dxy2 = dx * dx + dy * dy;\r\n                        var xyoffset = xoffset + dim[2] * iy;\r\n                        for (var iz = minz; iz < maxz; iz++) {\r\n                            dz = pz - gridz[iz];\r\n                            d2 = dxy2 + dz * dz;\r\n                            var idx = iz + xyoffset;\r\n                            var current = grid[idx];\r\n                            if (current > 0.0 && d2 < (current * current)) {\r\n                                grid[idx] = Math.sqrt(d2);\r\n                                if (setAtomID) {\r\n                                    // Is this grid point closer to a or b?\r\n                                    // Take dot product of atob and gridpoint->p (dx, dy, dz)\r\n                                    const dp = dx * atob[0] + dy * atob[1] + dz * atob[2];\r\n                                    atomIndex[idx] = dp < 0.0 ? b : a;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function normalToLine(out, p) {\r\n        out[0] = out[1] = out[2] = 1.0;\r\n        if (p[0] !== 0) {\r\n            out[0] = (p[1] + p[2]) / -p[0];\r\n        }\r\n        else if (p[1] !== 0) {\r\n            out[1] = (p[0] + p[2]) / -p[1];\r\n        }\r\n        else if (p[2] !== 0) {\r\n            out[2] = (p[0] + p[1]) / -p[2];\r\n        }\r\n        return out;\r\n    }\r\n    function fixNegatives() {\r\n        for (var i = 0; i < grid.length; i++) {\r\n            if (grid[i] < 0)\r\n                grid[i] = 0;\r\n        }\r\n    }\r\n    function fixAtomIDs() {\r\n        for (var i = 0; i < atomIndex.length; i++) {\r\n            atomIndex[i] = indexList[atomIndex[i]];\r\n        }\r\n    }\r\n    function getVolume(probeRadius, scaleFactor, setAtomID) {\r\n        // Basic steps are:\r\n        // 1) Initialize\r\n        // 2) Project points\r\n        // 3) Project torii\r\n        console.time('AVSurface.getVolume');\r\n        console.time('AVSurface.init');\r\n        init(probeRadius, scaleFactor, setAtomID);\r\n        console.timeEnd('AVSurface.init');\r\n        console.time('AVSurface.projectPoints');\r\n        projectPoints();\r\n        console.timeEnd('AVSurface.projectPoints');\r\n        console.time('AVSurface.projectTorii');\r\n        projectTorii();\r\n        console.timeEnd('AVSurface.projectTorii');\r\n        fixNegatives();\r\n        fixAtomIDs();\r\n        console.timeEnd('AVSurface.getVolume');\r\n    }\r\n    this.getSurface = function (type, probeRadius, scaleFactor, cutoff, setAtomID, smooth, contour) {\r\n        // type and cutoff left in for compatibility with EDTSurface.getSurface\r\n        // function signature\r\n        getVolume(probeRadius, scaleFactor, setAtomID);\r\n        var volsurf = new VolumeSurface(grid, dim[2], dim[1], dim[0], atomIndex);\r\n        return volsurf.getSurface(probeRadius, false, undefined, matrix, contour);\r\n    };\r\n}\r\nObject.assign(AVSurface, { __deps: [\r\n        getSurfaceGrid, VolumeSurface, uniformArray, computeBoundingBox,\r\n        v3multiplyScalar, v3cross, v3normalize,\r\n        makeAVHash,\r\n        defaults\r\n    ] });\r\nexport { AVSurface, makeAVHash };\r\n//# sourceMappingURL=av-surface.js.map","/**\r\n * @file Molecular Surface\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { WorkerRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Worker from '../worker/worker.js';\r\nimport EDTSurface from './edt-surface.js';\r\nimport { AVSurface } from './av-surface.js';\r\nimport Surface from './surface.js';\r\nWorkerRegistry.add('molsurf', function func(e, callback) {\r\n    const a = e.data.args;\r\n    const p = e.data.params;\r\n    if (a && p) {\r\n        const SurfClass = (p.type === 'av') ? AVSurface : EDTSurface;\r\n        const surf = new SurfClass(a.coordList, a.radiusList, a.indexList);\r\n        const sd = surf.getSurface(p.type, p.probeRadius, p.scaleFactor, p.cutoff, true, p.smooth, p.contour);\r\n        const transferList = [sd.position.buffer, sd.index.buffer];\r\n        if (sd.normal)\r\n            transferList.push(sd.normal.buffer);\r\n        if (sd.atomindex)\r\n            transferList.push(sd.atomindex.buffer);\r\n        const data = {\r\n            sd: sd,\r\n            p: p\r\n        };\r\n        callback(data, transferList);\r\n    }\r\n}, [EDTSurface, AVSurface]);\r\n/**\r\n * Create Molecular surfaces\r\n */\r\nclass MolecularSurface {\r\n    constructor(structure) {\r\n        this.structure = structure;\r\n    }\r\n    _getAtomData(params) {\r\n        return this.structure.getAtomData({\r\n            what: { position: true, radius: true, index: true },\r\n            radiusParams: defaults(params.radiusParams, {\r\n                type: 'vdw', scale: 1.0\r\n            })\r\n        });\r\n    }\r\n    _makeSurface(sd, p) {\r\n        var surface = new Surface(p.name, '', sd);\r\n        surface.info.type = p.type;\r\n        surface.info.probeRadius = p.probeRadius;\r\n        surface.info.scaleFactor = p.scaleFactor;\r\n        surface.info.smooth = p.smooth;\r\n        surface.info.cutoff = p.cutoff;\r\n        return surface;\r\n    }\r\n    /**\r\n     * Get molecular surface\r\n     * @param {MolecularSurfaceParameters} params - parameters for surface creation\r\n     * @return {Surface} the surface\r\n     */\r\n    getSurface(params) {\r\n        const p = params || {};\r\n        const atomData = this._getAtomData(params);\r\n        const coordList = atomData.position;\r\n        const radiusList = atomData.radius;\r\n        const indexList = atomData.index;\r\n        const SurfClass = (p.type === 'av') ? AVSurface : EDTSurface;\r\n        const surf = new SurfClass(coordList, radiusList, indexList);\r\n        const sd = surf.getSurface(p.type, p.probeRadius, p.scaleFactor, p.cutoff, true, p.smooth, p.contour);\r\n        return this._makeSurface(sd, p);\r\n    }\r\n    /**\r\n     * Get molecular surface asynchronous\r\n     * @param {MolecularSurfaceParameters} params - parameters for surface creation\r\n     * @param {function(surface: Surface)} callback - function to be called after surface is created\r\n     * @return {undefined}\r\n     */\r\n    getSurfaceWorker(params, callback) {\r\n        const p = Object.assign({}, params);\r\n        if (window.hasOwnProperty('Worker')) {\r\n            if (this.worker === undefined) {\r\n                this.worker = new Worker('molsurf');\r\n            }\r\n            const atomData = this._getAtomData(params);\r\n            const coordList = atomData.position;\r\n            const radiusList = atomData.radius;\r\n            const indexList = atomData.index;\r\n            const msg = {\r\n                args: {\r\n                    coordList: coordList,\r\n                    radiusList: radiusList,\r\n                    indexList: indexList\r\n                },\r\n                params: p\r\n            };\r\n            const transferList = [\r\n                coordList.buffer, radiusList.buffer, indexList.buffer\r\n            ];\r\n            this.worker.post(msg, transferList, (e) => {\r\n                callback(this._makeSurface(e.data.sd, p));\r\n            }, (e) => {\r\n                console.warn('MolecularSurface.getSurfaceWorker error - trying without worker', e);\r\n                this.worker.terminate();\r\n                this.worker = undefined;\r\n                const surface = this.getSurface(p);\r\n                callback(surface);\r\n            });\r\n        }\r\n        else {\r\n            const surface = this.getSurface(p);\r\n            callback(surface);\r\n        }\r\n    }\r\n    /**\r\n     * Cleanup\r\n     * @return {undefined}\r\n     */\r\n    dispose() {\r\n        if (this.worker)\r\n            this.worker.terminate();\r\n    }\r\n}\r\nexport default MolecularSurface;\r\n//# sourceMappingURL=molecular-surface.js.map","/**\r\n * @file Molecular Surface Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport MolecularSurface from '../surface/molecular-surface.js';\r\nimport SurfaceBuffer from '../buffer/surface-buffer.js';\r\nimport ContourBuffer from '../buffer/contour-buffer.js';\r\nimport DoubleSidedBuffer from '../buffer/doublesided-buffer';\r\nimport Selection from '../selection/selection.js';\r\n// @ts-ignore: unused import Volume required for declaration only\r\nimport { Vector3 } from '../ngl';\r\n/**\r\n * Molecular Surface Representation\r\n */\r\nclass MolecularSurfaceRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'surface';\r\n        this.parameters = Object.assign({\r\n            surfaceType: {\r\n                type: 'select',\r\n                rebuild: true,\r\n                options: {\r\n                    'vws': 'vws',\r\n                    'sas': 'sas',\r\n                    'ms': 'ms',\r\n                    'ses': 'ses',\r\n                    'av': 'av'\r\n                }\r\n            },\r\n            probeRadius: {\r\n                type: 'number',\r\n                precision: 1,\r\n                max: 20,\r\n                min: 0,\r\n                rebuild: true\r\n            },\r\n            smooth: {\r\n                type: 'integer',\r\n                precision: 1,\r\n                max: 10,\r\n                min: 0,\r\n                rebuild: true\r\n            },\r\n            scaleFactor: {\r\n                type: 'number',\r\n                precision: 1,\r\n                max: 5,\r\n                min: 0,\r\n                rebuild: true\r\n            },\r\n            cutoff: {\r\n                type: 'number',\r\n                precision: 2,\r\n                max: 50,\r\n                min: 0,\r\n                rebuild: true\r\n            },\r\n            contour: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            background: {\r\n                type: 'boolean', rebuild: true // FIXME\r\n            },\r\n            opaqueBack: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            filterSele: {\r\n                type: 'text', rebuild: true\r\n            },\r\n            colorVolume: {\r\n                type: 'hidden'\r\n            },\r\n            useWorker: {\r\n                type: 'boolean', rebuild: true\r\n            }\r\n        }, this.parameters, {\r\n            radius: null,\r\n            scale: null\r\n        });\r\n        this.__infoList = [];\r\n        // TODO find a more direct way\r\n        this.structure.signals.refreshed.add(() => {\r\n            this.__forceNewMolsurf = true;\r\n        });\r\n        this.toBePrepared = true;\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'uniform');\r\n        p.colorValue = defaults(p.colorValue, 0xDDDDDD);\r\n        p.disablePicking = defaults(p.disablePicking, true);\r\n        this.surfaceType = defaults(p.surfaceType, 'ms');\r\n        this.probeRadius = defaults(p.probeRadius, 1.4);\r\n        this.smooth = defaults(p.smooth, 2);\r\n        this.scaleFactor = defaults(p.scaleFactor, 2.0);\r\n        this.cutoff = defaults(p.cutoff, 0.0);\r\n        this.contour = defaults(p.contour, false);\r\n        this.background = defaults(p.background, false);\r\n        this.opaqueBack = defaults(p.opaqueBack, true);\r\n        this.filterSele = defaults(p.filterSele, '');\r\n        this.colorVolume = defaults(p.colorVolume, undefined);\r\n        this.useWorker = defaults(p.useWorker, true);\r\n        super.init(params);\r\n    }\r\n    prepareData(sview, i, callback) {\r\n        let info = this.__infoList[i];\r\n        if (!info) {\r\n            info = {};\r\n            this.__infoList[i] = info;\r\n        }\r\n        if (!info.molsurf || info.sele !== sview.selection.string) {\r\n            if (this.filterSele) {\r\n                const sviewFilter = sview.structure.getView(new Selection(this.filterSele));\r\n                const bbSize = sviewFilter.boundingBox.getSize(new Vector3());\r\n                const maxDim = Math.max(bbSize.x, bbSize.y, bbSize.z);\r\n                const asWithin = sview.getAtomSetWithinPoint(sviewFilter.center, (maxDim / 2) + 6.0);\r\n                sview = sview.getView(new Selection(sview.getAtomSetWithinSelection(asWithin, 3).toSeleString()));\r\n                if (sview.atomCount === 0) {\r\n                    callback(i);\r\n                    return;\r\n                }\r\n            }\r\n            info.sele = sview.selection.string;\r\n            info.molsurf = new MolecularSurface(sview);\r\n            const p = this.getSurfaceParams();\r\n            const onSurfaceFinish = (surface) => {\r\n                info.surface = surface;\r\n                callback(i);\r\n            };\r\n            if (this.useWorker) {\r\n                info.molsurf.getSurfaceWorker(p, onSurfaceFinish);\r\n            }\r\n            else {\r\n                onSurfaceFinish(info.molsurf.getSurface(p));\r\n            }\r\n        }\r\n        else {\r\n            callback(i);\r\n        }\r\n    }\r\n    prepare(callback) {\r\n        if (this.__forceNewMolsurf || this.__sele !== this.selection.string ||\r\n            this.__surfaceParams !== JSON.stringify(this.getSurfaceParams())) {\r\n            this.__infoList.forEach((info) => {\r\n                if (info && info.molsurf) {\r\n                    info.molsurf.dispose();\r\n                }\r\n            });\r\n            this.__infoList.length = 0;\r\n        }\r\n        if (this.structureView.atomCount === 0) {\r\n            callback();\r\n            return;\r\n        }\r\n        const after = () => {\r\n            this.__sele = this.selection.string;\r\n            this.__surfaceParams = JSON.stringify(this.getSurfaceParams());\r\n            this.__forceNewMolsurf = false;\r\n            callback();\r\n        };\r\n        const name = this.assembly === 'default' ? this.defaultAssembly : this.assembly;\r\n        const assembly = this.structure.biomolDict[name];\r\n        if (assembly) {\r\n            assembly.partList.forEach((part, i) => {\r\n                const sview = part.getView(this.structureView);\r\n                this.prepareData(sview, i, (_i) => {\r\n                    if (_i === assembly.partList.length - 1)\r\n                        after();\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            this.prepareData(this.structureView, 0, after);\r\n        }\r\n    }\r\n    createData(sview, i) {\r\n        const info = this.__infoList[i];\r\n        const surface = info.surface;\r\n        if (!surface) {\r\n            // Surface creation bailed (no surface generated for this sview)\r\n            return;\r\n        }\r\n        const surfaceData = {\r\n            position: surface.getPosition(),\r\n            color: surface.getColor(this.getColorParams()),\r\n            index: surface.getFilteredIndex(this.filterSele, sview)\r\n        };\r\n        const bufferList = [];\r\n        if (surface.contour) {\r\n            const contourBuffer = new ContourBuffer(surfaceData, this.getBufferParams({\r\n                wireframe: false\r\n            }));\r\n            bufferList.push(contourBuffer);\r\n        }\r\n        else {\r\n            Object.assign(surfaceData, {\r\n                normal: surface.getNormal(),\r\n                picking: surface.getPicking(sview.getStructure())\r\n            });\r\n            const surfaceBuffer = new SurfaceBuffer(surfaceData, this.getBufferParams({\r\n                background: this.background,\r\n                opaqueBack: this.opaqueBack,\r\n                dullInterior: false\r\n            }));\r\n            if (this.getBufferParams().side == 'double') {\r\n                const doubleSidedBuffer = new DoubleSidedBuffer(surfaceBuffer);\r\n                bufferList.push(doubleSidedBuffer);\r\n            }\r\n            else {\r\n                bufferList.push(surfaceBuffer);\r\n            }\r\n        }\r\n        return { bufferList, info };\r\n    }\r\n    updateData(what, data) {\r\n        const surfaceData = {};\r\n        if (what.position || what.radius) {\r\n            this.__forceNewMolsurf = true;\r\n            this.build();\r\n            return;\r\n        }\r\n        if (what.color) {\r\n            surfaceData.color = data.info.surface.getColor(this.getColorParams());\r\n        }\r\n        if (what.index) {\r\n            surfaceData.index = data.info.surface.getFilteredIndex(this.filterSele, data.sview);\r\n        }\r\n        data.bufferList[0].setAttributes(surfaceData);\r\n    }\r\n    setParameters(params, what = {}, rebuild) {\r\n        if (params && params.filterSele) {\r\n            what.index = true;\r\n        }\r\n        if (params && params.colorVolume !== undefined) {\r\n            what.color = true;\r\n        }\r\n        // forbid setting wireframe to true when contour is true\r\n        if (params && params.wireframe && (params.contour || (params.contour === undefined && this.contour))) {\r\n            params.wireframe = false;\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        return this;\r\n    }\r\n    getSurfaceParams(params = {}) {\r\n        const p = Object.assign({\r\n            type: this.surfaceType,\r\n            probeRadius: this.probeRadius,\r\n            scaleFactor: this.scaleFactor,\r\n            smooth: this.smooth && !this.contour,\r\n            cutoff: this.cutoff,\r\n            contour: this.contour,\r\n            useWorker: this.useWorker,\r\n            radiusParams: this.getRadiusParams()\r\n        }, params);\r\n        return p;\r\n    }\r\n    getColorParams() {\r\n        const p = super.getColorParams();\r\n        p.volume = this.colorVolume;\r\n        return p;\r\n    }\r\n    getAtomRadius() {\r\n        return 0;\r\n    }\r\n    clear() {\r\n        super.clear();\r\n    }\r\n    dispose() {\r\n        this.__infoList.forEach((info) => {\r\n            if (info && info.molsurf) {\r\n                info.molsurf.dispose();\r\n            }\r\n        });\r\n        this.__infoList.length = 0;\r\n        super.dispose();\r\n    }\r\n}\r\nRepresentationRegistry.add('surface', MolecularSurfaceRepresentation);\r\nexport default MolecularSurfaceRepresentation;\r\n//# sourceMappingURL=molecularsurface-representation.js.map","/**\r\n * @file Point Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport PointBuffer from '../buffer/point-buffer.js';\r\n/**\r\n * Point Representation\r\n */\r\nclass PointRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'point';\r\n        this.parameters = Object.assign({\r\n            pointSize: {\r\n                type: 'number', precision: 1, max: 100, min: 0, buffer: true\r\n            },\r\n            sizeAttenuation: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            sortParticles: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            useTexture: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            alphaTest: {\r\n                type: 'range', step: 0.001, max: 1, min: 0, buffer: true\r\n            },\r\n            forceTransparent: {\r\n                type: 'boolean', buffer: true\r\n            },\r\n            edgeBleach: {\r\n                type: 'range', step: 0.001, max: 1, min: 0, buffer: true\r\n            }\r\n        }, this.parameters, {\r\n            flatShaded: null,\r\n            wireframe: null,\r\n            linewidth: null,\r\n            side: null,\r\n            roughness: null,\r\n            metalness: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        this.pointSize = defaults(p.pointSize, 1);\r\n        this.sizeAttenuation = defaults(p.sizeAttenuation, true);\r\n        this.sortParticles = defaults(p.sortParticles, false);\r\n        this.useTexture = defaults(p.useTexture, false);\r\n        this.alphaTest = defaults(p.alphaTest, 0.5);\r\n        this.forceTransparent = defaults(p.forceTransparent, false);\r\n        this.edgeBleach = defaults(p.edgeBleach, 0.0);\r\n        super.init(p);\r\n    }\r\n    createData(sview) {\r\n        var what = { position: true, color: true, picking: true };\r\n        var atomData = sview.getAtomData(this.getAtomParams(what));\r\n        var pointBuffer = new PointBuffer(atomData, this.getBufferParams({\r\n            pointSize: this.pointSize,\r\n            sizeAttenuation: this.sizeAttenuation,\r\n            sortParticles: this.sortParticles,\r\n            useTexture: this.useTexture,\r\n            alphaTest: this.alphaTest,\r\n            forceTransparent: this.forceTransparent,\r\n            edgeBleach: this.edgeBleach\r\n        }));\r\n        return {\r\n            bufferList: [pointBuffer]\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        var atomData = data.sview.getAtomData(this.getAtomParams(what));\r\n        var pointData = {};\r\n        if (!what || what.position) {\r\n            Object.assign(pointData, { position: atomData.position });\r\n        }\r\n        if (!what || what.color) {\r\n            Object.assign(pointData, { color: atomData.color });\r\n        }\r\n        data.bufferList[0].setAttributes(pointData);\r\n    }\r\n    getAtomRadius() {\r\n        return 0.1;\r\n    }\r\n}\r\nRepresentationRegistry.add('point', PointRepresentation);\r\nexport default PointRepresentation;\r\n//# sourceMappingURL=point-representation.js.map","/**\r\n * @file Ribbon Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport '../shader/Ribbon.vert';\r\nimport { getUintArray } from '../utils';\r\nimport { serialArray } from '../math/array-utils';\r\nimport MeshBuffer from './mesh-buffer';\r\nimport { Log } from \"../globals\";\r\nconst quadIndices = new Uint16Array([\r\n    0, 1, 2,\r\n    1, 3, 2\r\n]);\r\nfunction getSize(data) {\r\n    const n = (data.position.length / 3) - 1;\r\n    const n4 = n * 4;\r\n    const x = n4 * 3;\r\n    return x;\r\n}\r\n/**\r\n * Ribbon buffer. Draws a thin ribbon.\r\n */\r\nclass RibbonBuffer extends MeshBuffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position - positions\r\n     * @param  {Float32Array} data.normal - normals\r\n     * @param  {Float32Array} data.dir - binormals\r\n     * @param  {Float32Array} data.color - colors\r\n     * @param  {Float32Array} data.size - sizes\r\n     * @param  {Picker} data.picking - picking ids\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super({\r\n            position: new Float32Array(getSize(data)),\r\n            color: new Float32Array(getSize(data)),\r\n            index: getUintArray(getSize(data), getSize(data) / 3),\r\n            normal: new Float32Array(getSize(data)),\r\n            picking: data.picking\r\n        }, params);\r\n        this.vertexShader = 'Ribbon.vert';\r\n        const n = (data.position.length / 3) - 1;\r\n        const n4 = n * 4;\r\n        const x = n4 * 3;\r\n        this.addAttributes({\r\n            'dir': { type: 'v3', value: new Float32Array(x) }\r\n        });\r\n        this.addAttributes({\r\n            'size': { type: 'f', value: new Float32Array(n4) }\r\n        });\r\n        data.primitiveId = serialArray(n);\r\n        this.setAttributes(data);\r\n        this.makeIndex();\r\n    }\r\n    setAttributes(data = {}) {\r\n        const n4 = this.size;\r\n        const n = n4 / 4;\r\n        const attributes = this.geometry.attributes; // TODO\r\n        let position, normal, size, dir, color, primitiveId;\r\n        let aPosition, aNormal, aSize, aDir, aColor, aPrimitiveId;\r\n        if (data.position) {\r\n            position = data.position;\r\n            aPosition = attributes.position.array;\r\n            attributes.position.needsUpdate = true;\r\n        }\r\n        if (data.normal) {\r\n            normal = data.normal;\r\n            aNormal = attributes.normal.array;\r\n            attributes.normal.needsUpdate = true;\r\n        }\r\n        if (data.size) {\r\n            size = data.size;\r\n            aSize = attributes.size.array;\r\n            attributes.size.needsUpdate = true;\r\n        }\r\n        if (data.dir) {\r\n            dir = data.dir;\r\n            aDir = attributes.dir.array;\r\n            attributes.dir.needsUpdate = true;\r\n        }\r\n        if (data.color) {\r\n            color = data.color;\r\n            aColor = attributes.color.array;\r\n            attributes.color.needsUpdate = true;\r\n        }\r\n        if (data.primitiveId) {\r\n            primitiveId = data.primitiveId;\r\n            aPrimitiveId = attributes.primitiveId.array;\r\n            attributes.primitiveId.needsUpdate = true;\r\n        }\r\n        let v, i, k, p, l, v3;\r\n        let currSize;\r\n        let prevSize = size ? size[0] : null;\r\n        for (v = 0; v < n; ++v) {\r\n            v3 = v * 3;\r\n            k = v * 3 * 4;\r\n            l = v * 4;\r\n            if (position) {\r\n                aPosition[k] = aPosition[k + 3] = position[v3];\r\n                aPosition[k + 1] = aPosition[k + 4] = position[v3 + 1];\r\n                aPosition[k + 2] = aPosition[k + 5] = position[v3 + 2];\r\n                aPosition[k + 6] = aPosition[k + 9] = position[v3 + 3];\r\n                aPosition[k + 7] = aPosition[k + 10] = position[v3 + 4];\r\n                aPosition[k + 8] = aPosition[k + 11] = position[v3 + 5];\r\n            }\r\n            if (normal) {\r\n                aNormal[k] = aNormal[k + 3] = -normal[v3];\r\n                aNormal[k + 1] = aNormal[k + 4] = -normal[v3 + 1];\r\n                aNormal[k + 2] = aNormal[k + 5] = -normal[v3 + 2];\r\n                aNormal[k + 6] = aNormal[k + 9] = -normal[v3 + 3];\r\n                aNormal[k + 7] = aNormal[k + 10] = -normal[v3 + 4];\r\n                aNormal[k + 8] = aNormal[k + 11] = -normal[v3 + 5];\r\n            }\r\n            for (i = 0; i < 4; ++i) {\r\n                p = k + 3 * i;\r\n                if (color) {\r\n                    aColor[p] = color[v3];\r\n                    aColor[p + 1] = color[v3 + 1];\r\n                    aColor[p + 2] = color[v3 + 2];\r\n                }\r\n                if (primitiveId) {\r\n                    aPrimitiveId[l + i] = primitiveId[v];\r\n                }\r\n            }\r\n            if (size) {\r\n                currSize = size[v];\r\n                if (prevSize !== size[v]) {\r\n                    aSize[l] = prevSize;\r\n                    aSize[l + 1] = prevSize;\r\n                    aSize[l + 2] = currSize;\r\n                    aSize[l + 3] = currSize;\r\n                }\r\n                else {\r\n                    aSize[l] = currSize;\r\n                    aSize[l + 1] = currSize;\r\n                    aSize[l + 2] = currSize;\r\n                    aSize[l + 3] = currSize;\r\n                }\r\n                prevSize = currSize;\r\n            }\r\n            if (dir) {\r\n                aDir[k] = dir[v3];\r\n                aDir[k + 1] = dir[v3 + 1];\r\n                aDir[k + 2] = dir[v3 + 2];\r\n                aDir[k + 3] = -dir[v3];\r\n                aDir[k + 4] = -dir[v3 + 1];\r\n                aDir[k + 5] = -dir[v3 + 2];\r\n                aDir[k + 6] = dir[v3 + 3];\r\n                aDir[k + 7] = dir[v3 + 4];\r\n                aDir[k + 8] = dir[v3 + 5];\r\n                aDir[k + 9] = -dir[v3 + 3];\r\n                aDir[k + 10] = -dir[v3 + 4];\r\n                aDir[k + 11] = -dir[v3 + 5];\r\n            }\r\n        }\r\n    }\r\n    makeIndex() {\r\n        const index = this.geometry.getIndex();\r\n        if (!index) {\r\n            Log.error('Index is null');\r\n            return;\r\n        }\r\n        const meshIndex = index.array;\r\n        const n = meshIndex.length / 4 / 3;\r\n        for (let v = 0; v < n; ++v) {\r\n            const ix = v * 6;\r\n            const it = v * 4;\r\n            meshIndex.set(quadIndices, ix);\r\n            for (let s = 0; s < 6; ++s) {\r\n                meshIndex[ix + s] += it;\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default RibbonBuffer;\r\n//# sourceMappingURL=ribbon-buffer.js.map","/**\r\n * @file Ribbon Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Spline from '../geometry/spline.js';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport RibbonBuffer from '../buffer/ribbon-buffer.js';\r\n/**\r\n * Ribbon Representation\r\n */\r\nclass RibbonRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'ribbon';\r\n        this.parameters = Object.assign({\r\n            subdiv: {\r\n                type: 'integer', max: 50, min: 1, rebuild: true\r\n            },\r\n            tension: {\r\n                type: 'number', precision: 1, max: 1.0, min: 0.1\r\n            },\r\n            smoothSheet: {\r\n                type: 'boolean', rebuild: true\r\n            }\r\n        }, this.parameters, {\r\n            side: null,\r\n            wireframe: null,\r\n            linewidth: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'chainname');\r\n        p.colorScale = defaults(p.colorScale, 'RdYlBu');\r\n        p.radiusType = defaults(p.radiusType, 'sstruc');\r\n        p.radiusScale = defaults(p.radiusScale, 4.0);\r\n        if (p.quality === 'low') {\r\n            this.subdiv = 3;\r\n        }\r\n        else if (p.quality === 'medium') {\r\n            this.subdiv = 6;\r\n        }\r\n        else if (p.quality === 'high') {\r\n            this.subdiv = 12;\r\n        }\r\n        else {\r\n            this.subdiv = defaults(p.subdiv, 6);\r\n        }\r\n        this.tension = defaults(p.tension, NaN);\r\n        this.smoothSheet = defaults(p.smoothSheet, false);\r\n        super.init(p);\r\n    }\r\n    getSplineParams(params) {\r\n        return Object.assign({\r\n            subdiv: this.subdiv,\r\n            tension: this.tension,\r\n            directional: true,\r\n            smoothSheet: this.smoothSheet\r\n        }, params);\r\n    }\r\n    getAtomRadius(atom) {\r\n        return atom.isTrace() ? super.getAtomRadius(atom) : 0;\r\n    }\r\n    createData(sview) {\r\n        var bufferList = [];\r\n        var polymerList = [];\r\n        this.structure.eachPolymer(polymer => {\r\n            if (polymer.residueCount < 4)\r\n                return;\r\n            polymerList.push(polymer);\r\n            var spline = new Spline(polymer, this.getSplineParams());\r\n            var subPos = spline.getSubdividedPosition();\r\n            var subOri = spline.getSubdividedOrientation();\r\n            var subCol = spline.getSubdividedColor(this.getColorParams());\r\n            var subPick = spline.getSubdividedPicking();\r\n            var subSize = spline.getSubdividedSize(this.getRadiusParams());\r\n            bufferList.push(new RibbonBuffer(({\r\n                position: subPos.position,\r\n                normal: subOri.binormal,\r\n                dir: subOri.normal,\r\n                color: subCol.color,\r\n                size: subSize.size,\r\n                picking: subPick.picking\r\n            }), this.getBufferParams()));\r\n        }, sview.getSelection());\r\n        return {\r\n            bufferList: bufferList,\r\n            polymerList: polymerList\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        what = what || {};\r\n        var i = 0;\r\n        var n = data.polymerList.length;\r\n        for (i = 0; i < n; ++i) {\r\n            var bufferData = {};\r\n            var spline = new Spline(data.polymerList[i], this.getSplineParams());\r\n            if (what.position) {\r\n                var subPos = spline.getSubdividedPosition();\r\n                var subOri = spline.getSubdividedOrientation();\r\n                Object.assign(bufferData, {\r\n                    position: subPos.position,\r\n                    normal: subOri.binormal,\r\n                    dir: subOri.normal\r\n                });\r\n            }\r\n            if (what.radius || what.scale) {\r\n                var subSize = spline.getSubdividedSize(this.getRadiusParams());\r\n                Object.assign(bufferData, { size: subSize.size });\r\n            }\r\n            if (what.color) {\r\n                var subCol = spline.getSubdividedColor(this.getColorParams());\r\n                Object.assign(bufferData, { color: subCol.color });\r\n            }\r\n            data.bufferList[i].setAttributes(bufferData);\r\n        }\r\n    }\r\n    setParameters(params) {\r\n        var rebuild = false;\r\n        var what = {};\r\n        if (params && params.tension) {\r\n            Object.assign(what, { position: true });\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        return this;\r\n    }\r\n}\r\nRepresentationRegistry.add('ribbon', RibbonRepresentation);\r\nexport default RibbonRepresentation;\r\n//# sourceMappingURL=ribbon-representation.js.map","/**\r\n * @file Rocket Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { AtomPicker } from '../utils/picker.js';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport Helixbundle from '../geometry/helixbundle.js';\r\nimport CylinderBuffer from '../buffer/cylinder-buffer.js';\r\n/**\r\n * Rocket Representation\r\n */\r\nclass RocketRepresentation extends StructureRepresentation {\r\n    // protected helixbundleList: Helixbundle[]\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'rocket';\r\n        this.parameters = Object.assign({\r\n            localAngle: {\r\n                type: 'integer', max: 180, min: 0, rebuild: true\r\n            },\r\n            centerDist: {\r\n                type: 'number', precision: 1, max: 10, min: 0, rebuild: true\r\n            },\r\n            ssBorder: {\r\n                type: 'boolean', rebuild: true\r\n            },\r\n            radialSegments: true,\r\n            openEnded: true,\r\n            disableImpostor: true\r\n        }, this.parameters);\r\n        // this.helixbundleList = []\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        let p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'sstruc');\r\n        p.radiusSize = defaults(p.radiusSize, 1.5);\r\n        p.radiusScale = defaults(p.radiusScale, 1.0);\r\n        p.openEnded = defaults(p.openEnded, false);\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        this.localAngle = defaults(p.localAngle, 30);\r\n        this.centerDist = defaults(p.centerDist, 2.5);\r\n        this.ssBorder = defaults(p.ssBorder, false);\r\n        super.init(p);\r\n    }\r\n    createData(sview) {\r\n        let length = 0;\r\n        const axisList = [];\r\n        const helixbundleList = [];\r\n        this.structure.eachPolymer(polymer => {\r\n            if (polymer.residueCount < 4 || polymer.isNucleic())\r\n                return;\r\n            const helixbundle = new Helixbundle(polymer);\r\n            const axis = helixbundle.getAxis(this.localAngle, this.centerDist, this.ssBorder, this.getColorParams(), this.getRadiusParams());\r\n            length += axis.size.length;\r\n            axisList.push(axis);\r\n            helixbundleList.push(helixbundle);\r\n        }, sview.getSelection());\r\n        const axisData = {\r\n            begin: new Float32Array(length * 3),\r\n            end: new Float32Array(length * 3),\r\n            size: new Float32Array(length),\r\n            color: new Float32Array(length * 3),\r\n            picking: {}\r\n        };\r\n        let picking = new Float32Array(length);\r\n        let offset = 0;\r\n        axisList.forEach(function (axis) {\r\n            axisData.begin.set(axis.begin, offset * 3);\r\n            axisData.end.set(axis.end, offset * 3);\r\n            axisData.size.set(axis.size, offset);\r\n            axisData.color.set(axis.color, offset * 3);\r\n            picking.set(axis.picking.array, offset);\r\n            offset += axis.size.length;\r\n        });\r\n        if (length) {\r\n            axisData.picking = new AtomPicker(picking, sview.getStructure());\r\n        }\r\n        const cylinderBuffer = new CylinderBuffer({\r\n            position1: axisData.begin,\r\n            position2: axisData.end,\r\n            color: axisData.color,\r\n            color2: axisData.color,\r\n            radius: axisData.size,\r\n            picking: axisData.picking\r\n        }, this.getBufferParams({\r\n            openEnded: this.openEnded,\r\n            radialSegments: this.radialSegments,\r\n            disableImpostor: this.disableImpostor,\r\n            dullInterior: true\r\n        }));\r\n        return {\r\n            bufferList: [cylinderBuffer],\r\n            axisList: axisList,\r\n            helixbundleList: helixbundleList,\r\n            axisData: axisData\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        what = what || {};\r\n        if (what.position) {\r\n            this.build();\r\n            return;\r\n        }\r\n        var cylinderData = {};\r\n        if (what.color || what.radius) {\r\n            var offset = 0;\r\n            data.helixbundleList.forEach((helixbundle) => {\r\n                var axis = helixbundle.getAxis(this.localAngle, this.centerDist, this.ssBorder, this.getColorParams(), this.getRadiusParams());\r\n                if (what.color) {\r\n                    data.axisData.color.set(axis.color, offset * 3);\r\n                }\r\n                if (what.radius || what.scale) {\r\n                    data.axisData.size.set(axis.size, offset);\r\n                }\r\n                offset += axis.size.length;\r\n            });\r\n            if (what.color) {\r\n                Object.assign(cylinderData, {\r\n                    color: data.axisData.color,\r\n                    color2: data.axisData.color\r\n                });\r\n            }\r\n            if (what.radius || what.scale) {\r\n                Object.assign(cylinderData, {\r\n                    radius: data.axisData.size\r\n                });\r\n            }\r\n        }\r\n        data.bufferList[0].setAttributes(cylinderData);\r\n    }\r\n}\r\nRepresentationRegistry.add('rocket', RocketRepresentation);\r\nexport default RocketRepresentation;\r\n//# sourceMappingURL=rocket-representation.js.map","/**\r\n * @file Rope Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport CartoonRepresentation from './cartoon-representation.js';\r\nimport Helixorient from '../geometry/helixorient.js';\r\nimport Spline from '../geometry/spline.js';\r\n/**\r\n * Rope Representation\r\n */\r\nclass RopeRepresentation extends CartoonRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'rope';\r\n        this.parameters = Object.assign({\r\n            smooth: {\r\n                type: 'integer', max: 15, min: 0, rebuild: true\r\n            }\r\n        }, this.parameters, {\r\n            aspectRatio: null,\r\n            smoothSheet: null\r\n        });\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.aspectRatio = 1.0;\r\n        p.tension = defaults(p.tension, 0.5);\r\n        p.radiusScale = defaults(p.radiusScale, 5.0);\r\n        p.smoothSheet = false;\r\n        this.smooth = defaults(p.smooth, 2);\r\n        super.init(p);\r\n    }\r\n    getSpline(polymer) {\r\n        var helixorient = new Helixorient(polymer);\r\n        return new Spline(polymer, this.getSplineParams({\r\n            directional: false,\r\n            positionIterator: helixorient.getCenterIterator(this.smooth)\r\n        }));\r\n    }\r\n}\r\nRepresentationRegistry.add('rope', RopeRepresentation);\r\nexport default RopeRepresentation;\r\n//# sourceMappingURL=rope-representation.js.map","/**\r\n * @file Spacefill Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport { RepresentationRegistry } from '../globals';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport SphereBuffer from '../buffer/sphere-buffer.js';\r\n/**\r\n * Spacefill Representation\r\n */\r\nclass SpacefillRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'spacefill';\r\n        this.parameters = Object.assign({\r\n            sphereDetail: true,\r\n            disableImpostor: true\r\n        }, this.parameters);\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        super.init(p);\r\n    }\r\n    createData(sview) {\r\n        var sphereBuffer = new SphereBuffer(sview.getAtomData(this.getAtomParams()), this.getBufferParams({\r\n            sphereDetail: this.sphereDetail,\r\n            dullInterior: true,\r\n            disableImpostor: this.disableImpostor\r\n        }));\r\n        return {\r\n            bufferList: [sphereBuffer]\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        var atomData = data.sview.getAtomData(this.getAtomParams(what));\r\n        var sphereData = {};\r\n        if (!what || what.position) {\r\n            Object.assign(sphereData, { position: atomData.position });\r\n        }\r\n        if (!what || what.color) {\r\n            Object.assign(sphereData, { color: atomData.color });\r\n        }\r\n        if (!what || what.radius) {\r\n            Object.assign(sphereData, { radius: atomData.radius });\r\n        }\r\n        data.bufferList[0].setAttributes(sphereData);\r\n    }\r\n}\r\nRepresentationRegistry.add('spacefill', SpacefillRepresentation);\r\nexport default SpacefillRepresentation;\r\n//# sourceMappingURL=spacefill-representation.js.map","/**\r\n * @file Trace Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport '../shader/Line.vert';\r\nimport '../shader/Line.frag';\r\nimport { Log } from '../globals';\r\nimport Buffer from './buffer';\r\nfunction getSize(data) {\r\n    const n = data.position.length / 3;\r\n    const n1 = n - 1;\r\n    return n1 * 3 * 2;\r\n}\r\n/**\r\n * Trace buffer. Draws a series of lines.\r\n */\r\nclass TraceBuffer extends Buffer {\r\n    /**\r\n     * @param  {Object} data - attribute object\r\n     * @param  {Float32Array} data.position - positions\r\n     * @param  {Float32Array} data.color - colors\r\n     * @param  {BufferParameters} params - parameter object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super({\r\n            position: new Float32Array(getSize(data)),\r\n            color: new Float32Array(getSize(data))\r\n        }, params);\r\n        this.isLine = true;\r\n        this.vertexShader = 'Line.vert';\r\n        this.fragmentShader = 'Line.frag';\r\n        this.setAttributes(data);\r\n    }\r\n    setAttributes(data) {\r\n        let position, color;\r\n        let linePosition, lineColor;\r\n        const attributes = this.geometry.attributes; // TODO\r\n        if (data.position) {\r\n            position = data.position;\r\n            linePosition = attributes.position.array;\r\n            attributes.position.needsUpdate = true;\r\n        }\r\n        if (data.color) {\r\n            color = data.color;\r\n            lineColor = attributes.color.array;\r\n            attributes.color.needsUpdate = true;\r\n        }\r\n        if (!position && !color) {\r\n            Log.warn('TraceBuffer.prototype.setAttributes no data');\r\n            return;\r\n        }\r\n        let v, v2;\r\n        const n = this.size;\r\n        const n1 = n - 1;\r\n        for (let i = 0; i < n1; ++i) {\r\n            v = 3 * i;\r\n            v2 = 3 * i * 2;\r\n            if (position) {\r\n                linePosition[v2] = position[v];\r\n                linePosition[v2 + 1] = position[v + 1];\r\n                linePosition[v2 + 2] = position[v + 2];\r\n                linePosition[v2 + 3] = position[v + 3];\r\n                linePosition[v2 + 4] = position[v + 4];\r\n                linePosition[v2 + 5] = position[v + 5];\r\n            }\r\n            if (color) {\r\n                lineColor[v2] = color[v];\r\n                lineColor[v2 + 1] = color[v + 1];\r\n                lineColor[v2 + 2] = color[v + 2];\r\n                lineColor[v2 + 3] = color[v + 3];\r\n                lineColor[v2 + 4] = color[v + 4];\r\n                lineColor[v2 + 5] = color[v + 5];\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default TraceBuffer;\r\n//# sourceMappingURL=trace-buffer.js.map","/**\r\n * @file Trace Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Spline from '../geometry/spline.js';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport TraceBuffer from '../buffer/trace-buffer.js';\r\n/**\r\n * Trace Representation\r\n */\r\nclass TraceRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'trace';\r\n        this.parameters = Object.assign({\r\n            subdiv: {\r\n                type: 'integer', max: 50, min: 1, rebuild: true\r\n            },\r\n            tension: {\r\n                type: 'number', precision: 1, max: 1.0, min: 0.1\r\n            },\r\n            smoothSheet: {\r\n                type: 'boolean', rebuild: true\r\n            }\r\n        }, this.parameters, {\r\n            flatShaded: null,\r\n            side: null,\r\n            wireframe: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.colorScheme = defaults(p.colorScheme, 'chainname');\r\n        p.colorScale = defaults(p.colorScale, 'RdYlBu');\r\n        if (p.quality === 'low') {\r\n            this.subdiv = 3;\r\n        }\r\n        else if (p.quality === 'medium') {\r\n            this.subdiv = 6;\r\n        }\r\n        else if (p.quality === 'high') {\r\n            this.subdiv = 12;\r\n        }\r\n        else {\r\n            this.subdiv = defaults(p.subdiv, 6);\r\n        }\r\n        this.tension = defaults(p.tension, NaN);\r\n        this.smoothSheet = defaults(p.smoothSheet, false);\r\n        super.init(p);\r\n    }\r\n    getSplineParams(params) {\r\n        return Object.assign({\r\n            subdiv: this.subdiv,\r\n            tension: this.tension,\r\n            directional: false,\r\n            smoothSheet: this.smoothSheet\r\n        }, params);\r\n    }\r\n    getAtomRadius(atom) {\r\n        return atom.isTrace() ? 0.1 : 0;\r\n    }\r\n    createData(sview) {\r\n        var bufferList = [];\r\n        var polymerList = [];\r\n        this.structure.eachPolymer(polymer => {\r\n            if (polymer.residueCount < 4)\r\n                return;\r\n            polymerList.push(polymer);\r\n            var spline = new Spline(polymer, this.getSplineParams());\r\n            var subPos = spline.getSubdividedPosition();\r\n            var subCol = spline.getSubdividedColor(this.getColorParams());\r\n            bufferList.push(new TraceBuffer(Object.assign({}, subPos, subCol), this.getBufferParams()));\r\n        }, sview.getSelection());\r\n        return {\r\n            bufferList: bufferList,\r\n            polymerList: polymerList\r\n        };\r\n    }\r\n    updateData(what, data) {\r\n        what = what || {};\r\n        var i = 0;\r\n        var n = data.polymerList.length;\r\n        for (i = 0; i < n; ++i) {\r\n            var bufferData = {};\r\n            var spline = new Spline(data.polymerList[i], this.getSplineParams());\r\n            if (what.position) {\r\n                var subPos = spline.getSubdividedPosition();\r\n                Object.assign(bufferData, { position: subPos.position });\r\n            }\r\n            if (what.color) {\r\n                var subCol = spline.getSubdividedColor(this.getColorParams());\r\n                Object.assign(bufferData, { color: subCol.color });\r\n            }\r\n            data.bufferList[i].setAttributes(bufferData);\r\n        }\r\n    }\r\n    setParameters(params) {\r\n        var rebuild = false;\r\n        var what = {};\r\n        if (params && params.tension) {\r\n            Object.assign(what, { position: true });\r\n        }\r\n        super.setParameters(params, what, rebuild);\r\n        return this;\r\n    }\r\n}\r\nRepresentationRegistry.add('trace', TraceRepresentation);\r\nexport default TraceRepresentation;\r\n//# sourceMappingURL=trace-representation.js.map","/**\r\n * @file Tube Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport CartoonRepresentation from './cartoon-representation.js';\r\n/**\r\n * Tube Representation\r\n */\r\nclass TubeRepresentation extends CartoonRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'tube';\r\n        this.parameters = Object.assign({}, this.parameters, { aspectRatio: null });\r\n    }\r\n    init(params) {\r\n        var p = params || {};\r\n        p.aspectRatio = 1.0;\r\n        p.radiusScale = defaults(p.radiusScale, 2.0);\r\n        if (p.quality === 'low') {\r\n            this.radialSegments = 5;\r\n        }\r\n        super.init(p);\r\n    }\r\n    getSplineParams( /* params */) {\r\n        return super.getSplineParams({\r\n            directional: false\r\n        });\r\n    }\r\n}\r\nRepresentationRegistry.add('tube', TubeRepresentation);\r\nexport default TubeRepresentation;\r\n//# sourceMappingURL=tube-representation.js.map","/**\r\n * @file Unitcell Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport SphereBuffer from '../buffer/sphere-buffer.js';\r\nimport CylinderBuffer from '../buffer/cylinder-buffer.js';\r\n/**\r\n * Unitcell Representation\r\n */\r\nclass UnitcellRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'unitcell';\r\n        this.parameters = Object.assign({\r\n            radiusSize: {\r\n                type: 'number', precision: 3, max: 10.0, min: 0.001\r\n            },\r\n            sphereDetail: true,\r\n            radialSegments: true,\r\n            disableImpostor: true\r\n        }, this.parameters, {\r\n            assembly: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        let defaultRadius = 0.5;\r\n        if (this.structure.unitcell) {\r\n            defaultRadius = Math.cbrt(this.structure.unitcell.volume) / 200;\r\n        }\r\n        p.radiusSize = defaults(p.radiusSize, defaultRadius);\r\n        p.colorValue = defaults(p.colorValue, 'orange');\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        super.init(p);\r\n    }\r\n    getUnitcellData(structure) {\r\n        return structure.unitcell.getData(structure);\r\n    }\r\n    create() {\r\n        const structure = this.structureView.getStructure();\r\n        if (!structure.unitcell)\r\n            return;\r\n        const unitcellData = this.getUnitcellData(structure);\r\n        this.sphereBuffer = new SphereBuffer(unitcellData.vertex, this.getBufferParams({\r\n            sphereDetail: this.sphereDetail,\r\n            disableImpostor: this.disableImpostor,\r\n            dullInterior: true\r\n        }));\r\n        this.cylinderBuffer = new CylinderBuffer(unitcellData.edge, this.getBufferParams({\r\n            openEnded: true,\r\n            radialSegments: this.radialSegments,\r\n            disableImpostor: this.disableImpostor,\r\n            dullInterior: true\r\n        }));\r\n        this.dataList.push({\r\n            sview: this.structureView,\r\n            bufferList: [this.sphereBuffer, this.cylinderBuffer]\r\n        });\r\n    }\r\n    createData(sview) {\r\n        return;\r\n    }\r\n    updateData(what, data) {\r\n        const structure = data.sview.getStructure();\r\n        if (!structure.unitcell)\r\n            return;\r\n        const unitcellData = this.getUnitcellData(structure);\r\n        const sphereData = {};\r\n        const cylinderData = {};\r\n        if (!what || what.position) {\r\n            Object.assign(sphereData, { position: unitcellData.vertex.position });\r\n            Object.assign(cylinderData, {\r\n                position1: unitcellData.edge.position1,\r\n                position2: unitcellData.edge.position2\r\n            });\r\n        }\r\n        if (!what || what.color) {\r\n            Object.assign(sphereData, { color: unitcellData.vertex.color });\r\n            Object.assign(cylinderData, {\r\n                color: unitcellData.edge.color,\r\n                color2: unitcellData.edge.color2\r\n            });\r\n        }\r\n        if (!what || what.radius) {\r\n            Object.assign(sphereData, { radius: unitcellData.vertex.radius });\r\n            Object.assign(cylinderData, { radius: unitcellData.edge.radius });\r\n        }\r\n        this.sphereBuffer.setAttributes(sphereData);\r\n        this.cylinderBuffer.setAttributes(cylinderData);\r\n    }\r\n}\r\nRepresentationRegistry.add('unitcell', UnitcellRepresentation);\r\nexport default UnitcellRepresentation;\r\n//# sourceMappingURL=unitcell-representation.js.map","/**\r\n * @file Validation Representation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { RepresentationRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport StructureRepresentation from './structure-representation.js';\r\nimport CylinderBuffer from '../buffer/cylinder-buffer.js';\r\n/**\r\n * Validation representation\r\n */\r\nclass ValidationRepresentation extends StructureRepresentation {\r\n    constructor(structure, viewer, params) {\r\n        super(structure, viewer, params);\r\n        this.type = 'validation';\r\n        this.parameters = Object.assign({}, this.parameters, {\r\n            radiusType: null,\r\n            radiusSize: null,\r\n            radiusScale: null\r\n        });\r\n        this.init(params);\r\n    }\r\n    init(params) {\r\n        const p = params || {};\r\n        p.colorValue = defaults(p.colorValue, '#f0027f');\r\n        p.useInteriorColor = defaults(p.useInteriorColor, true);\r\n        super.init(p);\r\n    }\r\n    createData(sview) {\r\n        if (!sview.validation)\r\n            return;\r\n        const clashData = sview.validation.getClashData({\r\n            structure: sview,\r\n            color: this.colorValue\r\n        });\r\n        const cylinderBuffer = new CylinderBuffer(clashData, this.getBufferParams({ openEnded: false }));\r\n        return {\r\n            bufferList: [cylinderBuffer]\r\n        };\r\n    }\r\n}\r\nRepresentationRegistry.add('validation', ValidationRepresentation);\r\nexport default ValidationRepresentation;\r\n//# sourceMappingURL=validation-representation.js.map","/**\r\n * @file Cone Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4, Vector3, ConeBufferGeometry } from 'three';\r\nimport { BufferRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { calculateCenterArray } from '../math/array-utils';\r\nimport GeometryBuffer from './geometry-buffer';\r\nimport { BufferDefaultParameters } from './buffer';\r\nconst scale = new Vector3();\r\nconst eye = new Vector3();\r\nconst target = new Vector3();\r\nconst up = new Vector3(0, 1, 0);\r\nfunction getGeo(params = {}) {\r\n    const geo = new ConeBufferGeometry(1, // radius\r\n    1, // height\r\n    defaults(params.radialSegments, 60), // radialSegments\r\n    1, // heightSegments\r\n    defaults(params.openEnded, false) // openEnded\r\n    );\r\n    geo.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2));\r\n    return geo;\r\n}\r\nexport const ConeBufferDefaultParameters = Object.assign({\r\n    radialSegments: 60,\r\n    openEnded: false\r\n}, BufferDefaultParameters);\r\n/**\r\n * Cone geometry buffer.\r\n *\r\n * @example\r\n * var coneBuffer = new ConeBuffer({\r\n *   position1: new Float32Array([ 0, 0, 0 ]),\r\n *   position2: new Float32Array([ 1, 1, 1 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   color2: new Float32Array([ 0, 1, 0 ]),\r\n *   radius: new Float32Array([ 1 ])\r\n * });\r\n */\r\nclass ConeBuffer extends GeometryBuffer {\r\n    /**\r\n     * @param {Object} data - buffer data\r\n     * @param {Float32Array} data.position1 - from positions\r\n     * @param {Float32Array} data.position2 - to positions\r\n     * @param {Float32Array} data.color - colors\r\n     * @param {Float32Array} data.radius - radii\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param {BufferParameters} [params] - parameters object\r\n     */\r\n    constructor(data, params = {}) {\r\n        super({\r\n            position: new Float32Array(data.position1.length),\r\n            color: data.color,\r\n            picking: data.picking\r\n        }, params, getGeo(params));\r\n        this.updateNormals = true;\r\n        this._position = new Float32Array(data.position1.length);\r\n        this.setAttributes(data, true);\r\n    }\r\n    get defaultParameters() { return ConeBufferDefaultParameters; }\r\n    applyPositionTransform(matrix, i, i3) {\r\n        eye.fromArray(this._position1, i3);\r\n        target.fromArray(this._position2, i3);\r\n        matrix.lookAt(eye, target, up);\r\n        const r = this._radius[i];\r\n        scale.set(r, r, eye.distanceTo(target));\r\n        matrix.scale(scale);\r\n    }\r\n    setAttributes(data = {}, initNormals) {\r\n        if (data.position1 && data.position2) {\r\n            calculateCenterArray(data.position1, data.position2, this._position);\r\n            this._position1 = data.position1;\r\n            this._position2 = data.position2;\r\n            data.position = this._position;\r\n        }\r\n        if (data.radius)\r\n            this._radius = data.radius;\r\n        super.setAttributes(data, initNormals);\r\n    }\r\n}\r\nBufferRegistry.add('cone', ConeBuffer);\r\nexport default ConeBuffer;\r\n//# sourceMappingURL=cone-buffer.js.map","/**\r\n * @file Geometry Group\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Box3 } from 'three';\r\nclass GeometryGroup {\r\n    constructor(geometryList = []) {\r\n        this.geometryList = geometryList;\r\n    }\r\n    computeBoundingBox() {\r\n        if (!this.boundingBox) {\r\n            this.boundingBox = new Box3();\r\n        }\r\n        else {\r\n            this.boundingBox.empty();\r\n        }\r\n        this.geometryList.forEach(geo => {\r\n            if (!geo.boundingBox)\r\n                geo.computeBoundingBox();\r\n            this.boundingBox.union(geo.boundingBox);\r\n        });\r\n    }\r\n}\r\nexport default GeometryGroup;\r\n//# sourceMappingURL=geometry-group.js.map","/**\r\n * @file Arrow Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4, Vector3, Group } from 'three';\r\nimport { BufferRegistry } from '../globals';\r\nimport { createParams, defaults } from '../utils';\r\nimport Buffer from './buffer';\r\nimport CylinderBuffer from './cylinder-buffer';\r\nimport ConeBuffer from './cone-buffer';\r\nimport GeometryGroup from '../viewer/geometry-group';\r\nimport { BufferDefaultParameters } from './buffer';\r\nexport const ArrowBufferDefaultParameters = Object.assign({\r\n    aspectRatio: 1.5,\r\n    radialSegments: 50,\r\n    openEnded: false,\r\n    disableImpostor: false\r\n}, BufferDefaultParameters);\r\n/**\r\n * Arrow buffer. Draws arrows made from a cylinder and a cone.\r\n * @implements {Buffer}\r\n *\r\n * @example\r\n * var arrowBuffer = new ArrowBuffer({\r\n *   position1: new Float32Array([ 0, 0, 0 ]),\r\n *   position2: new Float32Array([ 10, 1, 1 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   radius: new Float32Array([ 1 ])\r\n * });\r\n */\r\nclass ArrowBuffer {\r\n    /**\r\n     * @param {Object} data - buffer data\r\n     * @param {Float32Array} data.position1 - from positions\r\n     * @param {Float32Array} data.position2 - to positions\r\n     * @param {Float32Array} data.color - colors\r\n     * @param {Float32Array} data.radius - radii\r\n     * @param {Picker} [data.picking] - picking ids\r\n     * @param {BufferParameters} [params] - parameters object\r\n     */\r\n    constructor(data, params = {}) {\r\n        this.group = new Group();\r\n        this.wireframeGroup = new Group();\r\n        this.pickingGroup = new Group();\r\n        this.visible = true;\r\n        this.parameters = createParams(params, this.defaultParameters);\r\n        this.splitPosition = new Float32Array(data.position1.length);\r\n        this.cylinderRadius = new Float32Array(data.radius.length);\r\n        const attr = this.makeAttributes(data);\r\n        const bufferParams = {\r\n            radialSegments: this.parameters.radialSegments,\r\n            openEnded: this.parameters.openEnded,\r\n            disableImpostor: this.parameters.disableImpostor\r\n        };\r\n        this.cylinderBuffer = new CylinderBuffer(attr.cylinder, bufferParams);\r\n        this.coneBuffer = new ConeBuffer(attr.cone, bufferParams);\r\n        this.geometry = new GeometryGroup([\r\n            this.cylinderBuffer.geometry,\r\n            this.coneBuffer.geometry\r\n        ]);\r\n        // requires Group objects to be present\r\n        this.matrix = defaults(params.matrix, new Matrix4());\r\n        this.picking = data.picking;\r\n    }\r\n    get defaultParameters() { return ArrowBufferDefaultParameters; }\r\n    set matrix(m) {\r\n        Buffer.prototype.setMatrix.call(this, m);\r\n    }\r\n    get matrix() {\r\n        return this.group.matrix.clone();\r\n    }\r\n    get pickable() {\r\n        return !!this.picking;\r\n    }\r\n    makeAttributes(data = {}) {\r\n        const splitPosition = this.splitPosition;\r\n        const cylinderRadius = this.cylinderRadius;\r\n        const aspectRatio = this.parameters.aspectRatio;\r\n        let i, il;\r\n        const cylinder = {};\r\n        const cone = {};\r\n        if (data.radius) {\r\n            for (i = 0, il = cylinderRadius.length; i < il; ++i) {\r\n                cylinderRadius[i] = data.radius[i] / aspectRatio;\r\n            }\r\n            cylinder.radius = cylinderRadius;\r\n            cone.radius = data.radius;\r\n        }\r\n        if (data.position1 && data.position2) {\r\n            const vFrom = new Vector3();\r\n            const vTo = new Vector3();\r\n            const vDir = new Vector3();\r\n            const vSplit = new Vector3();\r\n            for (i = 0, il = splitPosition.length; i < il; i += 3) {\r\n                vFrom.fromArray(data.position1, i);\r\n                vTo.fromArray(data.position2, i);\r\n                vDir.subVectors(vFrom, vTo);\r\n                const fullLength = vDir.length();\r\n                const coneLength = cylinderRadius[i / 3] * aspectRatio * 2;\r\n                const length = Math.min(fullLength, coneLength);\r\n                vDir.setLength(length);\r\n                vSplit.copy(vTo).add(vDir);\r\n                vSplit.toArray(splitPosition, i);\r\n            }\r\n            cylinder.position1 = data.position1;\r\n            cylinder.position2 = splitPosition;\r\n            cone.position1 = splitPosition;\r\n            cone.position2 = data.position2;\r\n        }\r\n        if (data.color) {\r\n            cylinder.color = data.color;\r\n            cylinder.color2 = data.color;\r\n            cone.color = data.color;\r\n        }\r\n        return {\r\n            cylinder: cylinder,\r\n            cone: cone\r\n        };\r\n    }\r\n    getMesh() {\r\n        return new Group().add(this.cylinderBuffer.getMesh(), this.coneBuffer.getMesh());\r\n    }\r\n    getWireframeMesh() {\r\n        return new Group().add(this.cylinderBuffer.getWireframeMesh(), this.coneBuffer.getWireframeMesh());\r\n    }\r\n    getPickingMesh() {\r\n        return new Group().add(this.cylinderBuffer.getPickingMesh(), this.coneBuffer.getPickingMesh());\r\n    }\r\n    setAttributes(data = {}) {\r\n        const attr = this.makeAttributes(data);\r\n        this.cylinderBuffer.setAttributes(attr.cylinder);\r\n        this.coneBuffer.setAttributes(attr.cone);\r\n    }\r\n    /**\r\n     * Set buffer parameters\r\n     * @param {BufferParameters} params - buffer parameters object\r\n     * @return {undefined}\r\n     */\r\n    setParameters(params = {}) {\r\n        params = Object.assign({}, params);\r\n        if (params && params.matrix !== undefined) {\r\n            this.matrix = params.matrix;\r\n        }\r\n        delete params.matrix;\r\n        if (params && params.wireframe !== undefined) {\r\n            this.parameters.wireframe = params.wireframe;\r\n            this.setVisibility(this.visible);\r\n        }\r\n        this.cylinderBuffer.setParameters(params);\r\n        this.coneBuffer.setParameters(params);\r\n    }\r\n    setVisibility(value) {\r\n        Buffer.prototype.setVisibility.call(this, value);\r\n    }\r\n    dispose() {\r\n        this.cylinderBuffer.dispose();\r\n        this.coneBuffer.dispose();\r\n    }\r\n}\r\nBufferRegistry.add('arrow', ArrowBuffer);\r\nexport default ArrowBuffer;\r\n//# sourceMappingURL=arrow-buffer.js.map","/**\r\n * @file Box Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { BoxBufferGeometry, Vector3 } from 'three';\r\nimport { BufferRegistry } from '../globals';\r\nimport GeometryBuffer from './geometry-buffer';\r\nconst scale = new Vector3();\r\nconst target = new Vector3();\r\nconst up = new Vector3();\r\nconst eye = new Vector3(0, 0, 0);\r\n/**\r\n * Box buffer. Draws boxes.\r\n *\r\n * @example\r\n * var boxBuffer = new BoxBuffer({\r\n *   position: new Float32Array([ 0, 3, 0, -2, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 1, 0, 1, 0 ]),\r\n *   size: new Float32Array([ 2, 1.5 ]),\r\n *   heightAxis: new Float32Array([ 0, 1, 1, 0, 2, 0 ]),\r\n *   depthAxis: new Float32Array([ 1, 0, 1, 0, 0, 2 ])\r\n * })\r\n */\r\nclass BoxBuffer extends GeometryBuffer {\r\n    constructor(data, params = {}) {\r\n        super(data, params, new BoxBufferGeometry(1, 1, 1));\r\n        this.updateNormals = true;\r\n        this.setAttributes(data, true);\r\n    }\r\n    applyPositionTransform(matrix, i, i3) {\r\n        target.fromArray(this._heightAxis, i3);\r\n        up.fromArray(this._depthAxis, i3);\r\n        matrix.lookAt(eye, target, up);\r\n        scale.set(this._size[i], up.length(), target.length());\r\n        matrix.scale(scale);\r\n    }\r\n    setAttributes(data = {}, initNormals) {\r\n        if (data.size)\r\n            this._size = data.size;\r\n        if (data.heightAxis)\r\n            this._heightAxis = data.heightAxis;\r\n        if (data.depthAxis)\r\n            this._depthAxis = data.depthAxis;\r\n        super.setAttributes(data, initNormals);\r\n    }\r\n}\r\nBufferRegistry.add('box', BoxBuffer);\r\nexport default BoxBuffer;\r\n//# sourceMappingURL=box-buffer.js.map","/**\r\n * @file Ellipsoid Geometry Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { IcosahedronBufferGeometry, Vector3 } from 'three';\r\nimport { BufferRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport GeometryBuffer from './geometry-buffer';\r\nimport { BufferDefaultParameters } from './buffer';\r\nconst scale = new Vector3();\r\nconst target = new Vector3();\r\nconst up = new Vector3();\r\nconst eye = new Vector3(0, 0, 0);\r\nexport const EllipsoidBufferDefaultParameters = Object.assign({\r\n    sphereDetail: 2,\r\n}, BufferDefaultParameters);\r\n/**\r\n * Ellipsoid buffer. Draws ellipsoids.\r\n *\r\n * @example\r\n * var ellipsoidBuffer = new EllipsoidBuffer({\r\n *   position: new Float32Array([ 0, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   radius: new Float32Array([ 1 ]),\r\n *   majorAxis: new Float32Array([ 1, 1, 0 ]),\r\n *   minorAxis: new Float32Array([ 0.5, 0, 0.5 ]),\r\n * });\r\n */\r\nclass EllipsoidBuffer extends GeometryBuffer {\r\n    constructor(data, params = {}) {\r\n        super(data, params, new IcosahedronBufferGeometry(1, defaults(params.sphereDetail, 2)));\r\n        this.updateNormals = true;\r\n        this.setAttributes(data, true);\r\n    }\r\n    get defaultParameters() { return EllipsoidBufferDefaultParameters; }\r\n    applyPositionTransform(matrix, i, i3) {\r\n        target.fromArray(this._majorAxis, i3);\r\n        up.fromArray(this._minorAxis, i3);\r\n        matrix.lookAt(eye, target, up);\r\n        scale.set(this._radius[i], up.length(), target.length());\r\n        matrix.scale(scale);\r\n    }\r\n    setAttributes(data = {}, initNormals) {\r\n        if (data.radius)\r\n            this._radius = data.radius;\r\n        if (data.majorAxis)\r\n            this._majorAxis = data.majorAxis;\r\n        if (data.minorAxis)\r\n            this._minorAxis = data.minorAxis;\r\n        super.setAttributes(data, initNormals);\r\n    }\r\n}\r\nBufferRegistry.add('ellipsoid', EllipsoidBuffer);\r\nexport default EllipsoidBuffer;\r\n//# sourceMappingURL=ellipsoid-buffer.js.map","/**\r\n * @file Octahedron Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { OctahedronBufferGeometry, Vector3 } from 'three';\r\nimport { BufferRegistry } from '../globals';\r\nimport GeometryBuffer from './geometry-buffer.js';\r\nconst scale = new Vector3();\r\nconst target = new Vector3();\r\nconst up = new Vector3();\r\nconst eye = new Vector3(0, 0, 0);\r\n/**\r\n * Octahedron buffer. Draws octahedrons.\r\n *\r\n * @example\r\n * var octahedronBuffer = new OctahedronBuffer({\r\n *   position: new Float32Array([ 0, 3, 0, -2, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 1, 0, 1, 0 ]),\r\n *   size: new Float32Array([ 2, 1.5 ]),\r\n *   heightAxis: new Float32Array([ 0, 1, 1, 0, 2, 0 ]),\r\n *   depthAxis: new Float32Array([ 1, 0, 1, 0, 0, 2 ])\r\n * })\r\n */\r\nclass OctahedronBuffer extends GeometryBuffer {\r\n    constructor(data, params = {}) {\r\n        super(data, params, new OctahedronBufferGeometry(1, 0));\r\n        this.updateNormals = true;\r\n        this.setAttributes(data, true);\r\n    }\r\n    applyPositionTransform(matrix, i, i3) {\r\n        target.fromArray(this._heightAxis, i3);\r\n        up.fromArray(this._depthAxis, i3);\r\n        matrix.lookAt(eye, target, up);\r\n        scale.set(this._size[i], up.length(), target.length());\r\n        matrix.scale(scale);\r\n    }\r\n    setAttributes(data = {}, initNormals) {\r\n        if (data.size)\r\n            this._size = data.size;\r\n        if (data.heightAxis)\r\n            this._heightAxis = data.heightAxis;\r\n        if (data.depthAxis)\r\n            this._depthAxis = data.depthAxis;\r\n        super.setAttributes(data, initNormals);\r\n    }\r\n}\r\nBufferRegistry.add('octahedron', OctahedronBuffer);\r\nexport default OctahedronBuffer;\r\n//# sourceMappingURL=octahedron-buffer.js.map","/**\r\n * @file Tetrahedron Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { TetrahedronBufferGeometry, Vector3 } from 'three';\r\nimport { BufferRegistry } from '../globals';\r\nimport GeometryBuffer from './geometry-buffer';\r\nconst scale = new Vector3();\r\nconst target = new Vector3();\r\nconst up = new Vector3();\r\nconst eye = new Vector3(0, 0, 0);\r\n/**\r\n * Tetrahedron buffer. Draws tetrahedrons.\r\n *\r\n * @example\r\n * var tetrahedronBuffer = new TetrahedronBuffer({\r\n *   position: new Float32Array([ 0, 3, 0, -2, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 1, 0, 1, 0 ]),\r\n *   size: new Float32Array([ 2, 1.5 ]),\r\n *   heightAxis: new Float32Array([ 0, 1, 1, 0, 2, 0 ]),\r\n *   depthAxis: new Float32Array([ 1, 0, 1, 0, 0, 2 ])\r\n * })\r\n */\r\nclass TetrahedronBuffer extends GeometryBuffer {\r\n    constructor(data, params = {}) {\r\n        super(data, params, new TetrahedronBufferGeometry(1, 0));\r\n        this.updateNormals = true;\r\n        this.setAttributes(data, true);\r\n    }\r\n    applyPositionTransform(matrix, i, i3) {\r\n        target.fromArray(this._heightAxis, i3);\r\n        up.fromArray(this._depthAxis, i3);\r\n        matrix.lookAt(eye, target, up);\r\n        scale.set(this._size[i], up.length(), target.length());\r\n        matrix.scale(scale);\r\n    }\r\n    setAttributes(data = {}, initNormals) {\r\n        if (data.size)\r\n            this._size = data.size;\r\n        if (data.heightAxis)\r\n            this._heightAxis = data.heightAxis;\r\n        if (data.depthAxis)\r\n            this._depthAxis = data.depthAxis;\r\n        super.setAttributes(data, initNormals);\r\n    }\r\n}\r\nBufferRegistry.add('tetrahedron', TetrahedronBuffer);\r\nexport default TetrahedronBuffer;\r\n//# sourceMappingURL=tetrahedron-buffer.js.map","/**\r\n * @file Tetrahedron Geometry Buffer\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { TorusBufferGeometry, Vector3 } from 'three';\r\nimport { BufferRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport GeometryBuffer from './geometry-buffer';\r\nimport { BufferDefaultParameters } from './buffer';\r\nconst scale = new Vector3();\r\nconst target = new Vector3();\r\nconst up = new Vector3();\r\nconst eye = new Vector3(0, 0, 0);\r\nexport const TorusBufferDefaultParameters = Object.assign({\r\n    radiusRatio: 0.2,\r\n    radialSegments: 16,\r\n    tubularSegments: 32\r\n}, BufferDefaultParameters);\r\n/**\r\n * Torus geometry buffer. Draws torii.\r\n *\r\n * @example\r\n * var torusBuffer = new TorusBuffer({\r\n *   position: new Float32Array([ 0, 0, 0 ]),\r\n *   color: new Float32Array([ 1, 0, 0 ]),\r\n *   radius: new Float32Array([ 1 ]),\r\n *   majorAxis: new Float32Array([ 1, 1, 0 ]),\r\n *   minorAxis: new Float32Array([ 0.5, 0, 0.5 ]),\r\n * });\r\n */\r\nclass TorusBuffer extends GeometryBuffer {\r\n    constructor(data, params = {}) {\r\n        super(data, params, new TorusBufferGeometry(1, defaults(params.radiusRatio, 0.2), defaults(params.radialSegments, 16), defaults(params.tubularSegments, 32)));\r\n        this.updateNormals = true;\r\n        this.setAttributes(data, true);\r\n    }\r\n    get defaultParameters() { return TorusBufferDefaultParameters; }\r\n    applyPositionTransform(matrix, i, i3) {\r\n        target.fromArray(this._majorAxis, i3);\r\n        up.fromArray(this._minorAxis, i3);\r\n        matrix.lookAt(eye, target, up);\r\n        const r = this._radius[i];\r\n        scale.set(r, r, r);\r\n        matrix.scale(scale);\r\n    }\r\n    setAttributes(data = {}, initNormals) {\r\n        if (data.radius)\r\n            this._radius = data.radius;\r\n        if (data.majorAxis)\r\n            this._majorAxis = data.majorAxis;\r\n        if (data.minorAxis)\r\n            this._minorAxis = data.minorAxis;\r\n        super.setAttributes(data, initNormals);\r\n    }\r\n}\r\nBufferRegistry.add('torus', TorusBuffer);\r\nexport default TorusBuffer;\r\n//# sourceMappingURL=torus-buffer.js.map","/**\r\n * @file Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log } from '../globals';\r\nimport { defaults } from '../utils';\r\nclass Parser {\r\n    constructor(streamer, params) {\r\n        var p = params || {};\r\n        this.streamer = streamer;\r\n        this.name = defaults(p.name, '');\r\n        this.path = defaults(p.path, '');\r\n    }\r\n    get type() { return ''; }\r\n    get __objName() { return ''; }\r\n    get isBinary() { return false; }\r\n    get isJson() { return false; }\r\n    get isXml() { return false; }\r\n    parse() {\r\n        return this.streamer.read().then(() => {\r\n            this._beforeParse();\r\n            this._parse();\r\n            this._afterParse();\r\n            return this[this.__objName];\r\n        });\r\n    }\r\n    _parse() { }\r\n    _beforeParse() { }\r\n    _afterParse() {\r\n        if (Debug)\r\n            Log.log(this[this.__objName]);\r\n    }\r\n}\r\nexport default Parser;\r\n//# sourceMappingURL=parser.js.map","/**\r\n * @file Structure Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport Parser from './parser';\r\nimport Structure from '../structure/structure';\r\nimport StructureBuilder from '../structure/structure-builder';\r\nclass StructureParser extends Parser {\r\n    constructor(streamer, params) {\r\n        var p = params || {};\r\n        super(streamer, p);\r\n        this.firstModelOnly = defaults(p.firstModelOnly, false);\r\n        this.asTrajectory = defaults(p.asTrajectory, false);\r\n        this.cAlphaOnly = defaults(p.cAlphaOnly, false);\r\n        this.structure = new Structure(this.name, this.path);\r\n        this.structureBuilder = new StructureBuilder(this.structure);\r\n    }\r\n    get type() { return 'structure'; }\r\n    get __objName() { return 'structure'; }\r\n}\r\nexport default StructureParser;\r\n//# sourceMappingURL=structure-parser.js.map","/**\r\n * @file Entity\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { UnknownEntity, PolymerEntity, NonPolymerEntity, MacrolideEntity, WaterEntity } from './structure-constants.js';\r\nfunction entityTypeFromString(string) {\r\n    string = string.toLowerCase();\r\n    switch (string) {\r\n        case 'polymer':\r\n            return PolymerEntity;\r\n        case 'non-polymer':\r\n            return NonPolymerEntity;\r\n        case 'macrolide':\r\n            return MacrolideEntity;\r\n        case 'water':\r\n            return WaterEntity;\r\n        default:\r\n            return UnknownEntity;\r\n    }\r\n}\r\nfunction entityFromType(type) {\r\n    switch (type) {\r\n        case PolymerEntity:\r\n            return 'polymer';\r\n        case NonPolymerEntity:\r\n            return 'non-polymer';\r\n        case MacrolideEntity:\r\n            return 'macrolide';\r\n        case WaterEntity:\r\n            return 'water';\r\n        default:\r\n            return undefined;\r\n    }\r\n}\r\nexport const EntityTypeString = {\r\n    'polymer': PolymerEntity,\r\n    'non-polymer': NonPolymerEntity,\r\n    'macrolide': MacrolideEntity,\r\n    'water': WaterEntity,\r\n};\r\n/**\r\n * Entity of a {@link Structure}\r\n */\r\nexport default class Entity {\r\n    /**\r\n     * @param {Structure} structure - structure the entity belongs to\r\n     * @param {Integer} index - index within structure.entityList\r\n     * @param {String} description - entity description\r\n     * @param {String} type - entity type\r\n     * @param {Array} chainIndexList - entity chainIndexList\r\n     */\r\n    constructor(structure, index, description = '', type, chainIndexList = []) {\r\n        this.structure = structure;\r\n        this.index = index;\r\n        this.description = description;\r\n        this.entityType = entityTypeFromString(type || '');\r\n        this.chainIndexList = chainIndexList;\r\n        chainIndexList.forEach(function (ci) {\r\n            structure.chainStore.entityIndex[ci] = index;\r\n        });\r\n    }\r\n    get type() { return entityFromType(this.entityType); }\r\n    getEntityType() {\r\n        return this.entityType;\r\n    }\r\n    isPolymer() {\r\n        return this.entityType === PolymerEntity;\r\n    }\r\n    isNonPolymer() {\r\n        return this.entityType === NonPolymerEntity;\r\n    }\r\n    isMacrolide() {\r\n        return this.entityType === MacrolideEntity;\r\n    }\r\n    isWater() {\r\n        return this.entityType === WaterEntity;\r\n    }\r\n    eachChain(callback) {\r\n        const cp = this.structure.getChainProxy();\r\n        this.chainIndexList.forEach(function (index) {\r\n            cp.index = index;\r\n            callback(cp);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=entity.js.map","/**\r\n * @file Unitcell\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Color, Vector3, Matrix4 } from 'three';\r\nimport { defaults } from '../utils';\r\nimport { degToRad } from '../math/math-utils';\r\nimport { uniformArray, uniformArray3, centerArray3 } from '../math/array-utils';\r\nimport { UnitcellPicker } from '../utils/picker';\r\nconst DefaultBoxParams = {\r\n    a: 1,\r\n    b: 1,\r\n    c: 1,\r\n    alpha: 90,\r\n    beta: 90,\r\n    gamma: 90,\r\n    spacegroup: 'P 1'\r\n};\r\n/**\r\n * Unitcell class\r\n */\r\nclass Unitcell {\r\n    /**\r\n     * @param  {Object} params - unitcell parameters\r\n     * @param  {Number} params.a - length a\r\n     * @param  {Number} params.b - length b\r\n     * @param  {Number} params.c - length c\r\n     * @param  {Number} params.alpha - angle alpha\r\n     * @param  {Number} params.beta - angle beta\r\n     * @param  {Number} params.gamma - angle gamma\r\n     * @param  {String} params.spacegroup - spacegroup\r\n     * @param  {Matrix4} [params.cartToFrac] - transformation matrix from\r\n     *                                         cartesian to fractional coordinates\r\n     * @param  {Matrix4} [params.scale] - alias for `params.cartToFrac`\r\n     */\r\n    constructor(params = DefaultBoxParams) {\r\n        this.cartToFrac = new Matrix4();\r\n        this.fracToCart = new Matrix4();\r\n        this.a = params.a;\r\n        this.b = params.b;\r\n        this.c = params.c;\r\n        this.alpha = params.alpha;\r\n        this.beta = params.beta;\r\n        this.gamma = params.gamma;\r\n        this.spacegroup = params.spacegroup;\r\n        const alphaRad = degToRad(this.alpha);\r\n        const betaRad = degToRad(this.beta);\r\n        const gammaRad = degToRad(this.gamma);\r\n        const cosAlpha = Math.cos(alphaRad);\r\n        const cosBeta = Math.cos(betaRad);\r\n        const cosGamma = Math.cos(gammaRad);\r\n        const sinBeta = Math.sin(betaRad);\r\n        const sinGamma = Math.sin(gammaRad);\r\n        this.volume = (this.a * this.b * this.c *\r\n            Math.sqrt(1 - cosAlpha * cosAlpha - cosBeta * cosBeta - cosGamma * cosGamma +\r\n                2.0 * cosAlpha * cosBeta * cosGamma));\r\n        if (params.cartToFrac === undefined) {\r\n            // https://github.com/biojava/biojava/blob/master/biojava-structure/src/main/java/org/biojava/nbio/structure/xtal/CrystalCell.java\r\n            const cStar = (this.a * this.b * sinGamma) / this.volume;\r\n            const cosAlphaStar = ((cosBeta * cosGamma - cosAlpha) / (sinBeta * sinGamma));\r\n            this.fracToCart.set(this.a, 0, 0, 0, this.b * cosGamma, this.b * sinGamma, 0, 0, this.c * cosBeta, -this.c * sinBeta * cosAlphaStar, 1.0 / cStar, 0, 0, 0, 0, 1).transpose();\r\n            this.cartToFrac.getInverse(this.fracToCart);\r\n        }\r\n        else {\r\n            this.cartToFrac.copy(params.cartToFrac);\r\n            this.fracToCart.getInverse(this.cartToFrac);\r\n        }\r\n    }\r\n    getPosition(structure) {\r\n        const vertexPosition = new Float32Array(3 * 8);\r\n        if (structure.unitcell) {\r\n            const uc = structure.unitcell;\r\n            const centerFrac = structure.center.clone().applyMatrix4(uc.cartToFrac).floor();\r\n            const v = new Vector3();\r\n            let cornerOffset = 0;\r\n            const addCorner = function (x, y, z) {\r\n                v.set(x, y, z)\r\n                    .add(centerFrac)\r\n                    .applyMatrix4(uc.fracToCart)\r\n                    .toArray(vertexPosition, cornerOffset);\r\n                cornerOffset += 3;\r\n            };\r\n            addCorner(0, 0, 0);\r\n            addCorner(1, 0, 0);\r\n            addCorner(0, 1, 0);\r\n            addCorner(0, 0, 1);\r\n            addCorner(1, 1, 0);\r\n            addCorner(1, 0, 1);\r\n            addCorner(0, 1, 1);\r\n            addCorner(1, 1, 1);\r\n        }\r\n        return vertexPosition;\r\n    }\r\n    getCenter(structure) {\r\n        return centerArray3(this.getPosition(structure));\r\n    }\r\n    getData(structure, params = {}) {\r\n        const colorValue = defaults(params.colorValue, 'orange');\r\n        const radius = defaults(params.radius, Math.cbrt(this.volume) / 200);\r\n        const c = new Color(colorValue);\r\n        const v = new Vector3();\r\n        const vertexPosition = this.getPosition(structure);\r\n        const vertexColor = uniformArray3(8, c.r, c.g, c.b);\r\n        const vertexRadius = uniformArray(8, radius);\r\n        const edgePosition1 = new Float32Array(3 * 12);\r\n        const edgePosition2 = new Float32Array(3 * 12);\r\n        const edgeColor = uniformArray3(12, c.r, c.g, c.b);\r\n        const edgeRadius = uniformArray(12, radius);\r\n        let edgeOffset = 0;\r\n        function addEdge(a, b) {\r\n            v.fromArray(vertexPosition, a * 3)\r\n                .toArray(edgePosition1, edgeOffset);\r\n            v.fromArray(vertexPosition, b * 3)\r\n                .toArray(edgePosition2, edgeOffset);\r\n            edgeOffset += 3;\r\n        }\r\n        addEdge(0, 1);\r\n        addEdge(0, 2);\r\n        addEdge(0, 3);\r\n        addEdge(1, 4);\r\n        addEdge(1, 5);\r\n        addEdge(2, 6);\r\n        addEdge(3, 5);\r\n        addEdge(4, 7);\r\n        addEdge(5, 7);\r\n        addEdge(2, 4);\r\n        addEdge(7, 6);\r\n        addEdge(3, 6);\r\n        const picker = new UnitcellPicker(this, structure);\r\n        return {\r\n            vertex: {\r\n                position: vertexPosition,\r\n                color: vertexColor,\r\n                radius: vertexRadius,\r\n                picking: picker\r\n            },\r\n            edge: {\r\n                position1: edgePosition1,\r\n                position2: edgePosition2,\r\n                color: edgeColor,\r\n                color2: edgeColor,\r\n                radius: edgeRadius,\r\n                picking: picker\r\n            }\r\n        };\r\n    }\r\n}\r\nexport default Unitcell;\r\n//# sourceMappingURL=unitcell.js.map","/**\r\n * @file Pdb Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport StructureParser from './structure-parser';\r\nimport Entity from '../structure/entity';\r\nimport Unitcell from '../symmetry/unitcell';\r\nimport Assembly from '../symmetry/assembly';\r\nimport { WaterNames } from '../structure/structure-constants';\r\nimport { assignSecondaryStructure, buildUnitcellAssembly, calculateBonds, calculateChainnames, calculateSecondaryStructure } from '../structure/structure-utils';\r\n// PDB helix record encoding\r\nconst HelixTypes = {\r\n    1: 'h',\r\n    2: 'h',\r\n    3: 'i',\r\n    4: 'h',\r\n    5: 'g',\r\n    6: 'h',\r\n    7: 'h',\r\n    8: 'h',\r\n    9: 'h',\r\n    10: 'h',\r\n    0: 'h' //Used to be ''\r\n};\r\nconst dAminoAcids = [\r\n    'DAL',\r\n    'DAR',\r\n    'DSG',\r\n    'DAS',\r\n    'DCY',\r\n    'DGL',\r\n    'DGN',\r\n    'DHI',\r\n    'DIL',\r\n    'DLE',\r\n    'DLY',\r\n    'MED',\r\n    'DPN',\r\n    'DPR',\r\n    'DSN',\r\n    'DTH',\r\n    'DTR',\r\n    'DTY',\r\n    'DVA',\r\n    'DNE' // D-NORLEUCINE\r\n    // ???  // D-SELENOCYSTEINE\r\n];\r\nconst entityKeyList = [\r\n    'MOL_ID', 'MOLECULE', 'CHAIN', 'FRAGMENT', 'SYNONYM',\r\n    'EC', 'ENGINEERED', 'MUTATION', 'OTHER_DETAILS'\r\n];\r\nconst reWhitespace = /\\s+/;\r\nfunction getModresId(resno, chainname, inscode) {\r\n    let id = `${resno}`;\r\n    if (chainname)\r\n        id += `:${chainname}`;\r\n    if (inscode)\r\n        id += `^${inscode}`;\r\n    return id;\r\n}\r\nclass PdbParser extends StructureParser {\r\n    /**\r\n     * Create a pdb parser\r\n     * @param  {Streamer} streamer - streamer object\r\n     * @param  {Object} params - params object\r\n     * @param  {Boolean} params.hex - hexadecimal parsing of\r\n     *                                atom numbers >99.999 and\r\n     *                                residue numbers >9.999\r\n     * @return {undefined}\r\n     */\r\n    constructor(streamer, params) {\r\n        const p = params || {};\r\n        super(streamer, p);\r\n        this.hex = defaults(p.hex, false);\r\n    }\r\n    get type() { return 'pdb'; }\r\n    _parse() {\r\n        // http://www.wwpdb.org/documentation/file-format.php\r\n        if (Debug)\r\n            Log.time('PdbParser._parse ' + this.name);\r\n        let isLegacy = false;\r\n        const headerLine = this.streamer.peekLines(1)[0];\r\n        const headerId = headerLine.substr(62, 4);\r\n        const legacyId = headerLine.substr(72, 4);\r\n        if (headerId === legacyId && legacyId.trim()) {\r\n            isLegacy = true;\r\n        }\r\n        const isPqr = this.type === 'pqr';\r\n        const isPdbqt = this.type === 'pdbqt';\r\n        const s = this.structure;\r\n        const sb = this.structureBuilder;\r\n        const hex = this.hex;\r\n        let serialRadix = 10;\r\n        let resnoRadix = 10;\r\n        const firstModelOnly = this.firstModelOnly;\r\n        const asTrajectory = this.asTrajectory;\r\n        const cAlphaOnly = this.cAlphaOnly;\r\n        const frames = s.frames;\r\n        const boxes = s.boxes;\r\n        let doFrames = false;\r\n        let currentFrame, currentCoord;\r\n        const biomolDict = s.biomolDict;\r\n        let currentBiomol;\r\n        let currentPart;\r\n        let currentMatrix;\r\n        let line, recordName;\r\n        let serial, chainname, resno, resname, occupancy;\r\n        let inscode, atomname, hetero, bfactor, altloc;\r\n        let startChain, startResi, startIcode;\r\n        let endChain, endResi, endIcode;\r\n        let serialDict = {};\r\n        const unitcellDict = {};\r\n        const bondDict = {};\r\n        const entityDataList = [];\r\n        let currentEntityData;\r\n        let currentEntityKey;\r\n        // MOL_ID                 Numbers each component; also used in  SOURCE to associate\r\n        //                        the information.\r\n        // MOLECULE               Name of the macromolecule.\r\n        // CHAIN                  Comma-separated list of chain  identifier(s).\r\n        // FRAGMENT               Specifies a domain or region of the  molecule.\r\n        // SYNONYM                Comma-separated list of synonyms for  the MOLECULE.\r\n        // EC                     The Enzyme Commission number associated  with the molecule.\r\n        //                        If there is more than one EC number,  they are presented\r\n        //                        as a comma-separated list.\r\n        // ENGINEERED             Indicates that the molecule was  produced using\r\n        //                        recombinant technology or by purely  chemical synthesis.\r\n        // MUTATION               Indicates if there is a mutation.\r\n        // OTHER_DETAILS          Additional comments.\r\n        const hetnameDict = {};\r\n        const modresDict = {};\r\n        const chainDict = {};\r\n        let chainIdx, chainid, newChain;\r\n        let currentChainname, currentResno, currentResname, currentInscode;\r\n        const seqresDict = {};\r\n        let currentSeqresChainname;\r\n        const secStruct = {\r\n            helices: [],\r\n            sheets: []\r\n        };\r\n        const helices = secStruct.helices;\r\n        const sheets = secStruct.sheets;\r\n        const atomMap = s.atomMap;\r\n        const atomStore = s.atomStore;\r\n        atomStore.resize(Math.round(this.streamer.data.length / 80));\r\n        if (isPqr || isPdbqt)\r\n            atomStore.addField('partialCharge', 1, 'float32');\r\n        if (isPqr)\r\n            atomStore.addField('radius', 1, 'float32');\r\n        const ap1 = s.getAtomProxy();\r\n        const ap2 = s.getAtomProxy();\r\n        let idx = 0;\r\n        let modelIdx = 0;\r\n        let pendingStart = true;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                line = lines[i];\r\n                recordName = line.substr(0, 6);\r\n                if (recordName === 'ATOM  ' || recordName === 'HETATM') {\r\n                    // http://www.wwpdb.org/documentation/file-format-content/format33/sect9.html#ATOM\r\n                    // PQR: Field_name Atom_number Atom_name Residue_name Chain_ID Residue_number X Y Z Charge Radius\r\n                    if (pendingStart) {\r\n                        if (asTrajectory) {\r\n                            if (doFrames) {\r\n                                currentFrame = new Float32Array(atomStore.count * 3);\r\n                                frames.push(currentFrame);\r\n                            }\r\n                            else {\r\n                                currentFrame = [];\r\n                            }\r\n                            currentCoord = 0;\r\n                        }\r\n                        else {\r\n                            if (!firstModelOnly)\r\n                                serialDict = {};\r\n                        }\r\n                        chainIdx = 1;\r\n                        chainid = chainIdx.toString();\r\n                        newChain = true;\r\n                        pendingStart = false;\r\n                    }\r\n                    if (firstModelOnly && modelIdx > 0)\r\n                        continue;\r\n                    let x, y, z, ls, dd = 0;\r\n                    if (isPqr) {\r\n                        ls = line.split(reWhitespace);\r\n                        dd = ls.length === 10 ? 1 : 0;\r\n                        atomname = ls[2];\r\n                        if (cAlphaOnly && atomname !== 'CA')\r\n                            continue;\r\n                        x = parseFloat(ls[6 - dd]);\r\n                        y = parseFloat(ls[7 - dd]);\r\n                        z = parseFloat(ls[8 - dd]);\r\n                    }\r\n                    else {\r\n                        atomname = line.substr(12, 4).trim();\r\n                        if (cAlphaOnly && atomname !== 'CA')\r\n                            continue;\r\n                        x = parseFloat(line.substr(30, 8));\r\n                        y = parseFloat(line.substr(38, 8));\r\n                        z = parseFloat(line.substr(46, 8));\r\n                    }\r\n                    if (asTrajectory) {\r\n                        const j = currentCoord * 3;\r\n                        currentFrame[j + 0] = x;\r\n                        currentFrame[j + 1] = y;\r\n                        currentFrame[j + 2] = z;\r\n                        currentCoord += 1;\r\n                        if (doFrames)\r\n                            continue;\r\n                    }\r\n                    let element;\r\n                    if (isPqr) {\r\n                        serial = parseInt(ls[1]);\r\n                        element = '';\r\n                        hetero = (line[0] === 'H') ? 1 : 0;\r\n                        chainname = dd ? '' : ls[4];\r\n                        resno = parseInt(ls[5 - dd]);\r\n                        inscode = '';\r\n                        resname = ls[3];\r\n                        altloc = '';\r\n                        occupancy = 1.0;\r\n                    }\r\n                    else {\r\n                        serial = parseInt(line.substr(6, 5), serialRadix);\r\n                        if (hex && serial === 99999) {\r\n                            serialRadix = 16;\r\n                        }\r\n                        hetero = (line[0] === 'H') ? 1 : 0;\r\n                        chainname = line[21].trim();\r\n                        resno = parseInt(line.substr(22, 4), resnoRadix);\r\n                        if (hex && resno === 9999) {\r\n                            resnoRadix = 16;\r\n                        }\r\n                        inscode = line[26].trim();\r\n                        resname = line.substr(17, 4).trim() || 'MOL';\r\n                        bfactor = parseFloat(line.substr(60, 6));\r\n                        altloc = line[16].trim();\r\n                        occupancy = parseFloat(line.substr(54, 6));\r\n                        if (!isLegacy) {\r\n                            if (isPdbqt) {\r\n                                element = line.substr(12, 2).trim();\r\n                            }\r\n                            else {\r\n                                element = line.substr(76, 2).trim();\r\n                                if (!chainname) {\r\n                                    chainname = line.substr(72, 4).trim(); // segid\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    atomStore.growIfFull();\r\n                    atomStore.atomTypeId[idx] = atomMap.add(atomname, element);\r\n                    atomStore.x[idx] = x;\r\n                    atomStore.y[idx] = y;\r\n                    atomStore.z[idx] = z;\r\n                    atomStore.serial[idx] = serial;\r\n                    atomStore.altloc[idx] = altloc.charCodeAt(0);\r\n                    atomStore.occupancy[idx] = isNaN(occupancy) ? 0 : occupancy;\r\n                    if (isPqr) {\r\n                        atomStore.partialCharge[idx] = parseFloat(ls[9 - dd]);\r\n                        atomStore.radius[idx] = parseFloat(ls[10 - dd]);\r\n                    }\r\n                    else {\r\n                        atomStore.bfactor[idx] = isNaN(bfactor) ? 0 : bfactor;\r\n                        if (isPdbqt) {\r\n                            atomStore.partialCharge[idx] = parseFloat(line.substr(70, 6));\r\n                        }\r\n                    }\r\n                    const modresId = getModresId(resno, chainname, inscode);\r\n                    // TODO instead of looking at MODRES look at SEQRES and\r\n                    //      missing residues in REMARK 465\r\n                    if (hetero && !modresDict[modresId] && !dAminoAcids.includes(resname)) {\r\n                        if (currentChainname !== chainname || currentResname !== resname ||\r\n                            (!WaterNames.includes(resname) &&\r\n                                (currentResno !== resno || currentInscode !== inscode))) {\r\n                            chainIdx += 1;\r\n                            chainid = chainIdx.toString();\r\n                            currentResno = resno;\r\n                            currentResname = resname;\r\n                            currentInscode = inscode;\r\n                        }\r\n                    }\r\n                    else if (!newChain && currentChainname !== chainname) {\r\n                        chainIdx += 1;\r\n                        chainid = chainIdx.toString();\r\n                    }\r\n                    sb.addAtom(modelIdx, chainname, chainid, resname, resno, hetero, undefined, inscode);\r\n                    serialDict[serial] = idx;\r\n                    idx += 1;\r\n                    newChain = false;\r\n                    currentChainname = chainname;\r\n                }\r\n                else if (recordName === 'CONECT') {\r\n                    const fromIdx = serialDict[parseInt(line.substr(6, 5))];\r\n                    const pos = [11, 16, 21, 26];\r\n                    const bondIndex = {};\r\n                    if (fromIdx === undefined) {\r\n                        // Log.log( \"missing CONNECT serial\" );\r\n                        continue;\r\n                    }\r\n                    for (let j = 0; j < 4; ++j) {\r\n                        let toIdx = parseInt(line.substr(pos[j], 5));\r\n                        if (Number.isNaN(toIdx))\r\n                            continue;\r\n                        toIdx = serialDict[toIdx];\r\n                        if (toIdx === undefined) {\r\n                            // Log.log( \"missing CONNECT serial\" );\r\n                            continue;\r\n                        } /* else if( toIdx < fromIdx ){\r\n                            // likely a duplicate in standard PDB format\r\n                            // but not necessarily, so better remove duplicates\r\n                            // in a pass after parsing (and auto bonding)\r\n                            continue;\r\n                        } */\r\n                        if (fromIdx < toIdx) {\r\n                            ap1.index = fromIdx;\r\n                            ap2.index = toIdx;\r\n                        }\r\n                        else {\r\n                            ap1.index = toIdx;\r\n                            ap2.index = fromIdx;\r\n                        }\r\n                        // interpret records where a 'toIdx' atom is given multiple times\r\n                        // as double/triple bonds, e.g. CONECT 1529 1528 1528 is a double bond\r\n                        if (bondIndex[toIdx] !== undefined) {\r\n                            s.bondStore.bondOrder[bondIndex[toIdx]] += 1;\r\n                        }\r\n                        else {\r\n                            const hash = ap1.index + '|' + ap2.index;\r\n                            if (bondDict[hash] === undefined) {\r\n                                bondDict[hash] = true;\r\n                                bondIndex[toIdx] = s.bondStore.count;\r\n                                s.bondStore.addBond(ap1, ap2, 1); // start/assume with single bond\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else if (recordName === 'HELIX ') {\r\n                    startChain = line[19].trim();\r\n                    startResi = parseInt(line.substr(21, 4));\r\n                    startIcode = line[25].trim();\r\n                    endChain = line[31].trim();\r\n                    endResi = parseInt(line.substr(33, 4));\r\n                    endIcode = line[37].trim();\r\n                    let helixType = parseInt(line.substr(39, 1));\r\n                    helixType = (HelixTypes[helixType] || HelixTypes[0]).charCodeAt(0);\r\n                    helices.push([\r\n                        startChain, startResi, startIcode,\r\n                        endChain, endResi, endIcode,\r\n                        helixType\r\n                    ]);\r\n                }\r\n                else if (recordName === 'SHEET ') {\r\n                    startChain = line[21].trim();\r\n                    startResi = parseInt(line.substr(22, 4));\r\n                    startIcode = line[26].trim();\r\n                    endChain = line[32].trim();\r\n                    endResi = parseInt(line.substr(33, 4));\r\n                    endIcode = line[37].trim();\r\n                    sheets.push([\r\n                        startChain, startResi, startIcode,\r\n                        endChain, endResi, endIcode\r\n                    ]);\r\n                }\r\n                else if (recordName === 'HETNAM') {\r\n                    hetnameDict[line.substr(11, 3)] = line.substr(15).trim();\r\n                }\r\n                else if (recordName === 'SEQRES') {\r\n                    const seqresChainname = line[11].trim();\r\n                    if (seqresChainname !== currentSeqresChainname) {\r\n                        seqresDict[seqresChainname] = [];\r\n                        currentSeqresChainname = seqresChainname;\r\n                    }\r\n                    seqresDict[seqresChainname].push(...line.substr(19).trim().split(reWhitespace));\r\n                }\r\n                else if (recordName === 'MODRES') {\r\n                    // MODRES 2SRC PTR A  527  TYR  O-PHOSPHOTYROSINE\r\n                    const resname = line.substr(12, 3).trim();\r\n                    const chainname = line[16].trim();\r\n                    const inscode = line[22].trim();\r\n                    const resno = parseInt(line.substr(18, 4).trim());\r\n                    const id = getModresId(resno, chainname, inscode);\r\n                    modresDict[id] = { resname, chainname, inscode, resno };\r\n                }\r\n                else if (recordName === 'COMPND') {\r\n                    const comp = line.substr(10, 70).trim();\r\n                    const keyEnd = comp.indexOf(':');\r\n                    const key = comp.substring(0, keyEnd);\r\n                    let value;\r\n                    if (entityKeyList.includes(key)) {\r\n                        currentEntityKey = key;\r\n                        value = comp.substring(keyEnd + 2);\r\n                    }\r\n                    else {\r\n                        value = comp;\r\n                    }\r\n                    value = value.replace(/;$/, '');\r\n                    if (currentEntityKey === 'MOL_ID') {\r\n                        currentEntityData = {\r\n                            chainList: [],\r\n                            name: ''\r\n                        };\r\n                        entityDataList.push(currentEntityData);\r\n                    }\r\n                    else if (currentEntityKey === 'MOLECULE') {\r\n                        if (currentEntityData.name)\r\n                            currentEntityData.name += ' ';\r\n                        currentEntityData.name += value;\r\n                    }\r\n                    else if (currentEntityKey === 'CHAIN') {\r\n                        Array.prototype.push.apply(currentEntityData.chainList, value.split(/\\s*,\\s*/));\r\n                    }\r\n                }\r\n                else if (line.startsWith('TER')) {\r\n                    const cp = s.getChainProxy(s.chainStore.count - 1);\r\n                    chainDict[cp.chainname] = cp.index;\r\n                    chainIdx += 1;\r\n                    chainid = chainIdx.toString();\r\n                    newChain = true;\r\n                }\r\n                else if (recordName === 'REMARK' && line.substr(7, 3) === '350') {\r\n                    if (line.substr(11, 12) === 'BIOMOLECULE:') {\r\n                        let name = line.substr(23).trim();\r\n                        if (/^(0|[1-9][0-9]*)$/.test(name))\r\n                            name = 'BU' + name;\r\n                        currentBiomol = new Assembly(name);\r\n                        biomolDict[name] = currentBiomol;\r\n                    }\r\n                    else if (line.substr(13, 5) === 'BIOMT') {\r\n                        const biomt = line.split(/\\s+/);\r\n                        const row = parseInt(line[18]) - 1;\r\n                        if (row === 0) {\r\n                            currentMatrix = new Matrix4();\r\n                            currentPart.matrixList.push(currentMatrix);\r\n                        }\r\n                        const biomtElms = currentMatrix.elements;\r\n                        biomtElms[4 * 0 + row] = parseFloat(biomt[4]);\r\n                        biomtElms[4 * 1 + row] = parseFloat(biomt[5]);\r\n                        biomtElms[4 * 2 + row] = parseFloat(biomt[6]);\r\n                        biomtElms[4 * 3 + row] = parseFloat(biomt[7]);\r\n                    }\r\n                    else if (line.substr(11, 30) === 'APPLY THE FOLLOWING TO CHAINS:' ||\r\n                        line.substr(11, 30) === '                   AND CHAINS:') {\r\n                        if (line.substr(11, 5) === 'APPLY') {\r\n                            currentPart = currentBiomol.addPart();\r\n                        }\r\n                        const chainList = line.substr(41, 30).split(',');\r\n                        for (let j = 0, jl = chainList.length; j < jl; ++j) {\r\n                            const c = chainList[j].trim();\r\n                            if (c)\r\n                                currentPart.chainList.push(c);\r\n                        }\r\n                    }\r\n                }\r\n                else if (recordName === 'HEADER') {\r\n                    s.id = line.substr(62, 4);\r\n                }\r\n                else if (recordName === 'TITLE ') {\r\n                    s.title += (s.title ? ' ' : '') + line.substr(10, 70).trim();\r\n                }\r\n                else if (recordName === 'MODEL ') {\r\n                    pendingStart = true;\r\n                }\r\n                else if (recordName === 'ENDMDL' || line.trim() === 'END') {\r\n                    if (pendingStart)\r\n                        continue;\r\n                    if (asTrajectory && !doFrames) {\r\n                        frames.push(new Float32Array(currentFrame));\r\n                        doFrames = true;\r\n                    }\r\n                    modelIdx += 1;\r\n                    pendingStart = true;\r\n                }\r\n                else if (line.substr(0, 5) === 'MTRIX') {\r\n                    // ignore 'given' operators\r\n                    if (line[59] === '1')\r\n                        continue;\r\n                    if (!currentBiomol || currentBiomol.name !== 'NCS') {\r\n                        const ncsName = 'NCS';\r\n                        currentBiomol = new Assembly(ncsName);\r\n                        biomolDict[ncsName] = currentBiomol;\r\n                        currentPart = currentBiomol.addPart();\r\n                    }\r\n                    const ncs = line.split(/\\s+/);\r\n                    const ncsRow = parseInt(line[5]) - 1;\r\n                    if (ncsRow === 0) {\r\n                        currentMatrix = new Matrix4();\r\n                        currentPart.matrixList.push(currentMatrix);\r\n                    }\r\n                    const ncsElms = currentMatrix.elements;\r\n                    ncsElms[4 * 0 + ncsRow] = parseFloat(ncs[2]);\r\n                    ncsElms[4 * 1 + ncsRow] = parseFloat(ncs[3]);\r\n                    ncsElms[4 * 2 + ncsRow] = parseFloat(ncs[4]);\r\n                    ncsElms[4 * 3 + ncsRow] = parseFloat(ncs[5]);\r\n                }\r\n                else if (line.substr(0, 5) === 'ORIGX') {\r\n                    if (!unitcellDict.origx) {\r\n                        unitcellDict.origx = new Matrix4();\r\n                    }\r\n                    const orgix = line.split(/\\s+/);\r\n                    const origxRow = parseInt(line[5]) - 1;\r\n                    const origxElms = unitcellDict.origx.elements;\r\n                    origxElms[4 * 0 + origxRow] = parseFloat(orgix[1]);\r\n                    origxElms[4 * 1 + origxRow] = parseFloat(orgix[2]);\r\n                    origxElms[4 * 2 + origxRow] = parseFloat(orgix[3]);\r\n                    origxElms[4 * 3 + origxRow] = parseFloat(orgix[4]);\r\n                }\r\n                else if (line.substr(0, 5) === 'SCALE') {\r\n                    if (!unitcellDict.scale) {\r\n                        unitcellDict.scale = new Matrix4();\r\n                    }\r\n                    const scale = line.split(/\\s+/);\r\n                    const scaleRow = parseInt(line[5]) - 1;\r\n                    const scaleElms = unitcellDict.scale.elements;\r\n                    scaleElms[4 * 0 + scaleRow] = parseFloat(scale[1]);\r\n                    scaleElms[4 * 1 + scaleRow] = parseFloat(scale[2]);\r\n                    scaleElms[4 * 2 + scaleRow] = parseFloat(scale[3]);\r\n                    scaleElms[4 * 3 + scaleRow] = parseFloat(scale[4]);\r\n                }\r\n                else if (recordName === 'CRYST1') {\r\n                    // CRYST1   55.989   55.989   55.989  90.00  90.00  90.00 P 1           1\r\n                    //  7 - 15       Real(9.3)      a (Angstroms)\r\n                    // 16 - 24       Real(9.3)      b (Angstroms)\r\n                    // 25 - 33       Real(9.3)      c (Angstroms)\r\n                    // 34 - 40       Real(7.2)      alpha         alpha (degrees).\r\n                    // 41 - 47       Real(7.2)      beta          beta (degrees).\r\n                    // 48 - 54       Real(7.2)      gamma         gamma (degrees).\r\n                    // 56 - 66       LString        sGroup        Space group.\r\n                    // 67 - 70       Integer        z             Z value.\r\n                    const aLength = parseFloat(line.substr(6, 9));\r\n                    const bLength = parseFloat(line.substr(15, 9));\r\n                    const cLength = parseFloat(line.substr(24, 9));\r\n                    const alpha = parseFloat(line.substr(33, 7));\r\n                    const beta = parseFloat(line.substr(40, 7));\r\n                    const gamma = parseFloat(line.substr(47, 7));\r\n                    const sGroup = line.substr(55, 11).trim();\r\n                    // const zValue = parseInt( line.substr( 66, 4 ) );\r\n                    const box = new Float32Array(9);\r\n                    box[0] = aLength;\r\n                    box[4] = bLength;\r\n                    box[8] = cLength;\r\n                    boxes.push(box);\r\n                    if (modelIdx === 0) {\r\n                        unitcellDict.a = aLength;\r\n                        unitcellDict.b = bLength;\r\n                        unitcellDict.c = cLength;\r\n                        unitcellDict.alpha = alpha;\r\n                        unitcellDict.beta = beta;\r\n                        unitcellDict.gamma = gamma;\r\n                        unitcellDict.spacegroup = sGroup;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        // finalize ensures resname will be defined for all rp.resname\r\n        // (required in entity handling below)\r\n        sb.finalize();\r\n        //\r\n        const en = entityDataList.length;\r\n        if (en) {\r\n            s.eachChain(function (cp) {\r\n                cp.entityIndex = en;\r\n            });\r\n            entityDataList.forEach(function (e, i) {\r\n                const chainIndexList = e.chainList.map(function (chainname) {\r\n                    return chainDict[chainname];\r\n                });\r\n                s.entityList.push(new Entity(s, i, e.name, 'polymer', chainIndexList));\r\n            });\r\n            let ei = entityDataList.length;\r\n            const rp = s.getResidueProxy();\r\n            const residueDict = {};\r\n            s.eachChain(function (cp) {\r\n                if (cp.entityIndex === en) {\r\n                    rp.index = cp.residueOffset;\r\n                    if (!residueDict[rp.resname]) {\r\n                        residueDict[rp.resname] = [];\r\n                    }\r\n                    residueDict[rp.resname].push(cp.index);\r\n                }\r\n            });\r\n            Object.keys(residueDict).forEach(function (resname) {\r\n                const chainList = residueDict[resname];\r\n                let type = 'non-polymer';\r\n                let name = hetnameDict[resname] || resname;\r\n                if (WaterNames.includes(resname)) {\r\n                    name = 'water';\r\n                    type = 'water';\r\n                }\r\n                s.entityList.push(new Entity(s, ei, name, type, chainList));\r\n                ei += 1;\r\n            });\r\n        }\r\n        //\r\n        if (unitcellDict.a !== undefined) {\r\n            s.unitcell = new Unitcell(unitcellDict);\r\n        }\r\n        else {\r\n            s.unitcell = undefined;\r\n        }\r\n        if (helices.length || sheets.length) {\r\n            assignSecondaryStructure(s, secStruct);\r\n        }\r\n        s.finalizeAtoms();\r\n        if (!isLegacy)\r\n            calculateChainnames(s);\r\n        calculateBonds(s);\r\n        s.finalizeBonds();\r\n        if (!helices.length && !sheets.length) {\r\n            calculateSecondaryStructure(s);\r\n        }\r\n        buildUnitcellAssembly(s);\r\n        if (Debug)\r\n            Log.timeEnd('PdbParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('pdb', PdbParser);\r\nParserRegistry.add('pdb1', PdbParser);\r\nParserRegistry.add('ent', PdbParser);\r\nexport default PdbParser;\r\nexport { HelixTypes };\r\n//# sourceMappingURL=pdb-parser.js.map","/**\r\n * @file Cif Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Matrix4 } from 'three';\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport StructureParser from './structure-parser';\r\nimport { HelixTypes } from './pdb-parser';\r\nimport Entity from '../structure/entity';\r\nimport Unitcell from '../symmetry/unitcell';\r\nimport Assembly from '../symmetry/assembly';\r\nimport Selection from '../selection/selection';\r\nimport { assignResidueTypeBonds, assignSecondaryStructure, buildUnitcellAssembly, calculateBonds, calculateSecondaryStructure } from '../structure/structure-utils';\r\nconst reWhitespace = /\\s+/;\r\nconst reQuotedWhitespace = /'((?:(?!'\\s).)*)'|\"((?:(?!\"\\s).)*)\"|(\\S+)/g;\r\nconst reDoubleQuote = /\"/g;\r\nconst reTrimQuotes = /^['\"]+|['\"]+$/g;\r\nfunction trimQuotes(str) {\r\n    if (str && str[0] === str[str.length - 1] && (str[0] === \"'\" || str[0] === '\"')) {\r\n        return str.substring(1, str.length - 1);\r\n    }\r\n    else {\r\n        return str;\r\n    }\r\n}\r\nfunction ensureArray(dict, field) {\r\n    if (!Array.isArray(dict[field])) {\r\n        Object.keys(dict).forEach(function (key) {\r\n            dict[key] = [dict[key]];\r\n        });\r\n    }\r\n}\r\nfunction hasValue(d) {\r\n    return d !== '?';\r\n}\r\nfunction cifDefaults(value, defaultValue) {\r\n    return hasValue(value) ? value : defaultValue;\r\n}\r\nfunction getBondOrder(valueOrder) {\r\n    switch (valueOrder.toLowerCase()) {\r\n        case '?': // assume single bond\r\n        case 'sing':\r\n            return 1;\r\n        case 'doub':\r\n            return 2;\r\n        case 'trip':\r\n            return 3;\r\n        case 'quad':\r\n            return 4;\r\n    }\r\n    return 0;\r\n}\r\nfunction parseChemComp(cif, structure, structureBuilder) {\r\n    const atomStore = structure.atomStore;\r\n    const atomMap = structure.atomMap;\r\n    let i, n;\r\n    const cc = cif.chem_comp;\r\n    const cca = cif.chem_comp_atom;\r\n    const ccb = cif.chem_comp_bond;\r\n    if (cc) {\r\n        if (cc.name) {\r\n            structure.title = cc.name.trim().replace(reTrimQuotes, '');\r\n        }\r\n        if (cc.id) {\r\n            structure.id = cc.id.trim().replace(reTrimQuotes, '');\r\n        }\r\n    }\r\n    var atomnameDict = {};\r\n    if (cca) {\r\n        ensureArray(cca, 'comp_id');\r\n        var atomname, element, resname, resno;\r\n        n = cca.comp_id.length;\r\n        for (i = 0; i < n; ++i) {\r\n            atomStore.growIfFull();\r\n            atomname = cca.atom_id[i].replace(reDoubleQuote, '');\r\n            element = cca.type_symbol[i];\r\n            atomnameDict[atomname] = i;\r\n            atomStore.atomTypeId[i] = atomMap.add(atomname, element);\r\n            atomStore.x[i] = cca.model_Cartn_x[i];\r\n            atomStore.y[i] = cca.model_Cartn_y[i];\r\n            atomStore.z[i] = cca.model_Cartn_z[i];\r\n            atomStore.serial[i] = i;\r\n            resname = cca.pdbx_component_comp_id[i];\r\n            resno = cca.pdbx_residue_numbering ? cca.pdbx_residue_numbering[i] : 1;\r\n            structureBuilder.addAtom(0, '', '', resname, resno, true);\r\n        }\r\n        for (i = 0; i < n; ++i) {\r\n            var j = i + n;\r\n            atomStore.growIfFull();\r\n            atomname = cca.atom_id[i].replace(reDoubleQuote, '');\r\n            element = cca.type_symbol[i];\r\n            atomStore.atomTypeId[j] = atomMap.add(atomname, element);\r\n            atomStore.x[j] = cca.pdbx_model_Cartn_x_ideal[i];\r\n            atomStore.y[j] = cca.pdbx_model_Cartn_y_ideal[i];\r\n            atomStore.z[j] = cca.pdbx_model_Cartn_z_ideal[i];\r\n            atomStore.serial[j] = j;\r\n            resname = cca.pdbx_component_comp_id[i];\r\n            resno = cca.pdbx_residue_numbering ? cca.pdbx_residue_numbering[i] : 1;\r\n            structureBuilder.addAtom(1, '', '', resname, resno, true);\r\n        }\r\n    }\r\n    if (cca && ccb) {\r\n        ensureArray(ccb, 'comp_id');\r\n        var atomname1, atomname2, bondOrder;\r\n        n = ccb.comp_id.length;\r\n        var na = cca.comp_id.length;\r\n        var ap1 = structure.getAtomProxy();\r\n        var ap2 = structure.getAtomProxy();\r\n        for (i = 0; i < n; ++i) {\r\n            atomname1 = ccb.atom_id_1[i].replace(reDoubleQuote, '');\r\n            atomname2 = ccb.atom_id_2[i].replace(reDoubleQuote, '');\r\n            bondOrder = getBondOrder(ccb.value_order[i]);\r\n            ap1.index = atomnameDict[atomname1];\r\n            ap2.index = atomnameDict[atomname2];\r\n            structure.bondStore.growIfFull();\r\n            structure.bondStore.addBond(ap1, ap2, bondOrder);\r\n            ap1.index += na;\r\n            ap2.index += na;\r\n            structure.bondStore.growIfFull();\r\n            structure.bondStore.addBond(ap1, ap2, bondOrder);\r\n        }\r\n    }\r\n}\r\nfunction parseCore(cif, structure, structureBuilder) {\r\n    var atomStore = structure.atomStore;\r\n    var atomMap = structure.atomMap;\r\n    if (cif.data) {\r\n        structure.id = cif.data;\r\n        structure.name = cif.data;\r\n    }\r\n    structure.unitcell = new Unitcell({\r\n        a: parseFloat(cif.cell_length_a),\r\n        b: parseFloat(cif.cell_length_b),\r\n        c: parseFloat(cif.cell_length_c),\r\n        alpha: parseFloat(cif.cell_angle_alpha),\r\n        beta: parseFloat(cif.cell_angle_beta),\r\n        gamma: parseFloat(cif.cell_angle_gamma),\r\n        spacegroup: trimQuotes(cif['symmetry_space_group_name_H-M'])\r\n    });\r\n    const v = new Vector3();\r\n    const c = new Vector3();\r\n    const n = cif.atom_site_type_symbol.length;\r\n    for (let i = 0; i < n; ++i) {\r\n        atomStore.growIfFull();\r\n        const atomname = cif.atom_site_label[i];\r\n        const element = cif.atom_site_type_symbol[i];\r\n        atomStore.atomTypeId[i] = atomMap.add(atomname, element);\r\n        v.set(cif.atom_site_fract_x[i], cif.atom_site_fract_y[i], cif.atom_site_fract_z[i]);\r\n        v.applyMatrix4(structure.unitcell.fracToCart);\r\n        c.add(v);\r\n        atomStore.x[i] = v.x;\r\n        atomStore.y[i] = v.y;\r\n        atomStore.z[i] = v.z;\r\n        if (cif.atom_site_occupancy) {\r\n            atomStore.occupancy[i] = parseFloat(cif.atom_site_occupancy[i]);\r\n        }\r\n        atomStore.serial[i] = i;\r\n        structureBuilder.addAtom(0, '', '', 'HET', 1, true);\r\n    }\r\n    c.divideScalar(n);\r\n    structure.center = c;\r\n    buildUnitcellAssembly(structure);\r\n    const v2 = new Vector3();\r\n    const v3 = new Vector3();\r\n    const ml = structure.biomolDict.SUPERCELL.partList[0].matrixList;\r\n    let k = n;\r\n    function covalent(idx) {\r\n        return atomMap.get(atomStore.atomTypeId[idx]).covalent;\r\n    }\r\n    const identityMatrix = new Matrix4();\r\n    for (let i = 0; i < n; ++i) {\r\n        const covalentI = covalent(i);\r\n        v.set(atomStore.x[i], atomStore.y[i], atomStore.z[i]);\r\n        ml.forEach(function (m) {\r\n            if (identityMatrix.equals(m))\r\n                return;\r\n            v2.copy(v);\r\n            v2.applyMatrix4(m);\r\n            for (let j = 0; j < n; ++j) {\r\n                v3.set(atomStore.x[j], atomStore.y[j], atomStore.z[j]);\r\n                const distSquared = v2.distanceToSquared(v3);\r\n                const d = covalent(j) + covalentI;\r\n                const d1 = d + 0.3;\r\n                const d2 = d - 0.5;\r\n                if (distSquared < (d1 * d1) && distSquared > (d2 * d2)) {\r\n                    atomStore.growIfFull();\r\n                    atomStore.atomTypeId[k] = atomStore.atomTypeId[i];\r\n                    atomStore.x[k] = v2.x;\r\n                    atomStore.y[k] = v2.y;\r\n                    atomStore.z[k] = v2.z;\r\n                    atomStore.occupancy[k] = atomStore.occupancy[i];\r\n                    atomStore.serial[k] = k;\r\n                    atomStore.altloc[k] = 'A'.charCodeAt(0);\r\n                    structureBuilder.addAtom(0, '', '', 'HET', 1, true);\r\n                    k += 1;\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction processSecondaryStructure(cif, structure, asymIdDict) {\r\n    var helices = [];\r\n    var sheets = [];\r\n    var i, il, begIcode, endIcode;\r\n    // get helices\r\n    var sc = cif.struct_conf;\r\n    if (sc) {\r\n        ensureArray(sc, 'id');\r\n        for (i = 0, il = sc.beg_auth_seq_id.length; i < il; ++i) {\r\n            var helixType = parseInt(sc.pdbx_PDB_helix_class[i]);\r\n            if (!Number.isNaN(helixType)) {\r\n                begIcode = sc.pdbx_beg_PDB_ins_code[i];\r\n                endIcode = sc.pdbx_end_PDB_ins_code[i];\r\n                helices.push([\r\n                    asymIdDict[sc.beg_label_asym_id[i]],\r\n                    parseInt(sc.beg_auth_seq_id[i]),\r\n                    cifDefaults(begIcode, ''),\r\n                    asymIdDict[sc.end_label_asym_id[i]],\r\n                    parseInt(sc.end_auth_seq_id[i]),\r\n                    cifDefaults(endIcode, ''),\r\n                    (HelixTypes[helixType] || HelixTypes[0]).charCodeAt(0)\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    // get sheets\r\n    var ssr = cif.struct_sheet_range;\r\n    if (ssr) {\r\n        ensureArray(ssr, 'id');\r\n        for (i = 0, il = ssr.beg_auth_seq_id.length; i < il; ++i) {\r\n            begIcode = ssr.pdbx_beg_PDB_ins_code[i];\r\n            endIcode = ssr.pdbx_end_PDB_ins_code[i];\r\n            sheets.push([\r\n                asymIdDict[ssr.beg_label_asym_id[i]],\r\n                parseInt(ssr.beg_auth_seq_id[i]),\r\n                cifDefaults(begIcode, ''),\r\n                asymIdDict[ssr.end_label_asym_id[i]],\r\n                parseInt(ssr.end_auth_seq_id[i]),\r\n                cifDefaults(endIcode, '')\r\n            ]);\r\n        }\r\n    }\r\n    if (sc || ssr) {\r\n        return {\r\n            helices: helices,\r\n            sheets: sheets\r\n        };\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nfunction processSymmetry(cif, structure, asymIdDict) {\r\n    // biomol & ncs processing\r\n    var operDict = {};\r\n    var biomolDict = structure.biomolDict;\r\n    if (cif.pdbx_struct_oper_list) {\r\n        var biomolOp = cif.pdbx_struct_oper_list;\r\n        ensureArray(biomolOp, 'id');\r\n        biomolOp.id.forEach(function (id, i) {\r\n            var m = new Matrix4();\r\n            var elms = m.elements;\r\n            elms[0] = parseFloat(biomolOp['matrix[1][1]'][i]);\r\n            elms[1] = parseFloat(biomolOp['matrix[1][2]'][i]);\r\n            elms[2] = parseFloat(biomolOp['matrix[1][3]'][i]);\r\n            elms[4] = parseFloat(biomolOp['matrix[2][1]'][i]);\r\n            elms[5] = parseFloat(biomolOp['matrix[2][2]'][i]);\r\n            elms[6] = parseFloat(biomolOp['matrix[2][3]'][i]);\r\n            elms[8] = parseFloat(biomolOp['matrix[3][1]'][i]);\r\n            elms[9] = parseFloat(biomolOp['matrix[3][2]'][i]);\r\n            elms[10] = parseFloat(biomolOp['matrix[3][3]'][i]);\r\n            elms[3] = parseFloat(biomolOp['vector[1]'][i]);\r\n            elms[7] = parseFloat(biomolOp['vector[2]'][i]);\r\n            elms[11] = parseFloat(biomolOp['vector[3]'][i]);\r\n            m.transpose();\r\n            operDict[id] = m;\r\n        });\r\n    }\r\n    if (cif.pdbx_struct_assembly_gen) {\r\n        var gen = cif.pdbx_struct_assembly_gen;\r\n        ensureArray(gen, 'assembly_id');\r\n        var getMatrixDict = function (expr) {\r\n            var matDict = {};\r\n            var l = expr.replace(/[()']/g, '').split(',');\r\n            l.forEach(function (e) {\r\n                if (e.includes('-')) {\r\n                    var es = e.split('-');\r\n                    var j = parseInt(es[0]);\r\n                    var m = parseInt(es[1]);\r\n                    for (; j <= m; ++j) {\r\n                        matDict[j] = operDict[j];\r\n                    }\r\n                }\r\n                else {\r\n                    matDict[e] = operDict[e];\r\n                }\r\n            });\r\n            return matDict;\r\n        };\r\n        gen.assembly_id.forEach(function (id, i) {\r\n            var md = {};\r\n            var oe = gen.oper_expression[i].replace(/['\"]\\(|['\"]/g, '');\r\n            if (oe.includes(')(') || oe.indexOf('(') > 0) {\r\n                oe = oe.split('(');\r\n                var md1 = getMatrixDict(oe[0]);\r\n                var md2 = getMatrixDict(oe[1]);\r\n                Object.keys(md1).forEach(function (k1) {\r\n                    Object.keys(md2).forEach(function (k2) {\r\n                        var mat = new Matrix4();\r\n                        mat.multiplyMatrices(md1[k1], md2[k2]);\r\n                        md[k1 + 'x' + k2] = mat;\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                md = getMatrixDict(oe);\r\n            }\r\n            var matrixList = [];\r\n            for (var k in md) {\r\n                matrixList.push(md[k]);\r\n            }\r\n            var name = id;\r\n            if (/^(0|[1-9][0-9]*)$/.test(name))\r\n                name = 'BU' + name;\r\n            var chainList = gen.asym_id_list[i].split(',');\r\n            for (var j = 0, jl = chainList.length; j < jl; ++j) {\r\n                chainList[j] = asymIdDict[chainList[j]];\r\n            }\r\n            if (biomolDict[name] === undefined) {\r\n                biomolDict[name] = new Assembly(name);\r\n            }\r\n            biomolDict[name].addPart(matrixList, chainList);\r\n        });\r\n    }\r\n    // non-crystallographic symmetry operations\r\n    if (cif.struct_ncs_oper) {\r\n        var ncsOp = cif.struct_ncs_oper;\r\n        ensureArray(ncsOp, 'id');\r\n        var ncsName = 'NCS';\r\n        biomolDict[ncsName] = new Assembly(ncsName);\r\n        var ncsPart = biomolDict[ncsName].addPart();\r\n        ncsOp.id.forEach(function (id, i) {\r\n            // ignore 'given' operators\r\n            if (ncsOp.code[i] === 'given')\r\n                return;\r\n            var m = new Matrix4();\r\n            var elms = m.elements;\r\n            elms[0] = parseFloat(ncsOp['matrix[1][1]'][i]);\r\n            elms[1] = parseFloat(ncsOp['matrix[1][2]'][i]);\r\n            elms[2] = parseFloat(ncsOp['matrix[1][3]'][i]);\r\n            elms[4] = parseFloat(ncsOp['matrix[2][1]'][i]);\r\n            elms[5] = parseFloat(ncsOp['matrix[2][2]'][i]);\r\n            elms[6] = parseFloat(ncsOp['matrix[2][3]'][i]);\r\n            elms[8] = parseFloat(ncsOp['matrix[3][1]'][i]);\r\n            elms[9] = parseFloat(ncsOp['matrix[3][2]'][i]);\r\n            elms[10] = parseFloat(ncsOp['matrix[3][3]'][i]);\r\n            elms[3] = parseFloat(ncsOp['vector[1]'][i]);\r\n            elms[7] = parseFloat(ncsOp['vector[2]'][i]);\r\n            elms[11] = parseFloat(ncsOp['vector[3]'][i]);\r\n            m.transpose();\r\n            ncsPart.matrixList.push(m);\r\n        });\r\n        if (ncsPart.matrixList.length === 0) {\r\n            delete biomolDict[ncsName];\r\n        }\r\n    }\r\n    // cell & symmetry\r\n    const unitcellDict = {};\r\n    if (cif.cell) {\r\n        const cell = cif.cell;\r\n        const a = parseFloat(cell.length_a);\r\n        const b = parseFloat(cell.length_b);\r\n        const c = parseFloat(cell.length_c);\r\n        const box = new Float32Array(9);\r\n        box[0] = a;\r\n        box[4] = b;\r\n        box[8] = c;\r\n        structure.boxes.push(box);\r\n        unitcellDict.a = a;\r\n        unitcellDict.b = b;\r\n        unitcellDict.c = c;\r\n        unitcellDict.alpha = parseFloat(cell.angle_alpha);\r\n        unitcellDict.beta = parseFloat(cell.angle_beta);\r\n        unitcellDict.gamma = parseFloat(cell.angle_gamma);\r\n    }\r\n    if (cif.symmetry) {\r\n        unitcellDict.spacegroup = trimQuotes(cif.symmetry['space_group_name_H-M']);\r\n    }\r\n    // origx\r\n    var origx = new Matrix4();\r\n    if (cif.database_PDB_matrix) {\r\n        var origxMat = cif.database_PDB_matrix;\r\n        var origxElms = origx.elements;\r\n        origxElms[0] = parseFloat(origxMat['origx[1][1]']);\r\n        origxElms[1] = parseFloat(origxMat['origx[1][2]']);\r\n        origxElms[2] = parseFloat(origxMat['origx[1][3]']);\r\n        origxElms[4] = parseFloat(origxMat['origx[2][1]']);\r\n        origxElms[5] = parseFloat(origxMat['origx[2][2]']);\r\n        origxElms[6] = parseFloat(origxMat['origx[2][3]']);\r\n        origxElms[8] = parseFloat(origxMat['origx[3][1]']);\r\n        origxElms[9] = parseFloat(origxMat['origx[3][2]']);\r\n        origxElms[10] = parseFloat(origxMat['origx[3][3]']);\r\n        origxElms[3] = parseFloat(origxMat['origx_vector[1]']);\r\n        origxElms[7] = parseFloat(origxMat['origx_vector[2]']);\r\n        origxElms[11] = parseFloat(origxMat['origx_vector[3]']);\r\n        origx.transpose();\r\n        unitcellDict.origx = origx;\r\n    }\r\n    // scale\r\n    var scale = new Matrix4();\r\n    if (cif.atom_sites) {\r\n        var scaleMat = cif.atom_sites;\r\n        var scaleElms = scale.elements;\r\n        scaleElms[0] = parseFloat(scaleMat['fract_transf_matrix[1][1]']);\r\n        scaleElms[1] = parseFloat(scaleMat['fract_transf_matrix[1][2]']);\r\n        scaleElms[2] = parseFloat(scaleMat['fract_transf_matrix[1][3]']);\r\n        scaleElms[4] = parseFloat(scaleMat['fract_transf_matrix[2][1]']);\r\n        scaleElms[5] = parseFloat(scaleMat['fract_transf_matrix[2][2]']);\r\n        scaleElms[6] = parseFloat(scaleMat['fract_transf_matrix[2][3]']);\r\n        scaleElms[8] = parseFloat(scaleMat['fract_transf_matrix[3][1]']);\r\n        scaleElms[9] = parseFloat(scaleMat['fract_transf_matrix[3][2]']);\r\n        scaleElms[10] = parseFloat(scaleMat['fract_transf_matrix[3][3]']);\r\n        scaleElms[3] = parseFloat(scaleMat['fract_transf_vector[1]']);\r\n        scaleElms[7] = parseFloat(scaleMat['fract_transf_vector[2]']);\r\n        scaleElms[11] = parseFloat(scaleMat['fract_transf_vector[3]']);\r\n        scale.transpose();\r\n        unitcellDict.scale = scale;\r\n    }\r\n    if (unitcellDict.a !== undefined) {\r\n        structure.unitcell = new Unitcell(unitcellDict);\r\n    }\r\n    else {\r\n        structure.unitcell = undefined;\r\n    }\r\n}\r\nfunction processConnections(cif, structure, asymIdDict) {\r\n    // add connections\r\n    var sc = cif.struct_conn;\r\n    if (sc) {\r\n        ensureArray(sc, 'id');\r\n        var reDoubleQuote = /\"/g;\r\n        var ap1 = structure.getAtomProxy();\r\n        var ap2 = structure.getAtomProxy();\r\n        var atomIndicesCache = {};\r\n        for (var i = 0, il = sc.id.length; i < il; ++i) {\r\n            // ignore:\r\n            // hydrog - hydrogen bond\r\n            // mismat - mismatched base pairs\r\n            // saltbr - ionic interaction\r\n            var connTypeId = sc.conn_type_id[i];\r\n            if (connTypeId === 'hydrog' ||\r\n                connTypeId === 'mismat' ||\r\n                connTypeId === 'saltbr')\r\n                continue;\r\n            // ignore bonds between symmetry mates\r\n            if (sc.ptnr1_symmetry[i] !== '1_555' ||\r\n                sc.ptnr2_symmetry[i] !== '1_555')\r\n                continue;\r\n            // process:\r\n            // covale - covalent bond\r\n            // covale_base -\r\n            //      covalent modification of a nucleotide base\r\n            // covale_phosphate -\r\n            //      covalent modification of a nucleotide phosphate\r\n            // covale_sugar -\r\n            //      covalent modification of a nucleotide sugar\r\n            // disulf - disulfide bridge\r\n            // metalc - metal coordination\r\n            // modres - covalent residue modification\r\n            var inscode1 = sc.pdbx_ptnr1_PDB_ins_code[i];\r\n            var altloc1 = sc.pdbx_ptnr1_label_alt_id[i];\r\n            var sele1 = (sc.ptnr1_auth_seq_id[i] +\r\n                (hasValue(inscode1) ? ('^' + inscode1) : '') +\r\n                ':' + asymIdDict[sc.ptnr1_label_asym_id[i]] +\r\n                '.' + sc.ptnr1_label_atom_id[i].replace(reDoubleQuote, '') +\r\n                (hasValue(altloc1) ? ('%' + altloc1) : ''));\r\n            var atomIndices1 = atomIndicesCache[sele1];\r\n            if (!atomIndices1) {\r\n                var selection1 = new Selection(sele1);\r\n                if (selection1.selection.error) {\r\n                    if (Debug)\r\n                        Log.warn('invalid selection for connection', sele1);\r\n                    continue;\r\n                }\r\n                atomIndices1 = structure.getAtomIndices(selection1);\r\n                atomIndicesCache[sele1] = atomIndices1;\r\n            }\r\n            var inscode2 = sc.pdbx_ptnr2_PDB_ins_code[i];\r\n            var altloc2 = sc.pdbx_ptnr2_label_alt_id[i];\r\n            var sele2 = (sc.ptnr2_auth_seq_id[i] +\r\n                (hasValue(inscode2) ? ('^' + inscode2) : '') +\r\n                ':' + asymIdDict[sc.ptnr2_label_asym_id[i]] +\r\n                '.' + sc.ptnr2_label_atom_id[i].replace(reDoubleQuote, '') +\r\n                (hasValue(altloc2) ? ('%' + altloc2) : ''));\r\n            var atomIndices2 = atomIndicesCache[sele2];\r\n            if (!atomIndices2) {\r\n                var selection2 = new Selection(sele2);\r\n                if (selection2.selection.error) {\r\n                    if (Debug)\r\n                        Log.warn('invalid selection for connection', sele2);\r\n                    continue;\r\n                }\r\n                atomIndices2 = structure.getAtomIndices(selection2);\r\n                atomIndicesCache[sele2] = atomIndices2;\r\n            }\r\n            // cases with more than one atom per selection\r\n            // - #altloc1 to #altloc2\r\n            // - #model to #model\r\n            // - #altloc1 * #model to #altloc2 * #model\r\n            var k = atomIndices1.length;\r\n            var l = atomIndices2.length;\r\n            if (k > l) {\r\n                var tmpA = k;\r\n                k = l;\r\n                l = tmpA;\r\n                var tmpB = atomIndices1;\r\n                atomIndices1 = atomIndices2;\r\n                atomIndices2 = tmpB;\r\n            }\r\n            // console.log( k, l );\r\n            if (k === 0 || l === 0) {\r\n                if (Debug)\r\n                    Log.warn('no atoms found for', sele1, sele2);\r\n                continue;\r\n            }\r\n            for (var j = 0; j < l; ++j) {\r\n                ap1.index = atomIndices1[j % k];\r\n                ap2.index = atomIndices2[j];\r\n                if (ap1 && ap2) {\r\n                    structure.bondStore.addBond(ap1, ap2, getBondOrder(sc.pdbx_value_order[i]));\r\n                }\r\n                else {\r\n                    Log.log('atoms for connection not found');\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction processEntities(cif, structure, chainIndexDict) {\r\n    if (cif.entity) {\r\n        ensureArray(cif.entity, 'id');\r\n        var e = cif.entity;\r\n        var n = e.id.length;\r\n        for (var i = 0; i < n; ++i) {\r\n            var description = e.pdbx_description[i];\r\n            var type = e.type[i];\r\n            var chainIndexList = Array.from(chainIndexDict[e.id[i]]);\r\n            structure.entityList[i] = new Entity(structure, i, description, type, chainIndexList);\r\n        }\r\n    }\r\n}\r\n//\r\nclass CifParser extends StructureParser {\r\n    get type() { return 'cif'; }\r\n    _parse() {\r\n        // http://mmcif.wwpdb.org/\r\n        Log.time('CifParser._parse ' + this.name);\r\n        var s = this.structure;\r\n        var sb = this.structureBuilder;\r\n        var firstModelOnly = this.firstModelOnly;\r\n        var asTrajectory = this.asTrajectory;\r\n        var cAlphaOnly = this.cAlphaOnly;\r\n        var frames = s.frames;\r\n        var currentFrame, currentCoord;\r\n        var rawline, line;\r\n        //\r\n        var cif = {};\r\n        var asymIdDict = {};\r\n        var chainIndexDict = {};\r\n        var pendingString = false;\r\n        var currentString = null;\r\n        var pendingValue = false;\r\n        var pendingLoop = false;\r\n        var pendingName = false;\r\n        var loopPointers = [];\r\n        var currentLoopIndex = null;\r\n        var currentCategory = null;\r\n        var currentName = null;\r\n        var first = null;\r\n        var pointerNames = [];\r\n        var authAsymId, authSeqId, labelAtomId, labelCompId, labelAsymId, labelEntityId, labelAltId, groupPDB, id, typeSymbol, pdbxPDBmodelNum, pdbxPDBinsCode, CartnX, CartnY, CartnZ, bIsoOrEquiv, occupancy;\r\n        //\r\n        var atomMap = s.atomMap;\r\n        var atomStore = s.atomStore;\r\n        atomStore.resize(this.streamer.data.length / 100);\r\n        var idx = 0;\r\n        var modelIdx = 0;\r\n        var modelNum;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (var i = _i; i < _n; ++i) {\r\n                rawline = lines[i];\r\n                line = rawline.trim();\r\n                if ((!line && !pendingString && !pendingLoop) || line[0] === '#') {\r\n                    // Log.log( \"NEW BLOCK\" );\r\n                    pendingString = false;\r\n                    pendingLoop = false;\r\n                    pendingValue = false;\r\n                    loopPointers.length = 0;\r\n                    currentLoopIndex = null;\r\n                    currentCategory = null;\r\n                    currentName = null;\r\n                    first = null;\r\n                    pointerNames.length = 0;\r\n                }\r\n                else if (line.substring(0, 5) === 'data_') {\r\n                    cif.data = line.substring(5).trim();\r\n                    // Log.log( \"DATA\", data );\r\n                }\r\n                else if (line[0] === ';') {\r\n                    if (pendingString) {\r\n                        // Log.log( \"STRING END\", currentString );\r\n                        if (pendingLoop) {\r\n                            if (currentLoopIndex === loopPointers.length) {\r\n                                currentLoopIndex = 0;\r\n                            }\r\n                            loopPointers[currentLoopIndex].push(currentString);\r\n                            currentLoopIndex += 1;\r\n                        }\r\n                        else {\r\n                            if (currentName === false) {\r\n                                cif[currentCategory] = currentString;\r\n                            }\r\n                            else {\r\n                                cif[currentCategory][currentName] = currentString; //TODO currentname can equals null\r\n                            }\r\n                        }\r\n                        pendingString = false;\r\n                        currentString = null;\r\n                    }\r\n                    else {\r\n                        // Log.log( \"STRING START\" );\r\n                        pendingString = true;\r\n                        currentString = line.substring(1);\r\n                    }\r\n                }\r\n                else if (line === 'loop_') {\r\n                    // Log.log( \"LOOP START\" );\r\n                    pendingLoop = true;\r\n                    pendingName = true;\r\n                    loopPointers.length = 0;\r\n                    pointerNames.length = 0;\r\n                    currentLoopIndex = 0;\r\n                }\r\n                else if (line[0] === '_') {\r\n                    var keyParts, category, name;\r\n                    if (pendingLoop && !pendingName) {\r\n                        pendingLoop = false;\r\n                    }\r\n                    if (pendingLoop) {\r\n                        // Log.log( \"LOOP KEY\", line );\r\n                        keyParts = line.split('.');\r\n                        category = keyParts[0].substring(1);\r\n                        name = keyParts[1];\r\n                        if (keyParts.length === 1) {\r\n                            name = false;\r\n                            if (!cif[category])\r\n                                cif[category] = [];\r\n                            loopPointers.push(cif[category]);\r\n                        }\r\n                        else {\r\n                            if (!cif[category])\r\n                                cif[category] = {};\r\n                            if (cif[category][name]) {\r\n                                if (Debug)\r\n                                    Log.warn(category, name, 'already exists');\r\n                            }\r\n                            else {\r\n                                cif[category][name] = [];\r\n                                loopPointers.push(cif[category][name]);\r\n                                pointerNames.push(name);\r\n                            }\r\n                        }\r\n                        currentCategory = category;\r\n                        currentName = name;\r\n                        first = true;\r\n                    }\r\n                    else {\r\n                        var keyValuePair = line.match(reQuotedWhitespace);\r\n                        var key = keyValuePair[0];\r\n                        var value = keyValuePair[1];\r\n                        keyParts = key.split('.');\r\n                        category = keyParts[0].substring(1);\r\n                        name = keyParts[1];\r\n                        if (keyParts.length === 1) {\r\n                            name = false;\r\n                            cif[category] = value;\r\n                        }\r\n                        else {\r\n                            if (!cif[category])\r\n                                cif[category] = {};\r\n                            if (cif[category][name]) {\r\n                                if (Debug)\r\n                                    Log.warn(category, name, 'already exists');\r\n                            }\r\n                            else {\r\n                                cif[category][name] = value;\r\n                            }\r\n                        }\r\n                        if (!value)\r\n                            pendingValue = true;\r\n                        currentCategory = category;\r\n                        currentName = name;\r\n                    }\r\n                }\r\n                else {\r\n                    if (pendingString) {\r\n                        // Log.log( \"STRING VALUE\", line );\r\n                        currentString += rawline;\r\n                    }\r\n                    else if (pendingLoop) {\r\n                        // Log.log( \"LOOP VALUE\", line );\r\n                        if (!line) {\r\n                            continue;\r\n                        }\r\n                        else if (currentCategory === 'atom_site') {\r\n                            const ls = line.split(reWhitespace);\r\n                            if (first) {\r\n                                authAsymId = pointerNames.indexOf('auth_asym_id');\r\n                                authSeqId = pointerNames.indexOf('auth_seq_id');\r\n                                labelAtomId = pointerNames.indexOf('label_atom_id');\r\n                                labelCompId = pointerNames.indexOf('label_comp_id');\r\n                                labelAsymId = pointerNames.indexOf('label_asym_id');\r\n                                labelEntityId = pointerNames.indexOf('label_entity_id');\r\n                                labelAltId = pointerNames.indexOf('label_alt_id');\r\n                                CartnX = pointerNames.indexOf('Cartn_x');\r\n                                CartnY = pointerNames.indexOf('Cartn_y');\r\n                                CartnZ = pointerNames.indexOf('Cartn_z');\r\n                                id = pointerNames.indexOf('id');\r\n                                typeSymbol = pointerNames.indexOf('type_symbol');\r\n                                groupPDB = pointerNames.indexOf('group_PDB');\r\n                                bIsoOrEquiv = pointerNames.indexOf('B_iso_or_equiv');\r\n                                pdbxPDBmodelNum = pointerNames.indexOf('pdbx_PDB_model_num');\r\n                                pdbxPDBinsCode = pointerNames.indexOf('pdbx_PDB_ins_code');\r\n                                occupancy = pointerNames.indexOf('occupancy');\r\n                                first = false;\r\n                                modelNum = parseInt(ls[pdbxPDBmodelNum]);\r\n                                if (asTrajectory) {\r\n                                    currentFrame = [];\r\n                                    currentCoord = 0;\r\n                                }\r\n                            }\r\n                            //\r\n                            const _modelNum = parseInt(ls[pdbxPDBmodelNum]);\r\n                            if (modelNum !== _modelNum) {\r\n                                if (asTrajectory) {\r\n                                    if (modelIdx === 0) {\r\n                                        frames.push(new Float32Array(currentFrame));\r\n                                    }\r\n                                    currentFrame = new Float32Array(atomStore.count * 3);\r\n                                    frames.push(currentFrame);\r\n                                    currentCoord = 0;\r\n                                }\r\n                                modelIdx += 1;\r\n                            }\r\n                            modelNum = _modelNum;\r\n                            if (firstModelOnly && modelIdx > 0)\r\n                                continue;\r\n                            //\r\n                            const atomname = ls[labelAtomId].replace(reDoubleQuote, '');\r\n                            if (cAlphaOnly && atomname !== 'CA')\r\n                                continue;\r\n                            const x = parseFloat(ls[CartnX]);\r\n                            const y = parseFloat(ls[CartnY]);\r\n                            const z = parseFloat(ls[CartnZ]);\r\n                            if (asTrajectory) {\r\n                                const frameOffset = currentCoord * 3;\r\n                                currentFrame[frameOffset + 0] = x;\r\n                                currentFrame[frameOffset + 1] = y;\r\n                                currentFrame[frameOffset + 2] = z;\r\n                                currentCoord += 1;\r\n                                if (modelIdx > 0)\r\n                                    continue;\r\n                            }\r\n                            //\r\n                            const resname = ls[labelCompId];\r\n                            const resno = parseInt(ls[authSeqId]);\r\n                            let inscode = ls[pdbxPDBinsCode];\r\n                            inscode = (inscode === '?') ? '' : inscode;\r\n                            const chainname = ls[authAsymId];\r\n                            const chainid = ls[labelAsymId];\r\n                            const hetero = (ls[groupPDB][0] === 'H') ? 1 : 0;\r\n                            //\r\n                            const element = ls[typeSymbol];\r\n                            const bfactor = parseFloat(ls[bIsoOrEquiv]);\r\n                            const occ = parseFloat(ls[occupancy]);\r\n                            let altloc = ls[labelAltId];\r\n                            altloc = (altloc === '.') ? '' : altloc;\r\n                            atomStore.growIfFull();\r\n                            atomStore.atomTypeId[idx] = atomMap.add(atomname, element);\r\n                            atomStore.x[idx] = x;\r\n                            atomStore.y[idx] = y;\r\n                            atomStore.z[idx] = z;\r\n                            atomStore.serial[idx] = parseInt(ls[id]);\r\n                            atomStore.bfactor[idx] = isNaN(bfactor) ? 0 : bfactor;\r\n                            atomStore.occupancy[idx] = isNaN(occ) ? 0 : occ;\r\n                            atomStore.altloc[idx] = altloc.charCodeAt(0);\r\n                            sb.addAtom(modelIdx, chainname, chainid, resname, resno, hetero, undefined, inscode);\r\n                            if (Debug) {\r\n                                // check if one-to-many (chainname-asymId) relationship is\r\n                                // actually a many-to-many mapping\r\n                                const assignedChainname = asymIdDict[chainid];\r\n                                if (assignedChainname !== undefined && assignedChainname !== chainname) {\r\n                                    if (Debug)\r\n                                        Log.warn(assignedChainname, chainname);\r\n                                }\r\n                            }\r\n                            // chainname mapping: label_asym_id -> auth_asym_id\r\n                            asymIdDict[chainid] = chainname;\r\n                            // entity mapping: chainIndex -> label_entity_id\r\n                            const entityId = ls[labelEntityId];\r\n                            if (!chainIndexDict[entityId]) {\r\n                                chainIndexDict[entityId] = new Set();\r\n                            }\r\n                            chainIndexDict[entityId].add(s.chainStore.count - 1);\r\n                            idx += 1;\r\n                        }\r\n                        else {\r\n                            const ls = line.match(reQuotedWhitespace);\r\n                            const nn = ls.length;\r\n                            if (currentLoopIndex === loopPointers.length) {\r\n                                currentLoopIndex = 0;\r\n                            } /* else if( currentLoopIndex + nn > loopPointers.length ){\r\n                              Log.warn( \"cif parsing error, wrong number of loop data entries\", nn, loopPointers.length );\r\n                            } */\r\n                            for (let j = 0; j < nn; ++j) {\r\n                                loopPointers[currentLoopIndex + j].push(ls[j]);\r\n                            }\r\n                            currentLoopIndex += nn;\r\n                        }\r\n                        pendingName = false;\r\n                    }\r\n                    else if (line[0] === \"'\" && line[line.length - 1] === \"'\") {\r\n                        // Log.log( \"NEWLINE STRING\", line );\r\n                        const str = line.substring(1, line.length - 1);\r\n                        if (currentName === false) {\r\n                            cif[currentCategory] = str;\r\n                        }\r\n                        else {\r\n                            cif[currentCategory][currentName] = str;\r\n                        }\r\n                    }\r\n                    else if (pendingValue) {\r\n                        // Log.log( \"NEWLINE VALUE\", line );\r\n                        if (currentName === false) {\r\n                            cif[currentCategory] = line;\r\n                        }\r\n                        else {\r\n                            cif[currentCategory][currentName] = line;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (Debug)\r\n                            Log.log('CifParser._parse: unknown state', line);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        if (cif.chem_comp && cif.chem_comp_atom) {\r\n            parseChemComp(cif, s, sb);\r\n            sb.finalize();\r\n            s.finalizeAtoms();\r\n            s.finalizeBonds();\r\n            assignResidueTypeBonds(s);\r\n        }\r\n        else if (cif.atom_site_type_symbol && cif.atom_site_label && cif.atom_site_fract_x) {\r\n            parseCore(cif, s, sb);\r\n            sb.finalize();\r\n            s.finalizeAtoms();\r\n            calculateBonds(s);\r\n            s.finalizeBonds();\r\n            // assignResidueTypeBonds( s );\r\n        }\r\n        else {\r\n            var secStruct = processSecondaryStructure(cif, s, asymIdDict);\r\n            processSymmetry(cif, s, asymIdDict);\r\n            processConnections(cif, s, asymIdDict);\r\n            processEntities(cif, s, chainIndexDict);\r\n            if (cif.struct && cif.struct.title) {\r\n                s.title = cif.struct.title.trim().replace(reTrimQuotes, '');\r\n            }\r\n            if (cif.entry && cif.entry.id) {\r\n                s.id = cif.entry.id.trim().replace(reTrimQuotes, '');\r\n            }\r\n            // structure header (mimicking biojava)\r\n            if (cif.pdbx_audit_revision_history) {\r\n                if (cif.pdbx_audit_revision_history.revision_date) {\r\n                    ensureArray(cif.pdbx_audit_revision_history, 'revision_date');\r\n                    const dates = cif.pdbx_audit_revision_history.revision_date.filter(hasValue);\r\n                    if (dates.length) {\r\n                        s.header.releaseDate = dates[0];\r\n                    }\r\n                }\r\n                if (cif.pdbx_database_status.recvd_initial_deposition_date) {\r\n                    ensureArray(cif.pdbx_database_status, 'recvd_initial_deposition_date');\r\n                    const depDates = cif.pdbx_database_status.recvd_initial_deposition_date.filter(hasValue);\r\n                    if (depDates.length) {\r\n                        s.header.depositionDate = depDates[0];\r\n                    }\r\n                }\r\n            }\r\n            else if (cif.database_PDB_rev) {\r\n                if (cif.database_PDB_rev.date) {\r\n                    ensureArray(cif.database_PDB_rev, 'date');\r\n                    const dates = cif.database_PDB_rev.date.filter(hasValue);\r\n                    if (dates.length) {\r\n                        s.header.releaseDate = dates[0];\r\n                    }\r\n                }\r\n                if (cif.database_PDB_rev.date_original) {\r\n                    ensureArray(cif.database_PDB_rev, 'date_original');\r\n                    const depDates = cif.database_PDB_rev.date_original.filter(hasValue);\r\n                    if (depDates.length) {\r\n                        s.header.depositionDate = depDates[0];\r\n                    }\r\n                }\r\n            }\r\n            if (cif.reflns && cif.reflns.d_resolution_high) {\r\n                if (hasValue(cif.reflns.d_resolution_high)) {\r\n                    s.header.resolution = parseFloat(cif.reflns.d_resolution_high);\r\n                }\r\n            }\r\n            else if (cif.refine && cif.refine.ls_d_res_high) {\r\n                if (hasValue(cif.refine.ls_d_res_high)) {\r\n                    s.header.resolution = parseFloat(cif.refine.ls_d_res_high);\r\n                }\r\n            }\r\n            if (cif.refine && cif.refine.ls_R_factor_R_free) {\r\n                if (hasValue(cif.refine.ls_R_factor_R_free)) {\r\n                    s.header.rFree = parseFloat(cif.refine.ls_R_factor_R_free);\r\n                }\r\n            }\r\n            if (cif.refine && cif.refine.ls_R_factor_R_work) {\r\n                if (hasValue(cif.refine.ls_R_factor_R_work)) {\r\n                    s.header.rWork = parseFloat(cif.refine.ls_R_factor_R_work);\r\n                }\r\n            }\r\n            if (cif.exptl && cif.exptl.method) {\r\n                ensureArray(cif.exptl, 'method');\r\n                s.header.experimentalMethods = cif.exptl.method.map(function (m) {\r\n                    return m.replace(reTrimQuotes, '');\r\n                });\r\n            }\r\n            sb.finalize();\r\n            s.finalizeAtoms();\r\n            calculateBonds(s);\r\n            s.finalizeBonds();\r\n            if (!secStruct) {\r\n                calculateSecondaryStructure(s);\r\n            }\r\n            else {\r\n                assignSecondaryStructure(s, secStruct);\r\n            }\r\n            buildUnitcellAssembly(s);\r\n            s.extraData.cif = cif;\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('CifParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('cif', CifParser);\r\nParserRegistry.add('mcif', CifParser);\r\nParserRegistry.add('mmcif', CifParser);\r\nexport default CifParser;\r\n//# sourceMappingURL=cif-parser.js.map","/**\r\n * @file Gro Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport StructureParser from './structure-parser';\r\nimport { calculateBonds, calculateChainnames, calculateSecondaryStructure } from '../structure/structure-utils';\r\nclass GroParser extends StructureParser {\r\n    get type() { return 'gro'; }\r\n    _parse() {\r\n        // http://manual.gromacs.org/current/online/gro.html\r\n        if (Debug)\r\n            Log.time('GroParser._parse ' + this.name);\r\n        var s = this.structure;\r\n        var sb = this.structureBuilder;\r\n        var firstModelOnly = this.firstModelOnly;\r\n        var asTrajectory = this.asTrajectory;\r\n        var cAlphaOnly = this.cAlphaOnly;\r\n        var frames = s.frames;\r\n        var boxes = s.boxes;\r\n        var currentFrame, currentCoord;\r\n        var firstLines = this.streamer.peekLines(3);\r\n        s.title = firstLines[0].trim();\r\n        // determine number of decimal places\r\n        var ndec = firstLines[2].length - firstLines[2].lastIndexOf('.') - 1;\r\n        var lpos = 5 + ndec;\r\n        var xpos = 20;\r\n        var ypos = 20 + lpos;\r\n        var zpos = 20 + 2 * lpos;\r\n        //\r\n        var atomname, resname, resno, serial;\r\n        var atomCount = parseInt(firstLines[1]);\r\n        var modelLineCount = atomCount + 3;\r\n        var atomMap = s.atomMap;\r\n        var atomStore = s.atomStore;\r\n        atomStore.resize(atomCount);\r\n        var idx = 0;\r\n        var modelIdx = 0;\r\n        var lineNo = 0;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (var i = _i; i < _n; ++i) {\r\n                ++lineNo;\r\n                var l = lineNo - 1;\r\n                var line = lines[i];\r\n                if (!line)\r\n                    continue;\r\n                if (l % modelLineCount === 0) {\r\n                    // Log.log( \"title\", line )\r\n                    if (asTrajectory) {\r\n                        currentFrame = new Float32Array(atomCount * 3);\r\n                        frames.push(currentFrame);\r\n                        currentCoord = 0;\r\n                    }\r\n                }\r\n                else if (l % modelLineCount === 1) {\r\n                    // Log.log( \"atomCount\", line )\r\n                }\r\n                else if (l % modelLineCount === modelLineCount - 1) {\r\n                    var str = line.trim().split(/\\s+/);\r\n                    var box = new Float32Array(9);\r\n                    box[0] = parseFloat(str[0]) * 10;\r\n                    box[4] = parseFloat(str[1]) * 10;\r\n                    box[8] = parseFloat(str[2]) * 10;\r\n                    boxes.push(box);\r\n                    if (firstModelOnly) {\r\n                        return true;\r\n                    }\r\n                    modelIdx += 1;\r\n                }\r\n                else {\r\n                    atomname = line.substr(10, 5).trim();\r\n                    if (cAlphaOnly && atomname !== 'CA')\r\n                        continue;\r\n                    var x = parseFloat(line.substr(xpos, lpos)) * 10;\r\n                    var y = parseFloat(line.substr(ypos, lpos)) * 10;\r\n                    var z = parseFloat(line.substr(zpos, lpos)) * 10;\r\n                    if (asTrajectory) {\r\n                        var j = currentCoord * 3;\r\n                        currentFrame[j + 0] = x;\r\n                        currentFrame[j + 1] = y;\r\n                        currentFrame[j + 2] = z;\r\n                        currentCoord += 1;\r\n                        if (l > modelLineCount)\r\n                            continue;\r\n                    }\r\n                    resname = line.substr(5, 5).trim();\r\n                    resno = parseInt(line.substr(0, 5));\r\n                    serial = parseInt(line.substr(15, 5));\r\n                    atomStore.growIfFull();\r\n                    atomStore.atomTypeId[idx] = atomMap.add(atomname);\r\n                    atomStore.x[idx] = x;\r\n                    atomStore.y[idx] = y;\r\n                    atomStore.z[idx] = z;\r\n                    atomStore.serial[idx] = serial;\r\n                    sb.addAtom(modelIdx, '', '', resname, resno, 0, 'l');\r\n                    idx += 1;\r\n                }\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        sb.finalize();\r\n        s.finalizeAtoms();\r\n        calculateChainnames(s);\r\n        calculateBonds(s);\r\n        s.finalizeBonds();\r\n        calculateSecondaryStructure(s);\r\n        if (Debug)\r\n            Log.timeEnd('GroParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('gro', GroParser);\r\nexport default GroParser;\r\n//# sourceMappingURL=gro-parser.js.map","/**\r\n * @file utf8-utils\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * mostly copied from https://github.com/creationix/msgpack-js-browser\r\n * by Tim Caswell <tim@creationix.com>, MIT License, Copyright (c) 2013\r\n */\r\n\r\n\r\n// Encode string as utf8 into dataview at offset\r\nfunction utf8Write(view, offset, string) {\r\n  var byteLength = view.byteLength;\r\n  for(var i = 0, l = string.length; i < l; i++) {\r\n    var codePoint = string.charCodeAt(i);\r\n\r\n    // One byte of UTF-8\r\n    if (codePoint < 0x80) {\r\n      view.setUint8(offset++, codePoint >>> 0 & 0x7f | 0x00);\r\n      continue;\r\n    }\r\n\r\n    // Two bytes of UTF-8\r\n    if (codePoint < 0x800) {\r\n      view.setUint8(offset++, codePoint >>> 6 & 0x1f | 0xc0);\r\n      view.setUint8(offset++, codePoint >>> 0 & 0x3f | 0x80);\r\n      continue;\r\n    }\r\n\r\n    // Three bytes of UTF-8.\r\n    if (codePoint < 0x10000) {\r\n      view.setUint8(offset++, codePoint >>> 12 & 0x0f | 0xe0);\r\n      view.setUint8(offset++, codePoint >>> 6  & 0x3f | 0x80);\r\n      view.setUint8(offset++, codePoint >>> 0  & 0x3f | 0x80);\r\n      continue;\r\n    }\r\n\r\n    // Four bytes of UTF-8\r\n    if (codePoint < 0x110000) {\r\n      view.setUint8(offset++, codePoint >>> 18 & 0x07 | 0xf0);\r\n      view.setUint8(offset++, codePoint >>> 12 & 0x3f | 0x80);\r\n      view.setUint8(offset++, codePoint >>> 6  & 0x3f | 0x80);\r\n      view.setUint8(offset++, codePoint >>> 0  & 0x3f | 0x80);\r\n      continue;\r\n    }\r\n    throw new Error(\"bad codepoint \" + codePoint);\r\n  }\r\n}\r\n\r\nfunction utf8ByteCount(string) {\r\n  var count = 0;\r\n  for(var i = 0, l = string.length; i < l; i++) {\r\n    var codePoint = string.charCodeAt(i);\r\n    if (codePoint < 0x80) {\r\n      count += 1;\r\n      continue;\r\n    }\r\n    if (codePoint < 0x800) {\r\n      count += 2;\r\n      continue;\r\n    }\r\n    if (codePoint < 0x10000) {\r\n      count += 3;\r\n      continue;\r\n    }\r\n    if (codePoint < 0x110000) {\r\n      count += 4;\r\n      continue;\r\n    }\r\n    throw new Error(\"bad codepoint \" + codePoint);\r\n  }\r\n  return count;\r\n}\r\n\r\n/**\r\n * encode data value (recursively) into binary encoded MessagePack v5 (http://msgpack.org/)\r\n * @param  {Object|Array|String|Number|Boolean|null} value  [description]\r\n * @param  {DataView} view   [description]\r\n * @param  {Integer} offset [description]\r\n * @return {Integer} number of bytes written into view\r\n */\r\nfunction encode$1(value, view, offset) {\r\n  var type = typeof value;\r\n\r\n  // Strings Bytes\r\n  if (type === \"string\") {\r\n    var length = utf8ByteCount(value);\r\n    // fix str\r\n    if (length < 0x20) {\r\n      view.setUint8(offset, length | 0xa0);\r\n      utf8Write(view, offset + 1, value);\r\n      return 1 + length;\r\n    }\r\n    // str 8\r\n    if (length < 0x100) {\r\n      view.setUint8(offset, 0xd9);\r\n      view.setUint8(offset + 1, length);\r\n      utf8Write(view, offset + 2, value);\r\n      return 2 + length;\r\n    }\r\n    // str 16\r\n    if (length < 0x10000) {\r\n      view.setUint8(offset, 0xda);\r\n      view.setUint16(offset + 1, length);\r\n      utf8Write(view, offset + 3, value);\r\n      return 3 + length;\r\n    }\r\n    // str 32\r\n    if (length < 0x100000000) {\r\n      view.setUint8(offset, 0xdb);\r\n      view.setUint32(offset + 1, length);\r\n      utf8Write(view, offset + 5, value);\r\n      return 5 + length;\r\n    }\r\n  }\r\n\r\n  if (value instanceof Uint8Array) {\r\n    var length = value.byteLength;\r\n    var bytes = new Uint8Array(view.buffer);\r\n    // bin 8\r\n    if (length < 0x100) {\r\n      view.setUint8(offset, 0xc4);\r\n      view.setUint8(offset + 1, length);\r\n      bytes.set(value, offset + 2);\r\n      return 2 + length;\r\n    }\r\n    // bin 16\r\n    if (length < 0x10000) {\r\n      view.setUint8(offset, 0xc5);\r\n      view.setUint16(offset + 1, length);\r\n      bytes.set(value, offset + 3);\r\n      return 3 + length;\r\n    }\r\n    // bin 32\r\n    if (length < 0x100000000) {\r\n      view.setUint8(offset, 0xc6);\r\n      view.setUint32(offset + 1, length);\r\n      bytes.set(value, offset + 5);\r\n      return 5 + length;\r\n    }\r\n  }\r\n\r\n  if (type === \"number\") {\r\n    if (!isFinite(value)) {\r\n        throw new Error(\"Number not finite: \" + value);\r\n    }\r\n\r\n    // Floating point\r\n    if (Math.floor(value) !== value) {\r\n      view.setUint8(offset, 0xcb);\r\n      view.setFloat64(offset + 1, value);\r\n      return 9;\r\n    }\r\n\r\n    // Integers\r\n    if (value >=0) {\r\n      // positive fixnum\r\n      if (value < 0x80) {\r\n        view.setUint8(offset, value);\r\n        return 1;\r\n      }\r\n      // uint 8\r\n      if (value < 0x100) {\r\n        view.setUint8(offset, 0xcc);\r\n        view.setUint8(offset + 1, value);\r\n        return 2;\r\n      }\r\n      // uint 16\r\n      if (value < 0x10000) {\r\n        view.setUint8(offset, 0xcd);\r\n        view.setUint16(offset + 1, value);\r\n        return 3;\r\n      }\r\n      // uint 32\r\n      if (value < 0x100000000) {\r\n        view.setUint8(offset, 0xce);\r\n        view.setUint32(offset + 1, value);\r\n        return 5;\r\n      }\r\n      throw new Error(\"Number too big 0x\" + value.toString(16));\r\n    }\r\n    // negative fixnum\r\n    if (value >= -0x20) {\r\n      view.setInt8(offset, value);\r\n      return 1;\r\n    }\r\n    // int 8\r\n    if (value >= -0x80) {\r\n      view.setUint8(offset, 0xd0);\r\n      view.setInt8(offset + 1, value);\r\n      return 2;\r\n    }\r\n    // int 16\r\n    if (value >= -0x8000) {\r\n      view.setUint8(offset, 0xd1);\r\n      view.setInt16(offset + 1, value);\r\n      return 3;\r\n    }\r\n    // int 32\r\n    if (value >= -0x80000000) {\r\n      view.setUint8(offset, 0xd2);\r\n      view.setInt32(offset + 1, value);\r\n      return 5;\r\n    }\r\n    throw new Error(\"Number too small -0x\" + (-value).toString(16).substr(1));\r\n  }\r\n\r\n  // null\r\n  if (value === null) {\r\n    view.setUint8(offset, 0xc0);\r\n    return 1;\r\n  }\r\n\r\n  // Boolean\r\n  if (type === \"boolean\") {\r\n    view.setUint8(offset, value ? 0xc3 : 0xc2);\r\n    return 1;\r\n  }\r\n\r\n  // Container Types\r\n  if (type === \"object\") {\r\n    var length, size = 0;\r\n    var isArray = Array.isArray(value);\r\n\r\n    if (isArray) {\r\n      length = value.length;\r\n    }\r\n    else {\r\n      var keys = Object.keys(value);\r\n      length = keys.length;\r\n    }\r\n\r\n    var size;\r\n    if (length < 0x10) {\r\n      view.setUint8(offset, length | (isArray ? 0x90 : 0x80));\r\n      size = 1;\r\n    }\r\n    else if (length < 0x10000) {\r\n      view.setUint8(offset, isArray ? 0xdc : 0xde);\r\n      view.setUint16(offset + 1, length);\r\n      size = 3;\r\n    }\r\n    else if (length < 0x100000000) {\r\n      view.setUint8(offset, isArray ? 0xdd : 0xdf);\r\n      view.setUint32(offset + 1, length);\r\n      size = 5;\r\n    }\r\n\r\n    if (isArray) {\r\n      for (var i = 0; i < length; i++) {\r\n        size += encode$1(value[i], view, offset + size);\r\n      }\r\n    }\r\n    else {\r\n      for (var i = 0; i < length; i++) {\r\n        var key = keys[i];\r\n        size += encode$1(key, view, offset + size);\r\n        size += encode$1(value[key], view, offset + size);\r\n      }\r\n    }\r\n\r\n    return size;\r\n  }\r\n  throw new Error(\"Unknown type \" + type);\r\n}\r\n\r\nfunction encodedSize(value) {\r\n  var type = typeof value;\r\n\r\n  // Raw Bytes\r\n  if (type === \"string\") {\r\n    var length = utf8ByteCount(value);\r\n    if (length < 0x20) {\r\n      return 1 + length;\r\n    }\r\n    if (length < 0x100) {\r\n      return 2 + length;\r\n    }\r\n    if (length < 0x10000) {\r\n      return 3 + length;\r\n    }\r\n    if (length < 0x100000000) {\r\n      return 5 + length;\r\n    }\r\n  }\r\n\r\n  if (value instanceof Uint8Array) {\r\n    var length = value.byteLength;\r\n    if (length < 0x100) {\r\n      return 2 + length;\r\n    }\r\n    if (length < 0x10000) {\r\n      return 3 + length;\r\n    }\r\n    if (length < 0x100000000) {\r\n      return 5 + length;\r\n    }\r\n  }\r\n\r\n  if (type === \"number\") {\r\n    // Floating Point\r\n    // double\r\n    if (Math.floor(value) !== value) return 9;\r\n\r\n    // Integers\r\n    if (value >=0) {\r\n      // positive fixnum\r\n      if (value < 0x80) return 1;\r\n      // uint 8\r\n      if (value < 0x100) return 2;\r\n      // uint 16\r\n      if (value < 0x10000) return 3;\r\n      // uint 32\r\n      if (value < 0x100000000) return 5;\r\n      throw new Error(\"Number too big 0x\" + value.toString(16));\r\n    }\r\n    // negative fixnum\r\n    if (value >= -0x20) return 1;\r\n    // int 8\r\n    if (value >= -0x80) return 2;\r\n    // int 16\r\n    if (value >= -0x8000) return 3;\r\n    // int 32\r\n    if (value >= -0x80000000) return 5;\r\n    throw new Error(\"Number too small -0x\" + value.toString(16).substr(1));\r\n  }\r\n\r\n  // Boolean, null\r\n  if (type === \"boolean\" || value === null) return 1;\r\n\r\n  // Container Types\r\n  if (type === \"object\") {\r\n    var length, size = 0;\r\n    if (Array.isArray(value)) {\r\n      length = value.length;\r\n      for (var i = 0; i < length; i++) {\r\n        size += encodedSize(value[i]);\r\n      }\r\n    }\r\n    else {\r\n      var keys = Object.keys(value);\r\n      length = keys.length;\r\n      for (var i = 0; i < length; i++) {\r\n        var key = keys[i];\r\n        size += encodedSize(key) + encodedSize(value[key]);\r\n      }\r\n    }\r\n    if (length < 0x10) {\r\n      return 1 + size;\r\n    }\r\n    if (length < 0x10000) {\r\n      return 3 + size;\r\n    }\r\n    if (length < 0x100000000) {\r\n      return 5 + size;\r\n    }\r\n    throw new Error(\"Array or object too long 0x\" + length.toString(16));\r\n  }\r\n  throw new Error(\"Unknown type \" + type);\r\n}\r\n\r\nfunction encodeMsgpack(value) {\r\n  var buffer = new ArrayBuffer(encodedSize(value));\r\n  var view = new DataView(buffer);\r\n  encode$1(value, view, 0);\r\n  return new Uint8Array(buffer);\r\n}\r\n\r\n/**\r\n * @file mmtf-constants\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\n\r\n\r\nvar PassThroughFields = [\r\n    \"mmtfVersion\", \"mmtfProducer\",\r\n    \"unitCell\", \"spaceGroup\", \"structureId\", \"title\",\r\n    \"depositionDate\", \"releaseDate\",\r\n    \"experimentalMethods\", \"resolution\", \"rFree\", \"rWork\",\r\n    \"bioAssemblyList\", \"ncsOperatorList\", \"entityList\", \"groupList\",\r\n    \"numBonds\", \"numAtoms\", \"numGroups\", \"numChains\", \"numModels\",\r\n    \"groupsPerChain\", \"chainsPerModel\",\r\n];\r\n\r\nvar EncodedFields = [\r\n\t// required\r\n    \"xCoordList\", \"yCoordList\", \"zCoordList\",\r\n    \"groupIdList\", \"groupTypeList\",\r\n    \"chainIdList\",\r\n    // optional\r\n    \"bFactorList\", \"atomIdList\", \"altLocList\", \"occupancyList\",\r\n    \"secStructList\", \"insCodeList\", \"sequenceIndexList\",\r\n    \"chainNameList\",\r\n    \"bondAtomList\", \"bondOrderList\"\r\n];\r\n\r\nvar AllFields = PassThroughFields.concat( EncodedFields );\r\n\r\n/**\r\n * @file mmtf-utils\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\n\r\n/**\r\n * mmtf utils module.\r\n * @module MmtfUtils\r\n */\r\n\r\n\r\nfunction getView( ctor, typedArray, elemSize ){\r\n    return typedArray ? new ctor(\r\n        typedArray.buffer,\r\n        typedArray.byteOffset,\r\n        typedArray.byteLength / ( elemSize || 1 )\r\n    ) : undefined;\r\n}\r\n\r\nfunction getDataView( typedArray ){\r\n    return getView( DataView, typedArray );\r\n}\r\n\r\n/**\r\n * get an Uint8Array view on the input array memory\r\n * @static\r\n * @param  {TypedArray} dataArray - input array\r\n * @return {Uint8Array} new view on the input array memory\r\n */\r\nfunction getUint8View( typedArray ){\r\n    return getView( Uint8Array, typedArray );\r\n}\r\n\r\n/**\r\n * get an Int8Array view on the input array memory\r\n * @static\r\n * @param  {TypedArray} dataArray - input array\r\n * @return {Int8Array} new view on the input array memory\r\n */\r\nfunction getInt8View( typedArray ){\r\n    return getView( Int8Array, typedArray );\r\n}\r\n\r\n/**\r\n * get an Int32Array view on the input array memory\r\n * @static\r\n * @param  {TypedArray} dataArray - input array\r\n * @return {Int32Array} new view on the input array memory\r\n */\r\nfunction getInt32View( typedArray ){\r\n    return getView( Int32Array, typedArray, 4 );\r\n}\r\n\r\nfunction getFloat32View( typedArray ){\r\n    return getView( Float32Array, typedArray, 4 );\r\n}\r\n\r\n\r\n/**\r\n * get an Int16Array copy of the the input array data\r\n * @static\r\n * @param  {TypedArray} view - input data in big endian format\r\n * @param  {Int16Array} [dataArray] - pre-allocated output array\r\n * @return {Int16Array} copy of the input array data\r\n */\r\nfunction decodeInt16( bytes, output ){\r\n    var n = bytes.length / 2;\r\n    if( !output ) output = new Int16Array( n );\r\n    for( var i = 0, i2 = 0; i < n; ++i, i2 += 2 ){\r\n        output[ i ] = bytes[ i2 ] << 8 ^ bytes[ i2 + 1 ] << 0;\r\n    }\r\n    return output;\r\n}\r\n\r\n/**\r\n * make big endian buffer of an int16 array\r\n * @static\r\n * @param  {Array|TypedArray} array - array of int16 values\r\n * @return {ArrayBuffer} big endian buffer\r\n */\r\nfunction encodeInt16( array, output ){\r\n    var n = array.length;\r\n    if( !output ) output = new Uint8Array( 2 * n );\r\n    var dv = getDataView( output );\r\n    for( var i = 0; i < n; ++i ){\r\n        dv.setInt16( 2 * i, array[ i ] );\r\n    }\r\n    return getUint8View( output );\r\n}\r\n\r\n/**\r\n * get an Int32Array copy of the the input array data\r\n * @static\r\n * @param  {TypedArray} view - input data in big endian format\r\n * @param  {Int32Array} [dataArray] - pre-allocated output array\r\n * @return {Int32Array} copy of the input array data\r\n */\r\nfunction decodeInt32( bytes, output ){\r\n    var n = bytes.length / 4;\r\n    if( !output ) output = new Int32Array( n );\r\n    for( var i = 0, i4 = 0; i < n; ++i, i4 += 4 ){\r\n        output[ i ] = (\r\n            bytes[ i4     ] << 24 ^ bytes[ i4 + 1 ] << 16 ^\r\n            bytes[ i4 + 2 ] <<  8 ^ bytes[ i4 + 3 ] <<  0\r\n        );\r\n    }\r\n    return output;\r\n}\r\n\r\n/**\r\n * make big endian buffer of an int32 array\r\n * @static\r\n * @param  {Array|TypedArray} array - array of int32 values\r\n * @return {ArrayBuffer} big endian buffer\r\n */\r\nfunction encodeInt32( array, output ){\r\n    var n = array.length;\r\n    if( !output ) output = new Uint8Array( 4 * n );\r\n    var dv = getDataView( output );\r\n    for( var i = 0; i < n; ++i ){\r\n        dv.setInt32( 4 * i, array[ i ] );\r\n    }\r\n    return getUint8View( output );\r\n}\r\n\r\nfunction decodeFloat32( bytes, output ){\r\n    var n = bytes.length;\r\n    if( !output ) output = new Float32Array( n / 4 );\r\n    var dvOut = getDataView( output );\r\n    var dvIn = getDataView( bytes );\r\n    for( var i = 0, i4 = 0, il = n / 4; i < il; ++i, i4 += 4 ){\r\n        dvOut.setFloat32( i4, dvIn.getFloat32( i4 ), true );\r\n    }\r\n    return output;\r\n}\r\n\r\n/**\r\n * decode integers into floats using given divisor\r\n * example:\r\n *     intArray: [ 12, 34, 543, 687, 2, 0, 4689 ]\r\n *     divisor: 100\r\n *     return: [ 0.12, 0.34, 5.43, 6.87, 0.02, 0.00, 46.89 ]\r\n * @static\r\n * @param  {TypedArray|Array} intArray - input array containing integers\r\n * @param  {Number} divisor - number to devide the integers to obtain floats\r\n * @param  {Float32Array} [dataArray] - pre-allocated output array\r\n * @return {Float32Array} decoded array\r\n */\r\nfunction decodeInteger( intArray, divisor, output ){\r\n    var n = intArray.length;\r\n    var invDiv = 1/divisor;\r\n    if( !output ) output = new Float32Array( n );\r\n    for( var i = 0; i < n; ++i ){\r\n        // multiply by inverse of the divisor which is faster then division\r\n        output[ i ] = intArray[ i ] * invDiv;\r\n    }\r\n    return output;\r\n}\r\n\r\nfunction encodeInteger( floatArray, factor, output ){\r\n    var n = floatArray.length;\r\n    if( !output ) output = new Int32Array( n );\r\n    for( var i = 0; i < n; ++i ){\r\n        output[ i ] = Math.round( floatArray[ i ] * factor );\r\n    }\r\n    return output;\r\n}\r\n\r\n\r\n\r\n/**\r\n * perform run-length decoding of input array\r\n * example:\r\n *     array: [ 0, 2, 3, 5 ]  // pairs of values and length of a run\r\n *     return: [ 0, 0, 3, 3, 3, 3, 3 ]\r\n * @static\r\n * @param  {TypedArray|Array} array - run-length encoded input array\r\n * @param  {TypedArray|Array} [dataArray] - pre-allocated output array\r\n * @return {TypedArray|Array} decoded array\r\n */\r\nfunction decodeRun( array, output ){\r\n    var i, il;\r\n    if( !output ){\r\n        // calculate the length the decoded array will have\r\n        var fullLength = 0;\r\n        for( i = 0, il = array.length; i < il; i+=2 ){\r\n            fullLength += array[ i + 1 ];\r\n        }\r\n        // create a new array of the same type of the input array\r\n        output = new array.constructor( fullLength );\r\n    }\r\n    var dataOffset = 0;\r\n    for( i = 0, il = array.length; i < il; i+=2 ){\r\n        var value = array[ i ];  // value to be repeated\r\n        var length = array[ i + 1 ];  // number of repeats\r\n        for( var j = 0; j < length; ++j ){\r\n            output[ dataOffset ] = value;\r\n            ++dataOffset;\r\n        }\r\n    }\r\n    return output;\r\n}\r\n\r\nfunction encodeRun( array ){\r\n    if( array.length === 0 ) return new Int32Array();\r\n    var i, il;\r\n    // calculate output size\r\n    var fullLength = 2;\r\n    for( i = 1, il = array.length; i < il; ++i ){\r\n        if( array[ i - 1 ] !== array[ i ] ){\r\n            fullLength += 2;\r\n        }\r\n    }\r\n    var output = new Int32Array( fullLength );\r\n    var offset = 0;\r\n    var runLength = 1;\r\n    for( i = 1, il = array.length; i < il; ++i ){\r\n        if( array[ i - 1 ] !== array[ i ] ){\r\n            output[ offset ] = array[ i - 1 ];\r\n            output[ offset + 1 ] = runLength;\r\n            runLength = 1;\r\n            offset += 2;\r\n        }else{\r\n            ++runLength;\r\n        }\r\n    }\r\n    output[ offset ] = array[ array.length - 1 ];\r\n    output[ offset + 1 ] = runLength;\r\n    return output;\r\n}\r\n\r\n\r\n\r\n/**\r\n * perform delta decoding of the input array\r\n * by iterativly adding the ith element's value to the i+1th\r\n * example:\r\n *     dataArray: [ 0, 2, 1, 2, 1, 1, -4, -2, 9 ]\r\n *     return: [ 0, 2, 3, 5, 6, 7, 3, 1, 10 ]\r\n * @static\r\n * @param  {TypedArray|Array} dataArray - delta encoded input array\r\n * @return {TypedArray|Array} decoded array\r\n */\r\nfunction decodeDelta( array, output ){\r\n    var n = array.length;\r\n    if( !output ) output = new array.constructor( n );\r\n    if( n ) output[ 0 ] = array[ 0 ];\r\n    for( var i = 1; i < n; ++i ){\r\n        output[ i ] = array[ i ] + output[ i - 1 ];\r\n    }\r\n    return output;\r\n}\r\n\r\nfunction encodeDelta( array, output ){\r\n    var n = array.length;\r\n    if( !output ) output = new array.constructor( n );\r\n    output[ 0 ] = array[ 0 ];\r\n    for( var i = 1; i < n; ++i ){\r\n        output[ i ] = array[ i ] - array[ i - 1 ];\r\n    }\r\n    return output;\r\n}\r\n\r\n\r\n\r\n/**\r\n * [decodePacking description]\r\n * @param  {Int16Array|Int8Array} int16or8 [description]\r\n * @param  {Int32Array} output   [description]\r\n * @return {Int32Array}          [description]\r\n */\r\nfunction decodePacking( int16or8, output ){\r\n    var upperLimit = int16or8 instanceof Int8Array ? 0x7F : 0x7FFF;\r\n    var lowerLimit = -upperLimit - 1;\r\n    var n = int16or8.length;\r\n    var i, j;\r\n    if( !output ){\r\n        var fullLength = 0;\r\n        for( i = 0; i < n; ++i ){\r\n            if( int16or8[ i ] < upperLimit && int16or8[ i ] > lowerLimit ){\r\n                ++fullLength;\r\n            }\r\n        }\r\n        output = new Int32Array( fullLength );\r\n    }\r\n    i = 0;\r\n    j = 0;\r\n    while( i < n ){\r\n        var value = 0;\r\n        while( int16or8[ i ] === upperLimit || int16or8[ i ] === lowerLimit ){\r\n            value += int16or8[ i ];\r\n            ++i;\r\n        }\r\n        value += int16or8[ i ];\r\n        ++i;\r\n        output[ j ] = value;\r\n        ++j;\r\n    }\r\n    return output;\r\n}\r\n\r\n/**\r\n * integer packing using recursive indexing\r\n * @param  {Array|TyepedArray} intArray [description]\r\n * @param  {Boolean} useInt8  [description]\r\n * @return {Int16Array|Int8Array}          [description]\r\n */\r\nfunction encodePacking( intArray, useInt8 ){\r\n    var upperLimit = useInt8 ? 0x7F : 0x7FFF;\r\n    var lowerLimit = -upperLimit - 1;\r\n    var i;\r\n    var n = intArray.length;\r\n    var size = 0;\r\n    for( i = 0; i < n; ++i ){\r\n        var value = intArray[ i ];\r\n        if( value === 0 ){\r\n            ++size;\r\n        }else if( value === upperLimit || value === lowerLimit ){\r\n            size += 2;\r\n        }else if( value > 0) {\r\n            size += Math.ceil( value / upperLimit );\r\n        }else {\r\n            size += Math.ceil( value / lowerLimit );\r\n        }\r\n    }\r\n    var output = useInt8 ? new Int8Array( size ) : new Int16Array( size );\r\n    var j = 0;\r\n    for( i = 0; i < n; ++i ){\r\n        var value = intArray[ i ];\r\n        if( value >= 0) {\r\n            while( value >= upperLimit ){\r\n                output[ j ] = upperLimit;\r\n                ++j;\r\n                value -= upperLimit;\r\n            }\r\n        }else{\r\n            while( value <= lowerLimit ){\r\n                output[ j ] = lowerLimit;\r\n                ++j;\r\n                value -= lowerLimit;\r\n            }\r\n        }\r\n        output[ j ] = value;\r\n        ++j;\r\n    }\r\n    return output;\r\n}\r\n\r\n\r\n\r\nfunction decodeDeltaRun( array, output ){\r\n    return decodeDelta( decodeRun( array ), output );\r\n}\r\n\r\nfunction encodeDeltaRun( array ){\r\n    return encodeRun( encodeDelta( array ) );\r\n}\r\n\r\n\r\n\r\n/**\r\n * perform run-length decoding followed (@see decodeRunLength)\r\n * by decoding integers into floats using given divisor (@see decodeIntegerToFloat)\r\n * example:\r\n *     array: [ 320, 3, 100, 2 ]\r\n *     divisor: 100\r\n *     return: [ 3.20, 3.20, 3.20, 1.00, 1.00 ]\r\n * @static\r\n * @param  {Uint8Array} array - run-length encoded int32 array as bytes in big endian format\r\n * @param  {Integer} divisor - number to devide the integers to obtain floats\r\n * @param  {Float32Array} dataArray - pre-allocated output array\r\n * @return {Float32Array} decoded array\r\n */\r\nfunction decodeIntegerRun( intArray, divisor, output ){\r\n    return decodeInteger(\r\n        decodeRun( intArray, getInt32View( output ) ), divisor, output\r\n    );\r\n}\r\n\r\nfunction encodeIntegerRun( floatArray, factor ){\r\n    return encodeRun( encodeInteger( floatArray, factor ) );\r\n}\r\n\r\n\r\n\r\nfunction decodeIntegerDelta( intArray, divisor, output ){\r\n    return decodeInteger(\r\n        decodeDelta( intArray, getInt32View( output ) ), divisor, output\r\n    );\r\n}\r\n\r\nfunction encodeIntegerDelta( floatArray, factor, output ){\r\n    return encodeDelta( encodeInteger( floatArray, factor ), output );\r\n}\r\n\r\n\r\n\r\nfunction decodeIntegerPacking( int16or8, divisor, output ){\r\n    return decodeInteger(\r\n        decodePacking( int16or8, getInt32View( output ) ), divisor, output\r\n    );\r\n}\r\n\r\nfunction decodeIntegerDeltaPacking( int16or8, divisor, output ){\r\n    var unpacked = decodePacking( int16or8, getInt32View( output ) );\r\n    return decodeIntegerDelta( unpacked, divisor, getFloat32View( unpacked ) );\r\n}\r\n\r\nfunction encodeIntegerDeltaPacking( floatArray, factor, useInt8 ){\r\n    return encodePacking( encodeIntegerDelta( floatArray, factor ), useInt8 );\r\n}\r\n\r\n\r\n\r\nfunction decodeBytes( bytes ){\r\n    var dv = getDataView( bytes );\r\n    var type = dv.getInt32( 0 );\r\n    var size = dv.getInt32( 4 );\r\n    var param = bytes.subarray( 8, 12 );\r\n    var bytes = bytes.subarray( 12 );\r\n    return [ type, bytes, size, param ];\r\n}\r\n\r\nfunction encodeBytes( type, size, param, bytes ){\r\n    var buffer = new ArrayBuffer( 12 + bytes.byteLength );\r\n    var out = new Uint8Array( buffer );\r\n    var dv = new DataView( buffer );\r\n    dv.setInt32( 0, type );\r\n    dv.setInt32( 4, size );\r\n    if( param ) out.set( param, 8 );\r\n    out.set( bytes, 12 );\r\n    return out;\r\n}\r\n\r\nfunction passInt8( int8 ){\r\n    var size = int8.length;\r\n    var bytes = getUint8View( int8 );\r\n    return encodeBytes( 2, size, undefined, bytes );\r\n}\r\n\r\nfunction passInt32( int32 ){\r\n    var size = int32.length;\r\n    var bytes = encodeInt32( int32 );\r\n    return encodeBytes( 4, size, undefined, bytes );\r\n}\r\n\r\nfunction passString( stringBytes, length ){\r\n    var size = stringBytes.length / length;\r\n    var param = encodeInt32([ length ]);\r\n    var bytes = getUint8View( stringBytes );\r\n    return encodeBytes( 5, size, param, bytes );\r\n}\r\n\r\nfunction runChar( charBytes ){\r\n    var size = charBytes.length;\r\n    var bytes = encodeInt32( encodeRun( charBytes ) );\r\n    return encodeBytes( 6, size, undefined, bytes );\r\n}\r\n\r\nfunction deltaRun( int32 ){\r\n    var size = int32.length;\r\n    var bytes = encodeInt32( encodeDeltaRun( int32 ) );\r\n    return encodeBytes( 8, size, undefined, bytes );\r\n}\r\n\r\nfunction integerRun( float32, factor ){\r\n    var size = float32.length;\r\n    var param = encodeInt32([ factor ]);\r\n    var bytes = encodeInt32( encodeIntegerRun( float32, factor ) );\r\n    return encodeBytes( 9, size, param, bytes );\r\n}\r\n\r\nfunction integerDeltaPacking16( float32, factor ){\r\n    var size = float32.length;\r\n    var param = encodeInt32([ factor ]);\r\n    var bytes = encodeInt16( encodeIntegerDeltaPacking( float32, factor ) );\r\n    return encodeBytes( 10, size, param, bytes );\r\n}\r\n\r\nfunction encodeMmtf( inputDict ){\r\n\r\n    var outputDict = {};\r\n\r\n    // copy some fields over from the input dict\r\n    PassThroughFields.forEach( function( name ){\r\n        if( inputDict[ name ] !== undefined ){\r\n            outputDict[ name ] = inputDict[ name ];\r\n        }\r\n    } );\r\n\r\n    //////////////\r\n    // bond data\r\n\r\n    // encode inter group bond atom indices, i.e. get bytes in big endian order\r\n    if( inputDict.bondAtomList ){\r\n        outputDict.bondAtomList = passInt32( inputDict.bondAtomList );\r\n    }\r\n\r\n    // encode inter group bond orders, i.e. get bytes\r\n    if( inputDict.bondOrderList ){\r\n        outputDict.bondOrderList = passInt8( inputDict.bondOrderList );\r\n    }\r\n\r\n    //////////////\r\n    // atom data\r\n\r\n    // split-list delta & integer encode x, y, z atom coords\r\n    outputDict.xCoordList = integerDeltaPacking16( inputDict.xCoordList, 1000 );\r\n    outputDict.yCoordList = integerDeltaPacking16( inputDict.yCoordList, 1000 );\r\n    outputDict.zCoordList = integerDeltaPacking16( inputDict.zCoordList, 1000 );\r\n\r\n    // split-list delta & integer encode b-factors\r\n    if( inputDict.bFactorList ){\r\n        outputDict.bFactorList = integerDeltaPacking16( inputDict.bFactorList, 100 );\r\n    }\r\n\r\n    // delta & run-length encode atom ids\r\n    if( inputDict.atomIdList ){\r\n        outputDict.atomIdList = deltaRun( inputDict.atomIdList );\r\n    }\r\n\r\n    // run-length encode alternate labels\r\n    if( inputDict.altLocList ){\r\n        outputDict.altLocList = runChar( inputDict.altLocList );\r\n    }\r\n\r\n    // run-length & integer encode occupancies\r\n    if( inputDict.occupancyList ){\r\n        outputDict.occupancyList = integerRun( inputDict.occupancyList, 100 );\r\n    }\r\n\r\n    ///////////////\r\n    // group data\r\n\r\n    // run-length & delta encode group numbers\r\n    outputDict.groupIdList = deltaRun( inputDict.groupIdList );\r\n\r\n    // encode group types, i.e. get int32 array\r\n    outputDict.groupTypeList = passInt32( inputDict.groupTypeList );\r\n\r\n    // encode secondary structure, i.e. get bytes\r\n    if( inputDict.secStructList ){\r\n        outputDict.secStructList = passInt8( inputDict.secStructList, 1 );\r\n    }\r\n\r\n    // run-length encode insertion codes\r\n    if( inputDict.insCodeList ){\r\n        outputDict.insCodeList = runChar( inputDict.insCodeList );\r\n    }\r\n\r\n    // run-length & delta encode sequence indices\r\n    if( inputDict.sequenceIndexList ){\r\n        outputDict.sequenceIndexList = deltaRun( inputDict.sequenceIndexList );\r\n    }\r\n\r\n    ///////////////\r\n    // chain data\r\n\r\n    // encode chain ids, i.e. get bytes\r\n    outputDict.chainIdList = passString( inputDict.chainIdList, 4 );\r\n\r\n    // encode chain names, i.e. get bytes\r\n    if( inputDict.chainNameList ){\r\n        outputDict.chainNameList = passString( inputDict.chainNameList, 4 );\r\n    }\r\n\r\n    return outputDict;\r\n\r\n}\r\n\r\n/**\r\n * @file msgpack-decode\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\n\r\n/**\r\n * msgpack decode module.\r\n * @module MsgpackDecode\r\n */\r\n\r\n/**\r\n * decode binary encoded MessagePack v5 (http://msgpack.org/) data\r\n * @static\r\n * @param  {Uint8Array} buffer - binary encoded MessagePack data\r\n * @return {Object|Array|String|Number|Boolean|null} decoded Messagepack data\r\n */\r\nfunction decodeMsgpack(buffer) {\r\n  // Loosely based on\r\n  // The MIT License (MIT)\r\n  // Copyright (c) 2013 Tim Caswell <tim@creationix.com>\r\n  // https://github.com/creationix/msgpack-js\r\n  var offset = 0;\r\n  var dataView = new DataView(buffer.buffer);\r\n\r\n  /**\r\n   * decode all key-value pairs of a map into an object\r\n   * @param  {Integer} length - number of key-value pairs\r\n   * @return {Object} decoded map\r\n   */\r\n  function map(length) {\r\n    var value = {};\r\n    for (var i = 0; i < length; i++) {\r\n      var key = parse();\r\n      value[key] = parse();\r\n    }\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * decode binary array\r\n   * @param  {Integer} length - number of elements in the array\r\n   * @return {Uint8Array} decoded array\r\n   */\r\n  function bin(length) {\r\n    var value = buffer.subarray(offset, offset + length);\r\n    offset += length;\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * decode string\r\n   * @param  {Integer} length - number string characters\r\n   * @return {String} decoded string\r\n   */\r\n  function str(length) {\r\n    var array = buffer.subarray(offset, offset + length);\r\n    offset += length;\r\n    // limit number of arguments to String.fromCharCode to something\r\n    // browsers can handle, see http://stackoverflow.com/a/22747272\r\n    var chunkSize = 0xffff;\r\n    if(length > chunkSize){\r\n      var c = [];\r\n      for(var i = 0; i < array.length; i += chunkSize) {\r\n        c.push(String.fromCharCode.apply(\r\n          null, array.subarray(i, i + chunkSize)\r\n        ));\r\n      }\r\n      return c.join(\"\");\r\n    }else{\r\n      return String.fromCharCode.apply(null, array);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * decode array\r\n   * @param  {Integer} length - number of array elements\r\n   * @return {Array} decoded array\r\n   */\r\n  function array(length) {\r\n    var value = new Array(length);\r\n    for (var i = 0; i < length; i++) {\r\n      value[i] = parse();\r\n    }\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * recursively parse the MessagePack data\r\n   * @return {Object|Array|String|Number|Boolean|null} decoded MessagePack data\r\n   */\r\n  function parse() {\r\n    var type = buffer[offset];\r\n    var value, length, extType;\r\n    // Positive FixInt\r\n    if ((type & 0x80) === 0x00) {\r\n      offset++;\r\n      return type;\r\n    }\r\n    // FixMap\r\n    if ((type & 0xf0) === 0x80) {\r\n      length = type & 0x0f;\r\n      offset++;\r\n      return map(length);\r\n    }\r\n    // FixArray\r\n    if ((type & 0xf0) === 0x90) {\r\n      length = type & 0x0f;\r\n      offset++;\r\n      return array(length);\r\n    }\r\n    // FixStr\r\n    if ((type & 0xe0) === 0xa0) {\r\n      length = type & 0x1f;\r\n      offset++;\r\n      return str(length);\r\n    }\r\n    // Negative FixInt\r\n    if ((type & 0xe0) === 0xe0) {\r\n      value = dataView.getInt8(offset);\r\n      offset++;\r\n      return value;\r\n    }\r\n    switch (type) {\r\n    // nil\r\n    case 0xc0:\r\n      offset++;\r\n      return null;\r\n    // 0xc1: (never used, could be employed for padding)\r\n    // false\r\n    case 0xc2:\r\n      offset++;\r\n      return false;\r\n    // true\r\n    case 0xc3:\r\n      offset++;\r\n      return true;\r\n    // bin 8\r\n    case 0xc4:\r\n      length = dataView.getUint8(offset + 1);\r\n      offset += 2;\r\n      return bin(length);\r\n    // bin 16\r\n    case 0xc5:\r\n      length = dataView.getUint16(offset + 1);\r\n      offset += 3;\r\n      return bin(length);\r\n    // bin 32\r\n    case 0xc6:\r\n      length = dataView.getUint32(offset + 1);\r\n      offset += 5;\r\n      return bin(length);\r\n    // // ext 8\r\n    // case 0xc7:\r\n    //   length = dataView.getUint8(offset + 1);\r\n    //   extType = dataView.getUint8(offset + 2);\r\n    //   offset += 3;\r\n    //   return [extType, bin(length)];\r\n    // // ext 16\r\n    // case 0xc8:\r\n    //   length = dataView.getUint16(offset + 1);\r\n    //   extType = dataView.getUint8(offset + 3);\r\n    //   offset += 4;\r\n    //   return [extType, bin(length)];\r\n    // // ext 32\r\n    // case 0xc9:\r\n    //   length = dataView.getUint32(offset + 1);\r\n    //   extType = dataView.getUint8(offset + 5);\r\n    //   offset += 6;\r\n    //   return [extType, bin(length)];\r\n    // float 32\r\n    case 0xca:\r\n      value = dataView.getFloat32(offset + 1);\r\n      offset += 5;\r\n      return value;\r\n    // float 64\r\n    case 0xcb:\r\n      value = dataView.getFloat64(offset + 1);\r\n      offset += 9;\r\n      return value;\r\n    // uint8\r\n    case 0xcc:\r\n      value = buffer[offset + 1];\r\n      offset += 2;\r\n      return value;\r\n    // uint 16\r\n    case 0xcd:\r\n      value = dataView.getUint16(offset + 1);\r\n      offset += 3;\r\n      return value;\r\n    // uint 32\r\n    case 0xce:\r\n      value = dataView.getUint32(offset + 1);\r\n      offset += 5;\r\n      return value;\r\n    // // uint64\r\n    // case 0xcf:\r\n    //   // FIXME not available/representable in JS\r\n    //   // largest possible int in JS is 2^53\r\n    //   // value = dataView.getUint64(offset + 1);\r\n    //   offset += 9;\r\n    //   return 0;\r\n    // int 8\r\n    case 0xd0:\r\n      value = dataView.getInt8(offset + 1);\r\n      offset += 2;\r\n      return value;\r\n    // int 16\r\n    case 0xd1:\r\n      value = dataView.getInt16(offset + 1);\r\n      offset += 3;\r\n      return value;\r\n    // int 32\r\n    case 0xd2:\r\n      value = dataView.getInt32(offset + 1);\r\n      offset += 5;\r\n      return value;\r\n    // // int 64\r\n    // case 0xd3:\r\n    //   // FIXME not available/representable in JS\r\n    //   // largest possible int in JS is 2^53\r\n    //   // value = dataView.getInt64(offset + 1);\r\n    //   offset += 9;\r\n    //   return 0;\r\n\r\n    // // fixext 1\r\n    // case 0xd4:\r\n    //   extType = dataView.getUint8(offset + 1);\r\n    //   offset += 2;\r\n    //   return [extType, bin(1)];\r\n    // // fixext 2\r\n    // case 0xd5:\r\n    //   extType = dataView.getUint8(offset + 1);\r\n    //   offset += 2;\r\n    //   return [extType, bin(2)];\r\n    // // fixext 4\r\n    // case 0xd6:\r\n    //   extType = dataView.getUint8(offset + 1);\r\n    //   offset += 2;\r\n    //   return [extType, bin(4)];\r\n    // // fixext 8\r\n    // case 0xd7:\r\n    //   extType = dataView.getUint8(offset + 1);\r\n    //   offset += 2;\r\n    //   return [extType, bin(8)];\r\n    // // fixext 16\r\n    // case 0xd8:\r\n    //   extType = dataView.getUint8(offset + 1);\r\n    //   offset += 2;\r\n    //   return [extType, bin(16)];\r\n    // str 8\r\n    case 0xd9:\r\n      length = dataView.getUint8(offset + 1);\r\n      offset += 2;\r\n      return str(length);\r\n    // str 16\r\n    case 0xda:\r\n      length = dataView.getUint16(offset + 1);\r\n      offset += 3;\r\n      return str(length);\r\n    // str 32\r\n    case 0xdb:\r\n      length = dataView.getUint32(offset + 1);\r\n      offset += 5;\r\n      return str(length);\r\n    // array 16\r\n    case 0xdc:\r\n      length = dataView.getUint16(offset + 1);\r\n      offset += 3;\r\n      return array(length);\r\n    // array 32\r\n    case 0xdd:\r\n      length = dataView.getUint32(offset + 1);\r\n      offset += 5;\r\n      return array(length);\r\n    // map 16:\r\n    case 0xde:\r\n      length = dataView.getUint16(offset + 1);\r\n      offset += 3;\r\n      return map(length);\r\n    // map 32\r\n    case 0xdf:\r\n      length = dataView.getUint32(offset + 1);\r\n      offset += 5;\r\n      return map(length);\r\n    }\r\n\r\n    throw new Error(\"Unknown type 0x\" + type.toString(16));\r\n  }\r\n\r\n  // start the recursive parsing\r\n  return parse();\r\n}\r\n\r\n/**\r\n * Fields shared in encoded and decoded mmtf data objects.\r\n * @typedef {Object} module:MmtfDecode.SharedMmtfData\r\n * @property {String} mmtfVersion - MMTF specification version\r\n * @property {String} mmtfProducer - Program that created the file\r\n * @property {Float[]} [unitCell] - Crystallographic unit cell\r\n * @property {Float} unitCell.0 - x length\r\n * @property {Float} unitCell.1 - y length\r\n * @property {Float} unitCell.2 - z length\r\n * @property {Float} unitCell.3 - alpha angle\r\n * @property {Float} unitCell.4 - beta angle\r\n * @property {Float} unitCell.5 - gamma angle\r\n * @property {String} [spaceGroup] - Hermann-Mauguin symbol\r\n * @property {String} [structureId] - Some reference, e.g. a PDB ID\r\n * @property {String} [title] - Short description\r\n * @property {String} [depositionDate] - Deposition date in YYYY-MM-DD format\r\n * @property {String} [releaseDate] - Release date in YYYY-MM-DD format\r\n * @property {String[]} [experimentalMethods] - Structure determination methods\r\n * @property {Float} [resolution] - Resolution in Å\r\n * @property {Float} [rFree] - R-free value\r\n * @property {Float} [rWork] - R-work value\r\n * @property {Integer} numBonds - Number of bonds\r\n * @property {Integer} numAtoms - Number of atoms\r\n * @property {Integer} numGroups - Number of groups (residues)\r\n * @property {Integer} numChains - Number of chains\r\n * @property {Integer} numModels - Number of models\r\n * @property {Integer[]} chainsPerModel - List of number of chains in each model\r\n * @property {Integer[]} groupsPerChain - List of number of groups in each chain\r\n * @property {Entity[]} [entityList] - List of entity objects\r\n * @property {Integer[]} entityList.chainIndexList - Pointers into chain data fields\r\n * @property {String} entityList.description - Description of the entity\r\n * @property {String} entityList.type - Name of the entity type\r\n * @property {String} entityList.sequence - One letter code sequence\r\n * @property {Assembly[]} [bioAssemblyList] - List of assembly objects\r\n * @property {Transform[]} bioAssemblyList.transformList - List of transform objects\r\n * @property {Integer[]} bioAssemblyList.transformList.chainIndexList - Pointers into chain data fields\r\n * @property {Float[]} bioAssemblyList.transformList.matrix - 4x4 transformation matrix\r\n * @property {Array[]} [ncsOperatorList] - List of ncs operator matrices\r\n * @property {Float[]} ncsOperatorList. - 4x4 transformation matrix\r\n * @property {GroupType[]} groupList - List of groupType objects\r\n * @property {Integer[]} groupList.formalChargeList - List of atom formal charges\r\n * @property {String[]} groupList.elementList - List of elements\r\n * @property {String[]} groupList.atomNameList - List of atom names\r\n * @property {Integer[]} groupList.bondAtomList - List of bonded atom indices\r\n * @property {Integer[]} groupList.bondOrderList - List of bond orders\r\n * @property {String} groupList.groupName - The name of the group\r\n * @property {String} groupList.singleLetterCode - The single letter code\r\n * @property {String} groupList.chemCompType -  The chemical component type\r\n */\r\n\r\n/**\r\n * Encoded mmtf data object. Also includes the fields from {@link module:MmtfDecode.SharedMmtfData}. See MMTF specification on how they are encoded.\r\n * @typedef {Object} module:MmtfDecode.EncodedMmtfData\r\n * @mixes module:MmtfDecode.SharedMmtfData\r\n * @property {Uint8Array} [bondAtomList] - Encoded bonded atom indices\r\n * @property {Uint8Array} [bondOrderList] - Encoded bond orders\r\n * @property {Uint8Array} xCoordBig - Encoded x coordinates in Å, part 1\r\n * @property {Uint8Array} xCoordSmall - Encoded x coordinates in Å, part 2\r\n * @property {Uint8Array} yCoordBig - Encoded y coordinates in Å, part 1\r\n * @property {Uint8Array} yCoordSmall - Encoded y coordinates in Å, part 2\r\n * @property {Uint8Array} yCoordBig - Encoded y coordinates in Å, part 1\r\n * @property {Uint8Array} yCoordSmall - Encoded y coordinates in Å, part 2\r\n * @property {Uint8Array} [bFactorBig] - Encoded B-factors in Å^2, part 1\r\n * @property {Uint8Array} [bFactorSmall] - Encoded B-factors in Å^2, part 2\r\n * @property {Uint8Array} [atomIdList] - Encoded  atom ids\r\n * @property {Uint8Array} [altLocList] - Encoded alternate location labels\r\n * @property {Uint8Array} [occupancyList] - Encoded occupancies\r\n * @property {Uint8Array} groupIdList - Encoded group ids\r\n * @property {Uint8Array} groupTypeList - Encoded group types\r\n * @property {Uint8Array} [secStructList] - Encoded secondary structure codes\r\n * @property {Uint8Array} [insCodeList] - Encoded insertion codes\r\n * @property {Uint8Array} [seuenceIdList] - Encoded sequence ids\r\n * @property {Uint8Array} chainIdList - Encoded chain ids\r\n * @property {Uint8Array} [chainNameList] - Encoded chain names\r\n */\r\n\r\n/**\r\n * Decoded mmtf data object. Also includes fields the from {@link module:MmtfDecode.SharedMmtfData}.\r\n * @typedef {Object} module:MmtfDecode.MmtfData\r\n * @mixes module:MmtfDecode.SharedMmtfData\r\n * @property {Int32Array} [bondAtomList] - List of bonded atom indices\r\n * @property {Uint8Array} [bondOrderList] - List of bond orders\r\n * @property {Float32Array} xCoordList - List of x coordinates in Å\r\n * @property {Float32Array} yCoordList - List of y coordinates in Å\r\n * @property {Float32Array} zCoordList - List of z coordinates in Å\r\n * @property {Float32Array} [bFactorList] - List of B-factors in Å^2\r\n * @property {Int32Array} [atomIdList] - List of atom ids\r\n * @property {Uint8Array} [altLocList] - List of alternate location labels\r\n * @property {Float32Array} [occupancyList] - List of occupancies\r\n * @property {Int32Array} groupIdList - List of group ids\r\n * @property {Int32Array} groupTypeList - List of group types\r\n * @property {Int8Array} [secStructList] - List of secondary structure codes, encoding\r\n *    0: pi helix, 1: bend, 2: alpha helix, 3: extended,\r\n *    4: 3-10 helix, 5: bridge, 6: turn, 7: coil, -1: undefined\r\n * @property {Uint8Array} [insCodeList] - List of insertion codes\r\n * @property {Int32Array} [seuenceIdList] - List of sequence ids\r\n * @property {Uint8Array} chainIdList - List of chain ids\r\n * @property {Uint8Array} [chainNameList] - List of chain names\r\n */\r\n\r\n\r\n/**\r\n * [performDecoding description]\r\n * @param  {Integer} bytes [description]\r\n * @param  {Integer} size  [description]\r\n * @param  {Uint8Array} param [description]\r\n * @return {TypedArray}       [description]\r\n */\r\nfunction performDecoding( type, bytes, size, param ){\r\n\r\n    switch( type ){\r\n        case 1:\r\n            return decodeFloat32( bytes );\r\n        case 2:\r\n            return getInt8View( bytes );\r\n        case 3:\r\n            return decodeInt16( bytes );\r\n        case 4:\r\n            return decodeInt32( bytes );\r\n        case 5:\r\n            // var length = decodeInt32( param )[ 0 ];\r\n            return getUint8View( bytes );  // interpret as string array\r\n        case 6:\r\n            // interpret as char array\r\n            return decodeRun( decodeInt32( bytes ), new Uint8Array( size ) );\r\n        case 7:\r\n            return decodeRun( decodeInt32( bytes ) )\r\n        case 8:\r\n            return decodeDeltaRun( decodeInt32( bytes ) );\r\n        case 9:\r\n            return decodeIntegerRun( decodeInt32( bytes ), decodeInt32( param )[ 0 ] );\r\n        case 10:\r\n            return decodeIntegerDeltaPacking( decodeInt16( bytes ), decodeInt32( param )[ 0 ] );\r\n        case 11:\r\n            return decodeInteger( decodeInt16( bytes ), decodeInt32( param )[ 0 ] );\r\n        case 12:\r\n            return decodeIntegerPacking( decodeInt16( bytes ), decodeInt32( param )[ 0 ] );\r\n        case 13:\r\n            return decodeIntegerPacking( getInt8View( bytes ), decodeInt32( param )[ 0 ] );\r\n        case 14:\r\n            return decodePacking( decodeInt16( bytes ) );\r\n        case 15:\r\n            return decodePacking( getInt8View( bytes ) );\r\n    }\r\n\r\n};\r\n\r\n\r\n/**\r\n * Decode MMTF fields\r\n * @static\r\n * @param  {Object} inputDict - encoded MMTF data\r\n * @param  {Object} [params] - decoding parameters\r\n * @param  {String[]} params.ignoreFields - names of optional fields not to decode\r\n * @return {module:MmtfDecode.MmtfData} mmtfData\r\n */\r\nfunction decodeMmtf( inputDict, params ){\r\n\r\n    params = params || {};\r\n    var ignoreFields = params.ignoreFields;\r\n    var outputDict = {};\r\n\r\n    AllFields.forEach( function( name ){\r\n        var ignore = ignoreFields ? ignoreFields.indexOf( name ) !== -1 : false;\r\n        var data = inputDict[ name ];\r\n        if( !ignore && data !== undefined ){\r\n            if( data instanceof Uint8Array ){\r\n                outputDict[ name ] = performDecoding.apply( null, decodeBytes( data ) );\r\n            }else{\r\n                outputDict[ name ] = data;\r\n            }\r\n        }\r\n    } );\r\n\r\n    return outputDict;\r\n\r\n}\r\n\r\n/**\r\n * @file mmtf-traverse\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\n\r\n/**\r\n * mmtf traverse module.\r\n * @module MmtfTraverse\r\n */\r\n\r\n/**\r\n * Converts an array of ASCII codes trimming '\\0' bytes\r\n * @private\r\n * @param  {Array} charCodeArray - array of ASCII char codes\r\n * @return {String} '\\0' trimmed string\r\n */\r\nfunction fromCharCode( charCodeArray ){\r\n    return String.fromCharCode.apply( null, charCodeArray ).replace(/\\0/g, '');\r\n}\r\n\r\n\r\n/**\r\n * @callback module:MmtfTraverse.onModel\r\n * @param {Object} modelData\r\n * @param {Integer} modelData.chainCount - number of chains in the model\r\n * @param {Integer} modelData.modelIndex - index of the model\r\n */\r\n\r\n/**\r\n * @callback module:MmtfTraverse.onChain\r\n * @param {Object} chainData\r\n * @param {Integer} chainData.groupCount - number of groups in the chain\r\n * @param {Integer} chainData.chainIndex - index of the chain\r\n * @param {Integer} chainData.modelIndex - index of the parent model\r\n * @param {String} chainData.chainId - chain id\r\n * @param {?String} chainData.chainName - additional chain name\r\n */\r\n\r\n/**\r\n * @callback module:MmtfTraverse.onGroup\r\n * @param {Object} groupData\r\n * @param {Integer} groupData.atomCount - number of atoms in the group\r\n * @param {Integer} groupData.groupIndex - index of the group\r\n * @param {Integer} groupData.chainIndex - index of the parent chain\r\n * @param {Integer} groupData.modelIndex - index of the parent model\r\n * @param {Integer} groupData.groupId - group id (residue number)\r\n * @param {Integer} groupData.groupType - index to an entry in {@link module:MmtfDecode.MmtfData}#groupList\r\n * @param {String} groupData.groupName - name of the group, 0 to 5 characters\r\n * @param {Char} groupData.singleLetterCode - IUPAC single letter code, otherwise 'X', 1 character\r\n * @param {String} groupData.chemCompType - chemical component type from the mmCIF dictionary\r\n * @param {?Integer} groupData.secStruct - sencoded secondary structure |\r\n *    0: pi helix, 1: bend, 2: alpha helix, 3: extended,\r\n *    4: 3-10 helix, 5: bridge, 6: turn, 7: coil, -1: undefined\r\n * @param {?Char} groupData.insCode - insertion code\r\n * @param {?Integer} groupData.sequenceIndex - index to the `sequence` property of\r\n *    the corresponding entity, -1 when the entity has no sequence\r\n */\r\n\r\n/**\r\n * @callback module:MmtfTraverse.onAtom\r\n * @param {Object} atomData\r\n * @param {Integer} atomData.atomIndex - index of the atom\r\n * @param {Integer} atomData.groupIndex - index of the parent group\r\n * @param {Integer} atomData.chainIndex - index of the parent chain\r\n * @param {Integer} atomData.modelIndex - index of the parent model\r\n * @param {?Integer} atomData.atomId - atom id\r\n * @param {String} atomData.element - IUPAC element name, 0 to 3 characters\r\n * @param {String} atomData.atomName - name of the atom, 0 to 5 characters\r\n * @param {Integer} atomData.formalCharge - formal charge of the atom\r\n * @param {Float} atomData.xCoord - x coordinate in Å\r\n * @param {Float} atomData.yCoord - y coordinate in Å\r\n * @param {Float} atomData.zCoord - z coordinate in Å\r\n * @param {?Float} atomData.bFactor - B-factor in in Å^2\r\n * @param {?Char} atomData.altLoc - alternate location identifier\r\n * @param {?Float} atomData.occupancy - occupancy of the atom\r\n */\r\n\r\n/**\r\n * @callback module:MmtfTraverse.onBond\r\n * @param {Object} bondData\r\n * @param {Integer} bondData.atomIndex1 - index of the first atom\r\n * @param {Integer} bondData.atomIndex2 - index of the secound atom\r\n * @param {Integer} bondData.bondOrder - bond order, allowed values are 1 to 3\r\n */\r\n\r\n\r\n/**\r\n * Traverse the MMTF structure data.\r\n * @static\r\n * @param {module:MmtfDecode.MmtfData} mmtfData - decoded mmtf data\r\n * @param {Object} eventCallbacks\r\n * @param {module:MmtfTraverse.onModel} [eventCallbacks.onModel] - called for each model\r\n * @param {module:MmtfTraverse.onChain} [eventCallbacks.onChain] - called for each chain\r\n * @param {module:MmtfTraverse.onGroup} [eventCallbacks.onGroup] - called for each group\r\n * @param {module:MmtfTraverse.onAtom} [eventCallbacks.onAtom] - called for each atom\r\n * @param {module:MmtfTraverse.onBond} [eventCallbacks.onBond] - called for each bond\r\n * @param {Object} [params] - traversal parameters\r\n * @param {Boolean} [params.firstModelOnly] - traverse only the first model\r\n */\r\nfunction traverseMmtf( mmtfData, eventCallbacks, params ){\r\n\r\n    params = params || {};\r\n\r\n    var firstModelOnly = params.firstModelOnly;\r\n\r\n    // setup callbacks\r\n    var onModel = eventCallbacks.onModel;\r\n    var onChain = eventCallbacks.onChain;\r\n    var onGroup = eventCallbacks.onGroup;\r\n    var onAtom = eventCallbacks.onAtom;\r\n    var onBond = eventCallbacks.onBond;\r\n\r\n    // setup index counters\r\n    var modelIndex = 0;\r\n    var chainIndex = 0;\r\n    var groupIndex = 0;\r\n    var atomIndex = 0;\r\n\r\n    var modelFirstAtomIndex = 0;\r\n    var modelLastAtomIndex = -1;\r\n\r\n    // setup optional fields\r\n    var chainNameList = mmtfData.chainNameList;\r\n    var secStructList = mmtfData.secStructList;\r\n    var insCodeList = mmtfData.insCodeList;\r\n    var sequenceIndexList = mmtfData.sequenceIndexList;\r\n    var atomIdList = mmtfData.atomIdList;\r\n    var bFactorList = mmtfData.bFactorList;\r\n    var altLocList = mmtfData.altLocList;\r\n    var occupancyList = mmtfData.occupancyList;\r\n    var bondAtomList = mmtfData.bondAtomList;\r\n    var bondOrderList = mmtfData.bondOrderList;\r\n\r\n    // hoisted loop variables\r\n    var o, ol, i, j, k, kl;\r\n\r\n    // loop over all models\r\n    for( o = 0, ol = mmtfData.chainsPerModel.length; o < ol; ++o ){\r\n\r\n        if( firstModelOnly && modelIndex > 0 ) break;\r\n\r\n        var modelChainCount = mmtfData.chainsPerModel[ modelIndex ];\r\n\r\n        if( onModel ){\r\n            onModel({\r\n                chainCount: modelChainCount,\r\n                modelIndex: modelIndex\r\n            });\r\n        }\r\n\r\n        for( i = 0; i < modelChainCount; ++i ){\r\n\r\n            var chainGroupCount = mmtfData.groupsPerChain[ chainIndex ];\r\n            if( onChain ){\r\n                var chainId = fromCharCode(\r\n                    mmtfData.chainIdList.subarray( chainIndex * 4, chainIndex * 4 + 4 )\r\n                );\r\n                var chainName = null;\r\n                if( chainNameList ){\r\n                    chainName = fromCharCode(\r\n                        chainNameList.subarray( chainIndex * 4, chainIndex * 4 + 4 )\r\n                    );\r\n                }\r\n                onChain({\r\n                    groupCount: chainGroupCount,\r\n                    chainIndex: chainIndex,\r\n                    modelIndex: modelIndex,\r\n                    chainId: chainId,\r\n                    chainName: chainName\r\n                });\r\n            }\r\n\r\n            for( j = 0; j < chainGroupCount; ++j ){\r\n\r\n                var groupData = mmtfData.groupList[ mmtfData.groupTypeList[ groupIndex ] ];\r\n                var groupAtomCount = groupData.atomNameList.length;\r\n                if( onGroup ){\r\n                    var secStruct = null;\r\n                    if( secStructList ){\r\n                        secStruct = secStructList[ groupIndex ];\r\n                    }\r\n                    var insCode = null;\r\n                    if( mmtfData.insCodeList ){\r\n                        insCode = String.fromCharCode( insCodeList[ groupIndex ] );\r\n                    }\r\n                    var sequenceIndex = null;\r\n                    if( sequenceIndexList ){\r\n                        sequenceIndex = sequenceIndexList[ groupIndex ];\r\n                    }\r\n                    onGroup({\r\n                        atomCount: groupAtomCount,\r\n                        groupIndex: groupIndex,\r\n                        chainIndex: chainIndex,\r\n                        modelIndex: modelIndex,\r\n                        groupId: mmtfData.groupIdList[ groupIndex ],\r\n                        groupType: mmtfData.groupTypeList[ groupIndex ],\r\n                        groupName: groupData.groupName,\r\n                        singleLetterCode: groupData.singleLetterCode,\r\n                        chemCompType: groupData.chemCompType,\r\n                        secStruct: secStruct,\r\n                        insCode: insCode,\r\n                        sequenceIndex: sequenceIndex\r\n                    });\r\n                }\r\n\r\n                for( k = 0; k < groupAtomCount; ++k ){\r\n\r\n                    if( onAtom ){\r\n                        var atomId = null;\r\n                        if( atomIdList ){\r\n                            atomId = atomIdList[ atomIndex ];\r\n                        }\r\n                        var bFactor = null;\r\n                        if( bFactorList ){\r\n                            bFactor = bFactorList[ atomIndex ];\r\n                        }\r\n                        var altLoc = null;\r\n                        if( altLocList ){\r\n                            altLoc = String.fromCharCode( altLocList[ atomIndex ] );\r\n                        }\r\n                        var occupancy = null;\r\n                        if( occupancyList ){\r\n                            occupancy = occupancyList[ atomIndex ];\r\n                        }\r\n                        onAtom({\r\n                            atomIndex: atomIndex,\r\n                            groupIndex: groupIndex,\r\n                            chainIndex: chainIndex,\r\n                            modelIndex: modelIndex,\r\n                            atomId: atomId,\r\n                            element: groupData.elementList[ k ],\r\n                            atomName: groupData.atomNameList[ k ],\r\n                            formalCharge: groupData.formalChargeList[ k ],\r\n                            xCoord: mmtfData.xCoordList[ atomIndex ],\r\n                            yCoord: mmtfData.yCoordList[ atomIndex ],\r\n                            zCoord: mmtfData.zCoordList[ atomIndex ],\r\n                            bFactor: bFactor,\r\n                            altLoc: altLoc,\r\n                            occupancy: occupancy\r\n                        });\r\n                    }\r\n\r\n                    atomIndex += 1;\r\n                }\r\n\r\n                if( onBond ){\r\n                    // intra group bonds\r\n                    var groupBondAtomList = groupData.bondAtomList;\r\n                    for( k = 0, kl = groupData.bondOrderList.length; k < kl; ++k ){\r\n                        onBond({\r\n                            atomIndex1: atomIndex - groupAtomCount + groupBondAtomList[ k * 2 ],\r\n                            atomIndex2: atomIndex - groupAtomCount + groupBondAtomList[ k * 2 + 1 ],\r\n                            bondOrder: groupData.bondOrderList[ k ]\r\n                        });\r\n                    }\r\n                }\r\n\r\n                groupIndex += 1;\r\n            }\r\n\r\n            chainIndex += 1;\r\n        }\r\n\r\n        modelFirstAtomIndex = modelLastAtomIndex + 1;\r\n        modelLastAtomIndex = atomIndex - 1;  // subtract one as it already has been incremented\r\n\r\n        if( onBond ){\r\n            // inter group bonds\r\n            if( bondAtomList ){\r\n                for( k = 0, kl = bondAtomList.length; k < kl; k += 2 ){\r\n                    var atomIndex1 = bondAtomList[ k ];\r\n                    var atomIndex2 = bondAtomList[ k + 1 ];\r\n                    if( ( atomIndex1 >= modelFirstAtomIndex && atomIndex1 <= modelLastAtomIndex ) ||\r\n                        ( atomIndex2 >= modelFirstAtomIndex && atomIndex2 <= modelLastAtomIndex )\r\n                    ){\r\n                        onBond({\r\n                            atomIndex1: atomIndex1,\r\n                            atomIndex2: atomIndex2,\r\n                            bondOrder: bondOrderList ? bondOrderList[ k / 2 ] : null\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        modelIndex += 1;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Version name\r\n * @static\r\n * @type {String}\r\n */\r\nvar version = \"v1.1.0dev\";\r\n\r\n/**\r\n * Version name\r\n * @private\r\n * @type {String}\r\n */\r\nvar baseUrl = \"//mmtf.rcsb.org/v1.0/\";\r\n\r\n/**\r\n * URL of the RCSB webservice to obtain MMTF files\r\n * @static\r\n * @type {String}\r\n */\r\nvar fetchUrl = baseUrl + \"full/\";\r\n\r\n/**\r\n * URL of the RCSB webservice to obtain reduced MMTF files\r\n * @static\r\n * @type {String}\r\n */\r\nvar fetchReducedUrl = baseUrl + \"reduced/\";\r\n\r\n/**\r\n * Encode MMTF fields\r\n * @static\r\n * @param  {module:MmtfDecode.MmtfData} mmtfData - mmtf data\r\n * @return {Uint8Array} encoded MMTF fields\r\n */\r\nfunction encode( mmtfData ){\r\n    return encodeMsgpack( encodeMmtf( mmtfData ) );\r\n}\r\n\r\n/**\r\n * Decode MMTF fields\r\n * @static\r\n * @example\r\n * // bin is Uint8Array containing the mmtf msgpack\r\n * var mmtfData = MMTF.decode( bin );\r\n * console.log( mmtfData.numAtoms );\r\n *\r\n * @param  {Uint8Array|ArrayBuffer|module:MmtfDecode.EncodedMmtfData} binOrDict - binary MessagePack or encoded MMTF data\r\n * @param  {Object} [params] - decoding parameters\r\n * @param {String[]} params.ignoreFields - names of optional fields not to decode\r\n * @return {module:MmtfDecode.MmtfData} mmtfData\r\n */\r\nfunction decode( binOrDict, params ){\r\n\t// make sure binOrDict is not a plain Arraybuffer\r\n    if( binOrDict instanceof ArrayBuffer ){\r\n        binOrDict = new Uint8Array( binOrDict );\r\n    }\r\n\r\n    var inputDict;\r\n    if( binOrDict instanceof Uint8Array ){\r\n        // get dict from msgpack\r\n        inputDict = decodeMsgpack( binOrDict );\r\n    }else{\r\n        // already a dict\r\n        inputDict = binOrDict;\r\n    }\r\n\r\n    return decodeMmtf( inputDict, params );\r\n}\r\n\r\n/**\r\n * @callback module:MMTF.onLoad\r\n * @param {module:MmtfDecode.MmtfData} mmtfData - decoded mmtf data object\r\n */\r\n\r\n/**\r\n * helper method to fetch binary files from an URL\r\n * @private\r\n * @param  {String} pdbid - PDB ID to fetch\r\n * @param  {String} baseUrl - URL to fetch from\r\n * @param  {module:MMTF.onLoad} onLoad - callback( mmtfData )\r\n * @param  {Function} onError - callback( error )\r\n * @return {undefined}\r\n */\r\nfunction _fetch( pdbid, baseUrl, onLoad, onError ){\r\n    var xhr = new XMLHttpRequest();\r\n    function _onLoad(){\r\n        try{\r\n            var mmtfData = decode( xhr.response );\r\n            onLoad( mmtfData );\r\n        }catch( error ){\r\n            onError( error );\r\n        }\r\n    }\r\n    xhr.addEventListener( \"load\", _onLoad, true );\r\n    xhr.addEventListener( \"error\", onError, true );\r\n    xhr.responseType = \"arraybuffer\";\r\n    xhr.open( \"GET\", baseUrl + pdbid.toUpperCase() );\r\n    xhr.send();\r\n}\r\n\r\n/**\r\n * Fetch MMTF file from RCSB webservice which contains\r\n * @static\r\n * @example\r\n * MMTF.fetch(\r\n *     \"3PQR\",\r\n *     // onLoad callback\r\n *     function( mmtfData ){ console.log( mmtfData ) },\r\n *     // onError callback\r\n *     function( error ){ console.error( error ) }\r\n * );\r\n *\r\n * @param  {String} pdbid - PDB ID to fetch\r\n * @param  {module:MMTF.onLoad} onLoad - callback( mmtfData )\r\n * @param  {Function} onError - callback( error )\r\n * @return {undefined}\r\n */\r\nfunction fetch( pdbid, onLoad, onError ){\r\n    _fetch( pdbid, fetchUrl, onLoad, onError );\r\n}\r\n\r\n/**\r\n * Fetch reduced MMTF file from RCSB webservice which contains\r\n * protein C-alpha, nucleotide phosphate and ligand atoms\r\n * @static\r\n * @example\r\n * MMTF.fetchReduced(\r\n *     \"3PQR\",\r\n *     // onLoad callback\r\n *     function( mmtfData ){ console.log( mmtfData ) },\r\n *     // onError callback\r\n *     function( error ){ console.error( error ) }\r\n * );\r\n *\r\n * @param  {String} pdbid - PDB ID to fetch\r\n * @param  {module:MMTF.onLoad} onLoad - callback( mmtfData )\r\n * @param  {Function} onError - callback( error )\r\n * @return {undefined}\r\n */\r\nfunction fetchReduced( pdbid, onLoad, onError ){\r\n    _fetch( pdbid, fetchReducedUrl, onLoad, onError );\r\n}\r\n\r\nexport { encode, decode, traverseMmtf as traverse, fetch, fetchReduced, version, fetchUrl, fetchReducedUrl, encodeMsgpack, encodeMmtf, decodeMsgpack, decodeMmtf };","/**\r\n * @file Mmtf Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport StructureParser from './structure-parser';\r\nimport { buildUnitcellAssembly, calculateBondsBetween, calculateBondsWithin } from '../structure/structure-utils';\r\nimport { ChemCompHetero } from '../structure/structure-constants';\r\nimport Entity from '../structure/entity';\r\nimport Unitcell from '../symmetry/unitcell';\r\nimport Assembly from '../symmetry/assembly';\r\nimport { decodeMsgpack, decodeMmtf } from '../../lib/mmtf.es6';\r\nconst SstrucMap = {\r\n    '0': 'i'.charCodeAt(0),\r\n    '1': 's'.charCodeAt(0),\r\n    '2': 'h'.charCodeAt(0),\r\n    '3': 'e'.charCodeAt(0),\r\n    '4': 'g'.charCodeAt(0),\r\n    '5': 'b'.charCodeAt(0),\r\n    '6': 't'.charCodeAt(0),\r\n    '7': 'l'.charCodeAt(0),\r\n    '-1': ''.charCodeAt(0) // NA\r\n};\r\nclass MmtfParser extends StructureParser {\r\n    get type() { return 'mmtf'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        // https://github.com/rcsb/mmtf\r\n        if (Debug)\r\n            Log.time('MmtfParser._parse ' + this.name);\r\n        let i, il, j, jl, groupData;\r\n        const s = this.structure;\r\n        const sd = decodeMmtf(decodeMsgpack(this.streamer.data));\r\n        // structure header\r\n        const headerFields = [\r\n            'depositionDate', 'releaseDate', 'resolution',\r\n            'rFree', 'rWork', 'experimentalMethods'\r\n        ];\r\n        headerFields.forEach(function (name) {\r\n            if (sd[name] !== undefined) {\r\n                s.header[name] = sd[name];\r\n            }\r\n        });\r\n        let numBonds, numAtoms, numGroups, numChains, numModels;\r\n        let chainsPerModel;\r\n        s.id = sd.structureId;\r\n        s.title = sd.title;\r\n        s.atomStore.addField('formalCharge', 1, 'int8');\r\n        if (this.firstModelOnly || this.asTrajectory) {\r\n            numModels = 1;\r\n            numChains = sd.chainsPerModel[0];\r\n            numGroups = 0;\r\n            for (i = 0, il = numChains; i < il; ++i) {\r\n                numGroups += sd.groupsPerChain[i];\r\n            }\r\n            numAtoms = 0;\r\n            for (i = 0, il = numGroups; i < il; ++i) {\r\n                groupData = sd.groupList[sd.groupTypeList[i]];\r\n                numAtoms += groupData.atomNameList.length;\r\n            }\r\n            numBonds = sd.numBonds;\r\n            chainsPerModel = [numChains];\r\n        }\r\n        else {\r\n            numBonds = sd.numBonds;\r\n            numAtoms = sd.numAtoms;\r\n            numGroups = sd.numGroups;\r\n            numChains = sd.numChains;\r\n            numModels = sd.numModels;\r\n            chainsPerModel = sd.chainsPerModel;\r\n        }\r\n        numBonds += numGroups; // add numGroups to have space for polymer bonds\r\n        //\r\n        if (this.asTrajectory) {\r\n            for (i = 0, il = sd.numModels; i < il; ++i) {\r\n                const frame = new Float32Array(numAtoms * 3);\r\n                const frameAtomOffset = numAtoms * i;\r\n                for (j = 0; j < numAtoms; ++j) {\r\n                    const j3 = j * 3;\r\n                    const offset = j + frameAtomOffset;\r\n                    frame[j3] = sd.xCoordList[offset];\r\n                    frame[j3 + 1] = sd.yCoordList[offset];\r\n                    frame[j3 + 2] = sd.zCoordList[offset];\r\n                }\r\n                s.frames.push(frame);\r\n            }\r\n        }\r\n        // bondStore\r\n        const bAtomIndex1 = new Uint32Array(numBonds);\r\n        const bAtomIndex2 = new Uint32Array(numBonds);\r\n        const bBondOrder = new Uint8Array(numBonds);\r\n        const aGroupIndex = new Uint32Array(numAtoms);\r\n        const aFormalCharge = new Int8Array(numAtoms);\r\n        const gChainIndex = new Uint32Array(numGroups);\r\n        const gAtomOffset = new Uint32Array(numGroups);\r\n        const gAtomCount = new Uint16Array(numGroups);\r\n        const cModelIndex = new Uint16Array(numChains);\r\n        const cGroupOffset = new Uint32Array(numChains);\r\n        const cGroupCount = new Uint32Array(numChains);\r\n        const mChainOffset = new Uint32Array(numModels);\r\n        const mChainCount = new Uint32Array(numModels);\r\n        // set-up model-chain relations\r\n        let chainOffset = 0;\r\n        for (i = 0, il = numModels; i < il; ++i) {\r\n            const modelChainCount = chainsPerModel[i];\r\n            mChainOffset[i] = chainOffset;\r\n            mChainCount[i] = modelChainCount;\r\n            for (j = 0; j < modelChainCount; ++j) {\r\n                cModelIndex[j + chainOffset] = i;\r\n            }\r\n            chainOffset += modelChainCount;\r\n        }\r\n        // set-up chain-residue relations\r\n        const groupsPerChain = sd.groupsPerChain;\r\n        let groupOffset = 0;\r\n        for (i = 0, il = numChains; i < il; ++i) {\r\n            const chainGroupCount = groupsPerChain[i];\r\n            cGroupOffset[i] = groupOffset;\r\n            cGroupCount[i] = chainGroupCount;\r\n            for (j = 0; j < chainGroupCount; ++j) {\r\n                gChainIndex[j + groupOffset] = i;\r\n            }\r\n            groupOffset += chainGroupCount;\r\n        }\r\n        /// ///\r\n        // get data from group map\r\n        let atomOffset = 0;\r\n        let bondOffset = 0;\r\n        for (i = 0, il = numGroups; i < il; ++i) {\r\n            groupData = sd.groupList[sd.groupTypeList[i]];\r\n            const groupAtomCount = groupData.atomNameList.length;\r\n            const groupFormalChargeList = groupData.formalChargeList;\r\n            const groupBondAtomList = groupData.bondAtomList;\r\n            const groupBondOrderList = groupData.bondOrderList;\r\n            for (j = 0, jl = groupBondOrderList.length; j < jl; ++j) {\r\n                bAtomIndex1[bondOffset] = atomOffset + groupBondAtomList[j * 2];\r\n                bAtomIndex2[bondOffset] = atomOffset + groupBondAtomList[j * 2 + 1];\r\n                bBondOrder[bondOffset] = groupBondOrderList[j];\r\n                bondOffset += 1;\r\n            }\r\n            //\r\n            gAtomOffset[i] = atomOffset;\r\n            gAtomCount[i] = groupAtomCount;\r\n            for (j = 0; j < groupAtomCount; ++j) {\r\n                aGroupIndex[atomOffset] = i;\r\n                aFormalCharge[atomOffset] = groupFormalChargeList[j];\r\n                atomOffset += 1;\r\n            }\r\n        }\r\n        // extra bonds\r\n        const bondAtomList = sd.bondAtomList;\r\n        if (bondAtomList) {\r\n            if (sd.bondOrderList) {\r\n                bBondOrder.set(sd.bondOrderList, bondOffset);\r\n            }\r\n            for (i = 0, il = bondAtomList.length; i < il; i += 2) {\r\n                const atomIndex1 = bondAtomList[i];\r\n                const atomIndex2 = bondAtomList[i + 1];\r\n                if (atomIndex1 < numAtoms && atomIndex2 < numAtoms) {\r\n                    bAtomIndex1[bondOffset] = atomIndex1;\r\n                    bAtomIndex2[bondOffset] = atomIndex2;\r\n                    bondOffset += 1;\r\n                }\r\n            }\r\n        }\r\n        //\r\n        s.bondStore.length = bBondOrder.length;\r\n        s.bondStore.count = bondOffset;\r\n        s.bondStore.atomIndex1 = bAtomIndex1;\r\n        s.bondStore.atomIndex2 = bAtomIndex2;\r\n        s.bondStore.bondOrder = bBondOrder;\r\n        s.atomStore.length = numAtoms;\r\n        s.atomStore.count = numAtoms;\r\n        s.atomStore.residueIndex = aGroupIndex;\r\n        s.atomStore.atomTypeId = new Uint16Array(numAtoms);\r\n        s.atomStore.x = sd.xCoordList.subarray(0, numAtoms);\r\n        s.atomStore.y = sd.yCoordList.subarray(0, numAtoms);\r\n        s.atomStore.z = sd.zCoordList.subarray(0, numAtoms);\r\n        s.atomStore.serial = sd.atomIdList.subarray(0, numAtoms);\r\n        s.atomStore.bfactor = sd.bFactorList.subarray(0, numAtoms);\r\n        s.atomStore.altloc = sd.altLocList.subarray(0, numAtoms);\r\n        s.atomStore.occupancy = sd.occupancyList.subarray(0, numAtoms);\r\n        s.atomStore.formalCharge = aFormalCharge;\r\n        s.residueStore.length = numGroups;\r\n        s.residueStore.count = numGroups;\r\n        s.residueStore.chainIndex = gChainIndex;\r\n        s.residueStore.residueTypeId = sd.groupTypeList;\r\n        s.residueStore.atomOffset = gAtomOffset;\r\n        s.residueStore.atomCount = gAtomCount;\r\n        s.residueStore.resno = sd.groupIdList.subarray(0, numGroups);\r\n        s.residueStore.sstruc = sd.secStructList.subarray(0, numGroups);\r\n        s.residueStore.inscode = sd.insCodeList.subarray(0, numGroups);\r\n        s.chainStore.length = numChains;\r\n        s.chainStore.count = numChains;\r\n        s.chainStore.entityIndex = new Uint16Array(numChains);\r\n        s.chainStore.modelIndex = cModelIndex;\r\n        s.chainStore.residueOffset = cGroupOffset;\r\n        s.chainStore.residueCount = cGroupCount;\r\n        s.chainStore.chainname = sd.chainNameList.subarray(0, numChains * 4);\r\n        s.chainStore.chainid = sd.chainIdList.subarray(0, numChains * 4);\r\n        s.modelStore.length = numModels;\r\n        s.modelStore.count = numModels;\r\n        s.modelStore.chainOffset = mChainOffset;\r\n        s.modelStore.chainCount = mChainCount;\r\n        //\r\n        let groupTypeDict = {};\r\n        for (i = 0, il = sd.groupList.length; i < il; ++i) {\r\n            const groupType = sd.groupList[i];\r\n            const atomTypeIdList = [];\r\n            for (j = 0, jl = groupType.atomNameList.length; j < jl; ++j) {\r\n                const element = groupType.elementList[j].toUpperCase();\r\n                const atomname = groupType.atomNameList[j];\r\n                atomTypeIdList.push(s.atomMap.add(atomname, element));\r\n            }\r\n            const chemCompType = groupType.chemCompType.toUpperCase();\r\n            const hetFlag = ChemCompHetero.includes(chemCompType);\r\n            const numGroupBonds = groupType.bondOrderList.length;\r\n            const atomIndices1 = new Array(numGroupBonds);\r\n            const atomIndices2 = new Array(numGroupBonds);\r\n            for (j = 0; j < numGroupBonds; ++j) {\r\n                atomIndices1[j] = groupType.bondAtomList[j * 2];\r\n                atomIndices2[j] = groupType.bondAtomList[j * 2 + 1];\r\n            }\r\n            const bonds = {\r\n                atomIndices1: atomIndices1,\r\n                atomIndices2: atomIndices2,\r\n                bondOrders: groupType.bondOrderList\r\n            };\r\n            groupTypeDict[i] = s.residueMap.add(groupType.groupName, atomTypeIdList, hetFlag, chemCompType, bonds);\r\n        }\r\n        for (i = 0, il = numGroups; i < il; ++i) {\r\n            s.residueStore.residueTypeId[i] = groupTypeDict[s.residueStore.residueTypeId[i]];\r\n        }\r\n        for (i = 0, il = s.atomStore.count; i < il; ++i) {\r\n            const residueIndex = s.atomStore.residueIndex[i];\r\n            const residueType = s.residueMap.list[s.residueStore.residueTypeId[residueIndex]];\r\n            const resAtomOffset = s.residueStore.atomOffset[residueIndex];\r\n            s.atomStore.atomTypeId[i] = residueType.atomTypeIdList[i - resAtomOffset];\r\n        }\r\n        if (sd.secStructList) {\r\n            const secStructLength = sd.secStructList.length;\r\n            for (i = 0, il = s.residueStore.count; i < il; ++i) {\r\n                // with ( i % secStructLength ) secStruct entries are reused\r\n                const sstruc = SstrucMap[s.residueStore.sstruc[i % secStructLength]];\r\n                if (sstruc !== undefined)\r\n                    s.residueStore.sstruc[i] = sstruc;\r\n            }\r\n        }\r\n        //\r\n        if (sd.entityList) {\r\n            sd.entityList.forEach(function (e, i) {\r\n                s.entityList[i] = new Entity(s, i, e.description, e.type, e.chainIndexList);\r\n            });\r\n        }\r\n        if (sd.bioAssemblyList) {\r\n            sd.bioAssemblyList.forEach(function (_assembly, k) {\r\n                const id = k + 1;\r\n                const assembly = new Assembly('' + id);\r\n                s.biomolDict['BU' + id] = assembly;\r\n                let chainToPart = {};\r\n                _assembly.transformList.forEach(function (_transform) {\r\n                    const matrix = new Matrix4().fromArray(_transform.matrix).transpose();\r\n                    const chainList = _transform.chainIndexList.map(function (chainIndex) {\r\n                        let chainname = '';\r\n                        for (let k = 0; k < 4; ++k) {\r\n                            const code = sd.chainNameList[chainIndex * 4 + k];\r\n                            if (code) {\r\n                                chainname += String.fromCharCode(code);\r\n                            }\r\n                            else {\r\n                                break;\r\n                            }\r\n                        }\r\n                        return chainname;\r\n                    });\r\n                    const part = chainToPart[chainList.toString()];\r\n                    if (part) {\r\n                        part.matrixList.push(matrix);\r\n                    }\r\n                    else {\r\n                        chainToPart[chainList.toString()] = assembly.addPart([matrix], chainList);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        if (sd.ncsOperatorList) {\r\n            const ncsName = 'NCS';\r\n            const ncsAssembly = new Assembly(ncsName);\r\n            const ncsPart = ncsAssembly.addPart();\r\n            sd.ncsOperatorList.forEach(function (_operator) {\r\n                const matrix = new Matrix4().fromArray(_operator).transpose();\r\n                ncsPart.matrixList.push(matrix);\r\n            });\r\n            if (ncsPart.matrixList.length > 0) {\r\n                s.biomolDict[ncsName] = ncsAssembly;\r\n            }\r\n        }\r\n        const uc = sd.unitCell;\r\n        if (uc && Array.isArray(uc) && uc[0]) {\r\n            s.unitcell = new Unitcell({\r\n                a: uc[0],\r\n                b: uc[1],\r\n                c: uc[2],\r\n                alpha: uc[3],\r\n                beta: uc[4],\r\n                gamma: uc[5],\r\n                spacegroup: sd.spaceGroup\r\n            });\r\n        }\r\n        else {\r\n            s.unitcell = undefined;\r\n        }\r\n        // calculate backbone bonds\r\n        calculateBondsBetween(s, true);\r\n        // calculate rung bonds\r\n        calculateBondsWithin(s, true);\r\n        s.finalizeAtoms();\r\n        s.finalizeBonds();\r\n        buildUnitcellAssembly(s);\r\n        if (Debug)\r\n            Log.timeEnd('MmtfParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('mmtf', MmtfParser);\r\nexport default MmtfParser;\r\n//# sourceMappingURL=mmtf-parser.js.map","/**\r\n * @file Mol2 Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { assignResidueTypeBonds, calculateChainnames, calculateSecondaryStructure, calculateBondsBetween, calculateBondsWithin } from '../structure/structure-utils';\r\nimport StructureParser from './structure-parser';\r\nconst reWhitespace = /\\s+/;\r\nconst bondTypes = {\r\n    '1': 1,\r\n    '2': 2,\r\n    '3': 3,\r\n    'am': 1,\r\n    'ar': 1,\r\n    'du': 1,\r\n    'un': 1,\r\n    'nc': 0 // not connected\r\n};\r\nclass Mol2Parser extends StructureParser {\r\n    get type() { return 'mol2'; }\r\n    _parse() {\r\n        // http://paulbourke.net/dataformats/mol2/\r\n        if (Debug)\r\n            Log.time('Mol2Parser._parse ' + this.name);\r\n        const s = this.structure;\r\n        const sb = this.structureBuilder;\r\n        const firstModelOnly = this.firstModelOnly;\r\n        const asTrajectory = this.asTrajectory;\r\n        const frames = s.frames;\r\n        let doFrames = false;\r\n        let currentFrame, currentCoord;\r\n        const atomMap = s.atomMap;\r\n        const atomStore = s.atomStore;\r\n        atomStore.resize(Math.round(this.streamer.data.length / 60));\r\n        atomStore.addField('partialCharge', 1, 'float32');\r\n        let idx = 0;\r\n        let moleculeLineNo = 0;\r\n        let modelAtomIdxStart = 0;\r\n        let modelIdx = -1;\r\n        let numAtoms = 0;\r\n        let currentRecordType = 0;\r\n        let moleculeRecordType = 1;\r\n        let atomRecordType = 2;\r\n        let bondRecordType = 3;\r\n        const ap1 = s.getAtomProxy();\r\n        const ap2 = s.getAtomProxy();\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                const line = lines[i].trim();\r\n                if (line === '' || line[0] === '#')\r\n                    continue;\r\n                if (line[0] === '@') {\r\n                    if (line === '@<TRIPOS>MOLECULE') {\r\n                        currentRecordType = moleculeRecordType;\r\n                        moleculeLineNo = 0;\r\n                        ++modelIdx;\r\n                    }\r\n                    else if (line === '@<TRIPOS>ATOM') {\r\n                        currentRecordType = atomRecordType;\r\n                        modelAtomIdxStart = atomStore.count;\r\n                        if (asTrajectory) {\r\n                            currentCoord = 0;\r\n                            currentFrame = new Float32Array(numAtoms * 3);\r\n                            frames.push(currentFrame);\r\n                            if (modelIdx > 0)\r\n                                doFrames = true;\r\n                        }\r\n                    }\r\n                    else if (line === '@<TRIPOS>BOND') {\r\n                        currentRecordType = bondRecordType;\r\n                    }\r\n                    else {\r\n                        currentRecordType = 0;\r\n                    }\r\n                }\r\n                else if (currentRecordType === moleculeRecordType) {\r\n                    if (moleculeLineNo === 0) {\r\n                        s.title = line;\r\n                        s.id = line;\r\n                    }\r\n                    else if (moleculeLineNo === 1) {\r\n                        const ls = line.split(reWhitespace);\r\n                        numAtoms = parseInt(ls[0]);\r\n                        // num_atoms [num_bonds [num_subst [num_feat [num_sets]]]]\r\n                    }\r\n                    else if (moleculeLineNo === 2) {\r\n                        // const molType = line;\r\n                        // SMALL, BIOPOLYMER, PROTEIN, NUCLEIC_ACID, SACCHARIDE\r\n                    }\r\n                    else if (moleculeLineNo === 3) {\r\n                        // const chargeType = line;\r\n                        // NO_CHARGES, DEL_RE, GASTEIGER, GAST_HUCK, HUCKEL,\r\n                        // PULLMAN, GAUSS80_CHARGES, AMPAC_CHARGES,\r\n                        // MULLIKEN_CHARGES, DICT_ CHARGES, MMFF94_CHARGES,\r\n                        // USER_CHARGES\r\n                    }\r\n                    else if (moleculeLineNo === 4) {\r\n                        // const statusBits = line;\r\n                    }\r\n                    else if (moleculeLineNo === 5) {\r\n                        // const molComment = line;\r\n                    }\r\n                    ++moleculeLineNo;\r\n                }\r\n                else if (currentRecordType === atomRecordType) {\r\n                    const ls = line.split(reWhitespace);\r\n                    if (firstModelOnly && modelIdx > 0)\r\n                        continue;\r\n                    const x = parseFloat(ls[2]);\r\n                    const y = parseFloat(ls[3]);\r\n                    const z = parseFloat(ls[4]);\r\n                    if (asTrajectory) {\r\n                        const j = currentCoord * 3;\r\n                        currentFrame[j + 0] = x;\r\n                        currentFrame[j + 1] = y;\r\n                        currentFrame[j + 2] = z;\r\n                        currentCoord += 1;\r\n                        if (doFrames)\r\n                            continue;\r\n                    }\r\n                    const serial = ls[0];\r\n                    const atomname = ls[1];\r\n                    const element = ls[5].split('.')[0];\r\n                    const resno = ls[6] ? parseInt(ls[6]) : 1;\r\n                    const resname = ls[7] ? ls[7] : '';\r\n                    const partialCharge = ls[8] ? parseFloat(ls[8]) : 0.0;\r\n                    atomStore.growIfFull();\r\n                    atomStore.atomTypeId[idx] = atomMap.add(atomname, element);\r\n                    atomStore.x[idx] = x;\r\n                    atomStore.y[idx] = y;\r\n                    atomStore.z[idx] = z;\r\n                    atomStore.serial[idx] = serial;\r\n                    atomStore.partialCharge[idx] = partialCharge;\r\n                    sb.addAtom(modelIdx, '', '', resname, resno, 1);\r\n                    idx += 1;\r\n                }\r\n                else if (currentRecordType === bondRecordType) {\r\n                    if (firstModelOnly && modelIdx > 0)\r\n                        continue;\r\n                    if (asTrajectory && modelIdx > 0)\r\n                        continue;\r\n                    const ls = line.split(reWhitespace);\r\n                    // ls[ 0 ] is bond id\r\n                    ap1.index = parseInt(ls[1]) - 1 + modelAtomIdxStart;\r\n                    ap2.index = parseInt(ls[2]) - 1 + modelAtomIdxStart;\r\n                    const order = bondTypes[ls[3]];\r\n                    s.bondStore.addBond(ap1, ap2, order);\r\n                }\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        sb.finalize();\r\n        s.finalizeAtoms();\r\n        calculateChainnames(s);\r\n        calculateBondsWithin(s, true);\r\n        calculateBondsBetween(s, true);\r\n        s.finalizeBonds();\r\n        assignResidueTypeBonds(s);\r\n        calculateSecondaryStructure(s);\r\n        if (Debug)\r\n            Log.timeEnd('Mol2Parser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('mol2', Mol2Parser);\r\nexport default Mol2Parser;\r\n//# sourceMappingURL=mol2-parser.js.map","/**\r\n * @file Pdbqt Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ParserRegistry } from '../globals';\r\nimport PdbParser from './pdb-parser';\r\n// autodock variant of PDB format with\r\n// - atom partial charges (empty column in pdb format)\r\n// - atom types (bfactor column in pdb format)\r\n// http://autodock.scripps.edu/faqs-help/faq/what-is-the-format-of-a-pdbqt-file\r\nclass PdbqtParser extends PdbParser {\r\n    get type() { return 'pdbqt'; }\r\n}\r\nParserRegistry.add('pdbqt', PdbqtParser);\r\nexport default PdbqtParser;\r\n//# sourceMappingURL=pdbqt-parser.js.map","/**\r\n * @file Pqr Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ParserRegistry } from '../globals';\r\nimport PdbParser from './pdb-parser';\r\n// http://www.poissonboltzmann.org/docs/file-format-info/\r\nclass PqrParser extends PdbParser {\r\n    get type() { return 'pqr'; }\r\n}\r\nParserRegistry.add('pqr', PqrParser);\r\nexport default PqrParser;\r\n//# sourceMappingURL=pqr-parser.js.map","/**\r\n * @file Sdf Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { assignResidueTypeBonds } from '../structure/structure-utils';\r\nimport StructureParser from './structure-parser';\r\nconst reItem = /> +<(.+)>/;\r\nclass SdfParser extends StructureParser {\r\n    get type() { return 'sdf'; }\r\n    _parse() {\r\n        // https://en.wikipedia.org/wiki/Chemical_table_file#SDF\r\n        // http://download.accelrys.com/freeware/ctfile-formats/ctfile-formats.zip\r\n        if (Debug)\r\n            Log.time('SdfParser._parse ' + this.name);\r\n        const s = this.structure;\r\n        const sb = this.structureBuilder;\r\n        const firstModelOnly = this.firstModelOnly;\r\n        const asTrajectory = this.asTrajectory;\r\n        const headerLines = this.streamer.peekLines(2);\r\n        s.id = headerLines[0].trim();\r\n        s.title = headerLines[1].trim();\r\n        const frames = s.frames;\r\n        let doFrames = false;\r\n        let currentFrame, currentCoord;\r\n        const atomMap = s.atomMap;\r\n        const atomStore = s.atomStore;\r\n        atomStore.resize(Math.round(this.streamer.data.length / 50));\r\n        atomStore.addField('formalCharge', 1, 'int8');\r\n        const ap1 = s.getAtomProxy();\r\n        const ap2 = s.getAtomProxy();\r\n        let idx = 0;\r\n        let lineNo = 0;\r\n        let modelIdx = 0;\r\n        let modelAtomIdxStart = 0;\r\n        const sdfData = [];\r\n        let currentItem = false;\r\n        let currentData = {};\r\n        let mItem;\r\n        s.extraData.sdf = sdfData;\r\n        let atomCount, bondCount, atomStart, atomEnd, bondStart, bondEnd;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                const line = lines[i];\r\n                if (line.substr(0, 4) === '$$$$') {\r\n                    lineNo = -1;\r\n                    ++modelIdx;\r\n                    modelAtomIdxStart = atomStore.count;\r\n                    sdfData.push(currentData);\r\n                    currentData = {};\r\n                    currentItem = false;\r\n                }\r\n                else if (lineNo === 3) {\r\n                    atomCount = parseInt(line.substr(0, 3));\r\n                    bondCount = parseInt(line.substr(3, 3));\r\n                    atomStart = 4;\r\n                    atomEnd = atomStart + atomCount;\r\n                    bondStart = atomEnd;\r\n                    bondEnd = bondStart + bondCount;\r\n                    if (asTrajectory) {\r\n                        currentCoord = 0;\r\n                        currentFrame = new Float32Array(atomCount * 3);\r\n                        frames.push(currentFrame);\r\n                        if (modelIdx > 0)\r\n                            doFrames = true;\r\n                    }\r\n                }\r\n                else if (lineNo >= atomStart && lineNo < atomEnd) {\r\n                    if (firstModelOnly && modelIdx > 0)\r\n                        continue;\r\n                    const x = parseFloat(line.substr(0, 10));\r\n                    const y = parseFloat(line.substr(10, 10));\r\n                    const z = parseFloat(line.substr(20, 10));\r\n                    if (asTrajectory) {\r\n                        const j = currentCoord * 3;\r\n                        currentFrame[j + 0] = x;\r\n                        currentFrame[j + 1] = y;\r\n                        currentFrame[j + 2] = z;\r\n                        currentCoord += 1;\r\n                        if (doFrames)\r\n                            continue;\r\n                    }\r\n                    const element = line.substr(31, 3).trim();\r\n                    const atomname = element + (idx + 1);\r\n                    atomStore.growIfFull();\r\n                    atomStore.atomTypeId[idx] = atomMap.add(atomname, element);\r\n                    atomStore.x[idx] = x;\r\n                    atomStore.y[idx] = y;\r\n                    atomStore.z[idx] = z;\r\n                    atomStore.serial[idx] = idx;\r\n                    atomStore.formalCharge[idx] = 0;\r\n                    sb.addAtom(modelIdx, '', '', 'HET', 1, 1);\r\n                    idx += 1;\r\n                }\r\n                else if (lineNo >= bondStart && lineNo < bondEnd) {\r\n                    if (firstModelOnly && modelIdx > 0)\r\n                        continue;\r\n                    if (asTrajectory && modelIdx > 0)\r\n                        continue;\r\n                    ap1.index = parseInt(line.substr(0, 3)) - 1 + modelAtomIdxStart;\r\n                    ap2.index = parseInt(line.substr(3, 3)) - 1 + modelAtomIdxStart;\r\n                    const order = parseInt(line.substr(6, 3));\r\n                    s.bondStore.addBond(ap1, ap2, order);\r\n                }\r\n                else if (line.match(/M {2}CHG/)) {\r\n                    const chargeCount = parseInt(line.substr(6, 3));\r\n                    for (let ci = 0, coffset = 10; ci < chargeCount; ++ci, coffset += 8) {\r\n                        const aToken = parseInt(line.substr(coffset, 3));\r\n                        const atomIdx = aToken - 1 + modelAtomIdxStart;\r\n                        const cToken = parseInt(line.substr(coffset + 4, 3));\r\n                        atomStore.formalCharge[atomIdx] = cToken;\r\n                    }\r\n                    // eslint-disable-next-line no-cond-assign\r\n                }\r\n                else if (mItem = line.match(reItem)) {\r\n                    currentItem = mItem[1];\r\n                    currentData[currentItem] = [];\r\n                }\r\n                else if (currentItem !== false && line) {\r\n                    currentData[currentItem].push(line);\r\n                }\r\n                ++lineNo;\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        sb.finalize();\r\n        s.finalizeAtoms();\r\n        s.finalizeBonds();\r\n        assignResidueTypeBonds(s);\r\n        if (Debug)\r\n            Log.timeEnd('SdfParser._parse ' + this.name);\r\n    }\r\n    _postProcess() {\r\n        assignResidueTypeBonds(this.structure);\r\n    }\r\n}\r\nParserRegistry.add('sdf', SdfParser);\r\nParserRegistry.add('sd', SdfParser);\r\nParserRegistry.add('mol', SdfParser);\r\nexport default SdfParser;\r\n//# sourceMappingURL=sdf-parser.js.map","/**\r\n * @file Prmtop Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport StructureParser from './structure-parser';\r\nimport { assignResidueTypeBonds, calculateBondsBetween, calculateBondsWithin, calculateChainnames } from '../structure/structure-utils';\r\nconst amberChargeUnitFactor = 18.2223;\r\nfunction parseIntSubstr(line, start, length) {\r\n    return parseInt(line.substr(start, length).trim());\r\n}\r\nclass PrmtopParser extends StructureParser {\r\n    get type() { return 'prmtop'; }\r\n    _parse() {\r\n        // http://ambermd.org/prmtop.pdf\r\n        // http://ambermd.org/formats.html#topology\r\n        if (Debug)\r\n            Log.time('PrmtopParser._parse ' + this.name);\r\n        const s = this.structure;\r\n        const sb = this.structureBuilder;\r\n        //\r\n        const atomMap = s.atomMap;\r\n        const atomStore = s.atomStore;\r\n        atomStore.addField('partialCharge', 1, 'float32');\r\n        atomStore.addField('radius', 1, 'float32');\r\n        const title = [];\r\n        const pointersDict = {};\r\n        const pointers = [\r\n            'NATOM', 'NTYPES', 'NBONH', 'MBONA', 'NTHETH', 'MTHETA',\r\n            'NPHIH', 'MPHIA', 'NHPARM', 'NPARM', 'NNB', 'NRES',\r\n            'NBONA', 'NTHETA', 'NPHIA', 'NUMBND', 'NUMANG', 'NPTRA',\r\n            'NATYP', 'NPHB', 'IFPERT', 'NBPER', 'NGPER', 'NDPER',\r\n            'MBPER', 'MGPER', 'MDPER', 'IFBOX', 'NMXRS', 'IFCAP',\r\n            'NUMEXTRA', 'NCOPY'\r\n        ];\r\n        pointers.forEach(name => { pointersDict[name] = 0; });\r\n        let atomNames;\r\n        let charges;\r\n        let radii;\r\n        let bAtomIndex1;\r\n        let bAtomIndex2;\r\n        let bBondOrder = new Uint8Array(0);\r\n        let residueLabels;\r\n        let residuePointers;\r\n        let mode;\r\n        // let currentFormat\r\n        let curIdx;\r\n        let bondIdx;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                const line = lines[i];\r\n                const lt = line.trim();\r\n                if (!lt) {\r\n                    continue;\r\n                }\r\n                else if (line.startsWith('%FORMAT')) {\r\n                    // currentFormat = lt.substring(8, lt.length - 1)\r\n                }\r\n                else if (line.startsWith('%FLAG')) {\r\n                    const flag = line.substr(5).trim();\r\n                    curIdx = 0;\r\n                    if (flag === 'TITLE') {\r\n                        mode = 0 /* Title */;\r\n                    }\r\n                    else if (flag === 'POINTERS') {\r\n                        mode = 1 /* Pointers */;\r\n                    }\r\n                    else if (flag === 'ATOM_NAME') {\r\n                        mode = 2 /* AtomName */;\r\n                    }\r\n                    else if (flag === 'CHARGE') {\r\n                        mode = 3 /* Charge */;\r\n                    }\r\n                    else if (flag === 'MASS') {\r\n                        mode = 4 /* Mass */;\r\n                    }\r\n                    else if (flag === 'RESIDUE_LABEL') {\r\n                        mode = 5 /* ResidueLabel */;\r\n                    }\r\n                    else if (flag === 'RESIDUE_POINTER') {\r\n                        mode = 6 /* ResiduePointer */;\r\n                    }\r\n                    else if (flag === 'BONDS_INC_HYDROGEN') {\r\n                        bondIdx = 0;\r\n                        mode = 7 /* BondsIncHydrogen */;\r\n                    }\r\n                    else if (flag === 'BONDS_WITHOUT_HYDROGEN') {\r\n                        bondIdx = pointersDict['NBONH'];\r\n                        mode = 8 /* BondsWithoutHydrogen */;\r\n                    }\r\n                    else if (flag === 'RADII') {\r\n                        mode = 9 /* Radii */;\r\n                    }\r\n                    else {\r\n                        mode = undefined;\r\n                    }\r\n                }\r\n                else if (mode === 0 /* Title */) {\r\n                    title.push(lt);\r\n                }\r\n                else if (mode === 1 /* Pointers */) {\r\n                    const n = Math.min(curIdx + 10, 32);\r\n                    for (let i = 0; curIdx < n; ++i, ++curIdx) {\r\n                        pointersDict[pointers[curIdx]] = parseInt(line.substr(i * 8, 8).trim());\r\n                    }\r\n                    atomNames = new Array(pointersDict.NATOM);\r\n                    charges = new Float32Array(pointersDict.NATOM);\r\n                    radii = new Float32Array(pointersDict.NATOM);\r\n                    atomStore.resize(pointersDict.NATOM);\r\n                    const bondCount = pointersDict.NBONH + pointersDict.MBONA;\r\n                    bAtomIndex1 = new Uint32Array(bondCount);\r\n                    bAtomIndex2 = new Uint32Array(bondCount);\r\n                    bBondOrder = new Uint8Array(bondCount);\r\n                    residueLabels = new Array(pointersDict.NRES);\r\n                    residuePointers = new Uint32Array(pointersDict.NRES);\r\n                }\r\n                else if (mode === 2 /* AtomName */) {\r\n                    const n = Math.min(curIdx + 20, pointersDict.NATOM);\r\n                    for (let i = 0; curIdx < n; ++i, ++curIdx) {\r\n                        atomNames[curIdx] = line.substr(i * 4, 4).trim();\r\n                    }\r\n                }\r\n                else if (mode === 3 /* Charge */) {\r\n                    const n = Math.min(curIdx + 5, pointersDict.NATOM);\r\n                    for (let i = 0; curIdx < n; ++i, ++curIdx) {\r\n                        charges[curIdx] = parseFloat(line.substr(i * 16, 16)) / amberChargeUnitFactor;\r\n                    }\r\n                }\r\n                else if (mode === 4 /* Mass */) {\r\n                    // not currently used\r\n                }\r\n                else if (mode === 5 /* ResidueLabel */) {\r\n                    const n = Math.min(curIdx + 20, pointersDict.NRES);\r\n                    for (let i = 0; curIdx < n; ++i, ++curIdx) {\r\n                        residueLabels[curIdx] = line.substr(i * 4, 4).trim();\r\n                    }\r\n                }\r\n                else if (mode === 6 /* ResiduePointer */) {\r\n                    const n = Math.min(curIdx + 10, pointersDict.NRES);\r\n                    for (let i = 0; curIdx < n; ++i, ++curIdx) {\r\n                        residuePointers[curIdx] = parseIntSubstr(line, i * 8, 8);\r\n                    }\r\n                }\r\n                else if (mode === 7 /* BondsIncHydrogen */) {\r\n                    const n = Math.min(curIdx + 10, pointersDict.NBONH * 3);\r\n                    for (let i = 0; curIdx < n; ++i, ++curIdx) {\r\n                        const r = curIdx % 3;\r\n                        if (r === 0) {\r\n                            bAtomIndex1[bondIdx] = parseIntSubstr(line, i * 8, 8) / 3;\r\n                        }\r\n                        if (r === 1) {\r\n                            bAtomIndex2[bondIdx] = parseIntSubstr(line, i * 8, 8) / 3;\r\n                            bBondOrder[bondIdx] = 1;\r\n                            ++bondIdx;\r\n                        }\r\n                    }\r\n                }\r\n                else if (mode === 8 /* BondsWithoutHydrogen */) {\r\n                    const n = Math.min(curIdx + 10, pointersDict.MBONA * 3);\r\n                    for (let i = 0; curIdx < n; ++i, ++curIdx) {\r\n                        const r = curIdx % 3;\r\n                        if (r === 0) {\r\n                            bAtomIndex1[bondIdx] = parseIntSubstr(line, i * 8, 8) / 3;\r\n                        }\r\n                        if (r === 1) {\r\n                            bAtomIndex2[bondIdx] = parseIntSubstr(line, i * 8, 8) / 3;\r\n                            bBondOrder[bondIdx] = 1;\r\n                            ++bondIdx;\r\n                        }\r\n                    }\r\n                }\r\n                else if (mode === 9 /* Radii */) {\r\n                    const n = Math.min(curIdx + 5, pointersDict.NATOM);\r\n                    for (let i = 0; curIdx < n; ++i, ++curIdx) {\r\n                        radii[curIdx] = parseFloat(line.substr(i * 16, 16));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        s.title = title.join(' ');\r\n        const atomCount = pointersDict.NATOM;\r\n        let curResIdx = 0;\r\n        let curResname = residueLabels[0];\r\n        let curResno = 1;\r\n        for (let i = 0; i < atomCount; ++i) {\r\n            if (i + 1 === residuePointers[curResIdx + 1]) {\r\n                ++curResIdx;\r\n                curResname = residueLabels[curResIdx];\r\n                curResno = curResIdx + 1;\r\n            }\r\n            atomStore.atomTypeId[i] = atomMap.add(atomNames[i]);\r\n            atomStore.serial[i] = i + 1;\r\n            sb.addAtom(0, '', '', curResname, curResno);\r\n        }\r\n        atomStore.partialCharge.set(charges);\r\n        atomStore.radius.set(radii);\r\n        s.bondStore.length = bBondOrder.length;\r\n        s.bondStore.count = bBondOrder.length;\r\n        s.bondStore.atomIndex1 = bAtomIndex1;\r\n        s.bondStore.atomIndex2 = bAtomIndex2;\r\n        s.bondStore.bondOrder = bBondOrder;\r\n        sb.finalize();\r\n        s.finalizeAtoms();\r\n        s.finalizeBonds();\r\n        calculateBondsWithin(s, true);\r\n        calculateBondsBetween(s, true, true);\r\n        calculateChainnames(s, true);\r\n        assignResidueTypeBonds(s);\r\n        if (Debug)\r\n            Log.timeEnd('PrmtopParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('prmtop', PrmtopParser);\r\nParserRegistry.add('parm7', PrmtopParser);\r\nexport default PrmtopParser;\r\n//# sourceMappingURL=prmtop-parser.js.map","/**\r\n * @file Psf Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport StructureParser from './structure-parser';\r\nimport { assignResidueTypeBonds, calculateBondsBetween, calculateBondsWithin, getChainname } from '../structure/structure-utils';\r\nconst TitleMode = 1;\r\nconst AtomMode = 2;\r\nconst BondMode = 3;\r\nconst AngleMode = 4;\r\nconst DihedralMode = 5;\r\nconst ImproperMode = 6;\r\nconst reWhitespace = /\\s+/;\r\nconst reTitle = /(^\\*|REMARK)*/;\r\nclass PsfParser extends StructureParser {\r\n    get type() { return 'psf'; }\r\n    _parse() {\r\n        // http://www.ks.uiuc.edu/Training/Tutorials/namd/namd-tutorial-unix-html/node23.html\r\n        if (Debug)\r\n            Log.time('PsfParser._parse ' + this.name);\r\n        const s = this.structure;\r\n        const sb = this.structureBuilder;\r\n        //\r\n        const atomMap = s.atomMap;\r\n        const atomStore = s.atomStore;\r\n        atomStore.addField('partialCharge', 1, 'float32');\r\n        const title = [];\r\n        let mode;\r\n        let chainid;\r\n        let lastSegid;\r\n        let idx = 0;\r\n        let chainIdx = 0;\r\n        let bondIdx = 0;\r\n        let bAtomIndex1, bAtomIndex2, bBondOrder;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                const line = lines[i].trim();\r\n                if (!line) {\r\n                    mode = undefined;\r\n                    continue;\r\n                }\r\n                if (mode === AtomMode) {\r\n                    const ls = line.split(reWhitespace);\r\n                    const serial = parseInt(ls[0]);\r\n                    const segid = ls[1];\r\n                    const resno = parseInt(ls[2]);\r\n                    const resname = ls[3];\r\n                    const atomname = ls[4];\r\n                    const charge = parseFloat(ls[6]);\r\n                    if (segid !== lastSegid) {\r\n                        chainid = getChainname(chainIdx);\r\n                        ++chainIdx;\r\n                    }\r\n                    atomStore.growIfFull();\r\n                    atomStore.atomTypeId[idx] = atomMap.add(atomname);\r\n                    atomStore.serial[idx] = serial;\r\n                    atomStore.partialCharge[idx] = charge;\r\n                    sb.addAtom(0, chainid, chainid, resname, resno);\r\n                    idx += 1;\r\n                    lastSegid = segid;\r\n                }\r\n                else if (mode === BondMode) {\r\n                    const ls = line.split(reWhitespace);\r\n                    for (let j = 0, m = ls.length; j < m; j += 2) {\r\n                        bAtomIndex1[bondIdx] = parseInt(ls[j]) - 1;\r\n                        bAtomIndex2[bondIdx] = parseInt(ls[j + 1]) - 1;\r\n                        bBondOrder[bondIdx] = 1;\r\n                        bondIdx += 1;\r\n                    }\r\n                }\r\n                else if (mode === TitleMode) {\r\n                    title.push(line.replace(reTitle, '').trim());\r\n                }\r\n                else if (mode === AngleMode) {\r\n                    // currently not used\r\n                }\r\n                else if (mode === DihedralMode) {\r\n                    // currently not used\r\n                }\r\n                else if (mode === ImproperMode) {\r\n                    // currently not used\r\n                }\r\n                else if (line.includes('!NATOM')) {\r\n                    mode = AtomMode;\r\n                    const numAtoms = parseInt(line.split(reWhitespace)[0]);\r\n                    atomStore.resize(numAtoms);\r\n                }\r\n                else if (line.includes('!NBOND')) {\r\n                    mode = BondMode;\r\n                    const numBonds = parseInt(line.split(reWhitespace)[0]);\r\n                    bAtomIndex1 = new Uint32Array(numBonds);\r\n                    bAtomIndex2 = new Uint32Array(numBonds);\r\n                    bBondOrder = new Uint8Array(numBonds);\r\n                }\r\n                else if (line.includes('!NTITLE')) {\r\n                    mode = TitleMode;\r\n                }\r\n                else if (line.includes('!NTHETA')) {\r\n                    mode = AngleMode;\r\n                }\r\n                else if (line.includes('!NPHI')) {\r\n                    mode = DihedralMode;\r\n                }\r\n                else if (line.includes('!NIMPHI')) {\r\n                    mode = ImproperMode;\r\n                }\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        s.title = title.join(' ');\r\n        s.bondStore.length = bBondOrder.length;\r\n        s.bondStore.count = bondIdx;\r\n        s.bondStore.atomIndex1 = bAtomIndex1;\r\n        s.bondStore.atomIndex2 = bAtomIndex2;\r\n        s.bondStore.bondOrder = bBondOrder;\r\n        sb.finalize();\r\n        s.finalizeAtoms();\r\n        s.finalizeBonds();\r\n        calculateBondsWithin(s, true);\r\n        calculateBondsBetween(s, true, true);\r\n        assignResidueTypeBonds(s);\r\n        if (Debug)\r\n            Log.timeEnd('PsfParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('psf', PsfParser);\r\nexport default PsfParser;\r\n//# sourceMappingURL=psf-parser.js.map","/**\r\n * @file Top Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport StructureParser from './structure-parser';\r\nimport { WaterNames } from '../structure/structure-constants';\r\nimport { assignResidueTypeBonds, calculateBondsBetween, calculateBondsWithin, getChainname } from '../structure/structure-utils';\r\nconst reField = /\\[ (.+) \\]/;\r\nconst reWhitespace = /\\s+/;\r\nclass TopParser extends StructureParser {\r\n    get type() { return 'top'; }\r\n    _parse() {\r\n        // http://manual.gromacs.org/online/top.html\r\n        if (Debug)\r\n            Log.time('TopParser._parse ' + this.name);\r\n        const s = this.structure;\r\n        const sb = this.structureBuilder;\r\n        //\r\n        const atomMap = s.atomMap;\r\n        const bondStore = s.bondStore;\r\n        const atomStore = s.atomStore;\r\n        atomStore.addField('partialCharge', 1, 'float32');\r\n        const molecules = [];\r\n        const moleculetypeDict = {};\r\n        let currentMoleculetype;\r\n        let mode;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                const line = lines[i];\r\n                let lt = line.trim();\r\n                if (!lt || lt[0] === '*' || lt[0] === ';') {\r\n                    continue;\r\n                }\r\n                if (lt.startsWith('#include')) {\r\n                    throw new Error('TopParser: #include statements not allowed');\r\n                }\r\n                const fieldMatch = line.match(reField);\r\n                if (fieldMatch !== null) {\r\n                    const name = fieldMatch[1];\r\n                    if (name === 'moleculetype') {\r\n                        mode = 2 /* Moleculetype */;\r\n                        currentMoleculetype = {\r\n                            atoms: [],\r\n                            bonds: []\r\n                        };\r\n                    }\r\n                    else if (name === 'atoms') {\r\n                        mode = 3 /* Atoms */;\r\n                    }\r\n                    else if (name === 'bonds') {\r\n                        mode = 4 /* Bonds */;\r\n                    }\r\n                    else if (name === 'system') {\r\n                        mode = 0 /* System */;\r\n                    }\r\n                    else if (name === 'molecules') {\r\n                        mode = 1 /* Molecules */;\r\n                    }\r\n                    else {\r\n                        mode = undefined;\r\n                    }\r\n                    continue;\r\n                }\r\n                const cIdx = lt.indexOf(';');\r\n                if (cIdx !== -1) {\r\n                    lt = lt.substring(0, cIdx).trim();\r\n                }\r\n                if (mode === 2 /* Moleculetype */) {\r\n                    const molName = lt.split(reWhitespace)[0];\r\n                    moleculetypeDict[molName] = currentMoleculetype;\r\n                }\r\n                else if (mode === 3 /* Atoms */) {\r\n                    const ls = lt.split(reWhitespace);\r\n                    currentMoleculetype.atoms.push([\r\n                        parseInt(ls[2]),\r\n                        ls[3],\r\n                        ls[4],\r\n                        parseFloat(ls[6]) // charge\r\n                    ]);\r\n                }\r\n                else if (mode === 4 /* Bonds */) {\r\n                    const ls = lt.split(reWhitespace);\r\n                    currentMoleculetype.bonds.push([\r\n                        parseInt(ls[0]),\r\n                        parseInt(ls[1]) // aj\r\n                    ]);\r\n                }\r\n                else if (mode === 0 /* System */) {\r\n                    s.title = lt;\r\n                }\r\n                else if (mode === 1 /* Molecules */) {\r\n                    const ls = lt.split(reWhitespace);\r\n                    molecules.push([\r\n                        ls[0],\r\n                        parseInt(ls[1]) // count\r\n                    ]);\r\n                }\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        let atomCount = 0;\r\n        let bondCount = 0;\r\n        molecules.forEach(function (val) {\r\n            const [name, molCount] = val;\r\n            const molType = moleculetypeDict[name];\r\n            atomCount += molCount * molType.atoms.length;\r\n            bondCount += molCount * molType.bonds.length;\r\n        });\r\n        atomStore.resize(atomCount);\r\n        bondStore.resize(bondCount);\r\n        let atomIdx = 0;\r\n        let resIdx = 0;\r\n        let chainidIdx = 0;\r\n        let chainnameIdx = 0;\r\n        let bondIdx = 0;\r\n        let atomOffset = 0;\r\n        let lastResno;\r\n        molecules.forEach(function (val) {\r\n            const [name, molCount] = val;\r\n            const molType = moleculetypeDict[name];\r\n            const chainname = getChainname(chainnameIdx);\r\n            for (let i = 0; i < molCount; ++i) {\r\n                lastResno = -1;\r\n                const chainid = WaterNames.includes(name) ? chainname : getChainname(chainidIdx);\r\n                molType.atoms.forEach(function (atomData) {\r\n                    const [resno, resname, atomname, charge] = atomData;\r\n                    if (resno !== lastResno) {\r\n                        ++resIdx;\r\n                    }\r\n                    atomStore.atomTypeId[atomIdx] = atomMap.add(atomname);\r\n                    atomStore.serial[atomIdx] = atomIdx + 1;\r\n                    atomStore.partialCharge[atomIdx] = charge;\r\n                    sb.addAtom(0, chainname, chainid, resname, resIdx + 1);\r\n                    ++atomIdx;\r\n                    lastResno = resno;\r\n                });\r\n                molType.bonds.forEach(function (bondData) {\r\n                    bondStore.atomIndex1[bondIdx] = atomOffset + bondData[0] - 1;\r\n                    bondStore.atomIndex2[bondIdx] = atomOffset + bondData[1] - 1;\r\n                    ++bondIdx;\r\n                });\r\n                ++chainidIdx;\r\n                atomOffset += molType.atoms.length;\r\n            }\r\n            ++chainnameIdx;\r\n        });\r\n        bondStore.count = bondCount;\r\n        sb.finalize();\r\n        s.finalizeAtoms();\r\n        s.finalizeBonds();\r\n        calculateBondsWithin(s, true);\r\n        calculateBondsBetween(s, true, true);\r\n        assignResidueTypeBonds(s);\r\n        if (Debug)\r\n            Log.timeEnd('TopParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('top', TopParser);\r\nexport default TopParser;\r\n//# sourceMappingURL=top-parser.js.map","/**\r\n * @file Trajectory Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Parser from './parser';\r\nimport Frames from '../trajectory/frames';\r\nclass TrajectoryParser extends Parser {\r\n    constructor(streamer, params) {\r\n        super(streamer, params);\r\n        this.frames = new Frames(this.name, this.path);\r\n    }\r\n    get type() { return 'trajectory'; }\r\n    get __objName() { return 'frames'; }\r\n}\r\nexport default TrajectoryParser;\r\n//# sourceMappingURL=trajectory-parser.js.map","/**\r\n * @file Dcd Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { uint8ToString, ensureBuffer } from '../utils';\r\nimport TrajectoryParser from './trajectory-parser';\r\nconst charmmTimeUnitFactor = 20.45482949774598;\r\nclass DcdParser extends TrajectoryParser {\r\n    get type() { return 'dcd'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        // http://www.ks.uiuc.edu/Research/vmd/plugins/molfile/dcdplugin.html\r\n        // The DCD format is structured as follows\r\n        //   (FORTRAN UNFORMATTED, with Fortran data type descriptions):\r\n        // HDR     NSET    ISTRT   NSAVC   5-ZEROS NATOM-NFREAT    DELTA   9-ZEROS\r\n        // `CORD'  #files  step 1  step    zeroes  (zero)          timestep  (zeroes)\r\n        //                         interval\r\n        // C*4     INT     INT     INT     5INT    INT             DOUBLE  9INT\r\n        // ==========================================================================\r\n        // NTITLE          TITLE\r\n        // INT (=2)        C*MAXTITL\r\n        //                 (=32)\r\n        // ==========================================================================\r\n        // NATOM\r\n        // #atoms\r\n        // INT\r\n        // ==========================================================================\r\n        // X(I), I=1,NATOM         (DOUBLE)\r\n        // Y(I), I=1,NATOM\r\n        // Z(I), I=1,NATOM\r\n        // ==========================================================================\r\n        if (Debug)\r\n            Log.time('DcdParser._parse ' + this.name);\r\n        const bin = ensureBuffer(this.streamer.data);\r\n        const dv = new DataView(bin);\r\n        const f = this.frames;\r\n        const coordinates = f.coordinates;\r\n        const boxes = f.boxes;\r\n        const header = {};\r\n        let nextPos = 0;\r\n        // header block\r\n        const intView = new Int32Array(bin, 0, 23);\r\n        const ef = intView[0] !== dv.getInt32(0); // endianess flag\r\n        // swap byte order when big endian (84 indicates little endian)\r\n        if (intView[0] !== 84) {\r\n            const n = bin.byteLength;\r\n            for (let i = 0; i < n; i += 4) {\r\n                dv.setFloat32(i, dv.getFloat32(i), true);\r\n            }\r\n        }\r\n        if (intView[0] !== 84) {\r\n            Log.error('dcd bad format, header block start');\r\n        }\r\n        // format indicator, should read 'CORD'\r\n        const formatString = String.fromCharCode(dv.getUint8(4), dv.getUint8(5), dv.getUint8(6), dv.getUint8(7));\r\n        if (formatString !== 'CORD') {\r\n            Log.error('dcd bad format, format string');\r\n        }\r\n        let isCharmm = false;\r\n        let extraBlock = false;\r\n        let fourDims = false;\r\n        // version field in charmm, unused in X-PLOR\r\n        if (intView[22] !== 0) {\r\n            isCharmm = true;\r\n            if (intView[12] !== 0)\r\n                extraBlock = true;\r\n            if (intView[13] === 1)\r\n                fourDims = true;\r\n        }\r\n        header.NSET = intView[2];\r\n        header.ISTART = intView[3];\r\n        header.NSAVC = intView[4];\r\n        header.NAMNF = intView[10];\r\n        if (isCharmm) {\r\n            header.DELTA = dv.getFloat32(44, ef);\r\n        }\r\n        else {\r\n            header.DELTA = dv.getFloat64(44, ef);\r\n        }\r\n        if (intView[22] !== 84) {\r\n            Log.error('dcd bad format, header block end');\r\n        }\r\n        nextPos = nextPos + 21 * 4 + 8;\r\n        // title block\r\n        const titleLength = dv.getInt32(nextPos, ef);\r\n        const titlePos = nextPos + 1;\r\n        if ((titleLength - 4) % 80 !== 0) {\r\n            Log.error('dcd bad format, title block start');\r\n        }\r\n        header.TITLE = uint8ToString(new Uint8Array(bin, titlePos, titleLength));\r\n        if (dv.getInt32(titlePos + titleLength + 4 - 1, ef) !== titleLength) {\r\n            Log.error('dcd bad format, title block end');\r\n        }\r\n        nextPos = nextPos + titleLength + 8;\r\n        // natom block\r\n        if (dv.getInt32(nextPos, ef) !== 4) {\r\n            Log.error('dcd bad format, natom block start');\r\n        }\r\n        header.NATOM = dv.getInt32(nextPos + 4, ef);\r\n        if (dv.getInt32(nextPos + 8, ef) !== 4) {\r\n            Log.error('dcd bad format, natom block end');\r\n        }\r\n        nextPos = nextPos + 4 + 8;\r\n        // fixed atoms block\r\n        if (header.NAMNF > 0) {\r\n            // TODO read coordinates and indices of fixed atoms\r\n            Log.error('dcd format with fixed atoms unsupported, aborting');\r\n            return;\r\n        }\r\n        // frames\r\n        const natom = header.NATOM;\r\n        const natom4 = natom * 4;\r\n        for (let i = 0, n = header.NSET; i < n; ++i) {\r\n            if (extraBlock) {\r\n                nextPos += 4; // block start\r\n                // unitcell: A, alpha, B, beta, gamma, C (doubles)\r\n                const box = new Float32Array(9);\r\n                box[0] = dv.getFloat64(nextPos, ef);\r\n                box[4] = dv.getFloat64(nextPos + 2 * 8, ef);\r\n                box[8] = dv.getFloat64(nextPos + 5 * 8, ef);\r\n                boxes.push(box);\r\n                nextPos += 48;\r\n                nextPos += 4; // block end\r\n            }\r\n            // xyz coordinates\r\n            const coord = new Float32Array(natom * 3);\r\n            for (let j = 0; j < 3; ++j) {\r\n                if (dv.getInt32(nextPos, ef) !== natom4) {\r\n                    Log.error('dcd bad format, coord block start', i, j);\r\n                }\r\n                nextPos += 4; // block start\r\n                const c = new Float32Array(bin, nextPos, natom);\r\n                for (let k = 0; k < natom; ++k) {\r\n                    coord[3 * k + j] = c[k];\r\n                }\r\n                nextPos += natom4;\r\n                if (dv.getInt32(nextPos, ef) !== natom4) {\r\n                    Log.error('dcd bad format, coord block end', i, j);\r\n                }\r\n                nextPos += 4; // block end\r\n            }\r\n            coordinates.push(coord);\r\n            if (fourDims) {\r\n                const bytes = dv.getInt32(nextPos, ef);\r\n                nextPos += 4 + bytes + 4; // block start + skip + block end\r\n            }\r\n        }\r\n        if (header.DELTA) {\r\n            f.deltaTime = header.DELTA * charmmTimeUnitFactor;\r\n        }\r\n        if (header.ISTART >= 1) {\r\n            f.timeOffset = (header.ISTART - 1) * f.deltaTime;\r\n        }\r\n        // console.log(header)\r\n        // console.log(header.TITLE)\r\n        // console.log('isCharmm', isCharmm, 'extraBlock', extraBlock, 'fourDims, fourDims)\r\n        if (Debug)\r\n            Log.timeEnd('DcdParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('dcd', DcdParser);\r\nexport default DcdParser;\r\n//# sourceMappingURL=dcd-parser.js.map","/**\r\n * @file Netcdf Reader\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n *\r\n * Adapted from https://github.com/cheminfo-js/netcdfjs\r\n * MIT License, Copyright (c) 2016 cheminfo\r\n */\r\nimport IOBuffer from './io-buffer.js';\r\n/**\r\n * Throws a non-valid NetCDF exception if the statement it's true\r\n * @ignore\r\n * @param {boolean} statement - Throws if true\r\n * @param {string} reason - Reason to throw\r\n */\r\nfunction notNetcdf(statement, reason) {\r\n    if (statement) {\r\n        throw new TypeError('Not a valid NetCDF v3.x file: ' + reason);\r\n    }\r\n}\r\n/**\r\n * Moves 1, 2, or 3 bytes to next 4-byte boundary\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n */\r\nfunction padding(buffer) {\r\n    if ((buffer.offset % 4) !== 0) {\r\n        buffer.skip(4 - (buffer.offset % 4));\r\n    }\r\n}\r\n/**\r\n * Reads the name\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n * @return {string} - Name\r\n */\r\nfunction readName(buffer) {\r\n    // Read name\r\n    const nameLength = buffer.readUint32();\r\n    const name = buffer.readChars(nameLength);\r\n    // validate name\r\n    // TODO\r\n    // Apply padding\r\n    padding(buffer);\r\n    return name;\r\n}\r\nconst types = {\r\n    BYTE: 1,\r\n    CHAR: 2,\r\n    SHORT: 3,\r\n    INT: 4,\r\n    FLOAT: 5,\r\n    DOUBLE: 6\r\n};\r\n/**\r\n * Parse a number into their respective type\r\n * @ignore\r\n * @param {number} type - integer that represents the type\r\n * @return {string} - parsed value of the type\r\n */\r\nfunction num2str(type) {\r\n    switch (Number(type)) {\r\n        case types.BYTE:\r\n            return 'byte';\r\n        case types.CHAR:\r\n            return 'char';\r\n        case types.SHORT:\r\n            return 'short';\r\n        case types.INT:\r\n            return 'int';\r\n        case types.FLOAT:\r\n            return 'float';\r\n        case types.DOUBLE:\r\n            return 'double';\r\n        default:\r\n            return 'undefined';\r\n    }\r\n}\r\n/**\r\n * Parse a number type identifier to his size in bytes\r\n * @ignore\r\n * @param {number} type - integer that represents the type\r\n * @return {number} -size of the type\r\n */\r\nfunction num2bytes(type) {\r\n    switch (Number(type)) {\r\n        case types.BYTE:\r\n            return 1;\r\n        case types.CHAR:\r\n            return 1;\r\n        case types.SHORT:\r\n            return 2;\r\n        case types.INT:\r\n            return 4;\r\n        case types.FLOAT:\r\n            return 4;\r\n        case types.DOUBLE:\r\n            return 8;\r\n        default:\r\n            return -1;\r\n    }\r\n}\r\n/**\r\n * Reverse search of num2str\r\n * @ignore\r\n * @param {string} type - string that represents the type\r\n * @return {number} - parsed value of the type\r\n */\r\nfunction str2num(type) {\r\n    switch (String(type)) {\r\n        case 'byte':\r\n            return types.BYTE;\r\n        case 'char':\r\n            return types.CHAR;\r\n        case 'short':\r\n            return types.SHORT;\r\n        case 'int':\r\n            return types.INT;\r\n        case 'float':\r\n            return types.FLOAT;\r\n        case 'double':\r\n            return types.DOUBLE;\r\n        default:\r\n            return -1;\r\n    }\r\n}\r\n/**\r\n * Auxiliary function to read numeric data\r\n * @ignore\r\n * @param {number} size - Size of the element to read\r\n * @param {function} bufferReader - Function to read next value\r\n * @return {Array<number>|number}\r\n */\r\nfunction readNumber(size, bufferReader) {\r\n    if (size !== 1) {\r\n        const numbers = new Array(size);\r\n        for (let i = 0; i < size; i++) {\r\n            numbers[i] = bufferReader();\r\n        }\r\n        return numbers;\r\n    }\r\n    else {\r\n        return bufferReader();\r\n    }\r\n}\r\n/**\r\n * Given a type and a size reads the next element\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n * @param {number} type - Type of the data to read\r\n * @param {number} size - Size of the element to read\r\n * @return {string|Array<number>|number}\r\n */\r\nfunction readType(buffer, type, size) {\r\n    switch (type) {\r\n        case types.BYTE:\r\n            return buffer.readBytes(size);\r\n        case types.CHAR:\r\n            return trimNull(buffer.readChars(size));\r\n        case types.SHORT:\r\n            return readNumber(size, buffer.readInt16.bind(buffer));\r\n        case types.INT:\r\n            return readNumber(size, buffer.readInt32.bind(buffer));\r\n        case types.FLOAT:\r\n            return readNumber(size, buffer.readFloat32.bind(buffer));\r\n        case types.DOUBLE:\r\n            return readNumber(size, buffer.readFloat64.bind(buffer));\r\n        default:\r\n            notNetcdf(true, 'non valid type ' + type);\r\n            return undefined;\r\n    }\r\n}\r\n/**\r\n * Removes null terminate value\r\n * @ignore\r\n * @param {string} value - String to trim\r\n * @return {string} - Trimmed string\r\n */\r\nfunction trimNull(value) {\r\n    if (value.charCodeAt(value.length - 1) === 0) {\r\n        return value.substring(0, value.length - 1);\r\n    }\r\n    return value;\r\n}\r\n// const STREAMING = 4294967295;\r\n/**\r\n * Read data for the given non-record variable\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n * @param {object} variable - Variable metadata\r\n * @return {Array} - Data of the element\r\n */\r\nfunction nonRecord(buffer, variable) {\r\n    // variable type\r\n    const type = str2num(variable.type);\r\n    // size of the data\r\n    const size = variable.size / num2bytes(type);\r\n    // iterates over the data\r\n    const data = new Array(size);\r\n    for (let i = 0; i < size; i++) {\r\n        data[i] = readType(buffer, type, 1);\r\n    }\r\n    return data;\r\n}\r\n/**\r\n * Read data for the given record variable\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n * @param {object} variable - Variable metadata\r\n * @param {object} recordDimension - Record dimension metadata\r\n * @return {Array} - Data of the element\r\n */\r\nfunction record(buffer, variable, recordDimension) {\r\n    // variable type\r\n    const type = str2num(variable.type);\r\n    const width = variable.size ? variable.size / num2bytes(type) : 1;\r\n    // size of the data\r\n    // TODO streaming data\r\n    const size = recordDimension.length;\r\n    // iterates over the data\r\n    const data = new Array(size);\r\n    const step = recordDimension.recordStep;\r\n    for (let i = 0; i < size; i++) {\r\n        const currentOffset = buffer.offset;\r\n        data[i] = readType(buffer, type, width);\r\n        buffer.seek(currentOffset + step);\r\n    }\r\n    return data;\r\n}\r\n// Grammar constants\r\nconst ZERO = 0;\r\nconst NC_DIMENSION = 10;\r\nconst NC_VARIABLE = 11;\r\nconst NC_ATTRIBUTE = 12;\r\n/**\r\n * Read the header of the file\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n * @param {number} version - Version of the file\r\n * @return {object} - Object with the fields:\r\n *  * `recordDimension`: Number with the length of record dimension\r\n *  * `dimensions`: List of dimensions\r\n *  * `globalAttributes`: List of global attributes\r\n *  * `variables`: List of variables\r\n */\r\nfunction header(buffer, version) {\r\n    // Length of record dimension\r\n    // sum of the varSize's of all the record variables.\r\n    const header = { recordDimension: { length: buffer.readUint32() } };\r\n    // Version\r\n    header.version = version;\r\n    // List of dimensions\r\n    const dimList = dimensionsList(buffer);\r\n    header.recordDimension.id = dimList.recordId;\r\n    header.recordDimension.name = dimList.recordName;\r\n    header.dimensions = dimList.dimensions;\r\n    // List of global attributes\r\n    header.globalAttributes = attributesList(buffer);\r\n    // List of variables\r\n    const variables = variablesList(buffer, dimList.recordId, version);\r\n    header.variables = variables.variables;\r\n    header.recordDimension.recordStep = variables.recordStep;\r\n    return header;\r\n}\r\n/**\r\n * List of dimensions\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n * @return {object} - List of dimensions and record dimension with:\r\n *  * `name`: String with the name of the dimension\r\n *  * `size`: Number with the size of the dimension\r\n */\r\nfunction dimensionsList(buffer) {\r\n    let dimensions, recordId, recordName;\r\n    const dimList = buffer.readUint32();\r\n    if (dimList === ZERO) {\r\n        notNetcdf((buffer.readUint32() !== ZERO), 'wrong empty tag for list of dimensions');\r\n        return [];\r\n    }\r\n    else {\r\n        notNetcdf((dimList !== NC_DIMENSION), 'wrong tag for list of dimensions');\r\n        // Length of dimensions\r\n        const dimensionSize = buffer.readUint32();\r\n        dimensions = new Array(dimensionSize);\r\n        for (let dim = 0; dim < dimensionSize; dim++) {\r\n            // Read name\r\n            const name = readName(buffer);\r\n            // Read dimension size\r\n            const size = buffer.readUint32();\r\n            if (size === 0) {\r\n                recordId = dim;\r\n                recordName = name;\r\n            }\r\n            dimensions[dim] = {\r\n                name: name,\r\n                size: size\r\n            };\r\n        }\r\n        return {\r\n            dimensions: dimensions,\r\n            recordId: recordId,\r\n            recordName: recordName\r\n        };\r\n    }\r\n}\r\n/**\r\n * List of attributes\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n * @return {Array<object>} - List of attributes with:\r\n *  * `name`: String with the name of the attribute\r\n *  * `type`: String with the type of the attribute\r\n *  * `value`: A number or string with the value of the attribute\r\n */\r\nfunction attributesList(buffer) {\r\n    let attributes;\r\n    const gAttList = buffer.readUint32();\r\n    if (gAttList === ZERO) {\r\n        notNetcdf((buffer.readUint32() !== ZERO), 'wrong empty tag for list of attributes');\r\n        return [];\r\n    }\r\n    else {\r\n        notNetcdf((gAttList !== NC_ATTRIBUTE), 'wrong tag for list of attributes');\r\n        // Length of attributes\r\n        const attributeSize = buffer.readUint32();\r\n        attributes = new Array(attributeSize);\r\n        for (let gAtt = 0; gAtt < attributeSize; gAtt++) {\r\n            // Read name\r\n            const name = readName(buffer);\r\n            // Read type\r\n            const type = buffer.readUint32();\r\n            notNetcdf(((type < 1) || (type > 6)), 'non valid type ' + type);\r\n            // Read attribute\r\n            const size = buffer.readUint32();\r\n            const value = readType(buffer, type, size);\r\n            // Apply padding\r\n            padding(buffer);\r\n            attributes[gAtt] = {\r\n                name: name,\r\n                type: num2str(type),\r\n                value: value\r\n            };\r\n        }\r\n    }\r\n    return attributes;\r\n}\r\n/**\r\n * List of variables\r\n * @ignore\r\n * @param {IOBuffer} buffer - Buffer for the file data\r\n * @param {number} recordId - Id if the record dimension\r\n * @param {number} version - Version of the file\r\n * @return {object} - Number of recordStep and list of variables with:\r\n *  * `name`: String with the name of the variable\r\n *  * `dimensions`: Array with the dimension IDs of the variable\r\n *  * `attributes`: Array with the attributes of the variable\r\n *  * `type`: String with the type of the variable\r\n *  * `size`: Number with the size of the variable\r\n *  * `offset`: Number with the offset where of the variable begins\r\n *  * `record`: True if is a record variable, false otherwise\r\n */\r\nfunction variablesList(buffer, recordId, version) {\r\n    const varList = buffer.readUint32();\r\n    let recordStep = 0;\r\n    let variables;\r\n    if (varList === ZERO) {\r\n        notNetcdf((buffer.readUint32() !== ZERO), 'wrong empty tag for list of variables');\r\n        return [];\r\n    }\r\n    else {\r\n        notNetcdf((varList !== NC_VARIABLE), 'wrong tag for list of variables');\r\n        // Length of variables\r\n        const variableSize = buffer.readUint32();\r\n        variables = new Array(variableSize);\r\n        for (let v = 0; v < variableSize; v++) {\r\n            // Read name\r\n            const name = readName(buffer);\r\n            // Read dimensionality of the variable\r\n            const dimensionality = buffer.readUint32();\r\n            // Index into the list of dimensions\r\n            const dimensionsIds = new Array(dimensionality);\r\n            for (let dim = 0; dim < dimensionality; dim++) {\r\n                dimensionsIds[dim] = buffer.readUint32();\r\n            }\r\n            // Read variables size\r\n            const attributes = attributesList(buffer);\r\n            // Read type\r\n            const type = buffer.readUint32();\r\n            notNetcdf(((type < 1) && (type > 6)), 'non valid type ' + type);\r\n            // Read variable size\r\n            // The 32-bit varSize field is not large enough to contain the\r\n            // size of variables that require more than 2^32 - 4 bytes,\r\n            // so 2^32 - 1 is used in the varSize field for such variables.\r\n            const varSize = buffer.readUint32();\r\n            // Read offset\r\n            let offset = buffer.readUint32();\r\n            if (version === 2) {\r\n                notNetcdf((offset > 0), 'offsets larger than 4GB not supported');\r\n                offset = buffer.readUint32();\r\n            }\r\n            // Count amount of record variables\r\n            if (dimensionsIds[0] === recordId) {\r\n                recordStep += varSize;\r\n            }\r\n            variables[v] = {\r\n                name: name,\r\n                dimensions: dimensionsIds,\r\n                attributes: attributes,\r\n                type: num2str(type),\r\n                size: varSize,\r\n                offset: offset,\r\n                record: (dimensionsIds[0] === recordId)\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        variables: variables,\r\n        recordStep: recordStep\r\n    };\r\n}\r\n/**\r\n * Reads a NetCDF v3.x file\r\n * https://www.unidata.ucar.edu/software/netcdf/docs/file_format_specifications.html\r\n */\r\nclass NetcdfReader {\r\n    /**\r\n     * @param {ArrayBuffer} data - ArrayBuffer or any Typed Array with the data\r\n     */\r\n    constructor(data) {\r\n        const buffer = new IOBuffer(data);\r\n        buffer.setBigEndian();\r\n        // Validate that it's a NetCDF file\r\n        notNetcdf((buffer.readChars(3) !== 'CDF'), 'should start with CDF');\r\n        // Check the NetCDF format\r\n        const version = buffer.readByte();\r\n        notNetcdf((version > 2), 'unknown version');\r\n        // Read the header\r\n        this.header = header(buffer, version);\r\n        this.buffer = buffer;\r\n    }\r\n    /**\r\n     * @return {string} - Version for the NetCDF format\r\n     */\r\n    get version() {\r\n        if (this.header.version === 1) {\r\n            return 'classic format';\r\n        }\r\n        else {\r\n            return '64-bit offset format';\r\n        }\r\n    }\r\n    /**\r\n     * @return {object} - Metadata for the record dimension\r\n     *  * `length`: Number of elements in the record dimension\r\n     *  * `id`: Id number in the list of dimensions for the record dimension\r\n     *  * `name`: String with the name of the record dimension\r\n     *  * `recordStep`: Number with the record variables step size\r\n     */\r\n    get recordDimension() {\r\n        return this.header.recordDimension;\r\n    }\r\n    /**\r\n     * @return {Array<object>} - List of dimensions with:\r\n     *  * `name`: String with the name of the dimension\r\n     *  * `size`: Number with the size of the dimension\r\n     */\r\n    get dimensions() {\r\n        return this.header.dimensions;\r\n    }\r\n    /**\r\n     * @return {Array<object>} - List of global attributes with:\r\n     *  * `name`: String with the name of the attribute\r\n     *  * `type`: String with the type of the attribute\r\n     *  * `value`: A number or string with the value of the attribute\r\n     */\r\n    get globalAttributes() {\r\n        return this.header.globalAttributes;\r\n    }\r\n    /**\r\n     * @return {Array<object>} - List of variables with:\r\n     *  * `name`: String with the name of the variable\r\n     *  * `dimensions`: Array with the dimension IDs of the variable\r\n     *  * `attributes`: Array with the attributes of the variable\r\n     *  * `type`: String with the type of the variable\r\n     *  * `size`: Number with the size of the variable\r\n     *  * `offset`: Number with the offset where of the variable begins\r\n     *  * `record`: True if is a record variable, false otherwise\r\n     */\r\n    get variables() {\r\n        return this.header.variables;\r\n    }\r\n    /**\r\n     * Checks if a variable is available\r\n     * @param {string|object} variableName - Name of the variable to check\r\n     * @return {Boolean} - Variable existence\r\n     */\r\n    hasDataVariable(variableName) {\r\n        return this.header.variables.findIndex(function (val) {\r\n            return val.name === variableName;\r\n        }) !== -1;\r\n    }\r\n    /**\r\n     * Retrieves the data for a given variable\r\n     * @param {string|object} variableName - Name of the variable to search or variable object\r\n     * @return {Array} - List with the variable values\r\n     */\r\n    getDataVariable(variableName) {\r\n        let variable;\r\n        if (typeof variableName === 'string') {\r\n            // search the variable\r\n            variable = this.header.variables.find(function (val) {\r\n                return val.name === variableName;\r\n            });\r\n        }\r\n        else {\r\n            variable = variableName;\r\n        }\r\n        // throws if variable not found\r\n        notNetcdf((variable === undefined), 'variable not found');\r\n        // go to the offset position\r\n        this.buffer.seek(variable.offset);\r\n        if (variable.record) {\r\n            // record variable case\r\n            return record(this.buffer, variable, this.header.recordDimension);\r\n        }\r\n        else {\r\n            // non-record variable case\r\n            return nonRecord(this.buffer, variable);\r\n        }\r\n    }\r\n}\r\nexport default NetcdfReader;\r\n//# sourceMappingURL=netcdf-reader.js.map","/**\r\n * @file Nctraj Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport TrajectoryParser from './trajectory-parser';\r\nimport NetcdfReader from '../utils/netcdf-reader';\r\nclass NctrajParser extends TrajectoryParser {\r\n    get type() { return 'nctraj'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        // http://ambermd.org/netcdf/nctraj.xhtml\r\n        if (Debug)\r\n            Log.time('NctrajParser._parse ' + this.name);\r\n        const netcdfReader = new NetcdfReader(this.streamer.data);\r\n        const f = this.frames;\r\n        const coordinates = f.coordinates;\r\n        const boxes = f.boxes;\r\n        const times = f.times;\r\n        netcdfReader.getDataVariable('coordinates').forEach(function (c) {\r\n            coordinates.push(new Float32Array(c));\r\n        });\r\n        if (netcdfReader.hasDataVariable('cell_lengths')) {\r\n            netcdfReader.getDataVariable('cell_lengths').forEach(function (b) {\r\n                boxes.push(new Float32Array(b));\r\n            });\r\n        }\r\n        if (netcdfReader.hasDataVariable('time')) {\r\n            netcdfReader.getDataVariable('time').forEach(function (t) {\r\n                times.push(t);\r\n            });\r\n        }\r\n        if (times.length >= 1) {\r\n            f.timeOffset = times[0];\r\n        }\r\n        if (times.length >= 2) {\r\n            f.deltaTime = times[1] - times[0];\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('NctrajParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('nctraj', NctrajParser);\r\nParserRegistry.add('ncdf', NctrajParser);\r\nParserRegistry.add('nc', NctrajParser);\r\nexport default NctrajParser;\r\n//# sourceMappingURL=nctraj-parser.js.map","/**\r\n * @file Trr Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { ensureBuffer } from '../utils';\r\nimport TrajectoryParser from './trajectory-parser';\r\nclass TrrParser extends TrajectoryParser {\r\n    get type() { return 'trr'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        // https://github.com/gromacs/gromacs/blob/master/src/gromacs/fileio/trrio.cpp\r\n        if (Debug)\r\n            Log.time('TrrParser._parse ' + this.name);\r\n        const bin = ensureBuffer(this.streamer.data);\r\n        const dv = new DataView(bin);\r\n        const f = this.frames;\r\n        const coordinates = f.coordinates;\r\n        const boxes = f.boxes;\r\n        const times = f.times;\r\n        let offset = 0;\r\n        while (true) {\r\n            // const magicnum = dv.getInt32(offset)\r\n            // const i1 = dv.getFloat32(offset + 4)\r\n            offset += 8;\r\n            const versionSize = dv.getInt32(offset);\r\n            offset += 4;\r\n            offset += versionSize;\r\n            // const irSize = dv.getInt32(offset)\r\n            // const eSize = dv.getInt32(offset + 4)\r\n            const boxSize = dv.getInt32(offset + 8);\r\n            const virSize = dv.getInt32(offset + 12);\r\n            const presSize = dv.getInt32(offset + 16);\r\n            // const topSize = dv.getInt32(offset + 20)\r\n            // const symSize = dv.getInt32(offset + 24)\r\n            const coordSize = dv.getInt32(offset + 28);\r\n            const velocitySize = dv.getInt32(offset + 32);\r\n            const forceSize = dv.getInt32(offset + 36);\r\n            const natoms = dv.getInt32(offset + 40);\r\n            // const step = dv.getInt32(offset + 44)\r\n            // const nre = dv.getInt32(offset + 48)\r\n            offset += 52;\r\n            const floatSize = boxSize / 9;\r\n            const natoms3 = natoms * 3;\r\n            // let lambda\r\n            if (floatSize === 8) {\r\n                times.push(dv.getFloat64(offset));\r\n                // lambda = dv.getFloat64(offset + 8)\r\n            }\r\n            else {\r\n                times.push(dv.getFloat32(offset));\r\n                // lambda = dv.getFloat32(offset + 4)\r\n            }\r\n            offset += 2 * floatSize;\r\n            if (boxSize) {\r\n                const box = new Float32Array(9);\r\n                if (floatSize === 8) {\r\n                    for (let i = 0; i < 9; ++i) {\r\n                        box[i] = dv.getFloat64(offset) * 10;\r\n                        offset += 8;\r\n                    }\r\n                }\r\n                else {\r\n                    for (let i = 0; i < 9; ++i) {\r\n                        box[i] = dv.getFloat32(offset) * 10;\r\n                        offset += 4;\r\n                    }\r\n                }\r\n                boxes.push(box);\r\n            }\r\n            // ignore, unused\r\n            offset += virSize;\r\n            // ignore, unused\r\n            offset += presSize;\r\n            if (coordSize) {\r\n                let frameCoords;\r\n                if (floatSize === 8) {\r\n                    frameCoords = new Float32Array(natoms3);\r\n                    for (let i = 0; i < natoms3; ++i) {\r\n                        frameCoords[i] = dv.getFloat64(offset) * 10;\r\n                        offset += 8;\r\n                    }\r\n                }\r\n                else {\r\n                    const tmp = new Uint32Array(bin, offset, natoms3);\r\n                    for (let i = 0; i < natoms3; ++i) {\r\n                        const value = tmp[i];\r\n                        tmp[i] = (((value & 0xFF) << 24) | ((value & 0xFF00) << 8) |\r\n                            ((value >> 8) & 0xFF00) | ((value >> 24) & 0xFF));\r\n                    }\r\n                    frameCoords = new Float32Array(bin, offset, natoms3);\r\n                    for (let i = 0; i < natoms3; ++i) {\r\n                        frameCoords[i] *= 10;\r\n                        offset += 4;\r\n                    }\r\n                }\r\n                coordinates.push(frameCoords);\r\n            }\r\n            // ignore, unused\r\n            offset += velocitySize;\r\n            // ignore, unused\r\n            offset += forceSize;\r\n            if (offset >= bin.byteLength)\r\n                break;\r\n        }\r\n        if (times.length >= 1) {\r\n            f.timeOffset = times[0];\r\n        }\r\n        if (times.length >= 2) {\r\n            f.deltaTime = times[1] - times[0];\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('TrrParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('trr', TrrParser);\r\nexport default TrrParser;\r\n//# sourceMappingURL=trr-parser.js.map","/**\r\n * @file Xtc Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { ensureBuffer } from '../utils';\r\nimport TrajectoryParser from './trajectory-parser';\r\nconst MagicInts = new Uint32Array([\r\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 10, 12, 16, 20, 25, 32, 40, 50, 64,\r\n    80, 101, 128, 161, 203, 256, 322, 406, 512, 645, 812, 1024, 1290,\r\n    1625, 2048, 2580, 3250, 4096, 5060, 6501, 8192, 10321, 13003,\r\n    16384, 20642, 26007, 32768, 41285, 52015, 65536, 82570, 104031,\r\n    131072, 165140, 208063, 262144, 330280, 416127, 524287, 660561,\r\n    832255, 1048576, 1321122, 1664510, 2097152, 2642245, 3329021,\r\n    4194304, 5284491, 6658042, 8388607, 10568983, 13316085, 16777216\r\n]);\r\nconst FirstIdx = 9;\r\n// const LastIdx = MagicInts.length\r\nfunction sizeOfInt(size) {\r\n    let num = 1;\r\n    let numOfBits = 0;\r\n    while (size >= num && numOfBits < 32) {\r\n        numOfBits++;\r\n        num <<= 1;\r\n    }\r\n    return numOfBits;\r\n}\r\nconst _tmpBytes = new Uint8Array(32);\r\nfunction sizeOfInts(numOfInts, sizes) {\r\n    let numOfBytes = 1;\r\n    let numOfBits = 0;\r\n    _tmpBytes[0] = 1;\r\n    for (let i = 0; i < numOfInts; i++) {\r\n        let bytecnt;\r\n        let tmp = 0;\r\n        for (bytecnt = 0; bytecnt < numOfBytes; bytecnt++) {\r\n            tmp += _tmpBytes[bytecnt] * sizes[i];\r\n            _tmpBytes[bytecnt] = tmp & 0xff;\r\n            tmp >>= 8;\r\n        }\r\n        while (tmp !== 0) {\r\n            _tmpBytes[bytecnt++] = tmp & 0xff;\r\n            tmp >>= 8;\r\n        }\r\n        numOfBytes = bytecnt;\r\n    }\r\n    let num = 1;\r\n    numOfBytes--;\r\n    while (_tmpBytes[numOfBytes] >= num) {\r\n        numOfBits++;\r\n        num *= 2;\r\n    }\r\n    return numOfBits + numOfBytes * 8;\r\n}\r\nfunction decodeBits(buf, cbuf, numOfBits, buf2) {\r\n    const mask = (1 << numOfBits) - 1;\r\n    let lastBB0 = buf2[1];\r\n    let lastBB1 = buf2[2];\r\n    let cnt = buf[0];\r\n    let num = 0;\r\n    while (numOfBits >= 8) {\r\n        lastBB1 = (lastBB1 << 8) | cbuf[cnt++];\r\n        num |= (lastBB1 >> lastBB0) << (numOfBits - 8);\r\n        numOfBits -= 8;\r\n    }\r\n    if (numOfBits > 0) {\r\n        if (lastBB0 < numOfBits) {\r\n            lastBB0 += 8;\r\n            lastBB1 = (lastBB1 << 8) | cbuf[cnt++];\r\n        }\r\n        lastBB0 -= numOfBits;\r\n        num |= (lastBB1 >> lastBB0) & ((1 << numOfBits) - 1);\r\n    }\r\n    num &= mask;\r\n    buf[0] = cnt;\r\n    buf[1] = lastBB0;\r\n    buf[2] = lastBB1;\r\n    return num;\r\n}\r\nconst _tmpIntBytes = new Int32Array(32);\r\nfunction decodeInts(buf, cbuf, numOfInts, numOfBits, sizes, nums, buf2) {\r\n    let numOfBytes = 0;\r\n    _tmpIntBytes[1] = 0;\r\n    _tmpIntBytes[2] = 0;\r\n    _tmpIntBytes[3] = 0;\r\n    while (numOfBits > 8) {\r\n        // this is inversed??? why??? because of the endiannness???\r\n        _tmpIntBytes[numOfBytes++] = decodeBits(buf, cbuf, 8, buf2);\r\n        numOfBits -= 8;\r\n    }\r\n    if (numOfBits > 0) {\r\n        _tmpIntBytes[numOfBytes++] = decodeBits(buf, cbuf, numOfBits, buf2);\r\n    }\r\n    for (let i = numOfInts - 1; i > 0; i--) {\r\n        let num = 0;\r\n        for (let j = numOfBytes - 1; j >= 0; j--) {\r\n            num = (num << 8) | _tmpIntBytes[j];\r\n            const p = (num / sizes[i]) | 0;\r\n            _tmpIntBytes[j] = p;\r\n            num = num - p * sizes[i];\r\n        }\r\n        nums[i] = num;\r\n    }\r\n    nums[0] = (_tmpIntBytes[0] |\r\n        (_tmpIntBytes[1] << 8) |\r\n        (_tmpIntBytes[2] << 16) |\r\n        (_tmpIntBytes[3] << 24));\r\n}\r\nclass XtcParser extends TrajectoryParser {\r\n    get type() { return 'xtc'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        // https://github.com/gromacs/gromacs/blob/master/src/gromacs/fileio/xtcio.cpp\r\n        // https://github.com/gromacs/gromacs/blob/master/src/gromacs/fileio/libxdrf.cpp\r\n        if (Debug)\r\n            Log.time('XtcParser._parse ' + this.name);\r\n        const bin = ensureBuffer(this.streamer.data);\r\n        const dv = new DataView(bin);\r\n        const f = this.frames;\r\n        const coordinates = f.coordinates;\r\n        const boxes = f.boxes;\r\n        const times = f.times;\r\n        const minMaxInt = new Int32Array(6);\r\n        const sizeint = new Int32Array(3);\r\n        const bitsizeint = new Int32Array(3);\r\n        const sizesmall = new Uint32Array(3);\r\n        const thiscoord = new Float32Array(3);\r\n        const prevcoord = new Float32Array(3);\r\n        let offset = 0;\r\n        const buf = new Int32Array(3);\r\n        const buf2 = new Uint32Array(buf.buffer);\r\n        while (true) {\r\n            let frameCoords;\r\n            // const magicnum = dv.getInt32(offset)\r\n            const natoms = dv.getInt32(offset + 4);\r\n            // const step = dv.getInt32(offset + 8)\r\n            offset += 12;\r\n            const natoms3 = natoms * 3;\r\n            times.push(dv.getFloat32(offset));\r\n            offset += 4;\r\n            const box = new Float32Array(9);\r\n            for (let i = 0; i < 9; ++i) {\r\n                box[i] = dv.getFloat32(offset) * 10;\r\n                offset += 4;\r\n            }\r\n            boxes.push(box);\r\n            if (natoms <= 9) { // no compression\r\n                frameCoords = new Float32Array(natoms);\r\n                for (let i = 0; i < natoms; ++i) {\r\n                    frameCoords[i] = dv.getFloat32(offset);\r\n                    offset += 4;\r\n                }\r\n            }\r\n            else {\r\n                buf[0] = buf[1] = buf[2] = 0.0;\r\n                sizeint[0] = sizeint[1] = sizeint[2] = 0;\r\n                sizesmall[0] = sizesmall[1] = sizesmall[2] = 0;\r\n                bitsizeint[0] = bitsizeint[1] = bitsizeint[2] = 0;\r\n                thiscoord[0] = thiscoord[1] = thiscoord[2] = 0;\r\n                prevcoord[0] = prevcoord[1] = prevcoord[2] = 0;\r\n                frameCoords = new Float32Array(natoms3);\r\n                let lfp = 0;\r\n                const lsize = dv.getInt32(offset);\r\n                offset += 4;\r\n                const precision = dv.getFloat32(offset);\r\n                offset += 4;\r\n                minMaxInt[0] = dv.getInt32(offset);\r\n                minMaxInt[1] = dv.getInt32(offset + 4);\r\n                minMaxInt[2] = dv.getInt32(offset + 8);\r\n                minMaxInt[3] = dv.getInt32(offset + 12);\r\n                minMaxInt[4] = dv.getInt32(offset + 16);\r\n                minMaxInt[5] = dv.getInt32(offset + 20);\r\n                sizeint[0] = minMaxInt[3] - minMaxInt[0] + 1;\r\n                sizeint[1] = minMaxInt[4] - minMaxInt[1] + 1;\r\n                sizeint[2] = minMaxInt[5] - minMaxInt[2] + 1;\r\n                offset += 24;\r\n                let bitsize;\r\n                if ((sizeint[0] | sizeint[1] | sizeint[2]) > 0xffffff) {\r\n                    bitsizeint[0] = sizeOfInt(sizeint[0]);\r\n                    bitsizeint[1] = sizeOfInt(sizeint[1]);\r\n                    bitsizeint[2] = sizeOfInt(sizeint[2]);\r\n                    bitsize = 0; // flag the use of large sizes\r\n                }\r\n                else {\r\n                    bitsize = sizeOfInts(3, sizeint);\r\n                }\r\n                let smallidx = dv.getInt32(offset);\r\n                offset += 4;\r\n                // if (smallidx == 0) {alert(\"Undocumented error 1\"); return;}\r\n                // let tmpIdx = smallidx + 8\r\n                // const maxidx = (LastIdx < tmpIdx) ? LastIdx : tmpIdx\r\n                // const minidx = maxidx - 8  // often this equal smallidx\r\n                let tmpIdx = smallidx - 1;\r\n                tmpIdx = (FirstIdx > tmpIdx) ? FirstIdx : tmpIdx;\r\n                let smaller = (MagicInts[tmpIdx] / 2) | 0;\r\n                let smallnum = (MagicInts[smallidx] / 2) | 0;\r\n                sizesmall[0] = sizesmall[1] = sizesmall[2] = MagicInts[smallidx];\r\n                // larger = MagicInts[maxidx]\r\n                let adz = Math.ceil(dv.getInt32(offset) / 4) * 4;\r\n                offset += 4;\r\n                // if (tmpIdx == 0) {alert(\"Undocumented error 2\"); return;}\r\n                // buf = new Int32Array(bin, offset);\r\n                // buf8 = new Uint8Array(bin, offset);\r\n                // tmpIdx += 3; rndup = tmpIdx%4;\r\n                // for (i=tmpIdx+rndup-1; i>=tmpIdx; i--) buf8[i] = 0;\r\n                // now unpack buf2...\r\n                const invPrecision = 1.0 / precision;\r\n                let run = 0;\r\n                let i = 0;\r\n                const buf8 = new Uint8Array(bin, offset); // 229...\r\n                thiscoord[0] = thiscoord[1] = thiscoord[2] = 0;\r\n                while (i < lsize) {\r\n                    if (bitsize === 0) {\r\n                        thiscoord[0] = decodeBits(buf, buf8, bitsizeint[0], buf2);\r\n                        thiscoord[1] = decodeBits(buf, buf8, bitsizeint[1], buf2);\r\n                        thiscoord[2] = decodeBits(buf, buf8, bitsizeint[2], buf2);\r\n                    }\r\n                    else {\r\n                        decodeInts(buf, buf8, 3, bitsize, sizeint, thiscoord, buf2);\r\n                    }\r\n                    i++;\r\n                    thiscoord[0] += minMaxInt[0];\r\n                    thiscoord[1] += minMaxInt[1];\r\n                    thiscoord[2] += minMaxInt[2];\r\n                    prevcoord[0] = thiscoord[0];\r\n                    prevcoord[1] = thiscoord[1];\r\n                    prevcoord[2] = thiscoord[2];\r\n                    const flag = decodeBits(buf, buf8, 1, buf2);\r\n                    let isSmaller = 0;\r\n                    if (flag === 1) {\r\n                        run = decodeBits(buf, buf8, 5, buf2);\r\n                        isSmaller = run % 3;\r\n                        run -= isSmaller;\r\n                        isSmaller--;\r\n                    }\r\n                    // if ((lfp-ptrstart)+run > size3){\r\n                    //   fprintf(stderr, \"(xdrfile error) Buffer overrun during decompression.\\n\");\r\n                    //   return 0;\r\n                    // }\r\n                    if (run > 0) {\r\n                        thiscoord[0] = thiscoord[1] = thiscoord[2] = 0;\r\n                        for (let k = 0; k < run; k += 3) {\r\n                            decodeInts(buf, buf8, 3, smallidx, sizesmall, thiscoord, buf2);\r\n                            i++;\r\n                            thiscoord[0] += prevcoord[0] - smallnum;\r\n                            thiscoord[1] += prevcoord[1] - smallnum;\r\n                            thiscoord[2] += prevcoord[2] - smallnum;\r\n                            if (k === 0) {\r\n                                // interchange first with second atom for\r\n                                // better compression of water molecules\r\n                                let tmpSwap = thiscoord[0];\r\n                                thiscoord[0] = prevcoord[0];\r\n                                prevcoord[0] = tmpSwap;\r\n                                tmpSwap = thiscoord[1];\r\n                                thiscoord[1] = prevcoord[1];\r\n                                prevcoord[1] = tmpSwap;\r\n                                tmpSwap = thiscoord[2];\r\n                                thiscoord[2] = prevcoord[2];\r\n                                prevcoord[2] = tmpSwap;\r\n                                frameCoords[lfp++] = prevcoord[0] * invPrecision;\r\n                                frameCoords[lfp++] = prevcoord[1] * invPrecision;\r\n                                frameCoords[lfp++] = prevcoord[2] * invPrecision;\r\n                            }\r\n                            else {\r\n                                prevcoord[0] = thiscoord[0];\r\n                                prevcoord[1] = thiscoord[1];\r\n                                prevcoord[2] = thiscoord[2];\r\n                            }\r\n                            frameCoords[lfp++] = thiscoord[0] * invPrecision;\r\n                            frameCoords[lfp++] = thiscoord[1] * invPrecision;\r\n                            frameCoords[lfp++] = thiscoord[2] * invPrecision;\r\n                        }\r\n                    }\r\n                    else {\r\n                        frameCoords[lfp++] = thiscoord[0] * invPrecision;\r\n                        frameCoords[lfp++] = thiscoord[1] * invPrecision;\r\n                        frameCoords[lfp++] = thiscoord[2] * invPrecision;\r\n                    }\r\n                    smallidx += isSmaller;\r\n                    if (isSmaller < 0) {\r\n                        smallnum = smaller;\r\n                        if (smallidx > FirstIdx) {\r\n                            smaller = (MagicInts[smallidx - 1] / 2) | 0;\r\n                        }\r\n                        else {\r\n                            smaller = 0;\r\n                        }\r\n                    }\r\n                    else if (isSmaller > 0) {\r\n                        smaller = smallnum;\r\n                        smallnum = (MagicInts[smallidx] / 2) | 0;\r\n                    }\r\n                    sizesmall[0] = sizesmall[1] = sizesmall[2] = MagicInts[smallidx];\r\n                    if (sizesmall[0] === 0 || sizesmall[1] === 0 || sizesmall[2] === 0) {\r\n                        console.error('(xdrfile error) Undefined error.');\r\n                        return;\r\n                    }\r\n                }\r\n                offset += adz;\r\n            }\r\n            for (let c = 0; c < natoms3; c++) {\r\n                frameCoords[c] *= 10;\r\n            }\r\n            coordinates.push(frameCoords);\r\n            if (offset >= bin.byteLength)\r\n                break;\r\n        }\r\n        if (times.length >= 1) {\r\n            f.timeOffset = times[0];\r\n        }\r\n        if (times.length >= 2) {\r\n            f.deltaTime = times[1] - times[0];\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('XtcParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('xtc', XtcParser);\r\nexport default XtcParser;\r\n//# sourceMappingURL=xtc-parser.js.map","/**\r\n * @file Volume Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport { defaults } from '../utils';\r\nimport Parser from './parser';\r\nimport Volume from '../surface/volume';\r\nclass VolumeParser extends Parser {\r\n    constructor(streamer, params) {\r\n        const p = params || {};\r\n        super(streamer, p);\r\n        this.volume = new Volume(this.name, this.path);\r\n        this.voxelSize = defaults(p.voxelSize, 1);\r\n    }\r\n    get type() { return 'volume'; }\r\n    get __objName() { return 'volume'; }\r\n    _afterParse() {\r\n        this.volume.setMatrix(this.getMatrix());\r\n        super._afterParse();\r\n    }\r\n    getMatrix() {\r\n        return new Matrix4();\r\n    }\r\n}\r\nexport default VolumeParser;\r\n//# sourceMappingURL=volume-parser.js.map","/**\r\n * @file Cube Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4, Vector3 } from 'three';\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport VolumeParser from './volume-parser';\r\n// @author Johanna Tiemann <johanna.tiemann@googlemail.com>\r\n// @author Alexander Rose <alexander.rose@weirdbyte.de>\r\nconst reWhitespace = /\\s+/;\r\nconst reScientificNotation = /-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?/g;\r\nconst bohrToAngstromFactor = 0.529177210859;\r\nclass CubeParser extends VolumeParser {\r\n    get type() { return 'cube'; }\r\n    _parse() {\r\n        // http://paulbourke.net/dataformats/cube/\r\n        if (Debug)\r\n            Log.time('CubeParser._parse ' + this.name);\r\n        const v = this.volume;\r\n        const headerLines = this.streamer.peekLines(6);\r\n        const header = {};\r\n        const scaleFactor = bohrToAngstromFactor * this.voxelSize;\r\n        function h(k, l) {\r\n            var field = headerLines[k].trim().split(reWhitespace)[l];\r\n            return parseFloat(field);\r\n        }\r\n        header.atomCount = Math.abs(h(2, 0)); // Number of atoms\r\n        header.originX = h(2, 1) * bohrToAngstromFactor; // Position of origin of volumetric data\r\n        header.originY = h(2, 2) * bohrToAngstromFactor;\r\n        header.originZ = h(2, 3) * bohrToAngstromFactor;\r\n        header.NVX = h(3, 0); // Number of voxels\r\n        header.NVY = h(4, 0);\r\n        header.NVZ = h(5, 0);\r\n        header.basisX = new Vector3(h(3, 1), h(3, 2), h(3, 3))\r\n            .multiplyScalar(scaleFactor);\r\n        header.basisY = new Vector3(h(4, 1), h(4, 2), h(4, 3))\r\n            .multiplyScalar(scaleFactor);\r\n        header.basisZ = new Vector3(h(5, 1), h(5, 2), h(5, 3))\r\n            .multiplyScalar(scaleFactor);\r\n        const data = new Float32Array(header.NVX * header.NVY * header.NVZ);\r\n        let count = 0;\r\n        let lineNo = 0;\r\n        const oribitalFlag = h(2, 0) > 0 ? 0 : 1;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                const line = lines[i].trim();\r\n                if (line !== '' && lineNo >= header.atomCount + 6 + oribitalFlag) {\r\n                    const m = line.match(reScientificNotation);\r\n                    for (let j = 0, lj = m.length; j < lj; ++j) {\r\n                        data[count] = parseFloat(m[j]);\r\n                        ++count;\r\n                    }\r\n                }\r\n                ++lineNo;\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        v.header = header;\r\n        v.setData(data, header.NVZ, header.NVY, header.NVX);\r\n        if (Debug)\r\n            Log.timeEnd('CubeParser._parse ' + this.name);\r\n    }\r\n    getMatrix() {\r\n        const h = this.volume.header;\r\n        const matrix = new Matrix4();\r\n        matrix.multiply(new Matrix4().makeTranslation(h.originX, h.originY, h.originZ));\r\n        matrix.multiply(new Matrix4().makeBasis(h.basisZ, h.basisY, h.basisX));\r\n        return matrix;\r\n    }\r\n}\r\nParserRegistry.add('cub', CubeParser);\r\nParserRegistry.add('cube', CubeParser);\r\nexport default CubeParser;\r\n//# sourceMappingURL=cube-parser.js.map","/**\r\n * @file Dsn6 Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { ensureBuffer } from '../utils';\r\nimport { degToRad } from '../math/math-utils';\r\nimport VolumeParser from './volume-parser';\r\nclass Dsn6Parser extends VolumeParser {\r\n    get type() { return 'dsn6'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        // DSN6 http://www.uoxray.uoregon.edu/tnt/manual/node104.html\r\n        // BRIX http://svn.cgl.ucsf.edu/svn/chimera/trunk/libs/VolumeData/dsn6/brix-1.html\r\n        if (Debug)\r\n            Log.time('Dsn6Parser._parse ' + this.name);\r\n        const v = this.volume;\r\n        const header = {};\r\n        let divisor, summand;\r\n        const bin = ensureBuffer(this.streamer.data);\r\n        const intView = new Int16Array(bin);\r\n        const byteView = new Uint8Array(bin);\r\n        const brixStr = String.fromCharCode.apply(null, byteView.subarray(0, 512));\r\n        if (brixStr.startsWith(':-)')) {\r\n            header.xStart = parseInt(brixStr.substr(10, 5)); // NXSTART\r\n            header.yStart = parseInt(brixStr.substr(15, 5));\r\n            header.zStart = parseInt(brixStr.substr(20, 5));\r\n            header.xExtent = parseInt(brixStr.substr(32, 5)); // NX\r\n            header.yExtent = parseInt(brixStr.substr(38, 5));\r\n            header.zExtent = parseInt(brixStr.substr(42, 5));\r\n            header.xRate = parseInt(brixStr.substr(52, 5)); // MX\r\n            header.yRate = parseInt(brixStr.substr(58, 5));\r\n            header.zRate = parseInt(brixStr.substr(62, 5));\r\n            header.xlen = parseFloat(brixStr.substr(73, 10)) * this.voxelSize;\r\n            header.ylen = parseFloat(brixStr.substr(83, 10)) * this.voxelSize;\r\n            header.zlen = parseFloat(brixStr.substr(93, 10)) * this.voxelSize;\r\n            header.alpha = parseFloat(brixStr.substr(103, 10));\r\n            header.beta = parseFloat(brixStr.substr(113, 10));\r\n            header.gamma = parseFloat(brixStr.substr(123, 10));\r\n            divisor = parseFloat(brixStr.substr(138, 12)) / 100;\r\n            summand = parseInt(brixStr.substr(155, 8));\r\n            header.sigma = parseFloat(brixStr.substr(170, 12)) * 100;\r\n        }\r\n        else {\r\n            // swap byte order when big endian\r\n            if (intView[18] !== 100) {\r\n                for (let i = 0, n = intView.length; i < n; ++i) {\r\n                    const val = intView[i];\r\n                    intView[i] = ((val & 0xff) << 8) | ((val >> 8) & 0xff);\r\n                }\r\n            }\r\n            header.xStart = intView[0]; // NXSTART\r\n            header.yStart = intView[1];\r\n            header.zStart = intView[2];\r\n            header.xExtent = intView[3]; // NX\r\n            header.yExtent = intView[4];\r\n            header.zExtent = intView[5];\r\n            header.xRate = intView[6]; // MX\r\n            header.yRate = intView[7];\r\n            header.zRate = intView[8];\r\n            const factor = 1 / intView[17];\r\n            const scalingFactor = factor * this.voxelSize;\r\n            header.xlen = intView[9] * scalingFactor;\r\n            header.ylen = intView[10] * scalingFactor;\r\n            header.zlen = intView[11] * scalingFactor;\r\n            header.alpha = intView[12] * factor;\r\n            header.beta = intView[13] * factor;\r\n            header.gamma = intView[14] * factor;\r\n            divisor = intView[15] / 100;\r\n            summand = intView[16];\r\n            header.gamma = intView[14] * factor;\r\n        }\r\n        v.header = header;\r\n        if (Debug)\r\n            Log.log(header, divisor, summand);\r\n        const data = new Float32Array(header.xExtent * header.yExtent * header.zExtent);\r\n        let offset = 512;\r\n        const xBlocks = Math.ceil(header.xExtent / 8);\r\n        const yBlocks = Math.ceil(header.yExtent / 8);\r\n        const zBlocks = Math.ceil(header.zExtent / 8);\r\n        // loop over blocks\r\n        for (var zz = 0; zz < zBlocks; ++zz) {\r\n            for (var yy = 0; yy < yBlocks; ++yy) {\r\n                for (var xx = 0; xx < xBlocks; ++xx) {\r\n                    // loop inside block\r\n                    for (var k = 0; k < 8; ++k) {\r\n                        var z = 8 * zz + k;\r\n                        for (var j = 0; j < 8; ++j) {\r\n                            var y = 8 * yy + j;\r\n                            for (var i = 0; i < 8; ++i) {\r\n                                var x = 8 * xx + i;\r\n                                // check if remaining slice-part contains data\r\n                                if (x < header.xExtent && y < header.yExtent && z < header.zExtent) {\r\n                                    var idx = ((((x * header.yExtent) + y) * header.zExtent) + z);\r\n                                    data[idx] = (byteView[offset] - summand) / divisor;\r\n                                    ++offset;\r\n                                }\r\n                                else {\r\n                                    offset += 8 - i;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        v.setData(data, header.zExtent, header.yExtent, header.xExtent);\r\n        if (header.sigma) {\r\n            v.setStats(undefined, undefined, undefined, header.sigma);\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('Dsn6Parser._parse ' + this.name);\r\n    }\r\n    getMatrix() {\r\n        const h = this.volume.header;\r\n        const basisX = [\r\n            h.xlen,\r\n            0,\r\n            0\r\n        ];\r\n        const basisY = [\r\n            h.ylen * Math.cos(Math.PI / 180.0 * h.gamma),\r\n            h.ylen * Math.sin(Math.PI / 180.0 * h.gamma),\r\n            0\r\n        ];\r\n        const basisZ = [\r\n            h.zlen * Math.cos(Math.PI / 180.0 * h.beta),\r\n            h.zlen * (Math.cos(Math.PI / 180.0 * h.alpha) -\r\n                Math.cos(Math.PI / 180.0 * h.gamma) *\r\n                    Math.cos(Math.PI / 180.0 * h.beta)) / Math.sin(Math.PI / 180.0 * h.gamma),\r\n            0\r\n        ];\r\n        basisZ[2] = Math.sqrt(h.zlen * h.zlen * Math.sin(Math.PI / 180.0 * h.beta) *\r\n            Math.sin(Math.PI / 180.0 * h.beta) - basisZ[1] * basisZ[1]);\r\n        const basis = [[], basisX, basisY, basisZ];\r\n        const nxyz = [0, h.xRate, h.yRate, h.zRate];\r\n        const mapcrs = [0, 1, 2, 3];\r\n        const matrix = new Matrix4();\r\n        matrix.set(basis[mapcrs[1]][0] / nxyz[mapcrs[1]], basis[mapcrs[2]][0] / nxyz[mapcrs[2]], basis[mapcrs[3]][0] / nxyz[mapcrs[3]], 0, basis[mapcrs[1]][1] / nxyz[mapcrs[1]], basis[mapcrs[2]][1] / nxyz[mapcrs[2]], basis[mapcrs[3]][1] / nxyz[mapcrs[3]], 0, basis[mapcrs[1]][2] / nxyz[mapcrs[1]], basis[mapcrs[2]][2] / nxyz[mapcrs[2]], basis[mapcrs[3]][2] / nxyz[mapcrs[3]], 0, 0, 0, 0, 1);\r\n        matrix.multiply(new Matrix4().makeRotationY(degToRad(90)));\r\n        matrix.multiply(new Matrix4().makeTranslation(-h.zStart, h.yStart, h.xStart));\r\n        matrix.multiply(new Matrix4().makeScale(-1, 1, 1));\r\n        return matrix;\r\n    }\r\n}\r\nParserRegistry.add('dsn6', Dsn6Parser);\r\nParserRegistry.add('brix', Dsn6Parser);\r\nexport default Dsn6Parser;\r\n//# sourceMappingURL=dsn6-parser.js.map","/**\r\n * @file Dx Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { degToRad } from '../math/math-utils';\r\nimport VolumeParser from './volume-parser';\r\nconst reWhitespace = /\\s+/;\r\nclass DxParser extends VolumeParser {\r\n    get type() { return 'dx'; }\r\n    _parse() {\r\n        // http://apbs-pdb2pqr.readthedocs.io/en/latest/formats/opendx.html\r\n        if (Debug)\r\n            Log.time('DxParser._parse ' + this.name);\r\n        const v = this.volume;\r\n        const headerLines = this.streamer.peekLines(30);\r\n        const headerInfo = this.parseHeaderLines(headerLines);\r\n        const header = this.volume.header;\r\n        const dataLineStart = headerInfo.dataLineStart;\r\n        const size = header.nx * header.ny * header.nz;\r\n        const data = new Float32Array(size);\r\n        let count = 0;\r\n        let lineNo = 0;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                if (count < size && lineNo > dataLineStart) {\r\n                    const line = lines[i].trim();\r\n                    if (line !== '') {\r\n                        const ls = line.split(reWhitespace);\r\n                        for (let j = 0, lj = ls.length; j < lj; ++j) {\r\n                            data[count] = parseFloat(ls[j]);\r\n                            ++count;\r\n                        }\r\n                    }\r\n                }\r\n                ++lineNo;\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        v.setData(data, header.nz, header.ny, header.nx);\r\n        if (Debug)\r\n            Log.timeEnd('DxParser._parse ' + this.name);\r\n    }\r\n    parseHeaderLines(headerLines) {\r\n        const header = {};\r\n        const n = headerLines.length;\r\n        let dataLineStart = 0;\r\n        let headerByteCount = 0;\r\n        let deltaLineCount = 0;\r\n        for (let i = 0; i < n; ++i) {\r\n            let ls;\r\n            const line = headerLines[i];\r\n            if (line.startsWith('object 1')) {\r\n                ls = line.split(reWhitespace);\r\n                header.nx = parseInt(ls[5]);\r\n                header.ny = parseInt(ls[6]);\r\n                header.nz = parseInt(ls[7]);\r\n            }\r\n            else if (line.startsWith('origin')) {\r\n                ls = line.split(reWhitespace);\r\n                header.xmin = parseFloat(ls[1]);\r\n                header.ymin = parseFloat(ls[2]);\r\n                header.zmin = parseFloat(ls[3]);\r\n            }\r\n            else if (line.startsWith('delta')) {\r\n                ls = line.split(reWhitespace);\r\n                if (deltaLineCount === 0) {\r\n                    header.hx = parseFloat(ls[1]) * this.voxelSize;\r\n                }\r\n                else if (deltaLineCount === 1) {\r\n                    header.hy = parseFloat(ls[2]) * this.voxelSize;\r\n                }\r\n                else if (deltaLineCount === 2) {\r\n                    header.hz = parseFloat(ls[3]) * this.voxelSize;\r\n                }\r\n                deltaLineCount += 1;\r\n            }\r\n            else if (line.startsWith('object 3')) {\r\n                dataLineStart = i;\r\n                headerByteCount += line.length + 1;\r\n                break;\r\n            }\r\n            headerByteCount += line.length + 1;\r\n        }\r\n        this.volume.header = header;\r\n        return {\r\n            dataLineStart: dataLineStart,\r\n            headerByteCount: headerByteCount\r\n        };\r\n    }\r\n    getMatrix() {\r\n        const h = this.volume.header;\r\n        const matrix = new Matrix4();\r\n        matrix.multiply(new Matrix4().makeRotationY(degToRad(90)));\r\n        matrix.multiply(new Matrix4().makeTranslation(-h.zmin, h.ymin, h.xmin));\r\n        matrix.multiply(new Matrix4().makeScale(-h.hz, h.hy, h.hx));\r\n        return matrix;\r\n    }\r\n}\r\nParserRegistry.add('dx', DxParser);\r\nexport default DxParser;\r\n//# sourceMappingURL=dx-parser.js.map","/**\r\n * @file Dxbin Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { uint8ToLines, ensureBuffer } from '../utils';\r\nimport DxParser from './dx-parser';\r\nclass DxbinParser extends DxParser {\r\n    get type() { return 'dxbin'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        // https://github.com/Electrostatics/apbs-pdb2pqr/issues/216\r\n        if (Debug)\r\n            Log.time('DxbinParser._parse ' + this.name);\r\n        const bin = ensureBuffer(this.streamer.data);\r\n        const headerLines = uint8ToLines(new Uint8Array(bin, 0, 1000));\r\n        const headerInfo = this.parseHeaderLines(headerLines);\r\n        const header = this.volume.header;\r\n        const headerByteCount = headerInfo.headerByteCount;\r\n        const size = header.nx * header.ny * header.nz;\r\n        const dv = new DataView(bin);\r\n        const data = new Float32Array(size);\r\n        for (let i = 0; i < size; ++i) {\r\n            data[i] = dv.getFloat64(i * 8 + headerByteCount, true);\r\n        }\r\n        this.volume.setData(data, header.nz, header.ny, header.nx);\r\n        if (Debug)\r\n            Log.timeEnd('DxbinParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('dxbin', DxbinParser);\r\nexport default DxbinParser;\r\n//# sourceMappingURL=dxbin-parser.js.map","/**\r\n * @file Mrc Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Matrix4 } from 'three';\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { ensureBuffer } from '../utils';\r\nimport VolumeParser from './volume-parser';\r\nclass MrcParser extends VolumeParser {\r\n    get type() { return 'mrc'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        // MRC\r\n        // http://ami.scripps.edu/software/mrctools/mrc_specification.php\r\n        // http://www2.mrc-lmb.cam.ac.uk/research/locally-developed-software/image-processing-software/#image\r\n        // http://bio3d.colorado.edu/imod/doc/mrc_format.txt\r\n        // CCP4 (MAP)\r\n        // http://www.ccp4.ac.uk/html/maplib.html\r\n        // MRC format does not use the skew transformation header records (words 25-37)\r\n        // CCP4 format does not use the ORIGIN header records (words 50-52)\r\n        if (Debug)\r\n            Log.time('MrcParser._parse ' + this.name);\r\n        const v = this.volume;\r\n        const header = {};\r\n        const bin = ensureBuffer(this.streamer.data);\r\n        const intView = new Int32Array(bin, 0, 56);\r\n        const floatView = new Float32Array(bin, 0, 56);\r\n        const dv = new DataView(bin);\r\n        // 53  MAP         Character string 'MAP ' to identify file type\r\n        header.MAP = String.fromCharCode(dv.getUint8(52 * 4), dv.getUint8(52 * 4 + 1), dv.getUint8(52 * 4 + 2), dv.getUint8(52 * 4 + 3));\r\n        // 54  MACHST      Machine stamp indicating machine type which wrote file\r\n        //                 17 and 17 for big-endian or 68 and 65 for little-endian\r\n        header.MACHST = [dv.getUint8(53 * 4), dv.getUint8(53 * 4 + 1)];\r\n        // swap byte order when big endian\r\n        if (header.MACHST[0] === 17 && header.MACHST[1] === 17) {\r\n            const n = bin.byteLength;\r\n            for (let i = 0; i < n; i += 4) {\r\n                dv.setFloat32(i, dv.getFloat32(i), true);\r\n            }\r\n        }\r\n        header.NX = intView[0]; // NC - columns (fastest changing)\r\n        header.NY = intView[1]; // NR - rows\r\n        header.NZ = intView[2]; // NS - sections (slowest changing)\r\n        // mode\r\n        //  0 image : signed 8-bit bytes range -128 to 127\r\n        //  1 image : 16-bit halfwords\r\n        //  2 image : 32-bit reals\r\n        //  3 transform : complex 16-bit integers\r\n        //  4 transform : complex 32-bit reals\r\n        //  6 image : unsigned 16-bit range 0 to 65535\r\n        // 16 image: unsigned char * 3 (for rgb data, non-standard)\r\n        //\r\n        // Note: Mode 2 is the normal mode used in the CCP4 programs.\r\n        //       Other modes than 2 and 0 may NOT WORK\r\n        header.MODE = intView[3];\r\n        // start\r\n        header.NXSTART = intView[4]; // NCSTART - first column\r\n        header.NYSTART = intView[5]; // NRSTART - first row\r\n        header.NZSTART = intView[6]; // NSSTART - first section\r\n        // intervals\r\n        header.MX = intView[7]; // intervals along x\r\n        header.MY = intView[8]; // intervals along y\r\n        header.MZ = intView[9]; // intervals along z\r\n        // cell length (Angstroms in CCP4)\r\n        header.xlen = floatView[10] * this.voxelSize;\r\n        header.ylen = floatView[11] * this.voxelSize;\r\n        header.zlen = floatView[12] * this.voxelSize;\r\n        // cell angle (Degrees)\r\n        header.alpha = floatView[13];\r\n        header.beta = floatView[14];\r\n        header.gamma = floatView[15];\r\n        // axis correspondence (1,2,3 for X,Y,Z)\r\n        header.MAPC = intView[16]; // column\r\n        header.MAPR = intView[17]; // row\r\n        header.MAPS = intView[18]; // section\r\n        // density statistics\r\n        header.DMIN = floatView[19];\r\n        header.DMAX = floatView[20];\r\n        header.DMEAN = floatView[21];\r\n        // space group number 0 or 1 (default=0)\r\n        header.ISPG = intView[22];\r\n        // number of bytes used for symmetry data (0 or 80)\r\n        header.NSYMBT = intView[23];\r\n        // Flag for skew transformation, =0 none, =1 if foll\r\n        header.LSKFLG = intView[24];\r\n        // 26-34  SKWMAT  Skew matrix S (in order S11, S12, S13, S21 etc) if\r\n        //                LSKFLG .ne. 0.\r\n        // 35-37  SKWTRN  Skew translation t if LSKFLG != 0.\r\n        //                Skew transformation is from standard orthogonal\r\n        //                coordinate frame (as used for atoms) to orthogonal\r\n        //                map frame, as Xo(map) = S * (Xo(atoms) - t)\r\n        // 38      future use       (some of these are used by the MSUBSX routines\r\n        //  .          \"              in MAPBRICK, MAPCONT and FRODO)\r\n        //  .          \"   (all set to zero by default)\r\n        //  .          \"\r\n        // 52          \"\r\n        // 50-52 origin in X,Y,Z used for transforms\r\n        header.originX = floatView[49];\r\n        header.originY = floatView[50];\r\n        header.originZ = floatView[51];\r\n        // 53  MAP         Character string 'MAP ' to identify file type\r\n        // => see top of this parser\r\n        // 54  MACHST      Machine stamp indicating machine type which wrote file\r\n        // => see top of this parser\r\n        // Rms deviation of map from mean density\r\n        header.ARMS = floatView[54];\r\n        // 56      NLABL           Number of labels being used\r\n        // 57-256  LABEL(20,10)    10  80 character text labels (ie. A4 format)\r\n        v.header = header;\r\n        // Log.log( header );\r\n        let data;\r\n        if (header.MODE === 2) {\r\n            data = new Float32Array(bin, 256 * 4 + header.NSYMBT, header.NX * header.NY * header.NZ);\r\n        }\r\n        else if (header.MODE === 0) {\r\n            data = new Float32Array(new Int8Array(bin, 256 * 4 + header.NSYMBT, header.NX * header.NY * header.NZ));\r\n            // based on uglymol (https://github.com/uglymol/uglymol) by Marcin Wojdyr (wojdyr)\r\n            // if the file was converted by mapmode2to0 - scale the data\r\n            if (intView[39] === -128 && intView[40] === 127) {\r\n                // scaling f(x)=b1*x+b0 such that f(-128)=min and f(127)=max\r\n                const b1 = (header.DMAX - header.DMIN) / 255.0;\r\n                const b0 = 0.5 * (header.DMIN + header.DMAX + b1);\r\n                for (let j = 0, jl = data.length; j < jl; ++j) {\r\n                    data[j] = b1 * data[j] + b0;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            Log.error('MrcParser unknown mode', header.MODE);\r\n        }\r\n        v.setData(data, header.NX, header.NY, header.NZ);\r\n        if (header.ARMS !== 0) {\r\n            v.setStats(header.DMIN, header.DMAX, header.DMEAN, header.ARMS);\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('MrcParser._parse ' + this.name);\r\n    }\r\n    getMatrix() {\r\n        const h = this.volume.header;\r\n        const basisX = [\r\n            h.xlen,\r\n            0,\r\n            0\r\n        ];\r\n        const basisY = [\r\n            h.ylen * Math.cos(Math.PI / 180.0 * h.gamma),\r\n            h.ylen * Math.sin(Math.PI / 180.0 * h.gamma),\r\n            0\r\n        ];\r\n        const basisZ = [\r\n            h.zlen * Math.cos(Math.PI / 180.0 * h.beta),\r\n            h.zlen * (Math.cos(Math.PI / 180.0 * h.alpha) -\r\n                Math.cos(Math.PI / 180.0 * h.gamma) *\r\n                    Math.cos(Math.PI / 180.0 * h.beta)) / Math.sin(Math.PI / 180.0 * h.gamma),\r\n            0\r\n        ];\r\n        basisZ[2] = Math.sqrt(h.zlen * h.zlen * Math.sin(Math.PI / 180.0 * h.beta) *\r\n            Math.sin(Math.PI / 180.0 * h.beta) - basisZ[1] * basisZ[1]);\r\n        const basis = [[], basisX, basisY, basisZ];\r\n        const nxyz = [0, h.MX, h.MY, h.MZ];\r\n        const mapcrs = [0, h.MAPC, h.MAPR, h.MAPS];\r\n        const matrix = new Matrix4();\r\n        matrix.set(basis[mapcrs[1]][0] / nxyz[mapcrs[1]], basis[mapcrs[2]][0] / nxyz[mapcrs[2]], basis[mapcrs[3]][0] / nxyz[mapcrs[3]], 0, basis[mapcrs[1]][1] / nxyz[mapcrs[1]], basis[mapcrs[2]][1] / nxyz[mapcrs[2]], basis[mapcrs[3]][1] / nxyz[mapcrs[3]], 0, basis[mapcrs[1]][2] / nxyz[mapcrs[1]], basis[mapcrs[2]][2] / nxyz[mapcrs[2]], basis[mapcrs[3]][2] / nxyz[mapcrs[3]], 0, 0, 0, 0, 1);\r\n        matrix.setPosition(new Vector3(h.originX, h.originY, h.originZ));\r\n        matrix.multiply(new Matrix4().makeTranslation(h.NXSTART, h.NYSTART, h.NZSTART));\r\n        return matrix;\r\n    }\r\n}\r\nParserRegistry.add('mrc', MrcParser);\r\nParserRegistry.add('ccp4', MrcParser);\r\nParserRegistry.add('map', MrcParser);\r\nexport default MrcParser;\r\n//# sourceMappingURL=mrc-parser.js.map","/**\r\n * @file Xplor Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Matrix4 } from 'three';\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport VolumeParser from './volume-parser';\r\nconst reWhitespace = /\\s+/;\r\nfunction parseNumberLine(line) {\r\n    return line.trim().split(reWhitespace).map(parseFloat);\r\n}\r\nclass XplorParser extends VolumeParser {\r\n    get type() { return 'xplor'; }\r\n    _parse() {\r\n        // http://hincklab.uthscsa.edu/html/soft_packs/msi_docs/insight980/xplor/formats.html\r\n        // http://www.mrc-lmb.cam.ac.uk/public/xtal/doc/cns/cns_1.3/tutorial/formats/maps/text.html\r\n        if (Debug)\r\n            Log.time('XplorParser._parse ' + this.name);\r\n        const v = this.volume;\r\n        const headerLines = this.streamer.peekLines(8);\r\n        const header = {};\r\n        let infoStart;\r\n        if (headerLines[2].startsWith('REMARKS')) {\r\n            infoStart = parseInt(headerLines[1].substring(0, 8)) + 2;\r\n        }\r\n        else {\r\n            infoStart = 5;\r\n        }\r\n        const dataStart = infoStart + 3;\r\n        const gridInfo = parseNumberLine(headerLines[infoStart]);\r\n        header.NA = gridInfo[0];\r\n        header.AMIN = gridInfo[1];\r\n        header.AMAX = gridInfo[2];\r\n        header.NB = gridInfo[3];\r\n        header.BMIN = gridInfo[4];\r\n        header.BMAX = gridInfo[5];\r\n        header.NC = gridInfo[6];\r\n        header.CMIN = gridInfo[7];\r\n        header.CMAX = gridInfo[8];\r\n        const cellInfo = parseNumberLine(headerLines[infoStart + 1]);\r\n        header.a = cellInfo[0] * this.voxelSize;\r\n        header.b = cellInfo[1] * this.voxelSize;\r\n        header.c = cellInfo[2] * this.voxelSize;\r\n        header.alpha = cellInfo[3];\r\n        header.beta = cellInfo[4];\r\n        header.gamma = cellInfo[5];\r\n        const na = header.AMAX - header.AMIN + 1;\r\n        const nb = header.BMAX - header.BMIN + 1;\r\n        const nc = header.CMAX - header.CMIN + 1;\r\n        const n = na * nb * nc;\r\n        const data = new Float32Array(n);\r\n        const lineSection = Math.ceil(1 + (na * nb) / 6);\r\n        let count = 0;\r\n        let lineNo = 0;\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                const line = lines[i];\r\n                if (lineNo >= dataStart && (lineNo - dataStart) % lineSection !== 0 && count < n) {\r\n                    for (let j = 0, lj = 6; j < lj; ++j) {\r\n                        const value = parseFloat(line.substr(12 * j, 12));\r\n                        if (isNaN(value)) {\r\n                            break;\r\n                        } // Last line of map section\r\n                        data[count++] = value;\r\n                    }\r\n                }\r\n                else if (count === n) {\r\n                    const lt = line.trim();\r\n                    if (lt && lt !== '-9999') {\r\n                        const ls = parseNumberLine(line);\r\n                        header.RAVE = ls[0];\r\n                        header.RSIGMA = ls[1];\r\n                    }\r\n                }\r\n                ++lineNo;\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        v.header = header;\r\n        v.setData(data, na, nb, nc);\r\n        if (header.RAVE !== 0 && header.RSIGMA !== 1) {\r\n            v.setStats(undefined, undefined, header.RAVE, header.RSIGMA);\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('XplorParser._parse ' + this.name);\r\n    }\r\n    getMatrix() {\r\n        const h = this.volume.header;\r\n        const basisX = [\r\n            h.a,\r\n            0,\r\n            0\r\n        ];\r\n        const basisY = [\r\n            h.b * Math.cos(Math.PI / 180.0 * h.gamma),\r\n            h.b * Math.sin(Math.PI / 180.0 * h.gamma),\r\n            0\r\n        ];\r\n        const basisZ = [\r\n            h.c * Math.cos(Math.PI / 180.0 * h.beta),\r\n            h.c * (Math.cos(Math.PI / 180.0 * h.alpha) -\r\n                Math.cos(Math.PI / 180.0 * h.gamma) *\r\n                    Math.cos(Math.PI / 180.0 * h.beta)) / Math.sin(Math.PI / 180.0 * h.gamma),\r\n            0\r\n        ];\r\n        basisZ[2] = Math.sqrt(h.c * h.c * Math.sin(Math.PI / 180.0 * h.beta) *\r\n            Math.sin(Math.PI / 180.0 * h.beta) - basisZ[1] * basisZ[1]);\r\n        const basis = [[], basisX, basisY, basisZ];\r\n        const nxyz = [0, h.NA, h.NB, h.NC];\r\n        const mapcrs = [0, 1, 2, 3];\r\n        const matrix = new Matrix4();\r\n        matrix.set(basis[mapcrs[1]][0] / nxyz[mapcrs[1]], basis[mapcrs[2]][0] / nxyz[mapcrs[2]], basis[mapcrs[3]][0] / nxyz[mapcrs[3]], 0, basis[mapcrs[1]][1] / nxyz[mapcrs[1]], basis[mapcrs[2]][1] / nxyz[mapcrs[2]], basis[mapcrs[3]][1] / nxyz[mapcrs[3]], 0, basis[mapcrs[1]][2] / nxyz[mapcrs[1]], basis[mapcrs[2]][2] / nxyz[mapcrs[2]], basis[mapcrs[3]][2] / nxyz[mapcrs[3]], 0, 0, 0, 0, 1);\r\n        matrix.multiply(new Matrix4().makeTranslation(h.AMIN, h.BMIN, h.CMIN));\r\n        return matrix;\r\n    }\r\n}\r\nParserRegistry.add('xplor', XplorParser);\r\nParserRegistry.add('cns', XplorParser);\r\nexport default XplorParser;\r\n//# sourceMappingURL=xplor-parser.js.map","/**\r\n * @file Kin Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { Vector3 } from 'three';\r\nimport Parser from './parser';\r\nfunction hsvToRgb(h, s, v) {\r\n    h /= 360;\r\n    s /= 100;\r\n    v /= 100;\r\n    let r, g, b;\r\n    const i = Math.floor(h * 6);\r\n    const f = h * 6 - i;\r\n    const p = v * (1 - s);\r\n    const q = v * (1 - f * s);\r\n    const t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n        case 0:\r\n            r = v;\r\n            g = t;\r\n            b = p;\r\n            break;\r\n        case 1:\r\n            r = q;\r\n            g = v;\r\n            b = p;\r\n            break;\r\n        case 2:\r\n            r = p;\r\n            g = v;\r\n            b = t;\r\n            break;\r\n        case 3:\r\n            r = p;\r\n            g = q;\r\n            b = v;\r\n            break;\r\n        case 4:\r\n            r = t;\r\n            g = p;\r\n            b = v;\r\n            break;\r\n        case 5:\r\n            r = v;\r\n            g = p;\r\n            b = q;\r\n            break;\r\n    }\r\n    return [r, g, b];\r\n}\r\nconst ColorDict = {\r\n    red: hsvToRgb(0, 100, 100),\r\n    orange: hsvToRgb(20, 100, 100),\r\n    gold: hsvToRgb(40, 100, 100),\r\n    yellow: hsvToRgb(60, 100, 100),\r\n    lime: hsvToRgb(80, 100, 100),\r\n    green: hsvToRgb(120, 80, 100),\r\n    sea: hsvToRgb(150, 100, 100),\r\n    cyan: hsvToRgb(180, 100, 85),\r\n    sky: hsvToRgb(210, 75, 95),\r\n    blue: hsvToRgb(240, 70, 100),\r\n    purple: hsvToRgb(275, 75, 100),\r\n    magenta: hsvToRgb(300, 95, 100),\r\n    hotpink: hsvToRgb(335, 100, 100),\r\n    pink: hsvToRgb(350, 55, 100),\r\n    peach: hsvToRgb(25, 75, 100),\r\n    lilac: hsvToRgb(275, 55, 100),\r\n    pinktint: hsvToRgb(340, 30, 100),\r\n    peachtint: hsvToRgb(25, 50, 100),\r\n    yellowtint: hsvToRgb(60, 50, 100),\r\n    greentint: hsvToRgb(135, 40, 100),\r\n    bluetint: hsvToRgb(220, 40, 100),\r\n    lilactint: hsvToRgb(275, 35, 100),\r\n    white: hsvToRgb(0, 0, 100),\r\n    gray: hsvToRgb(0, 0, 50),\r\n    brown: hsvToRgb(20, 45, 75),\r\n    deadwhite: [1, 1, 1],\r\n    deadblack: [0, 0, 0],\r\n    invisible: [0, 0, 0]\r\n};\r\nconst reWhitespaceComma = /[\\s,]+/;\r\nconst reCurlyWhitespace = /[^{}\\s]*{[^{}]+}|[^{}\\s]+/g;\r\nconst reTrimCurly = /^{+|}+$/g;\r\nconst reTrimQuotes = /^['\"]+|['\"]+$/g;\r\nconst reCollapseEqual = /\\s*=\\s*/g;\r\nfunction parseListDef(line) {\r\n    let name;\r\n    let defaultColor;\r\n    let master = [];\r\n    let width;\r\n    line = line.replace(reCollapseEqual, '=');\r\n    const lm = line.match(reCurlyWhitespace);\r\n    for (let j = 1; j < lm.length; ++j) {\r\n        const e = lm[j];\r\n        if (e[0] === '{') {\r\n            name = e.substring(1, e.length - 1);\r\n        }\r\n        else {\r\n            const es = e.split('=');\r\n            if (es.length === 2) {\r\n                if (es[0] === 'color') {\r\n                    defaultColor = ColorDict[es[1]];\r\n                }\r\n                else if (es[0] === 'width') {\r\n                    width = parseInt(es[1]);\r\n                }\r\n                else if (es[0] === 'master') {\r\n                    master.push(es[1].replace(reTrimCurly, ''));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        listName: name,\r\n        listColor: defaultColor,\r\n        listMasters: master,\r\n        listWidth: width\r\n    };\r\n}\r\nfunction parseListElm(line) {\r\n    line = line.trim();\r\n    const idx1 = line.indexOf('{');\r\n    const idx2 = line.indexOf('}');\r\n    const ls = line.substr(idx2 + 1).split(reWhitespaceComma);\r\n    const label = line.substr(idx1 + 1, idx2 - 1);\r\n    const position = [\r\n        parseFloat(ls[ls.length - 3]),\r\n        parseFloat(ls[ls.length - 2]),\r\n        parseFloat(ls[ls.length - 1])\r\n    ];\r\n    let color, width, radius;\r\n    let lineBreak = false;\r\n    let triangleBreak = false;\r\n    for (let lsindex = 4; lsindex <= ls.length; lsindex++) {\r\n        const literal = ls[ls.length - lsindex];\r\n        if (literal in ColorDict) {\r\n            color = ColorDict[ls[ls.length - lsindex]];\r\n        }\r\n        if (literal.startsWith('width')) {\r\n            width = parseInt(literal.substring(5));\r\n        }\r\n        if (literal.startsWith('r=')) {\r\n            radius = parseFloat(literal.split('=')[1]);\r\n        }\r\n        if (literal.startsWith('P')) {\r\n            lineBreak = true;\r\n        }\r\n        if (literal.startsWith('X')) {\r\n            triangleBreak = true;\r\n        }\r\n    }\r\n    // const color = line[ idx2 + 1 ] === ' ' ? undefined : ColorDict[ ls[ 0 ] ]\r\n    return {\r\n        label: label,\r\n        position: position,\r\n        color: color,\r\n        radius: radius,\r\n        width: width,\r\n        isLineBreak: lineBreak,\r\n        isTriangleBreak: triangleBreak\r\n    };\r\n}\r\nfunction parseStr(line) {\r\n    const start = line.indexOf('{');\r\n    const end = line.indexOf('}');\r\n    return line.substring(start !== -1 ? start + 1 : 0, end !== -1 ? end : undefined).trim();\r\n}\r\nfunction parseFlag(line) {\r\n    const end = line.indexOf('}');\r\n    return end === -1 ? undefined : line.substr(end + 1).trim();\r\n}\r\nfunction parseGroup(line) {\r\n    let name = '';\r\n    let master = [];\r\n    let flags = {};\r\n    line = line.replace(reCollapseEqual, '=');\r\n    const lm = line.match(reCurlyWhitespace);\r\n    for (let j = 1; j < lm.length; ++j) {\r\n        const e = lm[j];\r\n        if (e[0] === '{') {\r\n            name = e.substring(1, e.length - 1);\r\n        }\r\n        else {\r\n            const es = e.split('=');\r\n            if (es.length === 2) {\r\n                if (es[0] === 'master') {\r\n                    master.push(es[1].replace(reTrimCurly, ''));\r\n                }\r\n                else {\r\n                    flags[es[0]] = es[1].replace(reTrimCurly, '');\r\n                }\r\n            }\r\n            else {\r\n                flags[es[0]] = true;\r\n            }\r\n        }\r\n    }\r\n    return { groupName: name,\r\n        groupFlags: flags,\r\n        groupMasters: master\r\n    };\r\n}\r\nfunction convertKinTriangleArrays(ribbonObject) {\r\n    // have to convert ribbons/triangle lists from stripdrawmode to normal drawmode\r\n    // index                    [ 0 1 2 3 4 5 6 7 8 91011 ]\r\n    // label [ 0 1 2 3 4 5 ] to [ 0 1 2 1 2 3 2 3 4 3 4 5 ]\r\n    // convertedindex                                      [ 0 1 2 3 4 5 6 7 8 91011121314151617181920212223242526 ]\r\n    // index          [ 0 1 2 3 4 5 6 7 8 91011121314 ]    [ 0 1 2 3 4 5 6 7 8 3 4 5 6 7 8 91011 6 7 8 91011121314 ]\r\n    // position/color [ 0 0 0 1 1 1 2 2 2 3 3 3 4 4 4 ] to [ 0 0 0 1 1 1 2 2 2 1 1 1 2 2 2 3 3 3 2 2 2 3 3 3 4 4 4 ]\r\n    let { labelArray, positionArray, colorArray, breakArray } = ribbonObject;\r\n    let convertedLabels = [];\r\n    for (let i = 0; i < (labelArray.length - 2) * 3; ++i) {\r\n        convertedLabels[i] = labelArray[i - Math.floor(i / 3) * 2];\r\n    }\r\n    let convertedBreaks = [];\r\n    for (let i = 0; i < (breakArray.length - 2) * 3; ++i) {\r\n        convertedBreaks[i] = breakArray[i - Math.floor(i / 3) * 2];\r\n    }\r\n    let convertedPositions = [];\r\n    for (let i = 0; i < (positionArray.length / 3 - 2) * 9; ++i) {\r\n        convertedPositions[i] = positionArray[i - Math.floor(i / 9) * 6];\r\n    }\r\n    let convertedColors = [];\r\n    for (let i = 0; i < (colorArray.length / 3 - 2) * 9; ++i) {\r\n        convertedColors[i] = colorArray[i - Math.floor(i / 9) * 6];\r\n    }\r\n    let vector3Positions = [];\r\n    for (let i = 0; i < (convertedPositions.length) / 3; ++i) {\r\n        vector3Positions.push(new Vector3(convertedPositions[i * 3], convertedPositions[i * 3] + 1, convertedPositions[i * 3] + 2));\r\n    }\r\n    //let normals = []\r\n    //for (let i = 0; i < vector3Positions.length - 1; ++i) {\r\n    //  let normalVec3 = vector3Positions[i].cross(vector3Positions[i + 1])\r\n    //  normals.push(normalVec3.x)\r\n    //  normals.push(normalVec3.y)\r\n    //  normals.push(normalVec3.z)\r\n    //}\r\n    return {\r\n        name: ribbonObject.name,\r\n        masterArray: ribbonObject.masterArray,\r\n        labelArray: convertedLabels,\r\n        positionArray: convertedPositions,\r\n        breakArray: convertedBreaks,\r\n        colorArray: convertedColors\r\n    };\r\n}\r\nfunction removePointBreaksTriangleArrays(convertedRibbonObject) {\r\n    // after converting ribbon/triangle arrys to drawmode, removed point break triangles\r\n    // label [ 0 1 2 3 4 5 ] to [ 0 1 2 1 2 3 2 3 4 3 4 5 ]\r\n    // position/color [ 0 0 0 1 1 1 2 2 2 3 3 3 4 4 4 ] to [ 0 0 0 1 1 1 2 2 2 1 1 1 2 2 2 3 3 3 2 2 2 3 3 3 4 4 4 ]\r\n    let { labelArray, positionArray, colorArray, breakArray } = convertedRibbonObject;\r\n    let editedLabels = [];\r\n    let editedPositions = [];\r\n    let editedColors = [];\r\n    let editedBreaks = [];\r\n    for (let i = 0; i < breakArray.length / 3; i++) {\r\n        let breakPointer = i * 3;\r\n        let positionPointer = i * 9;\r\n        if (!breakArray[breakPointer + 1] && !breakArray[breakPointer + 2]) {\r\n            editedLabels.push(labelArray[breakPointer]);\r\n            editedLabels.push(labelArray[breakPointer + 1]);\r\n            editedLabels.push(labelArray[breakPointer + 2]);\r\n            editedBreaks.push(breakArray[breakPointer]);\r\n            editedBreaks.push(breakArray[breakPointer + 1]);\r\n            editedBreaks.push(breakArray[breakPointer + 2]);\r\n            editedPositions.push(positionArray[positionPointer]);\r\n            editedPositions.push(positionArray[positionPointer + 1]);\r\n            editedPositions.push(positionArray[positionPointer + 2]);\r\n            editedPositions.push(positionArray[positionPointer + 3]);\r\n            editedPositions.push(positionArray[positionPointer + 4]);\r\n            editedPositions.push(positionArray[positionPointer + 5]);\r\n            editedPositions.push(positionArray[positionPointer + 6]);\r\n            editedPositions.push(positionArray[positionPointer + 7]);\r\n            editedPositions.push(positionArray[positionPointer + 8]);\r\n            editedColors.push(colorArray[positionPointer]);\r\n            editedColors.push(colorArray[positionPointer + 1]);\r\n            editedColors.push(colorArray[positionPointer + 2]);\r\n            editedColors.push(colorArray[positionPointer + 3]);\r\n            editedColors.push(colorArray[positionPointer + 4]);\r\n            editedColors.push(colorArray[positionPointer + 5]);\r\n            editedColors.push(colorArray[positionPointer + 6]);\r\n            editedColors.push(colorArray[positionPointer + 7]);\r\n            editedColors.push(colorArray[positionPointer + 8]);\r\n        }\r\n        else {\r\n            //console.log('X triangle break found')\r\n            //console.log('skipping: '+positionArray[positionPointer]+','+positionArray[positionPointer+1]+','+positionArray[positionPointer+2]+','\r\n            //                        +positionArray[positionPointer+3]+','+positionArray[positionPointer+4]+','+positionArray[positionPointer+5]+','\r\n            //                        +positionArray[positionPointer+6]+','+positionArray[positionPointer+7]+','+positionArray[positionPointer+8])\r\n        }\r\n    }\r\n    return {\r\n        name: convertedRibbonObject.name,\r\n        masterArray: convertedRibbonObject.masterArray,\r\n        labelArray: editedLabels,\r\n        positionArray: editedPositions,\r\n        breakArray: editedBreaks,\r\n        colorArray: editedColors\r\n    };\r\n}\r\nclass KinParser extends Parser {\r\n    get type() { return 'kin'; }\r\n    get __objName() { return 'kinemage'; }\r\n    _parse() {\r\n        // http://kinemage.biochem.duke.edu/software/king.php\r\n        if (Debug)\r\n            Log.time(`KinParser._parse ${this.name}`);\r\n        const kinemage = {\r\n            kinemage: undefined,\r\n            onewidth: undefined,\r\n            '1viewid': undefined,\r\n            pdbfile: undefined,\r\n            texts: [],\r\n            text: '',\r\n            captions: [],\r\n            caption: '',\r\n            groupDict: {},\r\n            subgroupDict: {},\r\n            masterDict: {},\r\n            pointmasterDict: {},\r\n            dotLists: [],\r\n            vectorLists: [],\r\n            ballLists: [],\r\n            ribbonLists: []\r\n        };\r\n        this.kinemage = kinemage;\r\n        let currentGroupMasters;\r\n        let currentSubgroupMasters;\r\n        let isDotList = false;\r\n        let prevDotLabel = '';\r\n        let dotDefaultColor;\r\n        let dotLabel, dotPosition, dotColor;\r\n        let isVectorList = false;\r\n        let prevVecLabel = '';\r\n        let prevVecPosition = null;\r\n        let prevVecColor = null;\r\n        let vecDefaultColor, vecDefaultWidth;\r\n        let vecLabel1, vecLabel2, vecPosition1, vecPosition2, vecColor1, vecColor2;\r\n        let isBallList = false;\r\n        let prevBallLabel = '';\r\n        let ballRadius, ballDefaultColor;\r\n        let ballLabel, ballPosition, ballColor;\r\n        let isRibbonList = false;\r\n        let prevRibbonPointLabel = '';\r\n        let ribbonListDefaultColor;\r\n        let ribbonPointLabelArray, ribbonPointPositionArray, ribbonPointBreakArray, ribbonPointColorArray;\r\n        let isText = false;\r\n        let isCaption = false;\r\n        // @vectorlist {mc} color= white  master= {mainchain}\r\n        // { n   thr A   1  B13.79 1crnFH} P 17.047, 14.099, 3.625 { n   thr A   1  B13.79 1crnFH} L 17.047, 14.099, 3.625\r\n        // @dotlist {x} color=white master={vdw contact} master={dots}\r\n        // { CB  THR   1  A}sky  'P' 18.915,14.199,5.024\r\n        function _parseChunkOfLines(_i, _n, lines) {\r\n            for (let i = _i; i < _n; ++i) {\r\n                const line = lines[i];\r\n                if (line[0] === '@') {\r\n                    isDotList = false;\r\n                    isVectorList = false;\r\n                    isBallList = false;\r\n                    isRibbonList = false;\r\n                    isText = false;\r\n                    isCaption = false;\r\n                }\r\n                if (!line) {\r\n                    isDotList = false;\r\n                    isVectorList = false;\r\n                    isBallList = false;\r\n                    isRibbonList = false;\r\n                }\r\n                else if (line.startsWith('@dotlist')) {\r\n                    // @dotlist {x} color=white master={vdw contact} master={dots}\r\n                    let { listColor, listName, listMasters } = parseListDef(line);\r\n                    isDotList = true;\r\n                    prevDotLabel = '';\r\n                    dotLabel = [];\r\n                    dotPosition = [];\r\n                    dotColor = [];\r\n                    dotDefaultColor = listColor;\r\n                    if (currentGroupMasters) {\r\n                        listMasters = listMasters.concat(currentGroupMasters);\r\n                    }\r\n                    if (currentSubgroupMasters) {\r\n                        listMasters = listMasters.concat(currentSubgroupMasters);\r\n                    }\r\n                    kinemage.dotLists.push({\r\n                        name: listName,\r\n                        masterArray: listMasters,\r\n                        labelArray: dotLabel,\r\n                        positionArray: dotPosition,\r\n                        colorArray: dotColor\r\n                    });\r\n                }\r\n                else if (line.startsWith('@vectorlist')) {\r\n                    // @vectorlist {x} color=white master={small overlap} master={dots}\r\n                    let { listMasters, listName, listWidth, listColor } = parseListDef(line);\r\n                    if (listMasters) {\r\n                        listMasters.forEach(function (name) {\r\n                            if (!kinemage.masterDict[name]) {\r\n                                kinemage.masterDict[name] = {\r\n                                    indent: false,\r\n                                    visible: false\r\n                                };\r\n                            }\r\n                        });\r\n                    }\r\n                    isVectorList = true;\r\n                    prevVecLabel = '';\r\n                    prevVecPosition = null;\r\n                    prevVecColor = null;\r\n                    vecLabel1 = [];\r\n                    vecLabel2 = [];\r\n                    vecPosition1 = [];\r\n                    vecPosition2 = [];\r\n                    vecColor1 = [];\r\n                    vecColor2 = [];\r\n                    vecDefaultColor = listColor;\r\n                    vecDefaultWidth = [];\r\n                    if (listWidth) {\r\n                        vecDefaultWidth.push(listWidth);\r\n                    }\r\n                    if (currentGroupMasters) {\r\n                        listMasters = listMasters.concat(currentGroupMasters);\r\n                    }\r\n                    if (currentSubgroupMasters) {\r\n                        listMasters = listMasters.concat(currentSubgroupMasters);\r\n                    }\r\n                    kinemage.vectorLists.push({\r\n                        name: listName,\r\n                        masterArray: listMasters,\r\n                        label1Array: vecLabel1,\r\n                        label2Array: vecLabel2,\r\n                        position1Array: vecPosition1,\r\n                        position2Array: vecPosition2,\r\n                        color1Array: vecColor1,\r\n                        color2Array: vecColor2,\r\n                        width: vecDefaultWidth\r\n                    });\r\n                }\r\n                else if (line.startsWith('@balllist')) {\r\n                    let { listName, listColor, listMasters } = parseListDef(line);\r\n                    if (listMasters) {\r\n                        listMasters.forEach(function (name) {\r\n                            if (!kinemage.masterDict[name]) {\r\n                                kinemage.masterDict[name] = {\r\n                                    indent: false,\r\n                                    visible: false\r\n                                };\r\n                            }\r\n                        });\r\n                    }\r\n                    isBallList = true;\r\n                    prevBallLabel = '';\r\n                    ballLabel = [];\r\n                    ballRadius = [];\r\n                    ballPosition = [];\r\n                    ballColor = [];\r\n                    ballDefaultColor = listColor;\r\n                    if (currentGroupMasters) {\r\n                        listMasters = listMasters.concat(currentGroupMasters);\r\n                    }\r\n                    if (currentSubgroupMasters) {\r\n                        listMasters = listMasters.concat(currentSubgroupMasters);\r\n                    }\r\n                    kinemage.ballLists.push({\r\n                        name: listName,\r\n                        masterArray: listMasters,\r\n                        labelArray: ballLabel,\r\n                        radiusArray: ballRadius,\r\n                        positionArray: ballPosition,\r\n                        colorArray: ballColor\r\n                    });\r\n                }\r\n                else if (line.startsWith('@ribbonlist') || line.startsWith('@trianglelist')) {\r\n                    let { listMasters, listName, listColor } = parseListDef(line);\r\n                    if (listMasters) {\r\n                        listMasters.forEach(function (name) {\r\n                            if (!kinemage.masterDict[name]) {\r\n                                kinemage.masterDict[name] = {\r\n                                    indent: false,\r\n                                    visible: false\r\n                                };\r\n                            }\r\n                        });\r\n                    }\r\n                    isRibbonList = true;\r\n                    prevRibbonPointLabel = '';\r\n                    ribbonPointLabelArray = [];\r\n                    ribbonPointPositionArray = [];\r\n                    ribbonPointBreakArray = [];\r\n                    ribbonPointColorArray = [];\r\n                    ribbonListDefaultColor = listColor;\r\n                    if (currentGroupMasters) {\r\n                        listMasters = listMasters.concat(currentGroupMasters);\r\n                    }\r\n                    if (currentSubgroupMasters) {\r\n                        listMasters = listMasters.concat(currentSubgroupMasters);\r\n                    }\r\n                    kinemage.ribbonLists.push({\r\n                        name: listName,\r\n                        masterArray: listMasters,\r\n                        labelArray: ribbonPointLabelArray,\r\n                        positionArray: ribbonPointPositionArray,\r\n                        breakArray: ribbonPointBreakArray,\r\n                        colorArray: ribbonPointColorArray\r\n                    });\r\n                }\r\n                else if (line.startsWith('@text')) {\r\n                    isText = true;\r\n                    kinemage.texts.push(line.substr(5));\r\n                }\r\n                else if (line.startsWith('@caption')) {\r\n                    isCaption = true;\r\n                    kinemage.captions.push(line.substr(8));\r\n                }\r\n                else if (isDotList) {\r\n                    // { CB  THR   1  A}sky  'P' 18.915,14.199,5.024\r\n                    let { label, color, position } = parseListElm(line);\r\n                    if (label === '\"') {\r\n                        label = prevDotLabel;\r\n                    }\r\n                    else {\r\n                        prevDotLabel = label;\r\n                    }\r\n                    if (color === undefined) {\r\n                        color = dotDefaultColor;\r\n                    }\r\n                    dotLabel.push(label);\r\n                    dotPosition.push(...position);\r\n                    dotColor.push(...color);\r\n                }\r\n                else if (isVectorList) {\r\n                    // { n   thr A   1  B13.79 1crnFH} P 17.047, 14.099, 3.625 { n   thr A   1  B13.79 1crnFH} L 17.047, 14.099, 3.625\r\n                    let doubleLine = line.replace(/(?!^){/g, '\\n{');\r\n                    let splitLine = doubleLine.split(/\\n/);\r\n                    for (var i2 = 0; i2 < splitLine.length; i2++) {\r\n                        let singlePointLine = splitLine[i2];\r\n                        let { label, color, width, position, isLineBreak } = parseListElm(singlePointLine);\r\n                        if (label === '\"') {\r\n                            label = prevVecLabel;\r\n                        }\r\n                        else {\r\n                            prevVecLabel = label;\r\n                        }\r\n                        if (color === undefined) {\r\n                            color = vecDefaultColor;\r\n                        }\r\n                        if (!isLineBreak) {\r\n                            if (prevVecPosition !== null) {\r\n                                if (width) {\r\n                                    vecDefaultWidth.push(width);\r\n                                }\r\n                                vecLabel1.push(prevVecLabel);\r\n                                vecPosition1.push(...prevVecPosition);\r\n                                vecColor1.push(...prevVecColor);\r\n                                vecLabel2.push(label);\r\n                                vecPosition2.push(...position);\r\n                                vecColor2.push(...color);\r\n                            }\r\n                        }\r\n                        prevVecLabel = label;\r\n                        prevVecPosition = position;\r\n                        prevVecColor = color;\r\n                    }\r\n                }\r\n                else if (isBallList) {\r\n                    // {cb arg A   1   1.431 -106.80} r=1.431  39.085, 8.083, 22.182\r\n                    let { label, radius, color, position } = parseListElm(line);\r\n                    if (label === '\"') {\r\n                        label = prevBallLabel;\r\n                    }\r\n                    else {\r\n                        prevBallLabel = label;\r\n                    }\r\n                    if (radius === undefined) {\r\n                        radius = 1; // temporary default radius\r\n                    }\r\n                    if (color === undefined) {\r\n                        color = ballDefaultColor;\r\n                    }\r\n                    ballLabel.push(label);\r\n                    ballRadius.push(radius);\r\n                    ballPosition.push(...position);\r\n                    ballColor.push(...color);\r\n                }\r\n                else if (isRibbonList) {\r\n                    let { label, color, position, isTriangleBreak } = parseListElm(line);\r\n                    if (label === '\"') {\r\n                        label = prevRibbonPointLabel;\r\n                    }\r\n                    else {\r\n                        prevRibbonPointLabel = label;\r\n                    }\r\n                    if (color === undefined) {\r\n                        color = ribbonListDefaultColor;\r\n                    }\r\n                    ribbonPointLabelArray.push(label);\r\n                    ribbonPointPositionArray.push(...position);\r\n                    ribbonPointBreakArray.push(isTriangleBreak);\r\n                    ribbonPointColorArray.push(...color);\r\n                }\r\n                else if (isText) {\r\n                    kinemage.texts.push(line);\r\n                }\r\n                else if (isCaption) {\r\n                    kinemage.captions.push(line);\r\n                }\r\n                else if (line.startsWith('@kinemage')) {\r\n                    kinemage.kinemage = parseInt(line.substr(9).trim());\r\n                }\r\n                else if (line.startsWith('@onewidth')) {\r\n                    kinemage.onewidth = true;\r\n                }\r\n                else if (line.startsWith('@1viewid')) {\r\n                    kinemage['1viewid'] = parseStr(line);\r\n                }\r\n                else if (line.startsWith('@pdbfile')) {\r\n                    kinemage.pdbfile = parseStr(line);\r\n                }\r\n                else if (line.startsWith('@group')) {\r\n                    let { groupName, groupFlags, groupMasters } = parseGroup(line);\r\n                    if (!kinemage.groupDict[groupName]) {\r\n                        kinemage.groupDict[groupName] = {\r\n                            dominant: false,\r\n                            animate: false\r\n                        };\r\n                        currentGroupMasters = groupMasters;\r\n                    }\r\n                    if (currentGroupMasters) {\r\n                        currentGroupMasters.forEach(function (master) {\r\n                            if (!kinemage.masterDict[master]) {\r\n                                kinemage.masterDict[master] = {\r\n                                    indent: false,\r\n                                    visible: false\r\n                                };\r\n                            }\r\n                        });\r\n                    }\r\n                    for (let key in groupFlags) {\r\n                        kinemage.groupDict[groupName][key] = groupFlags[key];\r\n                    }\r\n                }\r\n                else if (line.startsWith('@subgroup')) {\r\n                    const { groupName, groupFlags, groupMasters } = parseGroup(line);\r\n                    if (!kinemage.subgroupDict[groupName]) {\r\n                        kinemage.subgroupDict[groupName] = {\r\n                            dominant: false,\r\n                            animate: false\r\n                        };\r\n                        currentSubgroupMasters = groupMasters;\r\n                    }\r\n                    if (currentSubgroupMasters) {\r\n                        currentSubgroupMasters.forEach(function (master) {\r\n                            if (!kinemage.masterDict[master]) {\r\n                                kinemage.masterDict[master] = {\r\n                                    indent: false,\r\n                                    visible: false\r\n                                };\r\n                            }\r\n                        });\r\n                    }\r\n                    for (let key in groupFlags) {\r\n                        kinemage.subgroupDict[groupName][key] = groupFlags[key];\r\n                    }\r\n                }\r\n                else if (line.startsWith('@master')) {\r\n                    const name = parseStr(line);\r\n                    const flag = parseFlag(line);\r\n                    if (!kinemage.masterDict[name]) {\r\n                        kinemage.masterDict[name] = {\r\n                            indent: false,\r\n                            visible: false\r\n                        };\r\n                    }\r\n                    if (flag === 'on') {\r\n                        kinemage.masterDict[name].visible = true;\r\n                    }\r\n                    else if (flag === 'off') {\r\n                        kinemage.masterDict[name].visible = false;\r\n                    }\r\n                    else if (flag === 'indent') {\r\n                        kinemage.masterDict[name].indent = true;\r\n                    }\r\n                    else if (!flag) {\r\n                        // nothing to do\r\n                    }\r\n                }\r\n                else if (line.startsWith('@pointmaster')) {\r\n                    const { groupName, groupFlags } = parseGroup(line);\r\n                    kinemage.pointmasterDict[groupName] = {\r\n                        id: Object.keys(groupFlags)[0].replace(reTrimQuotes, '')\r\n                    };\r\n                }\r\n                else {\r\n                    console.log(line);\r\n                }\r\n            }\r\n        }\r\n        this.streamer.eachChunkOfLines(function (lines /*, chunkNo, chunkCount */) {\r\n            _parseChunkOfLines(0, lines.length, lines);\r\n        });\r\n        kinemage.text = kinemage.texts.join('\\n').trim();\r\n        kinemage.caption = kinemage.captions.join('\\n').trim();\r\n        if (kinemage.ribbonLists) {\r\n            let convertedLists = [];\r\n            kinemage.ribbonLists.forEach(function (listObject) {\r\n                convertedLists.push(removePointBreaksTriangleArrays(convertKinTriangleArrays(listObject)));\r\n            });\r\n            kinemage.ribbonLists = convertedLists;\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd(`KinParser._parse ${this.name}`);\r\n    }\r\n}\r\nParserRegistry.add('kin', KinParser);\r\nexport default KinParser;\r\n//# sourceMappingURL=kin-parser.js.map","/**\r\n * @file Surface Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport Parser from './parser';\r\nimport Surface from '../surface/surface';\r\nclass SurfaceParser extends Parser {\r\n    constructor(streamer, params) {\r\n        super(streamer, params);\r\n        this.loader = this.getLoader();\r\n        this.surface = new Surface(this.name, this.path);\r\n    }\r\n    get type() { return 'surface'; }\r\n    get __objName() { return 'surface'; }\r\n    _parse() {\r\n        var geometry = this.loader.parse(this.streamer.asText());\r\n        this.surface.fromGeometry(geometry);\r\n    }\r\n}\r\nexport default SurfaceParser;\r\n//# sourceMappingURL=surface-parser.js.map","/**\r\n * @file Obj Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { BufferGeometry, BufferAttribute } from 'three';\r\nimport { ParserRegistry } from '../globals';\r\nimport SurfaceParser from './surface-parser';\r\n/**\r\n * OBJLoader\r\n * @class\r\n * @private\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\nconst OBJLoader = (function OBJLoader() {\r\n    this.regexp = {\r\n        // v float float float\r\n        vertex_pattern: /^v\\s+([\\d.+\\-eE]+)\\s+([\\d.+\\-eE]+)\\s+([\\d.+\\-eE]+)/,\r\n        // vn float float float\r\n        normal_pattern: /^vn\\s+([\\d.+\\-eE]+)\\s+([\\d.+\\-eE]+)\\s+([\\d.+\\-eE]+)/,\r\n        // vt float float\r\n        uv_pattern: /^vt\\s+([\\d.+\\-eE]+)\\s+([\\d.+\\-eE]+)/,\r\n        // f vertex vertex vertex\r\n        face_vertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\r\n        // f vertex/uv vertex/uv vertex/uv\r\n        face_vertex_uv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\r\n        // f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n        face_vertex_uv_normal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\r\n        // f vertex//normal vertex//normal vertex//normal\r\n        face_vertex_normal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\r\n        // o object_name | g group_name\r\n        object_pattern: /^[og]\\s*(.+)?/,\r\n        // s boolean\r\n        smoothing_pattern: /^s\\s+(\\d+|on|off)/,\r\n        // mtllib file_reference\r\n        material_library_pattern: /^mtllib /,\r\n        // usemtl material_name\r\n        material_use_pattern: /^usemtl /\r\n    };\r\n});\r\nOBJLoader.prototype = {\r\n    constructor: OBJLoader,\r\n    setPath: function (value) {\r\n        this.path = value;\r\n    },\r\n    _createParserState: function () {\r\n        var state = {\r\n            objects: [],\r\n            object: {},\r\n            vertices: [],\r\n            normals: [],\r\n            startObject: function (name, fromDeclaration) {\r\n                // If the current object (initial from reset) is not from a g/o declaration in the parsed\r\n                // file. We need to use it for the first parsed g/o to keep things in sync.\r\n                if (this.object && this.object.fromDeclaration === false) {\r\n                    this.object.name = name;\r\n                    this.object.fromDeclaration = (fromDeclaration !== false);\r\n                    return;\r\n                }\r\n                this.object = {\r\n                    name: name || '',\r\n                    geometry: {\r\n                        vertices: [],\r\n                        normals: []\r\n                    },\r\n                    fromDeclaration: (fromDeclaration !== false)\r\n                };\r\n                this.objects.push(this.object);\r\n            },\r\n            parseVertexIndex: function (value, len) {\r\n                var index = parseInt(value, 10);\r\n                return (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n            },\r\n            parseNormalIndex: function (value, len) {\r\n                var index = parseInt(value, 10);\r\n                return (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n            },\r\n            addVertex: function (a, b, c) {\r\n                var src = this.vertices;\r\n                var dst = this.object.geometry.vertices;\r\n                dst.push(src[a + 0]);\r\n                dst.push(src[a + 1]);\r\n                dst.push(src[a + 2]);\r\n                dst.push(src[b + 0]);\r\n                dst.push(src[b + 1]);\r\n                dst.push(src[b + 2]);\r\n                dst.push(src[c + 0]);\r\n                dst.push(src[c + 1]);\r\n                dst.push(src[c + 2]);\r\n            },\r\n            addVertexLine: function (a) {\r\n                var src = this.vertices;\r\n                var dst = this.object.geometry.vertices;\r\n                dst.push(src[a + 0]);\r\n                dst.push(src[a + 1]);\r\n                dst.push(src[a + 2]);\r\n            },\r\n            addNormal: function (a, b, c) {\r\n                var src = this.normals;\r\n                var dst = this.object.geometry.normals;\r\n                dst.push(src[a + 0]);\r\n                dst.push(src[a + 1]);\r\n                dst.push(src[a + 2]);\r\n                dst.push(src[b + 0]);\r\n                dst.push(src[b + 1]);\r\n                dst.push(src[b + 2]);\r\n                dst.push(src[c + 0]);\r\n                dst.push(src[c + 1]);\r\n                dst.push(src[c + 2]);\r\n            },\r\n            addFace: function (a, b, c, d, na, nb, nc, nd) {\r\n                var vLen = this.vertices.length;\r\n                var ia = this.parseVertexIndex(a, vLen);\r\n                var ib = this.parseVertexIndex(b, vLen);\r\n                var ic = this.parseVertexIndex(c, vLen);\r\n                var id;\r\n                if (d === undefined) {\r\n                    this.addVertex(ia, ib, ic);\r\n                }\r\n                else {\r\n                    id = this.parseVertexIndex(d, vLen);\r\n                    this.addVertex(ia, ib, id);\r\n                    this.addVertex(ib, ic, id);\r\n                }\r\n                if (na !== undefined) {\r\n                    // Normals are many times the same. If so, skip function call and parseInt.\r\n                    var nLen = this.normals.length;\r\n                    ia = this.parseNormalIndex(na, nLen);\r\n                    ib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\r\n                    ic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\r\n                    if (d === undefined) {\r\n                        this.addNormal(ia, ib, ic);\r\n                    }\r\n                    else {\r\n                        id = this.parseNormalIndex(nd, nLen);\r\n                        this.addNormal(ia, ib, id);\r\n                        this.addNormal(ib, ic, id);\r\n                    }\r\n                }\r\n            },\r\n            addLineGeometry: function (vertices) {\r\n                this.object.geometry.type = 'Line';\r\n                var vLen = this.vertices.length;\r\n                for (var vi = 0, l = vertices.length; vi < l; vi++) {\r\n                    this.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\r\n                }\r\n            }\r\n        };\r\n        state.startObject('', false);\r\n        return state;\r\n    },\r\n    parse: function (text) {\r\n        var state = this._createParserState();\r\n        if (text.indexOf('\\r\\n') !== -1) {\r\n            // This is faster than String.split with regex that splits on both\r\n            text = text.replace(/\\r\\n/g, '\\n');\r\n        }\r\n        if (text.indexOf('\\\\\\n') !== -1) {\r\n            // join lines separated by a line continuation character (\\)\r\n            text = text.replace(/\\\\\\n/g, '');\r\n        }\r\n        var i, l;\r\n        var lines = text.split('\\n');\r\n        var line = '';\r\n        var lineFirstChar = '';\r\n        var lineSecondChar = '';\r\n        var lineLength = 0;\r\n        var result = [];\r\n        // Faster to just trim left side of the line. Use if available.\r\n        var trimLeft = (typeof ''.trimLeft === 'function');\r\n        for (i = 0, l = lines.length; i < l; i++) {\r\n            line = lines[i];\r\n            line = trimLeft ? line.trimLeft() : line.trim();\r\n            lineLength = line.length;\r\n            if (lineLength === 0)\r\n                continue;\r\n            lineFirstChar = line.charAt(0);\r\n            // @todo invoke passed in handler if any\r\n            if (lineFirstChar === '#')\r\n                continue;\r\n            if (lineFirstChar === 'v') {\r\n                lineSecondChar = line.charAt(1);\r\n                if (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\r\n                    // 0                  1      2      3\r\n                    // [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n                    state.vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\r\n                }\r\n                else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\r\n                    // 0                   1      2      3\r\n                    // [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n                    state.normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\r\n                }\r\n                else if (lineSecondChar === 't' && this.regexp.uv_pattern.exec(line) !== null) {\r\n                    // ignore uv line\r\n                }\r\n                else {\r\n                    throw new Error(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\r\n                }\r\n            }\r\n            else if (lineFirstChar === 'f') {\r\n                if ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\r\n                    // f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n                    // 0                        1    2    3    4    5    6    7    8    9   10         11         12\r\n                    // [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\r\n                    state.addFace(result[1], result[4], result[7], result[10], \r\n                    // result[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],  // ignore uv part\r\n                    result[3], result[6], result[9], result[12]);\r\n                }\r\n                else if (this.regexp.face_vertex_uv.exec(line) !== null) {\r\n                    // ignore uv line\r\n                }\r\n                else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\r\n                    // f vertex//normal vertex//normal vertex//normal\r\n                    // 0                     1    2    3    4    5    6   7          8\r\n                    // [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n                    state.addFace(result[1], result[3], result[5], result[7], result[2], result[4], result[6], result[8]);\r\n                }\r\n                else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\r\n                    // f vertex vertex vertex\r\n                    // 0            1    2    3   4\r\n                    // [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\r\n                    state.addFace(result[1], result[2], result[3], result[4]);\r\n                }\r\n                else {\r\n                    throw new Error(\"Unexpected face line: '\" + line + \"'\");\r\n                }\r\n            }\r\n            else if (lineFirstChar === 'l') {\r\n                var lineParts = line.substring(1).trim().split(' ');\r\n                var lineVertices = [];\r\n                var lineUVs = [];\r\n                if (line.indexOf('/') === -1) {\r\n                    lineVertices = lineParts;\r\n                }\r\n                else {\r\n                    for (var li = 0, llen = lineParts.length; li < llen; li++) {\r\n                        var parts = lineParts[li].split('/');\r\n                        if (parts[0] !== '')\r\n                            lineVertices.push(parts[0]);\r\n                        if (parts[1] !== '')\r\n                            lineUVs.push(parts[1]);\r\n                    }\r\n                }\r\n                state.addLineGeometry(lineVertices, lineUVs);\r\n            }\r\n            else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\r\n                // o object_name\r\n                // or\r\n                // g group_name\r\n                var name = result[0].substr(1).trim();\r\n                state.startObject(name);\r\n                // ignore material related lines\r\n                // eslint-disable-next-line no-empty\r\n            }\r\n            else if (this.regexp.material_use_pattern.test(line)) {\r\n                // eslint-disable-next-line no-empty\r\n            }\r\n            else if (this.regexp.material_library_pattern.test(line)) {\r\n                // eslint-disable-next-line no-empty\r\n            }\r\n            else if (this.regexp.smoothing_pattern.exec(line) !== null) {\r\n            }\r\n            else {\r\n                // Handle null terminated files without exception\r\n                if (line === '\\0')\r\n                    continue;\r\n                throw new Error(\"Unexpected line: '\" + line + \"'\");\r\n            }\r\n        }\r\n        var container = [];\r\n        for (i = 0, l = state.objects.length; i < l; i++) {\r\n            var object = state.objects[i];\r\n            var geometry = object.geometry;\r\n            // Skip o/g line declarations that did not follow with any faces\r\n            if (geometry.vertices.length === 0)\r\n                continue;\r\n            var buffergeometry = new BufferGeometry();\r\n            buffergeometry.setAttribute('position', new BufferAttribute(new Float32Array(geometry.vertices), 3));\r\n            if (geometry.normals.length > 0) {\r\n                buffergeometry.setAttribute('normal', new BufferAttribute(new Float32Array(geometry.normals), 3));\r\n            }\r\n            else {\r\n                buffergeometry.computeVertexNormals();\r\n            }\r\n            container.push(buffergeometry);\r\n        }\r\n        return container;\r\n    }\r\n};\r\nclass ObjParser extends SurfaceParser {\r\n    get type() { return 'obj'; }\r\n    getLoader() {\r\n        return new OBJLoader();\r\n    }\r\n}\r\nParserRegistry.add('obj', ObjParser);\r\nexport default ObjParser;\r\n//# sourceMappingURL=obj-parser.js.map","/**\r\n * @file Ply Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Geometry, Vector3, Face3, Color } from 'three';\r\nimport { ParserRegistry } from '../globals';\r\nimport SurfaceParser from './surface-parser';\r\nconst PLYLoader = (function PLYLoader() {\r\n    this.propertyNameMapping = {};\r\n});\r\nPLYLoader.prototype = {\r\n    constructor: PLYLoader,\r\n    setPropertyNameMapping: function (mapping) {\r\n        this.propertyNameMapping = mapping;\r\n    },\r\n    bin2str: function (buf) {\r\n        var arrayBuffer = new Uint8Array(buf);\r\n        var str = '';\r\n        for (var i = 0; i < buf.byteLength; i++) {\r\n            str += String.fromCharCode(arrayBuffer[i]); // implicitly assumes little-endian\r\n        }\r\n        return str;\r\n    },\r\n    isASCII: function (data) {\r\n        var header = this.parseHeader(this.bin2str(data));\r\n        return header.format === 'ascii';\r\n    },\r\n    parse: function (data) {\r\n        if (data instanceof ArrayBuffer) {\r\n            return (this.isASCII(data)\r\n                ? this.parseASCII(this.bin2str(data))\r\n                : this.parseBinary(data));\r\n        }\r\n        else {\r\n            return this.parseASCII(data);\r\n        }\r\n    },\r\n    parseHeader: function (data) {\r\n        var patternHeader = /ply([\\s\\S]*)end_header\\s/;\r\n        var headerText = '';\r\n        var headerLength = 0;\r\n        var result = patternHeader.exec(data);\r\n        if (result !== null) {\r\n            headerText = result[1];\r\n            headerLength = result[0].length;\r\n        }\r\n        var header = {\r\n            comments: [],\r\n            elements: [],\r\n            headerLength: headerLength\r\n        };\r\n        var lines = headerText.split('\\n');\r\n        var currentElement, lineType, lineValues;\r\n        function makePlyElementProperty(propertValues, propertyNameMapping) {\r\n            var property = {\r\n                type: propertValues[0]\r\n            };\r\n            if (property.type === 'list') {\r\n                property.name = propertValues[3];\r\n                property.countType = propertValues[1];\r\n                property.itemType = propertValues[2];\r\n            }\r\n            else {\r\n                property.name = propertValues[1];\r\n            }\r\n            if (property.name in propertyNameMapping) {\r\n                property.name = propertyNameMapping[property.name];\r\n            }\r\n            return property;\r\n        }\r\n        for (var i = 0; i < lines.length; i++) {\r\n            var line = lines[i];\r\n            line = line.trim();\r\n            if (line === '') {\r\n                continue;\r\n            }\r\n            lineValues = line.split(/\\s+/);\r\n            lineType = lineValues.shift();\r\n            line = lineValues.join(' ');\r\n            switch (lineType) {\r\n                case 'format':\r\n                    header.format = lineValues[0];\r\n                    header.version = lineValues[1];\r\n                    break;\r\n                case 'comment':\r\n                    header.comments.push(line);\r\n                    break;\r\n                case 'element':\r\n                    if (currentElement !== undefined) {\r\n                        header.elements.push(currentElement);\r\n                    }\r\n                    currentElement = {};\r\n                    currentElement.name = lineValues[0];\r\n                    currentElement.count = parseInt(lineValues[1]);\r\n                    currentElement.properties = [];\r\n                    break;\r\n                case 'property':\r\n                    currentElement.properties.push(makePlyElementProperty(lineValues, this.propertyNameMapping));\r\n                    break;\r\n                default:\r\n                    console.log('unhandled', lineType, lineValues);\r\n            }\r\n        }\r\n        if (currentElement !== undefined) {\r\n            header.elements.push(currentElement);\r\n        }\r\n        return header;\r\n    },\r\n    parseASCIINumber: function (n, type) {\r\n        switch (type) {\r\n            case 'char':\r\n            case 'uchar':\r\n            case 'short':\r\n            case 'ushort':\r\n            case 'int':\r\n            case 'uint':\r\n            case 'int8':\r\n            case 'uint8':\r\n            case 'int16':\r\n            case 'uint16':\r\n            case 'int32':\r\n            case 'uint32':\r\n                return parseInt(n);\r\n            case 'float':\r\n            case 'double':\r\n            case 'float32':\r\n            case 'float64':\r\n                return parseFloat(n);\r\n        }\r\n    },\r\n    parseASCIIElement: function (properties, line) {\r\n        var values = line.split(/\\s+/);\r\n        var element = {};\r\n        for (var i = 0; i < properties.length; i++) {\r\n            if (properties[i].type === 'list') {\r\n                var list = [];\r\n                var n = this.parseASCIINumber(values.shift(), properties[i].countType);\r\n                for (var j = 0; j < n; j++) {\r\n                    list.push(this.parseASCIINumber(values.shift(), properties[i].itemType));\r\n                }\r\n                element[properties[i].name] = list;\r\n            }\r\n            else {\r\n                element[properties[i].name] = this.parseASCIINumber(values.shift(), properties[i].type);\r\n            }\r\n        }\r\n        return element;\r\n    },\r\n    parseASCII: function (data) {\r\n        // PLY ascii format specification, as per http://en.wikipedia.org/wiki/PLY_(file_format)\r\n        var geometry = new Geometry();\r\n        var result;\r\n        var header = this.parseHeader(data);\r\n        var patternBody = /end_header\\s([\\s\\S]*)$/;\r\n        var body = '';\r\n        if ((result = patternBody.exec(data)) !== null) {\r\n            body = result[1];\r\n        }\r\n        var lines = body.split('\\n');\r\n        var currentElement = 0;\r\n        var currentElementCount = 0;\r\n        geometry.useColor = false;\r\n        for (var i = 0; i < lines.length; i++) {\r\n            var line = lines[i];\r\n            line = line.trim();\r\n            if (line === '') {\r\n                continue;\r\n            }\r\n            if (currentElementCount >= header.elements[currentElement].count) {\r\n                currentElement++;\r\n                currentElementCount = 0;\r\n            }\r\n            var element = this.parseASCIIElement(header.elements[currentElement].properties, line);\r\n            this.handleElement(geometry, header.elements[currentElement].name, element);\r\n            currentElementCount++;\r\n        }\r\n        return this.postProcess(geometry);\r\n    },\r\n    postProcess: function (geometry) {\r\n        if (geometry.useColor) {\r\n            for (var i = 0; i < geometry.faces.length; i++) {\r\n                geometry.faces[i].vertexColors = [\r\n                    geometry.colors[geometry.faces[i].a],\r\n                    geometry.colors[geometry.faces[i].b],\r\n                    geometry.colors[geometry.faces[i].c]\r\n                ];\r\n            }\r\n            geometry.elementsNeedUpdate = true;\r\n        }\r\n        geometry.computeBoundingSphere();\r\n        return geometry;\r\n    },\r\n    handleElement: function (geometry, elementName, element) {\r\n        if (elementName === 'vertex') {\r\n            geometry.vertices.push(new Vector3(element.x, element.y, element.z));\r\n            if ('red' in element && 'green' in element && 'blue' in element) {\r\n                geometry.useColor = true;\r\n                var color = new Color();\r\n                color.setRGB(element.red / 255.0, element.green / 255.0, element.blue / 255.0);\r\n                geometry.colors.push(color);\r\n            }\r\n        }\r\n        else if (elementName === 'face') {\r\n            var vertexIndices = element.vertex_indices;\r\n            if (vertexIndices.length === 3) {\r\n                geometry.faces.push(new Face3(vertexIndices[0], vertexIndices[1], vertexIndices[2]));\r\n            }\r\n            else if (vertexIndices.length === 4) {\r\n                geometry.faces.push(new Face3(vertexIndices[0], vertexIndices[1], vertexIndices[3]), new Face3(vertexIndices[1], vertexIndices[2], vertexIndices[3]));\r\n            }\r\n        }\r\n    },\r\n    binaryRead: function (dataview, at, type, littleEndian) {\r\n        switch (type) {\r\n            // corespondences for non-specific length types here match rply:\r\n            case 'int8':\r\n            case 'char': return [dataview.getInt8(at), 1];\r\n            case 'uint8':\r\n            case 'uchar': return [dataview.getUint8(at), 1];\r\n            case 'int16':\r\n            case 'short': return [dataview.getInt16(at, littleEndian), 2];\r\n            case 'uint16':\r\n            case 'ushort': return [dataview.getUint16(at, littleEndian), 2];\r\n            case 'int32':\r\n            case 'int': return [dataview.getInt32(at, littleEndian), 4];\r\n            case 'uint32':\r\n            case 'uint': return [dataview.getUint32(at, littleEndian), 4];\r\n            case 'float32':\r\n            case 'float': return [dataview.getFloat32(at, littleEndian), 4];\r\n            case 'float64':\r\n            case 'double': return [dataview.getFloat64(at, littleEndian), 8];\r\n        }\r\n    },\r\n    binaryReadElement: function (dataview, at, properties, littleEndian) {\r\n        var element = {};\r\n        var result;\r\n        var read = 0;\r\n        for (var i = 0; i < properties.length; i++) {\r\n            if (properties[i].type === 'list') {\r\n                var list = [];\r\n                result = this.binaryRead(dataview, at + read, properties[i].countType, littleEndian);\r\n                var n = result[0];\r\n                read += result[1];\r\n                for (var j = 0; j < n; j++) {\r\n                    result = this.binaryRead(dataview, at + read, properties[i].itemType, littleEndian);\r\n                    list.push(result[0]);\r\n                    read += result[1];\r\n                }\r\n                element[properties[i].name] = list;\r\n            }\r\n            else {\r\n                result = this.binaryRead(dataview, at + read, properties[i].type, littleEndian);\r\n                element[properties[i].name] = result[0];\r\n                read += result[1];\r\n            }\r\n        }\r\n        return [element, read];\r\n    },\r\n    parseBinary: function (data) {\r\n        var geometry = new Geometry();\r\n        var header = this.parseHeader(this.bin2str(data));\r\n        var littleEndian = (header.format === 'binary_little_endian');\r\n        var body = new DataView(data, header.headerLength);\r\n        var result;\r\n        var loc = 0;\r\n        for (var currentElement = 0; currentElement < header.elements.length; currentElement++) {\r\n            for (var currentElementCount = 0; currentElementCount < header.elements[currentElement].count; currentElementCount++) {\r\n                result = this.binaryReadElement(body, loc, header.elements[currentElement].properties, littleEndian);\r\n                loc += result[1];\r\n                var element = result[0];\r\n                this.handleElement(geometry, header.elements[currentElement].name, element);\r\n            }\r\n        }\r\n        return this.postProcess(geometry);\r\n    }\r\n};\r\nclass PlyParser extends SurfaceParser {\r\n    get type() { return 'ply'; }\r\n    getLoader() {\r\n        return new PLYLoader();\r\n    }\r\n}\r\nParserRegistry.add('ply', PlyParser);\r\nexport default PlyParser;\r\n//# sourceMappingURL=ply-parser.js.map","/**\r\n * @file Csv Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { defaults } from '../utils';\r\nimport { ParserRegistry } from '../globals';\r\nimport Parser from './parser';\r\n/**\r\n * CSV parser\r\n */\r\nclass CsvParser extends Parser {\r\n    /**\r\n       * [constructor description]\r\n       * @param  {Streamer} streamer - the streamer object\r\n       * @param  {Object} params - parameter object\r\n       * @param  {Char} params.delimiter - delimiter character\r\n       * @param  {Char} params.comment - comment character\r\n       * @param  {Boolean} params.columnNames - use first data line as column names\r\n       */\r\n    constructor(streamer, params) {\r\n        const p = params || {};\r\n        super(streamer, p);\r\n        this.delimiter = defaults(p.delimiter, ',');\r\n        this.comment = defaults(p.comment, '#');\r\n        this.columnNames = defaults(p.columnNames, false);\r\n        this.table = {\r\n            name: this.name,\r\n            path: this.path,\r\n            columnNames: [],\r\n            data: []\r\n        };\r\n    }\r\n    get type() { return 'csv'; }\r\n    get __objName() { return 'table'; }\r\n    _parse() {\r\n        const data = this.table.data;\r\n        const reDelimiter = new RegExp('\\\\s*' + this.delimiter + '\\\\s*');\r\n        let j = 0;\r\n        this.streamer.eachChunkOfLines(chunk => {\r\n            const n = chunk.length;\r\n            for (let i = 0; i < n; ++i) {\r\n                const line = chunk[i].trim();\r\n                if (line.startsWith(this.comment))\r\n                    continue;\r\n                const values = line.split(reDelimiter);\r\n                if (j === 0) {\r\n                    this.table.columnNames = values;\r\n                }\r\n                else if (line) {\r\n                    data.push(values);\r\n                }\r\n                ++j;\r\n            }\r\n        });\r\n    }\r\n}\r\nParserRegistry.add('csv', CsvParser);\r\nexport default CsvParser;\r\n//# sourceMappingURL=csv-parser.js.map","/**\r\n * @file Json Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ParserRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport Parser from './parser';\r\nclass JsonParser extends Parser {\r\n    constructor(streamer, params) {\r\n        const p = params || {};\r\n        super(streamer, p);\r\n        this.string = defaults(p.string, false);\r\n        this.json = {\r\n            name: this.name,\r\n            path: this.path,\r\n            data: {}\r\n        };\r\n    }\r\n    get type() { return 'json'; }\r\n    get __objName() { return 'json'; }\r\n    get isJson() { return true; }\r\n    _parse() {\r\n        if (this.streamer.isBinary() || this.string) {\r\n            this.json.data = JSON.parse(this.streamer.asText());\r\n        }\r\n        else {\r\n            this.json.data = this.streamer.data;\r\n        }\r\n    }\r\n}\r\nParserRegistry.add('json', JsonParser);\r\nexport default JsonParser;\r\n//# sourceMappingURL=json-parser.js.map","/**\r\n * @file Msgpack Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport Parser from './parser';\r\nimport { decodeMsgpack } from '../../lib/mmtf.es6';\r\nclass MsgpackParser extends Parser {\r\n    constructor(streamer, params) {\r\n        const p = params || {};\r\n        super(streamer, p);\r\n        this.msgpack = {\r\n            name: this.name,\r\n            path: this.path,\r\n            data: undefined\r\n        };\r\n    }\r\n    get type() { return 'msgpack'; }\r\n    get __objName() { return 'msgpack'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        if (Debug)\r\n            Log.time('MsgpackParser._parse ' + this.name);\r\n        this.msgpack.data = decodeMsgpack(this.streamer.data);\r\n        if (Debug)\r\n            Log.timeEnd('MsgpackParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('msgpack', MsgpackParser);\r\nexport default MsgpackParser;\r\n//# sourceMappingURL=msgpack-parser.js.map","/**\r\n * @file Netcdf Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport Parser from './parser';\r\nimport NetcdfReader from '../utils/netcdf-reader';\r\nclass NetcdfParser extends Parser {\r\n    constructor(streamer, params) {\r\n        const p = params || {};\r\n        super(streamer, p);\r\n        this.netcdf = {\r\n            name: this.name,\r\n            path: this.path,\r\n            data: undefined\r\n        };\r\n    }\r\n    get type() { return 'netcdf'; }\r\n    get __objName() { return 'netcdf'; }\r\n    get isBinary() { return true; }\r\n    _parse() {\r\n        if (Debug)\r\n            Log.time('NetcdfParser._parse ' + this.name);\r\n        this.netcdf.data = new NetcdfReader(this.streamer.data);\r\n        if (Debug)\r\n            Log.timeEnd('NetcdfParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('netcdf', NetcdfParser);\r\nexport default NetcdfParser;\r\n//# sourceMappingURL=netcdf-parser.js.map","/**\r\n * @file Text Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ParserRegistry } from '../globals';\r\nimport Parser from './parser';\r\nclass TextParser extends Parser {\r\n    constructor(streamer, params) {\r\n        super(streamer, params);\r\n        this.text = {\r\n            name: this.name,\r\n            path: this.path,\r\n            data: ''\r\n        };\r\n    }\r\n    get type() { return 'text'; }\r\n    get __objName() { return 'text'; }\r\n    _parse() {\r\n        this.text.data = this.streamer.asText();\r\n    }\r\n}\r\nParserRegistry.add('txt', TextParser);\r\nParserRegistry.add('text', TextParser);\r\nexport default TextParser;\r\n//# sourceMappingURL=text-parser.js.map","/**\r\n * @file Parse Xml\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nconst reStrip = /^['\"]|['\"]$/g;\r\nconst reTag = /^<([\\w-:.]+)\\s*/;\r\nconst reContent = /^([^<]*)/;\r\nconst reAttr = /([\\w:-]+)\\s*=\\s*(\"[^\"]*\"|'[^']*'|\\w+)\\s*/;\r\nfunction strip(val) {\r\n    return val.replace(reStrip, '');\r\n}\r\nexport function parseXml(xml) {\r\n    // trim and strip comments\r\n    xml = xml.trim().replace(/<!--[\\s\\S]*?-->/g, '');\r\n    return document();\r\n    function document() {\r\n        return {\r\n            declaration: declaration(),\r\n            root: tag()\r\n        };\r\n    }\r\n    function declaration() {\r\n        const m = match(/^<\\?xml\\s*/);\r\n        if (!m)\r\n            return;\r\n        // tag\r\n        const node = {\r\n            attributes: {}\r\n        };\r\n        // attributes\r\n        while (!(eos() || is('?>'))) {\r\n            const attr = attribute();\r\n            if (!attr)\r\n                return node;\r\n            node.attributes[attr.name] = attr.value;\r\n        }\r\n        match(/\\?>\\s*/);\r\n        return node;\r\n    }\r\n    function tag() {\r\n        const m = match(reTag);\r\n        if (!m)\r\n            return;\r\n        // name\r\n        const node = {\r\n            name: m[1],\r\n            attributes: {},\r\n            children: []\r\n        };\r\n        // attributes\r\n        while (!(eos() || is('>') || is('?>') || is('/>'))) {\r\n            const attr = attribute();\r\n            if (!attr)\r\n                return node;\r\n            node.attributes[attr.name] = attr.value;\r\n        }\r\n        // self closing tag\r\n        if (match(/^\\s*\\/>\\s*/)) {\r\n            return node;\r\n        }\r\n        match(/\\??>\\s*/);\r\n        // content\r\n        node.content = content();\r\n        // children\r\n        let child;\r\n        while ((child = tag())) {\r\n            node.children.push(child);\r\n        }\r\n        // closing\r\n        match(/^<\\/[\\w-:.]+>\\s*/);\r\n        return node;\r\n    }\r\n    function content() {\r\n        const m = match(reContent);\r\n        if (m)\r\n            return m[1];\r\n        return '';\r\n    }\r\n    function attribute() {\r\n        const m = match(reAttr);\r\n        if (!m)\r\n            return;\r\n        return { name: m[1], value: strip(m[2]) };\r\n    }\r\n    function match(re) {\r\n        const m = xml.match(re);\r\n        if (!m)\r\n            return;\r\n        xml = xml.slice(m[0].length);\r\n        return m;\r\n    }\r\n    function eos() {\r\n        return xml.length === 0;\r\n    }\r\n    function is(prefix) {\r\n        return xml.indexOf(prefix) === 0;\r\n    }\r\n}\r\n//# sourceMappingURL=parse-xml.js.map","/**\r\n * @file Xml Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport { defaults } from '../utils';\r\n// @ts-ignore: unused import XMLNode required for declaration only\r\nimport { parseXml } from '../utils/parse-xml';\r\nimport Parser from './parser';\r\nclass XmlParser extends Parser {\r\n    constructor(streamer, params) {\r\n        const p = params || {};\r\n        super(streamer, p);\r\n        this.useDomParser = defaults(p.useDomParser, false);\r\n        this.xml = {\r\n            name: this.name,\r\n            path: this.path,\r\n            data: {}\r\n        };\r\n    }\r\n    get type() { return 'xml'; }\r\n    get __objName() { return 'xml'; }\r\n    get isXml() { return true; }\r\n    __xmlParser(xml) {\r\n        return parseXml(xml);\r\n    }\r\n    __domParser(xml) {\r\n        const domParser = new window.DOMParser();\r\n        return domParser.parseFromString(xml, 'text/xml');\r\n    }\r\n    _parse() {\r\n        if (Debug)\r\n            Log.time('XmlParser._parse ' + this.name);\r\n        if (this.useDomParser) {\r\n            if (this.streamer.data instanceof Document) { //TS conversion: stripped the window prefix from window.Document\r\n                this.xml.data = this.streamer.data;\r\n            }\r\n            else {\r\n                this.xml.data = this.__domParser(this.streamer.asText());\r\n            }\r\n        }\r\n        else {\r\n            this.xml.data = this.__xmlParser(this.streamer.asText());\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('XmlParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('xml', XmlParser);\r\nexport default XmlParser;\r\n//# sourceMappingURL=xml-parser.js.map","/**\r\n * @file Validation\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Vector3, Color } from 'three';\r\nimport { Debug, Log } from '../globals';\r\nimport { defaults } from '../utils';\r\nimport { ClashPicker } from '../utils/picker';\r\nimport { uniformArray3 } from '../math/array-utils';\r\nimport { guessElement } from '../structure/structure-utils';\r\nfunction getNamedItem(a, name) {\r\n    const item = a.getNamedItem(name);\r\n    return item !== null ? item.value : '';\r\n}\r\nfunction getSele(a, atomname, useAltcode = false) {\r\n    const icode = getNamedItem(a, 'icode').trim();\r\n    const chain = getNamedItem(a, 'chain').trim();\r\n    const altcode = getNamedItem(a, 'altcode');\r\n    let sele = getNamedItem(a, 'resnum');\r\n    if (icode)\r\n        sele += '^' + icode;\r\n    if (chain)\r\n        sele += ':' + chain;\r\n    if (atomname)\r\n        sele += '.' + atomname;\r\n    if (useAltcode && altcode.trim())\r\n        sele += '%' + altcode;\r\n    sele += '/' + (parseInt(getNamedItem(a, 'model')) - 1);\r\n    return sele;\r\n}\r\nfunction getResSele(a) {\r\n    const chain = getNamedItem(a, 'chain').trim();\r\n    const rescode = getNamedItem(a, 'rescode');\r\n    const resnum = getNamedItem(a, 'resnum');\r\n    let sele = `[${rescode}]${resnum}`;\r\n    if (chain)\r\n        sele += `:${chain}`;\r\n    return sele;\r\n}\r\nfunction setBitDict(dict, key, bit) {\r\n    if (dict[key] === undefined) {\r\n        dict[key] = bit;\r\n    }\r\n    else {\r\n        dict[key] |= bit;\r\n    }\r\n}\r\nfunction hasAttrValue(attr, value) {\r\n    return attr !== null && attr.value === value;\r\n}\r\nfunction getAtomSele(ap) {\r\n    const icode = ap.inscode;\r\n    const chain = ap.chainname;\r\n    const atomname = ap.atomname;\r\n    const altcode = ap.altloc;\r\n    let sele = ap.resno + '';\r\n    if (icode)\r\n        sele += '^' + icode;\r\n    if (chain)\r\n        sele += ':' + chain;\r\n    if (atomname)\r\n        sele += '.' + atomname;\r\n    if (altcode)\r\n        sele += '%' + altcode;\r\n    sele += '/' + ap.modelIndex;\r\n    return sele;\r\n}\r\nfunction getProblemCount(clashDict, g, ga) {\r\n    let geoProblemCount = 0;\r\n    const clashes = g.getElementsByTagName('clash');\r\n    for (let j = 0, jl = clashes.length; j < jl; ++j) {\r\n        if (clashDict[getNamedItem(clashes[j].attributes, 'cid')]) {\r\n            geoProblemCount += 1;\r\n            break;\r\n        }\r\n    }\r\n    const angleOutliers = g.getElementsByTagName('angle-outlier');\r\n    if (angleOutliers.length > 0) {\r\n        geoProblemCount += 1;\r\n    }\r\n    const bondOutliers = g.getElementsByTagName('bond-outlier');\r\n    if (bondOutliers.length > 0) {\r\n        geoProblemCount += 1;\r\n    }\r\n    const planeOutliers = g.getElementsByTagName('plane-outlier');\r\n    if (planeOutliers.length > 0) {\r\n        geoProblemCount += 1;\r\n    }\r\n    if (hasAttrValue(ga.getNamedItem('rota'), 'OUTLIER')) {\r\n        geoProblemCount += 1;\r\n    }\r\n    if (hasAttrValue(ga.getNamedItem('rama'), 'OUTLIER')) {\r\n        geoProblemCount += 1;\r\n    }\r\n    if (hasAttrValue(ga.getNamedItem('RNApucker'), 'outlier')) {\r\n        geoProblemCount += 1;\r\n    }\r\n    return geoProblemCount;\r\n}\r\nclass Validation {\r\n    constructor(name, path) {\r\n        this.name = name;\r\n        this.path = path;\r\n        this.rsrzDict = {};\r\n        this.rsccDict = {};\r\n        /**\r\n         * Random Coil Index (RCI) - evaluates the proximity of residue structural\r\n         * and dynamic properties to the properties of flexible random coil regions\r\n         * from NMR chemical shifts.\r\n         *\r\n         * Mark V. Berjanskii and David S. Wishart (2005)\r\n         * A Simple Method To Predict Protein Flexibility Using Secondary Chemical Shifts\r\n         * J. Am. Chem. Soc., 2005, 127 (43), pp 14970–14971\r\n         * http://pubs.acs.org/doi/abs/10.1021/ja054842f\r\n         *\r\n         * Mark V. Berjanskii and David S. Wishart (2008)\r\n         * Application of the random coil index to studying protein flexibility.\r\n         * J Biomol NMR. 2008 Jan;40(1):31-48. Epub 2007 Nov 6.\r\n         * http://www.springerlink.com/content/2966482w10306126/\r\n         */\r\n        this.rciDict = {};\r\n        this.clashDict = {};\r\n        this.clashArray = [];\r\n        this.geoDict = {};\r\n        this.geoAtomDict = {};\r\n        this.atomDict = {};\r\n        this.clashSele = 'NONE';\r\n    }\r\n    get type() { return 'validation'; }\r\n    fromXml(xml) {\r\n        if (Debug)\r\n            Log.time('Validation.fromXml');\r\n        const rsrzDict = this.rsrzDict;\r\n        const rsccDict = this.rsccDict;\r\n        const rciDict = this.rciDict;\r\n        const clashDict = this.clashDict;\r\n        const clashArray = this.clashArray;\r\n        const geoDict = this.geoDict;\r\n        const geoAtomDict = this.geoAtomDict;\r\n        const atomDict = this.atomDict;\r\n        const entries = xml.getElementsByTagName('Entry');\r\n        if (entries.length === 1) {\r\n            const chemicalShiftLists = entries[0].getElementsByTagName('chemical_shift_list');\r\n            if (chemicalShiftLists.length === 1) {\r\n                const randomCoilIndices = chemicalShiftLists[0].getElementsByTagName('random_coil_index');\r\n                for (let j = 0, jl = randomCoilIndices.length; j < jl; ++j) {\r\n                    const rcia = randomCoilIndices[j].attributes;\r\n                    const sele = getResSele(rcia);\r\n                    rciDict[sele] = parseFloat(getNamedItem(rcia, 'value'));\r\n                }\r\n            }\r\n        }\r\n        const groups = xml.getElementsByTagName('ModelledSubgroup');\r\n        const _clashDict = {};\r\n        const clashList = [];\r\n        if (Debug)\r\n            Log.time('Validation.fromXml#clashDict');\r\n        for (let i = 0, il = groups.length; i < il; ++i) {\r\n            const g = groups[i];\r\n            const ga = g.attributes;\r\n            const sele = getSele(ga);\r\n            if (ga.getNamedItem('rsrz') !== null) {\r\n                rsrzDict[sele] = parseFloat(getNamedItem(ga, 'rsrz'));\r\n            }\r\n            if (ga.getNamedItem('rscc') !== null) {\r\n                rsccDict[sele] = parseFloat(getNamedItem(ga, 'rscc'));\r\n            }\r\n            const seleAttr = xml.createAttribute('sele');\r\n            seleAttr.value = sele;\r\n            ga.setNamedItem(seleAttr);\r\n            const clashes = g.getElementsByTagName('clash');\r\n            for (let j = 0, jl = clashes.length; j < jl; ++j) {\r\n                const ca = clashes[j].attributes;\r\n                const atom = getNamedItem(ca, 'atom');\r\n                if (guessElement(atom) !== 'H') {\r\n                    const cid = getNamedItem(ca, 'cid');\r\n                    const atomSele = getSele(ga, atom, true);\r\n                    atomDict[atomSele] = true;\r\n                    if (_clashDict[cid] === undefined) {\r\n                        _clashDict[cid] = {\r\n                            sele1: atomSele,\r\n                            res1: sele\r\n                        };\r\n                    }\r\n                    else {\r\n                        const c = _clashDict[cid];\r\n                        if (c.res1 !== sele) {\r\n                            c.sele2 = atomSele;\r\n                            c.res2 = sele;\r\n                            clashList.push(c.res1, sele);\r\n                            clashDict[cid] = c;\r\n                            clashArray.push(c);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (Debug)\r\n            Log.timeEnd('Validation.fromXml#clashDict');\r\n        for (let i = 0, il = groups.length; i < il; ++i) {\r\n            const g = groups[i];\r\n            const ga = g.attributes;\r\n            const sele = getNamedItem(ga, 'sele');\r\n            const isPolymer = getNamedItem(ga, 'seq') !== '.';\r\n            if (isPolymer) {\r\n                const geoProblemCount = getProblemCount(clashDict, g, ga);\r\n                if (geoProblemCount > 0) {\r\n                    geoDict[sele] = geoProblemCount;\r\n                }\r\n            }\r\n            else {\r\n                const clashes = g.getElementsByTagName('clash');\r\n                const mogBondOutliers = g.getElementsByTagName('mog-bond-outlier');\r\n                const mogAngleOutliers = g.getElementsByTagName('mog-angle-outlier');\r\n                if (mogBondOutliers.length > 0 || mogAngleOutliers.length > 0 || clashes.length > 0) {\r\n                    const atomDict = {};\r\n                    geoAtomDict[sele] = atomDict;\r\n                    for (let j = 0, jl = clashes.length; j < jl; ++j) {\r\n                        const ca = clashes[j].attributes;\r\n                        if (clashDict[getNamedItem(ca, 'cid')]) {\r\n                            setBitDict(atomDict, getNamedItem(ca, 'atom'), 1);\r\n                        }\r\n                    }\r\n                    for (let j = 0, jl = mogBondOutliers.length; j < jl; ++j) {\r\n                        const mbo = mogBondOutliers[j].attributes;\r\n                        getNamedItem(mbo, 'atoms').split(',').forEach(function (atomname) {\r\n                            setBitDict(atomDict, atomname, 2);\r\n                        });\r\n                    }\r\n                    for (let j = 0, jl = mogAngleOutliers.length; j < jl; ++j) {\r\n                        const mao = mogAngleOutliers[j].attributes;\r\n                        getNamedItem(mao, 'atoms').split(',').forEach(function (atomname) {\r\n                            setBitDict(atomDict, atomname, 4);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.clashSele = clashList.length ? clashList.join(' OR ') : 'NONE';\r\n        if (Debug)\r\n            Log.timeEnd('Validation.fromXml');\r\n    }\r\n    getClashData(params) {\r\n        if (Debug)\r\n            Log.time('Validation.getClashData');\r\n        const p = params || {};\r\n        const s = p.structure;\r\n        const atomSet = s.atomSet; // TODO\r\n        const c = new Color(defaults(p.color, '#f0027f'));\r\n        const ap1 = s.getAtomProxy();\r\n        const ap2 = s.getAtomProxy();\r\n        const vDir = new Vector3();\r\n        const vPos1 = new Vector3();\r\n        const vPos2 = new Vector3();\r\n        const clashArray = this.clashArray;\r\n        const n = clashArray.length;\r\n        const position1 = new Float32Array(n * 3);\r\n        const position2 = new Float32Array(n * 3);\r\n        const color = uniformArray3(n, c.r, c.g, c.b);\r\n        const radius = new Float32Array(n);\r\n        const picking = new Float32Array(n);\r\n        if (Debug)\r\n            Log.time('Validation.getClashData#atomDict');\r\n        const atomDict = this.atomDict;\r\n        s.eachAtom(function (ap) {\r\n            const sele = getAtomSele(ap);\r\n            if (atomDict[sele] === true) {\r\n                atomDict[sele] = ap.index;\r\n            }\r\n        });\r\n        if (Debug)\r\n            Log.timeEnd('Validation.getClashData#atomDict');\r\n        let i = 0;\r\n        clashArray.forEach(function (c, idx) {\r\n            ap1.index = atomDict[c.sele1]; // TODO\r\n            ap2.index = atomDict[c.sele2]; // TODO\r\n            if (ap1.index === undefined || ap2.index === undefined ||\r\n                !atomSet.isSet(ap1.index, ap2.index))\r\n                return;\r\n            vDir.subVectors(ap2, ap1).setLength(ap1.vdw); // TODO\r\n            vPos1.copy(ap1).add(vDir); // TODO\r\n            vDir.subVectors(ap1, ap2).setLength(ap2.vdw); // TODO\r\n            vPos2.copy(ap2).add(vDir); // TODO\r\n            const dHalf = ap1.distanceTo(ap2) / 2;\r\n            const r1 = Math.sqrt(ap1.vdw * ap1.vdw - dHalf * dHalf);\r\n            const r2 = Math.sqrt(ap2.vdw * ap2.vdw - dHalf * dHalf);\r\n            vPos1.toArray(position1, i * 3); // TODO\r\n            vPos2.toArray(position2, i * 3);\r\n            radius[i] = (r1 + r2) / 2;\r\n            picking[i] = idx;\r\n            ++i;\r\n        });\r\n        if (Debug)\r\n            Log.timeEnd('Validation.getClashData');\r\n        return {\r\n            position1: position1.subarray(0, i * 3),\r\n            position2: position2.subarray(0, i * 3),\r\n            color: color.subarray(0, i * 3),\r\n            color2: color.subarray(0, i * 3),\r\n            radius: radius.subarray(0, i),\r\n            picking: new ClashPicker(picking.subarray(0, i), this, s)\r\n        };\r\n    }\r\n}\r\nexport default Validation;\r\n//# sourceMappingURL=validation.js.map","/**\r\n * @file Validation Parser\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Debug, Log, ParserRegistry } from '../globals';\r\nimport XmlParser from './xml-parser';\r\nimport Validation from '../structure/validation';\r\nclass ValidationParser extends XmlParser {\r\n    constructor(streamer, params) {\r\n        const p = params || {};\r\n        super(streamer, p);\r\n        this.useDomParser = true;\r\n        this.validation = new Validation(this.name, this.path);\r\n    }\r\n    get __objName() { return 'validation'; }\r\n    get isXml() { return true; }\r\n    _parse() {\r\n        super._parse();\r\n        if (Debug)\r\n            Log.time('ValidationParser._parse ' + this.name);\r\n        this.validation.fromXml(this.xml.data);\r\n        if (Debug)\r\n            Log.timeEnd('ValidationParser._parse ' + this.name);\r\n    }\r\n}\r\nParserRegistry.add('validation', ValidationParser);\r\nexport default ValidationParser;\r\n//# sourceMappingURL=validation-parser.js.map","\r\n// https://github.com/nodeca/pako\r\n// MIT License, Copyright (c) 2014 by Vitaly Puzrin\r\n\r\n\r\n// 'use strict';\r\n\r\n\r\n// var TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\r\n//                 (typeof Uint16Array !== 'undefined') &&\r\n//                 (typeof Int32Array !== 'undefined');\r\n\r\n\r\nfunction assign(obj /*from1, from2, from3, ...*/) {\r\n  var sources = Array.prototype.slice.call(arguments, 1);\r\n  while (sources.length) {\r\n    var source = sources.shift();\r\n    if (!source) { continue; }\r\n\r\n    if (typeof source !== 'object') {\r\n      throw new TypeError(source + 'must be non-object');\r\n    }\r\n\r\n    for (var p in source) {\r\n      if (source.hasOwnProperty(p)) {\r\n        obj[p] = source[p];\r\n      }\r\n    }\r\n  }\r\n\r\n  return obj;\r\n}\r\n\r\n\r\n// reduce buffer size, avoiding mem copy\r\nfunction shrinkBuf(buf, size) {\r\n  if (buf.length === size) { return buf; }\r\n  if (buf.subarray) { return buf.subarray(0, size); }\r\n  buf.length = size;\r\n  return buf;\r\n}\r\n\r\n\r\nfunction arraySet(dest, src, src_offs, len, dest_offs) {\r\n  if (src.subarray && dest.subarray) {\r\n    dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\r\n    return;\r\n  }\r\n  // Fallback to ordinary array\r\n  for (var i = 0; i < len; i++) {\r\n    dest[dest_offs + i] = src[src_offs + i];\r\n  }\r\n}\r\n\r\n// Join array of chunks to single array.\r\nfunction flattenChunks(chunks) {\r\n  var i, l, len, pos, chunk, result;\r\n\r\n  // calculate data length\r\n  len = 0;\r\n  for (i = 0, l = chunks.length; i < l; i++) {\r\n    len += chunks[i].length;\r\n  }\r\n\r\n  // join chunks\r\n  result = new Uint8Array(len);\r\n  pos = 0;\r\n  for (i = 0, l = chunks.length; i < l; i++) {\r\n    chunk = chunks[i];\r\n    result.set(chunk, pos);\r\n    pos += chunk.length;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n// 'use strict';\r\n\r\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\r\n// It doesn't worth to make additional optimizationa as in original.\r\n// Small size is preferable.\r\n\r\nfunction adler32(adler, buf, len, pos) {\r\n  var s1 = (adler & 0xffff) |0,\r\n      s2 = ((adler >>> 16) & 0xffff) |0,\r\n      n = 0;\r\n\r\n  while (len !== 0) {\r\n    // Set limit ~ twice less than 5552, to keep\r\n    // s2 in 31-bits, because we force signed ints.\r\n    // in other case %= will fail.\r\n    n = len > 2000 ? 2000 : len;\r\n    len -= n;\r\n\r\n    do {\r\n      s1 = (s1 + buf[pos++]) |0;\r\n      s2 = (s2 + s1) |0;\r\n    } while (--n);\r\n\r\n    s1 %= 65521;\r\n    s2 %= 65521;\r\n  }\r\n\r\n  return (s1 | (s2 << 16)) |0;\r\n}\r\n\r\n// 'use strict';\r\n\r\n// Note: we can't get significant speed boost here.\r\n// So write code to minimize size - no pregenerated tables\r\n// and array tools dependencies.\r\n\r\n\r\n// Use ordinary array, since untyped makes no boost here\r\nfunction makeTable() {\r\n  var c, table = [];\r\n\r\n  for (var n = 0; n < 256; n++) {\r\n    c = n;\r\n    for (var k = 0; k < 8; k++) {\r\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\r\n    }\r\n    table[n] = c;\r\n  }\r\n\r\n  return table;\r\n}\r\n\r\n// Create table on load. Just 255 signed longs. Not a problem.\r\nvar crcTable = makeTable();\r\n\r\n\r\nfunction crc32(crc, buf, len, pos) {\r\n  var t = crcTable,\r\n      end = pos + len;\r\n\r\n  crc ^= -1;\r\n\r\n  for (var i = pos; i < end; i++) {\r\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\r\n  }\r\n\r\n  return (crc ^ (-1)); // >>> 0;\r\n}\r\n\r\n// 'use strict';\r\n\r\n// See state defs from inflate.js\r\nvar BAD$1 = 30;       /* got a data error -- remain here until reset */\r\nvar TYPE$1 = 12;      /* i: waiting for type bits, including last-flag bit */\r\n\r\n/*\r\n   Decode literal, length, and distance codes and write out the resulting\r\n   literal and match bytes until either not enough input or output is\r\n   available, an end-of-block is encountered, or a data error is encountered.\r\n   When large enough input and output buffers are supplied to inflate(), for\r\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\r\n   inflate execution time is spent in this routine.\r\n\r\n   Entry assumptions:\r\n\r\n        state.mode === LEN\r\n        strm.avail_in >= 6\r\n        strm.avail_out >= 258\r\n        start >= strm.avail_out\r\n        state.bits < 8\r\n\r\n   On return, state.mode is one of:\r\n\r\n        LEN -- ran out of enough output space or enough available input\r\n        TYPE -- reached end of block code, inflate() to interpret next block\r\n        BAD -- error in block data\r\n\r\n   Notes:\r\n\r\n    - The maximum input bits used by a length/distance pair is 15 bits for the\r\n      length code, 5 bits for the length extra, 15 bits for the distance code,\r\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\r\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\r\n      checking for available input while decoding.\r\n\r\n    - The maximum bytes that a single length/distance pair can output is 258\r\n      bytes, which is the maximum length that can be coded.  inflate_fast()\r\n      requires strm.avail_out >= 258 for each loop to avoid checking for\r\n      output space.\r\n */\r\n// module.exports =\r\nfunction inflate_fast(strm, start) {\r\n  var state;\r\n  var _in;                    /* local strm.input */\r\n  var last;                   /* have enough input while in < last */\r\n  var _out;                   /* local strm.output */\r\n  var beg;                    /* inflate()'s initial strm.output */\r\n  var end;                    /* while out < end, enough space available */\r\n//#ifdef INFLATE_STRICT\r\n  var dmax;                   /* maximum distance from zlib header */\r\n//#endif\r\n  var wsize;                  /* window size or zero if not using window */\r\n  var whave;                  /* valid bytes in the window */\r\n  var wnext;                  /* window write index */\r\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\r\n  var s_window;               /* allocated sliding window, if wsize != 0 */\r\n  var hold;                   /* local strm.hold */\r\n  var bits;                   /* local strm.bits */\r\n  var lcode;                  /* local strm.lencode */\r\n  var dcode;                  /* local strm.distcode */\r\n  var lmask;                  /* mask for first level of length codes */\r\n  var dmask;                  /* mask for first level of distance codes */\r\n  var here;                   /* retrieved table entry */\r\n  var op;                     /* code bits, operation, extra bits, or */\r\n                              /*  window position, window bytes to copy */\r\n  var len;                    /* match length, unused bytes */\r\n  var dist;                   /* match distance */\r\n  var from;                   /* where to copy match from */\r\n  var from_source;\r\n\r\n\r\n  var input, output; // JS specific, because we have no pointers\r\n\r\n  /* copy state to local variables */\r\n  state = strm.state;\r\n  //here = state.here;\r\n  _in = strm.next_in;\r\n  input = strm.input;\r\n  last = _in + (strm.avail_in - 5);\r\n  _out = strm.next_out;\r\n  output = strm.output;\r\n  beg = _out - (start - strm.avail_out);\r\n  end = _out + (strm.avail_out - 257);\r\n//#ifdef INFLATE_STRICT\r\n  dmax = state.dmax;\r\n//#endif\r\n  wsize = state.wsize;\r\n  whave = state.whave;\r\n  wnext = state.wnext;\r\n  s_window = state.window;\r\n  hold = state.hold;\r\n  bits = state.bits;\r\n  lcode = state.lencode;\r\n  dcode = state.distcode;\r\n  lmask = (1 << state.lenbits) - 1;\r\n  dmask = (1 << state.distbits) - 1;\r\n\r\n\r\n  /* decode literals and length/distances until end-of-block or not enough\r\n     input data or output space */\r\n\r\n  top:\r\n  do {\r\n    if (bits < 15) {\r\n      hold += input[_in++] << bits;\r\n      bits += 8;\r\n      hold += input[_in++] << bits;\r\n      bits += 8;\r\n    }\r\n\r\n    here = lcode[hold & lmask];\r\n\r\n    dolen:\r\n    for (;;) { // Goto emulation\r\n      op = here >>> 24/*here.bits*/;\r\n      hold >>>= op;\r\n      bits -= op;\r\n      op = (here >>> 16) & 0xff/*here.op*/;\r\n      if (op === 0) {                          /* literal */\r\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\r\n        //        \"inflate:         literal '%c'\\n\" :\r\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\r\n        output[_out++] = here & 0xffff/*here.val*/;\r\n      }\r\n      else if (op & 16) {                     /* length base */\r\n        len = here & 0xffff/*here.val*/;\r\n        op &= 15;                           /* number of extra bits */\r\n        if (op) {\r\n          if (bits < op) {\r\n            hold += input[_in++] << bits;\r\n            bits += 8;\r\n          }\r\n          len += hold & ((1 << op) - 1);\r\n          hold >>>= op;\r\n          bits -= op;\r\n        }\r\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\r\n        if (bits < 15) {\r\n          hold += input[_in++] << bits;\r\n          bits += 8;\r\n          hold += input[_in++] << bits;\r\n          bits += 8;\r\n        }\r\n        here = dcode[hold & dmask];\r\n\r\n        dodist:\r\n        for (;;) { // goto emulation\r\n          op = here >>> 24/*here.bits*/;\r\n          hold >>>= op;\r\n          bits -= op;\r\n          op = (here >>> 16) & 0xff/*here.op*/;\r\n\r\n          if (op & 16) {                      /* distance base */\r\n            dist = here & 0xffff/*here.val*/;\r\n            op &= 15;                       /* number of extra bits */\r\n            if (bits < op) {\r\n              hold += input[_in++] << bits;\r\n              bits += 8;\r\n              if (bits < op) {\r\n                hold += input[_in++] << bits;\r\n                bits += 8;\r\n              }\r\n            }\r\n            dist += hold & ((1 << op) - 1);\r\n//#ifdef INFLATE_STRICT\r\n            if (dist > dmax) {\r\n              strm.msg = 'invalid distance too far back';\r\n              state.mode = BAD$1;\r\n              break top;\r\n            }\r\n//#endif\r\n            hold >>>= op;\r\n            bits -= op;\r\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\r\n            op = _out - beg;                /* max distance in output */\r\n            if (dist > op) {                /* see if copy from window */\r\n              op = dist - op;               /* distance back in window */\r\n              if (op > whave) {\r\n                if (state.sane) {\r\n                  strm.msg = 'invalid distance too far back';\r\n                  state.mode = BAD$1;\r\n                  break top;\r\n                }\r\n\r\n// (!) This block is disabled in zlib defailts,\r\n// don't enable it for binary compatibility\r\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\r\n//                if (len <= op - whave) {\r\n//                  do {\r\n//                    output[_out++] = 0;\r\n//                  } while (--len);\r\n//                  continue top;\r\n//                }\r\n//                len -= op - whave;\r\n//                do {\r\n//                  output[_out++] = 0;\r\n//                } while (--op > whave);\r\n//                if (op === 0) {\r\n//                  from = _out - dist;\r\n//                  do {\r\n//                    output[_out++] = output[from++];\r\n//                  } while (--len);\r\n//                  continue top;\r\n//                }\r\n//#endif\r\n              }\r\n              from = 0; // window index\r\n              from_source = s_window;\r\n              if (wnext === 0) {           /* very common case */\r\n                from += wsize - op;\r\n                if (op < len) {         /* some from window */\r\n                  len -= op;\r\n                  do {\r\n                    output[_out++] = s_window[from++];\r\n                  } while (--op);\r\n                  from = _out - dist;  /* rest from output */\r\n                  from_source = output;\r\n                }\r\n              }\r\n              else if (wnext < op) {      /* wrap around window */\r\n                from += wsize + wnext - op;\r\n                op -= wnext;\r\n                if (op < len) {         /* some from end of window */\r\n                  len -= op;\r\n                  do {\r\n                    output[_out++] = s_window[from++];\r\n                  } while (--op);\r\n                  from = 0;\r\n                  if (wnext < len) {  /* some from start of window */\r\n                    op = wnext;\r\n                    len -= op;\r\n                    do {\r\n                      output[_out++] = s_window[from++];\r\n                    } while (--op);\r\n                    from = _out - dist;      /* rest from output */\r\n                    from_source = output;\r\n                  }\r\n                }\r\n              }\r\n              else {                      /* contiguous in window */\r\n                from += wnext - op;\r\n                if (op < len) {         /* some from window */\r\n                  len -= op;\r\n                  do {\r\n                    output[_out++] = s_window[from++];\r\n                  } while (--op);\r\n                  from = _out - dist;  /* rest from output */\r\n                  from_source = output;\r\n                }\r\n              }\r\n              while (len > 2) {\r\n                output[_out++] = from_source[from++];\r\n                output[_out++] = from_source[from++];\r\n                output[_out++] = from_source[from++];\r\n                len -= 3;\r\n              }\r\n              if (len) {\r\n                output[_out++] = from_source[from++];\r\n                if (len > 1) {\r\n                  output[_out++] = from_source[from++];\r\n                }\r\n              }\r\n            }\r\n            else {\r\n              from = _out - dist;          /* copy direct from output */\r\n              do {                        /* minimum length is three */\r\n                output[_out++] = output[from++];\r\n                output[_out++] = output[from++];\r\n                output[_out++] = output[from++];\r\n                len -= 3;\r\n              } while (len > 2);\r\n              if (len) {\r\n                output[_out++] = output[from++];\r\n                if (len > 1) {\r\n                  output[_out++] = output[from++];\r\n                }\r\n              }\r\n            }\r\n          }\r\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\r\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\r\n            continue dodist;\r\n          }\r\n          else {\r\n            strm.msg = 'invalid distance code';\r\n            state.mode = BAD$1;\r\n            break top;\r\n          }\r\n\r\n          break; // need to emulate goto via \"continue\"\r\n        }\r\n      }\r\n      else if ((op & 64) === 0) {              /* 2nd level length code */\r\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\r\n        continue dolen;\r\n      }\r\n      else if (op & 32) {                     /* end-of-block */\r\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\r\n        state.mode = TYPE$1;\r\n        break top;\r\n      }\r\n      else {\r\n        strm.msg = 'invalid literal/length code';\r\n        state.mode = BAD$1;\r\n        break top;\r\n      }\r\n\r\n      break; // need to emulate goto via \"continue\"\r\n    }\r\n  } while (_in < last && _out < end);\r\n\r\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\r\n  len = bits >> 3;\r\n  _in -= len;\r\n  bits -= len << 3;\r\n  hold &= (1 << bits) - 1;\r\n\r\n  /* update state and return */\r\n  strm.next_in = _in;\r\n  strm.next_out = _out;\r\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\r\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\r\n  state.hold = hold;\r\n  state.bits = bits;\r\n  return;\r\n};\r\n\r\n// 'use strict';\r\n\r\n\r\n// var utils = require('../utils/common');\r\n\r\nvar MAXBITS = 15;\r\nvar ENOUGH_LENS$1 = 852;\r\nvar ENOUGH_DISTS$1 = 592;\r\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\r\n\r\nvar CODES$1 = 0;\r\nvar LENS$1 = 1;\r\nvar DISTS$1 = 2;\r\n\r\nvar lbase = [ /* Length codes 257..285 base */\r\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\r\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\r\n];\r\n\r\nvar lext = [ /* Length codes 257..285 extra */\r\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\r\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\r\n];\r\n\r\nvar dbase = [ /* Distance codes 0..29 base */\r\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\r\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\r\n  8193, 12289, 16385, 24577, 0, 0\r\n];\r\n\r\nvar dext = [ /* Distance codes 0..29 extra */\r\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\r\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\r\n  28, 28, 29, 29, 64, 64\r\n];\r\n\r\n// module.exports =\r\nfunction inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\r\n{\r\n  var bits = opts.bits;\r\n      //here = opts.here; /* table entry for duplication */\r\n\r\n  var len = 0;               /* a code's length in bits */\r\n  var sym = 0;               /* index of code symbols */\r\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\r\n  var root = 0;              /* number of index bits for root table */\r\n  var curr = 0;              /* number of index bits for current table */\r\n  var drop = 0;              /* code bits to drop for sub-table */\r\n  var left = 0;                   /* number of prefix codes available */\r\n  var used = 0;              /* code entries in table used */\r\n  var huff = 0;              /* Huffman code */\r\n  var incr;              /* for incrementing code, index */\r\n  var fill;              /* index for replicating entries */\r\n  var low;               /* low bits for current root entry */\r\n  var mask;              /* mask for low root bits */\r\n  var next;             /* next available space in table */\r\n  var base = null;     /* base value table to use */\r\n  var base_index = 0;\r\n//  var shoextra;    /* extra bits table to use */\r\n  var end;                    /* use base and extra for symbol > end */\r\n  var count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\r\n  var offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\r\n  var extra = null;\r\n  var extra_index = 0;\r\n\r\n  var here_bits, here_op, here_val;\r\n\r\n  /*\r\n   Process a set of code lengths to create a canonical Huffman code.  The\r\n   code lengths are lens[0..codes-1].  Each length corresponds to the\r\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\r\n   symbols by length from short to long, and retaining the symbol order\r\n   for codes with equal lengths.  Then the code starts with all zero bits\r\n   for the first code of the shortest length, and the codes are integer\r\n   increments for the same length, and zeros are appended as the length\r\n   increases.  For the deflate format, these bits are stored backwards\r\n   from their more natural integer increment ordering, and so when the\r\n   decoding tables are built in the large loop below, the integer codes\r\n   are incremented backwards.\r\n\r\n   This routine assumes, but does not check, that all of the entries in\r\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\r\n   1..MAXBITS is interpreted as that code length.  zero means that that\r\n   symbol does not occur in this code.\r\n\r\n   The codes are sorted by computing a count of codes for each length,\r\n   creating from that a table of starting indices for each length in the\r\n   sorted table, and then entering the symbols in order in the sorted\r\n   table.  The sorted table is work[], with that space being provided by\r\n   the caller.\r\n\r\n   The length counts are used for other purposes as well, i.e. finding\r\n   the minimum and maximum length codes, determining if there are any\r\n   codes at all, checking for a valid set of lengths, and looking ahead\r\n   at length counts to determine sub-table sizes when building the\r\n   decoding tables.\r\n   */\r\n\r\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\r\n  for (len = 0; len <= MAXBITS; len++) {\r\n    count[len] = 0;\r\n  }\r\n  for (sym = 0; sym < codes; sym++) {\r\n    count[lens[lens_index + sym]]++;\r\n  }\r\n\r\n  /* bound code lengths, force root to be within code lengths */\r\n  root = bits;\r\n  for (max = MAXBITS; max >= 1; max--) {\r\n    if (count[max] !== 0) { break; }\r\n  }\r\n  if (root > max) {\r\n    root = max;\r\n  }\r\n  if (max === 0) {                     /* no symbols to code at all */\r\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\r\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\r\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\r\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\r\n\r\n\r\n    //table.op[opts.table_index] = 64;\r\n    //table.bits[opts.table_index] = 1;\r\n    //table.val[opts.table_index++] = 0;\r\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\r\n\r\n    opts.bits = 1;\r\n    return 0;     /* no symbols, but wait for decoding to report error */\r\n  }\r\n  for (min = 1; min < max; min++) {\r\n    if (count[min] !== 0) { break; }\r\n  }\r\n  if (root < min) {\r\n    root = min;\r\n  }\r\n\r\n  /* check for an over-subscribed or incomplete set of lengths */\r\n  left = 1;\r\n  for (len = 1; len <= MAXBITS; len++) {\r\n    left <<= 1;\r\n    left -= count[len];\r\n    if (left < 0) {\r\n      return -1;\r\n    }        /* over-subscribed */\r\n  }\r\n  if (left > 0 && (type === CODES$1 || max !== 1)) {\r\n    return -1;                      /* incomplete set */\r\n  }\r\n\r\n  /* generate offsets into symbol table for each length for sorting */\r\n  offs[1] = 0;\r\n  for (len = 1; len < MAXBITS; len++) {\r\n    offs[len + 1] = offs[len] + count[len];\r\n  }\r\n\r\n  /* sort symbols by length, by symbol order within each length */\r\n  for (sym = 0; sym < codes; sym++) {\r\n    if (lens[lens_index + sym] !== 0) {\r\n      work[offs[lens[lens_index + sym]]++] = sym;\r\n    }\r\n  }\r\n\r\n  /*\r\n   Create and fill in decoding tables.  In this loop, the table being\r\n   filled is at next and has curr index bits.  The code being used is huff\r\n   with length len.  That code is converted to an index by dropping drop\r\n   bits off of the bottom.  For codes where len is less than drop + curr,\r\n   those top drop + curr - len bits are incremented through all values to\r\n   fill the table with replicated entries.\r\n\r\n   root is the number of index bits for the root table.  When len exceeds\r\n   root, sub-tables are created pointed to by the root entry with an index\r\n   of the low root bits of huff.  This is saved in low to check for when a\r\n   new sub-table should be started.  drop is zero when the root table is\r\n   being filled, and drop is root when sub-tables are being filled.\r\n\r\n   When a new sub-table is needed, it is necessary to look ahead in the\r\n   code lengths to determine what size sub-table is needed.  The length\r\n   counts are used for this, and so count[] is decremented as codes are\r\n   entered in the tables.\r\n\r\n   used keeps track of how many table entries have been allocated from the\r\n   provided *table space.  It is checked for LENS and DIST tables against\r\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\r\n   the initial root table size constants.  See the comments in inftrees.h\r\n   for more information.\r\n\r\n   sym increments through all symbols, and the loop terminates when\r\n   all codes of length max, i.e. all codes, have been processed.  This\r\n   routine permits incomplete codes, so another loop after this one fills\r\n   in the rest of the decoding tables with invalid code markers.\r\n   */\r\n\r\n  /* set up for code type */\r\n  // poor man optimization - use if-else instead of switch,\r\n  // to avoid deopts in old v8\r\n  if (type === CODES$1) {\r\n    base = extra = work;    /* dummy value--not used */\r\n    end = 19;\r\n\r\n  } else if (type === LENS$1) {\r\n    base = lbase;\r\n    base_index -= 257;\r\n    extra = lext;\r\n    extra_index -= 257;\r\n    end = 256;\r\n\r\n  } else {                    /* DISTS */\r\n    base = dbase;\r\n    extra = dext;\r\n    end = -1;\r\n  }\r\n\r\n  /* initialize opts for loop */\r\n  huff = 0;                   /* starting code */\r\n  sym = 0;                    /* starting code symbol */\r\n  len = min;                  /* starting code length */\r\n  next = table_index;              /* current table to fill in */\r\n  curr = root;                /* current table index bits */\r\n  drop = 0;                   /* current bits to drop from code for index */\r\n  low = -1;                   /* trigger new sub-table when len > root */\r\n  used = 1 << root;          /* use root table entries */\r\n  mask = used - 1;            /* mask for comparing low */\r\n\r\n  /* check available table space */\r\n  if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\r\n    (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\r\n    return 1;\r\n  }\r\n\r\n  var i = 0;\r\n  /* process all codes and make table entries */\r\n  for (;;) {\r\n    i++;\r\n    /* create table entry */\r\n    here_bits = len - drop;\r\n    if (work[sym] < end) {\r\n      here_op = 0;\r\n      here_val = work[sym];\r\n    }\r\n    else if (work[sym] > end) {\r\n      here_op = extra[extra_index + work[sym]];\r\n      here_val = base[base_index + work[sym]];\r\n    }\r\n    else {\r\n      here_op = 32 + 64;         /* end of block */\r\n      here_val = 0;\r\n    }\r\n\r\n    /* replicate for those indices with low len bits equal to huff */\r\n    incr = 1 << (len - drop);\r\n    fill = 1 << curr;\r\n    min = fill;                 /* save offset to next table */\r\n    do {\r\n      fill -= incr;\r\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\r\n    } while (fill !== 0);\r\n\r\n    /* backwards increment the len-bit code huff */\r\n    incr = 1 << (len - 1);\r\n    while (huff & incr) {\r\n      incr >>= 1;\r\n    }\r\n    if (incr !== 0) {\r\n      huff &= incr - 1;\r\n      huff += incr;\r\n    } else {\r\n      huff = 0;\r\n    }\r\n\r\n    /* go to next symbol, update count, len */\r\n    sym++;\r\n    if (--count[len] === 0) {\r\n      if (len === max) { break; }\r\n      len = lens[lens_index + work[sym]];\r\n    }\r\n\r\n    /* create new sub-table if needed */\r\n    if (len > root && (huff & mask) !== low) {\r\n      /* if first time, transition to sub-tables */\r\n      if (drop === 0) {\r\n        drop = root;\r\n      }\r\n\r\n      /* increment past last table */\r\n      next += min;            /* here min is 1 << curr */\r\n\r\n      /* determine length of next table */\r\n      curr = len - drop;\r\n      left = 1 << curr;\r\n      while (curr + drop < max) {\r\n        left -= count[curr + drop];\r\n        if (left <= 0) { break; }\r\n        curr++;\r\n        left <<= 1;\r\n      }\r\n\r\n      /* check for enough space */\r\n      used += 1 << curr;\r\n      if ((type === LENS$1 && used > ENOUGH_LENS$1) ||\r\n        (type === DISTS$1 && used > ENOUGH_DISTS$1)) {\r\n        return 1;\r\n      }\r\n\r\n      /* point entry in root table to sub-table */\r\n      low = huff & mask;\r\n      /*table.op[low] = curr;\r\n      table.bits[low] = root;\r\n      table.val[low] = next - opts.table_index;*/\r\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\r\n    }\r\n  }\r\n\r\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\r\n   at most one remaining entry, since if the code is incomplete, the\r\n   maximum code length that was allowed to get this far is one bit) */\r\n  if (huff !== 0) {\r\n    //table.op[next + huff] = 64;            /* invalid code marker */\r\n    //table.bits[next + huff] = len - drop;\r\n    //table.val[next + huff] = 0;\r\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\r\n  }\r\n\r\n  /* set return parameters */\r\n  //opts.table_index += used;\r\n  opts.bits = root;\r\n  return 0;\r\n};\r\n\r\n// 'use strict';\r\n\r\n\r\n// var utils         = require('../utils/common');\r\n// var adler32       = require('./adler32');\r\n// var crc32         = require('./crc32');\r\n// var inflate_fast  = require('./inffast');\r\n// var inflate_table = require('./inftrees');\r\n\r\nvar CODES = 0;\r\nvar LENS = 1;\r\nvar DISTS = 2;\r\n\r\n/* Public constants ==========================================================*/\r\n/* ===========================================================================*/\r\n\r\n\r\n/* Allowed flush values; see deflate() and inflate() below for details */\r\n//var Z_NO_FLUSH      = 0;\r\n//var Z_PARTIAL_FLUSH = 1;\r\n//var Z_SYNC_FLUSH    = 2;\r\n//var Z_FULL_FLUSH    = 3;\r\nvar Z_FINISH        = 4;\r\nvar Z_BLOCK         = 5;\r\nvar Z_TREES         = 6;\r\n\r\n\r\n/* Return codes for the compression/decompression functions. Negative values\r\n * are errors, positive values are used for special but normal events.\r\n */\r\nvar Z_OK            = 0;\r\nvar Z_STREAM_END    = 1;\r\nvar Z_NEED_DICT     = 2;\r\n//var Z_ERRNO         = -1;\r\nvar Z_STREAM_ERROR  = -2;\r\nvar Z_DATA_ERROR    = -3;\r\nvar Z_MEM_ERROR     = -4;\r\nvar Z_BUF_ERROR     = -5;\r\n//var Z_VERSION_ERROR = -6;\r\n\r\n/* The deflate compression method */\r\nvar Z_DEFLATED  = 8;\r\n\r\n\r\n/* STATES ====================================================================*/\r\n/* ===========================================================================*/\r\n\r\n\r\nvar    HEAD = 1;       /* i: waiting for magic header */\r\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\r\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\r\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\r\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\r\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\r\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\r\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\r\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\r\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\r\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\r\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\r\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\r\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\r\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\r\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\r\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\r\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\r\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\r\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\r\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\r\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\r\nvar            DIST = 23;      /* i: waiting for distance code */\r\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\r\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\r\nvar            LIT = 26;       /* o: waiting for output space to write literal */\r\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\r\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\r\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\r\nvar    BAD = 30;       /* got a data error -- remain here until reset */\r\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\r\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\r\n\r\n/* ===========================================================================*/\r\n\r\n\r\n\r\nvar ENOUGH_LENS = 852;\r\nvar ENOUGH_DISTS = 592;\r\nfunction zswap32(q) {\r\n  return  (((q >>> 24) & 0xff) +\r\n          ((q >>> 8) & 0xff00) +\r\n          ((q & 0xff00) << 8) +\r\n          ((q & 0xff) << 24));\r\n}\r\n\r\n\r\nfunction InflateState() {\r\n  this.mode = 0;             /* current inflate mode */\r\n  this.last = false;          /* true if processing last block */\r\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\r\n  this.havedict = false;      /* true if dictionary provided */\r\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\r\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\r\n  this.check = 0;             /* protected copy of check value */\r\n  this.total = 0;             /* protected copy of output count */\r\n  // TODO: may be {}\r\n  this.head = null;           /* where to save gzip header information */\r\n\r\n  /* sliding window */\r\n  this.wbits = 0;             /* log base 2 of requested window size */\r\n  this.wsize = 0;             /* window size or zero if not using window */\r\n  this.whave = 0;             /* valid bytes in the window */\r\n  this.wnext = 0;             /* window write index */\r\n  this.window = null;         /* allocated sliding window, if needed */\r\n\r\n  /* bit accumulator */\r\n  this.hold = 0;              /* input bit accumulator */\r\n  this.bits = 0;              /* number of bits in \"in\" */\r\n\r\n  /* for string and stored block copying */\r\n  this.length = 0;            /* literal or length of data to copy */\r\n  this.offset = 0;            /* distance back to copy string from */\r\n\r\n  /* for table and code decoding */\r\n  this.extra = 0;             /* extra bits needed */\r\n\r\n  /* fixed and dynamic code tables */\r\n  this.lencode = null;          /* starting table for length/literal codes */\r\n  this.distcode = null;         /* starting table for distance codes */\r\n  this.lenbits = 0;           /* index bits for lencode */\r\n  this.distbits = 0;          /* index bits for distcode */\r\n\r\n  /* dynamic table building */\r\n  this.ncode = 0;             /* number of code length code lengths */\r\n  this.nlen = 0;              /* number of length code lengths */\r\n  this.ndist = 0;             /* number of distance code lengths */\r\n  this.have = 0;              /* number of code lengths in lens[] */\r\n  this.next = null;              /* next available space in codes[] */\r\n\r\n  this.lens = new Uint16Array(320); /* temporary storage for code lengths */\r\n  this.work = new Uint16Array(288); /* work area for code table building */\r\n\r\n  /*\r\n   because we don't have pointers in js, we use lencode and distcode directly\r\n   as buffers so we don't need codes\r\n  */\r\n  //this.codes = new Buf32(ENOUGH);       /* space for code tables */\r\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\r\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\r\n  this.sane = 0;                   /* if false, allow invalid distance too far */\r\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\r\n  this.was = 0;                    /* initial length of match */\r\n}\r\n\r\nfunction inflateResetKeep(strm) {\r\n  var state;\r\n\r\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\r\n  state = strm.state;\r\n  strm.total_in = strm.total_out = state.total = 0;\r\n  strm.msg = ''; /*Z_NULL*/\r\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\r\n    strm.adler = state.wrap & 1;\r\n  }\r\n  state.mode = HEAD;\r\n  state.last = 0;\r\n  state.havedict = 0;\r\n  state.dmax = 32768;\r\n  state.head = null/*Z_NULL*/;\r\n  state.hold = 0;\r\n  state.bits = 0;\r\n  //state.lencode = state.distcode = state.next = state.codes;\r\n  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);\r\n  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);\r\n\r\n  state.sane = 1;\r\n  state.back = -1;\r\n  //Tracev((stderr, \"inflate: reset\\n\"));\r\n  return Z_OK;\r\n}\r\n\r\nfunction inflateReset(strm) {\r\n  var state;\r\n\r\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\r\n  state = strm.state;\r\n  state.wsize = 0;\r\n  state.whave = 0;\r\n  state.wnext = 0;\r\n  return inflateResetKeep(strm);\r\n\r\n}\r\n\r\nfunction inflateReset2(strm, windowBits) {\r\n  var wrap;\r\n  var state;\r\n\r\n  /* get the state */\r\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\r\n  state = strm.state;\r\n\r\n  /* extract wrap request from windowBits parameter */\r\n  if (windowBits < 0) {\r\n    wrap = 0;\r\n    windowBits = -windowBits;\r\n  }\r\n  else {\r\n    wrap = (windowBits >> 4) + 1;\r\n    if (windowBits < 48) {\r\n      windowBits &= 15;\r\n    }\r\n  }\r\n\r\n  /* set number of window bits, free window if different */\r\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\r\n    return Z_STREAM_ERROR;\r\n  }\r\n  if (state.window !== null && state.wbits !== windowBits) {\r\n    state.window = null;\r\n  }\r\n\r\n  /* update state and reset the rest of it */\r\n  state.wrap = wrap;\r\n  state.wbits = windowBits;\r\n  return inflateReset(strm);\r\n}\r\n\r\nfunction inflateInit2(strm, windowBits) {\r\n  var ret;\r\n  var state;\r\n\r\n  if (!strm) { return Z_STREAM_ERROR; }\r\n  //strm.msg = Z_NULL;                 /* in case we return an error */\r\n\r\n  state = new InflateState();\r\n\r\n  //if (state === Z_NULL) return Z_MEM_ERROR;\r\n  //Tracev((stderr, \"inflate: allocated\\n\"));\r\n  strm.state = state;\r\n  state.window = null/*Z_NULL*/;\r\n  ret = inflateReset2(strm, windowBits);\r\n  if (ret !== Z_OK) {\r\n    strm.state = null/*Z_NULL*/;\r\n  }\r\n  return ret;\r\n}\r\n\r\n/*\r\n Return state with length and distance decoding tables and index sizes set to\r\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\r\n If BUILDFIXED is defined, then instead this routine builds the tables the\r\n first time it's called, and returns those tables the first time and\r\n thereafter.  This reduces the size of the code by about 2K bytes, in\r\n exchange for a little execution time.  However, BUILDFIXED should not be\r\n used for threaded applications, since the rewriting of the tables and virgin\r\n may not be thread-safe.\r\n */\r\nvar virgin = true;\r\n\r\nvar lenfix;\r\nvar distfix;\r\n// We have no pointers in JS, so keep tables separate\r\n\r\nfunction fixedtables(state) {\r\n  /* build fixed huffman tables if first call (may not be thread safe) */\r\n  if (virgin) {\r\n    var sym;\r\n\r\n    lenfix = new Int32Array(512);\r\n    distfix = new Int32Array(32);\r\n\r\n    /* literal/length table */\r\n    sym = 0;\r\n    while (sym < 144) { state.lens[sym++] = 8; }\r\n    while (sym < 256) { state.lens[sym++] = 9; }\r\n    while (sym < 280) { state.lens[sym++] = 7; }\r\n    while (sym < 288) { state.lens[sym++] = 8; }\r\n\r\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\r\n\r\n    /* distance table */\r\n    sym = 0;\r\n    while (sym < 32) { state.lens[sym++] = 5; }\r\n\r\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\r\n\r\n    /* do this just once */\r\n    virgin = false;\r\n  }\r\n\r\n  state.lencode = lenfix;\r\n  state.lenbits = 9;\r\n  state.distcode = distfix;\r\n  state.distbits = 5;\r\n}\r\n\r\n\r\n/*\r\n Update the window with the last wsize (normally 32K) bytes written before\r\n returning.  If window does not exist yet, create it.  This is only called\r\n when a window is already in use, or when output has been written during this\r\n inflate call, but the end of the deflate stream has not been reached yet.\r\n It is also called to create a window for dictionary data when a dictionary\r\n is loaded.\r\n\r\n Providing output buffers larger than 32K to inflate() should provide a speed\r\n advantage, since only the last 32K of output is copied to the sliding window\r\n upon return from inflate(), and since all distances after the first 32K of\r\n output will fall in the output data, making match copies simpler and faster.\r\n The advantage may be dependent on the size of the processor's data caches.\r\n */\r\nfunction updatewindow(strm, src, end, copy) {\r\n  var dist;\r\n  var state = strm.state;\r\n\r\n  /* if it hasn't been done already, allocate space for the window */\r\n  if (state.window === null) {\r\n    state.wsize = 1 << state.wbits;\r\n    state.wnext = 0;\r\n    state.whave = 0;\r\n\r\n    state.window = new Uint8Array(state.wsize);\r\n  }\r\n\r\n  /* copy state->wsize or less output bytes into the circular window */\r\n  if (copy >= state.wsize) {\r\n    arraySet(state.window, src, end - state.wsize, state.wsize, 0);\r\n    state.wnext = 0;\r\n    state.whave = state.wsize;\r\n  }\r\n  else {\r\n    dist = state.wsize - state.wnext;\r\n    if (dist > copy) {\r\n      dist = copy;\r\n    }\r\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\r\n    arraySet(state.window, src, end - copy, dist, state.wnext);\r\n    copy -= dist;\r\n    if (copy) {\r\n      //zmemcpy(state->window, end - copy, copy);\r\n      arraySet(state.window, src, end - copy, copy, 0);\r\n      state.wnext = copy;\r\n      state.whave = state.wsize;\r\n    }\r\n    else {\r\n      state.wnext += dist;\r\n      if (state.wnext === state.wsize) { state.wnext = 0; }\r\n      if (state.whave < state.wsize) { state.whave += dist; }\r\n    }\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction inflate(strm, flush) {\r\n  var state;\r\n  var input, output;          // input/output buffers\r\n  var next;                   /* next input INDEX */\r\n  var put;                    /* next output INDEX */\r\n  var have, left;             /* available input and output */\r\n  var hold;                   /* bit buffer */\r\n  var bits;                   /* bits in bit buffer */\r\n  var _in, _out;              /* save starting available input and output */\r\n  var copy;                   /* number of stored or match bytes to copy */\r\n  var from;                   /* where to copy match bytes from */\r\n  var from_source;\r\n  var here = 0;               /* current decoding table entry */\r\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\r\n  //var last;                   /* parent table entry */\r\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\r\n  var len;                    /* length to copy for repeats, bits to drop */\r\n  var ret;                    /* return code */\r\n  var hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */\r\n  var opts;\r\n\r\n  var n; // temporary var for NEED_BITS\r\n\r\n  var order = /* permutation of code lengths */\r\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\r\n\r\n\r\n  if (!strm || !strm.state || !strm.output ||\r\n      (!strm.input && strm.avail_in !== 0)) {\r\n    return Z_STREAM_ERROR;\r\n  }\r\n\r\n  state = strm.state;\r\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\r\n\r\n\r\n  //--- LOAD() ---\r\n  put = strm.next_out;\r\n  output = strm.output;\r\n  left = strm.avail_out;\r\n  next = strm.next_in;\r\n  input = strm.input;\r\n  have = strm.avail_in;\r\n  hold = state.hold;\r\n  bits = state.bits;\r\n  //---\r\n\r\n  _in = have;\r\n  _out = left;\r\n  ret = Z_OK;\r\n\r\n  inf_leave: // goto emulation\r\n  for (;;) {\r\n    switch (state.mode) {\r\n    case HEAD:\r\n      if (state.wrap === 0) {\r\n        state.mode = TYPEDO;\r\n        break;\r\n      }\r\n      //=== NEEDBITS(16);\r\n      while (bits < 16) {\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n      }\r\n      //===//\r\n      if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\r\n        state.check = 0/*crc32(0L, Z_NULL, 0)*/;\r\n        //=== CRC2(state.check, hold);\r\n        hbuf[0] = hold & 0xff;\r\n        hbuf[1] = (hold >>> 8) & 0xff;\r\n        state.check = crc32(state.check, hbuf, 2, 0);\r\n        //===//\r\n\r\n        //=== INITBITS();\r\n        hold = 0;\r\n        bits = 0;\r\n        //===//\r\n        state.mode = FLAGS;\r\n        break;\r\n      }\r\n      state.flags = 0;           /* expect zlib header */\r\n      if (state.head) {\r\n        state.head.done = false;\r\n      }\r\n      if (!(state.wrap & 1) ||   /* check if zlib header allowed */\r\n        (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\r\n        strm.msg = 'incorrect header check';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\r\n        strm.msg = 'unknown compression method';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      //--- DROPBITS(4) ---//\r\n      hold >>>= 4;\r\n      bits -= 4;\r\n      //---//\r\n      len = (hold & 0x0f)/*BITS(4)*/ + 8;\r\n      if (state.wbits === 0) {\r\n        state.wbits = len;\r\n      }\r\n      else if (len > state.wbits) {\r\n        strm.msg = 'invalid window size';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      state.dmax = 1 << len;\r\n      //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\r\n      strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\r\n      state.mode = hold & 0x200 ? DICTID : TYPE;\r\n      //=== INITBITS();\r\n      hold = 0;\r\n      bits = 0;\r\n      //===//\r\n      break;\r\n    case FLAGS:\r\n      //=== NEEDBITS(16); */\r\n      while (bits < 16) {\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n      }\r\n      //===//\r\n      state.flags = hold;\r\n      if ((state.flags & 0xff) !== Z_DEFLATED) {\r\n        strm.msg = 'unknown compression method';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      if (state.flags & 0xe000) {\r\n        strm.msg = 'unknown header flags set';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      if (state.head) {\r\n        state.head.text = ((hold >> 8) & 1);\r\n      }\r\n      if (state.flags & 0x0200) {\r\n        //=== CRC2(state.check, hold);\r\n        hbuf[0] = hold & 0xff;\r\n        hbuf[1] = (hold >>> 8) & 0xff;\r\n        state.check = crc32(state.check, hbuf, 2, 0);\r\n        //===//\r\n      }\r\n      //=== INITBITS();\r\n      hold = 0;\r\n      bits = 0;\r\n      //===//\r\n      state.mode = TIME;\r\n      /* falls through */\r\n    case TIME:\r\n      //=== NEEDBITS(32); */\r\n      while (bits < 32) {\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n      }\r\n      //===//\r\n      if (state.head) {\r\n        state.head.time = hold;\r\n      }\r\n      if (state.flags & 0x0200) {\r\n        //=== CRC4(state.check, hold)\r\n        hbuf[0] = hold & 0xff;\r\n        hbuf[1] = (hold >>> 8) & 0xff;\r\n        hbuf[2] = (hold >>> 16) & 0xff;\r\n        hbuf[3] = (hold >>> 24) & 0xff;\r\n        state.check = crc32(state.check, hbuf, 4, 0);\r\n        //===\r\n      }\r\n      //=== INITBITS();\r\n      hold = 0;\r\n      bits = 0;\r\n      //===//\r\n      state.mode = OS;\r\n      /* falls through */\r\n    case OS:\r\n      //=== NEEDBITS(16); */\r\n      while (bits < 16) {\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n      }\r\n      //===//\r\n      if (state.head) {\r\n        state.head.xflags = (hold & 0xff);\r\n        state.head.os = (hold >> 8);\r\n      }\r\n      if (state.flags & 0x0200) {\r\n        //=== CRC2(state.check, hold);\r\n        hbuf[0] = hold & 0xff;\r\n        hbuf[1] = (hold >>> 8) & 0xff;\r\n        state.check = crc32(state.check, hbuf, 2, 0);\r\n        //===//\r\n      }\r\n      //=== INITBITS();\r\n      hold = 0;\r\n      bits = 0;\r\n      //===//\r\n      state.mode = EXLEN;\r\n      /* falls through */\r\n    case EXLEN:\r\n      if (state.flags & 0x0400) {\r\n        //=== NEEDBITS(16); */\r\n        while (bits < 16) {\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n        }\r\n        //===//\r\n        state.length = hold;\r\n        if (state.head) {\r\n          state.head.extra_len = hold;\r\n        }\r\n        if (state.flags & 0x0200) {\r\n          //=== CRC2(state.check, hold);\r\n          hbuf[0] = hold & 0xff;\r\n          hbuf[1] = (hold >>> 8) & 0xff;\r\n          state.check = crc32(state.check, hbuf, 2, 0);\r\n          //===//\r\n        }\r\n        //=== INITBITS();\r\n        hold = 0;\r\n        bits = 0;\r\n        //===//\r\n      }\r\n      else if (state.head) {\r\n        state.head.extra = null/*Z_NULL*/;\r\n      }\r\n      state.mode = EXTRA;\r\n      /* falls through */\r\n    case EXTRA:\r\n      if (state.flags & 0x0400) {\r\n        copy = state.length;\r\n        if (copy > have) { copy = have; }\r\n        if (copy) {\r\n          if (state.head) {\r\n            len = state.head.extra_len - state.length;\r\n            if (!state.head.extra) {\r\n              // Use untyped array for more conveniend processing later\r\n              state.head.extra = new Array(state.head.extra_len);\r\n            }\r\n            arraySet(\r\n              state.head.extra,\r\n              input,\r\n              next,\r\n              // extra field is limited to 65536 bytes\r\n              // - no need for additional size check\r\n              copy,\r\n              /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\r\n              len\r\n            );\r\n            //zmemcpy(state.head.extra + len, next,\r\n            //        len + copy > state.head.extra_max ?\r\n            //        state.head.extra_max - len : copy);\r\n          }\r\n          if (state.flags & 0x0200) {\r\n            state.check = crc32(state.check, input, copy, next);\r\n          }\r\n          have -= copy;\r\n          next += copy;\r\n          state.length -= copy;\r\n        }\r\n        if (state.length) { break inf_leave; }\r\n      }\r\n      state.length = 0;\r\n      state.mode = NAME;\r\n      /* falls through */\r\n    case NAME:\r\n      if (state.flags & 0x0800) {\r\n        if (have === 0) { break inf_leave; }\r\n        copy = 0;\r\n        do {\r\n          // TODO: 2 or 1 bytes?\r\n          len = input[next + copy++];\r\n          /* use constant limit because in js we should not preallocate memory */\r\n          if (state.head && len &&\r\n              (state.length < 65536 /*state.head.name_max*/)) {\r\n            state.head.name += String.fromCharCode(len);\r\n          }\r\n        } while (len && copy < have);\r\n\r\n        if (state.flags & 0x0200) {\r\n          state.check = crc32(state.check, input, copy, next);\r\n        }\r\n        have -= copy;\r\n        next += copy;\r\n        if (len) { break inf_leave; }\r\n      }\r\n      else if (state.head) {\r\n        state.head.name = null;\r\n      }\r\n      state.length = 0;\r\n      state.mode = COMMENT;\r\n      /* falls through */\r\n    case COMMENT:\r\n      if (state.flags & 0x1000) {\r\n        if (have === 0) { break inf_leave; }\r\n        copy = 0;\r\n        do {\r\n          len = input[next + copy++];\r\n          /* use constant limit because in js we should not preallocate memory */\r\n          if (state.head && len &&\r\n              (state.length < 65536 /*state.head.comm_max*/)) {\r\n            state.head.comment += String.fromCharCode(len);\r\n          }\r\n        } while (len && copy < have);\r\n        if (state.flags & 0x0200) {\r\n          state.check = crc32(state.check, input, copy, next);\r\n        }\r\n        have -= copy;\r\n        next += copy;\r\n        if (len) { break inf_leave; }\r\n      }\r\n      else if (state.head) {\r\n        state.head.comment = null;\r\n      }\r\n      state.mode = HCRC;\r\n      /* falls through */\r\n    case HCRC:\r\n      if (state.flags & 0x0200) {\r\n        //=== NEEDBITS(16); */\r\n        while (bits < 16) {\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n        }\r\n        //===//\r\n        if (hold !== (state.check & 0xffff)) {\r\n          strm.msg = 'header crc mismatch';\r\n          state.mode = BAD;\r\n          break;\r\n        }\r\n        //=== INITBITS();\r\n        hold = 0;\r\n        bits = 0;\r\n        //===//\r\n      }\r\n      if (state.head) {\r\n        state.head.hcrc = ((state.flags >> 9) & 1);\r\n        state.head.done = true;\r\n      }\r\n      strm.adler = state.check = 0;\r\n      state.mode = TYPE;\r\n      break;\r\n    case DICTID:\r\n      //=== NEEDBITS(32); */\r\n      while (bits < 32) {\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n      }\r\n      //===//\r\n      strm.adler = state.check = zswap32(hold);\r\n      //=== INITBITS();\r\n      hold = 0;\r\n      bits = 0;\r\n      //===//\r\n      state.mode = DICT;\r\n      /* falls through */\r\n    case DICT:\r\n      if (state.havedict === 0) {\r\n        //--- RESTORE() ---\r\n        strm.next_out = put;\r\n        strm.avail_out = left;\r\n        strm.next_in = next;\r\n        strm.avail_in = have;\r\n        state.hold = hold;\r\n        state.bits = bits;\r\n        //---\r\n        return Z_NEED_DICT;\r\n      }\r\n      strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\r\n      state.mode = TYPE;\r\n      /* falls through */\r\n    case TYPE:\r\n      if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\r\n      /* falls through */\r\n    case TYPEDO:\r\n      if (state.last) {\r\n        //--- BYTEBITS() ---//\r\n        hold >>>= bits & 7;\r\n        bits -= bits & 7;\r\n        //---//\r\n        state.mode = CHECK;\r\n        break;\r\n      }\r\n      //=== NEEDBITS(3); */\r\n      while (bits < 3) {\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n      }\r\n      //===//\r\n      state.last = (hold & 0x01)/*BITS(1)*/;\r\n      //--- DROPBITS(1) ---//\r\n      hold >>>= 1;\r\n      bits -= 1;\r\n      //---//\r\n\r\n      switch ((hold & 0x03)/*BITS(2)*/) {\r\n      case 0:                             /* stored block */\r\n        //Tracev((stderr, \"inflate:     stored block%s\\n\",\r\n        //        state.last ? \" (last)\" : \"\"));\r\n        state.mode = STORED;\r\n        break;\r\n      case 1:                             /* fixed block */\r\n        fixedtables(state);\r\n        //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\r\n        //        state.last ? \" (last)\" : \"\"));\r\n        state.mode = LEN_;             /* decode codes */\r\n        if (flush === Z_TREES) {\r\n          //--- DROPBITS(2) ---//\r\n          hold >>>= 2;\r\n          bits -= 2;\r\n          //---//\r\n          break inf_leave;\r\n        }\r\n        break;\r\n      case 2:                             /* dynamic block */\r\n        //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\r\n        //        state.last ? \" (last)\" : \"\"));\r\n        state.mode = TABLE;\r\n        break;\r\n      case 3:\r\n        strm.msg = 'invalid block type';\r\n        state.mode = BAD;\r\n      }\r\n      //--- DROPBITS(2) ---//\r\n      hold >>>= 2;\r\n      bits -= 2;\r\n      //---//\r\n      break;\r\n    case STORED:\r\n      //--- BYTEBITS() ---// /* go to byte boundary */\r\n      hold >>>= bits & 7;\r\n      bits -= bits & 7;\r\n      //---//\r\n      //=== NEEDBITS(32); */\r\n      while (bits < 32) {\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n      }\r\n      //===//\r\n      if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\r\n        strm.msg = 'invalid stored block lengths';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      state.length = hold & 0xffff;\r\n      //Tracev((stderr, \"inflate:       stored length %u\\n\",\r\n      //        state.length));\r\n      //=== INITBITS();\r\n      hold = 0;\r\n      bits = 0;\r\n      //===//\r\n      state.mode = COPY_;\r\n      if (flush === Z_TREES) { break inf_leave; }\r\n      /* falls through */\r\n    case COPY_:\r\n      state.mode = COPY;\r\n      /* falls through */\r\n    case COPY:\r\n      copy = state.length;\r\n      if (copy) {\r\n        if (copy > have) { copy = have; }\r\n        if (copy > left) { copy = left; }\r\n        if (copy === 0) { break inf_leave; }\r\n        //--- zmemcpy(put, next, copy); ---\r\n        arraySet(output, input, next, copy, put);\r\n        //---//\r\n        have -= copy;\r\n        next += copy;\r\n        left -= copy;\r\n        put += copy;\r\n        state.length -= copy;\r\n        break;\r\n      }\r\n      //Tracev((stderr, \"inflate:       stored end\\n\"));\r\n      state.mode = TYPE;\r\n      break;\r\n    case TABLE:\r\n      //=== NEEDBITS(14); */\r\n      while (bits < 14) {\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n      }\r\n      //===//\r\n      state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\r\n      //--- DROPBITS(5) ---//\r\n      hold >>>= 5;\r\n      bits -= 5;\r\n      //---//\r\n      state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\r\n      //--- DROPBITS(5) ---//\r\n      hold >>>= 5;\r\n      bits -= 5;\r\n      //---//\r\n      state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\r\n      //--- DROPBITS(4) ---//\r\n      hold >>>= 4;\r\n      bits -= 4;\r\n      //---//\r\n//#ifndef PKZIP_BUG_WORKAROUND\r\n      if (state.nlen > 286 || state.ndist > 30) {\r\n        strm.msg = 'too many length or distance symbols';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n//#endif\r\n      //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\r\n      state.have = 0;\r\n      state.mode = LENLENS;\r\n      /* falls through */\r\n    case LENLENS:\r\n      while (state.have < state.ncode) {\r\n        //=== NEEDBITS(3);\r\n        while (bits < 3) {\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n        }\r\n        //===//\r\n        state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\r\n        //--- DROPBITS(3) ---//\r\n        hold >>>= 3;\r\n        bits -= 3;\r\n        //---//\r\n      }\r\n      while (state.have < 19) {\r\n        state.lens[order[state.have++]] = 0;\r\n      }\r\n      // We have separate tables & no pointers. 2 commented lines below not needed.\r\n      //state.next = state.codes;\r\n      //state.lencode = state.next;\r\n      // Switch to use dynamic table\r\n      state.lencode = state.lendyn;\r\n      state.lenbits = 7;\r\n\r\n      opts = { bits: state.lenbits };\r\n      ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\r\n      state.lenbits = opts.bits;\r\n\r\n      if (ret) {\r\n        strm.msg = 'invalid code lengths set';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\r\n      state.have = 0;\r\n      state.mode = CODELENS;\r\n      /* falls through */\r\n    case CODELENS:\r\n      while (state.have < state.nlen + state.ndist) {\r\n        for (;;) {\r\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\r\n          here_bits = here >>> 24;\r\n          here_op = (here >>> 16) & 0xff;\r\n          here_val = here & 0xffff;\r\n\r\n          if ((here_bits) <= bits) { break; }\r\n          //--- PULLBYTE() ---//\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n          //---//\r\n        }\r\n        if (here_val < 16) {\r\n          //--- DROPBITS(here.bits) ---//\r\n          hold >>>= here_bits;\r\n          bits -= here_bits;\r\n          //---//\r\n          state.lens[state.have++] = here_val;\r\n        }\r\n        else {\r\n          if (here_val === 16) {\r\n            //=== NEEDBITS(here.bits + 2);\r\n            n = here_bits + 2;\r\n            while (bits < n) {\r\n              if (have === 0) { break inf_leave; }\r\n              have--;\r\n              hold += input[next++] << bits;\r\n              bits += 8;\r\n            }\r\n            //===//\r\n            //--- DROPBITS(here.bits) ---//\r\n            hold >>>= here_bits;\r\n            bits -= here_bits;\r\n            //---//\r\n            if (state.have === 0) {\r\n              strm.msg = 'invalid bit length repeat';\r\n              state.mode = BAD;\r\n              break;\r\n            }\r\n            len = state.lens[state.have - 1];\r\n            copy = 3 + (hold & 0x03);//BITS(2);\r\n            //--- DROPBITS(2) ---//\r\n            hold >>>= 2;\r\n            bits -= 2;\r\n            //---//\r\n          }\r\n          else if (here_val === 17) {\r\n            //=== NEEDBITS(here.bits + 3);\r\n            n = here_bits + 3;\r\n            while (bits < n) {\r\n              if (have === 0) { break inf_leave; }\r\n              have--;\r\n              hold += input[next++] << bits;\r\n              bits += 8;\r\n            }\r\n            //===//\r\n            //--- DROPBITS(here.bits) ---//\r\n            hold >>>= here_bits;\r\n            bits -= here_bits;\r\n            //---//\r\n            len = 0;\r\n            copy = 3 + (hold & 0x07);//BITS(3);\r\n            //--- DROPBITS(3) ---//\r\n            hold >>>= 3;\r\n            bits -= 3;\r\n            //---//\r\n          }\r\n          else {\r\n            //=== NEEDBITS(here.bits + 7);\r\n            n = here_bits + 7;\r\n            while (bits < n) {\r\n              if (have === 0) { break inf_leave; }\r\n              have--;\r\n              hold += input[next++] << bits;\r\n              bits += 8;\r\n            }\r\n            //===//\r\n            //--- DROPBITS(here.bits) ---//\r\n            hold >>>= here_bits;\r\n            bits -= here_bits;\r\n            //---//\r\n            len = 0;\r\n            copy = 11 + (hold & 0x7f);//BITS(7);\r\n            //--- DROPBITS(7) ---//\r\n            hold >>>= 7;\r\n            bits -= 7;\r\n            //---//\r\n          }\r\n          if (state.have + copy > state.nlen + state.ndist) {\r\n            strm.msg = 'invalid bit length repeat';\r\n            state.mode = BAD;\r\n            break;\r\n          }\r\n          while (copy--) {\r\n            state.lens[state.have++] = len;\r\n          }\r\n        }\r\n      }\r\n\r\n      /* handle error breaks in while */\r\n      if (state.mode === BAD) { break; }\r\n\r\n      /* check for end-of-block code (better have one) */\r\n      if (state.lens[256] === 0) {\r\n        strm.msg = 'invalid code -- missing end-of-block';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n\r\n      /* build code tables -- note: do not change the lenbits or distbits\r\n         values here (9 and 6) without reading the comments in inftrees.h\r\n         concerning the ENOUGH constants, which depend on those values */\r\n      state.lenbits = 9;\r\n\r\n      opts = { bits: state.lenbits };\r\n      ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\r\n      // We have separate tables & no pointers. 2 commented lines below not needed.\r\n      // state.next_index = opts.table_index;\r\n      state.lenbits = opts.bits;\r\n      // state.lencode = state.next;\r\n\r\n      if (ret) {\r\n        strm.msg = 'invalid literal/lengths set';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n\r\n      state.distbits = 6;\r\n      //state.distcode.copy(state.codes);\r\n      // Switch to use dynamic table\r\n      state.distcode = state.distdyn;\r\n      opts = { bits: state.distbits };\r\n      ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\r\n      // We have separate tables & no pointers. 2 commented lines below not needed.\r\n      // state.next_index = opts.table_index;\r\n      state.distbits = opts.bits;\r\n      // state.distcode = state.next;\r\n\r\n      if (ret) {\r\n        strm.msg = 'invalid distances set';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      //Tracev((stderr, 'inflate:       codes ok\\n'));\r\n      state.mode = LEN_;\r\n      if (flush === Z_TREES) { break inf_leave; }\r\n      /* falls through */\r\n    case LEN_:\r\n      state.mode = LEN;\r\n      /* falls through */\r\n    case LEN:\r\n      if (have >= 6 && left >= 258) {\r\n        //--- RESTORE() ---\r\n        strm.next_out = put;\r\n        strm.avail_out = left;\r\n        strm.next_in = next;\r\n        strm.avail_in = have;\r\n        state.hold = hold;\r\n        state.bits = bits;\r\n        //---\r\n        inflate_fast(strm, _out);\r\n        //--- LOAD() ---\r\n        put = strm.next_out;\r\n        output = strm.output;\r\n        left = strm.avail_out;\r\n        next = strm.next_in;\r\n        input = strm.input;\r\n        have = strm.avail_in;\r\n        hold = state.hold;\r\n        bits = state.bits;\r\n        //---\r\n\r\n        if (state.mode === TYPE) {\r\n          state.back = -1;\r\n        }\r\n        break;\r\n      }\r\n      state.back = 0;\r\n      for (;;) {\r\n        here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\r\n        here_bits = here >>> 24;\r\n        here_op = (here >>> 16) & 0xff;\r\n        here_val = here & 0xffff;\r\n\r\n        if (here_bits <= bits) { break; }\r\n        //--- PULLBYTE() ---//\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n        //---//\r\n      }\r\n      if (here_op && (here_op & 0xf0) === 0) {\r\n        last_bits = here_bits;\r\n        last_op = here_op;\r\n        last_val = here_val;\r\n        for (;;) {\r\n          here = state.lencode[last_val +\r\n                  ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\r\n          here_bits = here >>> 24;\r\n          here_op = (here >>> 16) & 0xff;\r\n          here_val = here & 0xffff;\r\n\r\n          if ((last_bits + here_bits) <= bits) { break; }\r\n          //--- PULLBYTE() ---//\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n          //---//\r\n        }\r\n        //--- DROPBITS(last.bits) ---//\r\n        hold >>>= last_bits;\r\n        bits -= last_bits;\r\n        //---//\r\n        state.back += last_bits;\r\n      }\r\n      //--- DROPBITS(here.bits) ---//\r\n      hold >>>= here_bits;\r\n      bits -= here_bits;\r\n      //---//\r\n      state.back += here_bits;\r\n      state.length = here_val;\r\n      if (here_op === 0) {\r\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\r\n        //        \"inflate:         literal '%c'\\n\" :\r\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\r\n        state.mode = LIT;\r\n        break;\r\n      }\r\n      if (here_op & 32) {\r\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\r\n        state.back = -1;\r\n        state.mode = TYPE;\r\n        break;\r\n      }\r\n      if (here_op & 64) {\r\n        strm.msg = 'invalid literal/length code';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      state.extra = here_op & 15;\r\n      state.mode = LENEXT;\r\n      /* falls through */\r\n    case LENEXT:\r\n      if (state.extra) {\r\n        //=== NEEDBITS(state.extra);\r\n        n = state.extra;\r\n        while (bits < n) {\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n        }\r\n        //===//\r\n        state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\r\n        //--- DROPBITS(state.extra) ---//\r\n        hold >>>= state.extra;\r\n        bits -= state.extra;\r\n        //---//\r\n        state.back += state.extra;\r\n      }\r\n      //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\r\n      state.was = state.length;\r\n      state.mode = DIST;\r\n      /* falls through */\r\n    case DIST:\r\n      for (;;) {\r\n        here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\r\n        here_bits = here >>> 24;\r\n        here_op = (here >>> 16) & 0xff;\r\n        here_val = here & 0xffff;\r\n\r\n        if ((here_bits) <= bits) { break; }\r\n        //--- PULLBYTE() ---//\r\n        if (have === 0) { break inf_leave; }\r\n        have--;\r\n        hold += input[next++] << bits;\r\n        bits += 8;\r\n        //---//\r\n      }\r\n      if ((here_op & 0xf0) === 0) {\r\n        last_bits = here_bits;\r\n        last_op = here_op;\r\n        last_val = here_val;\r\n        for (;;) {\r\n          here = state.distcode[last_val +\r\n                  ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\r\n          here_bits = here >>> 24;\r\n          here_op = (here >>> 16) & 0xff;\r\n          here_val = here & 0xffff;\r\n\r\n          if ((last_bits + here_bits) <= bits) { break; }\r\n          //--- PULLBYTE() ---//\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n          //---//\r\n        }\r\n        //--- DROPBITS(last.bits) ---//\r\n        hold >>>= last_bits;\r\n        bits -= last_bits;\r\n        //---//\r\n        state.back += last_bits;\r\n      }\r\n      //--- DROPBITS(here.bits) ---//\r\n      hold >>>= here_bits;\r\n      bits -= here_bits;\r\n      //---//\r\n      state.back += here_bits;\r\n      if (here_op & 64) {\r\n        strm.msg = 'invalid distance code';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n      state.offset = here_val;\r\n      state.extra = (here_op) & 15;\r\n      state.mode = DISTEXT;\r\n      /* falls through */\r\n    case DISTEXT:\r\n      if (state.extra) {\r\n        //=== NEEDBITS(state.extra);\r\n        n = state.extra;\r\n        while (bits < n) {\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n        }\r\n        //===//\r\n        state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\r\n        //--- DROPBITS(state.extra) ---//\r\n        hold >>>= state.extra;\r\n        bits -= state.extra;\r\n        //---//\r\n        state.back += state.extra;\r\n      }\r\n//#ifdef INFLATE_STRICT\r\n      if (state.offset > state.dmax) {\r\n        strm.msg = 'invalid distance too far back';\r\n        state.mode = BAD;\r\n        break;\r\n      }\r\n//#endif\r\n      //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\r\n      state.mode = MATCH;\r\n      /* falls through */\r\n    case MATCH:\r\n      if (left === 0) { break inf_leave; }\r\n      copy = _out - left;\r\n      if (state.offset > copy) {         /* copy from window */\r\n        copy = state.offset - copy;\r\n        if (copy > state.whave) {\r\n          if (state.sane) {\r\n            strm.msg = 'invalid distance too far back';\r\n            state.mode = BAD;\r\n            break;\r\n          }\r\n// (!) This block is disabled in zlib defailts,\r\n// don't enable it for binary compatibility\r\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\r\n//          Trace((stderr, \"inflate.c too far\\n\"));\r\n//          copy -= state.whave;\r\n//          if (copy > state.length) { copy = state.length; }\r\n//          if (copy > left) { copy = left; }\r\n//          left -= copy;\r\n//          state.length -= copy;\r\n//          do {\r\n//            output[put++] = 0;\r\n//          } while (--copy);\r\n//          if (state.length === 0) { state.mode = LEN; }\r\n//          break;\r\n//#endif\r\n        }\r\n        if (copy > state.wnext) {\r\n          copy -= state.wnext;\r\n          from = state.wsize - copy;\r\n        }\r\n        else {\r\n          from = state.wnext - copy;\r\n        }\r\n        if (copy > state.length) { copy = state.length; }\r\n        from_source = state.window;\r\n      }\r\n      else {                              /* copy from output */\r\n        from_source = output;\r\n        from = put - state.offset;\r\n        copy = state.length;\r\n      }\r\n      if (copy > left) { copy = left; }\r\n      left -= copy;\r\n      state.length -= copy;\r\n      do {\r\n        output[put++] = from_source[from++];\r\n      } while (--copy);\r\n      if (state.length === 0) { state.mode = LEN; }\r\n      break;\r\n    case LIT:\r\n      if (left === 0) { break inf_leave; }\r\n      output[put++] = state.length;\r\n      left--;\r\n      state.mode = LEN;\r\n      break;\r\n    case CHECK:\r\n      if (state.wrap) {\r\n        //=== NEEDBITS(32);\r\n        while (bits < 32) {\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          // Use '|' insdead of '+' to make sure that result is signed\r\n          hold |= input[next++] << bits;\r\n          bits += 8;\r\n        }\r\n        //===//\r\n        _out -= left;\r\n        strm.total_out += _out;\r\n        state.total += _out;\r\n        if (_out) {\r\n          strm.adler = state.check =\r\n              /*UPDATE(state.check, put - _out, _out);*/\r\n              (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\r\n\r\n        }\r\n        _out = left;\r\n        // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\r\n        if ((state.flags ? hold : zswap32(hold)) !== state.check) {\r\n          strm.msg = 'incorrect data check';\r\n          state.mode = BAD;\r\n          break;\r\n        }\r\n        //=== INITBITS();\r\n        hold = 0;\r\n        bits = 0;\r\n        //===//\r\n        //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\r\n      }\r\n      state.mode = LENGTH;\r\n      /* falls through */\r\n    case LENGTH:\r\n      if (state.wrap && state.flags) {\r\n        //=== NEEDBITS(32);\r\n        while (bits < 32) {\r\n          if (have === 0) { break inf_leave; }\r\n          have--;\r\n          hold += input[next++] << bits;\r\n          bits += 8;\r\n        }\r\n        //===//\r\n        if (hold !== (state.total & 0xffffffff)) {\r\n          strm.msg = 'incorrect length check';\r\n          state.mode = BAD;\r\n          break;\r\n        }\r\n        //=== INITBITS();\r\n        hold = 0;\r\n        bits = 0;\r\n        //===//\r\n        //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\r\n      }\r\n      state.mode = DONE;\r\n      /* falls through */\r\n    case DONE:\r\n      ret = Z_STREAM_END;\r\n      break inf_leave;\r\n    case BAD:\r\n      ret = Z_DATA_ERROR;\r\n      break inf_leave;\r\n    case MEM:\r\n      return Z_MEM_ERROR;\r\n    case SYNC:\r\n      /* falls through */\r\n    default:\r\n      return Z_STREAM_ERROR;\r\n    }\r\n  }\r\n\r\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\r\n\r\n  /*\r\n     Return from inflate(), updating the total counts and the check value.\r\n     If there was no progress during the inflate() call, return a buffer\r\n     error.  Call updatewindow() to create and/or update the window state.\r\n     Note: a memory error from inflate() is non-recoverable.\r\n   */\r\n\r\n  //--- RESTORE() ---\r\n  strm.next_out = put;\r\n  strm.avail_out = left;\r\n  strm.next_in = next;\r\n  strm.avail_in = have;\r\n  state.hold = hold;\r\n  state.bits = bits;\r\n  //---\r\n\r\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\r\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\r\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\r\n      state.mode = MEM;\r\n      return Z_MEM_ERROR;\r\n    }\r\n  }\r\n  _in -= strm.avail_in;\r\n  _out -= strm.avail_out;\r\n  strm.total_in += _in;\r\n  strm.total_out += _out;\r\n  state.total += _out;\r\n  if (state.wrap && _out) {\r\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\r\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\r\n  }\r\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\r\n                    (state.mode === TYPE ? 128 : 0) +\r\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\r\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\r\n    ret = Z_BUF_ERROR;\r\n  }\r\n  return ret;\r\n}\r\n\r\nfunction inflateEnd(strm) {\r\n\r\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\r\n    return Z_STREAM_ERROR;\r\n  }\r\n\r\n  var state = strm.state;\r\n  if (state.window) {\r\n    state.window = null;\r\n  }\r\n  strm.state = null;\r\n  return Z_OK;\r\n}\r\n\r\nfunction inflateGetHeader(strm, head) {\r\n  var state;\r\n\r\n  /* check state */\r\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\r\n  state = strm.state;\r\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\r\n\r\n  /* save header structure */\r\n  state.head = head;\r\n  head.done = false;\r\n  return Z_OK;\r\n}\r\n\r\nfunction inflateSetDictionary(strm, dictionary) {\r\n  var dictLength = dictionary.length;\r\n\r\n  var state;\r\n  var dictid;\r\n  var ret;\r\n\r\n  /* check state */\r\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\r\n  state = strm.state;\r\n\r\n  if (state.wrap !== 0 && state.mode !== DICT) {\r\n    return Z_STREAM_ERROR;\r\n  }\r\n\r\n  /* check for correct dictionary identifier */\r\n  if (state.mode === DICT) {\r\n    dictid = 1; /* adler32(0, null, 0)*/\r\n    /* dictid = adler32(dictid, dictionary, dictLength); */\r\n    dictid = adler32(dictid, dictionary, dictLength, 0);\r\n    if (dictid !== state.check) {\r\n      return Z_DATA_ERROR;\r\n    }\r\n  }\r\n  /* copy dictionary to window using updatewindow(), which will amend the\r\n   existing dictionary if appropriate */\r\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\r\n  if (ret) {\r\n    state.mode = MEM;\r\n    return Z_MEM_ERROR;\r\n  }\r\n  state.havedict = 1;\r\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\r\n  return Z_OK;\r\n}\r\n\r\n// String encode/decode helpers\r\n// 'use strict';\r\n\r\n\r\n// var utils = require('./common');\r\n\r\n\r\n// Quick check if we can use fast array to bin string conversion\r\n//\r\n// - apply(Array) can fail on Android 2.2\r\n// - apply(Uint8Array) can fail on iOS 5.1 Safary\r\n//\r\nvar STR_APPLY_OK = true;\r\nvar STR_APPLY_UIA_OK = true;\r\n\r\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\r\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\r\n\r\n\r\n// Table with utf8 lengths (calculated by first byte of sequence)\r\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\r\n// because max possible codepoint is 0x10ffff\r\nvar _utf8len = new Uint8Array(256);\r\nfor (var q = 0; q < 256; q++) {\r\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\r\n}\r\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\r\n\r\n\r\n// convert string to array (typed, when possible)\r\nfunction string2buf(str) {\r\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\r\n\r\n  // count binary size\r\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\r\n    c = str.charCodeAt(m_pos);\r\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\r\n      c2 = str.charCodeAt(m_pos + 1);\r\n      if ((c2 & 0xfc00) === 0xdc00) {\r\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\r\n        m_pos++;\r\n      }\r\n    }\r\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\r\n  }\r\n\r\n  // allocate buffer\r\n  buf = new Uint8Array(buf_len);\r\n\r\n  // convert\r\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\r\n    c = str.charCodeAt(m_pos);\r\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\r\n      c2 = str.charCodeAt(m_pos + 1);\r\n      if ((c2 & 0xfc00) === 0xdc00) {\r\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\r\n        m_pos++;\r\n      }\r\n    }\r\n    if (c < 0x80) {\r\n      /* one byte */\r\n      buf[i++] = c;\r\n    } else if (c < 0x800) {\r\n      /* two bytes */\r\n      buf[i++] = 0xC0 | (c >>> 6);\r\n      buf[i++] = 0x80 | (c & 0x3f);\r\n    } else if (c < 0x10000) {\r\n      /* three bytes */\r\n      buf[i++] = 0xE0 | (c >>> 12);\r\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\r\n      buf[i++] = 0x80 | (c & 0x3f);\r\n    } else {\r\n      /* four bytes */\r\n      buf[i++] = 0xf0 | (c >>> 18);\r\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\r\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\r\n      buf[i++] = 0x80 | (c & 0x3f);\r\n    }\r\n  }\r\n\r\n  return buf;\r\n}\r\n\r\n// Helper (used in 2 places)\r\nfunction _buf2binstring(buf, len) {\r\n  // use fallback for big arrays to avoid stack overflow\r\n  if (len < 65537) {\r\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\r\n      return String.fromCharCode.apply(null, shrinkBuf(buf, len));\r\n    }\r\n  }\r\n\r\n  var result = '';\r\n  for (var i = 0; i < len; i++) {\r\n    result += String.fromCharCode(buf[i]);\r\n  }\r\n  return result;\r\n}\r\n\r\n\r\n// Convert binary string (typed, when possible)\r\nfunction binstring2buf(str) {\r\n  var buf = new Uint8Array(str.length);\r\n  for (var i = 0, len = buf.length; i < len; i++) {\r\n    buf[i] = str.charCodeAt(i);\r\n  }\r\n  return buf;\r\n}\r\n\r\n\r\n// convert array to string\r\nfunction buf2string(buf, max) {\r\n  var i, out, c, c_len;\r\n  var len = max || buf.length;\r\n\r\n  // Reserve max possible length (2 words per char)\r\n  // NB: by unknown reasons, Array is significantly faster for\r\n  //     String.fromCharCode.apply than Uint16Array.\r\n  var utf16buf = new Array(len * 2);\r\n\r\n  for (out = 0, i = 0; i < len;) {\r\n    c = buf[i++];\r\n    // quick process ascii\r\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\r\n\r\n    c_len = _utf8len[c];\r\n    // skip 5 & 6 byte codes\r\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\r\n\r\n    // apply mask on first byte\r\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\r\n    // join the rest\r\n    while (c_len > 1 && i < len) {\r\n      c = (c << 6) | (buf[i++] & 0x3f);\r\n      c_len--;\r\n    }\r\n\r\n    // terminated by end of string?\r\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\r\n\r\n    if (c < 0x10000) {\r\n      utf16buf[out++] = c;\r\n    } else {\r\n      c -= 0x10000;\r\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\r\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\r\n    }\r\n  }\r\n\r\n  return _buf2binstring(utf16buf, out);\r\n}\r\n\r\n\r\n// Calculate max possible position in utf8 buffer,\r\n// that will not break sequence. If that's not possible\r\n// - (very small limits) return max size as is.\r\n//\r\n// buf[] - utf8 bytes array\r\n// max   - length limit (mandatory);\r\nfunction utf8border(buf, max) {\r\n  var pos;\r\n\r\n  max = max || buf.length;\r\n  if (max > buf.length) { max = buf.length; }\r\n\r\n  // go back from last position, until start of sequence found\r\n  pos = max - 1;\r\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\r\n\r\n  // Fuckup - very small and broken sequence,\r\n  // return max, because we should return something anyway.\r\n  if (pos < 0) { return max; }\r\n\r\n  // If we came to start of buffer - that means vuffer is too small,\r\n  // return max too.\r\n  if (pos === 0) { return max; }\r\n\r\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\r\n}\r\n\r\n/* Allowed flush values; see deflate() and inflate() below for details */\r\nvar Z_NO_FLUSH        = 0;\r\nvar Z_SYNC_FLUSH      = 2;\r\nvar Z_FINISH$1          = 4;\r\n/* Return codes for the compression/decompression functions. Negative values\r\n  * are errors, positive values are used for special but normal events.\r\n  */\r\nvar Z_OK$1              =  0;\r\nvar Z_STREAM_END$1      =  1;\r\nvar Z_NEED_DICT$1       =  2;\r\n//export var Z_MEM_ERROR     = -4;\r\nvar Z_BUF_ERROR$1       = -5;\r\n\r\n// 'use strict';\r\n\r\nvar messages = {\r\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\r\n  1:      'stream end',          /* Z_STREAM_END      1  */\r\n  0:      '',                    /* Z_OK              0  */\r\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\r\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\r\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\r\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\r\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\r\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\r\n};\r\n\r\n// 'use strict';\r\n\r\n\r\nfunction ZStream() {\r\n  /* next input byte */\r\n  this.input = null; // JS specific, because we have no pointers\r\n  this.next_in = 0;\r\n  /* number of bytes available at input */\r\n  this.avail_in = 0;\r\n  /* total number of input bytes read so far */\r\n  this.total_in = 0;\r\n  /* next output byte should be put there */\r\n  this.output = null; // JS specific, because we have no pointers\r\n  this.next_out = 0;\r\n  /* remaining free space at output */\r\n  this.avail_out = 0;\r\n  /* total number of bytes output so far */\r\n  this.total_out = 0;\r\n  /* last error message, NULL if no error */\r\n  this.msg = ''/*Z_NULL*/;\r\n  /* not visible by applications */\r\n  this.state = null;\r\n  /* best guess about the data type: binary or text */\r\n  this.data_type = 2/*Z_UNKNOWN*/;\r\n  /* adler32 value of the uncompressed data */\r\n  this.adler = 0;\r\n}\r\n\r\n// 'use strict';\r\n\r\n\r\nfunction GZheader() {\r\n  /* true if compressed data believed to be text */\r\n  this.text       = 0;\r\n  /* modification time */\r\n  this.time       = 0;\r\n  /* extra flags (not used when writing a gzip file) */\r\n  this.xflags     = 0;\r\n  /* operating system */\r\n  this.os         = 0;\r\n  /* pointer to extra field or Z_NULL if none */\r\n  this.extra      = null;\r\n  /* extra field length (valid if extra != Z_NULL) */\r\n  this.extra_len  = 0; // Actually, we don't need it in JS,\r\n                       // but leave for few code modifications\r\n\r\n  //\r\n  // Setup limits is not necessary because in js we should not preallocate memory\r\n  // for inflate use constant limit in 65536 bytes\r\n  //\r\n\r\n  /* space at extra (only when reading header) */\r\n  // this.extra_max  = 0;\r\n  /* pointer to zero-terminated file name or Z_NULL */\r\n  this.name       = '';\r\n  /* space at name (only when reading header) */\r\n  // this.name_max   = 0;\r\n  /* pointer to zero-terminated comment or Z_NULL */\r\n  this.comment    = '';\r\n  /* space at comment (only when reading header) */\r\n  // this.comm_max   = 0;\r\n  /* true if there was or will be a header crc */\r\n  this.hcrc       = 0;\r\n  /* true when done reading gzip header (not used when writing a gzip file) */\r\n  this.done       = false;\r\n}\r\n\r\n// 'use strict';\r\n\r\n\r\n// var zlib_inflate = require('./zlib/inflate');\r\n// var utils        = require('./utils/common');\r\n// var strings      = require('./utils/strings');\r\n// var c            = require('./zlib/constants');\r\n// var msg          = require('./zlib/messages');\r\n// var ZStream      = require('./zlib/zstream');\r\n// var GZheader     = require('./zlib/gzheader');\r\n\r\nvar toString = Object.prototype.toString;\r\n\r\n/**\r\n * class Inflate\r\n *\r\n * Generic JS-style wrapper for zlib calls. If you don't need\r\n * streaming behaviour - use more simple functions: [[inflate]]\r\n * and [[inflateRaw]].\r\n **/\r\n\r\n/* internal\r\n * inflate.chunks -> Array\r\n *\r\n * Chunks of output data, if [[Inflate#onData]] not overriden.\r\n **/\r\n\r\n/**\r\n * Inflate.result -> Uint8Array|Array|String\r\n *\r\n * Uncompressed result, generated by default [[Inflate#onData]]\r\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\r\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\r\n * push a chunk with explicit flush (call [[Inflate#push]] with\r\n * `Z_SYNC_FLUSH` param).\r\n **/\r\n\r\n/**\r\n * Inflate.err -> Number\r\n *\r\n * Error code after inflate finished. 0 (Z_OK) on success.\r\n * Should be checked if broken data possible.\r\n **/\r\n\r\n/**\r\n * Inflate.msg -> String\r\n *\r\n * Error message, if [[Inflate.err]] != 0\r\n **/\r\n\r\n\r\n/**\r\n * new Inflate(options)\r\n * - options (Object): zlib inflate options.\r\n *\r\n * Creates new inflator instance with specified params. Throws exception\r\n * on bad params. Supported options:\r\n *\r\n * - `windowBits`\r\n * - `dictionary`\r\n *\r\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\r\n * for more information on these.\r\n *\r\n * Additional options, for internal needs:\r\n *\r\n * - `chunkSize` - size of generated data chunks (16K by default)\r\n * - `raw` (Boolean) - do raw inflate\r\n * - `to` (String) - if equal to 'string', then result will be converted\r\n *   from utf8 to utf16 (javascript) string. When string output requested,\r\n *   chunk length can differ from `chunkSize`, depending on content.\r\n *\r\n * By default, when no options set, autodetect deflate/gzip data format via\r\n * wrapper header.\r\n *\r\n * ##### Example:\r\n *\r\n * ```javascript\r\n * var pako = require('pako')\r\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\r\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\r\n *\r\n * var inflate = new pako.Inflate({ level: 3});\r\n *\r\n * inflate.push(chunk1, false);\r\n * inflate.push(chunk2, true);  // true -> last chunk\r\n *\r\n * if (inflate.err) { throw new Error(inflate.err); }\r\n *\r\n * console.log(inflate.result);\r\n * ```\r\n **/\r\nfunction Inflate(options) {\r\n  if (!(this instanceof Inflate)) return new Inflate(options);\r\n\r\n  this.options = assign({\r\n    chunkSize: 16384,\r\n    windowBits: 0,\r\n    to: ''\r\n  }, options || {});\r\n\r\n  var opt = this.options;\r\n\r\n  // Force window size for `raw` data, if not set directly,\r\n  // because we have no header for autodetect.\r\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\r\n    opt.windowBits = -opt.windowBits;\r\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\r\n  }\r\n\r\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\r\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\r\n      !(options && options.windowBits)) {\r\n    opt.windowBits += 32;\r\n  }\r\n\r\n  // Gzip header has no info about windows size, we can do autodetect only\r\n  // for deflate. So, if window size not set, force it to max when gzip possible\r\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\r\n    // bit 3 (16) -> gzipped data\r\n    // bit 4 (32) -> autodetect gzip/deflate\r\n    if ((opt.windowBits & 15) === 0) {\r\n      opt.windowBits |= 15;\r\n    }\r\n  }\r\n\r\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\r\n  this.msg    = '';     // error message\r\n  this.ended  = false;  // used to avoid multiple onEnd() calls\r\n  this.chunks = [];     // chunks of compressed data\r\n\r\n  this.strm   = new ZStream();\r\n  this.strm.avail_out = 0;\r\n\r\n  var status  = inflateInit2(\r\n    this.strm,\r\n    opt.windowBits\r\n  );\r\n\r\n  if (status !== Z_OK$1) {\r\n    throw new Error(messages[status]);\r\n  }\r\n\r\n  this.header = new GZheader();\r\n\r\n  inflateGetHeader(this.strm, this.header);\r\n}\r\n\r\n/**\r\n * Inflate#push(data[, mode]) -> Boolean\r\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\r\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\r\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` meansh Z_FINISH.\r\n *\r\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\r\n * new output chunks. Returns `true` on success. The last data block must have\r\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\r\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\r\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\r\n *\r\n * On fail call [[Inflate#onEnd]] with error code and return false.\r\n *\r\n * We strongly recommend to use `Uint8Array` on input for best speed (output\r\n * format is detected automatically). Also, don't skip last param and always\r\n * use the same type in your code (boolean or number). That will improve JS speed.\r\n *\r\n * For regular `Array`-s make sure all elements are [0..255].\r\n *\r\n * ##### Example\r\n *\r\n * ```javascript\r\n * push(chunk, false); // push one of data chunks\r\n * ...\r\n * push(chunk, true);  // push last chunk\r\n * ```\r\n **/\r\nInflate.prototype.push = function (data, mode) {\r\n  var strm = this.strm;\r\n  var chunkSize = this.options.chunkSize;\r\n  var dictionary = this.options.dictionary;\r\n  var status, _mode;\r\n  var next_out_utf8, tail, utf8str;\r\n  var dict;\r\n\r\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\r\n  // when we check that all output data was flushed.\r\n  var allowBufError = false;\r\n\r\n  if (this.ended) { return false; }\r\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH$1 : Z_NO_FLUSH);\r\n\r\n  // Convert data if needed\r\n  if (typeof data === 'string') {\r\n    // Only binary strings can be decompressed on practice\r\n    strm.input = binstring2buf(data);\r\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\r\n    strm.input = new Uint8Array(data);\r\n  } else {\r\n    strm.input = data;\r\n  }\r\n\r\n  strm.next_in = 0;\r\n  strm.avail_in = strm.input.length;\r\n\r\n  do {\r\n    if (strm.avail_out === 0) {\r\n      strm.output = new Uint8Array(chunkSize);\r\n      strm.next_out = 0;\r\n      strm.avail_out = chunkSize;\r\n    }\r\n\r\n    status = inflate(strm, Z_NO_FLUSH);    /* no bad return value */\r\n\r\n    if (status === Z_NEED_DICT$1 && dictionary) {\r\n      // Convert data if needed\r\n      if (typeof dictionary === 'string') {\r\n        dict = string2buf(dictionary);\r\n      } else if (toString.call(dictionary) === '[object ArrayBuffer]') {\r\n        dict = new Uint8Array(dictionary);\r\n      } else {\r\n        dict = dictionary;\r\n      }\r\n\r\n      status = inflateSetDictionary(this.strm, dict);\r\n\r\n    }\r\n\r\n    if (status === Z_BUF_ERROR$1 && allowBufError === true) {\r\n      status = Z_OK$1;\r\n      allowBufError = false;\r\n    }\r\n\r\n    if (status !== Z_STREAM_END$1 && status !== Z_OK$1) {\r\n      this.onEnd(status);\r\n      this.ended = true;\r\n      return false;\r\n    }\r\n\r\n    if (strm.next_out) {\r\n      if (strm.avail_out === 0 || status === Z_STREAM_END$1 || (strm.avail_in === 0 && (_mode === Z_FINISH$1 || _mode === Z_SYNC_FLUSH))) {\r\n\r\n        if (this.options.to === 'string') {\r\n\r\n          next_out_utf8 = utf8border(strm.output, strm.next_out);\r\n\r\n          tail = strm.next_out - next_out_utf8;\r\n          utf8str = buf2string(strm.output, next_out_utf8);\r\n\r\n          // move tail\r\n          strm.next_out = tail;\r\n          strm.avail_out = chunkSize - tail;\r\n          if (tail) { arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\r\n\r\n          this.onData(utf8str);\r\n\r\n        } else {\r\n          this.onData(shrinkBuf(strm.output, strm.next_out));\r\n        }\r\n      }\r\n    }\r\n\r\n    // When no more input data, we should check that internal inflate buffers\r\n    // are flushed. The only way to do it when avail_out = 0 - run one more\r\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\r\n    // Here we set flag to process this error properly.\r\n    //\r\n    // NOTE. Deflate does not return error in this case and does not needs such\r\n    // logic.\r\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\r\n      allowBufError = true;\r\n    }\r\n\r\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END$1);\r\n\r\n  if (status === Z_STREAM_END$1) {\r\n    _mode = Z_FINISH$1;\r\n  }\r\n\r\n  // Finalize on the last chunk.\r\n  if (_mode === Z_FINISH$1) {\r\n    status = inflateEnd(this.strm);\r\n    this.onEnd(status);\r\n    this.ended = true;\r\n    return status === Z_OK$1;\r\n  }\r\n\r\n  // callback interim results if Z_SYNC_FLUSH.\r\n  if (_mode === Z_SYNC_FLUSH) {\r\n    this.onEnd(Z_OK$1);\r\n    strm.avail_out = 0;\r\n    return true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n\r\n/**\r\n * Inflate#onData(chunk) -> Void\r\n * - chunk (Uint8Array|Array|String): ouput data. Type of array depends\r\n *   on js engine support. When string output requested, each chunk\r\n *   will be string.\r\n *\r\n * By default, stores data blocks in `chunks[]` property and glue\r\n * those in `onEnd`. Override this handler, if you need another behaviour.\r\n **/\r\nInflate.prototype.onData = function (chunk) {\r\n  this.chunks.push(chunk);\r\n};\r\n\r\n\r\n/**\r\n * Inflate#onEnd(status) -> Void\r\n * - status (Number): inflate status. 0 (Z_OK) on success,\r\n *   other if not.\r\n *\r\n * Called either after you tell inflate that the input stream is\r\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\r\n * or if an error happened. By default - join collected chunks,\r\n * free memory and fill `results` / `err` properties.\r\n **/\r\nInflate.prototype.onEnd = function (status) {\r\n  // On success - join\r\n  if (status === Z_OK$1) {\r\n    if (this.options.to === 'string') {\r\n      // Glue & convert here, until we teach pako to send\r\n      // utf8 alligned strings to onData\r\n      this.result = this.chunks.join('');\r\n    } else {\r\n      this.result = flattenChunks(this.chunks);\r\n    }\r\n  }\r\n  this.chunks = [];\r\n  this.err = status;\r\n  this.msg = this.strm.msg;\r\n};\r\n\r\n\r\n/**\r\n * inflate(data[, options]) -> Uint8Array|Array|String\r\n * - data (Uint8Array|Array|String): input data to decompress.\r\n * - options (Object): zlib inflate options.\r\n *\r\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\r\n * format via wrapper header by default. That's why we don't provide\r\n * separate `ungzip` method.\r\n *\r\n * Supported options are:\r\n *\r\n * - windowBits\r\n *\r\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\r\n * for more information.\r\n *\r\n * Sugar (options):\r\n *\r\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\r\n *   negative windowBits implicitly.\r\n * - `to` (String) - if equal to 'string', then result will be converted\r\n *   from utf8 to utf16 (javascript) string. When string output requested,\r\n *   chunk length can differ from `chunkSize`, depending on content.\r\n *\r\n *\r\n * ##### Example:\r\n *\r\n * ```javascript\r\n * var pako = require('pako')\r\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\r\n *   , output;\r\n *\r\n * try {\r\n *   output = pako.inflate(input);\r\n * } catch (err)\r\n *   console.log(err);\r\n * }\r\n * ```\r\n **/\r\nfunction doInflate(input, options) {\r\n  var inflator = new Inflate(options);\r\n\r\n  inflator.push(input, true);\r\n\r\n  // That will never happens, if you don't cheat with options :)\r\n  if (inflator.err) { throw inflator.msg; }\r\n\r\n  return inflator.result;\r\n}\r\n\r\nexport { doInflate as ungzip };","/**\r\n * @file Gzip Decompressor\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { ungzip } from '../../lib/pako_inflate.es6.js';\r\nimport { DecompressorRegistry } from '../globals';\r\nfunction gzipDecompress(data) {\r\n    let decompressedData;\r\n    if (data instanceof ArrayBuffer) {\r\n        data = new Uint8Array(data);\r\n    }\r\n    try {\r\n        decompressedData = ungzip(data);\r\n    }\r\n    catch (e) {\r\n        decompressedData = data; // assume it is already uncompressed\r\n    }\r\n    return decompressedData;\r\n}\r\nDecompressorRegistry.add('gz', gzipDecompress);\r\n//# sourceMappingURL=gzip-decompressor.js.map","/**\r\n * @file Datasource\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\n/**\r\n * Datasource base class\r\n * @interface\r\n */\r\nclass Datasource {\r\n}\r\nexport default Datasource;\r\n//# sourceMappingURL=datasource.js.map","/**\r\n * @file RCSB Datasource\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Log, DatasourceRegistry } from '../globals';\r\nimport { getProtocol } from '../utils';\r\nimport { getFileInfo } from '../loader/loader-utils';\r\nimport Datasource from './datasource';\r\nconst baseUrl = '//files.rcsb.org/download/';\r\nconst mmtfBaseUrl = '//mmtf.rcsb.org/v1.0/';\r\nconst mmtfFullUrl = mmtfBaseUrl + 'full/';\r\nconst mmtfReducedUrl = mmtfBaseUrl + 'reduced/';\r\nclass RcsbDatasource extends Datasource {\r\n    getUrl(src) {\r\n        // valid path are\r\n        // XXXX.pdb, XXXX.pdb.gz, XXXX.cif, XXXX.cif.gz, XXXX.mmtf, XXXX.bb.mmtf\r\n        // XXXX defaults to XXXX.cif\r\n        const info = getFileInfo(src);\r\n        const pdbid = info.name.substr(0, 4);\r\n        let url;\r\n        if (['pdb', 'cif'].includes(info.ext) &&\r\n            (info.compressed === false || info.compressed === 'gz')) {\r\n            url = baseUrl + info.path;\r\n        }\r\n        else if (info.ext === 'mmtf') {\r\n            if (info.base.endsWith('.bb')) {\r\n                url = mmtfReducedUrl + pdbid;\r\n            }\r\n            else {\r\n                url = mmtfFullUrl + pdbid;\r\n            }\r\n        }\r\n        else if (!info.ext) {\r\n            url = mmtfFullUrl + pdbid;\r\n        }\r\n        else {\r\n            Log.warn('unsupported ext', info.ext);\r\n            url = mmtfFullUrl + pdbid;\r\n        }\r\n        return getProtocol() + url;\r\n    }\r\n    getExt(src) {\r\n        const ext = getFileInfo(src).ext;\r\n        return ext ? ext : 'mmtf';\r\n    }\r\n}\r\nDatasourceRegistry.add('rcsb', new RcsbDatasource());\r\nexport default RcsbDatasource;\r\n//# sourceMappingURL=rcsb-datasource.js.map","/**\r\n * @file PubChem Datasource\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { Log, DatasourceRegistry } from '../globals';\r\nimport { getProtocol } from '../utils';\r\nimport { getFileInfo } from '../loader/loader-utils';\r\nimport Datasource from './datasource';\r\nconst baseUrl = '//pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/';\r\nconst suffixUrl = '/SDF?record_type=3d';\r\nclass PubchemDatasource extends Datasource {\r\n    getUrl(src) {\r\n        const info = getFileInfo(src);\r\n        const cid = info.name;\r\n        let url;\r\n        if (!info.ext || info.ext === 'sdf') {\r\n            url = baseUrl + cid + suffixUrl;\r\n        }\r\n        else {\r\n            Log.warn('unsupported ext', info.ext);\r\n            url = baseUrl + cid + suffixUrl;\r\n        }\r\n        return getProtocol() + url;\r\n    }\r\n    getExt(src) {\r\n        const ext = getFileInfo(src).ext;\r\n        return ext ? ext : 'sdf';\r\n    }\r\n}\r\nDatasourceRegistry.add('pubchem', new PubchemDatasource());\r\nexport default PubchemDatasource;\r\n//# sourceMappingURL=pubchem-datasource.js.map","/**\r\n * @file Pass Through Datasource\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { DatasourceRegistry } from '../globals';\r\nimport { getFileInfo } from '../loader/loader-utils';\r\nimport Datasource from './datasource';\r\nclass PassThroughDatasource extends Datasource {\r\n    getUrl(path) {\r\n        return path;\r\n    }\r\n    getExt(path) {\r\n        return getFileInfo(path).ext;\r\n    }\r\n}\r\nDatasourceRegistry.add('ftp', new PassThroughDatasource());\r\nDatasourceRegistry.add('http', new PassThroughDatasource());\r\nDatasourceRegistry.add('https', new PassThroughDatasource());\r\nexport default PassThroughDatasource;\r\n//# sourceMappingURL=passthrough-datasource.js.map","/**\r\n * @file Static Datasource\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { getAbsolutePath } from '../utils';\r\nimport { getFileInfo } from '../loader/loader-utils';\r\nimport Datasource from './datasource';\r\nconst reProtocol = /^((http|https|ftp):)*\\/\\//;\r\nclass StaticDatasource extends Datasource {\r\n    constructor(baseUrl = '') {\r\n        super();\r\n        this.baseUrl = baseUrl;\r\n    }\r\n    getUrl(src) {\r\n        const info = getFileInfo(src);\r\n        let url = this.baseUrl + info.path;\r\n        if (!reProtocol.test(this.baseUrl)) {\r\n            url = getAbsolutePath(url);\r\n        }\r\n        return url;\r\n    }\r\n    getExt(src) {\r\n        return getFileInfo(src).ext;\r\n    }\r\n}\r\nexport default StaticDatasource;\r\n//# sourceMappingURL=static-datasource.js.map","/**\r\n * @file MDsrv Datasource\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n * @private\r\n */\r\nimport { autoLoad, getFileInfo } from '../loader/loader-utils';\r\nimport Datasource from './datasource';\r\nclass MdsrvDatasource extends Datasource {\r\n    constructor(baseUrl = '') {\r\n        super();\r\n        this.baseUrl = baseUrl;\r\n    }\r\n    getListing(path = '') {\r\n        let url = `${this.baseUrl}dir/${path}`;\r\n        if (url[url.length - 1] !== '/')\r\n            url += '/';\r\n        return autoLoad(url, {\r\n            ext: 'json'\r\n        }).then((jsonData) => ({\r\n            path: path,\r\n            data: jsonData.data\r\n        }));\r\n    }\r\n    getUrl(src) {\r\n        const info = getFileInfo(src);\r\n        return `${this.baseUrl}file/${info.path}${info.query}`;\r\n    }\r\n    getCountUrl(src) {\r\n        const info = getFileInfo(src);\r\n        return `${this.baseUrl}traj/numframes/${info.path}${info.query}`;\r\n    }\r\n    getFrameUrl(src, frameIndex) {\r\n        const info = getFileInfo(src);\r\n        return `${this.baseUrl}traj/frame/${frameIndex}/${info.path}${info.query}`;\r\n    }\r\n    getFrameParams(src, atomIndices) {\r\n        return `atomIndices=${atomIndices.join(';')}`;\r\n    }\r\n    getPathUrl(src, atomIndex) {\r\n        const info = getFileInfo(src);\r\n        return `${this.baseUrl}traj/path/${atomIndex}/${info.path}${info.query}`;\r\n    }\r\n    getExt(src) {\r\n        return getFileInfo(src).ext;\r\n    }\r\n}\r\nexport default MdsrvDatasource;\r\n//# sourceMappingURL=mdsrv-datasource.js.map","/**\r\n * @file UI Parameters\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport { MouseActionPresets } from '../controls/mouse-actions';\r\nfunction BooleanParam() { return { type: 'boolean' }; }\r\nfunction ColorParam() { return { type: 'color' }; }\r\nfunction IntegerParam(max, min) {\r\n    return { type: 'integer', max, min };\r\n}\r\nfunction NumberParam(precision, max, min) {\r\n    return { type: 'number', precision, max, min };\r\n}\r\nfunction RangeParam(step, max, min) {\r\n    return { type: 'range', step, max, min };\r\n}\r\nfunction SelectParam(...options) {\r\n    return { type: 'select', options: options.reduce((o, k) => (Object.assign(Object.assign({}, o), { [k]: k })), {}) };\r\n}\r\nexport const UIStageParameters = {\r\n    backgroundColor: ColorParam(),\r\n    quality: SelectParam('auto', 'low', 'medium', 'high'),\r\n    sampleLevel: RangeParam(1, 5, -1),\r\n    impostor: BooleanParam(),\r\n    workerDefault: BooleanParam(),\r\n    rotateSpeed: NumberParam(1, 10, 0),\r\n    zoomSpeed: NumberParam(1, 10, 0),\r\n    panSpeed: NumberParam(1, 10, 0),\r\n    clipNear: RangeParam(1, 100, 0),\r\n    clipFar: RangeParam(1, 100, 0),\r\n    clipDist: IntegerParam(200, 0),\r\n    clipMode: SelectParam('scene', 'camera'),\r\n    clipScale: SelectParam('relative', 'absolute'),\r\n    fogNear: RangeParam(1, 100, 0),\r\n    fogFar: RangeParam(1, 100, 0),\r\n    cameraType: SelectParam('perspective', 'orthographic', 'stereo'),\r\n    cameraEyeSep: NumberParam(3, 1.0, 0.01),\r\n    cameraFov: RangeParam(1, 120, 15),\r\n    lightColor: ColorParam(),\r\n    lightIntensity: NumberParam(2, 10, 0),\r\n    ambientColor: ColorParam(),\r\n    ambientIntensity: NumberParam(2, 10, 0),\r\n    hoverTimeout: IntegerParam(10000, -1),\r\n    tooltip: BooleanParam(),\r\n    mousePreset: SelectParam(...Object.keys(MouseActionPresets))\r\n};\r\n//# sourceMappingURL=parameters.js.map","/**\r\n * @file Version\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport * as data from '../package.json';\r\n/**\r\n * Version name\r\n * @type {String}\r\n */\r\nconst Version = data.version;\r\nexport default Version;\r\n//# sourceMappingURL=version.js.map","import Component from '../component/component';\r\nclass CustomComponent extends Component {\r\n    constructor(stage, object, params = {}) {\r\n        super(stage, object, params);\r\n        this.stage = stage;\r\n        this.object = object;\r\n    }\r\n    get type() {\r\n        return \"custom\";\r\n    }\r\n    addRepresentation(type, object) {\r\n        const reprComp = this._addRepresentation(type, object, null);\r\n        return reprComp;\r\n    }\r\n}\r\nexport default CustomComponent;\r\n//# sourceMappingURL=CustomComponent.js.map","/**\r\n * @file ngl\r\n * @private\r\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\r\n */\r\nimport './polyfills';\r\nimport _Promise from 'promise-polyfill';\r\n/**\r\n * The NGL module. These members are available in the `NGL` namespace when using the {@link https://github.com/umdjs/umd|UMD} build in the `ngl.js` file.\r\n * @module NGL\r\n */\r\nexport { Debug, setDebug, MeasurementDefaultParams, setMeasurementDefaultParams, ScriptExtensions, ColormakerRegistry, DatasourceRegistry, DecompressorRegistry, ParserRegistry, RepresentationRegistry, setListingDatasource, setTrajectoryDatasource, ListingDatasource, TrajectoryDatasource } from './globals';\r\nexport { autoLoad, getDataInfo, getFileInfo } from './loader/loader-utils';\r\nimport Selection from './selection/selection';\r\nimport PdbWriter from './writer/pdb-writer';\r\nimport SdfWriter from './writer/sdf-writer';\r\nimport StlWriter from './writer/stl-writer';\r\nimport Stage from './stage/stage';\r\nimport Collection from './component/collection';\r\nimport ComponentCollection from './component/component-collection';\r\nimport Component from './component/component';\r\nimport ShapeComponent from './component/shape-component';\r\nimport StructureComponent from './component/structure-component';\r\nimport SurfaceComponent from './component/surface-component';\r\nimport VolumeComponent from './component/volume-component';\r\nimport RepresentationCollection from './component/representation-collection';\r\nimport Assembly from './symmetry/assembly';\r\nimport TrajectoryPlayer from './trajectory/trajectory-player';\r\nimport Superposition from './align/superposition';\r\nexport { superpose } from './align/align-utils';\r\nexport { guessElement, concatStructures } from './structure/structure-utils';\r\nexport { flatten, throttle, download, getQuery, uniqueArray } from './utils';\r\nimport Queue from './utils/queue';\r\nimport Counter from './utils/counter';\r\nimport Frames from './trajectory/frames';\r\n//\r\nimport Colormaker from './color/colormaker';\r\nimport './color/atomindex-colormaker';\r\nimport './color/bfactor-colormaker';\r\nimport './color/chainid-colormaker';\r\nimport './color/chainindex-colormaker';\r\nimport './color/chainname-colormaker';\r\nimport './color/densityfit-colormaker';\r\nimport './color/electrostatic-colormaker';\r\nimport './color/element-colormaker';\r\nimport './color/entityindex-colormaker';\r\nimport './color/entitytype-colormaker';\r\nimport './color/geoquality-colormaker';\r\nimport './color/hydrophobicity-colormaker';\r\nimport './color/modelindex-colormaker';\r\nimport './color/moleculetype-colormaker';\r\nimport './color/occupancy-colormaker';\r\nimport './color/partialcharge-colormaker';\r\nimport './color/random-colormaker';\r\nimport './color/randomcoilindex-colormaker';\r\nimport './color/residueindex-colormaker';\r\nimport './color/resname-colormaker';\r\nimport './color/sstruc-colormaker';\r\nimport './color/uniform-colormaker';\r\nimport './color/value-colormaker';\r\nimport './color/volume-colormaker';\r\n//\r\nimport './component/shape-component';\r\nimport './component/structure-component';\r\nimport './component/surface-component';\r\nimport './component/volume-component';\r\n//\r\nimport './representation/angle-representation';\r\nimport './representation/axes-representation';\r\nimport './representation/backbone-representation';\r\nimport './representation/ballandstick-representation';\r\nimport './representation/base-representation';\r\nimport './representation/cartoon-representation';\r\nimport './representation/contact-representation';\r\nimport './representation/dihedral-representation';\r\nimport './representation/dihedral-histogram-representation';\r\nimport './representation/distance-representation';\r\nimport './representation/helixorient-representation';\r\nimport './representation/hyperball-representation';\r\nimport './representation/label-representation';\r\nimport './representation/licorice-representation';\r\nimport './representation/line-representation';\r\nimport './representation/molecularsurface-representation';\r\nimport './representation/point-representation';\r\nimport './representation/ribbon-representation';\r\nimport './representation/rocket-representation';\r\nimport './representation/rope-representation';\r\nimport './representation/spacefill-representation';\r\nimport './representation/trace-representation';\r\nimport './representation/tube-representation';\r\nimport './representation/unitcell-representation';\r\nimport './representation/validation-representation';\r\nimport BufferRepresentation from './representation/buffer-representation';\r\nimport ArrowBuffer from './buffer/arrow-buffer';\r\nimport BoxBuffer from './buffer/box-buffer';\r\nimport ConeBuffer from './buffer/cone-buffer';\r\nimport CylinderBuffer from './buffer/cylinder-buffer';\r\nimport EllipsoidBuffer from './buffer/ellipsoid-buffer';\r\nimport MeshBuffer from './buffer/mesh-buffer';\r\nimport OctahedronBuffer from './buffer/octahedron-buffer';\r\nimport PointBuffer from './buffer/point-buffer';\r\nimport SphereBuffer from './buffer/sphere-buffer';\r\nimport TetrahedronBuffer from './buffer/tetrahedron-buffer';\r\nimport TextBuffer from './buffer/text-buffer';\r\nimport TorusBuffer from './buffer/torus-buffer';\r\nimport WidelineBuffer from './buffer/wideline-buffer';\r\n//\r\nimport './parser/cif-parser';\r\nimport './parser/gro-parser';\r\nimport './parser/mmtf-parser';\r\nimport './parser/mol2-parser';\r\nimport './parser/pdb-parser';\r\nimport './parser/pdbqt-parser';\r\nimport './parser/pqr-parser';\r\nimport './parser/sdf-parser';\r\nimport './parser/prmtop-parser';\r\nimport './parser/psf-parser';\r\nimport './parser/top-parser';\r\nimport './parser/dcd-parser';\r\nimport './parser/nctraj-parser';\r\nimport './parser/trr-parser';\r\nimport './parser/xtc-parser';\r\nimport './parser/cube-parser';\r\nimport './parser/dsn6-parser';\r\nimport './parser/dx-parser';\r\nimport './parser/dxbin-parser';\r\nimport './parser/mrc-parser';\r\nimport './parser/xplor-parser';\r\nimport './parser/kin-parser';\r\nimport './parser/obj-parser';\r\nimport './parser/ply-parser';\r\nimport './parser/csv-parser';\r\nimport './parser/json-parser';\r\nimport './parser/msgpack-parser';\r\nimport './parser/netcdf-parser';\r\nimport './parser/text-parser';\r\nimport './parser/xml-parser';\r\nimport './parser/validation-parser';\r\n//\r\nimport Shape from './geometry/shape';\r\nimport Kdtree from './geometry/kdtree';\r\nimport SpatialHash from './geometry/spatial-hash';\r\nimport Structure from './structure/structure';\r\nimport MolecularSurface from './surface/molecular-surface';\r\nimport Volume from './surface/volume';\r\n//\r\nimport './utils/gzip-decompressor';\r\n//\r\nimport './datasource/rcsb-datasource';\r\nimport './datasource/pubchem-datasource';\r\nimport './datasource/passthrough-datasource';\r\nimport StaticDatasource from './datasource/static-datasource';\r\nimport MdsrvDatasource from './datasource/mdsrv-datasource';\r\n//\r\nexport { LeftMouseButton, MiddleMouseButton, RightMouseButton } from './constants';\r\nimport MouseActions from './controls/mouse-actions';\r\nimport KeyActions from './controls/key-actions';\r\nimport PickingProxy from './controls/picking-proxy';\r\n//\r\nexport { Signal } from 'signals';\r\nexport { Matrix3, Matrix4, Vector2, Vector3, Box3, Quaternion, Euler, Plane, Color } from 'three';\r\n//\r\nexport { UIStageParameters } from './ui/parameters';\r\n//\r\nimport Version from './version';\r\n// MARILIA codes\r\nimport CustomComponent from \"./marilia_custom_classes/CustomComponent\";\r\nif (!window.Promise) {\r\n    window.Promise = _Promise;\r\n}\r\nexport { Version, StaticDatasource, MdsrvDatasource, Colormaker, Selection, PdbWriter, SdfWriter, StlWriter, Stage, Collection, ComponentCollection, RepresentationCollection, Component, ShapeComponent, StructureComponent, SurfaceComponent, VolumeComponent, Assembly, TrajectoryPlayer, Superposition, Frames, Queue, Counter, BufferRepresentation, ArrowBuffer, BoxBuffer, ConeBuffer, CylinderBuffer, EllipsoidBuffer, MeshBuffer, OctahedronBuffer, PointBuffer, SphereBuffer, TetrahedronBuffer, TextBuffer, TorusBuffer, WidelineBuffer, Shape, Structure, Kdtree, SpatialHash, MolecularSurface, Volume, MouseActions, KeyActions, PickingProxy, CustomComponent };\r\n//# sourceMappingURL=ngl.js.map"],"names":["arguments","const","let","chroma\r\n        .scale","test","prototypeAccessors","super","ColormakerRegistry","this","WorkerRegistry","_WorkerRegistry","_ColormakerRegistry","ParserRegistry","_ParserRegistry","signalsWrapper.Signal","i","c","angle","b","dx","dy","tmpRotateMatrix","tmpRotateVector","distance","prototypeAccessors$1","Worker","k3","tmpVec","size","n","k","state","invalidAtomContact","offset","outOfPlane","tmpColor","j","swap","scale","a","wireframeIndex","tmpRotateQuaternion","tmpMatrix","Kdtree","_Kdtree","index","ai3","t","getHash","matrix","iy","ix","iz","idx","val","d","name","atomSet","getData","s","mapping","mappingIndices","MappedAlignedBoxBuffer","y","x","q","quadIndices","getSize","eye","target","up","getGeo","resname","chainname","inscode","resno","reWhitespace","ensureArray","ls","dates","depDates","r","reTrimQuotes","listMasters","listColor","listName","label","color","position","groupName","groupMasters","key","groupFlags","sele","jl","il","g","ga","clashes","atomDict","ca","ungzip","baseUrl","data.version"],"mappings":"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C;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IACjB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,KAAK,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;IAClB,QAAQ,CAAC,WAAW,GAAG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E,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG;CACzqC,CAAC;AACF,AAAOA,IAAM,mBAAmB,GAAG,CAAC,CAAC;AACrC,AAKA;AACA,AAAOA,IAAM,QAAQ,GAAG;IACpB,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;CAC7mC,CAAC;AACF,AAAOA,IAAM,gBAAgB,GAAG,GAAG,CAAC;AACpC,AA8tBA;AACA,AAAOA,IAAM,aAAa,GAAG;IACzB,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,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AAC,CAAC,CAAC;AACjC,AAAOA,IAAM,wBAAwB,GAAG;IACpC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,C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,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;IAC3E,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,E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K,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK;QACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK;QACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG;KACvD,CAAC,CAAC;CACN;AACD,SAAS,WAAW,GAAG;IACnB,OAAO,IAAI,UAAU,CAAC;QAClB,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC9D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QACnD,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACnD,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1D,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/C,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/C,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAClD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/C,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAClD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/C,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAClD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACjD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC1D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACpD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3D,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;KACjE,CAAC,CAAC;CACN;;;;;;;;;;;;;;;;AAgBD,SAAS,kBAAkB,GAAG;IAC1B,OAAO;QACH,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CA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,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;IAClB,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IAC1C,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IAC1C,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IAC1C,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IAC1C,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IAC1C,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IAC1C,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IAC1C,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IAC1C,EAAE,CAAC,CAAC,CAAC,GAAG,GA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AAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;IAClCA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACjBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBA,IAAM,GAAG,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAClB,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IACvD,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IACvD,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IACvD,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IACxD,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IACvD,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IACvD,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;IACvD,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG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,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAChC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAChC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAChC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACjC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAChC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAChC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAChC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACjC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACj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CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1E,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC9E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC1E,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACtE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACvE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1E,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACvE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3E,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IAC9E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;CAC/E,CAAC;AACFA,IAAM,QAAQ,GAAG;;IAEb,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IACrF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACrF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAChF,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACrF,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1F,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACjF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAClF,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACpF,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACvF,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACvF,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACpF,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACtF,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACtF,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3F,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAChF,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IACtF,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1F,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxF,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACtF,CAAC,CAAC,CAAC,EAAE,CAAC,CAA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Cd,GAAG,EAAE,QAAQ;IACb,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,GAAG,EAAE,QAAQ;IACb,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,GAAG,EAAE,QAAQ;IACb,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IACd,IAAI,EAAE,QAAQ;IA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CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrD,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACrD,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACrD,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACvD,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACrD,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACvD,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACrD,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACvD,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACrD,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,C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"}